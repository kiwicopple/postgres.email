--
-- PostgreSQL database dump
--

-- Dumped from database version 14.2 (Debian 14.2-1.pgdg110+1)
-- Dumped by pg_dump version 14.3

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;



--
-- Name: raw_imap_messages; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.raw_imap_messages (
    "timestamp" timestamp with time zone,
    from_email text,
    subject text,
    message_id text,
    to_addresses jsonb,
    cc_addresses jsonb,
    bcc_addresses jsonb,
    seq_num bigint,
    size bigint,
    attachments jsonb,
    body_html text,
    body_text text,
    embedded_files jsonb,
    errors jsonb,
    flags jsonb,
    from_addresses jsonb,
    headers jsonb,
    in_reply_to jsonb,
    mailbox text,
    query text,
    _ctx jsonb
);




--
-- Data for Name: raw_imap_messages; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.raw_imap_messages ("timestamp", from_email, subject, message_id, to_addresses, cc_addresses, bcc_addresses, seq_num, size, attachments, body_html, body_text, embedded_files, errors, flags, from_addresses, headers, in_reply_to, mailbox, query, _ctx) FROM stdin;
2022-07-13 16:33:12+00	isaac.morland@gmail.com	Re: Bug: Reading from single byte character column type may cause out of bounds memory reads.	<CAMsGm5fqyTK1v_oX5NF259cZXEVL-d=4hCwdD5GEus66sxZ-1g@mail.gmail.com>	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}]	[{"Name": "Spyridon Dimitrios Agathos", "Address": "spyridon.dimitrios.agathos@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	2	11804	[]	<div dir="ltr"><div dir="ltr">On Wed, 13 Jul 2022 at 09:15, Aleksander Alekseev &lt;<a href="mailto:aleksander@timescale.com">aleksander@timescale.com</a>&gt; wrote:<br></div><div class="gmail_quote"><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex">\r\nI can confirm the bug exists in the `master` branch as well and<br>\r\ndoesn&#39;t depend on the platform.<br>\r\n<br>\r\nAlthough the bug is easy to fix for this particular case (see the<br>\r\npatch) I&#39;m not sure if this solution is general enough. E.g. is there<br>\r\nsomething that generally prevents pg_mblen() from doing out of bound<br>\r\nreading in cases similar to this one? Should we prevent such an INSERT<br>\r\nfrom happening instead?<br></blockquote><div><br></div><div>Not just INSERTs, I would think: the implicit cast is already invalid, since the &quot;char&quot; type can only hold characters that can be represented in 1 byte. A comparable example in the numeric types might be:</div><div><br></div><div>odyssey=&gt; select (2.0 ^ 80)::double precision::integer;<br>ERROR: ¬†integer out of range<br></div><div><br></div><div>By comparison:</div><div><br></div><div>odyssey=&gt; select &#39;üÄÜ&#39;::&quot;char&quot;;<br>¬†char <br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>¬†<br>(1 row)<br></div><div><br></div><div>I think this should give an error, perhaps &#39;ERROR: &quot;char&quot; out of range&#39;.</div><div><br></div><div>Incidentally, if I apply ascii() to the result, I get sometimes 0 and sometimes 90112, neither of which should be a possible value for ascii () of a &quot;char&quot; value and neither of which is 126982, the actual value of that character.</div><div><br></div><div>odyssey=&gt; select ascii (&#39;üÄÜ&#39;::&quot;char&quot;);<br>¬†ascii <br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>¬†90112<br>(1 row)<br><br>odyssey=&gt; select ascii (&#39;üÄÜ&#39;::&quot;char&quot;);<br>¬†ascii <br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>¬† ¬† ¬†0<br>(1 row)<br></div><div><br></div><div>odyssey=&gt; select ascii (&#39;üÄÜ&#39;);<br>¬†ascii ¬†<br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>¬†126982<br>(1 row)<br></div><div><br></div></div></div>\r\n	On Wed, 13 Jul 2022 at 09:15, Aleksander Alekseev <aleksander@timescale.com>\r\nwrote:\r\n\r\nI can confirm the bug exists in the `master` branch as well and\r\n> doesn't depend on the platform.\r\n>\r\n> Although the bug is easy to fix for this particular case (see the\r\n> patch) I'm not sure if this solution is general enough. E.g. is there\r\n> something that generally prevents pg_mblen() from doing out of bound\r\n> reading in cases similar to this one? Should we prevent such an INSERT\r\n> from happening instead?\r\n>\r\n\r\nNot just INSERTs, I would think: the implicit cast is already invalid,\r\nsince the "char" type can only hold characters that can be represented in 1\r\nbyte. A comparable example in the numeric types might be:\r\n\r\nodyssey=> select (2.0 ^ 80)::double precision::integer;\r\nERROR:  integer out of range\r\n\r\nBy comparison:\r\n\r\nodyssey=> select 'üÄÜ'::"char";\r\n char\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n\r\n(1 row)\r\n\r\nI think this should give an error, perhaps 'ERROR: "char" out of range'.\r\n\r\nIncidentally, if I apply ascii() to the result, I get sometimes 0 and\r\nsometimes 90112, neither of which should be a possible value for ascii ()\r\nof a "char" value and neither of which is 126982, the actual value of that\r\ncharacter.\r\n\r\nodyssey=> select ascii ('üÄÜ'::"char");\r\n ascii\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n 90112\r\n(1 row)\r\n\r\nodyssey=> select ascii ('üÄÜ'::"char");\r\n ascii\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n     0\r\n(1 row)\r\n\r\nodyssey=> select ascii ('üÄÜ');\r\n ascii\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n 126982\r\n(1 row)\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Isaac Morland", "Address": "isaac.morland@gmail.com"}]	{"Cc": ["Spyridon Dimitrios Agathos <spyridon.dimitrios.agathos@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Aleksander Alekseev <aleksander@timescale.com>"], "Date": ["Wed, 13 Jul 2022 12:33:12 -0400"], "From": ["Isaac Morland <isaac.morland@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Bug: Reading from single byte character column type may cause out of bounds memory reads."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657730014; cv=none; d=google.com; s=arc-20160816; b=ms+7MBH/44Z/FyqU0oRvcAoXGgenBO4T/NbG1iW8tvHju72YWe4fJeyZ1IEk5hOE/c Z19Gww2rKpl7Qwcfgjah8xjGR2vkZVjv2DL49Ndfz9Wru3UhJjbSF90uZg1hLp2ByvAb kiqNkSsDA/Y+e7/TsmdkxWi2JQ50VPSa63JySi8DpozB7wC/z8jUdlB6p8QMbrz+YzbR CjdP7FANPkOQYzl9wQu23fUEVeIlQuhh4hfRl18y8zieLFA27P1vtQmcJteModZZ794N OKoSYbdjXyGwiHf1EEXcc5D4YwN9YS4ig5gDcCPp+tBQ82s7UgVkQkNDGoCXylnojnyZ RmIA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp252885lfl; Wed, 13 Jul 2022 09:33:34 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 3-20020a670303000000b00353999939f6si2576046vsd.522.2022.07.13.09.33.34 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 09:33:34 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410545@lists.postgresql.org>) id 1oBfIr-0006g1-Km for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 16:33:33 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <isaac.morland@gmail.com>) id 1oBfIm-00058W-Se for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 16:33:28 +0000", "from mail-pj1-x1030.google.com ([2607:f8b0:4864:20::1030]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <isaac.morland@gmail.com>) id 1oBfIk-0007nI-B3 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 16:33:28 +0000", "by mail-pj1-x1030.google.com with SMTP id o3-20020a17090a744300b001ef8f7f3dddso4481836pjk.3 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 09:33:25 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAMsGm5fqyTK1v_oX5NF259cZXEVL-d=4hCwdD5GEus66sxZ-1g@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAFM5RapGbBQm+dH=7K80HcvBvEWiV5Tm7N=NRaYURfm98YWc8A@mail.gmail.com> <CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"], "X-Received": ["by 2002:a67:ce09:0:b0:357:31ce:8872 with SMTP id s9-20020a67ce09000000b0035731ce8872mr1747412vsl.5.1657730014783; Wed, 13 Jul 2022 09:33:34 -0700 (PDT)", "by 2002:a17:902:f101:b0:16c:7f7f:958a with SMTP id e1-20020a170902f10100b0016c7f7f958amr2848913plb.86.1657730003484; Wed, 13 Jul 2022 09:33:23 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAMsGm5fqyTK1v_oX5NF259cZXEVL-d%3D4hCwdD5GEus66sxZ-1g%40mail.gmail.com>"], "In-Reply-To": ["<CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410545@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000fdc4ac05e3b257f5\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410545@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=yv6g+Y7IjRYUGcUrXVn3GSNI+RLCwCYkAkiOcDkez88=; b=JIO5hCwvQG6IYAfGHUYAHeWa/jMUUqiC/zBQIBqAg/sUfw01mUNddyK9Uw/lX7re4Y gZ+aHV6xtVqJGurweDA4+IDRFGVr1cACMFk2kfzr4yT3UAYzvDbtJLyv9pEfOxP5fPLN 83a+JLKexUzhjBWpKz6BNe1O+KuDd1R/Kw0zb/TQR6pN5+sip7V2kfzEufvzIi8OCGrI SCi9hQfTkQDuKOshANnZHv1VrsVkBj5xfWO8G6TRgAZ2O/uUHeTCMsVawRtJX4UF8rjh B8gKOq4IFQdjqJLgO69buWbBh3nIJ/IDHdueBhWoWgu/zjFWRNZNH6VtQmH3igPASENM jAAQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/OFrcS/FLqDQRTj5IC1k8tY307hnxBHGZhlYrW4/V1eJnn9wH6 grCkLgU6Ic89qijVuaZ+TG+hwS2UZStFDlJJbWA="], "X-Google-Smtp-Source": ["AGRyM1tuSKUvESGeFvfwRjLysHYWWkwviJoPFXUCgPvmdB6VzbVVwMBSFAw8zW7g3DU0WbcB3B2v"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=yv6g+Y7IjRYUGcUrXVn3GSNI+RLCwCYkAkiOcDkez88=; b=o8UL4dHEh9m8pORdVDgfGitwkVjQK2umlGBtO+M1S2W+hO+Y2sCzHX7beE7wBtHgSw de47Yj67VEI5ku1Bf9v5FX2EMXeY3NN29EM2oTxoSEWF+OUM/nS4L2qQlNWUaIoCCCLn kkn4TTa2mj2cVK92RnXWsLgS4i/axjEIfcajN4DJbpBclZ/GusPCpy63eQBPVA/3IDNS 3ZmK3mhqiY05wrA+Q/+rZPJNRajXkGyBOB73M7mFS/PphloKpOL34SOrrMMYhpsZC451 YD7F56C6TqIzKy9fI4+Uc+UMqowWsdkFdZ46GYXXu+cbayECzBrorRy2JmPapur5DoGN Sz1g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=JIO5hCwv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410545@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410545@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=yv6g+Y7IjRYUGcUrXVn3GSNI+RLCwCYkAkiOcDkez88=; b=3TV27Ty3No5fqbsqxpKDTfu/PrXmzA3qZzdFSTL3JNS5P5+fnOE/RORTxYDq468uU6 WyD+aTuOgSfSVm1xB3zZHIzC48cNIauRnJPeK5TyGme3UXvm77f7vmaFgtcBqbXR3AwU grvreadnxm12RH6IR7I3yHH19qdUh4LU6S8hLWYXI0sf33I/7GOj4+m/+gduJ6LdtLe0 tBzKd0dkKu90Xk9VJLRBomQ+nnGo5+IUZzrTRnwWYV23G5PhHZt6LLLs9GlEaVQ1Viv7 fYwThJTPDyLFbtSkepb15D0EM8/bJDdTkr1F0JdvHgjlk33/2gfI/ujef4PCXY2h8eEx N2Lg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=JIO5hCwv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410545@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410545@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 16:43:45+00	alvherre@alvh.no-ip.org	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220713164345.j3n67rc45rpa4vop@alvherre.pgsql>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	1	27939	[{"charset": "us-ascii", "part_id": "2", "file_name": "v24-0001-Fix-replay-of-create-database-records-on-standby.patch", "disposition": "attachment", "content_type": "text/x-diff"}]		Not a review, just a preparatory rebase across some trivially\r\nconflicting changes.  I also noticed that\r\nsrc/test/recovery/t/031_recovery_conflict.pl, which was added two days\r\nafter v23 was sent, and which uses allow_in_place_tablespaces, bails out\r\nbecause of the checks introduced by this patch, so I made the check\r\nroutine do nothing in that case.\r\n\r\nAnyway, here's v24.\r\n\r\n-- \r\n√Ålvaro Herrera        Breisgau, Deutschland  ‚Äî  https://www.EnterpriseDB.com/\r\n"La conclusi√≥n que podemos sacar de esos estudios es que\r\nno podemos sacar ninguna conclusi√≥n de ellos" (Tanenbaum)\r\n	[{"charset": "UTF-8", "part_id": "1", "disposition": "inline", "content_type": "text/plain", "orig_charset": "utf-8"}]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Wed, 13 Jul 2022 18:43:45 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657730643; cv=none; d=google.com; s=arc-20160816; b=m6/I3HwShjogdvEojTt8EyE9KOlqTQ9uCYDp9sUoNf7bzcuNp0h+qrerozgCpgF4b4 fJBL/2S3jJVlFFCSzhNJg3vJatUXMYjFOwKB9HuXKzBaddlocCRS0SIeWr6ISkQVlUqy EXHiGNS+Z4MVMdP2V5UkLHls7AEuLWs9MW/P1NEFGbnNKivxpG9BWNQH1C6JkZpBgRNi fNZe1J/rpfSoqFo9UrBVAnM0w4Nwa70p/k9acaxWqP1mImHyEWfTFzux2/lNZeOtU8FR F4piEiyC7FS9U6HhVlYKHxC+1sH6l492DSKUQ3f9LvfHy8t2LQhPLuxBKYZBpT88H01t c9Tw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp256963lfl; Wed, 13 Jul 2022 09:44:03 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o2-20020a05600c4fc200b003a2e7b3712asi3798907wmq.190.2022.07.13.09.44.03 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 09:44:03 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410547@lists.postgresql.org>) id 1oBfT1-00073K-Dj for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 16:44:03 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBfSw-0005Ds-Bo for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 16:43:58 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBfSo-0007rg-SM for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 16:43:57 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id 826D65C0165; Wed, 13 Jul 2022 12:43:49 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute2.internal (MEProxy); Wed, 13 Jul 2022 12:43:49 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 12:43:48 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id EF7BB36E; Wed, 13 Jul 2022 18:43:45 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713164345.j3n67rc45rpa4vop@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:RfbOYkxMWCAug9DdoPtxAISK-eK4u_opDLEpJ5fqtHkWtWLmgPoLIA> <xmx:RfbOYrSIeJS0FTJGpj7gf8tQA3peXgO5qrDM5-VsLTIO5Vf9liT_4w> <xmx:RfbOYvaI-iBruY6hDig7xHjWxRS3h7QNBMygRr5KMaxiWqpexPx0KA> <xmx:RfbOYpN5xZhJ7_oo8PaHIKJgUvT_LvTDActTuiZTKbJo3pTacUMGNQ>"], "X-Received": ["by 2002:a5d:595f:0:b0:21d:78fd:70d6 with SMTP id e31-20020a5d595f000000b0021d78fd70d6mr4121180wri.402.1657730643744; Wed, 13 Jul 2022 09:44:03 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713164345.j3n67rc45rpa4vop%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220405.171857.1673205520427411283.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410547@lists.postgresql.org>"], "X-Me-Sender": ["<xms:RfbOYmDZgfWskFrIoiU5u9clXSKu_uODXE6OuA21Mv2ofnwLk63IbA> <xme:RfbOYgjqCx4ggiEnV-CqYAjl4b3W77FH_6abBXihWIUt0y3MHxxc8MMLZrSU9irko B8T8lqXuhiuciqWag>"], "Content-Type": ["multipart/mixed; boundary=\\"fjxxjvhdbrq5f7rb\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410547@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:RfbOYpktFiayJMwkIhyOprXW7tuWK_1B9SsLCaHmNvwV9QIIG2NUoLWmVc_8Zz0MRtzwWtgRhehgevbBvk7i8_WNSYwE0p4fEs8Gt1hwhvS1qunBtOLQh7lAocBurnEnFsg>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657730629; x=1657817029; bh=x QRZEzyYU1UzPAS6me3yWv/ajxY61wI9HNtPW5G3d2g=; b=pAt2fiAYnZEXUYD7p l5TcKG+yUoJzR/solm2RL8aZV/LgIozwKPw6rcM6MOcsiLGPSem2rIcNl9SO5tcz 1vcL8BCXlUOF6EHNZjSUrUQ0FEx8nSdkuZVBvPrFLItZaPytq1jf4ywkOBqielB+ 4e4JTR1/A7d6QJtC/QlJwW4ndnjuqCTZ8VEqZp1E8HaQb+g9auFFvoiQdS1Fn9Tv gB7Rohtv/+uqdZM4wv+8+g0Ko++7wpHZBpiuBj7KXU7GLdbsle5R26A9xX/fw2zV U9TSG0cfnoqJfsvgXeyoE8pJIAU20VSue4+XN5lGsgO5QVCV7vSWXFzj4TnxwDEZ ev5IA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedguddtgecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepfffhvfevuffkgggtugfgjgesmh ekreertddtjeenucfhrhhomheptehlvhgrrhhoucfjvghrrhgvrhgruceorghlvhhhvghr rhgvsegrlhhvhhdrnhhoqdhiphdrohhrgheqnecuggftrfgrthhtvghrnhepudelkeekgf dttdettdekgfduvdeiffelteegjeeihfetheekveeftedtuddvhfeunecuffhomhgrihhn pegvnhhtvghrphhrihhsvggusgdrtghomhenucevlhhushhtvghrufhiiigvpedtnecurf grrhgrmhepmhgrihhlfhhrohhmpegrlhhvhhgvrhhrvgesrghlvhhhrdhnohdqihhprdho rhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vK6S6u2QLnroBxCPR8rEUVRajgjbOqg4XiS3A7lMN7HwR3khRB6dseaNtI1DtbO5euQWIc"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=xQRZEzyYU1UzPAS6me3yWv/ajxY61wI9HNtPW5G3d2g=; b=koWxU8P9p5w8pXJzXmo0VjDQOvebAhx/BrvxGiQhP52oAFJsY9jQfwi8DFkJEyMnVZ cCbYDh1dCFnTluHwQVxSuZO4XrVyzM6NIpLNsQvTr1xjRCHu6VwukELYNGnAqVwbvHiy 0vQHjqROo5/oebsv/+yT4P0ONeHAJ2Gf0+h32dBpMiXCl3v3jKoiRVO8Z/26YaoHv+xX vSc9kwlyHfuV+NVAQSk0C1cwpyTU+Aa7AxLz80TidRntoHgjxCmX0AJf/KOFaXBp+84v NW7jSF+Fy4PKJkeM551+GMor1lGO22jdchuWlSlq1T3ue1nuItARgsQrbU0eUhn1QZ5S 7OXA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=pAt2fiAY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410547@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410547@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=pAt2fiAY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410547@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410547@lists.postgresql.org"]}	["<20220405.171857.1673205520427411283.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:00:36+00	tgl@sss.pgh.pa.us	Re: make update-po@master stops at pg_upgrade	<2364035.1657731636@sss.pgh.pa.us>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	3	5901	[]		I wrote:\r\n> Kyotaro Horiguchi <horikyota.ntt@gmail.com> writes:\r\n>> Since backend does that way, I think we can do that the same way\r\n>> also for the tools. Attached second does that except for tools that\r\n>> have only one *.c.  The patch doesn't make a difference in the result\r\n>> of make update-po.\r\n\r\n> Still, wildcarding the local *.c references seems like a clear step\r\n> forward.  I'll go push that part.\r\n\r\nI had to recreate the patch almost from scratch, because 88dad06b4\r\ntouched adjacent lines in most of these files, scaring patch(1)\r\naway from applying the changes.  That being the case, I decided\r\nto use $(wildcard *.c) everywhere, including the places where there's\r\ncurrently just one *.c file.  It seems to work for me, but please check.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["pgsql-hackers@lists.postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Wed, 13 Jul 2022 13:00:36 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657731645; cv=none; d=google.com; s=arc-20160816; b=S2sHfA9MQ+1ZnamTIZQrFzSTs0L66f56/rhPKWd+9sYfN+X3LeNbrhDnhB5Augh/9H 3K3Uiemgp9gA4tHSlVs/yOATFRpKhxZYv6+a3O6Qp0KnrfgJmfQYPijlPvOrRnHFGd8N Xu5/DgyDKx+o5bWXCfy+y8kJbsGgs4bXVjMmrljrOBpjaxbfEORMmaQgnVFlFmOYlQZ2 QdW1G5GtNUOxmFiA5XzWYA6pn5Ij75ksSzeFBTbC6HjSmTPyAKu/50yPLe+jZ6k0B/hc 9vnfblAC+EKMBmg4i8OBk1n9WyOAJVE1J2JpU1DP6kEEAKq3DadadRGs4mz6XxYfOigA f5PQ=="], "Comments": ["In-reply-to Tom Lane <tgl@sss.pgh.pa.us> message dated \\"Wed, 13 Jul 2022 12:07:19 -0400\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp262756lfl; Wed, 13 Jul 2022 10:00:45 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id a1-20020a671a01000000b003573485c9d0si2658012vsa.246.2022.07.13.10.00.45 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:00:45 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410550@lists.postgresql.org>) id 1oBfjA-0003yk-O8 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:00:44 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBfj6-0002OI-4z for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:00:40 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBfj4-0008Fr-0B for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:00:39 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DH0aVg2364036; Wed, 13 Jul 2022 13:00:36 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2364034.1657731636.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2364035.1657731636@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us>"], "X-Received": ["by 2002:a67:e15b:0:b0:357:1b99:f21d with SMTP id o27-20020a67e15b000000b003571b99f21dmr1865891vsl.66.1657731645783; Wed, 13 Jul 2022 10:00:45 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2364035.1657731636%40sss.pgh.pa.us>"], "In-Reply-To": ["<2328143.1657728439@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410550@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410550@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uXhZPidTIQ9B7sHw9K7xPGnv0Q9EbpTq2EzpOjsxhTiwHDQN9O/+oKVwv2LbPVpdFOfVkV"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=UeSsPQN++NWRTQfl7tZvyJO/izSC29AEoyXQ04OwrDg=; b=S1N5SAh+SICSX4fsb3TVHCbFJRy1g8bFy7eeMRWxAkTj4rrL/RzhUzn1+oM6sdNnSR bZtLyjt+gsoaxrIwjBQQ/chYF4HIHtN0GUz27Pbg5mceYe3urtxkw5RqnsHC4NqQ3+BK sRBPl0RU5t9Rg9QkOYVODbOpWvTcVoIKkQhiR3aic4LVbcb+41CKBcAcsPTdaB7JT4Wa TioiSxSHBjXRasFSfLhI2WNzEew0f8WZ2a5O8OWCMF4DDXP21tKIQntGrJukCyAwaZTk qq/3wrlyJMYE5Aak1cM/ZIZ4oAysYjK4WF6NivWGNzghRolGCxai8miF/3tjpmGB8LlT FJnw=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410550@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410550@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410550@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410550@lists.postgresql.org"]}	["<2328143.1657728439@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:09:50+00	nathandbossart@gmail.com	optimize lookups in snapshot [sub]xip arrays	<20220713170950.GA3116318@nathanxps13>	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	\N	4	18483	[{"charset": "us-ascii", "part_id": "2", "file_name": "v1-0001-Optimize-lookups-in-snapshot-transactions-in-prog.patch", "disposition": "attachment", "content_type": "text/x-diff"}]		Hi hackers,\r\n\r\nA few years ago, there was a proposal to create hash tables for long\r\n[sub]xip arrays in snapshots [0], but the thread seems to have fizzled out.\r\nI was curious whether this idea still showed measurable benefits, so I\r\nrevamped the patch and ran the same test as before [1].  Here are the\r\nresults for 60‚Çãsecond runs on an r5d.24xlarge with the data directory on\r\nthe local NVMe storage:\r\n\r\n     writers  HEAD  patch  diff\r\n    ----------------------------\r\n     16       659   664    +1%\r\n     32       645   663    +3%\r\n     64       659   692    +5%\r\n     128      641   716    +12%\r\n     256      619   610    -1%\r\n     512      530   702    +32%\r\n     768      469   582    +24%\r\n     1000     367   577    +57%\r\n\r\nAs before, the hash table approach seems to provide a decent benefit at\r\nhigher client counts, so I felt it was worth reviving the idea.\r\n\r\nThe attached patch has some key differences from the previous proposal.\r\nFor example, the new patch uses simplehash instead of open-coding a new\r\nhash table.  Also, I've bumped up the threshold for creating hash tables to\r\n128 based on the results of my testing.  The attached patch waits until a\r\nlookup of [sub]xip before generating the hash table, so we only need to\r\nallocate enough space for the current elements in the [sub]xip array, and\r\nwe avoid allocating extra memory for workloads that do not need the hash\r\ntables.  I'm slightly worried about increasing the number of memory\r\nallocations in this code path, but the results above seemed encouraging on\r\nthat front.\r\n\r\nThoughts?\r\n\r\n[0] https://postgr.es/m/35960b8af917e9268881cd8df3f88320%40postgrespro.ru\r\n[1] https://postgr.es/m/057a9a95-19d2-05f0-17e2-f46ff20e9b3e%402ndquadrant.com\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n	[{"charset": "utf-8", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"To": ["pgsql-hackers@postgresql.org"], "Date": ["Wed, 13 Jul 2022 10:09:50 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["optimize lookups in snapshot [sub]xip arrays"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657732206; cv=none; d=google.com; s=arc-20160816; b=Ni2RDuu9T0EgNZzmf0WlNGHy3neNicLggyjQy4TViQyeRvS2+zlnOInrQ3zggB3aYA piZjVeVApktbNIDDDKQw365oYygJn/4LwFQ0ULy5lGNrkazhuR4t7fmNqzG3PxPvdke+ ehXqo2U9flcR/emPQb0x1osYueSVMq8ElZuzKEBsiruNcmyU0psKLxmbnFS4J5OMwlGc efNdIoz4MBAw2ZuvB4ou7stjPZaQ/6ILpITrAPc/af65A9bWBzFNkV5qFzorh2sQ7Fma 2WTs8arGaRxbWBDuPsuedLOyEmZQ473IPMr+0NhWqnYNfHOlUrVnIdU3LQ6DUspfYmBH tkVA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp267103lfl; Wed, 13 Jul 2022 10:10:06 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d6-20020a5d6446000000b0021b91a262f8si14890969wrw.593.2022.07.13.10.10.06 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:10:06 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410553@lists.postgresql.org>) id 1oBfsD-0002vi-Tp for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:10:05 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBfs8-0001JO-UP for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:10:01 +0000", "from mail-pf1-x42e.google.com ([2607:f8b0:4864:20::42e]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBfs5-0000GU-1C for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 17:10:00 +0000", "by mail-pf1-x42e.google.com with SMTP id x184so10786746pfx.2 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 10:09:56 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id l14-20020a170903120e00b0016a7b9558f7sm9090061plh.136.2022.07.13.10.09.51 for <pgsql-hackers@postgresql.org> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:09:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713170950.GA3116318@nathanxps13>"], "Precedence": ["bulk"], "X-Received": ["by 2002:a05:600c:5026:b0:3a2:ea0c:ea8a with SMTP id n38-20020a05600c502600b003a2ea0cea8amr4513180wmr.53.1657732206231; Wed, 13 Jul 2022 10:10:06 -0700 (PDT)", "by 2002:a63:307:0:b0:412:9a58:e187 with SMTP id 7-20020a630307000000b004129a58e187mr3787898pgd.70.1657732193090; Wed, 13 Jul 2022 10:09:53 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713170950.GA3116318%40nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410553@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"+HP7ph2BbKc20aGI\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410553@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:subject:message-id:mime-version:content-disposition :content-transfer-encoding; bh=keehBLP4QJpaRsMbY5bBVT5++x6X5rWo5mNW+5P2IK4=; b=k5t4CHCdjQXEr57LcQnHalsg6+TiRUjD6Zceq+Iipf41wTOyjCHOsAipK/7RNXvJEI 7wT/Oq9zeRXlz9tg3zZ0l2JoGdL24c9pyb1YkQbWNCzJNU0eOS5JsK+lA+/5lPFxeQrE ma8UjXRzl2lUG0CNxSxrAa1pk3fyMBBzId3r4ORrTtXj8x3eOrFJ6X8OAZUfQgnt7i8J nSInmT8PUuCjPSDizubeIvuaJSnh1azUcCNttpeYd6BTnEG504VnWGNgVlLhOwrfP2Lv Se4a45z6nIjBJVurn7rQf8SHq0hN8pn17iveLhNJ7escLzYYUrdDic2tvfvpheHWM4A1 HA7A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora89CsFn0ZwhpBwzMX+1HKqHLLqWH4x0haQSBHEE5YYnvMlyg6Ua BAcx0uje38xwJULwDtYsBqSnwtWEC00="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sWS6xnX/KJhzLnmzycW10/ThYaTVFAjGvBU5hT70gKQtCtJF/JHbU0QfR7OjgjjSC18DTa"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:content-disposition:mime-version :message-id:subject:to:from:date:dkim-signature; bh=keehBLP4QJpaRsMbY5bBVT5++x6X5rWo5mNW+5P2IK4=; b=gfclgJwNbtL5nWs5t1436QMP05nOIB+tC0fPs1K+2quup+dDHkGNuXo1CKjcgHcA73 e0uURnp21VZKenXhJZXI9l8+DL3Wky5hPDJKFQRs5DWSWDLCJitbfTdQc2ngjhwPPAOT r/YUjVygkg9Aosg93tTY3wMRE1ejv3f9XobsT5vRMKuBxtxaRSM1aPHRo7GSqCVe3Ced vSg6oUMIsb3SlJqjwts4ehKswmOhv0mcYV8VoawecGfeZyXuWgbBjsLJTloBfhssLH3W l/sCwaTUqiRhmOeKlfUr1PNcnD8N3e26o89Tmbcve9Uqc6XKprVZ5gYp/WYca1Q9QD3M golA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=k5t4CHCd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410553@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410553@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:subject:message-id:mime-version :content-disposition:content-transfer-encoding; bh=keehBLP4QJpaRsMbY5bBVT5++x6X5rWo5mNW+5P2IK4=; b=rUlKOsnPf8VgmTayvr3PFlaohSK0RjeW9g5lh8NsbgWjKYdSn2+VSYlmrIjdYy7KpQ XyCcTATwHerZ1grSQTmxtzZvDP6RJRTQS2NVUynnql1feA51yAmybA+SG0TeeAPNc1pg +4iNGnfthBpPms5bgoRF6tDrDePekIEEhCnoI3Zkmn8V3m38q+guC9yaTtw7Qihp3/cV K2KnmnXUf51ag4DZ+PYlWXcSqQeP2HZ3Rg7BHjoN8rp9J40uqpg5jOXWyzH8hOYUHRAF MmL7aEX0tfZjWpOg2NwvzW6wfmnU/sSQ+6plzYGpdngOPS4C6ltCEui1Q4cUUM1PKqoq Exwg=="], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=k5t4CHCd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410553@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410553@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:25:05+00	alvherre@alvh.no-ip.org	Re: make update-po@master stops at pg_upgrade	<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	6	8962	[]		On 2022-Jul-13, Tom Lane wrote:\r\n\r\n> I had to recreate the patch almost from scratch, because 88dad06b4\r\n> touched adjacent lines in most of these files, scaring patch(1)\r\n> away from applying the changes.  That being the case, I decided\r\n> to use $(wildcard *.c) everywhere, including the places where there's\r\n> currently just one *.c file.  It seems to work for me, but please check.\r\n\r\nHmm, I got this failure:\r\n\r\nmake[4]: se entra en el directorio '/home/alvherre/Code/pgsql-build/master/src/interfaces/ecpg/ecpglib'\r\n/usr/bin/xgettext -ctranslator --copyright-holder='PostgreSQL Global Development Group' --msgid-bugs-address=pgsql-bugs@lists.postgresql.org --no-wrap --sort-by-file --package-name='ecpglib (PostgreSQL)' --package-version='16' -D /pgsql/source/master/src/interfaces/ecpg/ecpglib -D . -n -kecpg_gettext -k_ --flag=ecpg_gettext:1:pass-c-format --flag=_:1:pass-c-format \r\n/usr/bin/xgettext: no se especific√≥ el fichero de entrada\r\nPruebe '/usr/bin/xgettext --help' para m√°s informaci√≥n.\r\nmake[4]: *** [/pgsql/source/master/src/nls-global.mk:108: po/ecpglib.pot] Error 1\r\n\r\nThe error from xgettext, of course, is\r\n/usr/bin/xgettext: no input file given\r\n\r\n-- \r\n√Ålvaro Herrera        Breisgau, Deutschland  ‚Äî  https://www.EnterpriseDB.com/\r\n"Puedes vivir s√≥lo una vez, pero si lo haces bien, una vez es suficiente"\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Wed, 13 Jul 2022 19:25:05 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657733122; cv=none; d=google.com; s=arc-20160816; b=VbsJ+3fxhH9XtZSSYMCmXKtcLQX+qMVd7bJmzaT5B/gdOK4M8qGD+VixJLwc9vdTQm Db9UeCsW9Hn0SiDWOC7DleMCKBW2o/NfYw/s+IwbH+5R2PpI/rC0dbQqJ8TLRP4mJ8C6 fVGHyNJ9rfjvNMKrlht2f1jnf6cAhLNsI/LB3IXtPnhPwEPf1oXu2kQZWJuQSvgYgVIG IZjD7M+b1Sua9QmqUXHZ9jhevOMh0tv8Buwh7sYjYqvl40bDaTrk9QnVV7uTZXOgQCcH 9UHVXwbC62wC+MdBUI6Wx1KME7E9pG2w7rn0lVg2C0kb+4oSu09sshXuxgyJ3sAPFAih YXeg=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp273192lfl; Wed, 13 Jul 2022 10:25:22 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id w185-20020a1fadc2000000b0036bef9b47c3si2908635vke.209.2022.07.13.10.25.22 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:25:22 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410559@lists.postgresql.org>) id 1oBg6z-00024F-IU for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:25:21 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBg6u-0000Sy-Cu for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:25:16 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBg6p-0000Uc-7n for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:25:16 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id D6EC55C0156; Wed, 13 Jul 2022 13:25:07 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute5.internal (MEProxy); Wed, 13 Jul 2022 13:25:07 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 13:25:07 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id CDB1036E; Wed, 13 Jul 2022 19:25:05 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:8__OYkeGdDvqfCeYQ3sR0sBqZJnGtQcthFm7yEUcKExzZ3Qv5IQeMQ> <xmx:8__OYpO6-JiUsmHRd01cp5AP9xN_eledvEpViO-ZEf__myIVR_WPBw> <xmx:8__OYuke8pNnAvJrvVuv8cCI_MZI9gIzUr5bcupgdMwep8rQ0LCRlg> <xmx:8__OYn1zBaYwgK9JAfXY3n7dubfAg-4alG9cY7UORLtbmAV_Fm7kvg>"], "X-Received": ["by 2002:a05:6102:5047:b0:34b:d9ef:bd26 with SMTP id by7-20020a056102504700b0034bd9efbd26mr2037347vsb.14.1657733122681; Wed, 13 Jul 2022 10:25:22 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713172505.kotsc6i2eelq6j6b%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<2364035.1657731636@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410559@lists.postgresql.org>"], "X-Me-Sender": ["<xms:8__OYk87sAK3CXT_ZmTOikfKg4irRoSuRna_-hZST8a0Y0z2JIsuWg> <xme:8__OYstWHPFwZ7XSwGNbw6Es6rldNq8BTfJq1QMZZBIywWd944P-y9VubD5unUXeh gMX75S2HbBjhN4lcg>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410559@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:8__OYqCujyMUEIVaMa_H8PaC1kTyxO-ZOQcikY48kfpWgSNrLoaYVZ2wJgCwPLjDVZ76PIbro0n0tiSdn_SHUbQ5QS2Tz35fAiw-Bzp3BNm4Rdg81ETdL2YiNZzGVCZJvYg>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657733107; x=1657819507; bh=N G0RAJKVvdkvv1W3S2Zur7Bp6MQtD+YbyfYbVjACdSI=; b=LDH3/dJl4DS5f3QeU GBQvWyMVmh7GKnalK464IPjqfLJRkH5iD+FENEUMg0lE5Cc5UPpwTfe3AKX4OV66 6ShoApT9Im4RMGtkotx86sd+oyEAuDTwfyFJGV09lUY6C7EYMzWQF3t2LmDXLzpf PSicQpG27v1iiR4DX0CYRc7g3uD5sBourG8BEBxJOTKpz2jiucGxmBlFUvXUIPPK Lg3+wsrgAiXREq+femc4/iV12obNCOdRrIomlMlogUdh2ZvckS6PgsHdYlXDI/DW 736+Ke+WyUgo0rKUK3Bk2txrJuNe3op8dETsfLDTurbGDwB173IkfYDoYpCF3RPw 4AlLw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedgudduudcutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepfffhvfevuffkgggtugfgjgesth ekredttddtjeenucfhrhhomheptehlvhgrrhhoucfjvghrrhgvrhgruceorghlvhhhvghr rhgvsegrlhhvhhdrnhhoqdhiphdrohhrgheqnecuggftrfgrthhtvghrnhepvdektdffud fftdffffehfffhjeejhffgieeuueekjeekfffgudffhfduffffueevnecuffhomhgrihhn pegvnhhtvghrphhrihhsvggusgdrtghomhenucevlhhushhtvghrufhiiigvpedtnecurf grrhgrmhepmhgrihhlfhhrohhmpegrlhhvhhgvrhhrvgesrghlvhhhrdhnohdqihhprdho rhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vF5orQlC6Hf9lW59yEEOxFw5YIvrcWMu4iJp9SNoUwxe+GY5TKqoxaHKzMQuDAgwhB+X/3"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=NG0RAJKVvdkvv1W3S2Zur7Bp6MQtD+YbyfYbVjACdSI=; b=XbZC9XXz+Ku8LZhHSYEHtQ38HkMM1E8x1uV8aocscsvM9rP8aNE2F+OTDMf1A3bXqk rC1ifIZxY83lBpN02TuoiCxDhVlyMQx7QgXl4qxuah8gJ1QyKXB0gAq1pN4Y/GvuqEKU ZxUQZj/I3NuUBo8EcANPkOKcg4AeL9fk9YV/SbjDUhNJEhqKNkWm1FLlqKc8QKIbn5t/ WKGJld8XN+HykJntSI4kBj+G8A6TF9RSwXG+gCopOBgI2EB58qfMEEOKXBTldf9PJSd1 jZC/PityxsMK7mwMUeJNudhn7atFDpEzYJx5BIqsUnwTCyEB42DMYk60uQh4PmbFJGT+ Mv/Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"LDH3/dJl\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410559@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410559@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"LDH3/dJl\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410559@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410559@lists.postgresql.org"]}	["<2364035.1657731636@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:30:00+00	pryzby@telsasoft.com	Re: fix stats_fetch_consistency value in postgresql.conf.sample	<20220713173000.GD18011@telsasoft.com>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "andres@anarazel.de"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "nathandbossart@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	7	8457	[]		> +# The following parameters are defaultly set with\r\n> +# environment-dependent values at run-time which may not match the\r\n> +# default values written in the sample config file.\r\n> +my %ignore_parameters = \r\n> +  map { $_ => 1 } (\r\n> +\t  'data_directory',\r\n> +\t  'hba_file',\r\n> +\t  'ident_file',\r\n> +\t  'krb_server_keyfile',\r\n> +\t  'max_stack_depth',\r\n> +\t  'bgwriter_flush_after',\r\n> +\t  'wal_sync_method',\r\n> +\t  'checkpoint_flush_after',\r\n> +\t  'timezone_abbreviations',\r\n> +\t  'lc_messages',\r\n> +\t  'wal_buffers');\r\n\r\nHow did you make this list ?  Was it by excluding things that failed for you ?\r\n\r\ncfbot is currently failing due to io_concurrency on windows.\r\nI think there are more GUC which should be included here.\r\n\r\nhttp://cfbot.cputube.org/kyotaro-horiguchi.html\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["andres@anarazel.de, michael@paquier.xyz, nathandbossart@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Wed, 13 Jul 2022 12:30:00 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: fix stats_fetch_consistency value in postgresql.conf.sample"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657733414; cv=none; d=google.com; s=arc-20160816; b=sEMEYLI+8bqbXEYj0DWDvL5KOYokhentQCVDU23aLyC69i29L2GXBf1QdWM03Rr/0j 2bwYwxUYnsd6VUqC//xWOylXBdju08DMUIL0U5JqFU4u9J4kfz+92jaR0poJnNvIVG4X xeF2Iuoadbn4/Be7UyhZIbUIU6P2HaxMseWMFz6n+du83vLW+cprFrVpm7zxgItgMxXk KKU44HTJU+DSPmwkfXJnfIwgT8kcuvQraN00ZamAqVRkivNgYILH1VObk9O+E8GE3gOc 6wfuNCkjYRLXkZlNX/1Abes5328GpIQRzgXUM6ENVVOpfRCKA1IgAyPO+Qud5NElQ5FL e7Lw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp274864lfl; Wed, 13 Jul 2022 10:30:15 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id ce10-20020a056130110a00b00382a3d7c412si2839250uab.124.2022.07.13.10.30.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:30:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410562@lists.postgresql.org>) id 1oBgBh-0007Wj-VK for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:30:13 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBgBd-0005xu-0f for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:30:09 +0000", "from mail-io1-xd32.google.com ([2607:f8b0:4864:20::d32]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBgBY-0000Wk-7u for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 17:30:08 +0000", "by mail-io1-xd32.google.com with SMTP id h200so11507224iof.9 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 10:30:03 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id m13-20020a0566022acd00b0067bcc80ac23sm324147iov.1.2022.07.13.10.30.01 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Wed, 13 Jul 2022 10:30:01 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id 9746E800DAB; Wed, 13 Jul 2022 12:30:00 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713173000.GD18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<20220616132306.GD29853@telsasoft.com> <20220617.094358.2201653243066915172.horikyota.ntt@gmail.com> <20220622230710.r2m4ex5tlf6mveyh@alap3.anarazel.de> <20220630.173801.662386227537019720.horikyota.ntt@gmail.com>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a05:6130:291:b0:383:3b9:7024 with SMTP id q17-20020a056130029100b0038303b97024mr1938173uac.43.1657733414992; Wed, 13 Jul 2022 10:30:14 -0700 (PDT)", "by 2002:a02:c882:0:b0:33b:fb2e:9d49 with SMTP id m2-20020a02c882000000b0033bfb2e9d49mr2494124jao.218.1657733402217; Wed, 13 Jul 2022 10:30:02 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713173000.GD18011%40telsasoft.com>"], "In-Reply-To": ["<20220630.173801.662386227537019720.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410562@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410562@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to:user-agent; bh=ewuDDkXGQpKWYVL7KIvWJI8UtFbQv/hudiS12/DtDSY=; b=CIwTLy+8lo9eaPZiXWpchlAaOdcq1ck52s1mpEy/0PPJfX/ipjqRoZvanU4RuAEQGL C4gIc0gct1Ipn1MAV/S/8KKRalDgImGC1kIuSnCHTryvntR/drvDwIj2qaFRsxbKsTU7 GsnOU5Xmv0Xy6I5G2jI5K0DVgIG1C3t4X68V46SqLFKrLCIZs3A4sQ8OqAAba47C82p7 C6l1V1tNeVsu9fmJVPjsMcvF9W0d0Bwfw54PIJhhO8SFXykACRVthRDwNjaMc3qS7kh8 /Pn5ioef7sU+EeeQ2+S0JXQYPuJE12g0OqSVB3Unx+rGwgyUoF4Rp3u/F7UYL5tbvOx6 fJxg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9Q27gdGbvuJiv5krofwmjMoudahikPujMKDGZ+COFwL6yi5fjf a1t6tf1AHqt+2BCNRWdwcBwobw=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vZG5gTgO7WyPgruqsjByu8Wu+CeIkw8Oo7uzknEIqakW+SkESUYO4lW532x057ewLNGmNF"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=ewuDDkXGQpKWYVL7KIvWJI8UtFbQv/hudiS12/DtDSY=; b=jzThcfF5tES4e0H3IvDek5VB8Io8hApXuO5jCV0pDLUcAr76CKF5zJMZXobn3IK3ZW a/+BtDIbijwFkPIBAuPiYBxiVNKh2QdoQ+/lesXciE9wIlmvR5jvDZbtLwqRSLbMSBz6 tnznYNldoZ8fkYd/WcSGRuUgp/oBl6wGKReGKtgPEINSrwRrt3jv5Xs5rvS9dWbhkMiG 7jZ1bR4i8JDh1A2RYoGVwZMnIZS+eFv4mK0Pt45++fgziS2nsvzH4SAkV9Qyy4FX3j/I vx3/wCAE3uvLTkvun/z4zQP3HBGtUO+vQSb7Lhyh3DG6gqijb98Uth/2Nwmnf+CnroUT Gseg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=CIwTLy+8; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410562@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410562@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to:user-agent; bh=ewuDDkXGQpKWYVL7KIvWJI8UtFbQv/hudiS12/DtDSY=; b=pg1HKDT+Wxj/wvFMwsBS8ezcCx/uxg1WrPUONq/WamU8WKkpNcBfsU2cgkjeQKXIGn dzmlA4GVYS0+AbFGoxOQTVSy1bBuPraIhC/yIAD8ave4O2TiQdrgoEHCkDlf1g5v6Le2 o4dNSxvKbccfxDH0LvVMGtk3WWwS33OPPX53bjw1x8NAJNPSC3bUl92H8e1URtN49pBe hmGNUTqWMFJ5Psq3Zjcaw6uMgjpcrp7E4DuhF0JiFkhUwne/Y79Xi6Je31D38ppNxel5 eoDEjNM4EIzZHIkZHbgY+zUDrrerKhHruVPE+kWpmFYs4DfuGapmK+ItJAKAVHEi1fpd aR0A=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=CIwTLy+8; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410562@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410562@lists.postgresql.org"]}	["<20220630.173801.662386227537019720.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:09:15+00	peter.eisentraut@enterprisedb.com	Re: make update-po@master stops at pg_upgrade	<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	11	8520	[]		On 13.07.22 18:07, Tom Lane wrote:\r\n> Still, wildcarding the local *.c references seems like a clear step\r\n> forward.  I'll go push that part.\r\n\r\nIn some cases, the listed files are build output from another rule, for \r\nexample sql_help.c.  By using a wildcard, you just take whatever files \r\nhappen to be there, not observing proper make dependencies. \r\n(Conversely, you could also include files that are not part of the \r\nbuild, maybe leftover from something aborted.)  So I'm not sure this is \r\nsuch a clear win.  In any case, someone should check that this creates \r\nidentical output before and after.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Wed, 13 Jul 2022 20:09:15 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657735769; cv=none; d=google.com; s=arc-20160816; b=hL9pTbvdKxckrUSZSsRrV4hs5yyNar9I5fJTeBRGXxRkge2S+HE6CXGts3hs2RZ/Kj ZBiUcpwgRDUKBWemOhHpBGwqLC10OvIrPl98XcMV5rp5VEDzMoDCFWblYywKZIFHWO96 o6Hqq9Ahfpo5ozinLoVwke+PO6SrA/1YAQqJVY+rs4pP7PQrJcqxDKTmhBA6MeaB/ZKJ PdtXgSVcaZiqsmUM2rJtESHIBpww5xhwTLK0WCb4shNwFhkdMxSEJkKxtutj923okrPX AFrv5Y36E/r/BVrc16TMgf3eyMsxRTdeqps1CkPm1wZdPDMnTf7W1JJobouW5/k8TzyT pA6w=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp289373lfl; Wed, 13 Jul 2022 11:09:29 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b2-20020a5d5502000000b0021b8ddc9ae2si15277606wrv.287.2022.07.13.11.09.29 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:09:29 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410585@lists.postgresql.org>) id 1oBgnh-00026W-Ci for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:09:29 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBgnb-0000WZ-B2 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:09:24 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBgnX-0000QW-45 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:09:22 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.nyi.internal (Postfix) with ESMTP id DB7755C00F7; Wed, 13 Jul 2022 14:09:17 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Wed, 13 Jul 2022 14:09:17 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 14:09:16 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:TArPYmarR4iX2BXtf4O6l9DTe7jAyKuggK2Z3X_-87ueKBkAU-9zrA> <xmx:TArPYsZizRzzTseOB-7CA8XukxnwsJ3eB0jNFm1MmxSTucpkx-KLIg> <xmx:TArPYqCOnw1glVm7Rzn4yneHkbClVV0qadsGIUd1UqBC9YrCTDsQVw> <xmx:TQrPYpQyCn2WVQ_ZO312duOWcW3C5UbNdXdV9HdZGZt0ZMDYNG6CUg>"], "X-Received": ["by 2002:a05:6000:2aa:b0:21d:ac4b:95af with SMTP id l10-20020a05600002aa00b0021dac4b95afmr4367740wry.479.1657735769692; Wed, 13 Jul 2022 11:09:29 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/0c34f1ca-71e7-f6e7-7d59-5294f995c78b%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<2328143.1657728439@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410585@lists.postgresql.org>"], "X-Me-Sender": ["<xms:TArPYlIW7dPyBlWDNwdxNzaGRvo1TbDCjNfmJp_AqDwMOpSjSXHGVA> <xme:TArPYhJJjjUYCJxqZy63j41BvARNXCfPMtG2bkVwn4gt47S6r4h6cFy-DvpVSVBuW oZcxMi-U5xIjTJOhg>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410585@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:TArPYtugM5M8pGURgWJNL_4IdcV22HbpvhDdTpVNtKnB4jXEZs23Xp6vM8vIeSF6iI9HbBHuBSRlvbNVsDuUC3_luQfqSkqe>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657735757; x= 1657822157; bh=QmufCh9snR9f9mjHPIK+h7wPb1Ip2Rd2F9pV90a4TxM=; b=C cffXUn9Gtd9F3f2RpZoxF1O1M/EVjefFrinpojYF6APOVWOr71FlXHQbFQX/NZqa Af23kRtpO2VnTEJHLGZ2YfeCysXKNZO7kQ6HpreJSmROsmQhB6RapwUTs36zuOlk 11P4Ue9LeDUbDe0kpPoaEf/PtsHdKX/OK5Ob+qwwqF1EYw5Uvg7OlNrjGzX3nnWV bdfqNyKrJ1T63q0nednI60MsxSwJImotCMLvrOEBw6Yoy8Ee9+elcmDGnUdOokhR l7nXt27Rs+hjNL9tiocQ+UwayVRK4qk9oRih+YBjh9Sh4WTZiaKW9dT/KnlFaNvm Sogn3+/LwAB4m8riHO3mg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedguddvtdcutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepkfffgggfuffvvehfhfgjtgfgse htjeertddtfeejnecuhfhrohhmpefrvghtvghrucfgihhsvghnthhrrghuthcuoehpvght vghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhmqeenucggtf frrghtthgvrhhnpeehleffgeegudejteeihfelteduvdeifffhffdvjedvffegjeekudel udehudeifeenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpehpvghtvghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhm"], "X-Google-Smtp-Source": ["AGRyM1sFAfzm/R783OhfsAwgRHX4SO8VlhGKO2vioZ4XkotgykXnkBlzxpT8gzxj0pRQ6NWG1E87"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :feedback-id:dkim-signature; bh=QmufCh9snR9f9mjHPIK+h7wPb1Ip2Rd2F9pV90a4TxM=; b=C8l/DwOBt4iGupZw63HAJ50dkfnl1UvhjkfD/AFcJ+LC00SWHTY4RADeXUIhbi6EGb 8JE9rusDnB6kxYn5LHeZuEDuuXIBAa/tyBz119zvYuwA7bJQ1W+2XDoLenocnsxW2WQq wGnkfR3KfvGii5L14oeWX7xVxKeZ2RmHTq+ZXnwvFRbS430UPAbJ71v1o6S0XtbIVbbV LFLbFu4RtLMohmGm28xXOTIuMhvjuOS792cw5lq5sWTcmVRANWQhRTAdbUdzFhWLLeI1 pwRkBIOKtuXJXs1L/7sGqh3s4NyBEpP2VMdIB0gEj5V0lXRRZNOYTZj+MiqdntmZ+k1y bZ8A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=CcffXUn9; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410585@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410585@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=CcffXUn9; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410585@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410585@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<2328143.1657728439@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:41:35+00	tgl@sss.pgh.pa.us	Re: make update-po@master stops at pg_upgrade	<2422143.1657734095@sss.pgh.pa.us>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	9	5647	[]		Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> Hmm, I got this failure:\r\n> /usr/bin/xgettext: no se especific√≥ el fichero de entrada\r\n\r\nHmm ... are you doing this in a VPATH setup?  Does it help\r\nif you make the entry be\r\n\r\nGETTEXT_FILES    = $(wildcard $(srcdir)/*.c)\r\n\r\nI'd supposed we didn't need to be careful about that, because\r\nI saw uses of $(wildcard) without it ... but I now see other uses\r\nwith.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Wed, 13 Jul 2022 13:41:35 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657734106; cv=none; d=google.com; s=arc-20160816; b=kndLgMMbM699DhMl97axr40ggiUfpoPGTTV6R+w2uLmDXSd2EWohRQ2polYLTSfZb/ fszpju5DBXaeZn6vMZAqV2Q8+PN/Z+DRTANTx3iHCfk9OMrL7xrAlM5xRF9U+4At4p7S A8WlC87kP++NsLUhenawn5+IRSRowBxLTAsH8oU4HhsCLKdYd8DUT6D6PE2diNkXaiFa h9NDeqCgBuYI1Q77ZIqSLG2J2vcI+APkOyF3bOuiDp0vcbZvNubYfH2gHCXuDdJ1yIuL 6doIkdqbvOH6H7uQha0iocum5CdjusNCXUzBKTHLzgoSxZKfGEJaBSyaPBVxwrgkuQGF tL5w=="], "Comments": ["In-reply-to Alvaro Herrera <alvherre@alvh.no-ip.org> message dated \\"Wed, 13 Jul 2022 19:25:05 +0200\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp279182lfl; Wed, 13 Jul 2022 10:41:47 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u3-20020a5d6da3000000b0021d8f3ea51dsi20886585wrs.470.2022.07.13.10.41.46 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:41:46 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410570@lists.postgresql.org>) id 1oBgMs-0003k4-JT for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:41:46 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBgMn-000233-Ro for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:41:41 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBgMm-0000cQ-2l for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:41:41 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DHfZ2n2422144; Wed, 13 Jul 2022 13:41:35 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2422142.1657734095.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2422143.1657734095@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql>"], "X-Received": ["by 2002:a5d:48c8:0:b0:21b:826a:6f86 with SMTP id p8-20020a5d48c8000000b0021b826a6f86mr4292293wrs.220.1657734106916; Wed, 13 Jul 2022 10:41:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2422143.1657734095%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410570@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410570@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vL0vuC37uFtG3QNLSkriDxy0qrexKjP4cHk7UhqMJWAC6dNp393F0oha3nIPHiiIlqLm7Z"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=cYzU5FhgCq+CNrbibn4Zg+8XyNw5BsZ9Hf6hXXSYP1g=; b=DzuVFxnpBK2/b4YxFQIGeu2alLug3Ua80ehxTPgzD7OyFXZ7EvDloZr+CRsm3tQtF2 t1Nmk6A16qGKd77z+vwpXKW9jdExGxM3qkkaKdHzTrORRrdnHgclJ97+44dbHkeCk0H0 IVJc/J2eSDHj1kU93sYUQx+hzFutuppz8szEANWSviSub2V/61B1v9qKiYjbERmM6arw rb39NFL8BGTV2fKlvZYG/lw2RiPjcqYRKNbEMaN0iSvoPmM2zO1vLlnGZTdikm5twIJV Vp8dj6y1XZg0RLd1xkJjtFVlOvYuoOY7DrFsXml+b2TbGVDGoIFHzYjwUfbGmreCRLx5 pQBA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410570@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410570@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410570@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410570@lists.postgresql.org"]}	["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:50:39+00	robertmhaas@gmail.com	Re: strings: ".. (compression)? is not supported by this build"	<CA+TgmobCvkjhbkOue+S_HjdAGxcubr4c6tgiGwBNANQ3VE1dqw@mail.gmail.com>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	10	8907	[]		On Wed, Jul 13, 2022 at 10:33 AM Justin Pryzby <pryzby@telsasoft.com> wrote:\r\n> $ git grep 'is not supported by this build' '*c'\r\n> src/backend/access/transam/xloginsert.c:                                                elog(ERROR, "LZ4 is not supported by this build");\r\n> src/backend/access/transam/xloginsert.c:                                                elog(ERROR, "zstd is not supported by this build");\r\n> src/backend/access/transam/xloginsert.c:                        elog(ERROR, "LZ4 is not supported by this build");\r\n> src/backend/access/transam/xloginsert.c:                        elog(ERROR, "zstd is not supported by this build");\r\n> ...\r\n> src/backend/replication/basebackup_gzip.c:                       errmsg("gzip compression is not supported by this build")));\r\n> src/backend/replication/basebackup_lz4.c:                        errmsg("lz4 compression is not supported by this build")));\r\n> src/backend/replication/basebackup_zstd.c:                       errmsg("zstd compression is not supported by this build")));\r\n>\r\n> Should the word "compression" be removed from basebackup, for consistency with\r\n> the use in xloginsert.c ?  And "lz4" capitalization changed for consistency (in\r\n> one direction or the other).  See 4035cd5d4, e9537321a7, 7cf085f07.  Maybe zstd\r\n> should also be changed to Zstandard per 586955ddd.\r\n>\r\n> To avoid the extra translation, and allow the compiler to merge strings.\r\n\r\nTranslation isn't an issue here because the first group of messages\r\nare reported using elog(), not ereport(). There is something to be\r\nsaid for being consistent, though.\r\n\r\nI feel like it's kind of awkward that this thing is named Zstandard\r\nbut the library is libzstd and the package name is probably also zstd.\r\nI worry a bit that if we make the messages say zstandard instead of\r\nzstd it makes it harder to figure out. It's probably not a huge issue,\r\nthough.\r\n\r\n-- \r\nRobert Haas\r\nEDB: http://www.enterprisedb.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Wed, 13 Jul 2022 13:50:39 -0400"], "From": ["Robert Haas <robertmhaas@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: strings: \\".. (compression)? is not supported by this build\\""], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657734665; cv=none; d=google.com; s=arc-20160816; b=YtmM7JR8rYqdLpf1sDL8xI0v1MDWhNPwTwPVdvdmvguiYUiTPBHCJKH+aIXBUaluvR YEo/GO+ogJAsR1NwuTpBvAseAYOyShk2tv9P5Y2C7UP6YmoPY6gF6A3g4C6RbVFUw3bB 3LYFpGsti8vT7Cb+I3AdOaFOvq3KzZaD4iSbSrU1YK52Y6HlyGAiRKw7czUtxZqFizci RWsKc3Lx4CyA1CsrSmLnJUcUrd9d4RMtOtp+vg8GuQNIhLy0jHqXP/VnXy+x3QHn2Ycb 5yyU5bOPyvW+LiSaoNQhA0lAYBDlv/B7D6cPH8tXcdlbEABj9zvP0XY9cs5GE6RhzHf4 rn8A=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp282464lfl; Wed, 13 Jul 2022 10:51:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i65-20020a672244000000b00355e6e63ceesi2588367vsi.662.2022.07.13.10.51.04 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:51:05 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410583@lists.postgresql.org>) id 1oBgVs-00048m-2T for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:51:04 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <robertmhaas@gmail.com>) id 1oBgVn-0002aJ-9D for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:50:59 +0000", "from mail-ej1-x62e.google.com ([2a00:1450:4864:20::62e]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <robertmhaas@gmail.com>) id 1oBgVg-0000iH-Ij for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 17:50:58 +0000", "by mail-ej1-x62e.google.com with SMTP id b11so21134072eju.10 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 10:50:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+TgmobCvkjhbkOue+S_HjdAGxcubr4c6tgiGwBNANQ3VE1dqw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220713143312.GB18011@telsasoft.com>"], "X-Received": ["by 2002:ab0:56c2:0:b0:374:67bd:fe1 with SMTP id c2-20020ab056c2000000b0037467bd0fe1mr1911756uab.10.1657734665088; Wed, 13 Jul 2022 10:51:05 -0700 (PDT)", "by 2002:a17:907:6d8e:b0:72b:95d9:ee94 with SMTP id sb14-20020a1709076d8e00b0072b95d9ee94mr4694360ejc.465.1657734651374; Wed, 13 Jul 2022 10:50:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BTgmobCvkjhbkOue%2BS_HjdAGxcubr4c6tgiGwBNANQ3VE1dqw%40mail.gmail.com>"], "In-Reply-To": ["<20220713143312.GB18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410583@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410583@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=87qlwB51J65AZxXicMOUoPArJpgxqoyfzcJdvYyRxu0=; b=jLjkyaD+vsNZMiL1AZBPeWtZRXKc7LyuXZUGcAV3zFYy6if8qerPnK9Hl3lNOM2svi T2efh7/nM9FRV5QFy4atB19Z3AMzhImOMtxBdxL4GmPEJju42JegOr36sk+5EyO2k8dk UlSB9s2tFldF7qwePhXOCGiJ5r0JjacSuGccXr/s1NY6wWDCxdCHkfCHCOHMJE/YP7v+ wDBVWKazGBANcNcr7w7wTANiHBqwQVB2ErWydV16loDRhxxW/siO9R+z+6t6HzPBiXl3 2uY8bDTHTmazCsLV1VwpbNS1PKLKZqNaNUKAa6ds7mvshZZgEDTDvexCzjAxuAzmeI43 8pfw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/4DIZ20Pn0S0dJ6x38CPv2psme4nVM7JnpJ2Gz2+3NcQ8wd3f0 uOCCljjs5dGo0KzAfjpvR7SGmzKKC3+MAgCmqu8="], "X-Google-Smtp-Source": ["AGRyM1uUNqQoCp4t3EqoIEPlbPvlfyRMxuLZLzfp/nT9UE7pr7sZBpzn82U/uhMdq4wXvA2sSrzG"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=87qlwB51J65AZxXicMOUoPArJpgxqoyfzcJdvYyRxu0=; b=UH4mLIZTcrQ4RCfr8qUme5R3F4xmneS7WGoaubB0pYDRXsE5Jr+ElVxRRV05sSPD1n HfQ5Aleck67bRuDxUfTgbcho0TL1tQZ++019oHOOBw3Jfhy1KS8oxby3gtWld+OGJwGD aN/cKj8x/B8z/alTvuCAGsLu/Kyq8De0BsOUBKJeTNdZLJg42yGR2aiw+bchDzwD3yjS h2OTvUi2L1YCUOH7ul9qxf3j4gVhwROx2ja6MWLT7QUkDUmduparm0Fp6ku8LUhUnYCM MPjG4SOILLk7ZjOvnmTsNAAGxk7GgOaxZ6XCXzFtC84HhisZ1iMAXk+WlYK7Lbz+KjJn 4tQg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jLjkyaD+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410583@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410583@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=87qlwB51J65AZxXicMOUoPArJpgxqoyfzcJdvYyRxu0=; b=mHQE13WCLDA7GAU6s+6D3W273/iexnYaxxvCJD7erQyxcFytmmj+WVeQr66T5CumDC NABhHuh69yZrM4RIoYdWwtjoYcRrgUiI9cWKdRTPcq9v057egtsdoJ4KOCUC4aeszsIs 6YFsWC8UECZ9sKU40B2qtsljTWQfk2KCz7shn70lTAuRctOazSyKkEx7p8TZdc/HKo7k 7ZGy1MwlRpfFeKnKIlxdBHU07B6O7t7NtgaJldhZb0E9vaP/mMbL5NQ3Qg7TskPs0vj8 pz6MunYV6yaaiJd1YbIgn63C9LH5/b+DaQUe8wNZEye4uafcViiQeWjT/6bEZ2crC+AC xiQA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jLjkyaD+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410583@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410583@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220713143312.GB18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:34:36+00	m.melihmutlu@gmail.com	Re: logical replication restrictions	<CAGPVpCQgE1e0JQFHbxSpfj82HQfAqGmhG=yru3mX2tcmbfqHYA@mail.gmail.com>	[{"Name": "Euler Taveira", "Address": "euler@eulerto.com"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Marcos Pegoraro", "Address": "marcos@f10.com.br"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "", "Address": "smithpb2250@gmail.com"}]	\N	8	18588	[]	<div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr"><div dir="ltr">Hi Euler,<div><br></div><div>I&#39;ve some comments/questions about the latest version (v4) of your patch.</div><div><br></div><div>Firstly, I think the patch needs a rebase.¬†CI currently cannot apply it [1].</div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">22. src/test/subscription/t/<a href="http://032_apply_delay.pl/" rel="noreferrer" target="_blank">032_apply_delay.pl</a><br><br>I received the following error when trying to run these &#39;subscription&#39; tests:<br><br>t/<a href="http://032_apply_delay.pl/" rel="noreferrer" target="_blank">032_apply_delay.pl</a>¬†............... No such class log_location at<br>t/<a href="http://032_apply_delay.pl/" rel="noreferrer" target="_blank">032_apply_delay.pl</a>¬†line 49, near &quot;my log_location&quot;<br>syntax error at t/<a href="http://032_apply_delay.pl/" rel="noreferrer" target="_blank">032_apply_delay.pl</a>¬†line 49, near &quot;my log_location =&quot;<br></blockquote><div><br></div><div>I&#39;m having these errors too. Seems like some¬†declarations are missing.</div><div><br></div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† specified amount of time. If this value is specified without units,</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† it is taken as milliseconds. The default is zero, adding no delay.</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬†&lt;/para&gt;</blockquote></blockquote><div>I&#39;m also having an issue¬†when I give min_apply_delay parameter without units.</div><div>I expect that if I set¬† min_apply_delay to 5000 (without any unit), it will be interpreted as 5000 ms.<br></div><div><br></div><div>I tried:</div><div>postgres=# CREATE SUBSCRIPTION testsub CONNECTION &#39;dbname=postgres port=5432&#39; PUBLICATION testpub WITH (min_apply_delay=5000);<br></div><div><div><br></div></div><div>And logs showed:</div><div><div>2022-07-13 20:26:52.231 +03 [5422] LOG:¬† logical replication apply delay: 4999999 ms</div><div>2022-07-13 20:26:52.231 +03 [5422] CONTEXT:¬† processing remote data for replication origin &quot;pg_18126&quot; during &quot;BEGIN&quot; in transaction 3152 finished at 0/465D7A0</div></div><div><br></div><div>Looks like it starts from 5000000 ms instead of 5000 ms for me. If I state the unit as ms, then it works correctly.</div><div>¬†</div><div><br></div><div><div>Lastly, I have a question about this delay during tablesync.¬†</div><div>It&#39;s stated here that apply delays are not for initial tablesync.</div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">¬†&lt;para&gt;</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† The delay occurs only on WAL records for transaction begins and after</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† the initial table synchronization. It is possible that the</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† replication delay between publisher and subscriber exceeds the value</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† of this parameter, in which case no delay is added. Note that the</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† delay is calculated between the WAL time stamp as written on</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† publisher and the current time on the subscriber. Delays in logical</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† decoding and in transfer the transaction may reduce the actual wait</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† time. If the system clocks on publisher and subscriber are not</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† synchronized, this may lead to apply changes earlier than expected.</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† This is not a major issue because a typical setting of this parameter</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬† are much larger than typical time deviations between servers.</blockquote><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">+¬† ¬† ¬† ¬† ¬†&lt;/para&gt;</blockquote></blockquote><div><br></div><div>There might be a case where tablesync workers are in SYNCWAIT¬†state and waiting for apply worker to tell them to CATCHUP.¬†</div><div>And if apply worker is waiting in apply_delay function, tablesync workers will be stuck at SYNCWAIT state and this might delay tablesync at least &quot;min_apply_delay&quot; amount of time or more.</div><div>Is it something we would want? What do¬†you think?</div></div><div><br></div><div><br></div><div>[1]¬†<a href="http://cfbot.cputube.org/patch_38_3581.log">http://cfbot.cputube.org/patch_38_3581.log</a></div><div><br></div><div><br></div><div>Best,</div><div>Melih</div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>\r\n	Hi Euler,\r\n\r\nI've some comments/questions about the latest version (v4) of your patch.\r\n\r\nFirstly, I think the patch needs a rebase. CI currently cannot apply it [1].\r\n\r\n22. src/test/subscription/t/032_apply_delay.pl\r\n>\r\n> I received the following error when trying to run these 'subscription'\r\n> tests:\r\n>\r\n> t/032_apply_delay.pl ............... No such class log_location at\r\n> t/032_apply_delay.pl line 49, near "my log_location"\r\n> syntax error at t/032_apply_delay.pl line 49, near "my log_location ="\r\n>\r\n\r\nI'm having these errors too. Seems like some declarations are missing.\r\n\r\n\r\n+          specified amount of time. If this value is specified without\r\n>> units,\r\n>\r\n> +          it is taken as milliseconds. The default is zero, adding no\r\n>> delay.\r\n>\r\n> +         </para>\r\n>\r\n> I'm also having an issue when I give min_apply_delay parameter without\r\nunits.\r\nI expect that if I set  min_apply_delay to 5000 (without any unit), it will\r\nbe interpreted as 5000 ms.\r\n\r\nI tried:\r\npostgres=# CREATE SUBSCRIPTION testsub CONNECTION 'dbname=postgres\r\nport=5432' PUBLICATION testpub WITH (min_apply_delay=5000);\r\n\r\nAnd logs showed:\r\n2022-07-13 20:26:52.231 +03 [5422] LOG:  logical replication apply delay:\r\n4999999 ms\r\n2022-07-13 20:26:52.231 +03 [5422] CONTEXT:  processing remote data for\r\nreplication origin "pg_18126" during "BEGIN" in transaction 3152 finished\r\nat 0/465D7A0\r\n\r\nLooks like it starts from 5000000 ms instead of 5000 ms for me. If I state\r\nthe unit as ms, then it works correctly.\r\n\r\n\r\nLastly, I have a question about this delay during tablesync.\r\nIt's stated here that apply delays are not for initial tablesync.\r\n\r\n <para>\r\n>\r\n> +          The delay occurs only on WAL records for transaction begins and\r\n>> after\r\n>\r\n> +          the initial table synchronization. It is possible that the\r\n>\r\n> +          replication delay between publisher and subscriber exceeds the\r\n>> value\r\n>\r\n> +          of this parameter, in which case no delay is added. Note that\r\n>> the\r\n>\r\n> +          delay is calculated between the WAL time stamp as written on\r\n>\r\n> +          publisher and the current time on the subscriber. Delays in\r\n>> logical\r\n>\r\n> +          decoding and in transfer the transaction may reduce the actual\r\n>> wait\r\n>\r\n> +          time. If the system clocks on publisher and subscriber are not\r\n>\r\n> +          synchronized, this may lead to apply changes earlier than\r\n>> expected.\r\n>\r\n> +          This is not a major issue because a typical setting of this\r\n>> parameter\r\n>\r\n> +          are much larger than typical time deviations between servers.\r\n>\r\n> +         </para>\r\n>\r\n>\r\nThere might be a case where tablesync workers are in SYNCWAIT state and\r\nwaiting for apply worker to tell them to CATCHUP.\r\nAnd if apply worker is waiting in apply_delay function, tablesync workers\r\nwill be stuck at SYNCWAIT state and this might delay tablesync at least\r\n"min_apply_delay" amount of time or more.\r\nIs it something we would want? What do you think?\r\n\r\n\r\n[1] http://cfbot.cputube.org/patch_38_3581.log\r\n\r\n\r\nBest,\r\nMelih\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Melih Mutlu", "Address": "m.melihmutlu@gmail.com"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Amit Kapila <amit.kapila16@gmail.com>, Marcos Pegoraro <marcos@f10.com.br>, pgsql-hackers <pgsql-hackers@postgresql.org>, smithpb2250@gmail.com"], "To": ["Euler Taveira <euler@eulerto.com>"], "Date": ["Wed, 13 Jul 2022 20:34:36 +0300"], "From": ["Melih Mutlu <m.melihmutlu@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: logical replication restrictions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657733710; cv=none; d=google.com; s=arc-20160816; b=EOOtYOp5tzkQznQ3XtZlATGnU6f/RBVuwlDqXjp8u6hv2+aN3LNDjnmoexSRSLomi5 bo5UP33h6773Y9MJ2fWFfklS2Mpt+kAr1Gn3OoNlIBadCwEwQ/7gCnUoQEP6tm7lHlor 2P8VIBnAkLkkuKj++Jlp5gql4DhPrhHVlieI45EoE0tmScmk95OcJa8QyM9Jf3Sc9442 DIrUccP8Ni81vcN4CCUGXsHL6y99zpokOQEwgsESwseautdtczy5ajBNojGlcQGE7gop Cdc9wQad0hk9QVxg8B0zzMNGsNCG8EedXAGQ3oxW33D2oBY7zfy/uCLd/e5shHrKUBV4 g0bg=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp276766lfl; Wed, 13 Jul 2022 10:35:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e17-20020adfe7d1000000b0021bb06c2825si15550755wrn.105.2022.07.13.10.35.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:35:10 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410565@lists.postgresql.org>) id 1oBgGU-0004rG-Iv for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:35:10 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <m.melihmutlu@gmail.com>) id 1oBgGP-0003Ct-J0 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:35:05 +0000", "from mail-yb1-xb29.google.com ([2607:f8b0:4864:20::b29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <m.melihmutlu@gmail.com>) id 1oBgGJ-0000ZA-K5 for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 17:35:05 +0000", "by mail-yb1-xb29.google.com with SMTP id h62so17831065ybb.11 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 10:34:59 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAGPVpCQgE1e0JQFHbxSpfj82HQfAqGmhG=yru3mX2tcmbfqHYA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAB-JLwYOYwL=XTyAXKiH5CtM_Vm8KjKh7aaitCKvmCh4rzr5pQ@mail.gmail.com> <CAA4eK1JW+_Pff3TOaBqbOqn-LbMT2kj2bpw-a88ZSTdbTZ-aMg@mail.gmail.com> <CAB-JLwas_=FGr8bXKD7K6g0=RDUFuYU71TLLGTsQ-DTRNpq1QQ@mail.gmail.com> <CAA4eK1KSBGrLKR63iS38Bkvjq6fBCWzbuD6R15kEWdmd8aj3mw@mail.gmail.com> <73b06a32-56ab-4056-86ff-e307f3c316f1@www.fastmail.com> <f026292b-c9ee-472e-beaa-d32c5c3a2ced@www.fastmail.com> <d192bc58-e9c7-442c-bae8-63f8e8f43fda@www.fastmail.com> <20220322010410.m6ccotflls45d7vq@alap3.anarazel.de> <aec5dd79-245c-454e-ae28-00ba3c8977ed@www.fastmail.com> <29bd8c6e-9c87-4a72-abea-52218a387e2e@www.fastmail.com> <fa0d60e1-87af-4b55-9385-c8ff4be1b836@www.fastmail.com>"], "X-Received": ["by 2002:a5d:4b0b:0:b0:21d:887f:943c with SMTP id v11-20020a5d4b0b000000b0021d887f943cmr4457160wrq.482.1657733710983; Wed, 13 Jul 2022 10:35:10 -0700 (PDT)", "by 2002:a05:6130:90:b0:362:891c:edef with SMTP id x16-20020a056130009000b00362891cedefmr2052207uaf.106.1657733687507; Wed, 13 Jul 2022 10:34:47 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAGPVpCQgE1e0JQFHbxSpfj82HQfAqGmhG%3Dyru3mX2tcmbfqHYA%40mail.gmail.com>"], "In-Reply-To": ["<fa0d60e1-87af-4b55-9385-c8ff4be1b836@www.fastmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410565@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000093802305e3b33312\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410565@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=cSNN8v91fOzsuIYWluQEcKRaGZdzmrBwPzPTqLJkOuQ=; b=mLArE1BVp0Fvyg5s590ZXfq3OmPA6+dhKvI6mEhptucG2/jit5XLYcXBHIZLH8StvC j6maa4ZH/8A6xj1SGxD8THknQKLUgLLb7Swuz1puN6WmrMiYg5emins9GpekmUf12lyN rCAj5kJIOSF6h4Yis/NsP7s856INChCYudR7MmRuLlBRee62P5IX9oBdnVk/zNCBO/Xo el/6SyETlqDkAHexy6dJjPQi0TN4CfgFPjrWvo3pWa9fykDb62LQLm2f18tQpbXdp640 QmbHV/FmcOWgYNWO/jHQ7s9ENtJypXAc0mM4kUH3tNMQme0CJ/ZMrl2Y6MkZA1euAg69 pXfg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9V7x0IOgbFxaY6wn3kuZh9m2qDvDVIpuPNEL09bFq2BP0VAfQk tbqaWuyfpHYWm44Vl9w2DcnkxerAxKs2QLvn7HZOoac8dqM="], "X-Google-Smtp-Source": ["AGRyM1ucumJfSAwxTg7avD9dg2esd+VAexJcN0Hv4IYF1AuaVupR9u9T1S8ovJawp1TSw7EOS+jU"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=cSNN8v91fOzsuIYWluQEcKRaGZdzmrBwPzPTqLJkOuQ=; b=YaLtDjVZ8CDYjAMSXg1GLjiMBKC+IlLvj1JHawQiu6b9NDMzMJKtMJyIiFpnAYDKB8 nfD8il1wNyR1uUE+gOlWU59qWMnjFayMGjAmEMtKQy/ylIhGaAkwLyAUKbfeVEoa2jut cYxuQ6j0JXbolSvAHjd5oSLFknIAfHPpnNzQgtt0zQ7xVa8DAu0gpbcvvzENpQ9lPGHo tZ5Y1ilM3ewGjcjFP1gZC9jZzff1cCK2WSk4vCLpvBSGHXMJ5sA31BqDuE32sGaoOj3z Pif9fISnbnvZhD3Uwfd+MYNRccUUwytFAtmAUEO7TI5MCmgt5gDxGaq98u8xnSJqPCnu Y7oQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=mLArE1BV; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410565@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410565@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=cSNN8v91fOzsuIYWluQEcKRaGZdzmrBwPzPTqLJkOuQ=; b=zyoozPbgllumT4HcxIgEFz+rlYUnQuk00yopkBI/yw9G2FLHlJUxgOqX3L7802oqoh /AHmyG+Y1bYp7PD6J8lcJkrNAL7UarSf802qdtfjudpvF+wWgqL4lKZxB6WqqJk0S3cu +znOXWS4vTymhT/epsUeelT8hkm0xN03fcPqwqsaAkCeUgfOpMi8xb3Zz8HH/mKEodVP 0TOj3c6YYf2L2ZBoHKHLnkHKODyYyI0L51p0le8IbW4UkVIvBI9CGH1p1b+ZCmJ34678 HVoXjxBldcUS7zCOQ1LG99E1brQH2yPNSaMxVfdOBN/15FMLgFqkOWbXPazIr8Aje+1j Ewpg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=mLArE1BV; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410565@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410565@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<fa0d60e1-87af-4b55-9385-c8ff4be1b836@www.fastmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:19:40+00	peter.eisentraut@enterprisedb.com	Re: make update-po@master stops at pg_upgrade	<0c1b81ac-a485-9022-8559-1c58ea8a7792@enterprisedb.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	12	8224	[]		On 13.07.22 20:09, Peter Eisentraut wrote:\r\n> In any case, someone should check that this creates identical output \r\n> before and after.\r\n\r\nA quick check shows differences in\r\n\r\npg_rewind.pot\r\npsql.pot\r\necpg.pot\r\nlibpq.pot\r\nplpgsql.pot\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Wed, 13 Jul 2022 20:19:40 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736392; cv=none; d=google.com; s=arc-20160816; b=Q4ERkeI52bCkPBBD1AixnnOo35gPR9pMDp9aPNB5+5S0tdPZ91TYT1ZyZGuHR0o3bg U1k2DDaF6JcCbQm8sLulezm4mefw5yihzoWz+d1vj1mjcIyiofTnGNc0CMS9k0mDe8LX 2kcXPRvHTv/0wPXlR1BMMNyk8X1FesgQMNMMPvA2jPdq117V9k7ZQd8N252vZDyuZj/3 acZz/rEfW/KD5DVhc/OueoCMP6HDkI8hFCNfUHfHa/z7yiXBu83lX5gJ0mdLnc9mS/0p v++EPuwm52WrpG6bzl0ZpQm+QX/RE+UbaFYjhTsSsX5MOw1KLGlNY9qpXwW+Doai1ruc svYQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp293418lfl; Wed, 13 Jul 2022 11:19:52 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d9-20020a05600c3ac900b003a2f11ffc76si2912751wms.93.2022.07.13.11.19.52 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:19:52 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410589@lists.postgresql.org>) id 1oBgxj-0004Yh-O6 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:19:51 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBgxf-00033n-1n for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:19:47 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBgxc-0000W5-Mg for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:19:45 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id BA84E5C00DA; Wed, 13 Jul 2022 14:19:43 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute2.internal (MEProxy); Wed, 13 Jul 2022 14:19:43 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 14:19:41 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<0c1b81ac-a485-9022-8559-1c58ea8a7792@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us> <0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:vgzPYjh9YuyCOzg5UUWavOcYPobGoV03ZsOcja-aGzEdq9C9Ea3Ufw> <xmx:vgzPYjBlU15GkU8Hwz0lIzdANXGDqp_X8TUGSm3dLisi4Lpz9Mq_fw> <xmx:vgzPYsLRkX9UyI8e9awmjfeP9yv7V7j5mqN1oPQ1JL2hNJ1NKtaknA> <xmx:vwzPYn6jHQT7APCf21M7LHdqyF77juqjiroSH38Hv07Ly--BhW-vbA>"], "X-Received": ["by 2002:adf:e84c:0:b0:21d:83ed:2ce with SMTP id d12-20020adfe84c000000b0021d83ed02cemr4420563wrn.582.1657736392111; Wed, 13 Jul 2022 11:19:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/0c1b81ac-a485-9022-8559-1c58ea8a7792%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410589@lists.postgresql.org>"], "X-Me-Sender": ["<xms:vgzPYhwmztVmNcfsKYp0uSuCMp0o20RfwKu9p8T54JNPItTWfeZ7QA> <xme:vgzPYhR-yfCVma8FkWDSA1h3kxKn3ZFO5KZdgTdCyzQ7mJP342jQBgyGr97je8X53 Dk0DZF4mWnB6DpkNw>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410589@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:vgzPYrX-4BaLp59b2canZ9M7AIHNruXKJPwsrTqP1mBrnrr3hQn-f-nfumtO5zti4iRBYpWwNZUjW_m-1GSiviAr4tysPmgU>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657736383; x= 1657822783; bh=RYpFZyAdQRvViMKOim484sol5mgSc308FMUt1A4dDc8=; b=b mEJYrRhzl3GZZjQUuKsVimaZ2o34/bBA3PDzBPkTbDCKGy14l3YEio8lbk2r8afD fpC2TlEPVP8+tngw/NK5wV03ZQ3mvSf6RUKfeLzxDeF3anH0to8yw2+AgVi6/nuK SRK66DNOBtd5IqWtZqVEvDXHDhJ+FaOWQavRdJodCyF1XemLhQ8jHupYx7MT6o83 6/NJtFhzBUv56+J4CawN6c5LYuvlEcfwtNzsYePAATx/oKUx+g35hgN92/+2iLy7 Dp8FC3AwIXiGuDl6mhppAjLLyogt8FHf0pO/vaciHK3ehRo8KwxhOdw92SVsDs9s au8gbjrPBcRkE3zDg8Uhw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedguddvfecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepkfffgggfuffhvfevfhgjtgfgse htjeertddtfeejnecuhfhrohhmpefrvghtvghrucfgihhsvghnthhrrghuthcuoehpvght vghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhmqeenucggtf frrghtthgvrhhnpeelveduffefteeiudeuvdeftdegudejvedtgeegfeeitdelgeekuddu udejhffgkeenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpehpvghtvghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhm"], "X-Google-Smtp-Source": ["AGRyM1v3rk57XuN/4WWUgAvRvqUT2P5r2DizJxpesAb/PoeRG3yVZfzPGOsrG4HopVJxbvux/VhH"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:references:cc:to:from :content-language:subject:user-agent:mime-version:date:message-id :feedback-id:dkim-signature; bh=RYpFZyAdQRvViMKOim484sol5mgSc308FMUt1A4dDc8=; b=jP3izhWPDWH5teavY5B1zsl51ktYp0kFx7GjwwjF5/XCmKE/D2ivv7UPFynR5Y0E13 EZGHJSzqD5cSCFkt7jzkBM5qFGzema2Y05avYj43ve1LYiShsd76OQV3nYT8ijN+L3oT FsP/8HPBvPab61xYgsMPoOjK7iJJ+S8kP8FkkNHGLlwW+f8uriJqnKDJGjWQ8IEBTVC9 sbDoGARibNkAP1AW7YJdmFVSjVq74gf5EoCaQ0PYtWvPbW/6XaTZysWlvSSLasfY6IuF PY84ZmPk+ga0V3hfEn2cWKKPwdRtgNVaxJlKoJQpZhXZhKHewzp9TL8L96pItJ54kekk eH1A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=bmEJYrRh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410589@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410589@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=bmEJYrRh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410589@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410589@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:19:48+00	tgl@sss.pgh.pa.us	Re: make update-po@master stops at pg_upgrade	<2430419.1657736388@sss.pgh.pa.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	13	5837	[]		Peter Eisentraut <peter.eisentraut@enterprisedb.com> writes:\r\n> In some cases, the listed files are build output from another rule, for \r\n> example sql_help.c.  By using a wildcard, you just take whatever files \r\n> happen to be there, not observing proper make dependencies. \r\n\r\nHmm.  We could list built files explicitly, perhaps, and still be\r\na good step ahead on the maintenance burden.  Does xgettext get\r\nupset if the same input file is mentioned twice, ie would we have\r\nto filter sql_help.c out of the wildcard result?\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 14:19:48 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736399; cv=none; d=google.com; s=arc-20160816; b=mTrIZQp8TqmcJLllUfP6xrgQlesAM/pP3qTvPl7xNuEPYLF0JknZ9n9t53wfUkv8N1 /74zqr0u7R6AazM+nFyZKM8/5Xxff7KF/tMWjl+pPPbg3xG7tNBOAYn6t7ASpg6Av8k+ qj1Zi3wHDELDnp+pmaxaC+AobY8MPqearChyY7uoa+fVsH6b6Y2bvbjbo1r7O51K2Vdh IsPOPZ25HeANDa0RXZss8K5lbITYJxJ9o6tWeDfrKMlOC0HWLy9Wz5IL3rigHMmBGreK 8v6lxPX5/y+1qLyn9TIh+TlUqxEm/WyCdWOvsfuj0Adp4/otDfhC0UVhUJM/6Lga7+mK E2pA=="], "Comments": ["In-reply-to Peter Eisentraut <peter.eisentraut@enterprisedb.com> message dated \\"Wed, 13 Jul 2022 20:09:15 +0200\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp293471lfl; Wed, 13 Jul 2022 11:19:59 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n5-20020a5d5885000000b0021b948431e1si8763752wrf.365.2022.07.13.11.19.59 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:19:59 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410590@lists.postgresql.org>) id 1oBgxr-00072V-GV for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:19:59 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBgxm-0005PQ-Md for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:19:54 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBgxk-0000u3-DH for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:19:54 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DIJmrD2430420; Wed, 13 Jul 2022 14:19:48 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2430418.1657736388.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2430419.1657736388@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us> <0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"], "X-Received": ["by 2002:a7b:cb8d:0:b0:3a2:e858:1761 with SMTP id m13-20020a7bcb8d000000b003a2e8581761mr5038149wmi.90.1657736399751; Wed, 13 Jul 2022 11:19:59 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2430419.1657736388%40sss.pgh.pa.us>"], "In-Reply-To": ["<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410590@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410590@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uYMef5JDheyye4sOC5+xtqRbp+MCG9XPRr5/9Wvhgbt8ddzz/2di+2G4Zcru5CAu/VAVM2"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=EipatlI79lijQ8Zgc5JSOULEuQJSVA8jQA2lRmpDqLg=; b=dJRdImkP4sz6DYcaR6oDy/rLeXbN2ODsbQ1gY/ZUzMmafRRIa8xDnsa0KCOZeAn3p8 FrBEfw+iecsxUQx626H+n8xWMhY4CxDLkAQZDDaYJ+0eadPvdoJhvsgQWNuBx4StV9kC 4O1Y5dHjIR35Yo38jiPdL360o+f+wbexjIw1mQIN/Hx7akxrlxYhTYtcuPCh4xpXOyBb ekILGLAo6vGTDYiKDD+oX4cb954qsW3eHMiwsQrCyzzaq2RzlsTvn6I3ZuAABrbLqR/Q 5EyOeh4NaE2bd+oa8lFNnx19ozUpiEZfz9jP9bdTs1K8SdKRBXmlFNvlnP3oujHyamZT TfUQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410590@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410590@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410590@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410590@lists.postgresql.org"]}	["<0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 17:14:52+00	melanieplageman@gmail.com	Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)	<CAAKRu_bM55pj3pPRW0nd_-paWHLRkOU69r816AeztBBa-N1HLA@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Magnus Hagander", "Address": "magnus@hagander.net"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Lukas Fittl", "Address": "lukas@fittl.com"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	\N	5	138344	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v25-0001-Add-BackendType-for-standalone-backends.patch", "content_id": "f_l5jv3nur0", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "3", "file_name": "v25-0002-Remove-unneeded-call-to-pgstat_report_wal.patch", "content_id": "f_l5jv3nux1", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "4", "file_name": "v25-0003-Track-IO-operation-statistics.patch", "content_id": "f_l5jv3nuy2", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "5", "file_name": "v25-0004-Add-system-view-tracking-IO-ops-per-backend-type.patch", "content_id": "f_l5jv3nuz3", "disposition": "attachment", "content_type": "text/x-patch"}]	<div dir="ltr"><div>Attached patch set is substantially different enough from previous<br>versions that I kept it as a new patch set.<br>Note that local buffer allocations are now correctly tracked.<br></div><div dir="ltr"><br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, Jul 12, 2022 at 1:01 PM Andres Freund &lt;<a href="mailto:andres@anarazel.de">andres@anarazel.de</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Hi,<br>\r\n<br>\r\nOn 2022-07-12 12:19:06 -0400, Melanie Plageman wrote:<br>\r\n&gt; &gt; &gt; I also realized that I am not differentiating between IOPATH_SHARED and<br>\r\n&gt; &gt; &gt; IOPATH_STRATEGY for IOOP_FSYNC. But, given that we don&#39;t know what type<br>\r\n&gt; &gt; &gt; of buffer we are fsync&#39;ing by the time we call register_dirty_segment(),<br>\r\n&gt; &gt; &gt; I&#39;m not sure how we would fix this.<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; I think there scarcely happens flush for strategy-loaded buffers.¬† If<br>\r\n&gt; &gt; that is sensible, IOOP_FSYNC would not make much sense for<br>\r\n&gt; &gt; IOPATH_STRATEGY.<br>\r\n&gt; &gt;<br>\r\n&gt; <br>\r\n&gt; Why would it be less likely for a backend to do its own fsync when<br>\r\n&gt; flushing a dirty strategy buffer than a regular dirty shared buffer?<br>\r\n<br>\r\nWe really just don&#39;t expect a backend to do many segment fsyncs at<br>\r\nall. Otherwise there&#39;s something wrong with the forwarding mechanism.<br></blockquote><div><br></div><div>When a dirty strategy buffer is written out, if pendingOps sync queue is<br>full and the backend has to fsync the segment itself instead of relying<br>on the checkpointer, this will show in the statistics as an IOOP_FSYNC<br>for IOPATH_SHARED not IOPATH_STRATEGY.</div><div>IOPATH_STRATEGY + IOOP_FSYNC will always be 0 for all BackendTypes.</div><div>Does this seem right? </div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\nIt&#39;d be different if we tracked WAL fsyncs more granularly - which would be<br>\r\nquite interesting - but that&#39;s something for another day^Wpatch.<br>\r\n<br></blockquote><div><br></div><div>I do have a question about this.<br>So, if we were to start tracking WAL IO would it fit within this<br>paradigm to have a new IOPATH_WAL for WAL or would it add a separate<br>dimension?<br><br>I was thinking that we might want to consider calling this view<br>pg_stat_io_data because we might want to have a separate view,<br>pg_stat_io_wal and then, maybe eventually, convert pg_stat_slru to<br>pg_stat_io_slru (or a subset of what is in pg_stat_slru).<br>And maybe then later add pg_stat_io_[archiver/other]<br><br>Is pg_stat_io_data a good name that gives us flexibility to<br>introduce views which expose per-backend IO operation stats (maybe that<br>goes in pg_stat_activity, though [or maybe not because it wouldn&#39;t<br>include exited backends?]) and per query IO operation stats?<br><br>I would like to add roughly the same additional columns to all of<br>these during AIO development (basically the columns from iostat):<br>- average block size (will usually be 8kB for pg_stat_io_data but won&#39;t<br>\tnecessarily for the others)<br>- IOPS/BW<br>- avg read/write wait time<br>- demand rate/completion rate<br>- merges<br>- maybe queue depth<br><br>And I would like to be able to see all of these per query, per backend,<br>per relation, per BackendType, per IOPath, per SLRU type, etc.<br><br>Basically, what I&#39;m asking is<br>1) what can we name the view to enable these future stats to exist with<br>the least confusing/wordy view names?<br>2) will the current view layout and column titles work with minimal<br>changes for future stats extensions like what I mention above?<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; &gt; &gt; &gt; Wonder if it&#39;s worth making the lock specific to the backend type?<br>\r\n&gt; &gt; &gt; &gt;<br>\r\n&gt; &gt; &gt;<br>\r\n&gt; &gt; &gt; I&#39;ve added another Lock into PgStat_IOPathOps so that each BackendType<br>\r\n&gt; &gt; &gt; can be locked separately. But, I&#39;ve also kept the lock in<br>\r\n&gt; &gt; &gt; PgStatShared_BackendIOPathOps so that reset_all and snapshot could be<br>\r\n&gt; &gt; &gt; done easily.<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; Looks fine about the lock separation.<br>\r\n&gt; &gt;<br>\r\n&gt; <br>\r\n&gt; Actually, I think it is not safe to use both of these locks. So for<br>\r\n&gt; picking one method, it is probably better to go with the locks in<br>\r\n&gt; PgStat_IOPathOps, it will be more efficient for flush (and not for<br>\r\n&gt; fetching and resetting), so that is probably the way to go, right?<br>\r\n<br>\r\nI think it&#39;s good to just use one kind of lock, and efficiency of snapshotting<br>\r\n/ resetting is nearly irrelevant. But I don&#39;t see why it&#39;s not safe to use<br>\r\nboth kinds of locks?<br>\r\n<br></blockquote><div><br>The way I implemented it was not safe because I didn&#39;t use both locks<br>when resetting the stats.<br></div><div><br></div><div>In this new version of the patch, I&#39;ve done the following: In shared<br>memory I&#39;ve put the lock in PgStatShared_IOPathOps -- the data structure<br>which contains an array of PgStat_IOOpCounters for all IOOp types for<br>all IOPaths. Thus, different BackendType + IOPath combinations can be<br>updated concurrently without contending for the same lock.<br><br>To make this work, I made two versions of the PgStat_IOPathOps -- one<br>that has the lock, PgStatShared_IOPathOps, and one without,<br>PgStat_IOPathOps, so that I can persist it to the stats file without<br>writing and reading the LWLock and can have a local and snapshot version<br>of the data structure without the lock.<br><br>This also necessitated two versions of the data structure wrapping<br>PgStat_IOPathOps, PgStat_BackendIOPathOps, which contains an array with<br>a PgStat_IOPathOps for each BackendType, and<br>PgStatShared_BackendIOPathOps, containing an array of<br>PgStatShared_IOPathOps.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; &gt; Looks fine, but I think pgstat_flush_io_ops() need more comments like<br>\r\n&gt; &gt; other pgstat_flush_* functions.<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; +¬† ¬† ¬† ¬†for (int i = 0; i &lt; BACKEND_NUM_TYPES; i++)<br>\r\n&gt; &gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†stats_shmem-&gt;stats[i].stat_reset_timestamp = ts;<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; I&#39;m not sure we need a separate reset timestamp for each backend type<br>\r\n&gt; &gt; but SLRU counter does the same thing..<br>\r\n&gt; &gt;<br>\r\n&gt; <br>\r\n&gt; Yes, I think for SLRU stats it is because you can reset individual SLRU<br>\r\n&gt; stats. Also there is no wrapper data structure to put it in. I could<br>\r\n&gt; keep it in PgStatShared_BackendIOPathOps since you have to reset all IO<br>\r\n&gt; operation stats at once, but I am thinking of getting rid of<br>\r\n&gt; PgStatShared_BackendIOPathOps since it is not needed if I only keep the<br>\r\n&gt; locks in PgStat_IOPathOps and make the global shared value an array of<br>\r\n&gt; PgStat_IOPathOps.<br>\r\n<br>\r\nI&#39;m strongly against introducing super granular reset timestamps. I think that<br>\r\nwas a mistake for SLRU stats, but we can&#39;t fix that as easily.<br>\r\n<br></blockquote><div><br></div><div>Since all stats in pg_stat_io must be reset at the same time, I&#39;ve put<br>the reset timestamp can in the PgStat[Shared]_BackendIOPathOps and<br>removed it from each PgStat[Shared]_IOPathOps.</div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Currently, strategy allocs count only reuses of a strategy buffer (not<br>\r\n&gt; initial shared buffers which are added to the ring).<br>\r\n&gt; strategy writes count only the writing out of dirty buffers which are<br>\r\n&gt; already in the ring and are being reused.<br>\r\n<br>\r\nThat seems right to me.<br>\r\n<br>\r\n<br>\r\n&gt; Alternatively, we could also count as strategy allocs all those buffers<br>\r\n&gt; which are added to the ring and count as strategy writes¬† all those<br>\r\n&gt; shared buffers which are dirty when initially added to the ring.<br>\r\n<br>\r\nI don&#39;t think that&#39;d provide valuable information. The whole reason that<br>\r\nstrategy writes are interesting is that they can lead to writing out data a<br>\r\nlot sooner than they would be written out without a strategy being used.<br>\r\n<br></blockquote><div><br>Then I agree that strategy writes should only count strategy buffers<br>that are written out in order to reuse the buffer (which is in lieu of<br>getting a new, potentially clean, shared buffer). This patch implements<br>that behavior.<br><br>However, for strategy allocs, it seems like we would want to count all<br>demand for buffers as part of a BufferAccessStrategy. So, that would<br>include allocating buffers to initially fill the ring, allocations of<br>new shared buffers after the ring was already full that are added to the<br>ring because all existing buffers in the ring are pinned, and buffers<br>already in the ring which are being reused.<br><br>This version of the patch only counts the third scenario as a strategy<br>allocation, but I think it would make more sense to count all three as<br>strategy allocs.<br><br>The downside of this behavior is that strategy allocs count different<br>scenarios than strategy writes, reads, and extends. But, I think that<br>this is okay.</div><div><br></div><div>I&#39;ll clarify it in the docs once there is a decision.</div><div><br></div><div>Also, note that, as stated above, there will never be any strategy<br>fsyncs (that is, IOPATH_STRATEGY + IOOP_FSYNC will always be 0) because<br>the code path starting with register_dirty_segment() which ends with a<br>regular backend doing its own fsync when pendingOps is full does not<br>know what the current IOPATH is and checkpointer does not use a<br>BufferAccessStrategy.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Subject: [PATCH v24 2/3] Track IO operation statistics<br>\r\n&gt; <br>\r\n&gt; Introduce &quot;IOOp&quot;, an IO operation done by a backend, and &quot;IOPath&quot;, the<br>\r\n&gt; location or type of IO done by a backend. For example, the checkpointer<br>\r\n&gt; may write a shared buffer out. This would be counted as an IOOp write on<br>\r\n&gt; an IOPath IOPATH_SHARED by BackendType &quot;checkpointer&quot;.<br>\r\n<br>\r\nI&#39;m still not 100% happy with IOPath - seems a bit too easy to confuse with<br>\r\nthe file path. What about &#39;origin&#39;?<br>\r\n<br></blockquote><div><br></div><div>Enough has changed in this version of the patch that I decided to defer<br>renaming until some of the other issues are resolved.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Each IOOp (alloc, fsync, extend, write) is counted per IOPath<br>\r\n&gt; (direct, local, shared, or strategy) through a call to<br>\r\n&gt; pgstat_count_io_op().<br>\r\n<br>\r\nIt seems we should track reads too - it&#39;s quite interesting to know whether<br>\r\nreads happened because of a strategy, for example. You do reference reads in a<br>\r\nlater part of the commit message even :)<br></blockquote><div><br></div><div>I&#39;ve added reads to what is counted.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; The primary concern of these statistics is IO operations on data blocks<br>\r\n&gt; during the course of normal database operations. IO done by, for<br>\r\n&gt; example, the archiver or syslogger is not counted in these statistics.<br>\r\n<br>\r\nWe could extend this at a later stage, if we really want to. But I&#39;m not sure<br>\r\nit&#39;s interesting or fully possible. E.g. the archiver&#39;s write are largely not<br>\r\ndone by the archiver itself, but by a command (or module these days) it shells<br>\r\nout to.<br></blockquote><div><br></div><div>I&#39;ve added note of this to some of the comments and the commit message.<br>I also omit rows for these BackendTypes from the view. See my later<br>comment in this email for more detail on that.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Note that this commit does not add code to increment IOPATH_DIRECT. A<br>\r\n&gt; future patch adding wrappers for smgrwrite(), smgrextend(), and<br>\r\n&gt; smgrimmedsync() would provide a good location to call<br>\r\n&gt; pgstat_count_io_op() for unbuffered IO and avoid regressions for future<br>\r\n&gt; users of these functions.<br>\r\n<br>\r\nHm. Perhaps we should defer introducing IOPATH_DIRECT for now then?<br>\r\n<br></blockquote><div><br></div><div>It&#39;s gone.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Stats on IOOps for all IOPaths for a backend are initially accumulated<br>\r\n&gt; locally.<br>\r\n&gt; <br>\r\n&gt; Later they are flushed to shared memory and accumulated with those from<br>\r\n&gt; all other backends, exited and live.<br>\r\n<br>\r\nPerhaps mention here that this later could be extended to make per-connection<br>\r\nstats visible?<br>\r\n<br></blockquote><div><br></div><div>Mentioned.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Some BackendTypes will not execute pgstat_report_stat() and thus must<br>\r\n&gt; explicitly call pgstat_flush_io_ops() in order to flush their backend<br>\r\n&gt; local IO operation statistics to shared memory.<br>\r\n<br>\r\nMaybe add &quot;flush ... during ongoing operation&quot; or such? Because they&#39;d all<br>\r\nflush at commit, IIRC.<br>\r\n<br></blockquote><div><br></div><div>Added.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; diff --git a/src/backend/bootstrap/bootstrap.c b/src/backend/bootstrap/bootstrap.c<br>\r\n&gt; index 088556ab54..963b05321e 100644<br>\r\n&gt; --- a/src/backend/bootstrap/bootstrap.c<br>\r\n&gt; +++ b/src/backend/bootstrap/bootstrap.c<br>\r\n&gt; @@ -33,6 +33,7 @@<br>\r\n&gt;¬† #include &quot;miscadmin.h&quot;<br>\r\n&gt;¬† #include &quot;nodes/makefuncs.h&quot;<br>\r\n&gt;¬† #include &quot;pg_getopt.h&quot;<br>\r\n&gt; +#include &quot;pgstat.h&quot;<br>\r\n&gt;¬† #include &quot;storage/bufmgr.h&quot;<br>\r\n&gt;¬† #include &quot;storage/bufpage.h&quot;<br>\r\n&gt;¬† #include &quot;storage/condition_variable.h&quot;<br>\r\n<br>\r\nHm?<br></blockquote><div><br></div><div>Removed<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; diff --git a/src/backend/postmaster/walwriter.c b/src/backend/postmaster/walwriter.c<br>\r\n&gt; index e926f8c27c..beb46dcb55 100644<br>\r\n&gt; --- a/src/backend/postmaster/walwriter.c<br>\r\n&gt; +++ b/src/backend/postmaster/walwriter.c<br>\r\n&gt; @@ -293,18 +293,7 @@ HandleWalWriterInterrupts(void)<br>\r\n&gt;¬† ¬† ¬† ¬†}<br>\r\n&gt;¬† <br>\r\n&gt;¬† ¬† ¬† ¬†if (ShutdownRequestPending)<br>\r\n&gt; -¬† ¬† ¬†{<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬†/*<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† * Force reporting remaining WAL statistics at process exit.<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† *<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† * Since pgstat_report_wal is invoked with &#39;force&#39; is false in main<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† * loop to avoid overloading the cumulative stats system, there may<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† * exist unreported stats counters for the WAL writer.<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬† */<br>\r\n&gt; -¬† ¬† ¬† ¬† ¬† ¬† ¬†pgstat_report_wal(true);<br>\r\n&gt; -<br>\r\n&gt;¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†proc_exit(0);<br>\r\n&gt; -¬† ¬† ¬†}<br>\r\n&gt;¬† <br>\r\n&gt;¬† ¬† ¬† ¬†/* Perform logging of memory contexts of this process */<br>\r\n&gt;¬† ¬† ¬† ¬†if (LogMemoryContextPending)<br>\r\n<br>\r\nLet&#39;s do this in a separate commit and get it out of the way...<br>\r\n<br></blockquote><div><br></div><div>I&#39;ve put it in a separate commit.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; @@ -682,16 +694,37 @@ AddBufferToRing(BufferAccessStrategy strategy, BufferDesc *buf)<br>\r\n&gt;¬† ¬†* if this buffer should be written and re-used.<br>\r\n&gt;¬† ¬†*/<br>\r\n&gt;¬† bool<br>\r\n&gt; -StrategyRejectBuffer(BufferAccessStrategy strategy, BufferDesc *buf)<br>\r\n&gt; +StrategyRejectBuffer(BufferAccessStrategy strategy, BufferDesc *buf, bool *write_from_ring)<br>\r\n&gt;¬† {<br>\r\n&gt; -¬† ¬† ¬†/* We only do this in bulkread mode */<br>\r\n&gt; +<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * We only reject reusing and writing out the strategy buffer this in<br>\r\n&gt; +¬† ¬† ¬† * bulkread mode.<br>\r\n&gt; +¬† ¬† ¬† */<br>\r\n&gt;¬† ¬† ¬† ¬†if (strategy-&gt;btype != BAS_BULKREAD)<br>\r\n&gt; +¬† ¬† ¬†{<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬† * If the buffer was from the ring and we are not rejecting it, consider it<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬† * a write of a strategy buffer.<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬† */<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬†if (strategy-&gt;current_was_in_ring)<br>\r\n&gt; +¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†*write_from_ring = true;<br>\r\n<br>\r\nHm. This is set even if the buffer wasn&#39;t dirty? I guess we don&#39;t expect<br>\r\nStrategyRejectBuffer() to be called for clean buffers...<br>\r\n<br></blockquote><div><br></div><div>Yes, we do not expect it to be called for clean buffers.<br></div><div>I&#39;ve added a comment about this assumption.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt;¬† /*<br>\r\n&gt; diff --git a/src/backend/utils/activity/pgstat_database.c b/src/backend/utils/activity/pgstat_database.c<br>\r\n&gt; index d9275611f0..d3963f59d0 100644<br>\r\n&gt; --- a/src/backend/utils/activity/pgstat_database.c<br>\r\n&gt; +++ b/src/backend/utils/activity/pgstat_database.c<br>\r\n&gt; @@ -47,7 +47,8 @@ pgstat_drop_database(Oid databaseid)<br>\r\n&gt;¬† }<br>\r\n&gt;¬† <br>\r\n&gt;¬† /*<br>\r\n&gt; - * Called from autovacuum.c to report startup of an autovacuum process.<br>\r\n&gt; + * Called from autovacuum.c to report startup of an autovacuum process and<br>\r\n&gt; + * flush IO Operation statistics.<br>\r\n&gt;¬† ¬†* We are called before InitPostgres is done, so can&#39;t rely on MyDatabaseId;<br>\r\n&gt;¬† ¬†* the db OID must be passed in, instead.<br>\r\n&gt;¬† ¬†*/<br>\r\n&gt; @@ -72,6 +73,11 @@ pgstat_report_autovac(Oid dboid)<br>\r\n&gt;¬† ¬† ¬† ¬†dbentry-&gt;stats.last_autovac_time = GetCurrentTimestamp();<br>\r\n&gt;¬† <br>\r\n&gt;¬† ¬† ¬† ¬†pgstat_unlock_entry(entry_ref);<br>\r\n&gt; +<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * Report IO Operation statistics<br>\r\n&gt; +¬† ¬† ¬† */<br>\r\n&gt; +¬† ¬† ¬†pgstat_flush_io_ops(false);<br>\r\n&gt;¬† }<br>\r\n<br>\r\nHm. I suspect this will always be zero - at this point we haven&#39;t connected to<br>\r\na database, so there really can&#39;t have been much, if any, IO. I think I<br>\r\nsuggested doing something here, but on a second look it really doesn&#39;t make<br>\r\nmuch sense.<br>\r\n<br>\r\nNote that that&#39;s different from doing something in<br>\r\npgstat_report_(vacuum|analyze) - clearly we&#39;ve done something at that point.<br></blockquote><div><br></div><div>I&#39;ve removed this.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt;¬† /*<br>\r\n&gt; - * Report that the table was just vacuumed.<br>\r\n&gt; + * Report that the table was just vacuumed and flush IO Operation statistics.<br>\r\n&gt;¬† ¬†*/<br>\r\n&gt;¬† void<br>\r\n&gt;¬† pgstat_report_vacuum(Oid tableoid, bool shared,<br>\r\n&gt; @@ -257,10 +257,15 @@ pgstat_report_vacuum(Oid tableoid, bool shared,<br>\r\n&gt;¬† ¬† ¬† ¬†}<br>\r\n&gt;¬† <br>\r\n&gt;¬† ¬† ¬† ¬†pgstat_unlock_entry(entry_ref);<br>\r\n&gt; +<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * Report IO Operations statistics<br>\r\n&gt; +¬† ¬† ¬† */<br>\r\n&gt; +¬† ¬† ¬†pgstat_flush_io_ops(false);<br>\r\n&gt;¬† }<br>\r\n&gt;¬† <br>\r\n&gt;¬† /*<br>\r\n&gt; - * Report that the table was just analyzed.<br>\r\n&gt; + * Report that the table was just analyzed and flush IO Operation statistics.<br>\r\n&gt;¬† ¬†*<br>\r\n&gt;¬† ¬†* Caller must provide new live- and dead-tuples estimates, as well as a<br>\r\n&gt;¬† ¬†* flag indicating whether to reset the changes_since_analyze counter.<br>\r\n&gt; @@ -340,6 +345,11 @@ pgstat_report_analyze(Relation rel,<br>\r\n&gt;¬† ¬† ¬† ¬†}<br>\r\n&gt;¬† <br>\r\n&gt;¬† ¬† ¬† ¬†pgstat_unlock_entry(entry_ref);<br>\r\n&gt; +<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * Report IO Operations statistics<br>\r\n&gt; +¬† ¬† ¬† */<br>\r\n&gt; +¬† ¬† ¬†pgstat_flush_io_ops(false);<br>\r\n&gt;¬† }<br>\r\n<br>\r\nThink it&#39;d be good to amend these comments to say that otherwise stats would<br>\r\nonly get flushed after a multi-relatio autovacuum cycle is done / a<br>\r\nVACUUM/ANALYZE command processed all tables.¬† Perhaps add the comment to one<br>\r\nof the two functions, and just reference it in the other place?<br></blockquote><div><br></div><div>Done<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n<br>\r\n&gt; --- a/src/include/utils/backend_status.h<br>\r\n&gt; +++ b/src/include/utils/backend_status.h<br>\r\n&gt; @@ -306,6 +306,40 @@ extern const char *pgstat_get_crashed_backend_activity(int pid, char *buffer,<br>\r\n&gt;¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† int buflen);<br>\r\n&gt;¬† extern uint64 pgstat_get_my_query_id(void);<br>\r\n&gt;¬† <br>\r\n&gt; +/* Utility functions */<br>\r\n&gt; +<br>\r\n&gt; +/*<br>\r\n&gt; + * When maintaining an array of information about all valid BackendTypes, in<br>\r\n&gt; + * order to avoid wasting the 0th spot, use this helper to convert a valid<br>\r\n&gt; + * BackendType to a valid location in the array (given that no spot is<br>\r\n&gt; + * maintained for B_INVALID BackendType).<br>\r\n&gt; + */<br>\r\n&gt; +static inline int backend_type_get_idx(BackendType backend_type)<br>\r\n&gt; +{<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * backend_type must be one of the valid backend types. If caller is<br>\r\n&gt; +¬† ¬† ¬† * maintaining backend information in an array that includes B_INVALID,<br>\r\n&gt; +¬† ¬† ¬† * this function is unnecessary.<br>\r\n&gt; +¬† ¬† ¬† */<br>\r\n&gt; +¬† ¬† ¬†Assert(backend_type &gt; B_INVALID &amp;&amp; backend_type &lt;= BACKEND_NUM_TYPES);<br>\r\n&gt; +¬† ¬† ¬†return backend_type - 1;<br>\r\n&gt; +}<br>\r\n<br>\r\nIn function definitions (vs declarations) we put the &#39;static inline int&#39; in a<br>\r\nseparate line from the rest of the function signature.<br></blockquote><div><br></div><div>Fixed.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; +/*<br>\r\n&gt; + * When using a value from an array of information about all valid<br>\r\n&gt; + * BackendTypes, add 1 to the index before using it as a BackendType to adjust<br>\r\n&gt; + * for not maintaining a spot for B_INVALID BackendType.<br>\r\n&gt; + */<br>\r\n&gt; +static inline BackendType idx_get_backend_type(int idx)<br>\r\n&gt; +{<br>\r\n&gt; +¬† ¬† ¬†int backend_type = idx + 1;<br>\r\n&gt; +¬† ¬† ¬†/*<br>\r\n&gt; +¬† ¬† ¬† * If the array includes a spot for B_INVALID BackendType this function is<br>\r\n&gt; +¬† ¬† ¬† * not required.<br>\r\n<br>\r\nThe comments around this seem a bit over the top, but I also don&#39;t mind them<br>\r\nmuch.<br></blockquote><div><br></div><div>Feel free to change them to something shorter. I couldn&#39;t think of something I liked.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n<br>\r\n&gt; Add pg_stat_io, a system view which tracks the number of IOOp (allocs,<br>\r\n&gt; writes, fsyncs, and extends) done through each IOPath (e.g. shared<br>\r\n&gt; buffers, local buffers, unbuffered IO) by each type of backend.<br>\r\n<br>\r\nAnnoying question: pg_stat_io vs pg_statio? I&#39;d not think of suggesting the<br>\r\nlatter, except that we already have a bunch of views with that prefix.<br>\r\n<br></blockquote><div><br></div><div>I have thoughts on this but thought it best deferred until after the _data decision.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; Some of these should always be zero. For example, checkpointer does not<br>\r\n&gt; use a BufferAccessStrategy (currently), so the &quot;strategy&quot; IOPath for<br>\r\n&gt; checkpointer will be 0 for all IOOps.<br>\r\n<br>\r\nWhat do you think about returning NULL for the values that we except to never<br>\r\nbe non-zero? Perhaps with an assert against non-zero values? Seems like it<br>\r\nmight be helpful for understanding the view.<br></blockquote><div><br></div><div>Yes, I like this idea.<br><br>Beyond just setting individual cells to NULL, if an entire row would be<br>NULL, I have now dropped it from the view.<br><br>So far, I have omitted from the view all rows for BackendTypes<br>B_ARCHIVER, B_LOGGER, and B_STARTUP.<br><br>Should I also omit rows for B_WAL_RECEIVER and B_WAL_WRITER for now?<br><br>I have also omitted rows for IOPATH_STRATEGY for all BackendTypes<br>*except* B_AUTOVAC_WORKER, B_BACKEND, B_STANDALONE_BACKEND, and<br>B_BG_WORKER.<br><br>Do these seem correct?<br><br>I think there are some BackendTypes which will never do IO Operations on<br>IOPATH_LOCAL but I am not sure which. Do you know which?<br><br>As for individual cells which should be NULL, so far what I have is:<br>- IOPATH_LOCAL + IOOP_FSYNC<br>I am sure there are others as well. Can you think of any?<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; +/*<br>\r\n&gt; +* When adding a new column to the pg_stat_io view, add a new enum<br>\r\n&gt; +* value here above IO_NUM_COLUMNS.<br>\r\n&gt; +*/<br>\r\n&gt; +enum<br>\r\n&gt; +{<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_BACKEND_TYPE,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_IO_PATH,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_ALLOCS,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_EXTENDS,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_FSYNCS,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_WRITES,<br>\r\n&gt; +¬† ¬† ¬†IO_COLUMN_RESET_TIME,<br>\r\n&gt; +¬† ¬† ¬†IO_NUM_COLUMNS,<br>\r\n&gt; +};<br>\r\n<br>\r\nWe typedef pretty much every enum so the enum can be referenced without the<br>\r\n&#39;enum&#39; prefix. I&#39;d do that here, even if we don&#39;t need it.<br>\r\n<br></blockquote><div><br></div><div>So, I left it anonymous because I didn&#39;t want it being used as a type<br>or referenced anywhere else.<br><br>I am interested to hear more about your SQL enums idea from upthread.<br></div><div><br></div><div>- Melanie <br></div></div></div>\r\n	Attached patch set is substantially different enough from previous\r\nversions that I kept it as a new patch set.\r\nNote that local buffer allocations are now correctly tracked.\r\n\r\nOn Tue, Jul 12, 2022 at 1:01 PM Andres Freund <andres@anarazel.de> wrote:\r\n\r\n> Hi,\r\n>\r\n> On 2022-07-12 12:19:06 -0400, Melanie Plageman wrote:\r\n> > > > I also realized that I am not differentiating between IOPATH_SHARED\r\n> and\r\n> > > > IOPATH_STRATEGY for IOOP_FSYNC. But, given that we don't know what\r\n> type\r\n> > > > of buffer we are fsync'ing by the time we call\r\n> register_dirty_segment(),\r\n> > > > I'm not sure how we would fix this.\r\n> > >\r\n> > > I think there scarcely happens flush for strategy-loaded buffers.  If\r\n> > > that is sensible, IOOP_FSYNC would not make much sense for\r\n> > > IOPATH_STRATEGY.\r\n> > >\r\n> >\r\n> > Why would it be less likely for a backend to do its own fsync when\r\n> > flushing a dirty strategy buffer than a regular dirty shared buffer?\r\n>\r\n> We really just don't expect a backend to do many segment fsyncs at\r\n> all. Otherwise there's something wrong with the forwarding mechanism.\r\n>\r\n\r\nWhen a dirty strategy buffer is written out, if pendingOps sync queue is\r\nfull and the backend has to fsync the segment itself instead of relying\r\non the checkpointer, this will show in the statistics as an IOOP_FSYNC\r\nfor IOPATH_SHARED not IOPATH_STRATEGY.\r\nIOPATH_STRATEGY + IOOP_FSYNC will always be 0 for all BackendTypes.\r\nDoes this seem right?\r\n\r\n\r\n>\r\n> It'd be different if we tracked WAL fsyncs more granularly - which would be\r\n> quite interesting - but that's something for another day^Wpatch.\r\n>\r\n>\r\nI do have a question about this.\r\nSo, if we were to start tracking WAL IO would it fit within this\r\nparadigm to have a new IOPATH_WAL for WAL or would it add a separate\r\ndimension?\r\n\r\nI was thinking that we might want to consider calling this view\r\npg_stat_io_data because we might want to have a separate view,\r\npg_stat_io_wal and then, maybe eventually, convert pg_stat_slru to\r\npg_stat_io_slru (or a subset of what is in pg_stat_slru).\r\nAnd maybe then later add pg_stat_io_[archiver/other]\r\n\r\nIs pg_stat_io_data a good name that gives us flexibility to\r\nintroduce views which expose per-backend IO operation stats (maybe that\r\ngoes in pg_stat_activity, though [or maybe not because it wouldn't\r\ninclude exited backends?]) and per query IO operation stats?\r\n\r\nI would like to add roughly the same additional columns to all of\r\nthese during AIO development (basically the columns from iostat):\r\n- average block size (will usually be 8kB for pg_stat_io_data but won't\r\nnecessarily for the others)\r\n- IOPS/BW\r\n- avg read/write wait time\r\n- demand rate/completion rate\r\n- merges\r\n- maybe queue depth\r\n\r\nAnd I would like to be able to see all of these per query, per backend,\r\nper relation, per BackendType, per IOPath, per SLRU type, etc.\r\n\r\nBasically, what I'm asking is\r\n1) what can we name the view to enable these future stats to exist with\r\nthe least confusing/wordy view names?\r\n2) will the current view layout and column titles work with minimal\r\nchanges for future stats extensions like what I mention above?\r\n\r\n\r\n>\r\n> > > > > Wonder if it's worth making the lock specific to the backend type?\r\n> > > > >\r\n> > > >\r\n> > > > I've added another Lock into PgStat_IOPathOps so that each\r\n> BackendType\r\n> > > > can be locked separately. But, I've also kept the lock in\r\n> > > > PgStatShared_BackendIOPathOps so that reset_all and snapshot could be\r\n> > > > done easily.\r\n> > >\r\n> > > Looks fine about the lock separation.\r\n> > >\r\n> >\r\n> > Actually, I think it is not safe to use both of these locks. So for\r\n> > picking one method, it is probably better to go with the locks in\r\n> > PgStat_IOPathOps, it will be more efficient for flush (and not for\r\n> > fetching and resetting), so that is probably the way to go, right?\r\n>\r\n> I think it's good to just use one kind of lock, and efficiency of\r\n> snapshotting\r\n> / resetting is nearly irrelevant. But I don't see why it's not safe to use\r\n> both kinds of locks?\r\n>\r\n>\r\nThe way I implemented it was not safe because I didn't use both locks\r\nwhen resetting the stats.\r\n\r\nIn this new version of the patch, I've done the following: In shared\r\nmemory I've put the lock in PgStatShared_IOPathOps -- the data structure\r\nwhich contains an array of PgStat_IOOpCounters for all IOOp types for\r\nall IOPaths. Thus, different BackendType + IOPath combinations can be\r\nupdated concurrently without contending for the same lock.\r\n\r\nTo make this work, I made two versions of the PgStat_IOPathOps -- one\r\nthat has the lock, PgStatShared_IOPathOps, and one without,\r\nPgStat_IOPathOps, so that I can persist it to the stats file without\r\nwriting and reading the LWLock and can have a local and snapshot version\r\nof the data structure without the lock.\r\n\r\nThis also necessitated two versions of the data structure wrapping\r\nPgStat_IOPathOps, PgStat_BackendIOPathOps, which contains an array with\r\na PgStat_IOPathOps for each BackendType, and\r\nPgStatShared_BackendIOPathOps, containing an array of\r\nPgStatShared_IOPathOps.\r\n\r\n\r\n>\r\n> > > Looks fine, but I think pgstat_flush_io_ops() need more comments like\r\n> > > other pgstat_flush_* functions.\r\n> > >\r\n> > > +       for (int i = 0; i < BACKEND_NUM_TYPES; i++)\r\n> > > +               stats_shmem->stats[i].stat_reset_timestamp = ts;\r\n> > >\r\n> > > I'm not sure we need a separate reset timestamp for each backend type\r\n> > > but SLRU counter does the same thing..\r\n> > >\r\n> >\r\n> > Yes, I think for SLRU stats it is because you can reset individual SLRU\r\n> > stats. Also there is no wrapper data structure to put it in. I could\r\n> > keep it in PgStatShared_BackendIOPathOps since you have to reset all IO\r\n> > operation stats at once, but I am thinking of getting rid of\r\n> > PgStatShared_BackendIOPathOps since it is not needed if I only keep the\r\n> > locks in PgStat_IOPathOps and make the global shared value an array of\r\n> > PgStat_IOPathOps.\r\n>\r\n> I'm strongly against introducing super granular reset timestamps. I think\r\n> that\r\n> was a mistake for SLRU stats, but we can't fix that as easily.\r\n>\r\n>\r\nSince all stats in pg_stat_io must be reset at the same time, I've put\r\nthe reset timestamp can in the PgStat[Shared]_BackendIOPathOps and\r\nremoved it from each PgStat[Shared]_IOPathOps.\r\n\r\n\r\n>\r\n> > Currently, strategy allocs count only reuses of a strategy buffer (not\r\n> > initial shared buffers which are added to the ring).\r\n> > strategy writes count only the writing out of dirty buffers which are\r\n> > already in the ring and are being reused.\r\n>\r\n> That seems right to me.\r\n>\r\n>\r\n> > Alternatively, we could also count as strategy allocs all those buffers\r\n> > which are added to the ring and count as strategy writes  all those\r\n> > shared buffers which are dirty when initially added to the ring.\r\n>\r\n> I don't think that'd provide valuable information. The whole reason that\r\n> strategy writes are interesting is that they can lead to writing out data a\r\n> lot sooner than they would be written out without a strategy being used.\r\n>\r\n>\r\nThen I agree that strategy writes should only count strategy buffers\r\nthat are written out in order to reuse the buffer (which is in lieu of\r\ngetting a new, potentially clean, shared buffer). This patch implements\r\nthat behavior.\r\n\r\nHowever, for strategy allocs, it seems like we would want to count all\r\ndemand for buffers as part of a BufferAccessStrategy. So, that would\r\ninclude allocating buffers to initially fill the ring, allocations of\r\nnew shared buffers after the ring was already full that are added to the\r\nring because all existing buffers in the ring are pinned, and buffers\r\nalready in the ring which are being reused.\r\n\r\nThis version of the patch only counts the third scenario as a strategy\r\nallocation, but I think it would make more sense to count all three as\r\nstrategy allocs.\r\n\r\nThe downside of this behavior is that strategy allocs count different\r\nscenarios than strategy writes, reads, and extends. But, I think that\r\nthis is okay.\r\n\r\nI'll clarify it in the docs once there is a decision.\r\n\r\nAlso, note that, as stated above, there will never be any strategy\r\nfsyncs (that is, IOPATH_STRATEGY + IOOP_FSYNC will always be 0) because\r\nthe code path starting with register_dirty_segment() which ends with a\r\nregular backend doing its own fsync when pendingOps is full does not\r\nknow what the current IOPATH is and checkpointer does not use a\r\nBufferAccessStrategy.\r\n\r\n\r\n>\r\n> > Subject: [PATCH v24 2/3] Track IO operation statistics\r\n> >\r\n> > Introduce "IOOp", an IO operation done by a backend, and "IOPath", the\r\n> > location or type of IO done by a backend. For example, the checkpointer\r\n> > may write a shared buffer out. This would be counted as an IOOp write on\r\n> > an IOPath IOPATH_SHARED by BackendType "checkpointer".\r\n>\r\n> I'm still not 100% happy with IOPath - seems a bit too easy to confuse with\r\n> the file path. What about 'origin'?\r\n>\r\n>\r\nEnough has changed in this version of the patch that I decided to defer\r\nrenaming until some of the other issues are resolved.\r\n\r\n\r\n>\r\n> > Each IOOp (alloc, fsync, extend, write) is counted per IOPath\r\n> > (direct, local, shared, or strategy) through a call to\r\n> > pgstat_count_io_op().\r\n>\r\n> It seems we should track reads too - it's quite interesting to know whether\r\n> reads happened because of a strategy, for example. You do reference reads\r\n> in a\r\n> later part of the commit message even :)\r\n>\r\n\r\nI've added reads to what is counted.\r\n\r\n\r\n>\r\n> > The primary concern of these statistics is IO operations on data blocks\r\n> > during the course of normal database operations. IO done by, for\r\n> > example, the archiver or syslogger is not counted in these statistics.\r\n>\r\n> We could extend this at a later stage, if we really want to. But I'm not\r\n> sure\r\n> it's interesting or fully possible. E.g. the archiver's write are largely\r\n> not\r\n> done by the archiver itself, but by a command (or module these days) it\r\n> shells\r\n> out to.\r\n>\r\n\r\nI've added note of this to some of the comments and the commit message.\r\nI also omit rows for these BackendTypes from the view. See my later\r\ncomment in this email for more detail on that.\r\n\r\n\r\n>\r\n> > Note that this commit does not add code to increment IOPATH_DIRECT. A\r\n> > future patch adding wrappers for smgrwrite(), smgrextend(), and\r\n> > smgrimmedsync() would provide a good location to call\r\n> > pgstat_count_io_op() for unbuffered IO and avoid regressions for future\r\n> > users of these functions.\r\n>\r\n> Hm. Perhaps we should defer introducing IOPATH_DIRECT for now then?\r\n>\r\n>\r\nIt's gone.\r\n\r\n\r\n>\r\n> > Stats on IOOps for all IOPaths for a backend are initially accumulated\r\n> > locally.\r\n> >\r\n> > Later they are flushed to shared memory and accumulated with those from\r\n> > all other backends, exited and live.\r\n>\r\n> Perhaps mention here that this later could be extended to make\r\n> per-connection\r\n> stats visible?\r\n>\r\n>\r\nMentioned.\r\n\r\n\r\n>\r\n> > Some BackendTypes will not execute pgstat_report_stat() and thus must\r\n> > explicitly call pgstat_flush_io_ops() in order to flush their backend\r\n> > local IO operation statistics to shared memory.\r\n>\r\n> Maybe add "flush ... during ongoing operation" or such? Because they'd all\r\n> flush at commit, IIRC.\r\n>\r\n>\r\nAdded.\r\n\r\n\r\n>\r\n> > diff --git a/src/backend/bootstrap/bootstrap.c\r\n> b/src/backend/bootstrap/bootstrap.c\r\n> > index 088556ab54..963b05321e 100644\r\n> > --- a/src/backend/bootstrap/bootstrap.c\r\n> > +++ b/src/backend/bootstrap/bootstrap.c\r\n> > @@ -33,6 +33,7 @@\r\n> >  #include "miscadmin.h"\r\n> >  #include "nodes/makefuncs.h"\r\n> >  #include "pg_getopt.h"\r\n> > +#include "pgstat.h"\r\n> >  #include "storage/bufmgr.h"\r\n> >  #include "storage/bufpage.h"\r\n> >  #include "storage/condition_variable.h"\r\n>\r\n> Hm?\r\n>\r\n\r\nRemoved\r\n\r\n\r\n>\r\n> > diff --git a/src/backend/postmaster/walwriter.c\r\n> b/src/backend/postmaster/walwriter.c\r\n> > index e926f8c27c..beb46dcb55 100644\r\n> > --- a/src/backend/postmaster/walwriter.c\r\n> > +++ b/src/backend/postmaster/walwriter.c\r\n> > @@ -293,18 +293,7 @@ HandleWalWriterInterrupts(void)\r\n> >       }\r\n> >\r\n> >       if (ShutdownRequestPending)\r\n> > -     {\r\n> > -             /*\r\n> > -              * Force reporting remaining WAL statistics at process\r\n> exit.\r\n> > -              *\r\n> > -              * Since pgstat_report_wal is invoked with 'force' is\r\n> false in main\r\n> > -              * loop to avoid overloading the cumulative stats system,\r\n> there may\r\n> > -              * exist unreported stats counters for the WAL writer.\r\n> > -              */\r\n> > -             pgstat_report_wal(true);\r\n> > -\r\n> >               proc_exit(0);\r\n> > -     }\r\n> >\r\n> >       /* Perform logging of memory contexts of this process */\r\n> >       if (LogMemoryContextPending)\r\n>\r\n> Let's do this in a separate commit and get it out of the way...\r\n>\r\n>\r\nI've put it in a separate commit.\r\n\r\n\r\n>\r\n> > @@ -682,16 +694,37 @@ AddBufferToRing(BufferAccessStrategy strategy,\r\n> BufferDesc *buf)\r\n> >   * if this buffer should be written and re-used.\r\n> >   */\r\n> >  bool\r\n> > -StrategyRejectBuffer(BufferAccessStrategy strategy, BufferDesc *buf)\r\n> > +StrategyRejectBuffer(BufferAccessStrategy strategy, BufferDesc *buf,\r\n> bool *write_from_ring)\r\n> >  {\r\n> > -     /* We only do this in bulkread mode */\r\n> > +\r\n> > +     /*\r\n> > +      * We only reject reusing and writing out the strategy buffer this\r\n> in\r\n> > +      * bulkread mode.\r\n> > +      */\r\n> >       if (strategy->btype != BAS_BULKREAD)\r\n> > +     {\r\n> > +             /*\r\n> > +              * If the buffer was from the ring and we are not\r\n> rejecting it, consider it\r\n> > +              * a write of a strategy buffer.\r\n> > +              */\r\n> > +             if (strategy->current_was_in_ring)\r\n> > +                     *write_from_ring = true;\r\n>\r\n> Hm. This is set even if the buffer wasn't dirty? I guess we don't expect\r\n> StrategyRejectBuffer() to be called for clean buffers...\r\n>\r\n>\r\nYes, we do not expect it to be called for clean buffers.\r\nI've added a comment about this assumption.\r\n\r\n\r\n>\r\n> >  /*\r\n> > diff --git a/src/backend/utils/activity/pgstat_database.c\r\n> b/src/backend/utils/activity/pgstat_database.c\r\n> > index d9275611f0..d3963f59d0 100644\r\n> > --- a/src/backend/utils/activity/pgstat_database.c\r\n> > +++ b/src/backend/utils/activity/pgstat_database.c\r\n> > @@ -47,7 +47,8 @@ pgstat_drop_database(Oid databaseid)\r\n> >  }\r\n> >\r\n> >  /*\r\n> > - * Called from autovacuum.c to report startup of an autovacuum process.\r\n> > + * Called from autovacuum.c to report startup of an autovacuum process\r\n> and\r\n> > + * flush IO Operation statistics.\r\n> >   * We are called before InitPostgres is done, so can't rely on\r\n> MyDatabaseId;\r\n> >   * the db OID must be passed in, instead.\r\n> >   */\r\n> > @@ -72,6 +73,11 @@ pgstat_report_autovac(Oid dboid)\r\n> >       dbentry->stats.last_autovac_time = GetCurrentTimestamp();\r\n> >\r\n> >       pgstat_unlock_entry(entry_ref);\r\n> > +\r\n> > +     /*\r\n> > +      * Report IO Operation statistics\r\n> > +      */\r\n> > +     pgstat_flush_io_ops(false);\r\n> >  }\r\n>\r\n> Hm. I suspect this will always be zero - at this point we haven't\r\n> connected to\r\n> a database, so there really can't have been much, if any, IO. I think I\r\n> suggested doing something here, but on a second look it really doesn't make\r\n> much sense.\r\n>\r\n> Note that that's different from doing something in\r\n> pgstat_report_(vacuum|analyze) - clearly we've done something at that\r\n> point.\r\n>\r\n\r\nI've removed this.\r\n\r\n\r\n>\r\n> >  /*\r\n> > - * Report that the table was just vacuumed.\r\n> > + * Report that the table was just vacuumed and flush IO Operation\r\n> statistics.\r\n> >   */\r\n> >  void\r\n> >  pgstat_report_vacuum(Oid tableoid, bool shared,\r\n> > @@ -257,10 +257,15 @@ pgstat_report_vacuum(Oid tableoid, bool shared,\r\n> >       }\r\n> >\r\n> >       pgstat_unlock_entry(entry_ref);\r\n> > +\r\n> > +     /*\r\n> > +      * Report IO Operations statistics\r\n> > +      */\r\n> > +     pgstat_flush_io_ops(false);\r\n> >  }\r\n> >\r\n> >  /*\r\n> > - * Report that the table was just analyzed.\r\n> > + * Report that the table was just analyzed and flush IO Operation\r\n> statistics.\r\n> >   *\r\n> >   * Caller must provide new live- and dead-tuples estimates, as well as a\r\n> >   * flag indicating whether to reset the changes_since_analyze counter.\r\n> > @@ -340,6 +345,11 @@ pgstat_report_analyze(Relation rel,\r\n> >       }\r\n> >\r\n> >       pgstat_unlock_entry(entry_ref);\r\n> > +\r\n> > +     /*\r\n> > +      * Report IO Operations statistics\r\n> > +      */\r\n> > +     pgstat_flush_io_ops(false);\r\n> >  }\r\n>\r\n> Think it'd be good to amend these comments to say that otherwise stats\r\n> would\r\n> only get flushed after a multi-relatio autovacuum cycle is done / a\r\n> VACUUM/ANALYZE command processed all tables.  Perhaps add the comment to\r\n> one\r\n> of the two functions, and just reference it in the other place?\r\n>\r\n\r\nDone\r\n\r\n\r\n>\r\n>\r\n> > --- a/src/include/utils/backend_status.h\r\n> > +++ b/src/include/utils/backend_status.h\r\n> > @@ -306,6 +306,40 @@ extern const char\r\n> *pgstat_get_crashed_backend_activity(int pid, char *buffer,\r\n> >\r\n>                                 int buflen);\r\n> >  extern uint64 pgstat_get_my_query_id(void);\r\n> >\r\n> > +/* Utility functions */\r\n> > +\r\n> > +/*\r\n> > + * When maintaining an array of information about all valid\r\n> BackendTypes, in\r\n> > + * order to avoid wasting the 0th spot, use this helper to convert a\r\n> valid\r\n> > + * BackendType to a valid location in the array (given that no spot is\r\n> > + * maintained for B_INVALID BackendType).\r\n> > + */\r\n> > +static inline int backend_type_get_idx(BackendType backend_type)\r\n> > +{\r\n> > +     /*\r\n> > +      * backend_type must be one of the valid backend types. If caller\r\n> is\r\n> > +      * maintaining backend information in an array that includes\r\n> B_INVALID,\r\n> > +      * this function is unnecessary.\r\n> > +      */\r\n> > +     Assert(backend_type > B_INVALID && backend_type <=\r\n> BACKEND_NUM_TYPES);\r\n> > +     return backend_type - 1;\r\n> > +}\r\n>\r\n> In function definitions (vs declarations) we put the 'static inline int'\r\n> in a\r\n> separate line from the rest of the function signature.\r\n>\r\n\r\nFixed.\r\n\r\n\r\n>\r\n> > +/*\r\n> > + * When using a value from an array of information about all valid\r\n> > + * BackendTypes, add 1 to the index before using it as a BackendType to\r\n> adjust\r\n> > + * for not maintaining a spot for B_INVALID BackendType.\r\n> > + */\r\n> > +static inline BackendType idx_get_backend_type(int idx)\r\n> > +{\r\n> > +     int backend_type = idx + 1;\r\n> > +     /*\r\n> > +      * If the array includes a spot for B_INVALID BackendType this\r\n> function is\r\n> > +      * not required.\r\n>\r\n> The comments around this seem a bit over the top, but I also don't mind\r\n> them\r\n> much.\r\n>\r\n\r\nFeel free to change them to something shorter. I couldn't think of\r\nsomething I liked.\r\n\r\n\r\n>\r\n>\r\n> > Add pg_stat_io, a system view which tracks the number of IOOp (allocs,\r\n> > writes, fsyncs, and extends) done through each IOPath (e.g. shared\r\n> > buffers, local buffers, unbuffered IO) by each type of backend.\r\n>\r\n> Annoying question: pg_stat_io vs pg_statio? I'd not think of suggesting the\r\n> latter, except that we already have a bunch of views with that prefix.\r\n>\r\n>\r\nI have thoughts on this but thought it best deferred until after the _data\r\ndecision.\r\n\r\n\r\n>\r\n> > Some of these should always be zero. For example, checkpointer does not\r\n> > use a BufferAccessStrategy (currently), so the "strategy" IOPath for\r\n> > checkpointer will be 0 for all IOOps.\r\n>\r\n> What do you think about returning NULL for the values that we except to\r\n> never\r\n> be non-zero? Perhaps with an assert against non-zero values? Seems like it\r\n> might be helpful for understanding the view.\r\n>\r\n\r\nYes, I like this idea.\r\n\r\nBeyond just setting individual cells to NULL, if an entire row would be\r\nNULL, I have now dropped it from the view.\r\n\r\nSo far, I have omitted from the view all rows for BackendTypes\r\nB_ARCHIVER, B_LOGGER, and B_STARTUP.\r\n\r\nShould I also omit rows for B_WAL_RECEIVER and B_WAL_WRITER for now?\r\n\r\nI have also omitted rows for IOPATH_STRATEGY for all BackendTypes\r\n*except* B_AUTOVAC_WORKER, B_BACKEND, B_STANDALONE_BACKEND, and\r\nB_BG_WORKER.\r\n\r\nDo these seem correct?\r\n\r\nI think there are some BackendTypes which will never do IO Operations on\r\nIOPATH_LOCAL but I am not sure which. Do you know which?\r\n\r\nAs for individual cells which should be NULL, so far what I have is:\r\n- IOPATH_LOCAL + IOOP_FSYNC\r\nI am sure there are others as well. Can you think of any?\r\n\r\n\r\n>\r\n> > +/*\r\n> > +* When adding a new column to the pg_stat_io view, add a new enum\r\n> > +* value here above IO_NUM_COLUMNS.\r\n> > +*/\r\n> > +enum\r\n> > +{\r\n> > +     IO_COLUMN_BACKEND_TYPE,\r\n> > +     IO_COLUMN_IO_PATH,\r\n> > +     IO_COLUMN_ALLOCS,\r\n> > +     IO_COLUMN_EXTENDS,\r\n> > +     IO_COLUMN_FSYNCS,\r\n> > +     IO_COLUMN_WRITES,\r\n> > +     IO_COLUMN_RESET_TIME,\r\n> > +     IO_NUM_COLUMNS,\r\n> > +};\r\n>\r\n> We typedef pretty much every enum so the enum can be referenced without the\r\n> 'enum' prefix. I'd do that here, even if we don't need it.\r\n>\r\n>\r\nSo, I left it anonymous because I didn't want it being used as a type\r\nor referenced anywhere else.\r\n\r\nI am interested to hear more about your SQL enums idea from upthread.\r\n\r\n- Melanie\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Melanie Plageman", "Address": "melanieplageman@gmail.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Justin Pryzby <pryzby@telsasoft.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Magnus Hagander <magnus@hagander.net>, Pg Hackers <pgsql-hackers@postgresql.org>, Lukas Fittl <lukas@fittl.com>, Thomas Munro <thomas.munro@gmail.com>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Wed, 13 Jul 2022 13:14:52 -0400"], "From": ["Melanie Plageman <melanieplageman@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657732517; cv=none; d=google.com; s=arc-20160816; b=KM7FkPZpQLLDJffOdCZB4KcqhGiIx4Gxv/oNIc45tCT91f+fdVDsRDGv6HMYOmmem6 +dgHEzpNrYrrFW31fsqRhN7y9a3tk+WTuJv4xUGFc5wkQs+1YHPXRNeZby0vYnQw3zb5 wBs58iLwmAG3+Dg6BXGEoVlGkEYVt0tDZAB6ej4Fs3rrSUEplrtP/LX6iGhKkFi9l3o4 J5aLzXp70OO+bl+VoV6hZQq4ubU808iWgmbEEYUn3loTTp5+VX8H+9dvM92Dxjs7cXDb aoKo3GDVEC2tJ3AS1yTVDKEuUMxFDTYY2Bs3lqXNTUCzUmsYyT3aXRlADjw+y920xzO+ dwxg=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp269250lfl; Wed, 13 Jul 2022 10:15:17 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g11-20020adfd1eb000000b0021da4950745si19384377wrd.943.2022.07.13.10.15.17 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 10:15:17 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410556@lists.postgresql.org>) id 1oBfxF-0002CA-4I for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 17:15:17 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oBfx8-0000U8-Sb for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 17:15:11 +0000", "from mail-wm1-x32c.google.com ([2a00:1450:4864:20::32c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oBfx3-0000Pj-Ut for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 17:15:10 +0000", "by mail-wm1-x32c.google.com with SMTP id ay25so6922600wmb.1 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 10:15:05 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAAKRu_bM55pj3pPRW0nd_-paWHLRkOU69r816AeztBBa-N1HLA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAAKRu_Y_B9pLm1-b6A5CfRhuWEMMy2iMy1zNG0_3GhejD-ZsMg@mail.gmail.com> <20220706192047.sikr2vuwvpslqdrw@alap3.anarazel.de> <CAAKRu_YKc9e_=CZ4RB97Krx9TQb-zfNMoqdP45AYs5uZFqXeSA@mail.gmail.com> <20220712.170621.2168803584651416807.horikyota.ntt@gmail.com> <CAAKRu_ZFUkRKP08-L0413+g3XtYCjqJNPT2A7q0eT_otz_ei=g@mail.gmail.com> <20220712170131.fql5addovb2oiw7w@awork3.anarazel.de>"], "X-Received": ["by 2002:adf:fbd2:0:b0:21d:9b35:ab02 with SMTP id d18-20020adffbd2000000b0021d9b35ab02mr4156947wrs.440.1657732517504; Wed, 13 Jul 2022 10:15:17 -0700 (PDT)", "by 2002:a05:600c:a41:b0:39c:1512:98bd with SMTP id c1-20020a05600c0a4100b0039c151298bdmr11058616wmq.88.1657732504340; Wed, 13 Jul 2022 10:15:04 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAAKRu_bM55pj3pPRW0nd_-paWHLRkOU69r816AeztBBa-N1HLA%40mail.gmail.com>"], "In-Reply-To": ["<20220712170131.fql5addovb2oiw7w@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410556@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000000e8a3c05e3b2ed65\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410556@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=IgyIvd3P46ZEnDmVOmMgBJcynUVr5K6XzcVb1K6KDYE=; b=bhvw416W62enzvPiF4+jbohIwDg200PkyUihmvEhp0X9CYMflMdJEyFFbdkKg6GBHb WJJTWwqFntPW/LQ5BLzG+H+kh54nEgPlX4573TufxbDMbFZMXBem4I5KMP0PAEIEbTiC kliI4U6xrgz5Q7oZfZgqVDdxlyXF7hfgaVLzVQh0vKAm5V4wfQNLft3SegqCe4Ru3mrS ADuPDQukGcKQamp1ommUTtlTX76HRw/S5kpzqAlwj7OBjtVmG3N0OoUaKuKp7Nt3h4P+ /vMPwMHHcSZ+fcndMQUyStYDMCDgH4+nkSQejTmry77qxHqcRuN0QGDklS/xb8tUgu+N G5xw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9NxhhJBwsmPBieUMGHpzsuO+VpfnmGb8oHfyG+gm8WVwYEcEoi m3SiXdl91zJ9Hfla4NJT/z13SXnFlWv4hzqkwf4="], "X-Google-Smtp-Source": ["AGRyM1sf6lASBm148nf61AriPQvt+0Hnot61MmqDhOf9xPHUQVOyjjLShRqNItJ7861kZvbauX6B"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=IgyIvd3P46ZEnDmVOmMgBJcynUVr5K6XzcVb1K6KDYE=; b=fod+hwemQCdZGVDXUiPFmFow3eKNKEW8BWgBQyR5eQwfT40w8M661ptExjwOJEjakV nkN72q4zAwVIBD59wcCiaq6Obccwxvjmv3LJB1zSKuncacVMo22xylRXlzU8VWXMOEmr x/DJv7UEqGdkVqpdFufVBL1TZBhoKG42mQgBqopeLweBnFDAeT+lMAeU//vRNPzbI/sG f0p+5RGu7GCeKaanO9y5ET+bU54QYCksWQO1nznISClKoUMXbpg5o3LQSgmqwO3ar4j1 1ZUbBDshPaTnmcfNIBl9DrLnB9FwjrBWr9Oh3A+Hv5oDGq1fkq7peDjfsBnS58tOWCng ytGg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=bhvw416W; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410556@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410556@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=IgyIvd3P46ZEnDmVOmMgBJcynUVr5K6XzcVb1K6KDYE=; b=ZG0HUr0libWecCgciQ5CiipAnq2dEB2k+WRGsLJ26rTle71aokYo71l3xR5PM3nJnM MKZ3THun8IxPkLuRImjHaa1b22bZfp3Daibw1+I66+M3JHo2jX/gjxRV/qwj7YN3yqIG I6NtJ+RxVmjbm3UFVVudnNc8O3LRZYePJv0EtA3mRd4lyKjL79MSr1yH2JU1BvzwpzjI 5ge5pv8Ag4dzOOqpz2acg80HBqxtKF5DsdyQKwih/AzHxSN7XKGmm2uES20SWbBLTqby YnYh3Pj1EYASlaNyV8JEqmXty6zCwSoQ6/Cvg/vbdH8mUUi4GSk0EYrfFDRFNk09gSqW UIFw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=bhvw416W; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410556@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410556@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220712170131.fql5addovb2oiw7w@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:24:47+00	peter.eisentraut@enterprisedb.com	Re: make update-po@master stops at pg_upgrade	<7a03b42b-9c93-7d5a-fb26-c468f762f4ee@enterprisedb.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	14	8889	[]		On 13.07.22 19:41, Tom Lane wrote:\r\n> Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n>> Hmm, I got this failure:\r\n>> /usr/bin/xgettext: no se especific√≥ el fichero de entrada\r\n> \r\n> Hmm ... are you doing this in a VPATH setup?  Does it help\r\n> if you make the entry be\r\n> \r\n> GETTEXT_FILES    = $(wildcard $(srcdir)/*.c)\r\n> \r\n> I'd supposed we didn't need to be careful about that, because\r\n> I saw uses of $(wildcard) without it ... but I now see other uses\r\n> with.\r\n\r\nNote that we have this in nls-global.mk which tries to avoid having the\r\nvpath details sneak into the output:\r\n\r\npo/$(CATALOG_NAME).pot: $(GETTEXT_FILES) $(MAKEFILE_LIST)\r\n# Change to srcdir explicitly, don't rely on $^.  That way we get\r\n# consistent #: file references in the po files.\r\n...\r\n     $(XGETTEXT) -D $(srcdir) -D . -n $(addprefix -k, $(GETTEXT_TRIGGERS)) $(addprefix --flag=, $(GETTEXT_FLAGS)) $(GETTEXT_FILES)\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Wed, 13 Jul 2022 20:24:47 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736699; cv=none; d=google.com; s=arc-20160816; b=d6dU3T/OQKRDJsEYTn08p9DUjHOJbTR9pfXpXG1dH595wuWmx3j2yGu0RL8TooppJZ LUkZb+A60RUeQJcHv6RSfYDmQ+I6nQMn5ShBe3cUcT53Tb9Cq8u4eZMSQOS9xI2xsbzo wL2VmmEqKifK+KlHlyo+2N0MYJyNMkqMB3OJ+L+oShDP1g9gVCYjikw3X5tkqHztQDvZ WTo6ji1jQrspFNy2z6YxGkHoc/tgoLU4W+XjVbXg0q71giYGpi6YT1HATGJrV5Xzl2vA m8e6zxN8AWxjM6+bJFBaU/4z7k9lT5pZdJy8YwbzGjJPZIJuUV2I7+O8hwVFmweJp97s JcPw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp295174lfl; Wed, 13 Jul 2022 11:24:59 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g66-20020a676b45000000b0035745fb9f92si2756086vsc.344.2022.07.13.11.24.59 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:24:59 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410591@lists.postgresql.org>) id 1oBh2g-0004Ct-9k for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:24:58 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBh2b-0002ct-Mq for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:24:53 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBh2Y-0000wY-DI for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:24:53 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id 0BE1E5C015C; Wed, 13 Jul 2022 14:24:49 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute5.internal (MEProxy); Wed, 13 Jul 2022 14:24:49 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 14:24:47 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<7a03b42b-9c93-7d5a-fb26-c468f762f4ee@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql> <2422143.1657734095@sss.pgh.pa.us>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:8A3PYtVkNKTBDqP1NUMTWZ93TSizR4cN36H1mIlDvRj14R7E1ykWrw> <xmx:8A3PYgkRhuMtkdcMzivC_X3ide_2fh22LeB_rslwujttAChI0a7wsA> <xmx:8A3PYifzlVaGudiY2PkJOvsiJnk_313-0HPVBltDqhP0bOHzzoKmDw> <xmx:8Q3PYqcdOzR-EDSPw3eahev3yLUYPG9FrSIvUPqZaSZ4ieAzeplXUg>"], "X-Received": ["by 2002:a1f:1dd4:0:b0:374:a53e:b5b with SMTP id d203-20020a1f1dd4000000b00374a53e0b5bmr2055416vkd.17.1657736699186; Wed, 13 Jul 2022 11:24:59 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/7a03b42b-9c93-7d5a-fb26-c468f762f4ee%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<2422143.1657734095@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410591@lists.postgresql.org>"], "X-Me-Sender": ["<xms:8A3PYmW2wCxmtXbPNV4ZOgFJ7CnZF7PcxHMCRXMgqd_Y0AJeO22qvg> <xme:8A3PYimD_jSX58fZql5aZz6yMjNwd23LJQVxSszxGgmcae3e7CPmmUsPPGiez5qyA s4kiqd-3rjJefl-vA>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410591@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:8A3PYqYGYamuWRDsoMhLT_UpKoUr7oBqZEPxI2PZnUxuemFLpHsmot41Jy-W9hjfCPDuLEeOG5I5zi9pQB9NzdyUGLYH-09w>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657736689; x= 1657823089; bh=8jRnt4IBsqxOR6DVcGitrRid4OV+p/yIBxXErZCJab4=; b=W XQcA7ZOKlSwoffr5RG21G7BgXmeieb3E64sF64e0Q4a9H48GOjoESXqGWdkK1tAW v/Q2aBJTAZ1Rgd0UOm87kFuWiH8nvtMKFoUfGD+u47HQLUOBPyB/MHssX/6SAeD6 0HiMZmw/MfctbJBWvDaSIL3Ps8yZk6qp6/kl+IXG5y7RKjv64A3/BXr7cFbB+bGX EDrorIgUa+oUx225P5O8JtsU12h9B9p4nR/idH91mTfP0s78gvSM1oLAGN47UDR9 C/r5O5hYqZ8X5jHzg3esMzKCkSWD/21hatWsfz+wvmj6WT4oSR4ATEcNhCNU8s2i HBZmzrns0uN+vaCFzEgmQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedguddvgecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpefkffggfgfuvfevfhfhjggtgfesthekredttdefjeenucfhrhhomheprfgv thgvrhcugfhishgvnhhtrhgruhhtuceophgvthgvrhdrvghishgvnhhtrhgruhhtsegvnh htvghrphhrihhsvggusgdrtghomheqnecuggftrfgrthhtvghrnhephfejudeuleefheeu tddufeetjeevgeeiieeujeeuheefkedttdeuieeiieethfevnecuvehluhhsthgvrhfuih iivgeptdenucfrrghrrghmpehmrghilhhfrhhomhepphgvthgvrhdrvghishgvnhhtrhgr uhhtsegvnhhtvghrphhrihhsvggusgdrtghomh"], "X-Google-Smtp-Source": ["AGRyM1s/l/b6qmkwKFhj+WUX10YA9ZvvRM32GwwQe3IALIpcWLbJ+pmEYg1K3UD/YTWSB7mU/3C/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :feedback-id:dkim-signature; bh=8jRnt4IBsqxOR6DVcGitrRid4OV+p/yIBxXErZCJab4=; b=vvvbnXkRmjBwxqVZ/tyDePQre6oG8qOqm3cV1GkvEXAFbKKoDVy2FCRvAwb5JxlIML 2hGSaYIEdYjNuuqqdH7PQ29NyXJC5rfHv6qjdbZqMP7c/YEY2LUd7GPI1Eu5TKnV6IvL Wsv/U0UeMlTxYWoPe2DShnO1DDm4r1fmvCNwOJMwcepTw1AniA2tB59ElukoUg1+LmNB qwCFk3Y9WtaxfiOoPp6nZdw9k9dz/oCM9B9QT2RpAxJ30YZQUr7PituIx+Flne+MqhS4 ANGr19dPO8BNknYQ/XAS1X8xveKZIsuIzTgB0U+kKjlfoYbVGqHa4ok8/uANIwQEguxW PKdQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=WXQcA7ZO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410591@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410591@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=WXQcA7ZO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410591@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410591@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<2422143.1657734095@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:28:44+00	tgl@sss.pgh.pa.us	Re: make update-po@master stops at pg_upgrade	<2433004.1657736924@sss.pgh.pa.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	16	6116	[]		Peter Eisentraut <peter.eisentraut@enterprisedb.com> writes:\r\n> Note that we have this in nls-global.mk which tries to avoid having the\r\n> vpath details sneak into the output:\r\n\r\n> po/$(CATALOG_NAME).pot: $(GETTEXT_FILES) $(MAKEFILE_LIST)\r\n> # Change to srcdir explicitly, don't rely on $^.  That way we get\r\n> # consistent #: file references in the po files.\r\n> ...\r\n>      $(XGETTEXT) -D $(srcdir) -D . -n $(addprefix -k, $(GETTEXT_TRIGGERS)) $(addprefix --flag=, $(GETTEXT_FLAGS)) $(GETTEXT_FILES)\r\n\r\nHmm ... so how does that work with built files in a VPATH build today?\r\n\r\nAnyway, I'll go revert the patch for now, since it's clearly got\r\nat least a couple problems that need sorting.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 14:28:44 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736934; cv=none; d=google.com; s=arc-20160816; b=l+86uVc6WSEWOJrgWuExhzDiwjpqxxcVuQSxJJlx+G0Jnck0OAE/ezUOAbKHsRN4S6 4OU9OjzeVYBKDRMbJm0LnD078PBHu+Ksr/T9d0kXd33eTbSeoRm0ZWScpZFuWEpw4/Nd XsBQVqrqvA+uNpnnELrST2WMh6nTy+VbEFjjOZkHo+0LAQUO4ylmbpBnLMtxskiT8nXi Mn0p0a+pNfeFIR65e7hNgGfOSprdzeMRbHD4hAqMtG/Bug/HgVvwBLhLFzdJL56A6jlN S2g1uJIJJ808YhIHYwD81QL6DnNXiSIXmw32x59m8SBg1xv6XwfY7ZOQO4FfnNregJjt +PUg=="], "Comments": ["In-reply-to Peter Eisentraut <peter.eisentraut@enterprisedb.com> message dated \\"Wed, 13 Jul 2022 20:24:47 +0200\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp296313lfl; Wed, 13 Jul 2022 11:28:54 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bo19-20020a056000069300b0021d7b8401cfsi17922536wrb.246.2022.07.13.11.28.54 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:28:54 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410594@lists.postgresql.org>) id 1oBh6U-0003UU-8K for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:28:54 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBh6P-0001ro-KG for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:28:49 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBh6N-0000Zn-EL for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:28:48 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DISiAS2433005; Wed, 13 Jul 2022 14:28:44 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2433003.1657736924.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2433004.1657736924@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220713172505.kotsc6i2eelq6j6b@alvherre.pgsql> <2422143.1657734095@sss.pgh.pa.us> <7a03b42b-9c93-7d5a-fb26-c468f762f4ee@enterprisedb.com>"], "X-Received": ["by 2002:a5d:6c67:0:b0:21d:b9bf:5e1c with SMTP id r7-20020a5d6c67000000b0021db9bf5e1cmr4536237wrz.133.1657736934585; Wed, 13 Jul 2022 11:28:54 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2433004.1657736924%40sss.pgh.pa.us>"], "In-Reply-To": ["<7a03b42b-9c93-7d5a-fb26-c468f762f4ee@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410594@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410594@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tp1Q3e7I9PzDpCiFq7tpJ0++XNwrSkZRQ9n6MHuRXs7s/wH+MJJahpQbaPqMrzLVAxZX3x"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=hcAN9lbh+qi7tIWneNc7J2fOCev9NYiMK22WiYkA0Hk=; b=a1zMZXfNk/6xSEwvxfSPfWb7MzPNYiKtgI/1nzUJCrjIKfOa6bjKPdWkiyo2Bl+mAj A5E7yGpY3X/FXPRg1cHiBwwmIX+2aCYFqIbLav1nABjUP1O8R6mGl93goH1dGM75C00Y WAndJz6JddFcRi0L9zJcC3w1UNhXPzFkWttKMiyVMCLafgXn2ia1FABNYHblNxRrohD1 1cnEWPivCL6i5O/JSkhGC0nwSnPsBQK0zDHbAUGIB60VbnvStSpZeu9m+GmRLIq5Ob/s CIq2HPE0llQ3X/nrsvwHlCFdMpQmnJp9Adgl4Dl0iBiYtA+ABizr2ToACxKrQbtUKLPm mNKg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410594@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410594@lists.postgresql.org"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410594@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410594@lists.postgresql.org"]}	["<7a03b42b-9c93-7d5a-fb26-c468f762f4ee@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:53:50+00	nathandbossart@gmail.com	Re: allow building trusted languages without the untrusted versions	<20220713185350.GA3118442@nathanxps13>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	21	8886	[]		Given the discussion in this thread, I intend to mark the commitfest entry\r\nas Withdrawn shortly.  Before I do, I thought I'd first check whether 0001\r\n[0] might be worthwhile independent of $SUBJECT.  This change separates the\r\n[un]trusted handler and validator functions for PL/Perl so that we no\r\nlonger need to inspect pg_language to determine whether to use the trusted\r\nor untrusted code path.  I was surprised to learn that you can end up with\r\nPL/PerlU even if you've specified the trusted handler/validator functions.\r\nBesides bringing things more in line with how PL/Tcl does things, this\r\nchange simplifies function lookup in plperl_proc_hash.  I suppose such a\r\nchange might introduce a compatibility break for users who are depending on\r\nthis behavior, but I don't know if that's worth worrying about.\r\n\r\n[0] https://www.postgresql.org/message-id/attachment/133940/v1-0001-Do-not-use-pg_language-to-determine-whether-PL-Pe.patch\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Robert Haas <robertmhaas@gmail.com>, Tom Lane <tgl@sss.pgh.pa.us>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 11:53:50 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: allow building trusted languages without the untrusted versions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657738443; cv=none; d=google.com; s=arc-20160816; b=EqvM5PpA77p0XPk9TrbPXafZLvmH8PttWDo5l6t01BDxalrkLhbgvQCKxZ0EFAM+rV rEMBJUf0+yWNZ9G7JO2ubCYxYOLmW/ORP00f00xQFBhfimVMyCoGlC72hjoXhMQ5g5vR +KkrK76Pz/XHWAzNUYCejymDF1C9NfA2swwtQmm894mHMc5Zzau1I7xxFIl4IrsWd+Dp lAdALtiewi19L2FwImKKwuETUAhr/AjVj9UeLolK4/snF8K33Rit2ot8fXu+3K7gmmnx JAv5FYf2+mTd5bToomY237Q5F+bbelNiQtkqmwrtNm72IgF5eiWjbyy0kDs7UYgY8Wg2 4/IA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp304658lfl; Wed, 13 Jul 2022 11:54:03 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n13-20020adfe34d000000b0021d650fd1aesi7008124wrj.938.2022.07.13.11.54.03 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:54:03 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410609@lists.postgresql.org>) id 1oBhUp-0001B0-4I for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:54:03 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBhUk-0007wM-IU for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:53:58 +0000", "from mail-pj1-x1029.google.com ([2607:f8b0:4864:20::1029]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBhUf-0000RL-IY for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 18:53:57 +0000", "by mail-pj1-x1029.google.com with SMTP id o15so13373547pjh.1 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 11:53:53 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id rw9-20020a17090b2c4900b001ef8de342b8sm1998677pjb.15.2022.07.13.11.53.51 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:53:51 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713185350.GA3118442@nathanxps13>"], "Precedence": ["bulk"], "References": ["<1290329.1653326228@sss.pgh.pa.us> <CA+TgmoY-Xy_ObfYVUTSamD8BmW8npaktbr65JtnkW-c1VQobVA@mail.gmail.com> <1333860.1653338790@sss.pgh.pa.us> <CA+TgmoYZKLxftaZZvj4_-zHQ27CBeUs+KvggyU3qS79-7aQEPA@mail.gmail.com> <1354561.1653345768@sss.pgh.pa.us> <CA+TgmoZ_c0j4ut87_QCFm697Qq5Z_u66VZt2PYenfZVjUT1qRA@mail.gmail.com> <20220524172851.GA1191690@nathanxps13> <CA+TgmobOQiDXpYq6TgaCzH3p5c0Fko-wXqCjgd5YsR6RsX31vA@mail.gmail.com> <20220524205841.GA1254661@nathanxps13> <849661f1-85a3-2833-5477-059a9b58e70f@enterprisedb.com>"], "X-Received": ["by 2002:a5d:47c6:0:b0:21d:97dc:8f67 with SMTP id o6-20020a5d47c6000000b0021d97dc8f67mr4731888wrc.372.1657738443467; Wed, 13 Jul 2022 11:54:03 -0700 (PDT)", "by 2002:a17:902:f64c:b0:16c:131:73ff with SMTP id m12-20020a170902f64c00b0016c013173ffmr4340105plg.170.1657738432362; Wed, 13 Jul 2022 11:53:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713185350.GA3118442%40nathanxps13>"], "In-Reply-To": ["<849661f1-85a3-2833-5477-059a9b58e70f@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410609@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410609@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=hrBzAUzdZ3lCg9Cl9iK/lkczkWOJqd4Kwi14qWBbAs8=; b=K9+/1hQlRdj+l/2yqGC1UA1sw/NA28Ruc/k0rlkwIxl5KkjOVLB9O5VJViBV3OZXvT yNJR1n+BNzZSFje4eCtfpuWcmstqA+lH/ajF9uIVqaCXzF5qkqgaegwXShGqHELzhzat ww9e7sDhSP0fp/NelemcUZ9Rdqiec8DYAkVp+uFWgMETXr9lOFLkVvDTQgBNPYFsowBA CL3zsFLUaXUYqY8uu6gAeI+2ycM5Yd8ZARg3rtVCKw4KN1zOg6ldcoJ5eH/rdoEKYK5k p2pb92H4F3GSd86UgMHaRBB44R1Gil5fIkMM5Bq2RMtAFcvSfokQKUdyEmh6mX/H/7EJ EEWA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/xYysr0vWH5nUBV/c61G8bR3x7SxbpmqVYIV1Mc80dxlaelfTw JQLHrpqpOsAktbusXnQY6Q4="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uFMpc5TfftHOU5Ig91nDzeXiCvlyhvikyOLB9sOS7B4Te+mW5vmhiQ3Cjk9H7rssViagyI"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=hrBzAUzdZ3lCg9Cl9iK/lkczkWOJqd4Kwi14qWBbAs8=; b=ux8EshvhgetjqCgPPJFAIiboOfEHHU+sArL9vMD4ar1zEFl2n4rX4fSomWJoOAfJY3 Q0OZKZWae9d0q65gvpQ8GUfMwDMo1K0is56p7FPTbt5EssrqdKyz54PaFSyuruvcnwyO E9+3OEEIfVNS/t3705Fgw1fmYoDzIq62vhoAJ30a1SJWB9K7R0iFrj0A3Ltyd/VB9RtR 34ZvkeSXoxU2gKfxrriFpAPpGGdDJ51igfpodn9pIKtTke2QJGCu8iJ15ed5OTrdkMst Z3cgtaJ2FPpaH8zPS6qkTG611EYXe2s47RU8a0TBXs6Qt/ipZm3BO8/HfAQfh2suPAfh 1JCw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"K9+/1hQl\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410609@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410609@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=hrBzAUzdZ3lCg9Cl9iK/lkczkWOJqd4Kwi14qWBbAs8=; b=4pdfN4f401jmPb9byBzsaeW08ip6R5+DjvjrIDqsl3TuUvzIaz7BQ+42GD414RwOoQ Ga0/Os+cHWTvnlj8HXzVisp1+ktj8/spEx8qLdJO8e5o9gINqsSUrnzIHSz2VJSUcUu8 BaAGysqYgTDJKB2oMEd4EguMhfnzQp8WmT6rq26sfjKnlLTp6WDIY/sq5HqPn5DWXoKP Br7gf3MeiJilsp89j33ljppyiE6vTzLbRxR06+NFndWP7SIvJydDVh4jxnnydfhN/r9H gBKKzrqpbQO9C4/afNU2SmdWYWxovUuvWXs65ygjVBvAuASms1kx6ZOr0W3xWY9Cr+wy YdTA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"K9+/1hQl\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410609@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410609@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<849661f1-85a3-2833-5477-059a9b58e70f@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:38:03+00	nathandbossart@gmail.com	Re: Add --{no-,}bypassrls flags to createuser	<20220713183803.GB3117671@nathanxps13>	[{"Name": "Shinoda, Noriyoshi (PN Japan FSIP)", "Address": "noriyoshi.shinoda@hpe.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Shinya11.Kato@oss.nttdata.com", "Address": "Shinya11.Kato@oss.nttdata.com"}, {"Name": "przemyslaw@sztoch.pl", "Address": "przemyslaw@sztoch.pl"}, {"Name": "david.g.johnston@gmail.com", "Address": "david.g.johnston@gmail.com"}, {"Name": "robertmhaas@gmail.com", "Address": "robertmhaas@gmail.com"}, {"Name": "daniel@yesql.se", "Address": "daniel@yesql.se"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	19	8455	[]		On Wed, Jul 13, 2022 at 08:14:28AM +0000, Shinoda, Noriyoshi (PN Japan FSIP) wrote:\r\n> The attached small patch fixes the message in "createuser --help" command. The patch has changed to specify a time stamp for the --valid-for option. I don't think the SGML description needs to be modified.\r\n\r\nGood catch.  Apart from a nitpick about the indentation, your patch looks\r\nreasonable to me.\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Shinya11.Kato@oss.nttdata.com\\" <Shinya11.Kato@oss.nttdata.com>, \\"przemyslaw@sztoch.pl\\" <przemyslaw@sztoch.pl>, \\"david.g.johnston@gmail.com\\" <david.g.johnston@gmail.com>, \\"robertmhaas@gmail.com\\" <robertmhaas@gmail.com>, \\"daniel@yesql.se\\" <daniel@yesql.se>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["\\"Shinoda, Noriyoshi (PN Japan FSIP)\\" <noriyoshi.shinoda@hpe.com>"], "Date": ["Wed, 13 Jul 2022 11:38:03 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add --{no-,}bypassrls flags to createuser"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657737616; cv=none; d=google.com; s=arc-20160816; b=E5eKo97x2xFVEOSk/ZMVBRrRf3HtNmdKIVwDgAdbkHOA6DiXIOVCkhImNc+LRtgICW 9ENcdFV4Ks2QSx0eaDCdbq6c/eOjTzDZoMGN5ZOMEVUnVAxfuwD5ErfvhmUu9KH8VasN mvM8KDTZ+R7EYFLQb94LQi7w9kGMjjiuhDgMyQmosx0S9gnZN35imd+OFCFG+Ay0RD77 qxG8pX812Cdw30JYE53pR7LwI2EQT6cHJBBwEBpbnkAZvgAaAoA82oiw+vk7wmCZlQAw Kn9PvemC7NlZvAetERpZu8pgCvzVHAQ3uzgeLxPeeY6rsiBQLVDJ+WvaryVMeJoNP6h+ RrVw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp300224lfl; Wed, 13 Jul 2022 11:40:16 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id s15-20020ab0288f000000b00382746e3813si2954668uap.18.2022.07.13.11.40.16 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:40:16 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410600@lists.postgresql.org>) id 1oBhHT-0002lk-Ap for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:40:15 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBhHO-0001JW-Ru for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:40:10 +0000", "from mail-pj1-x1036.google.com ([2607:f8b0:4864:20::1036]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBhHM-00015r-6S for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 18:40:10 +0000", "by mail-pj1-x1036.google.com with SMTP id o3-20020a17090a744300b001ef8f7f3dddso5023932pjk.3 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 11:40:07 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id b69-20020a621b48000000b0052ab42ea0c5sm9465986pfb.147.2022.07.13.11.38.04 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:38:05 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713183803.GB3117671@nathanxps13>"], "Precedence": ["bulk"], "References": ["<20220525.110752.305692011781436338.horikyota.ntt@gmail.com> <Yo2m7Oip47raXzfT@paquier.xyz> <6a25c0fec85c61c0bb93ab4819fdd619@oss.nttdata.com> <20220526.164746.1821317049233715341.horikyota.ntt@gmail.com> <Ys47HiYLRj2XdBTq@paquier.xyz> <DM4PR84MB1734A6CE3839A68B59BEA599EE899@DM4PR84MB1734.NAMPRD84.PROD.OUTLOOK.COM>"], "X-Received": ["by 2002:a67:c110:0:b0:357:6c34:9643 with SMTP id d16-20020a67c110000000b003576c349643mr2090677vsj.3.1657737616237; Wed, 13 Jul 2022 11:40:16 -0700 (PDT)", "by 2002:a17:903:1207:b0:16a:7e87:dad3 with SMTP id l7-20020a170903120700b0016a7e87dad3mr4369938plh.99.1657737485888; Wed, 13 Jul 2022 11:38:05 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713183803.GB3117671%40nathanxps13>"], "In-Reply-To": ["<DM4PR84MB1734A6CE3839A68B59BEA599EE899@DM4PR84MB1734.NAMPRD84.PROD.OUTLOOK.COM>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410600@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410600@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=qiEg4prZMWjWg7wvsCjEzXwgV7Gmh99thoaGeVJw+xM=; b=iN66Rw4s7rAfu4L4JucEZZOm/vN9sskOZ99bK6s9UatgY1Fo7wPK1BfR3LhwjycMWB t5doExyiT+jOye1rfDv+6AOrfFR9L7Obyyaoa+5ETQt95u/K7fdxWLs8Tuw1aY7SOMrS lDVW8PlsGGbXSPJD8pow7VdO9wVDC5RtVYRVQacpLOUK/w91QtY7UV6XYaikMIZeTUnY 01gn9SIcVViwC52P0/aWrrYjOqmEagSCgyU5XQyY39yyEihSr2500xAklJgPLP+R2fp8 j1FkIVNaiYSvbpBulm0g0jV8JLm+8bz62vkkCby+MTxgb/R1ydHQiIvHmBkCZveJBVV1 W22A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9P2ViuisOAPAzOKRJkDNq0dnLtKyUz+VMZCXrt+gS4RGgqW/Ft 2+OXegGoEkecHKOg8T4sN64="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vxw5z9lwW8YHHIvfkPqtZKy0U75vhf6gv648eGZ+uygIG8eN4SMhp6xzPupRZgVx+ui4GL"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=qiEg4prZMWjWg7wvsCjEzXwgV7Gmh99thoaGeVJw+xM=; b=lLvCYw5J4iG5m2L91f5T7e8NFoNCyk5CU8GN5+jp22/HKgIDXZEIho9bPidWF1ElWL fNSfSpDAdocJJlPVlnACS6PtsnBsy0GSii1TtMPgLdvkFAQ3wPVj1zts0HhVw6sd/ISG Bmo426I5258penl5mNDlHKYv7fGB/3Y40lQnws57TvoZZwEVZ60qIyjzFrfn9g5Z6FrG Ai2OqKTRg2qE87RbH+5Hh2VKWhmCg+6+1K8jRozKa9qIqjTJifMtpf+ieeOagQqbXwez mrBL6/nKMR+Vs3PyaJtaLtHDZb1yT4IJVeI+BZOMmg762sYBWAQEgZTWt08wD15m26i/ 8fTg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iN66Rw4s; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410600@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410600@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=qiEg4prZMWjWg7wvsCjEzXwgV7Gmh99thoaGeVJw+xM=; b=cSaDCtoaFPlc8HGRziXDTKwGIEcBU3BITzlrFnB98c5ih2LVZluarBP0cePz6gRe6l XxV1Yukro4uhdf9wNZSPjGVpFjbHEeBEs3Utw3ovxqoddE+69NEMC1BEqpuYZwyP/Dnh t4FiVtL3MwZ2j+faWvqrwFpwR2RWplwIc0V1gTCiWzvqN3nDrmcvvIkPTmDHy8VPqG6t UbA3amcj83jFU+2oD+cKt6GD4f/0F/MD128gxFi7WCu+a9Kbrri6ZynVCB0CVYtzmE50 J4GK+BV3m+yFu05ELwNLY8nrV3aQTzoUwL0gj+Uskd3QHgFaWb8xbNhoUgVSDAe5HInd R4FQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iN66Rw4s; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410600@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410600@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<DM4PR84MB1734A6CE3839A68B59BEA599EE899@DM4PR84MB1734.NAMPRD84.PROD.OUTLOOK.COM>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:30:08+00	nathandbossart@gmail.com	Re: minor change for create_list_bounds()	<20220713183008.GA3117671@nathanxps13>	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "PostgreSQL Developers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	18	8476	[]		On Wed, Jul 13, 2022 at 05:07:53PM +1200, David Rowley wrote:\r\n> While I agree that the gains on making this change are small. It just\r\n> accounts to saving a call to bms_add_member() when we've already found\r\n> the partition to be interleaved due to interleaved Datum values,  I\r\n> just disagree with not doing anything about it. My reasons are:\r\n> \r\n> 1. This code is new to PG15. We have the opportunity now to make a\r\n> meaningful improvement and backpatch it.  When PG15 is out, the bar is\r\n> set significantly higher for fixing this type of thing due to having\r\n> to consider the additional cost of backpatching conflicts with other\r\n> future fixes in that area.\r\n> 2. I think the code as I just pushed it is easier to understand than\r\n> what was there before.\r\n\r\nFair enough.\r\n\r\n> 3. I'd like to encourage people to look at and critique our newly\r\n> added code. Having a concern addressed seems like a good reward for\r\n> the work.\r\n\r\n+1\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, PostgreSQL Developers <pgsql-hackers@lists.postgresql.org>"], "To": ["David Rowley <dgrowleyml@gmail.com>"], "Date": ["Wed, 13 Jul 2022 11:30:08 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: minor change for create_list_bounds()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657737020; cv=none; d=google.com; s=arc-20160816; b=VqVxNZnP8+pwxjzjmk6TPb/mzRR36oBWofZBBSLmFloaa0irF9Iij/flMahjlfGZ/7 qFUxgdF7KO0lPIwQN5tMQmR+DhH8HcZ8wcdZXXCdYHFIBfwaAho9+IbK3nBBqou5xkvr bYVWhh6kVlGEfgmy0rXyK5iSGyuaLMpxNq4zt/TGvGuREJfYOTl3SKYhL2JZ4oFAHXqJ VKLQdC6UTeWXOWsW+ov+uTlQY51gol97ouwMR91UNpMtRdCdXv+edwAnERGsg5OhDTaX 1o2+p3WRM8mgzT96DZ6y/MewmT5d2bJio6ho2Vq0cBJH2Y/BHfdPqUumIVYj3in+3j3Z 7wgA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp296871lfl; Wed, 13 Jul 2022 11:30:20 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bk7-20020a0560001d8700b0021ba771fd94si15144990wrb.969.2022.07.13.11.30.20 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:30:20 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410597@lists.postgresql.org>) id 1oBh7s-0000PZ-1j for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:30:20 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBh7n-00079O-Bt for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:30:15 +0000", "from mail-pg1-x534.google.com ([2607:f8b0:4864:20::534]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oBh7k-00010A-HG for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:30:14 +0000", "by mail-pg1-x534.google.com with SMTP id bf13so11165195pgb.11 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 11:30:12 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id d6-20020a170902654600b0016c0c82e85csm9123228pln.75.2022.07.13.11.30.09 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:30:09 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713183008.GA3117671@nathanxps13>"], "Precedence": ["bulk"], "References": ["<CALNJ-vQbZR0pYxz9zQ5bqXVcwtGgNgVupeEpNT65HZ+yWZnc4g@mail.gmail.com> <20220629234101.GA364747@nathanxps13> <CAApHDvr+Y83kZ8GOxynD0Pcm3HMW7O7Z-41ONBMd=9C9tdAnsg@mail.gmail.com>"], "X-Received": ["by 2002:a05:6000:2cc:b0:21d:76d8:1f2c with SMTP id o12-20020a05600002cc00b0021d76d81f2cmr4412486wry.471.1657737020304; Wed, 13 Jul 2022 11:30:20 -0700 (PDT)", "by 2002:a63:d1e:0:b0:40d:379e:bff8 with SMTP id c30-20020a630d1e000000b0040d379ebff8mr4129664pgl.215.1657737010266; Wed, 13 Jul 2022 11:30:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713183008.GA3117671%40nathanxps13>"], "In-Reply-To": ["<CAApHDvr+Y83kZ8GOxynD0Pcm3HMW7O7Z-41ONBMd=9C9tdAnsg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410597@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410597@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=1MKwFG2wbsRkDPw2Az5hzRwQQCUJX10xDWUxQ13nJbQ=; b=QlA9jRaBa1vVLhQGCOuiWnGxbVwJibI+YxbupJu1dKmIiU7NrHpH9dpZiFTsZjgaDA hAdPU4iQJOEyBKJSNUFphSmSCYhEYz5iyPjvLn4JLJAVGy3IdJL70VcINhTXISz/PQdu suBhVRK4d8ioXIO/bn2PKBgMhbkYN2zJR97XMcrADFQ2nvg9RjMxMt9fUV8qXx7KRgAi hgwM4Qq09dXHwz8GPzdqVn34twl3gZau7dITZgpWfLzOy0Ik649h2hrtQOIOnSIN4KId 0y3WMYQSc6cLSaOfBo/VWnSM7MseJ0rjP3anJFgsWXA6gaNSr/ypZDYUH/UCvszxa7LD OkEw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8DO0BpYXFDK2BwT771PzzYUYO6BQK53lTupS/wekwN/uUgzuRQ uMVf9LS+e2wSAaTuWSk9HoU="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vZI7WIYquyUfcCepua9M7iAS8rm63+b1G3f2IqsaoQ/re9+iIlBpaTHzCbHxQqzWbWO+PY"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=1MKwFG2wbsRkDPw2Az5hzRwQQCUJX10xDWUxQ13nJbQ=; b=phzuS7JTXDWLWtTXfan9Lhv9en9GBk8fU0GDYiKw7u0PKDb31Hg8OE6qInXQaNQppr Yt8BF2jHxwnBIVl5P6/Y0oP5dkP7W3GjfmBl5L4lUZWRdkzgPy3ApY06e/MjtMX1hxWq N/df6dPCIzNO7sMwhJrDgeKU+yUDIUBD/wSXZq++Jj5+8/YNB1QOvpjll4rBA/HWsBg5 j1QND94OkSC+1T2OgGJtGRubEgUbqAY9XrTfzexetbspmKDlrfzwJZIFk5tU0KadaHjF wGYM8i//Bp0MKc6zUMBH23ZLuo+hP4YKsnHUFAbHfPmivY1XiWZooULdv+wo+h0z//15 VTSw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=QlA9jRaB; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410597@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410597@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=1MKwFG2wbsRkDPw2Az5hzRwQQCUJX10xDWUxQ13nJbQ=; b=MJuPr8IMUs8svsDnnTTL5ahLF1t0eQCIkZWIYITezhv582cPe5/ziAYQe8U8GnAxzb X5iBvLn3K6XVDDv6gd8v8ye9Bg+hNjzaj736EVVsT94QpU3kFA5+E1H03xcMfmn0ksmx cdL3FaAeqrnpwq7OOwnrL17JkiiVn2rvgNv6NJh95UJhbIGkMsXR578bq424gms1b6Ld 6fTEo9VF05UA2xRiVI/76JUJ5uDkfZyxKhhLsRB92HVffDyFwkSHRuLVY8b3zA4yOa0W xp8kNSdUlh7gFAAcZmJjUDeoTylkJnTcAiAT0LLSn2uJMPb1M5NOcbeXfwBtPZvbVnUn 6aqA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=QlA9jRaB; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410597@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410597@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAApHDvr+Y83kZ8GOxynD0Pcm3HMW7O7Z-41ONBMd=9C9tdAnsg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:41:40+00	david@pgmasters.net	Issue with recovery_target = 'immediate'	<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net>	[{"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	\N	20	9402	[]		Hackers,\r\n\r\nWe have noticed an issue when performing recovery with recovery_target = \r\n'immediate' when the latest timeline cannot be replayed to from the \r\nbackup (current) timeline.\r\n\r\nFirst, create two backups:\r\n\r\n$ pgbackrest --stanza=demo --type=full --start-fast backup\r\n$ pgbackrest --stanza=demo --type=full --start-fast backup\r\n$ pgbackrest info\r\n\r\n<snip>\r\n         full backup: 20220713-175710F\r\n             timestamp start/stop: 2022-07-13 17:57:10 / 2022-07-13 17:57:14\r\n             wal start/stop: 000000010000000000000003 / \r\n000000010000000000000003\r\n             database size: 23.2MB, database backup size: 23.2MB\r\n             repo1: backup set size: 2.8MB, backup size: 2.8MB\r\n\r\n         full backup: 20220713-175748F\r\n             timestamp start/stop: 2022-07-13 17:57:48 / 2022-07-13 17:57:52\r\n             wal start/stop: 000000010000000000000005 / \r\n000000010000000000000005\r\n             database size: 23.2MB, database backup size: 23.2MB\r\n             repo1: backup set size: 2.8MB, backup size: 2.8MB\r\n\r\nRestore the first backup:\r\n\r\n$ pg_ctlcluster 13 demo stop\r\n$ pgbackrest --stanza=demo --delta --set=20220713-175710F \r\n--type=immediate --target-action=promote restore\r\n\r\nRecovery settings:\r\n\r\n$ cat /var/lib/postgresql/13/demo/postgresql.auto.conf\r\n\r\n<snip>\r\nrestore_command = 'pgbackrest --stanza=demo archive-get %f "%p"'\r\nrecovery_target = 'immediate'\r\nrecovery_target_action = 'promote'\r\n\r\nStarting PostgreSQL performs recovery as expected:\r\n\r\n$ pg_ctlcluster 13 demo start\r\n$ cat /var/log/postgresql/postgresql-13-demo.log\r\n\r\nLOG:  database system was interrupted; last known up at 2022-07-13 \r\n17:57:10 UTC\r\nLOG:  starting point-in-time recovery to earliest consistent point\r\nLOG:  restored log file "000000010000000000000003" from archive\r\nLOG:  redo starts at 0/3000028\r\nLOG:  consistent recovery state reached at 0/3000138\r\nLOG:  recovery stopping after reaching consistency\r\nLOG:  redo done at 0/3000138\r\nLOG:  database system is ready to accept read only connections\r\nLOG:  selected new timeline ID: 2\r\nLOG:  archive recovery complete\r\nLOG:  database system is ready to accept connections\r\n\r\nNow restore the second backup (recovery settings are identical):\r\n\r\n$ pg_ctlcluster 13 demo stop\r\n$ pgbackrest --stanza=demo --delta --set=20220713-175748F \r\n--type=immediate --target-action=promote restore\r\n\r\nRecovery now fails:\r\n\r\n$ pg_ctlcluster 13 demo start\r\n$ cat /var/log/postgresql/postgresql-13-demo.log\r\n\r\nLOG:  database system was interrupted; last known up at 2022-07-13 \r\n17:57:48 UTC\r\nLOG:  restored log file "00000002.history" from archive\r\nLOG:  starting point-in-time recovery to earliest consistent point\r\nLOG:  restored log file "00000002.history" from archive\r\nLOG:  restored log file "000000010000000000000005" from archive\r\nFATAL:  requested timeline 2 is not a child of this server's history\r\nDETAIL:  Latest checkpoint is at 0/5000060 on timeline 1, but in the \r\nhistory of the requested timeline, the server forked off from that \r\ntimeline at 0/3000138.\r\nLOG:  startup process (PID 511) exited with exit code 1\r\nLOG:  aborting startup due to startup process failure\r\nLOG:  database system is shut down\r\n\r\nWhile it is certainly true that timeline 2 cannot be replayed to from \r\ntimeline 1, it should not matter for an immediate recovery that stops at \r\nconsistency. No timeline switch will occur until promotion. Of course \r\nthe cluster could be shut down before promotion and the target changed, \r\nbut in that case couldn't timeline be adjusted at that point?\r\n\r\nThis works by default for PostgreSQL < 12 because the default timeline \r\nis current. Since PostgreSQL 12 the default has been latest, which does \r\nnot work by default.\r\n\r\nWhen a user does a number of recoveries it is pretty common for the \r\ntimelines to get in a state that will make most subsequent recoveries \r\nfail. We think it makes sense for recovery_target = 'immediate' to be a \r\nfail safe that always works no matter the state of the latest timeline.\r\n\r\nOur solution has been to force recovery_target_timeline = 'current' when \r\nrecovery_target = 'immediate', but it seems like this is something that \r\nshould be done in PostgreSQL instead.\r\n\r\nThoughts?\r\n\r\nRegards,\r\n-David\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Steele", "Address": "david@pgmasters.net"}]	{"To": ["Pg Hackers <pgsql-hackers@postgresql.org>"], "Date": ["Wed, 13 Jul 2022 14:41:40 -0400"], "From": ["David Steele <david@pgmasters.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Issue with recovery_target = 'immediate'"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657737712; cv=none; d=google.com; s=arc-20160816; b=Iccia6Kl4gwxpJc93q9rQG0nIyIlyUffuOGcTDe8HmVoZJnEi6hTL4eT35yfbX1082 wBzYySsP0XQy91e5tk3FjpX68P3yntnkOrPgCi/zdliC2zP+z5rwcQ6ZzRQTiOqBg1Tw EuNmCNsY2PHCJFSO4jC2nn9IZiPzdECyc/avv4bMk6afIZFL8aUu3HXRC6/VtJDvYCgQ 54IVJss4FKKUlZyqUgbtCTDqNaVyrqc2labqDo9JsOiPTRegP58RRiAAlfdeQmlF5waa enmYOMvCr1cmdVRFEsJ9OghBn6QnYplYVZWZV2scbSdgd2XTWVG7MR3O5LsoNP8Q3z7F sMvQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp300762lfl; Wed, 13 Jul 2022 11:41:52 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id y81-20020a1f3254000000b00370c81e05f0si3059688vky.73.2022.07.13.11.41.51 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:41:52 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410604@lists.postgresql.org>) id 1oBhJ1-0005Y0-4Q for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:41:51 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david@pgmasters.net>) id 1oBhIw-00042X-S2 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:41:46 +0000", "from mail.thelabyrinth.net ([45.56.70.56]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david@pgmasters.net>) id 1oBhIs-00008z-RZ for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 18:41:45 +0000", "from [172.20.20.20] (c-24-126-11-85.hsd1.wv.comcast.net [24.126.11.85]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (No client certificate requested) (Authenticated sender: dsteele) by mail.thelabyrinth.net (Postfix) with ESMTPSA id 65E1154698 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 18:41:41 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net>"], "Precedence": ["bulk"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:ab0:7547:0:b0:382:8237:30f6 with SMTP id k7-20020ab07547000000b00382823730f6mr1984796uaq.91.1657737712045; Wed, 13 Jul 2022 11:41:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238%40pgmasters.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410604@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410604@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vdHNfvRMVsn6k00ZinenanaND0WCJ5HF/NZse7hkU11HnKchlEAVtQ0aJQheL3hVsCWO/5"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:subject:from:to:content-language :user-agent:mime-version:date:message-id; bh=cRCPTGzA5Rmy6M/rXGBQcxBCxEm7Eo5WgDLhpnQPmvQ=; b=VEZpRf4b1Gd/55AEpYe71mEwL60HKREarMIqCL9FMv8GfujCWGQQl7/IHfJj+gY1sF 6poy3UGa5N29vH/WNT49cP+uiP8QYyE+WdC3iGn8NcavCuX1dpUbDNWrs/c7Bz7qnibt XLByQFZYQe2UajtAnPduqcSnhAT9A2oTOeK67Htr9baWZCTunKv0M7Zw0XfX2Sh4Lk0S EP2OdXd3qGhGUW9vBKDEV7xU5MkHAXWb2wT8/TTG0leFTrW5ro94QjLiijk1i1oKzd9G RPEca9PHnvdnjrmitYszL0HUVAmGA7BZeZOjgXSviZU0U+qgVSbdvWGCUDseqQyegTIA nvFQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410604@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410604@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410604@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410604@lists.postgresql.org"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:28:44+00	peter.eisentraut@enterprisedb.com	Re: make update-po@master stops at pg_upgrade	<0bc19250-374f-5a24-0b10-f61299edca0f@enterprisedb.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	17	8341	[]		On 13.07.22 20:19, Tom Lane wrote:\r\n> Hmm.  We could list built files explicitly, perhaps, and still be\r\n> a good step ahead on the maintenance burden.  Does xgettext get\r\n> upset if the same input file is mentioned twice, ie would we have\r\n> to filter sql_help.c out of the wildcard result?\r\n\r\nIt seems it would be ok with that.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Wed, 13 Jul 2022 20:28:44 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736940; cv=none; d=google.com; s=arc-20160816; b=NQntAV0en4XioXQw4P+2DYl6+SJjcWeWXzfop74A5YNhdifuPvX0TrFNsiwiXMvJjd OmPQ0KCnG9Plrn+IrAUXKsv2dkQNlJ1KOqob73WLp+ea8DOQwK+aM1O79qk2vxC4BcTF UA3WwLOhbfPHHsGSMpILbN1ze0Iajw8o2eVwGyj/gl91Jcv6i4Cr5EG2j9M/XnEUiHWt cAoVxiVFd5Q/gjVw7YCAm6MKygBaeIc2Ef+oK5PRP7BwlQcoVfq9b6Sy7MuwwCBTPFAD TJbameVyIlNwZHgzvmt+mn6EWnSPS1IhES1SDkFPVi0xRtOkfFyLbzbisH1W3RCc55yv HaLw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp296340lfl; Wed, 13 Jul 2022 11:29:00 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d17-20020adfe2d1000000b0021d68df9310si19517136wrj.393.2022.07.13.11.29.00 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:29:00 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410595@lists.postgresql.org>) id 1oBh6a-0005xi-2N for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:29:00 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBh6S-0002gy-Kz for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:28:52 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oBh6P-0000zL-MO for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:28:52 +0000", "from compute4.internal (compute4.nyi.internal [10.202.2.44]) by mailout.nyi.internal (Postfix) with ESMTP id B9C945C011A; Wed, 13 Jul 2022 14:28:45 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute4.internal (MEProxy); Wed, 13 Jul 2022 14:28:45 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 14:28:44 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<0bc19250-374f-5a24-0b10-f61299edca0f@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us> <0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com> <2430419.1657736388@sss.pgh.pa.us>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:3Q7PYszGnzxmczDMqsf0PqqB0DdPHg4nQwN6yO44OJ3LgsiCQKj8nA> <xmx:3Q7PYjSx9sQ_WwtsGeXNMQQaWTaAf19BJH7FtOohSHUal_bRZsyA7Q> <xmx:3Q7PYnbHFHXTyTKgQT7mMp_EnYK0nU_y4kcW6QDqsns-28U50SdAbw> <xmx:3Q7PYoL4-0upuF-VhipaOjXk9oZ_Yd3fAPsMuWYNefomsBz6sjPimA>"], "X-Received": ["by 2002:a5d:5228:0:b0:21d:93a8:6e64 with SMTP id i8-20020a5d5228000000b0021d93a86e64mr4335836wra.424.1657736940318; Wed, 13 Jul 2022 11:29:00 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/0bc19250-374f-5a24-0b10-f61299edca0f%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<2430419.1657736388@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410595@lists.postgresql.org>"], "X-Me-Sender": ["<xms:3Q7PYuB5Jm60G9meaZwjkgrtZyaBL0i6aTJT-_HCfSUf8y3NEoOzQg> <xme:3Q7PYohAV1oU_xgFL2xNdv_vpl4197exPrcQiKKY_HI12Hbw2BrGUhfk1iTs9zbQ8 a51QduyATW4p_64Ww>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410595@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:3Q7PYhkC4T80Cu4YkuA7EbjSi5YKyzd8alMXCburbI8S2jC4Q8cgpMvP-dJ70luRelyuwhbP5nija70Zv96GxJ2KYwcUyH9Q>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657736925; x= 1657823325; bh=HE/fNB/4vIZR2S5tWzaz68mq5YcYIvzwQw+qc5VXHlk=; b=m MdguxiIQMMiiIxirpjSw8cwqnW6VZp0HcOicHhuA2ywMBQm42ql/I6n6Ovv5H3jI 3uhIXdL7da7TYaUV7PR7cXR6KWWJgCeAVxW2jg4FyD4Bk4g+JbC3+Cef0LHXCxWv yciN8nLAvXHan0CYv6pqSrDitlgKdUUAYeCZX0t1T5qmHTzWONUbOV2LcPFYA1UP Avm9TIaFS8DKmwIbb2CWsG6R7FUVdTpxYvPuWNCYv/jRRqwIPNz6VTihx8Zgp0yM lxMNlXsdDLlrIwBexR2IPn946fGFSbAChML44eqQw7JlyAcZiPmGO43Rh97Lmjg+ CViopn1uXz1ln5Uizmuqg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejjedguddvgecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepkfffgggfuffvvehfhfgjtgfgse htjeertddtfeejnecuhfhrohhmpefrvghtvghrucfgihhsvghnthhrrghuthcuoehpvght vghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhmqeenucggtf frrghtthgvrhhnpeehleffgeegudejteeihfelteduvdeifffhffdvjedvffegjeekudel udehudeifeenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpehpvghtvghrrdgvihhsvghnthhrrghuthesvghnthgvrhhprhhishgvuggsrdgtohhm"], "X-Google-Smtp-Source": ["AGRyM1uon5Cwz/2KMQz/f464HZpVAYsnD4CY0bDZrx2CaIVPDk4a1QukCborhqYIoCrYx/FlTOyG"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :feedback-id:dkim-signature; bh=HE/fNB/4vIZR2S5tWzaz68mq5YcYIvzwQw+qc5VXHlk=; b=FrWMrU/ibBsodqaTlhlFUSHTaiXHI5qtZTSEhf2SwjnHI2RK2mttKIn8FdxmbFVvm+ HuOWiyZENXtTG3kpwFP++23jm+9LndAS2UsWjznfhBp8B3zAfSPFT06odv/+B857urlO eaQllPcVy0EBD/RHWv4eEVlDHJ1VQC48C/4SjmLUESwhBxmRR0PwtKgUTkzRZgbAmE5q yYkVYXmcUt4fhj5Pd9skF2t46K351ff6Ab5VKBM8M2wsLx8X9/eZpa6VIHnaHoDYVCLZ Iqkd6rlBtI9JidqJy8/4s56noQkHrRJKL0HVgkoHQl327VNif4DQh7YlowF6Dd/BU1id RDKg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=mMdguxiI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410595@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410595@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=mMdguxiI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410595@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410595@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<2430419.1657736388@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 18:27:44+00	d.koval@postgrespro.ru	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru>	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	\N	15	364479	[{"charset": "UTF-8", "part_id": "2", "file_name": "v4-0001-partitions-split-merge.patch", "disposition": "attachment", "content_type": "text/plain"}]		Hi!\r\n\r\nPatch stop applying due to changes in upstream.\r\nHere is a rebased version.\r\n\r\n-- \r\nWith best regards,\r\nDmitry Koval\r\n\r\nPostgres Professional: http://postgrespro.com	[]	\N	["\\\\Seen"]	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	{"To": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "Date": ["Wed, 13 Jul 2022 21:27:44 +0300"], "From": ["Dmitry Koval <d.koval@postgrespro.ru>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657736886; cv=none; d=google.com; s=arc-20160816; b=Y7l6S+q1L66axqxA1xpS3tp8EqF9qe6vHBAd+lWbcZs6MZCUEyidz151EP/tYdmpZ6 e0Jxz6ZttSEr5x469PztFUVYC4Xpq+0jHS+vE+dmMLVIwRtuvcIZX4Vujuvb0cy2dl0O egp4tRsJXWRjpyVv0UZTMpkijuWJCbC5B8EacGOijnFTBXHLnoo2fa0+zz8wA8W22EAc 75NT02WyG8QmvenThgvEd4AOQVerE9YOsd8bO9fEwbJhyLHXHZgExoA6VVoX+5lGsRTY bGGUBwj5FlZilwfj8fGnDnOt07GXXdLpfVBxyZJEc0V5d70ffKVYIFBsp3LvBF7jWty9 kMrA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp296085lfl; Wed, 13 Jul 2022 11:28:07 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b13-20020adfd1cd000000b0021b926f33f3si21678214wrd.509.2022.07.13.11.28.06 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:28:06 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410593@lists.postgresql.org>) id 1oBh5i-0000oa-F9 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:28:06 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBh5Z-0007Zp-QG for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:27:58 +0000", "from mail.postgrespro.ru ([93.174.131.139]) by magus.postgresql.org with esmtp (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBh5N-0000yr-GB for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:27:57 +0000", "from [192.168.28.32] (cyclops.postgrespro.ru [93.174.131.138]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (Client did not present a certificate) by mail.postgrespro.ru (Postfix) with ESMTPSA id 4AFF921C03A7 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 21:27:43 +0300 (MSK)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru>"], "Precedence": ["bulk"], "References": ["<163714495450.16056.3566953095730878367@malur.postgresql.org> <c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru>"], "User-Agent": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:adf:a394:0:b0:21d:6690:6105 with SMTP id l20-20020adfa394000000b0021d66906105mr4306635wrb.560.1657736886936; Wed, 13 Jul 2022 11:28:06 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/82ed3466-9855-ccd6-e2a3-a3a92166ff01%40postgrespro.ru>"], "In-Reply-To": ["<c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410593@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"------------7hFIIn0W7xkGNC3I9hYyOE6H\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410593@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/simple; d=postgrespro.ru; s=mail; t=1657736863; bh=fMbgKneFTEyje9DraY+sxtQwhE5x89HIpuiZPuBiHBM=; h=Date:Subject:From:To:References:In-Reply-To; b=EoNC3JDvKKNC1TJruHV27rRCG/LArIQQcn/NLrhEcurdazvUQ4MvOvNf0pih10pYo N8gmDDKa90i2Js9XXtjKIs8iq66NY1GeP8qpAz6Y/3DL/ByLE1G6kIKL2RW86K4cQK sJGzRGr8iWJ68fHtt8Vi8HkAaxJwqEKGtliRQqxg="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vefe1qYSd2zn/yRXEKmpWcp0SGagoTFyjMDHWGTjbS5H8pQNbzDCmd2LufQTwx+jlXN9NL"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:references :to:from:content-language:subject:user-agent:mime-version:date :message-id:dkim-signature; bh=DWW4u4Gou/voFSRjt4riMkVec8/PyC264X9xkhzcc/Y=; b=wGzLeyyF7bEFqG5O/z8bKCQTSwH+cZoAjZjLKEVxhZ4lA4LQQnL1sZe7S7nJhH8dWY o94KtQt6/+r6y2GUGRbqrDGaHbrJ/nusjzuyP4P9Oi8VsWReVDUdtWRaTWCnMuUwYtW/ nNKD4Rwk4JDwAV6HW+bhqnFu1kly38XkHLIc3KIgE1IVIMxbw1VNFQaIZf5h6VmaGC8p 4t7X1o3pBRUIVtZmJrpD4g5OgdJib4l4oueK4eCp/M2+wy4Oyw4d+wdtm0aGSDllaNfN JxTN8rie4ejzZFlnnBr8j6QkBSmtlij9M3uT9g26s2e7TideQOlFme3PtgDUjwBefoGE biDg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=EoNC3JDv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410593@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410593@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=EoNC3JDv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410593@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410593@lists.postgresql.org"]}	["<c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 19:03:46+00	zyu@yugabyte.com	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com>	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	22	9903	[]	<div dir="ltr"><div dir="ltr"><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Jul 13, 2022 at 11:28 AM Dmitry Koval &lt;<a href="mailto:d.koval@postgrespro.ru">d.koval@postgrespro.ru</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Hi!<br>\r\n<br>\r\nPatch stop applying due to changes in upstream.<br>\r\nHere is a rebased version.<br>\r\n<br>\r\n-- <br>\r\nWith best regards,<br>\r\nDmitry Koval<br>\r\n<br>\r\nPostgres Professional: <a href="http://postgrespro.com" rel="noreferrer" target="_blank">http://postgrespro.com</a></blockquote><div>Hi,</div><div><br></div><div>+attachPartTable(List **wqueue, Relation rel, Relation partition, PartitionBoundSpec *bound)¬†</div><div><br></div><div>I checked naming of existing methods, such as¬†AttachPartitionEnsureIndexes.</div><div>I think it would be better if the above method is named¬†attachPartitionTable.</div><div><br></div><div>+ ¬† if (!defaultPartCtx &amp;&amp; OidIsValid(defaultPartOid))<br>+ ¬† {<br>+ ¬† ¬† ¬† pc = createSplitPartitionContext(table_open(defaultPartOid, AccessExclusiveLock));<br></div><div><br></div><div>Since the value of pc would be passed to¬†defaultPartCtx, there is no need to assign to pc above. You can assign directly to¬†defaultPartCtx.</div><div><br></div><div>+ ¬† /* Drop splitted partition. */<br></div><div><br></div><div>splitted -&gt; split<br></div><div><br></div><div>+ ¬† /* Rename new partition if it is need. */<br></div><div><br></div><div>need -&gt; needed.</div><div><br></div><div>Cheers</div></div></div>\r\n	On Wed, Jul 13, 2022 at 11:28 AM Dmitry Koval <d.koval@postgrespro.ru>\r\nwrote:\r\n\r\n> Hi!\r\n>\r\n> Patch stop applying due to changes in upstream.\r\n> Here is a rebased version.\r\n>\r\n> --\r\n> With best regards,\r\n> Dmitry Koval\r\n>\r\n> Postgres Professional: http://postgrespro.com\r\n\r\nHi,\r\n\r\n+attachPartTable(List **wqueue, Relation rel, Relation partition,\r\nPartitionBoundSpec *bound)\r\n\r\nI checked naming of existing methods, such as AttachPartitionEnsureIndexes.\r\nI think it would be better if the above method is\r\nnamed attachPartitionTable.\r\n\r\n+   if (!defaultPartCtx && OidIsValid(defaultPartOid))\r\n+   {\r\n+       pc = createSplitPartitionContext(table_open(defaultPartOid,\r\nAccessExclusiveLock));\r\n\r\nSince the value of pc would be passed to defaultPartCtx, there is no need\r\nto assign to pc above. You can assign directly to defaultPartCtx.\r\n\r\n+   /* Drop splitted partition. */\r\n\r\nsplitted -> split\r\n\r\n+   /* Rename new partition if it is need. */\r\n\r\nneed -> needed.\r\n\r\nCheers\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Dmitry Koval <d.koval@postgrespro.ru>"], "Date": ["Wed, 13 Jul 2022 12:03:46 -0700"], "From": ["Zhihong Yu <zyu@yugabyte.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657738663; cv=none; d=google.com; s=arc-20160816; b=P8e+AZZrGi+tmZ3/DlMk1Nbs6+HSDfkbMT0HQOfvWbp7ljZ6hwglEvyjmGDgU/OKcb 2WHk5NajnNHUKKTroUd4P+Rmo9BO8nMnJZFufWUgNjY+21Qrk2PfyvIcBtBgURRLisJg HZq3URJej7BHbfHpML8qIqxJaQ6K0TRPhuCo0j7bdvu7cmx6XPQlkP5INv4roZz1WMyk DKJ7uzxQI9E6FwdoWS8h3p7lMGUazYcDJ/VvKNfYzVZgmV8i8utvh1bjpbc8HqWLnaAc sbGb2BQejA3fgiY3P0NRb+je3ZLUk+Nx26Zv2l1ZtgHU25LqZd5Yl1rwhxXtRE2pkDP+ S6CQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp305639lfl; Wed, 13 Jul 2022 11:57:44 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b17-20020a5d6351000000b0021d76deac8dsi18214620wrw.238.2022.07.13.11.57.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 11:57:43 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410610@lists.postgresql.org>) id 1oBhYN-0006NK-M4 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 18:57:43 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <zyu@yugabyte.com>) id 1oBhYJ-0004iI-2N for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:57:39 +0000", "from mail-lf1-x12a.google.com ([2a00:1450:4864:20::12a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <zyu@yugabyte.com>) id 1oBhYC-0000Sx-Dz for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 18:57:37 +0000", "by mail-lf1-x12a.google.com with SMTP id bf9so20544634lfb.13 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 11:57:32 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<163714495450.16056.3566953095730878367@malur.postgresql.org> <c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru> <82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru>"], "X-Received": ["by 2002:a5d:6da6:0:b0:21d:ac61:ba55 with SMTP id u6-20020a5d6da6000000b0021dac61ba55mr4350929wrs.683.1657738663949; Wed, 13 Jul 2022 11:57:43 -0700 (PDT)", "by 2002:a05:6512:2256:b0:485:8ce:d829 with SMTP id i22-20020a056512225600b0048508ced829mr2987576lfu.137.1657738649950; Wed, 13 Jul 2022 11:57:29 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALNJ-vSuzLxR%2BtyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG%2B8A%40mail.gmail.com>"], "In-Reply-To": ["<82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410610@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"0000000000005c779905e3b45b1f\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410610@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=yugabyte.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=AGxCFTCk/uwggg/ZnwNLU5V6MGKTvoZEJycANhnmcGw=; b=MtivkdPKh769atzOeevO18dLtdXyd1eidIyHm706FbBWMb9VzKeqJRHaFWwrKaEwf7 sPXNMtdSOcq5jLO+guQ25pSR6vrcNyGNINBNkbVZJasEpyfug8qIPmF+rB6mbwAaIPsk zMf2TCkTTCElJ/tvZpv1adKncPOKLil4h8R3Q="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9r+ERR62aKY4OF9qunUjV4z7h6JP7ln5h0UmcpQoDb7satXVPE BGu9mq+p4dEcjX60WA/Xzp0cKldf5wsPbPoubgzbNA=="], "X-Google-Smtp-Source": ["AGRyM1vw4j/M8HYV4LtTVIOOg71gggOlFfwW8MbF1eIMU2M1o0RwXRfhWjSfs9/f+vVVKufMVqKZ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=AGxCFTCk/uwggg/ZnwNLU5V6MGKTvoZEJycANhnmcGw=; b=Uyirb9NsS9x0r5xuWBL7Mr+PTjcOmIz6pMG9aEcPI83JreCqKVRz2oC5hDmNjHeJdO mKAMlqsWvzygnK525uPohIryY2mPWuNB+9+vd+7sIVGD1Ig4S657QwaAWT6Li5UtAfyz fy4OzwjXgakDTH2Jmwz8oN+XycrwBGBfTfS7BebqA3/+Kl6y4CqgW5ihO3IWo/qVM4RC iNY90P49Z0pKk0wJm6rYw+iuc7tTrxAnScn0z2fX+l/WIW1EDZEXHYJ8TkGxwnxcz2UB uNV/WPjQNwnoS4BWXez0AJjA9onkHq9cmTKMdO4xWHctipBmCHunHSt0J23Vf1Tx45q8 hapA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@yugabyte.com header.s=google header.b=MtivkdPK; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410610@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410610@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=yugabyte.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=AGxCFTCk/uwggg/ZnwNLU5V6MGKTvoZEJycANhnmcGw=; b=o4OnBaLs8lr5RawMcCdaGMN+SBCVMK1XC5ctrPOd1ugqWKNVb1B/4z2DoqizzQqD2+ 3PvcgOIv8BBZd/9EJxEBwO7l8NEtFu3kmdv2cMccD/vf8m5khzJv5WoNTMOPQzD13UOT h6ug/86TQF/JnwU2Wu9DZWCXbtwO+Umdo2pIOrxvDs7TSjKExWjr7hc91ZhIUX92QOBk DOdLWco2QMEHgsUPCrFvu1sYYcolJbYbBFnMNwdyjOSytxhjwPhk1vNqr+SDaxdGRUDU wNvBUIN3+A1njFOPk//6+L8+FtBo6oLjtHikkYcFE1gBxb73Dc2+pracyRaR+CC1mrbM yBGw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@yugabyte.com header.s=google header.b=MtivkdPK; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410610@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410610@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=yugabyte.com"]}	["<82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 19:35:15+00	tgl@sss.pgh.pa.us	Re: make update-po@master stops at pg_upgrade	<2463113.1657740915@sss.pgh.pa.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	23	23852	[]		Peter Eisentraut <peter.eisentraut@enterprisedb.com> writes:\r\n> On 13.07.22 20:19, Tom Lane wrote:\r\n>> Hmm.  We could list built files explicitly, perhaps, and still be\r\n>> a good step ahead on the maintenance burden.  Does xgettext get\r\n>> upset if the same input file is mentioned twice, ie would we have\r\n>> to filter sql_help.c out of the wildcard result?\r\n\r\n> It seems it would be ok with that.\r\n\r\nActually, we can get rid of those easily enough anyway with $(sort).\r\nHere's a draft that might solve these problems.  The idea is to use\r\n$(wildcard) for files in the srcdir, and manually enumerate only\r\nbuilt files.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 15:35:15 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: make update-po@master stops at pg_upgrade"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657740931; cv=none; d=google.com; s=arc-20160816; b=ZAivF+izvVnofrxKJ260DFfqjq9nOjvLcbxEh+mFeZ8UZNFdqEdPLdnL+ZsUqfJlGk TLUZU1SjsDlAjy5YDBjNy/DDlfYEIRJ/O85Y8jLXMfEOKz+MoBX0hTuAK/CDFgQAhFQE /JLd6/CONBcvwsynGIRjvg7/ifItl0TJsvijyqhX53xKWDhoOMjiC1pLZ2I1X98BNi70 mlaXlGiyApQyBY6zZXNAw32n1CPPorZAXajxead/NbOKE7zYGsSlGjapCYapFLUu6VuF JkzpCs9lrumuNrOn6VpefkMZj6P+meCodjHimPP1IIwHunhBJJ4sGOU9Qhh0IrUHf+cQ jhSQ=="], "Comments": ["In-reply-to Peter Eisentraut <peter.eisentraut@enterprisedb.com> message dated \\"Wed, 13 Jul 2022 20:28:44 +0200\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp319634lfl; Wed, 13 Jul 2022 12:35:31 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m88-20020ab04461000000b0037f0d59d792si2829619uam.95.2022.07.13.12.35.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 12:35:31 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410615@lists.postgresql.org>) id 1oBi8w-0001fQ-36 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 19:35:30 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBi8r-00007k-I9 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:35:25 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBi8l-0001YU-UB for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:35:22 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DJZFmE2463114; Wed, 13 Jul 2022 15:35:15 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2463022.1657740885.0@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2463113.1657740915@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220713.160853.453362706160476128.horikyota.ntt@gmail.com> <2328143.1657728439@sss.pgh.pa.us> <0c34f1ca-71e7-f6e7-7d59-5294f995c78b@enterprisedb.com> <2430419.1657736388@sss.pgh.pa.us> <0bc19250-374f-5a24-0b10-f61299edca0f@enterprisedb.com>"], "X-Received": ["by 2002:a05:6102:3e23:b0:357:4974:e07e with SMTP id j35-20020a0561023e2300b003574974e07emr2240968vsv.31.1657740931349; Wed, 13 Jul 2022 12:35:31 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2463113.1657740915%40sss.pgh.pa.us>"], "In-Reply-To": ["<0bc19250-374f-5a24-0b10-f61299edca0f@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410615@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"----- =_aaaaaaaaaa0\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410615@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tfpbFrj8VhbL6ObUc3i7iRTpzT6tbBx1yrUrAlWsmTTkwMjec9MrOpmzFiasAxMsnISxAU"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=RMGMbiXz0OQadhocmAlPDunSkg9CY2h3Oz7a6I3jcEU=; b=IbZ/VkDGuXGSseK4/lfjI/njkxmZfJlU1AksJLkXMPzYJC0UMpUfgnwWaaiqjCe60S eJ3B4NPvjCfeTXVvsMELUwx/A7iQllWWq1LA63VYTPcBvgg5cXncww6MDtZa+Y+6r1nX 55uh0kIg2RWUqz8wELjHTD4ADG6TMGnrFQe2as9NCc78atfS/ysttAEe+skDp0SheiZB Qnfngh9i1qVvY9NNyn3Hx1j6BjJ1TnM9tqKIh1piUzgkvvWhP9Wsw0GCKBi+MH3PhenI SiGu0xko7uKo86Ju2QedCLqQ2F2NBHOttnM3Bli8Wyka42RjLipn+JNrfOkEcoTQn0qB dD4A=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410615@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410615@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410615@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410615@lists.postgresql.org"]}	["<0bc19250-374f-5a24-0b10-f61299edca0f@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 19:46:17+00	andrew@dunslane.net	Re: Bug: Reading from single byte character column type may cause out of bounds memory reads.	<ddab080d-8c31-19af-e1e7-dba6c95d89a3@dunslane.net>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}]	[{"Name": "Spyridon Dimitrios Agathos", "Address": "spyridon.dimitrios.agathos@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	25	6681	[]		\r\nOn 2022-07-13 We 11:11, Tom Lane wrote:\r\n> Aleksander Alekseev <aleksander@timescale.com> writes:\r\n>> Although the bug is easy to fix for this particular case (see the\r\n>> patch) I'm not sure if this solution is general enough. E.g. is there\r\n>> something that generally prevents pg_mblen() from doing out of bound\r\n>> reading in cases similar to this one? Should we prevent such an INSERT\r\n>> from happening instead?\r\n> This is ultimately down to char_text() generating a string that's alleged\r\n> to be a valid "text" type value, but it contains illegally-encoded data.\r\n> Where we need to fix it is there: if we try to make every single\r\n> text-using function be 100% bulletproof against wrongly-encoded data,\r\n> we'll still be fixing bugs at the heat death of the universe.\r\n>\r\n> I complained about this in [1], but that thread died off before reaching a\r\n> clear consensus about exactly what to do.\r\n>\r\n> \t\t\tregards, tom lane\r\n>\r\n> [1] https://www.postgresql.org/message-id/flat/2318797.1638558730%40sss.pgh.pa.us\r\n>\r\n>\r\n\r\n\r\nLooks like the main controversy was about the output format. Make an\r\nexecutive decision and pick one.\r\n\r\n\r\ncheers\r\n\r\n\r\nandrew\r\n\r\n--\r\nAndrew Dunstan\r\nEDB: https://www.enterprisedb.com\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	{"Cc": ["Spyridon Dimitrios Agathos <spyridon.dimitrios.agathos@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>, Aleksander Alekseev <aleksander@timescale.com>"], "Date": ["Wed, 13 Jul 2022 15:46:17 -0400"], "From": ["Andrew Dunstan <andrew@dunslane.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Bug: Reading from single byte character column type may cause out of bounds memory reads."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657741591; cv=none; d=google.com; s=arc-20160816; b=jGosJn7ZWifay5jEIZkl0B0szqTpTXfVMiFMc0Gb8S7Hj8RarPusEMLa5D6O5kxJCH EA94a8MzAYCmcqL0t8n+SQbaS7eHRRLCAqS7T+6zlT4n/0qHbRG3wT156kwL38wkRjkd WlOLSYvRXiIHSNHe1pr/o55ey7omuolrYlB0A0fgNzP9OHk/g31181n4Ple+1vHBqZJs uvDPhT+nBKVPHpTwCN9xTgM/SNxmfSte97j24yU4yfJQCP15Vk1UN0YC6Vm///KMROpd 2sbc7mG1kUq6/yAL0cSWNpoy61aJBAPBl8/vjOkAOn94RgvepPqP72wkoGsy8h6tuqMD cIEA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp323595lfl; Wed, 13 Jul 2022 12:46:31 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id a21-20020a05600c349500b003a2e63c9816si3607831wmq.156.2022.07.13.12.46.31 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 12:46:31 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410617@lists.postgresql.org>) id 1oBiJb-0005OC-8x for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 19:46:31 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oBiJW-0003qw-Ju for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:46:26 +0000", "from relay11.mail.gandi.net ([2001:4b98:dc4:8::231]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oBiJT-0001eV-U8 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:46:26 +0000", "(Authenticated sender: adsend@dunslane.net) by mail.gandi.net (Postfix) with ESMTPSA id 50716100005; Wed, 13 Jul 2022 19:46:18 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<ddab080d-8c31-19af-e1e7-dba6c95d89a3@dunslane.net>"], "Precedence": ["bulk"], "References": ["<CAFM5RapGbBQm+dH=7K80HcvBvEWiV5Tm7N=NRaYURfm98YWc8A@mail.gmail.com> <CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com> <2231634.1657725094@sss.pgh.pa.us>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.5.0"], "X-Received": ["by 2002:a05:6000:a1c:b0:21d:7ec3:485e with SMTP id co28-20020a0560000a1c00b0021d7ec3485emr4700099wrb.106.1657741591672; Wed, 13 Jul 2022 12:46:31 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/ddab080d-8c31-19af-e1e7-dba6c95d89a3%40dunslane.net>"], "In-Reply-To": ["<2231634.1657725094@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410617@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410617@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uAFaOlG/wRqBILJfRfcC3wBf7mP5xPX+7MBvUXstHuOEKTHmdRT6SzBnNEWTVD61PS7kNn"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=XH5DmBQMLIBVsYpsJ6GYn9SaKYVrJ9JvIsYfb9C9umE=; b=JHaDZ+ICBYLBsIeKHh3FLy9KgCVw+2GEEiqeWEkNVIR9jhMM4kHRIzlzrqhHvCRYyB r1CW+7BZnnHoSl1qs8fzUqqADwDpdlK2ccboOuq6AUB6w/5wfYKy1RSLMfZ3QgHdUbvi VdaEIJgn/PZwE6YFYdDfP/WpXqUd5FHe+xQakL7u9FabDvepEVhpJyEq1V0a2Y1vFkhF nCBBBgH52pRWWURz/IhaK4WZUwnOP7ep8wnMrW1QBS7EajmROtECMRZwV41EBHLeUADw GztKsuYr5dvtVxRa0lAfnhqFYJa+HougS4R4JDj1Azn77x9bkq2Yi9ZM1fYEpJ3MIY3Y MIvQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410617@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410617@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410617@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410617@lists.postgresql.org"]}	["<2231634.1657725094@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 19:45:40+00	hukutoc@gmail.com	Re: Pluggable toaster	<CAN-LCVNkU+kdieu4i_BDnLgGszNY1RCnL6Dsrdz44fY7FOG3vg@mail.gmail.com>	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}]	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Greg Stark", "Address": "stark@mit.edu"}, {"Name": "Teodor Sigaev", "Address": "teodor@sigaev.ru"}]	\N	24	164751	[{"part_id": "2", "file_name": "0001_create_table_storage_v5.patch.gz", "content_id": "f_l5k0i4j10", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "3", "file_name": "0004_toaster_snapshot_v7.patch.gz", "content_id": "f_l5k0i4jd3", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "4", "file_name": "0003_toaster_default_v7.patch.gz", "content_id": "f_l5k0i4jd2", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "5", "file_name": "0002_toaster_interface_v8.patch.gz", "content_id": "f_l5k0i4jc1", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "6", "file_name": "0005_bytea_appendable_toaster_v7.patch.gz", "content_id": "f_l5k0i4je4", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "7", "file_name": "0006_toasterapi_docs_v3.patch.gz", "content_id": "f_l5k0i4jf5", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "8", "file_name": "0008_fix_toast_tuple_externalize_v3.patch.gz", "content_id": "f_l5k0i4jg7", "disposition": "attachment", "content_type": "application/x-gzip"}, {"part_id": "9", "file_name": "0007_fix_alignment_of_custom_toast_pointers_v3.patch.gz", "content_id": "f_l5k0i4jf6", "disposition": "attachment", "content_type": "application/x-gzip"}]	<div dir="ltr"><div dir="ltr">Hi hackers!<div>According to previous requests the patch branch was cleaned up from garbage, logs, etc. All conflicts&#39; resolutions were merged</div><div>into patch commits where they appear, branch was rebased to present one commit for one patch. The branch was actualized,</div><div>and a fresh patch set was generated.</div><div><a href="https://github.com/postgrespro/postgres/tree/toasterapi_clean" target="_blank">https://github.com/postgrespro/postgres/tree/toasterapi_clean</a><br></div><div><br></div><div>What we propose in short:</div><div><div>We suggest a way to make¬†<span class="gmail-il">TOAST</span>¬†<span class="gmail-il">pluggable</span>¬†as Storage (in a way like¬†<span class="gmail-il">Pluggable</span>¬†Access Methods) - detached¬†<span class="gmail-il">TOAST</span>¬†</div><div>mechanics from Heap AM, and made it an independent¬†<span class="gmail-il">pluggable</span>¬†and extensible part with our freshly developed¬†<span class="gmail-il">TOAST</span>¬†API.</div><div>With this patch set you will be able to develop and plug in your own¬†<span class="gmail-il">TOAST</span>¬†mechanics for table columns. Knowing internals¬†</div><div>and/or workflow and workload of data being TOASTed makes Custom¬†<span class="gmail-il">Toasters</span>¬†much more efficient in performance and storage.</div><div>We keep backwards compatibility and default¬†<span class="gmail-il">TOAST</span>¬†mechanics works as it worked previously, working silently with any¬†</div><div>Toastable datatype¬†</div><div>(and TOASTed values and tables from previous¬†versions, no changes in this) and set as default¬†<span class="gmail-il">Toaster</span>¬†is not stated otherwise,¬†</div><div>but through our¬†<span class="gmail-il">TOAST</span>¬†API.</div><div><br></div><div>We&#39;ve already presented out work at HighLoad, PgCon and PgConf conferences, you can find materials here¬†</div><div><a href="http://www.sai.msu.su/~megera/postgres/talks/" target="_blank">http://www.sai.msu.su/~megera/postgres/talks/</a></div><div>Testing scripts used in talks are a bit scarce and have a lot of manual¬†handling, so it is another bit of work to bunch them into¬†</div><div>patch set, please be patient, I&#39;ll try to make it ASAP.</div><div><br></div><div>We have ready to plug in¬†extension¬†<span class="gmail-il">Toasters</span>¬†</div><div>- bytea appendable¬†<span class="gmail-il">toaster</span>¬†for bytea datatype¬†(impressive speedup with bytea append operation) is included in this patch set;</div><div>- JSONB¬†<span class="gmail-il">toaster</span>¬†for JSONB (very cool performance improvements when dealing with TOASTed JSONB) will be provided later;</div><div>- Prototype¬†<span class="gmail-il">Toasters</span>¬†(in development) for PostGIS (much faster then default with geometric data), large binary objects¬†</div><div>(like pg_largeobject, but much, much larger, and without existing large object limitations), and currently we&#39;re checking default¬†</div><div><span class="gmail-il">Toaster</span>¬†implementation without using Indexes (direct access by TIDs, up to 3 times faster than default on smaller values,¬†</div><div>less storage due to absence of index tree).</div><div><br></div><div>Patch set consists of 8 incremental patches:</div><div>0001_create_table_storage_v5.patch - SQL syntax fix for CREATE TABLE clause, processing SET STORAGE... correctly;<br></div><div>This patch is already discussed in a separate thread;</div><div><br></div><div>0002_toaster_interface_v8.patch -¬†<span class="gmail-il">TOAST</span>¬†API interface and SQL syntax allowing creation of custom¬†<span class="gmail-il">Toaster</span>¬†(CREATE¬†<span class="gmail-il">TOASTER</span>¬†...)¬†</div><div>and setting¬†<span class="gmail-il">Toaster</span>¬†to a table column (CREATE TABLE t (data bytea STORAGE EXTERNAL¬†<span class="gmail-il">TOASTER</span>¬†bytea_toaster);)<br></div><div><br></div><div>0003_toaster_default_v7.patch - Default¬†<span class="gmail-il">TOAST</span>¬†implemented via¬†<span class="gmail-il">TOAST</span>¬†API;<br></div><div><br></div><div>0004_toaster_snapshot_v7.patch - refactoring of Default¬†<span class="gmail-il">TOAST</span>¬†and support for versioned¬†<span class="gmail-il">Toast</span>¬†rows;<br></div><div><br></div><div>0005_bytea_appendable_toaster_v7.patch - contrib module bytea_appendable_toaster - special¬†<span class="gmail-il">Toaster</span>¬†for bytea datatype¬†with customized append operation;<br></div><div><br></div><div>0006_toasterapi_docs_v3.patch - documentation package for¬†<span class="gmail-il">Pluggable</span>¬†<span class="gmail-il">TOAST</span>;<br></div><div><br></div><div><div>0007_fix_alignment_of_custom_toast_pointers_v3.patch - fixes custom¬†<span class="gmail-il">toast</span>¬†pointer&#39;s</div><span class="gmail-im" style="color:rgb(80,0,80)"><div>alignment required by bytea¬†<span class="gmail-il">toaster</span>¬†by Nikita Glukhov;</div><div><br></div></span><div>0008_fix_toast_tuple_externalize_v3.patch - fixes toast_tuple_externalize function¬†<br></div><span class="gmail-im" style="color:rgb(80,0,80)"><div>not to call¬†<span class="gmail-il">toast</span>¬†if old data is the same as new one.</div></span></div><div><br></div><div>The example of usage the TOAST API:</div><div>CREATE EXTENSION bytea_toaster;CREATE TABLE test_bytea_append (id int, a bytea STORAGE EXTERNAL);<br>ALTER TABLE test_bytea_append ALTER a SET TOASTER bytea_toaster;<br>INSERT INTO test_bytea_append SELECT i, repeat(&#39;a&#39;, 10000)::bytea FROM generate_series(1, 10) i;<br>UPDATE test_bytea_append SET a = a || repeat(&#39;b&#39;, 3000)::bytea;<br></div><div><br></div><div>This patch set opens the following issues:</div><div>1) With¬†<span class="gmail-il">TOAST</span>¬†independent of AM it is used by it makes sense to move compression from AM into¬†<span class="gmail-il">Toaster</span>¬†and make Compression one of¬†<span class="gmail-il">Toaster</span>&#39;s options.</div><div>Actually,¬†<span class="gmail-il">Toasters</span>¬†allow to use any compression methods independently of AM;</div><div>2) Implement default¬†<span class="gmail-il">Toaster</span>¬†without using Indexes (currently in development)?</div><div>3) Allows different, SQL-accessed large objects of almost infinite size IN DATABASE, unlike current large_object functionality and does not limit their quantity;</div><div>4) Several already developed¬†<span class="gmail-il">Toasters</span>¬†show impressive results for datatypes¬†they were designed for.</div></div></div><div><br class="gmail-Apple-interchange-newline"><div dir="ltr" class="gmail_signature"><div dir="ltr"><div>We&#39;re awaiting feedback.</div><div><br></div><div>Regards,</div><div>Nikita Malakhov<br></div><div>Postgres Professional¬†</div><div><a href="https://postgrespro.ru/" target="_blank">https://postgrespro.ru/</a></div></div></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Mon, Jul 11, 2022 at 3:03 PM Nikita Malakhov &lt;<a href="mailto:hukutoc@gmail.com">hukutoc@gmail.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr">Hi!<div>We have branch with incremental commits worm¬†where patches were generated with format-patch -</div><div><a href="https://github.com/postgrespro/postgres/tree/toasterapi_clean" target="_blank">https://github.com/postgrespro/postgres/tree/toasterapi_clean</a><br></div><div>I&#39;ll clean up commits from garbage files asap, sorry, haven&#39;t noticed them while moving changes.</div><div><br></div><div>Best regards,</div><div>Nikita Malakhov</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, Jul 1, 2022 at 3:27 PM Matthias van de Meent &lt;<a href="mailto:boekewurm%2Bpostgres@gmail.com" target="_blank">boekewurm+postgres@gmail.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On Thu, 30 Jun 2022 at 22:26, Nikita Malakhov &lt;<a href="mailto:hukutoc@gmail.com" target="_blank">hukutoc@gmail.com</a>&gt; wrote:<br>\r\n&gt;<br>\r\n&gt; Hi hackers!<br>\r\n&gt; Here is the patch set rebased onto current master (15 rel beta 2 with commit from 29.06).<br>\r\n<br>\r\nThanks!<br>\r\n<br>\r\n&gt; Just to remind:<br>\r\n&gt; With this patch set you will be able to develop and plug in your own TOAST mechanics for table columns. Knowing internals and/or workflow and workload<br>\r\n&gt; of data being TOASTed makes Custom Toasters much more efficient in performance and storage.<br>\r\n<br>\r\nThe new toast API doesn&#39;t seem to be very well documented, nor are the<br>\r\nnew features. Could you include a README or extend the comments on how<br>\r\nthis is expected to work, and/or how you expect people to use (the<br>\r\nresult of) `get_vtable`?<br>\r\n<br>\r\n&gt; Patch set consists of 9 incremental patches:<br>\r\n&gt; [...]<br>\r\n&gt; 0002_toaster_interface_v7.patch - TOAST API interface and SQL syntax allowing creation of custom Toaster (CREATE TOASTER ...)<br>\r\n&gt; and setting Toaster to a table column (CREATE TABLE t (data bytea STORAGE EXTERNAL TOASTER bytea_toaster);)<br>\r\n<br>\r\nThis patch 0002 seems to include changes to log files (!) that don&#39;t<br>\r\nexist in current HEAD, but at the same time are not created by patch<br>\r\n0001. Could you please check and sanitize your patches to ensure that<br>\r\nthe changes are actually accurate?<br>\r\n<br>\r\nLike Robert Haas mentioned earlier[0], please create a branch in a git<br>\r\nrepository that has a commit containing the changes for each patch,<br>\r\nand then use git format-patch to generate a single patchset, one that<br>\r\nshares a single version number. Keeping track of what patches are<br>\r\nneeded to test this CF entry is already quite difficult due to the<br>\r\namount of patches and their packaging (I&#39;m having troubles managing<br>\r\nthese seperate .patch.gz), and the different version tags definitely<br>\r\ndon&#39;t help in finding the correct set of patches to apply once<br>\r\ndownloaded.<br>\r\n<br>\r\nKind regards,<br>\r\n<br>\r\nMatthias van de Meent<br>\r\n<br>\r\n[0] <a href="https://www.postgresql.org/message-id/CA%2BTgmoZBgNipyKuQAJzNw2w7C9z%2B2SMC0SAHqCnc_dG1nSLNcw%40mail.gmail.com" rel="noreferrer" target="_blank">https://www.postgresql.org/message-id/CA%2BTgmoZBgNipyKuQAJzNw2w7C9z%2B2SMC0SAHqCnc_dG1nSLNcw%40mail.gmail.com</a><br>\r\n</blockquote></div><br clear="all"><div><br></div><div dir="ltr"><div dir="ltr"></div></div></div>\r\n</blockquote></div><br clear="all"><div><br></div><div dir="ltr" class="gmail_signature"><div dir="ltr"></div></div></div>\r\n	Hi hackers!\r\nAccording to previous requests the patch branch was cleaned up from\r\ngarbage, logs, etc. All conflicts' resolutions were merged\r\ninto patch commits where they appear, branch was rebased to present one\r\ncommit for one patch. The branch was actualized,\r\nand a fresh patch set was generated.\r\nhttps://github.com/postgrespro/postgres/tree/toasterapi_clean\r\n\r\nWhat we propose in short:\r\nWe suggest a way to make TOAST pluggable as Storage (in a way like\r\nPluggable Access\r\nMethods) - detached TOAST\r\nmechanics from Heap AM, and made it an independent pluggable and extensible\r\npart with our freshly developed TOAST API.\r\nWith this patch set you will be able to develop and plug in your own\r\nTOAST mechanics\r\nfor table columns. Knowing internals\r\nand/or workflow and workload of data being TOASTed makes Custom Toasters much\r\nmore efficient in performance and storage.\r\nWe keep backwards compatibility and default TOAST mechanics works as it\r\nworked previously, working silently with any\r\nToastable datatype\r\n(and TOASTed values and tables from previous versions, no changes in this)\r\nand set as default Toaster is not stated otherwise,\r\nbut through our TOAST API.\r\n\r\nWe've already presented out work at HighLoad, PgCon and PgConf conferences,\r\nyou can find materials here\r\nhttp://www.sai.msu.su/~megera/postgres/talks/\r\nTesting scripts used in talks are a bit scarce and have a lot of\r\nmanual handling, so it is another bit of work to bunch them into\r\npatch set, please be patient, I'll try to make it ASAP.\r\n\r\nWe have ready to plug in extension Toasters\r\n- bytea appendable toaster for bytea datatype (impressive speedup with\r\nbytea append operation) is included in this patch set;\r\n- JSONB toaster for JSONB (very cool performance improvements when dealing\r\nwith TOASTed JSONB) will be provided later;\r\n- Prototype Toasters (in development) for PostGIS (much faster then default\r\nwith geometric data), large binary objects\r\n(like pg_largeobject, but much, much larger, and without existing large\r\nobject limitations), and currently we're checking default\r\nToaster implementation without using Indexes (direct access by TIDs, up to\r\n3 times faster than default on smaller values,\r\nless storage due to absence of index tree).\r\n\r\nPatch set consists of 8 incremental patches:\r\n0001_create_table_storage_v5.patch - SQL syntax fix for CREATE TABLE\r\nclause, processing SET STORAGE... correctly;\r\nThis patch is already discussed in a separate thread;\r\n\r\n0002_toaster_interface_v8.patch - TOAST API interface and SQL syntax\r\nallowing creation of custom Toaster (CREATE TOASTER ...)\r\nand setting Toaster to a table column (CREATE TABLE t (data bytea STORAGE\r\nEXTERNAL TOASTER bytea_toaster);)\r\n\r\n0003_toaster_default_v7.patch - Default TOAST implemented via TOAST API;\r\n\r\n0004_toaster_snapshot_v7.patch - refactoring of Default TOAST and support\r\nfor versioned Toast rows;\r\n\r\n0005_bytea_appendable_toaster_v7.patch - contrib module\r\nbytea_appendable_toaster - special Toaster for bytea datatype with\r\ncustomized append operation;\r\n\r\n0006_toasterapi_docs_v3.patch - documentation package for Pluggable TOAST;\r\n\r\n0007_fix_alignment_of_custom_toast_pointers_v3.patch - fixes custom toast\r\n pointer's\r\nalignment required by bytea toaster by Nikita Glukhov;\r\n\r\n0008_fix_toast_tuple_externalize_v3.patch - fixes toast_tuple_externalize\r\nfunction\r\nnot to call toast if old data is the same as new one.\r\n\r\nThe example of usage the TOAST API:\r\nCREATE EXTENSION bytea_toaster;CREATE TABLE test_bytea_append (id int, a\r\nbytea STORAGE EXTERNAL);\r\nALTER TABLE test_bytea_append ALTER a SET TOASTER bytea_toaster;\r\nINSERT INTO test_bytea_append SELECT i, repeat('a', 10000)::bytea FROM\r\ngenerate_series(1, 10) i;\r\nUPDATE test_bytea_append SET a = a || repeat('b', 3000)::bytea;\r\n\r\nThis patch set opens the following issues:\r\n1) With TOAST independent of AM it is used by it makes sense to move\r\ncompression from AM into Toaster and make Compression one of Toaster's\r\noptions.\r\nActually, Toasters allow to use any compression methods independently of AM;\r\n2) Implement default Toaster without using Indexes (currently in\r\ndevelopment)?\r\n3) Allows different, SQL-accessed large objects of almost infinite size IN\r\nDATABASE, unlike current large_object functionality and does not limit\r\ntheir quantity;\r\n4) Several already developed Toasters show impressive results for\r\ndatatypes they were designed for.\r\n\r\nWe're awaiting feedback.\r\n\r\nRegards,\r\nNikita Malakhov\r\nPostgres Professional\r\nhttps://postgrespro.ru/\r\n\r\nOn Mon, Jul 11, 2022 at 3:03 PM Nikita Malakhov <hukutoc@gmail.com> wrote:\r\n\r\n> Hi!\r\n> We have branch with incremental commits worm where patches were generated\r\n> with format-patch -\r\n> https://github.com/postgrespro/postgres/tree/toasterapi_clean\r\n> I'll clean up commits from garbage files asap, sorry, haven't noticed them\r\n> while moving changes.\r\n>\r\n> Best regards,\r\n> Nikita Malakhov\r\n>\r\n> On Fri, Jul 1, 2022 at 3:27 PM Matthias van de Meent <\r\n> boekewurm+postgres@gmail.com> wrote:\r\n>\r\n>> On Thu, 30 Jun 2022 at 22:26, Nikita Malakhov <hukutoc@gmail.com> wrote:\r\n>> >\r\n>> > Hi hackers!\r\n>> > Here is the patch set rebased onto current master (15 rel beta 2 with\r\n>> commit from 29.06).\r\n>>\r\n>> Thanks!\r\n>>\r\n>> > Just to remind:\r\n>> > With this patch set you will be able to develop and plug in your own\r\n>> TOAST mechanics for table columns. Knowing internals and/or workflow and\r\n>> workload\r\n>> > of data being TOASTed makes Custom Toasters much more efficient in\r\n>> performance and storage.\r\n>>\r\n>> The new toast API doesn't seem to be very well documented, nor are the\r\n>> new features. Could you include a README or extend the comments on how\r\n>> this is expected to work, and/or how you expect people to use (the\r\n>> result of) `get_vtable`?\r\n>>\r\n>> > Patch set consists of 9 incremental patches:\r\n>> > [...]\r\n>> > 0002_toaster_interface_v7.patch - TOAST API interface and SQL syntax\r\n>> allowing creation of custom Toaster (CREATE TOASTER ...)\r\n>> > and setting Toaster to a table column (CREATE TABLE t (data bytea\r\n>> STORAGE EXTERNAL TOASTER bytea_toaster);)\r\n>>\r\n>> This patch 0002 seems to include changes to log files (!) that don't\r\n>> exist in current HEAD, but at the same time are not created by patch\r\n>> 0001. Could you please check and sanitize your patches to ensure that\r\n>> the changes are actually accurate?\r\n>>\r\n>> Like Robert Haas mentioned earlier[0], please create a branch in a git\r\n>> repository that has a commit containing the changes for each patch,\r\n>> and then use git format-patch to generate a single patchset, one that\r\n>> shares a single version number. Keeping track of what patches are\r\n>> needed to test this CF entry is already quite difficult due to the\r\n>> amount of patches and their packaging (I'm having troubles managing\r\n>> these seperate .patch.gz), and the different version tags definitely\r\n>> don't help in finding the correct set of patches to apply once\r\n>> downloaded.\r\n>>\r\n>> Kind regards,\r\n>>\r\n>> Matthias van de Meent\r\n>>\r\n>> [0]\r\n>> https://www.postgresql.org/message-id/CA%2BTgmoZBgNipyKuQAJzNw2w7C9z%2B2SMC0SAHqCnc_dG1nSLNcw%40mail.gmail.com\r\n>>\r\n>\r\n>\r\n>\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nikita Malakhov", "Address": "hukutoc@gmail.com"}]	{"Cc": ["Aleksander Alekseev <aleksander@timescale.com>, pgsql-hackers <pgsql-hackers@postgresql.org>, Robert Haas <robertmhaas@gmail.com>, Andres Freund <andres@anarazel.de>, Greg Stark <stark@mit.edu>, Teodor Sigaev <teodor@sigaev.ru>"], "To": ["Matthias van de Meent <boekewurm+postgres@gmail.com>"], "Date": ["Wed, 13 Jul 2022 22:45:40 +0300"], "From": ["Nikita Malakhov <hukutoc@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Pluggable toaster"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657741572; cv=none; d=google.com; s=arc-20160816; b=dtsUHn7vMdHEvvJhGU2+O66Dw9PvE45lu2je5MobBBkNRzQFTvA8g4KRCCfHYAE0zU exY1cDe5q2xSdh3aaGQk6ClSjbQgIA/+qHN1kRFObKSYCo6hm/8tZe2wD1woFANLk+6m xVpsIarrudZg4nMIaiI/zFuwePm7dfpTO/srxyeaRMKSdBYdg5Dr9ocE3ITr+a+hnBMD Jl6iqHEjdE9qhFD1CWVECI4lkkGsqxFJYzKdPR3xb1/+vl9u8zTi8jD9IpN0aExFeZPw 7weXLZP6MAQmGn/daV28IXKSAntiLWishoAlU7pLrAv6B/JcA49R3/vEAJVsIJ0KIrDB fNJw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp323502lfl; Wed, 13 Jul 2022 12:46:13 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d12-20020a05600c34cc00b003a2ebd4c832si3697734wmq.63.2022.07.13.12.46.12 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 12:46:12 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410616@lists.postgresql.org>) id 1oBiJI-0002wW-8p for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 19:46:12 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <hukutoc@gmail.com>) id 1oBiJB-0001M8-VR for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:46:06 +0000", "from mail-ed1-x52e.google.com ([2a00:1450:4864:20::52e]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <hukutoc@gmail.com>) id 1oBiJ2-0000nv-Mb for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 19:46:04 +0000", "by mail-ed1-x52e.google.com with SMTP id e15so15457197edj.2 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 12:45:56 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAN-LCVNkU+kdieu4i_BDnLgGszNY1RCnL6Dsrdz44fY7FOG3vg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAF4Au4zsdZ3t=f+YAaq12-SzqfCxfOTc1NanjBcUsw+5L-0iiA@mail.gmail.com> <224711f9-83b7-a307-b17f-4457ab73aa0a@sigaev.ru> <CA+TgmoYOZ0Ofoo1DJ+iRa6Mg8MACu0eb8tr-uggfNMZmD6bpkA@mail.gmail.com> <e2659551-b473-761e-0fe5-6c34f0480882@sigaev.ru> <CAN-LCVNj0iLHRA4CzZHk3-BEt2-47Xbx1h020ReB0LA-=5H9YA@mail.gmail.com> <20220322005141.pvyxgdynngzkziyr@alap3.anarazel.de> <CAN-LCVMvMvnopi3Q15o1sJRH8Tg+_T8USA0WKgWc-Nk330UkZQ@mail.gmail.com> <CAM-w4HP3xizUywZMh4bhJWgD7_vPcG5C8sU=YzmGCpp-9aX=5w@mail.gmail.com> <CAN-LCVOA9y8enbxfci9O28TeETARBrrnuu0aBowS=MSBMJnWaA@mail.gmail.com> <CAM-w4HMTw3tAoo_843YUef95JUBZYzrNDZNvCF3vAmPhHsS3aQ@mail.gmail.com> <551E51E0-5603-45F4-91EC-29EC1403F41F@anarazel.de> <CAN-LCVN8WMk0zbJrqpq3wQFPvunMjsdCj4y5gyEuyH0+4Ax-DA@mail.gmail.com> <CA+Tgmobhqw4kr5wZaA08_XJirZzgfohtR0BOgB2UNRTOcnjLmQ@mail.gmail.com> <CAN-LCVP94miKg1j5GF+WVhyG4zDPF4ruG8ZnCR-4cBpG=rhbSQ@mail.gmail.com> <CA+TgmoZBgNipyKuQAJzNw2w7C9z+2SMC0SAHqCnc_dG1nSLNcw@mail.gmail.com> <CAN-LCVPximi0n6C7CN83Xq8-jpBw0cOaC9fkBHNr0qo7Z4Fsjw@mail.gmail.com> <CAN-LCVO2L51gMCsM4-v=NFmDt1qh+HWL4GJXzfxaQZX6cwofkw@mail.gmail.com> <CAJ7c6TOMPiRs-CZ=A9hyzxOyqHhKXxLD8qCF5+GJuLjQBzOX4A@mail.gmail.com> <CAN-LCVMuxpphn7VsGk7Ov6Ls5ML2jnx5_ycu4UPiw9koPqKMuQ@mail.gmail.com> <CAJ7c6TNEaq55735HQ_GOXBGSBgf=bzV_+2P+KC30iVUpmJckmQ@mail.gmail.com> <CAN-LCVNxo3JjOjhHjC368K60U888FmC1CBWU2fXCjaTTB2k=zw@mail.gmail.com> <CAN-LCVOruhrrrK+wNAF=6kPkhWfgik6+MdYZ1yJARf2qfHc-qA@mail.gmail.com> <CAEze2Wh=PzpX-NT=Vo5c3J45tdyBSdkJM7-VVOWfVPmDYw7fmQ@mail.gmail.com> <CAN-LCVMC2ukb=6W2XyUdMc+AF5pipUvTkDLnZMty=dG3CCdaGw@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:1d18:b0:3a2:ef8b:1471 with SMTP id l24-20020a05600c1d1800b003a2ef8b1471mr5314342wms.202.1657741572594; Wed, 13 Jul 2022 12:46:12 -0700 (PDT)", "by 2002:a05:6402:34c3:b0:43a:c323:274f with SMTP id w3-20020a05640234c300b0043ac323274fmr7292225edc.67.1657741554489; Wed, 13 Jul 2022 12:45:54 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAN-LCVNkU%2Bkdieu4i_BDnLgGszNY1RCnL6Dsrdz44fY7FOG3vg%40mail.gmail.com>"], "In-Reply-To": ["<CAN-LCVMC2ukb=6W2XyUdMc+AF5pipUvTkDLnZMty=dG3CCdaGw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410616@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000007cbe5405e3b50863\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410616@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=qmnc7LTeIa3vxO6++bMcCeljpGSloJdYJCo/o1hDqkU=; b=fDem7J1lBa3sdQ3CXGFg8ePdXZwKJ+Jn1p7rJL0kLE2PIiK3XIZ/0Dr9iP4+5VInQm uLfz0l0UUbLH5c9C2LguJKn8xyvdpNg1sxd+UEOeIA6kFUbRugB7bUwSiRg29V9CdfVN pCe2/X1Vv7qE/YweKJuwGzE6e44+7OI25pjWdaqCIBLwc3kZehuzocY4Xfx08qscije5 gtUEj6ve9bKdzrvhMEYZX6UkaVD9GZURGS8qyFzdWo8N1p/KysxxER/kXJWcuSp6xT9u HR/j9K/n1jArxRugcyevTSp7ccFrNOW8m0IZQ8H/oL8PfSz5mmQtFsYx1jiEsUYELFiX n+nA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9NEqohIryXD4NVpcs4RwAZunHNHBkTvIkW+57iG8NmeT2EG4b2 YvgCntpOpvyAbKJJX2QJytj57k4Id8c99chFHRg="], "X-Google-Smtp-Source": ["AGRyM1tRyairHlRSnS924pB0pFrWdTzJKhTLsLTKNB4Z9dtWogLt9d/VuOoUswEiP4LdaR3xyNNF"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=qmnc7LTeIa3vxO6++bMcCeljpGSloJdYJCo/o1hDqkU=; b=E2SkreNAlpRFUgPQtJVEj4gAO8drDBxSCu6EfoV7Itq4zht3e6j33GEQBsTQJgD+XX VWBSioCUfSkm92Kv8V7YZJPPY0xY3yL3neFbz6Kuzd0CY9TWqZ4vllFaaXereGJNRqYI Qnr6bnoCjzIt2vdFjzc/WecUdsuHNN4uQnLUhaGmnJijrxcagVlZDqi/ALh03R8ETNMU M3K/93xUmumEAu9YU0mzvkH3D/0WHWCu6hgCRY8H/yBazTK0aZHanr6+6jLiQ+UdWoGV 77iG6vEo4JDX6sTBc4j5psJLU207eKOJzFBCov8jc9doHBhznbuIuNN0dPzxYBudI8PN 5Czg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=fDem7J1l; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410616@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410616@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=qmnc7LTeIa3vxO6++bMcCeljpGSloJdYJCo/o1hDqkU=; b=NmJBpWEieE5KSC+NTnPXqZdt2PzqJsS2V57KYhj1xFlpfj8Wd/EiJSEyMvlkwgL2ds I5pNMMxsKfVv22Fbp/Dv9Q/q6LBRRvPgTKBZyt6fdxGFKjnmI2VjHH8HG6JKvqVCwl73 FdX4rEgaxDhNYCRitgkLayWHvOTSd3VhwUrDXpL0+o1HLwVOl4rE8MWy5nIA3zNijWTT dajq3NxLvSRgoWP5R9EbnlU3k0v3pFsq/MqenJN9Qct55AeDS3OvlCrhs5Azy48eMutx /4DA/5eLa7Y788knB/FUWnY6Sh/y40zIguY1t9I721YT+bP7rWCY+yQlDR67/SMNeq93 o4fw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=fDem7J1l; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410616@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410616@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAN-LCVMC2ukb=6W2XyUdMc+AF5pipUvTkDLnZMty=dG3CCdaGw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 19:49:34+00	tgl@sss.pgh.pa.us	Re: allow building trusted languages without the untrusted versions	<2476507.1657741774@sss.pgh.pa.us>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	26	6946	[]		Nathan Bossart <nathandbossart@gmail.com> writes:\r\n> Given the discussion in this thread, I intend to mark the commitfest entry\r\n> as Withdrawn shortly.  Before I do, I thought I'd first check whether 0001\r\n> [0] might be worthwhile independent of $SUBJECT.  This change separates the\r\n> [un]trusted handler and validator functions for PL/Perl so that we no\r\n> longer need to inspect pg_language to determine whether to use the trusted\r\n> or untrusted code path.  I was surprised to learn that you can end up with\r\n> PL/PerlU even if you've specified the trusted handler/validator functions.\r\n> Besides bringing things more in line with how PL/Tcl does things, this\r\n> change simplifies function lookup in plperl_proc_hash.  I suppose such a\r\n> change might introduce a compatibility break for users who are depending on\r\n> this behavior, but I don't know if that's worth worrying about.\r\n\r\nMeh.  Avoiding the potential repeat hashtable lookup is worth something,\r\nbut I'm not sure I buy that this is a semantic improvement.  ISTM that\r\nlanpltrusted *should* be the ultimate source of truth on this point.\r\n\r\nMy feelings about it are not terribly strong either way, though.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>, Robert Haas <robertmhaas@gmail.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Nathan Bossart <nathandbossart@gmail.com>"], "Date": ["Wed, 13 Jul 2022 15:49:34 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: allow building trusted languages without the untrusted versions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657741784; cv=none; d=google.com; s=arc-20160816; b=E6pb3lX9rGRETtee21dIk0ACWtpsLIhPPRdwwNWLM3n+gbBuiromuxiXCXx44Ra9At zCCzUy2Gu1Wi/rccxlHpQ7xpAvE5hsmu1CrekdHx7Ud/P8FcWQEYIp16wOydBKlcsWRz iCn/7+KI8LZ91Tsx9OMC6rpU2bKCQl4hDt1KsqU7fXw3nfGTyn65dXqiH9NBSBPGnk0O 9OTlCiFJlLYM7KKdN2YSeXoBgz8B8uywnucVgkPJq99L6rJxN5soNHMJbm+eTh8fUmfn 5Z9Fe12U+//5ZokK5owmOc2RIAaDVBkhK01+Z252l7lqtF8d7ojSnVfxywSYRzd2Uf7n t6Jw=="], "Comments": ["In-reply-to Nathan Bossart <nathandbossart@gmail.com> message dated \\"Wed, 13 Jul 2022 11:53:50 -0700\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp324782lfl; Wed, 13 Jul 2022 12:49:44 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o1-20020a5d6701000000b0021d41cc65f8si15179305wru.286.2022.07.13.12.49.44 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 12:49:44 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410619@lists.postgresql.org>) id 1oBiMh-0000MP-Tc for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 19:49:43 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBiMd-000775-9p for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 19:49:39 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBiMb-0001fw-6F for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 19:49:38 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DJnY9n2476508; Wed, 13 Jul 2022 15:49:34 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2476506.1657741774.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2476507.1657741774@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<1290329.1653326228@sss.pgh.pa.us> <CA+TgmoY-Xy_ObfYVUTSamD8BmW8npaktbr65JtnkW-c1VQobVA@mail.gmail.com> <1333860.1653338790@sss.pgh.pa.us> <CA+TgmoYZKLxftaZZvj4_-zHQ27CBeUs+KvggyU3qS79-7aQEPA@mail.gmail.com> <1354561.1653345768@sss.pgh.pa.us> <CA+TgmoZ_c0j4ut87_QCFm697Qq5Z_u66VZt2PYenfZVjUT1qRA@mail.gmail.com> <20220524172851.GA1191690@nathanxps13> <CA+TgmobOQiDXpYq6TgaCzH3p5c0Fko-wXqCjgd5YsR6RsX31vA@mail.gmail.com> <20220524205841.GA1254661@nathanxps13> <849661f1-85a3-2833-5477-059a9b58e70f@enterprisedb.com> <20220713185350.GA3118442@nathanxps13>"], "X-Received": ["by 2002:a7b:cb8d:0:b0:3a2:e858:1761 with SMTP id m13-20020a7bcb8d000000b003a2e8581761mr5355638wmi.90.1657741784202; Wed, 13 Jul 2022 12:49:44 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2476507.1657741774%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220713185350.GA3118442@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410619@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410619@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vKKlX+oRTXdGb0JdtpcKX19TWtFouNKYMYwECdnMTCsj4UArzhEC+gtnPxpjJMOb1bDTtW"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=hhoN0FaKMnwYfg2nw8Shiuq8B52SK45svZcFpcRz+K0=; b=W4YkYd/oR6JDxoAZCXqCxaHSLJ/ol0JY1OA0SVWOZdrzyeSHvd8PPM2WPfzTlBKPPi JY4/05jg5mxikiCYYztZ0ZanLOSjm+s0w+e0/1zed5mgnLuqPYHxdQujZ8x0vWcg/MQI bKs2HmZji3XYWIISX+1NrhPRKeF686lkoO47B4dQWpWVNmy138pgnETxqKXU6MgibVPD qDc43rFreAoz7hAQUSV+61z8PLwK3Q9ShgHiL/56uVRE7OxaFd/84wK86bD5wnXzfSGr KvLzEDLK/2wMneQQQoZR9+PDNGcTwMwurEAOYhxBdohoquFFVrUYHCESfBPRIfCS1JAC gfyA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410619@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410619@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410619@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410619@lists.postgresql.org"]}	["<20220713185350.GA3118442@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 20:05:44+00	d.koval@postgrespro.ru	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru>	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	27	364588	[{"charset": "UTF-8", "part_id": "2", "file_name": "v5-0001-partitions-split-merge.patch", "disposition": "attachment", "content_type": "text/plain"}]		Thanks you!\r\nI've fixed all things mentioned.\r\n\r\n-- \r\nWith best regards,\r\nDmitry Koval\r\n\r\nPostgres Professional: http://postgrespro.com	[]	\N	["\\\\Seen"]	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Zhihong Yu <zyu@yugabyte.com>"], "Date": ["Wed, 13 Jul 2022 23:05:44 +0300"], "From": ["Dmitry Koval <d.koval@postgrespro.ru>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657742764; cv=none; d=google.com; s=arc-20160816; b=sHJ/wl6+UXuKv8v8oDyNATFhu7/3215HlsIRccVa8aWXH0bc9i7A9+7nkMHFMei6SW OTEPSzdIa0+VnJsOJIT1uCWStBoAte47Ym0Q4QUD36tgcK2Ld6r0VtX0sjrqVaMZF958 OnDiNGPWTzCwdTiwoaYcMO699iJoXTDakr0PqdKqad+kf3jZl70+8eX/Y2dHE7pWyo2G Yx4eEBhQk/bAF3vZu0W2FoI4lRW9wWOCvlP8tLhjY1X7rzD84GXgTCazA64uYM4/eiD2 fajgMW0qO7F7Ays3+sJnT+9JKpv6JkyqqfAg5sYX8cBCc7yXF2Qr/OuTFTrPbbC2z0xH z4LQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp330004lfl; Wed, 13 Jul 2022 13:06:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 195-20020a1f17cc000000b00372cbde17a1si2837462vkx.141.2022.07.13.13.06.03 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 13:06:04 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410621@lists.postgresql.org>) id 1oBicV-0007xr-5H for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 20:06:03 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBicM-0006OS-3N for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:05:54 +0000", "from mail.postgrespro.ru ([93.174.131.139]) by magus.postgresql.org with esmtp (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBicD-0001pJ-SI for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:05:53 +0000", "from [192.168.28.32] (cyclops.postgrespro.ru [93.174.131.138]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (Client did not present a certificate) by mail.postgrespro.ru (Postfix) with ESMTPSA id B2B1021C024B; Wed, 13 Jul 2022 23:05:43 +0300 (MSK)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru>"], "Precedence": ["bulk"], "References": ["<163714495450.16056.3566953095730878367@malur.postgresql.org> <c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru> <82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru> <CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:6102:5047:b0:356:36d3:db2e with SMTP id by7-20020a056102504700b0035636d3db2emr2309592vsb.4.1657742764642; Wed, 13 Jul 2022 13:06:04 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2289dab9-1f2b-f46a-a0da-3b61223a2897%40postgrespro.ru>"], "In-Reply-To": ["<CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410621@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"------------Gs8rpbvV92qHjyBScDlRbkEZ\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410621@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/simple; d=postgrespro.ru; s=mail; t=1657742743; bh=rJDbj74woA/J9sSvKQM7hxVeeh/wqSZjSprJtPstRtY=; h=Date:Subject:To:Cc:References:From:In-Reply-To; b=hk61chXsJN2vtpCecyaKYkgFWFR4K6FKZ55FmC3lgNmdshc030y1xWxwec+nSdJjc Q0usDjm8f93giei0m7+QCF8YKcTPRyI3bdW+d6tZOmGLCKIot6LYgUfcY/7vD3mjex n/NvwkseMs9NG0EyQ5O5qEf5MXiNkWNnsqzRB5Ko="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uAxFfkosWroEtsFuCabMCI1hGil3EKG62m8DSkAlzZacIstdTuNV8mKhnTpSaLmBW2yIRR"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:from :references:cc:to:content-language:subject:user-agent:mime-version :date:message-id:dkim-signature; bh=xvqGPcL1rEfUrN/paLj2UeT+KP4SPU/GNR/jctY8Uzs=; b=odHq6JE458fTpuO0oQWCRMkf1Z3hTmJc+4xjhlN/EXr0CGLsG/JDrXM/YSluzJLRWO 06D8atdulU2Rq03w1FxS8eXmZSzmY9V1BlCHZ6rPvBBdC5xlRV7RbarppYdrkxyCONFw z3rSWZo2J7yUPDMoQ4muCFvu7zT5vSble7SP78ohCUrDlJWvef0Vr322R74+RZ8T1Q3L YVmlotZ9TpB5DTqeKPlOPt5saC3Gy/3cv+ufTLo7Je9VRDCCIEy9c6FVwb9ePHOdTdlW kHwIrejyZerlYX+kYDfEGgAMeJC0CXhQXxe8LHDewvI46+JmE6yeQLnJTUZ5Wu32/jFl uxOg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=hk61chXs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410621@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410621@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=hk61chXs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410621@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410621@lists.postgresql.org"]}	["<CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 20:17:30+00	zyu@yugabyte.com	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7+pNn2OQcdk=4A@mail.gmail.com>	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	28	8740	[]	<div dir="ltr"><div dir="ltr"><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Jul 13, 2022 at 1:05 PM Dmitry Koval &lt;<a href="mailto:d.koval@postgrespro.ru">d.koval@postgrespro.ru</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Thanks you!<br>\r\nI&#39;ve fixed all things mentioned.<br>\r\n<br>\r\n-- <br>\r\nWith best regards,<br>\r\nDmitry Koval<br>\r\n<br>\r\nPostgres Professional: <a href="http://postgrespro.com" rel="noreferrer" target="_blank">http://postgrespro.com</a></blockquote><div>Hi,</div><div>Toward the end of¬†ATExecSplitPartition():</div><div><br></div>+ ¬† ¬† ¬† /* Unlock new partition. */<br><div>+ ¬† ¬† ¬† table_close(newPartRel, NoLock);</div><div><br></div><div>¬†Why is NoLock passed (instead of AccessExclusiveLock) ?</div><div><br></div><div>Cheers</div></div></div>\r\n	On Wed, Jul 13, 2022 at 1:05 PM Dmitry Koval <d.koval@postgrespro.ru> wrote:\r\n\r\n> Thanks you!\r\n> I've fixed all things mentioned.\r\n>\r\n> --\r\n> With best regards,\r\n> Dmitry Koval\r\n>\r\n> Postgres Professional: http://postgrespro.com\r\n\r\nHi,\r\nToward the end of ATExecSplitPartition():\r\n\r\n+       /* Unlock new partition. */\r\n+       table_close(newPartRel, NoLock);\r\n\r\n Why is NoLock passed (instead of AccessExclusiveLock) ?\r\n\r\nCheers\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Dmitry Koval <d.koval@postgrespro.ru>"], "Date": ["Wed, 13 Jul 2022 13:17:30 -0700"], "From": ["Zhihong Yu <zyu@yugabyte.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657743084; cv=none; d=google.com; s=arc-20160816; b=S8e0IK83e3FtKmd7LdaIBlIQGOryRoNGXy4d3GxOhZhYCzZq2cbFsJG0nH7FUaj77h jnxvkGLAy7BmDupdXHBaDtqDKvwRLYUhZ4zqnN7jNnBX+HrHImbDzN10+S1j5C/phvyO Mq0PvN9/YO+MuOkGkxxT6aL7Ax821JzaaflLRlHHLSPJTcqalAx7tU/sSTLWjNIRwGck egAHYO5yPqJDaXCViAv+8ujefLz1Yaen4VYcRD44GcCkgi0FB+fdJKqHmwi2ymqMpbuX 6GSLZZvpGZyRrTZDjQM7W10kJXYhKn6EFTHwE364FCAhZ4y/L7OuZ/5jL+8IgsjR7G7E 5idQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp332028lfl; Wed, 13 Jul 2022 13:11:24 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x16-20020a5d6510000000b0021b82434c12si15813381wru.189.2022.07.13.13.11.24 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 13:11:24 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410622@lists.postgresql.org>) id 1oBihf-0003uO-TR for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 20:11:23 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <zyu@yugabyte.com>) id 1oBihb-0002LT-BS for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:11:19 +0000", "from mail-lj1-x22e.google.com ([2a00:1450:4864:20::22e]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <zyu@yugabyte.com>) id 1oBihY-0001sE-Kc for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:11:18 +0000", "by mail-lj1-x22e.google.com with SMTP id p6so11915824ljc.8 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 13:11:16 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7+pNn2OQcdk=4A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<163714495450.16056.3566953095730878367@malur.postgresql.org> <c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru> <82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru> <CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com> <2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru>"], "X-Received": ["by 2002:a5d:47a4:0:b0:21d:859c:4bd9 with SMTP id 4-20020a5d47a4000000b0021d859c4bd9mr4639298wrb.681.1657743084149; Wed, 13 Jul 2022 13:11:24 -0700 (PDT)", "by 2002:a05:651c:160a:b0:25a:62a4:9085 with SMTP id f10-20020a05651c160a00b0025a62a49085mr2596651ljq.214.1657743074630; Wed, 13 Jul 2022 13:11:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7%2BpNn2OQcdk%3D4A%40mail.gmail.com>"], "In-Reply-To": ["<2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410622@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000017b80d05e3b563b6\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410622@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=yugabyte.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=f99v3m11l5x6NVKVcd5ijfIiwDsT+LiyV20Tt3THbio=; b=Xqha9EUC/MakMj8Z0TMpI0ZgZYL8II1v0uf0xF5zROn+p9GIXvsrXu30TEqZyCvTJl vQiFXd0B0uetG+vk8FBfv5OPXdYBOjkeAvT1CiLX53uSRLfHpcIUJdefqRgg+6kWtvbD f6LdudltcBBr0ttjxEMKYGJxPjjX39A4zbLa0="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/bvC2WlT6Je3qYanJpxOlRDztgJlfwybqDx7tEqlzMGfkY95jz TKDTu3Bg4ERBfXq3Ehn4+H7QEFUCsEdigeuinJTBy/FNUuJZ6w=="], "X-Google-Smtp-Source": ["AGRyM1soOqAeFilUgnUKaBhKAe+dsalXuwpPeVK/MRPPKlCoi+2IVI3WXxD0yQIOSYBmddaOtTuu"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=f99v3m11l5x6NVKVcd5ijfIiwDsT+LiyV20Tt3THbio=; b=RWCQb0kmscogiJbMHvn5qdSraDjyUr5BtDemDtyTddiol3hAKW8MJYmu6YHJHaPZrF RhzvwdpE6ZgoGF5Bkj2WVpeNn9w+PLp5icSbBxJYwqTumHaCgWs96AQYlIs9S+QzyQgs 2bUa0c/oIuRYONDOdLTpL1/Rh2zMu3qkP0L9MGJoDzOQlE8oXs8nLwbe4R/eB2+EvMon MDqFfbXcWp1tEJoPHXVVD2osBq7bfFYrdbWCy7np+ZL2Nsc6thUL0NyxDULudIqyInWp mZzoFpKGvkVGUFOIFDBI05ww9bihajDyvrIlbq1NuOtDFZtRXIQeacLuvosgxHp8QxYr gFfQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@yugabyte.com header.s=google header.b=Xqha9EUC; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410622@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410622@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=yugabyte.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=f99v3m11l5x6NVKVcd5ijfIiwDsT+LiyV20Tt3THbio=; b=xC235e63sCkTnrhpppqzv9FYcItbzNFIqdMfP/sJOWhj1O1uEDjmTKAp7bqtcts1ph 0qHAJaalFlc/OsOViqNQefgpBgjC1Nme9IHrJPTsOfsPTVTm0Y7/cHJT2sjXZ9rOjM2x RVbmRriqn9O1lzyB7TgyLY74mLO2wSBhgz/UbSvTvZvJ0gAg1439TBH1hgm+pXdjmGun 40jseL1h5XwYjdHfctx4oGASda5/Jjg8PSZElUPhe1Mxw0y5UanORAP8Vivb3nq6U/HR TuBprBltws9oc6CofbVBGWluLkk4HzltJu+DTARqp42VU1Oh5xTJvVDK/OcLVJSHfqCJ IKGg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@yugabyte.com header.s=google header.b=Xqha9EUC; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410622@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410622@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=yugabyte.com"]}	["<2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 20:49:01+00	andrew@dunslane.net	Re: proposal: possibility to read dumped table's name from file	<7f9cde55-dd3b-a604-bf89-e70511025709@dunslane.net>	[{"Name": "Pavel Stehule", "Address": "pavel.stehule@gmail.com"}, {"Name": "Daniel Gustafsson", "Address": "daniel@yesql.se"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@2ndquadrant.com"}, {"Name": "Tomas Vondra", "Address": "tomas.vondra@enterprisedb.com"}, {"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Dean Rasheed", "Address": "dean.a.rasheed@gmail.com"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Surafel Temesgen", "Address": "surafel3000@gmail.com"}, {"Name": "vignesh C", "Address": "vignesh21@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	30	6256	[]		\r\nOn 2022-04-25 Mo 13:39, Pavel Stehule wrote:\r\n> Hi\r\n>\r\n> fresh rebase\r\n>\r\n>\r\n\r\n\r\nIf we're going to do this for pg_dump's include/exclude options,\r\nshouldn't we also provide an equivalent facility for pg_dumpall's\r\n--exclude-database option?\r\n\r\n\r\ncheers\r\n\r\n\r\nandrew\r\n\r\n\r\n--\r\nAndrew Dunstan\r\nEDB: https://www.enterprisedb.com\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@2ndquadrant.com>, Tomas Vondra <tomas.vondra@enterprisedb.com>, Justin Pryzby <pryzby@telsasoft.com>, Dean Rasheed <dean.a.rasheed@gmail.com>, Stephen Frost <sfrost@snowman.net>, Surafel Temesgen <surafel3000@gmail.com>, vignesh C <vignesh21@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>"], "To": ["Pavel Stehule <pavel.stehule@gmail.com>, Daniel Gustafsson <daniel@yesql.se>"], "Date": ["Wed, 13 Jul 2022 16:49:01 -0400"], "From": ["Andrew Dunstan <andrew@dunslane.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: proposal: possibility to read dumped table's name from file"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657745360; cv=none; d=google.com; s=arc-20160816; b=PfoPChVDrx0VQhFOMrEZYeIhvh5X0oqiJpjfybTfYruQc863o4rekRZ+hs4gmWw0uu WT1EJaVh0MOLuiamKfMYJyEaE+yi4fB4PM/WlXfMGSVAkCMjt6WnQ8yhuzRzJOIzj/OZ 2Bn1k8dA5d6aYsLaGk3NkmIlXtQSrXiIkGtFP3BT7M4S4AD5Rtx6VdKDpuD26Tn0H0Mi CDGwc3LnKlelAcOm+jiDzrVwjc4igMOFdrmfwYtIV5Lh8s3rmnb/R/fxEP2MC4JY/4AQ Ex6IPPBI2J0JqiXVazP3/Sr3lU3ZcKecNz3NtAKh2H5zgwb28rG65CRZR11z+AxCt6hY fS7g=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp344602lfl; Wed, 13 Jul 2022 13:49:20 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g8-20020a05600c4ec800b0039c52d70f57si4441123wmq.160.2022.07.13.13.49.20 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 13:49:20 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410626@lists.postgresql.org>) id 1oBjIN-0006c9-VH for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 20:49:19 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oBjIJ-00051b-BI for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:49:15 +0000", "from relay10.mail.gandi.net ([217.70.178.230]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oBjIG-0001GP-Fg for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 20:49:13 +0000", "(Authenticated sender: adsend@dunslane.net) by mail.gandi.net (Postfix) with ESMTPSA id 94B7A240002; Wed, 13 Jul 2022 20:49:03 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<7f9cde55-dd3b-a604-bf89-e70511025709@dunslane.net>"], "Precedence": ["bulk"], "References": ["<202107122259.n6o5uwb5erza@alvherre.pgsql> <3183720.1626131795@sss.pgh.pa.us> <CAFj8pRBq9X=oSNbo+v93EwznkQ3JczEW6UsfQK37vx1ktW-2ZA@mail.gmail.com> <B854A710-E1DE-4C6B-A411-E246A95DCDF9@yesql.se> <CAFj8pRAZbCvM3v8jp5wkPpZHJvAopWpbF=+v+84Pns=qWtvEcg@mail.gmail.com> <CAFj8pRAy+xfSj=tz_=RRx0hsn_x5dMpvTz2RJ9OzCG9GTdPxnA@mail.gmail.com> <CAFj8pRCk0Syge+c1mvkHwpJ6S2zM7nyEMu98iyzRWYsccXuG+g@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.5.0"], "X-Received": ["by 2002:adf:e486:0:b0:21d:7f2a:6b67 with SMTP id i6-20020adfe486000000b0021d7f2a6b67mr5215935wrm.293.1657745360296; Wed, 13 Jul 2022 13:49:20 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/7f9cde55-dd3b-a604-bf89-e70511025709%40dunslane.net>"], "In-Reply-To": ["<CAFj8pRCk0Syge+c1mvkHwpJ6S2zM7nyEMu98iyzRWYsccXuG+g@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410626@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410626@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1s05tS6vtZ5p2m7xaqvmCi0d4tgTwDQfcY6QPuhnOax7iqN6T7U4zPIsuRqByc58Tu4U+75"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=kkMPyrfXlzUF6bOIh1i4It8UKwpMKxGhV1PCcnNSj00=; b=kgpVh05D0mhjD3B3jOINRSjQieWreqlJ9/odZWdXcXVQFJcQQz4VAlmda1Bur6JKFK 59b2R8EjpFZh2LSI74+5CPCEWYB+9ItqT9VX0NuUuipL2RB0BXcTacgW8VfZyFAKHAVf MWlSqUFoGsGemM6fx0vlK3l9latuqGA/XVAtu9/uaNMG7PkBZpGUJeA+Ejiaz0mW/nq2 e74jUvXuZoX35Y3Xjj5XePxispliq7xhhlplkbMj+seY4eRJ7QX76Xwtsyffu8uCb34y Vp2J3sKTqrc32Gj0Gm6IUuy7sZwa8iB1+S3sJD2UZa1wQ6KESgH4MKIdxrX5mRG/28+l 86Ug=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410626@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410626@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410626@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410626@lists.postgresql.org"]}	["<CAFj8pRCk0Syge+c1mvkHwpJ6S2zM7nyEMu98iyzRWYsccXuG+g@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 20:33:45+00	d.koval@postgrespro.ru	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<a351ab9a-337d-dda5-7dcf-5b35100b7447@postgrespro.ru>	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	29	364927	[{"charset": "UTF-8", "part_id": "2", "file_name": "v6-0001-partitions-split-merge.patch", "disposition": "attachment", "content_type": "text/plain"}]		> + ¬† ¬† ¬† /* Unlock new partition. */\r\n> + ¬† ¬† ¬† table_close(newPartRel, NoLock);\r\n> \r\n>  ¬†Why is NoLock passed (instead of AccessExclusiveLock) ?\r\n\r\nThanks!\r\n\r\nYou're right, I replaced the comment with "Keep the lock until commit.".\r\n\r\n-- \r\nWith best regards,\r\nDmitry Koval\r\n\r\nPostgres Professional: http://postgrespro.com	[]	\N	["\\\\Seen"]	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Zhihong Yu <zyu@yugabyte.com>"], "Date": ["Wed, 13 Jul 2022 23:33:45 +0300"], "From": ["Dmitry Koval <d.koval@postgrespro.ru>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657744445; cv=none; d=google.com; s=arc-20160816; b=qwrEgikAKea//UHbVKfVQSXhNtCUZkJGCjN/qbUUzmByHKK2KvBqUJ7rDa5s+ytSjV gOs80+UD9un8lwIyWOEEG+X1eyY9rpoTzWggm7GboCunMkoSLZfuxnyN9t8c27QAtgvx aPcKvtMFOWhNTzd1A2l8BhTI3NWGU7StpiBUOcy3dREW+QsHZYvMid8RU+wfC+/v+yGY feTC5/y/Ek4An1jE89SmIq8m3dbce4pgiroCE/lL1/dTpqug+4ZZVmiD3CMpCHSpXfsI MJMgvyG+L3FKB57lV3Ssvh69H4bRuqszzP1sKZcBndrlciXMjEcLSES3EGYmFQI0OK6S 3GQw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp339323lfl; Wed, 13 Jul 2022 13:34:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 62-20020a671041000000b003577d8f9405si1325425vsq.266.2022.07.13.13.34.04 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 13:34:05 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410624@lists.postgresql.org>) id 1oBj3b-000131-RL for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 20:34:03 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBj3T-0007vC-6d for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:33:55 +0000", "from mail.postgrespro.ru ([93.174.131.139]) by magus.postgresql.org with esmtp (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBj3K-00028n-Vs for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 20:33:54 +0000", "from [192.168.28.32] (cyclops.postgrespro.ru [93.174.131.138]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (Client did not present a certificate) by mail.postgrespro.ru (Postfix) with ESMTPSA id 70CBF21C024B; Wed, 13 Jul 2022 23:33:45 +0300 (MSK)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<a351ab9a-337d-dda5-7dcf-5b35100b7447@postgrespro.ru>"], "Precedence": ["bulk"], "References": ["<163714495450.16056.3566953095730878367@malur.postgresql.org> <c73a1746-0cd0-6bdd-6b23-3ae0b7c0c582@postgrespro.ru> <82ed3466-9855-ccd6-e2a3-a3a92166ff01@postgrespro.ru> <CALNJ-vSuzLxR+tyCiLA4s8sznn_M8aXdSVSYx-Sxb5E9jUG+8A@mail.gmail.com> <2289dab9-1f2b-f46a-a0da-3b61223a2897@postgrespro.ru> <CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7+pNn2OQcdk=4A@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:ab0:7515:0:b0:382:84b1:a2e1 with SMTP id m21-20020ab07515000000b0038284b1a2e1mr2288764uap.26.1657744445389; Wed, 13 Jul 2022 13:34:05 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/a351ab9a-337d-dda5-7dcf-5b35100b7447%40postgrespro.ru>"], "In-Reply-To": ["<CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7+pNn2OQcdk=4A@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410624@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"------------7WxvCKMAqqJ5mJQB6pfIPogv\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410624@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/simple; d=postgrespro.ru; s=mail; t=1657744426; bh=DrcPDvtiTdTIG8Vh7o+ilBH039k/CXdCAm/ffBI3EMU=; h=Date:Subject:To:Cc:References:From:In-Reply-To; b=HN0WyQ46UblDa2rncMPpTomE+UAeMW58zV1UWJ/MaJCVCmmMqmXkYyM6/CMRpjNv/ 7MB+HM6IxMkj58tDBlU0bHQrWqPllSMmJeTRFBQ5ThDzSLP/OUe57anRb0tubrNUA1 8vwawnLwkRMDat1JKgTKOQwRVZKIkleLQgG2lazo="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uObgJ2mzb5QrJL2AzuR7dNiZrzSYYtqER+Z/iGS3RcZYhhTBC+/YhlZBGovX+9J5ewlU+F"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:from :references:cc:to:content-language:subject:user-agent:mime-version :date:message-id:dkim-signature; bh=x1mxln4sqfh8OWwwLxAAvF/R9GobgzmB6gBQlrTvlAM=; b=bO4hR+Z7jPZpDxjo3raWEnlQsfINk1Cu2QXBTmI7NW+rlClKEjnTN2Afi25SXGxGL7 xfHZfYUQgY1MKIOmJq4LgvuLv8u9ehD5waJ5ieNhsda6bDWwSHP1/UqZ5kHSPVvm0hK8 2n4KDAPk50M5r6GUJRZRIpOy6Bb9GjLHvTOdZmuWNTBZjKPQAxh5dIu1ULTD19seLvUc 080maOuS7FLDTVe3qPS/zH0ebVb20WbGU8sQ0zCVApEIssx4Q/PtCCakW+XevSrHUbO7 9+3JbZcUHPbbLfZosJYpt8C0Efu+vv8Y4biMsu4Pj/IAjlwioPcZtUg/EtbtZJivcRv6 74aw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=HN0WyQ46; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410624@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410624@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=HN0WyQ46; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410624@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410624@lists.postgresql.org"]}	["<CALNJ-vQCCdWfFPVmKCSJXXAwDV6kQEetwm_a7+pNn2OQcdk=4A@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 21:25:02+00	tgl@sss.pgh.pa.us	Re: Bug: Reading from single byte character column type may cause out of bounds memory reads.	<2537430.1657747502@sss.pgh.pa.us>	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "Spyridon Dimitrios Agathos", "Address": "spyridon.dimitrios.agathos@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	31	6006	[]		Andrew Dunstan <andrew@dunslane.net> writes:\r\n> On 2022-07-13 We 11:11, Tom Lane wrote:\r\n>> I complained about this in [1], but that thread died off before reaching a\r\n>> clear consensus about exactly what to do.\r\n>> [1] https://www.postgresql.org/message-id/flat/2318797.1638558730%40sss.pgh.pa.us\r\n\r\n> Looks like the main controversy was about the output format. Make an\r\n> executive decision and pick one.\r\n\r\nDone, see other thread.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Aleksander Alekseev <aleksander@timescale.com>, Spyridon Dimitrios Agathos <spyridon.dimitrios.agathos@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Andrew Dunstan <andrew@dunslane.net>"], "Date": ["Wed, 13 Jul 2022 17:25:02 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Bug: Reading from single byte character column type may cause out of bounds memory reads."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657747510; cv=none; d=google.com; s=arc-20160816; b=dVPEKuPPcidtJTfwDxLBJtPmmsbzJwwRtESes8AWhrJsjf+9Nv2AbPyWnVmsv6mSU8 pu/BDy83q6/1HuGt81wRHhqkd7GB+L9sZvXCYiFb1Opj2doyDpwVNwhiKGAeMpJdM/p7 ICnisnragfo31X/8tVXsn1j8i8FsNgZ8Fj1/hiutz6bnoNvKkxiijDGM0hEZD7h8E/W8 uniEnxocZffK7ewwarSwwr0Gt6xDo61xTYKKPNeAocDrfeeCPnIlMXmlrYpZYiqMAu7v NXbkIa/lNU4rfx63Noix7D6WrqdfhQvQ9phH1qzp0YU2sw82TbxiDu3GkqZqrGu/FFjE fOtw=="], "Comments": ["In-reply-to Andrew Dunstan <andrew@dunslane.net> message dated \\"Wed, 13 Jul 2022 15:46:17 -0400\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp355672lfl; Wed, 13 Jul 2022 14:25:10 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m9-20020a5d64a9000000b0021b89b009a0si24735894wrp.686.2022.07.13.14.25.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 14:25:10 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410628@lists.postgresql.org>) id 1oBjr4-0003dM-0s for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 21:25:10 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBjr2-00035U-3C for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 21:25:08 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBjqz-0001aB-F8 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 21:25:07 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DLP2lU2537431; Wed, 13 Jul 2022 17:25:02 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2537429.1657747502.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2537430.1657747502@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<CAFM5RapGbBQm+dH=7K80HcvBvEWiV5Tm7N=NRaYURfm98YWc8A@mail.gmail.com> <CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com> <2231634.1657725094@sss.pgh.pa.us> <ddab080d-8c31-19af-e1e7-dba6c95d89a3@dunslane.net>"], "X-Received": ["by 2002:a5d:4145:0:b0:21d:68ab:3bf with SMTP id c5-20020a5d4145000000b0021d68ab03bfmr5022453wrq.641.1657747510575; Wed, 13 Jul 2022 14:25:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2537430.1657747502%40sss.pgh.pa.us>"], "In-Reply-To": ["<ddab080d-8c31-19af-e1e7-dba6c95d89a3@dunslane.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410628@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410628@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vnBsUv0iEOW7m42VWku+ks57F1wnBBwTkMf6Yzg21b2P1a+PKh81LiOMWNpiRkgy62Ssej"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=c8tf64Zx+a+3ym8ZFafBJ2njV7lm/F4XEjg72relgso=; b=x98Spk+JaupGM6zW3dUZx5GYRC4E4R+LR2OYoH9tzXNyBETpr/orj7DJsqAv6YLLo+ bo47J3qb+ZetTp30T8KgT0OQqAQYTrCSqyV7V6cIV8D7cXyBXPgDz79cS9mz7lm7eVn8 6ISfA5wfUR6/Frbc1XLPiB0EKPdveshas2U3/FJOgZd/o8mxMfJbqBt1wvYz9H+5VsT9 mWQmdCzxmo/BLQpTGH3C8ioFDAesa79yU63XuxP3y2+uQblJ1UJhRLI9wTfGkG2Vha20 cAlDUz9kc4lIHCpLSVuS4HUIO24uc0lThE8NOS4Kd4YPu0PMlz59HQm6go7X80QcTyNn I6Gg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410628@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410628@lists.postgresql.org"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410628@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410628@lists.postgresql.org"]}	["<ddab080d-8c31-19af-e1e7-dba6c95d89a3@dunslane.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 21:24:21+00	tgl@sss.pgh.pa.us	Re: The "char" type versus non-ASCII characters	<2537044.1657747461@sss.pgh.pa.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}, {"Name": "Chapman Flack", "Address": "chap@anastigmatix.net"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	32	11008	[]		I wrote:\r\n> Peter Eisentraut <peter.eisentraut@enterprisedb.com> writes:\r\n>> I think we could consider char to be a single-byte bytea and use the \r\n>> escape format of bytea for char.  That way there is some precedent and \r\n>> we don't add yet another encoding or escape format.\r\n\r\n> Do you want to take that as far as changing backslash to print\r\n> as '\\\\' ?\r\n\r\nThis came up again today [1], so here's a concrete proposal.\r\nLet's use \\ooo for high-bit-set chars, but keep backslash as just\r\nbackslash (so it's only semi-compatible with bytea).\r\n\r\n\t\t\tregards, tom lane\r\n\r\n[1] https://www.postgresql.org/message-id/CAFM5RapGbBQm%2BdH%3D7K80HcvBvEWiV5Tm7N%3DNRaYURfm98YWc8A%40mail.gmail.com\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Andrew Dunstan <andrew@dunslane.net>, Chapman Flack <chap@anastigmatix.net>, pgsql-hackers@lists.postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 17:24:21 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: The \\"char\\" type versus non-ASCII characters"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657747516; cv=none; d=google.com; s=arc-20160816; b=QRma/ELO8cG3rNvKUIQG0xpi5gZWW0o8Eot/uAxF+GUlE5GL08KD8M+nBy0fql3ALW n0aVG5AM4ZV2UrvSfUqmfdJwHPj2EZEe+dblq51YweCaBqn1yIBNepwQhjVRiNGH7ekn IK8wGLSPGhY4YONRclj6hdnwFnrHV+XiHHzSmtjLGw1LAO+7TJvsJ8ZpAZ+fn6vknnLV NZ+UfZRf05xL2z8dvvpPiIHx1P5iaELzgmvD1Ih3BFeWWQl+ylo7JaDcXEf2uC4c0udT 4H0BXppNhnnHYSbFdV0BScM+vZLMj3jLKMPT2wpb+tmfyh44qMkm+VOqldd4jVNW0fPj vV1Q=="], "Comments": ["In-reply-to Tom Lane <tgl@sss.pgh.pa.us> message dated \\"Thu, 09 Dec 2021 08:35:41 -0500\\""], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp355706lfl; Wed, 13 Jul 2022 14:25:16 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l4-20020a05600002a400b0021d8b60a5e2si21774923wry.340.2022.07.13.14.25.16 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 14:25:16 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410629@lists.postgresql.org>) id 1oBjrA-0006Ji-9v for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 21:25:16 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBjr8-0005S2-34 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 21:25:14 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBjr0-0002lJ-UR for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 21:25:13 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26DLOLdG2537045; Wed, 13 Jul 2022 17:24:21 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2536930.1657747419.0@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2537044.1657747461@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<2318797.1638558730@sss.pgh.pa.us> <c44b31d4-044a-0e45-1a98-995517b47df7@dunslane.net> <2320640.1638560531@sss.pgh.pa.us> <c2f8bd87-daab-9a67-74c6-35970b353508@dunslane.net> <2322653.1638562404@sss.pgh.pa.us> <00b43a6d-3274-7e80-d323-9ff3a8183559@enterprisedb.com> <3777943.1639056941@sss.pgh.pa.us>"], "X-Received": ["by 2002:a5d:54ca:0:b0:21d:6e3a:7da7 with SMTP id x10-20020a5d54ca000000b0021d6e3a7da7mr5035440wrv.231.1657747516609; Wed, 13 Jul 2022 14:25:16 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2537044.1657747461%40sss.pgh.pa.us>"], "In-Reply-To": ["<3777943.1639056941@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410629@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"----- =_aaaaaaaaaa0\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410629@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1ttn47Rz7tx/15mVO0gIQutCkeK1vrVah1DgLMF070JEkl7X4b+B+24KD8E8lhPKNS+dHv5"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=IeZv8ymZri1SqCy+q9CRL+2UZq+LyqgcJe4Beuyyzik=; b=RzEzcuC6a8/vkLg3Dw/BEk9Jwwg+C6QdswuPO2kwmzB/uweXQOIc4drXFFyKPoU3Pu sTPSmqxiEfLKLJgvXsYkwwEEXA8sa0fKOXiTb2CH+635ofRN7M+Zfev3Ot1fqIJ3UW9o PcOubVXmMUo3VzHjd2+DggZUCqxmO6j0Ru78yOdqORnKETk8wbIX69AfCL5b3me/oOl4 vc7Op0un7Jt5FPbXIZZ5giYECEdkhaIz0b+nqdN3DaA8V8+FXaavIy/2bonbe8XRXVC7 5oFg6SB60TwsiAuzJnXTwMa6QQsvrTo/p8SLzHUjoH6O7hLwFegE5Qzwa73QXlSz4r0f 39hw=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410629@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410629@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410629@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410629@lists.postgresql.org"]}	["<3777943.1639056941@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 22:23:42+00	pryzby@telsasoft.com	Re: proposal: Allocate work_mem From Pool	<20220713222342.GE18011@telsasoft.com>	[{"Name": "Joseph D Wagner", "Address": "joe@josephdwagner.info"}]	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	33	12688	[]		On Tue, Jul 12, 2022 at 08:49:10PM -0700, Joseph D Wagner wrote:\r\n> > > Before I try to answer that, I need to know how the scheduler works.\r\n> \r\n> > As I understand the term used, there is no scheduler inside Postgres\r\n> > for user connections -- they're handled by the OS kernel.\r\n> \r\n> Then, I'm probably using the wrong term. Right now, I have\r\n> max_worker_processes set to 16. What happens when query #17\r\n> wants some work done? What do you call the thing that handles\r\n> that? What is its algorithm for allocating work to the processes?\r\n> Or am I completely misunderstanding the role worker processes\r\n> play in execution?\r\n\r\nmax_connections limits the number of client connections (queries).\r\nBackground workers are a relatively new thing - they didn't exist until v9.3.\r\n\r\nThere is no scheduler, unless you run a connection pooler between the\r\napplication and the DB.  Which you should probably do, since you've set\r\nwork_mem measured in GB on a server with 10s of GB of RAM, and while using\r\npartitioning.\r\n\r\nhttps://www.postgresql.org/docs/current/runtime-config-connection.html#GUC-MAX-CONNECTIONS\r\n|max_connections (integer)\r\n|\r\n|    Determines the maximum number of concurrent connections to the database server. The default is typically 100 connections, but might be less if your kernel settings will not support it (as determined during initdb). This parameter can only be set at server start.\r\n\r\nhttps://www.postgresql.org/docs/current/runtime-config-resource.html#GUC-MAX-WORKER-PROCESSES\r\n|max_worker_processes (integer)\r\n|    Sets the maximum number of background processes that the system can support. This parameter can only be set at server start. The default is 8.\r\n|    When running a standby server, you must set this parameter to the same or higher value than on the primary server. Otherwise, queries will not be allowed in the standby server.\r\n|    When changing this value, consider also adjusting max_parallel_workers, max_parallel_maintenance_workers, and max_parallel_workers_per_gather.\r\n\r\nhttps://www.postgresql.org/docs/current/connect-estab.html\r\n|PostgreSQL implements a ‚Äúprocess per user‚Äù client/server model. In this model, every client process connects to exactly one backend process. As we do not know ahead of time how many connections will be made, we have to use a ‚Äúsupervisor process‚Äù that spawns a new backend process every time a connection is requested. This supervisor process is called postmaster and listens at a specified TCP/IP port for incoming connections. Whenever it detects a request for a connection, it spawns a new backend process. Those backend processes communicate with each other and with other processes of the instance using semaphores and shared memory to ensure data integrity throughout concurrent data access.\r\n|\r\n|The client process can be any program that understands the PostgreSQL protocol described in Chapter 53. Many clients are based on the C-language library libpq, but several independent implementations of the protocol exist, such as the Java JDBC driver.\r\n|\r\n|Once a connection is established, the client process can send a query to the backend process it's connected to. The query is transmitted using plain text, i.e., there is no parsing done in the client. The backend process parses the query, creates an execution plan, executes the plan, and returns the retrieved rows to the client by transmitting them over the established connection.\r\n\r\nhttps://www.postgresql.org/docs/current/tutorial-arch.html\r\n| The PostgreSQL server can handle multiple concurrent connections from clients. To achieve this it starts (‚Äúforks‚Äù) a new process for each connection. From that point on, the client and the new server process communicate without intervention by the original postgres process. Thus, the supervisor server process is always running, waiting for client connections, whereas client and associated server processes come and go. (All of this is of course invisible to the user. We only mention it here for completeness.)\r\n\r\nhttps://wiki.postgresql.org/wiki/FAQ#How_does_PostgreSQL_use_CPU_resources.3F\r\n|The PostgreSQL server is process-based (not threaded). Each database session connects to a single PostgreSQL operating system (OS) process. Multiple sessions are automatically spread across all available CPUs by the OS. The OS also uses CPUs to handle disk I/O and run other non-database tasks. Client applications can use threads, each of which connects to a separate database process. Since version 9.6, portions of some queries can be run in parallel, in separate OS processes, allowing use of multiple CPU cores. Parallel queries are enabled by default in version 10 (max_parallel_workers_per_gather), with additional parallelism expected in future releases. \r\n\r\nBTW, since this is amply documented, I have to point out that it's not on-topic\r\nfor the development list.\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["John Naylor <john.naylor@enterprisedb.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Joseph D Wagner <joe@josephdwagner.info>"], "Date": ["Wed, 13 Jul 2022 17:23:42 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: proposal: Allocate work_mem From Pool"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657751034; cv=none; d=google.com; s=arc-20160816; b=hxNPZr+yZ6OGQfx/0mV5K4/yEjLIVXc4DleQmhtl5z5p3mFqHlcu1lz04VGhRXtoI1 URbsKHMv96nLbcG38AQJV41mKslp95Wywnyk+18eSxMZ5bLYP0rDbWCROn41d3vADacC kVsNOayzXfmmEojVidqVbk7yBqO8oCCFHuaVyMrWrqK6Oa3u6cWo3mhl3zxA0df/pvD5 i/S7DekKqZVC+oCaW0aCqGMGvR+OmxJDk7UKFHhp7UTD34xcW9oUQ0CNKkW1jKZsiLC1 SUem79aAr6o6NxCTznEje1qyA5L9z3wqTGfXdZRUs7ePmUWCFgqBIBrLwp6E66dMmVw2 UuhQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp375524lfl; Wed, 13 Jul 2022 15:23:54 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [217.196.149.56]) by mx.google.com with ESMTPS id o9-20020a05600002c900b0021d7f6325e5si3813921wry.465.2022.07.13.15.23.54 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 15:23:54 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410634@lists.postgresql.org>) id 1oBklu-0005B9-B5 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 22:23:54 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBklp-0003ew-HM for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 22:23:49 +0000", "from mail-io1-xd33.google.com ([2607:f8b0:4864:20::d33]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBkll-00026C-Nj for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 22:23:48 +0000", "by mail-io1-xd33.google.com with SMTP id b17so1300130iof.4 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 15:23:45 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id l1-20020a056e0205c100b002dc01d3c73asm32065ils.72.2022.07.13.15.23.43 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Wed, 13 Jul 2022 15:23:43 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id BC089800DAB; Wed, 13 Jul 2022 17:23:42 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713222342.GE18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<005201d894d8$b0424710$10c6d530$@josephdwagner.info> <20220711043930.GR13040@telsasoft.com> <004601d895dd$ed4012e0$c7c038a0$@josephdwagner.info> <CAFBsxsH9KF8_9H5aczTPh5hFt4Leat_Xcnw=cqaiazwwzV_qwQ@mail.gmail.com> <1ac57119a27c557743bd5f3e24c0ef1c@josephdwagner.info>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a5d:4bc4:0:b0:21d:918c:b945 with SMTP id l4-20020a5d4bc4000000b0021d918cb945mr5096995wrt.287.1657751034679; Wed, 13 Jul 2022 15:23:54 -0700 (PDT)", "by 2002:a05:6602:1491:b0:67b:74da:af7a with SMTP id a17-20020a056602149100b0067b74daaf7amr2900805iow.168.1657751024289; Wed, 13 Jul 2022 15:23:44 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713222342.GE18011%40telsasoft.com>"], "In-Reply-To": ["<1ac57119a27c557743bd5f3e24c0ef1c@josephdwagner.info>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410634@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410634@lists.postgresql.org designates 217.196.149.56 as permitted sender) client-ip=217.196.149.56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:content-transfer-encoding:in-reply-to :user-agent; bh=4N/raZrvKpqWpBKWw1niWMPUF9aPCpCreoHR8J4VYVY=; b=s8S2PEu/AbdoOsx60ImezRm8dC9cgkvcct7/XE/kWyYmXtjlLgT5Jou1x2Q5je5W63 zwNd/s8jhYcROk/dACTnSHDlfYH0owz981FwOvaR23b+yi4rmY9yJwwNyioKldz7ue8n dl5N3ILGPWVNpqz/SaiFCjXbeyFKX2BaqMcfON8ph39Stb0GtK6mk1IghWr3Rlcul7h9 DtOT4ApnV62tMjOPlBniJ3bgJidBYLJXIKn3/lyb0nRwE4azGGSBxNf5B91+Wl7HdXeT lBonw6NftIm7bV+yj6JZ0gf9NzY1P23RIlLZVRUMmcSQrgEPVNfHQt7+O8pNAT0fOJUG A2uw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9VmGc49bXypNdKsath/X4u/zQ7gX3qNYRFb83Tr5GweSR+0uzf n6XrPJDq3Wom5m+2ibfdvWSD3Q=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uViHRSEJAnBxS74KhbdkdvRKTDdo6xvnRjjvr6UYwlbdL3tQ2aHeecjaotxYfHMeWxA7IN"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date:dkim-signature; bh=4N/raZrvKpqWpBKWw1niWMPUF9aPCpCreoHR8J4VYVY=; b=zdW0VSuzO/0xZsk3slDSLKUQnHIGAOp9V+MXBRauTjI/k5MErxEdJCOemesStDAm9B VOdQNYm56nhUQTHy5py5t5HDJ0uKEtlunhWxqpSscbu+BqviPeOSoIhHJ5qX7qBCV+2B hYO8WorgxDzgxVCykEJdiczb7fLKeS6nt9SGYVNXtcKQWaYWRM3q+pM1jx0K4Rf6tECx 1CsfGjHq//3B3gCZOY9n8fIUlcMHg4s2GEfDMYe6ZaN9k574oP4tvarfsAKNlo/p8PZ7 jfsFacRyRDO1WiImKhL6Hf3S8RVXEXaR2RUFOb6V+zYEvc4AKzF9vFkDvCbABA3KI3jo QlEQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=\\"s8S2PEu/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410634@lists.postgresql.org designates 217.196.149.56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410634@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:content-transfer-encoding :in-reply-to:user-agent; bh=4N/raZrvKpqWpBKWw1niWMPUF9aPCpCreoHR8J4VYVY=; b=IUO68Vzf3yv2u+CgBOZ2HbH7XVyZe9ifsVfsu19hj0dXI0GlVCsYHM35hGczqkpiib l+sFtOeKfanrwU2s83HtOwqOWC2Q7x6uaR5Ll4nwG7U/MbOxzkgxh5qsLFVWn1U2vCc6 Qe2CwwDuZENudJEKIGPZcRYHe32/41DIXe91nhU1lmZVajZtP83qOXfpC+lNF6c9sgBg yJBdJZ7wVhZJvYAQLkZKZhN3uqmP0aFfd5mJn6p/P5W2ETfpFZoOQJ8n/VBoi2uyQGR8 /3FTAUCCM9pIQhupJEPkiDilJ8/lwhvvXkYcaAPlAzrHvzdpaZ3WPFl6CVSTROO4pzjG M7WQ=="], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=\\"s8S2PEu/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410634@lists.postgresql.org designates 217.196.149.56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410634@lists.postgresql.org"]}	["<1ac57119a27c557743bd5f3e24c0ef1c@josephdwagner.info>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 23:03:48+00	smithpb2250@gmail.com	Re: Refactor to make use of a common function for GetSubscriptionRelations and GetSubscriptionNotReadyRelations.	<CAHut+PtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ@mail.gmail.com>	[{"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	34	8636	[]		On Wed, Jul 13, 2022 at 7:55 PM vignesh C <vignesh21@gmail.com> wrote:\r\n>\r\n> On Wed, Jul 13, 2022 at 1:13 PM Michael Paquier <michael@paquier.xyz> wrote:\r\n> >\r\n> > On Wed, Jul 13, 2022 at 12:22:06PM +0530, vignesh C wrote:\r\n> > > Most of the code is common between GetSubscriptionRelations and\r\n> > > GetSubscriptionNotReadyRelations. Added a parameter to\r\n> > > GetSubscriptionRelations which could provide the same functionality as\r\n> > > the existing GetSubscriptionRelations and\r\n> > > GetSubscriptionNotReadyRelations. Attached patch has the changes for\r\n> > > the same. Thoughts?\r\n> >\r\n> > Right.  Using all_rels to mean that we'd filter relations that are not\r\n> > ready is a bit confusing, though.  Perhaps this could use a bitmask as\r\n> > argument.\r\n>\r\n> The attached v2 patch has the modified version which includes the\r\n> changes to make the argument as bitmask.\r\n>\r\n\r\nBy using a bitmask I think there is an implication that the flags can\r\nbe combined...\r\n\r\nPerhaps it is not a problem today, but later you may want more flags. e.g.\r\n#define SUBSCRIPTION_REL_STATE_READY 0x02 /* READY relations */\r\n\r\nthen the bitmask idea falls apart because IIUC you have no intentions\r\nto permit things like:\r\n(SUBSCRIPTION_REL_STATE_NOT_READY | SUBSCRIPTION_REL_STATE_READY)\r\n\r\nIMO using an enum might be a better choice for that parameter.\r\n\r\n------\r\nKind Regards,\r\nPeter Smith.\r\nFujitsu Australia\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["vignesh C <vignesh21@gmail.com>"], "Date": ["Thu, 14 Jul 2022 09:03:48 +1000"], "From": ["Peter Smith <smithpb2250@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Refactor to make use of a common function for GetSubscriptionRelations and GetSubscriptionNotReadyRelations."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657753451; cv=none; d=google.com; s=arc-20160816; b=mtOyo0xNiUwjTPoE4mW1uCVsQ1trkGqBxHKr1+/aFgByeYqVPPE2pn0Jeu/Wl3Cv4e nPy6/XoxEcmFfe60eT4vE8C3s8lCMZ4ABqAEOrtWkumgFW/OzrINnIEplqk/h9KeRx66 d3xm9nc8RhTfoLFlhSkEavfLnQBDhj8118RordgAMqVnLQQ5Val80YzoNApuTr3b5KrG in7r9DhYabmnmAazEu7aehBXvqo+vUBV15b5wlCaAES4szCRpNRxLtp95VG278YONJOT 9NnIbLEOyhCzMrHjrDEVO6DVdhtFoXxqlUpGtdOAdJiqzU34Q0SFJxwVbz8pRLl9T4YS zM6g=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp389702lfl; Wed, 13 Jul 2022 16:04:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 15-20020a056000156f00b0021da453b894si23715593wrz.130.2022.07.13.16.04.11 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 16:04:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410639@lists.postgresql.org>) id 1oBlOs-00031K-SJ for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 23:04:10 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <smithpb2250@gmail.com>) id 1oBlOq-0002dI-T0 for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:04:08 +0000", "from mail-oo1-xc32.google.com ([2607:f8b0:4864:20::c32]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <smithpb2250@gmail.com>) id 1oBlOo-0003qU-Lq for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:04:08 +0000", "by mail-oo1-xc32.google.com with SMTP id n16-20020a4a9550000000b0043568f1343bso49757ooi.3 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 16:04:06 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAHut+PtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALDaNm0eW-9g4G_EzHebnFT5zZoasWCS_EzZQ5BgnLZny9S=pg@mail.gmail.com> <Ys53oZ75RF3RxKb0@paquier.xyz> <CALDaNm266bU_RxkbM49pHuxPmd7NP3vHCXaeDSzCPDFWAoBOJg@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:4f83:b0:3a1:7310:62e7 with SMTP id n3-20020a05600c4f8300b003a1731062e7mr6280627wmq.84.1657753451353; Wed, 13 Jul 2022 16:04:11 -0700 (PDT)", "by 2002:a4a:5107:0:b0:41b:873e:895f with SMTP id s7-20020a4a5107000000b0041b873e895fmr2110097ooa.22.1657753444832; Wed, 13 Jul 2022 16:04:04 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAHut%2BPtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ%40mail.gmail.com>"], "In-Reply-To": ["<CALDaNm266bU_RxkbM49pHuxPmd7NP3vHCXaeDSzCPDFWAoBOJg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410639@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410639@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=VF1Fu0Sl+HrxO8N5XRVdN0b+9YyP2aZLDDbw8xw6sgM=; b=PYb33xiCVFyR9aiSiGT/MjBLk1+CcrdZC3UMTZQqxYx5/3K2yQ5lNNlOpqYhEHuyaT xp96XT623f28EeLM5KNHnD41Ec91j1Gwr7AQUJ5f2/lX4ApyJvNxviNsfuUWu23h7ire QuoEyE5Fz98b8Ye+ONZIWbLUBWL553y7cFwFM1EVQLu3Gi9eA04BiB+87Nujt6MGn2zR 53gU8l6L8Q9VzdrWEgwbJ0jMCO+ybqb+tJvTCqZJS9c1libMuiUO/CXPP8FmF/acfiTM iK4+dVGW8r6/+ZZnzOaN2U4F/3xxlYWLo608ru7fgbjG3WU+upTKTLt6EUpaDcmj9q1t /tzw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/pq0QWrOw5D4jqOEp1Z/GKs3uEkNWNIpVCQOHXqxj9DMq6OMrM xCIc75S+Dezj/TwXQHF1qp7RibSiq0ku9LcEe7I="], "X-Google-Smtp-Source": ["AGRyM1uAcDt/Yf3GKog8kXWEvz+l6vR62FBLA/Er0j6B9bKxykKUG3XbHbcIw38on0DwFDtXKqEq"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=VF1Fu0Sl+HrxO8N5XRVdN0b+9YyP2aZLDDbw8xw6sgM=; b=CaCzFUoLXTmrB01jBDOikJLIQfZ8OrUG+LRzulQ0jim8De822nuXNRzgoud63PhNLZ qBzZV4DAJsOzXnF8EDBrWaY8aZgTvNZJDF/+49836El/Sy41PUUimGMH3qVsZZHB7lRR +jSe4rFL3u8+IVzT0/RWA6NsXtCGKATJ/ZEqcEwztZyPRGqbRIUp2qzDyZqiFPgaWeCv ScJNRM3f09XWIbnrC4tU0dD2lDvF+S/Lyjf1x34pe58wL+dcUNu/hd0mHXXK069mnt5R dbEdd6nTgjUIN7kT1KOAamTO9adWoOTXkpfF1IMPOBpV0VCCyTXU22wnWLmeY33ImAAI 1TAQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=PYb33xiC; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410639@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410639@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=VF1Fu0Sl+HrxO8N5XRVdN0b+9YyP2aZLDDbw8xw6sgM=; b=dnObV/MZa1xuPKPF2TNyAQe8QBmE6KcgT4oB/Z8dZmHSChrSDh6eaRfUN/5c6OZxJT evCgJALIgSLU81RY9rQxLbyuY8ef6Wxk1kTOjXVhbnmwhFemRBplYn5qwnKpAHsVXm8h 007neSEjgF29x/Cn6ED8/n+sq2boW4rexzRaYvNvH1y8PB9ARHjLWYTYN/nU5lXIJEl4 mpG2pk2EgX6Lju2ROZOsN85lkpCum8ja/8YhgLZSZoFOF148BlbVzxJfGbK1X27VzMYR IoHC+xV/RailTUaDDtHneG4+SnimCuJz54b4vKrSuRVZAHBORsEK5lyGQZrLVEHrg2RJ TRXQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=PYb33xiC; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410639@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410639@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CALDaNm266bU_RxkbM49pHuxPmd7NP3vHCXaeDSzCPDFWAoBOJg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 23:39:58+00	michael@paquier.xyz	Re: Add --{no-,}bypassrls flags to createuser	<Ys9XzifUomZsfkox@paquier.xyz>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	[{"Name": "Shinoda, Noriyoshi (PN Japan FSIP)", "Address": "noriyoshi.shinoda@hpe.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Shinya11.Kato@oss.nttdata.com", "Address": "Shinya11.Kato@oss.nttdata.com"}, {"Name": "przemyslaw@sztoch.pl", "Address": "przemyslaw@sztoch.pl"}, {"Name": "david.g.johnston@gmail.com", "Address": "david.g.johnston@gmail.com"}, {"Name": "robertmhaas@gmail.com", "Address": "robertmhaas@gmail.com"}, {"Name": "daniel@yesql.se", "Address": "daniel@yesql.se"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	35	10773	[]		On Wed, Jul 13, 2022 at 11:38:03AM -0700, Nathan Bossart wrote:\r\n> On Wed, Jul 13, 2022 at 08:14:28AM +0000, Shinoda, Noriyoshi (PN Japan FSIP) wrote:\r\n>> The attached small patch fixes the message in "createuser --help"\r\n>> command. The patch has changed to specify a time stamp for the\r\n>> --valid-for option. I don't think the SGML description needs to be\r\n>> modified.\r\n\r\nThanks, Shinoda-san.  Fixed.\r\n\r\n> Good catch.  Apart from a nitpick about the indentation, your patch looks\r\n> reasonable to me.\r\n\r\nFWIW, one can check that with a simple `git diff --check` or similar\r\nto see what was going wrong here.  This simple trick allows me to find\r\nquickly formatting issues in any patch posted.\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["\\"Shinoda, Noriyoshi (PN Japan FSIP)\\" <noriyoshi.shinoda@hpe.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Shinya11.Kato@oss.nttdata.com\\" <Shinya11.Kato@oss.nttdata.com>, \\"przemyslaw@sztoch.pl\\" <przemyslaw@sztoch.pl>, \\"david.g.johnston@gmail.com\\" <david.g.johnston@gmail.com>, \\"robertmhaas@gmail.com\\" <robertmhaas@gmail.com>, \\"daniel@yesql.se\\" <daniel@yesql.se>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Nathan Bossart <nathandbossart@gmail.com>"], "Date": ["Thu, 14 Jul 2022 08:39:58 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add --{no-,}bypassrls flags to createuser"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657755614; cv=none; d=google.com; s=arc-20160816; b=ror9IzQBdZGHVfrxW7bjQViiR/fsgcWB+7zUVR1mIjqaC6fM6nh5gHhzlybvKlYf01 IkQc/i7I/BdNUAFcEHw7YcYFxwEJ7aNpBZuKBlmicx/s5mm9JDS60hA6xxMZ4tGku88w UFQg71l9KVXnzbGIveu38ZIcCJ4HgLnG6ZVPmspagTHDHCgjco3sgXpusKBFqKCToQdj VwZ5WMO1T3tTHXn0ouLAosEc7MPj64LiopYrL8bUBWEV57LyzkUDbFbVwPumB0ZkcYQM DNyzty6SBSP3tYWrsvULfcDnxb8AZkf010gyRf/sgKxEedR5kFVwlmXt+CHtgGbDc0kF JuzA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp404519lfl; Wed, 13 Jul 2022 16:40:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id s23-20020adf9797000000b0021d692956d5si15131924wrb.212.2022.07.13.16.40.13 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 16:40:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410642@lists.postgresql.org>) id 1oBlxl-0007wO-C6 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 23:40:13 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBlxi-0007U2-4X for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:40:11 +0000", "from out1-smtp.messagingengine.com ([66.111.4.25]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBlxf-0002cm-Id for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 23:40:09 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id B92505C00D4; Wed, 13 Jul 2022 19:40:05 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute5.internal (MEProxy); Wed, 13 Jul 2022 19:40:05 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 19:40:02 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<Ys9XzifUomZsfkox@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<20220525.110752.305692011781436338.horikyota.ntt@gmail.com> <Yo2m7Oip47raXzfT@paquier.xyz> <6a25c0fec85c61c0bb93ab4819fdd619@oss.nttdata.com> <20220526.164746.1821317049233715341.horikyota.ntt@gmail.com> <Ys47HiYLRj2XdBTq@paquier.xyz> <DM4PR84MB1734A6CE3839A68B59BEA599EE899@DM4PR84MB1734.NAMPRD84.PROD.OUTLOOK.COM> <20220713183803.GB3117671@nathanxps13>"], "X-Me-Proxy": ["<xmx:1FfPYlO4Dy96m3AaekwRzNKV8viCeN2U4s2U5JGpNFzUaM4h0Ao-dA> <xmx:1FfPYq_RE0zU0pZTaMo6potS6h9YP6bFTrUsVvMHR_6-fMPOyxGtAA> <xmx:1FfPYtUdDsPgDOgMQFM0Eddp-SvfNR5UKBVxXTqYlQqOag-J7xCTYA> <xmx:1VfPYvO0YP6uajR1c1Qz9868O0QNTLoLHnMH_on1cOIbuMKCvR_0OA>"], "X-Received": ["by 2002:a05:600c:34ce:b0:3a0:3b4b:9022 with SMTP id d14-20020a05600c34ce00b003a03b4b9022mr6152724wmq.66.1657755614174; Wed, 13 Jul 2022 16:40:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/Ys9XzifUomZsfkox%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<20220713183803.GB3117671@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410642@lists.postgresql.org>"], "X-Me-Sender": ["<xms:1FfPYqtY1NxHZiIKiMKllz2QRBr1Mg18PANZYuHeyrqyZT5qOl--QA> <xme:1FfPYvd-rR3hikT-HGgCb7HVYJvEfHZ7wn1afBfElyumldcUXFCFrqSKTn8YGCJ7q Kwrh09-5AKd4IRtBg>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"4x4jA7MkZx2DJuAl\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410642@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:1FfPYlxRBbgIAFbR3YWIbnBJYnknq-Ak6S659c7MWI-kL2rKSntwdHLiFuOMZze3pk-4nTz-hsQobdqEEdudOWfiSW4>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657755605; x=1657842005; bh=mcaFPqHwvp rAhC0NvQ+JlfDBi4ylEoCxXeRT4eCEw5A=; b=EBSAGy/6vDm/lA2cYFWu8qvgRb SsJYmIyH4i5N26sdSRKEZZa6u00kaJ6gnMLRpvmHeUYG7PEJDN4n5ApsHYD8onhI iTlrOQMthJAaPc//e8kir8vyYujgjHr333ZhRYovc5vqUy0oNZPbO1NCHKbAtyc8 +0iIPE05BmOnZ33+ueOfQMMjL86+rSk+6mQh3CLgVMt35bl9Nv0LrZmUL0Y8HnSv rcH+9M851xfq37dvzX9QmAfGk2zU15s5O916MgBD2/hS3/D2Z+NYZop7ZmGjeukt tcGKucWNmpvm8LjTLvyHLQaZ/eAh5h3Ncnp4/Wl+4wB75qGP33lLyTfcPtoQ==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657755605; x=1657842005; bh=mcaFPqHwvprAhC0NvQ+JlfDBi4yl EoCxXeRT4eCEw5A=; b=VBCKv8JVuqqZlHJjtXxa5ziWHV6QR+288sk6z3gcEbVL xCxwyQB5xqXoNzkBLiDVMdy1ll24YZyZCuon/z7dKEPPQb7S6nVHaBHn/DdybTUn Q9vXJ6X5A98jik0nmdoEZ+8cPVAiO1kxNMH3v560AV1bIHyCMzqXaGqoSqHwtwRt GJNWMjcVZD3t7BwFwvv83ySg+GD0YA4orPAQyL7sxcLYXwz0C5vUQVMPVLZlJzwb JGOFO0R9XtwuD7ssx8aQ6nB+QrCA0ohxsL5de2xT+RSYz/SokKewNhRbHAy4qrKU WeGWUBtXCHzbDvoCh4S7YCP4VNhTRzpiumudpLg3pA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedgvdegucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdljedtmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tddvnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepteelieefudffhffhtdetleeg geegfffhkeeuveetiefgudduvedutefggeeivdejnecuvehluhhsthgvrhfuihiivgeptd enucfrrghrrghmpehmrghilhhfrhhomhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiih ii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1tAcJp4i45clF1agJeiOm/0HjyomLega952jAKH34mV93NmbtekiVrCSiSH0JJKiLBgxg5z"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=mcaFPqHwvprAhC0NvQ+JlfDBi4ylEoCxXeRT4eCEw5A=; b=uvL7QSKbhGWNWRusPS9OjgEAs5B7QCoioDOUXsjqb0lr2CX0vpcTMLedZQ+0cP/DeM 7TjErUTXX6GLteSt8pDoqS33SbooGJ3Iba5nrwZCTafAiIDbHmH21XyVVZUfDh/AsuBj YIQUT1IrhfPN/kvtp+o/9Q7MdbANAsrJsFRbtLV3D1BkcFwg6im+fWe1L44XAYeqwvT1 SLH/hhQRE7rce8OUFu4y59VwpKksTzQRUAoNSD7tku0GQnnw/l9qlv3aefHRXOOt1WYa UZXcHsYlRUgChLGeg/wXPRWSnvW7WlwJ6NVtGyHgHMnyc6gZyIJDTG0vF9/PPniEuQ4y iG6g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=\\"EBSAGy/6\\"; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=VBCKv8JV; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410642@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410642@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=\\"EBSAGy/6\\"; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=VBCKv8JV; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410642@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410642@lists.postgresql.org"]}	["<20220713183803.GB3117671@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 23:49:00+00	andres@anarazel.de	Re: fix stats_fetch_consistency value in postgresql.conf.sample	<20220713234900.z4rniuaerkq34s4v@awork3.anarazel.de>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "nathandbossart@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	37	9594	[]		Hi,\r\n\r\nOn 2022-07-14 08:46:02 +0900, Michael Paquier wrote:\r\n> On Wed, Jul 13, 2022 at 12:30:00PM -0500, Justin Pryzby wrote:\r\n> > How did you make this list ?  Was it by excluding things that failed for you ?\r\n> > \r\n> > cfbot is currently failing due to io_concurrency on windows.\r\n> > I think there are more GUC which should be included here.\r\n> > \r\n> > http://cfbot.cputube.org/kyotaro-horiguchi.html\r\n> \r\n> FWIW, I am not really a fan of making this test depend on a hardcoded\r\n> list of GUCs.\r\n\r\nI wonder if we should add flags indicating platform dependency etc to guc.c?\r\nThat should allow to remove most of them?\r\n\r\n\r\n> The design strength of the existing test is that we\r\n> don't have such a dependency now, making less to think about in terms\r\n> of maintenance in the long-term, even if this is now run\r\n> automatically.\r\n\r\nThere's no existing test for things covered by these exceptions, unless I am\r\nmissing something?\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, nathandbossart@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Wed, 13 Jul 2022 16:49:00 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: fix stats_fetch_consistency value in postgresql.conf.sample"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657756151; cv=none; d=google.com; s=arc-20160816; b=kwY0+nOQnhYXsZ9d8G6DCJ+0TRZxGTHZej0z0TDj9trSuuKsrisGkucqeNoU9uWWZn 2myMRwaTG5pBuhOGi/E4VF7BuyC9ytO95/oEiZhNj2qzto/7rRjnxqZ2wbRnUXJMzX58 TDZyH56Z9T2WLG/qaayLTAlPOuJCgWe/4IUGMpivb5CLIOVuSMer3ev5BtQhykd5NbXU 2e/wB1G8EGCrEzP0XxdEXVfihnbBi2rcKpzhbqTCRjbIFlWD02tOpRvPuCG+mEARRajZ gA8P2QX37hZGgzAWdhEuuhPbJaadqrRGXRqYrlKGJIBgHe/Z5bSoSCe62IApunfzB6fA s+OA=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp407033lfl; Wed, 13 Jul 2022 16:49:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c5-20020a7bc005000000b003974c1f9fb5si101238wmb.234.2022.07.13.16.49.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 16:49:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410644@lists.postgresql.org>) id 1oBm6Q-0002n5-O0 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 23:49:10 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oBm6O-0002JR-5H for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:49:08 +0000", "from out1-smtp.messagingengine.com ([66.111.4.25]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oBm6K-0004MH-HP for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 23:49:07 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id 8837C5C00D9; Wed, 13 Jul 2022 19:49:02 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute5.internal (MEProxy); Wed, 13 Jul 2022 19:49:02 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 19:49:02 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713234900.z4rniuaerkq34s4v@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<20220616132306.GD29853@telsasoft.com> <20220617.094358.2201653243066915172.horikyota.ntt@gmail.com> <20220622230710.r2m4ex5tlf6mveyh@alap3.anarazel.de> <20220630.173801.662386227537019720.horikyota.ntt@gmail.com> <20220713173000.GD18011@telsasoft.com> <Ys9ZOk49mruHPn4q@paquier.xyz>"], "X-Me-Proxy": ["<xmx:7lnPYv7wN3C_3pmZoSwJRtBkFc7fqnZEYrzWxlmy_O_DLFavXWFd2w> <xmx:7lnPYn6UwbStFwsMILY0kxHr0hQ2rfxLPkT0mEMteR8UFTFU0ew1CA> <xmx:7lnPYvgJ5Iq0yA8gj9xTEPG7vZoEJxYWRvWO9w7x5kk_KWoyy4cfdg> <xmx:7lnPYpm2Fuj4N3QxPJn0dAsBu2Yv34NxiOBoqqFCml1QHyhKlPU-tw>"], "X-Received": ["by 2002:a05:600c:190d:b0:3a0:585a:256 with SMTP id j13-20020a05600c190d00b003a0585a0256mr5773683wmq.54.1657756151051; Wed, 13 Jul 2022 16:49:11 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713234900.z4rniuaerkq34s4v%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<Ys9ZOk49mruHPn4q@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410644@lists.postgresql.org>"], "X-Me-Sender": ["<xms:7lnPYoocosl14EYJLQZeHccXVc58pbU3xcDtrduxPYBtTc-im9xvrg> <xme:7lnPYuo-2ML8ZarnuuOgz4uawk_8Bz9lo6W_iFu7Vdd2fJeekijF51ozPJH3rhFEk eZLH08lkPGM1iKUyQ>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410644@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:7lnPYtNdsSFwdbxCeQTqMUNJYSvcQYykunNonq-X9VgQmZfmM3eyatKcqjdY3SK-EN58_CnAp06wWiYADPdmtczx70-_LMNIOK9szQ0c_FnSRQd0nGy9RvxZoBJx>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657756142; x=1657842542; bh=Uv2YRkWAcj NeAHz246dcy71VoPxABRA/IlnXKBJYBVg=; b=n8Sy9YD5W+nNdGLAIXbLxA5pk1 /Ev8/Fvrz2lrLYA/TzQsoDZe0CzQDfka0eYMc4k6v6knCCiwAlXBj4FHQBv8r1s7 F4P9g05HhkT+wPlKjnzqsqMQ6o/D4A+jd3pI3fUS+W7DJ2+fGB5XgeVehiYs6F3v JWkguO9b440/Tru9oTvPy09PkkVPfbeJJHxPImzBpk1SCgRS+X+lBXxJNFwLpKF+ EqQxLHTo1t7KRq9Im824MYALJyXg9ETU7XpIUZHKAhFiNVfAHxZHBsQfYX9LAo3p UiXPKRXilw//X5I1lwDWxqKNdITXQMOesfkrf+eqP7TV6IK34fL95bD1Ge+g==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657756142; x=1657842542; bh=Uv2YRkWAcjNeAHz246dcy71VoPxA BRA/IlnXKBJYBVg=; b=i7UVsORfHXOKgSHRc6mqoBQMzvnDZRGVOSy+HGbDCfJG Lsk2bxatnv6swTcf82mnPXQT65KLSvBHv2T4SMaatp0dhEsXVhrn8lYWptDJsAcv h442i7oG/xgzePdBWsKPgHxqziw8uVx4WRIZu6WUM2mApXP3nC9h1wcoUiCECDLT Vp7RiRbscEK0++Sx383SCKgDUD3DqwCgZeUQt6ZtJdatbAjsJrAYwZNu7XVAXnvl Eul5CZxxoqmeNJ20oM0vGdv6fkZ+qZ9jVe2H+3neMh8/RNDyKVggFoolDlFGZfad 4xbjShCv/GuUifcGRsWuXNJfWHH/OCib0mrT9axauw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedgvdejucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkfhggtggujgesthdtredttddtvdenucfhrhhomheptehnughr vghsucfhrhgvuhhnugcuoegrnhgurhgvshesrghnrghrrgiivghlrdguvgeqnecuggftrf grthhtvghrnhepheehheejjeehvddttdettefhheejvefgieduheetvdetjefgteduvdff gfejgefhnecuffhomhgrihhnpegtphhuthhusggvrdhorhhgnecuvehluhhsthgvrhfuih iivgeptdenucfrrghrrghmpehmrghilhhfrhhomheprghnughrvghssegrnhgrrhgriigv lhdruggv"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vPpNCXsHwRrGwJdUL9Hb6jl6D9ix+TeXr6pykPgIpefgpmeDfNnRA8EU90br5ayAf1MAae"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=Uv2YRkWAcjNeAHz246dcy71VoPxABRA/IlnXKBJYBVg=; b=MUJ2ahOEO+H1R4F7zmBgjlns9XUhDRtd6K+jlV+4ClLicCLVdsgMGDLJr3Ar5V9bLl DWrJS3GOQ3IVK0yPg7ACY343XPO1D+Nn9PLzPB+vpBXa7SnxkEaK4vTR4bQKAKG8D8W8 RBKuAn9aunTuBMEN21ICh7iUoNLUe77UESK/VL/Mr4G+2Ot/spVzoi8hPxV4NIgxRPG3 yKkWSwQo2AOg+FaONxXUAr2qmJ5GSpPPCLpVR9Eg18C7aVzVfTvRogR+2tEBbxMo1cyX gGkqWbb8bGrVoxq6mJYBJyFRHoHp1U7BWVks2/rdVGITVmZqmfdLwmQArm3cRMckUz8m yYPw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=n8Sy9YD5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=i7UVsORf; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410644@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410644@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=n8Sy9YD5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=i7UVsORf; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410644@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410644@lists.postgresql.org"]}	["<Ys9ZOk49mruHPn4q@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 23:46:02+00	michael@paquier.xyz	Re: fix stats_fetch_consistency value in postgresql.conf.sample	<Ys9ZOk49mruHPn4q@paquier.xyz>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "andres@anarazel.de"}, {"Name": "", "Address": "nathandbossart@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	36	10359	[]		On Wed, Jul 13, 2022 at 12:30:00PM -0500, Justin Pryzby wrote:\r\n> How did you make this list ?  Was it by excluding things that failed for you ?\r\n> \r\n> cfbot is currently failing due to io_concurrency on windows.\r\n> I think there are more GUC which should be included here.\r\n> \r\n> http://cfbot.cputube.org/kyotaro-horiguchi.html\r\n\r\nFWIW, I am not really a fan of making this test depend on a hardcoded\r\nlist of GUCs.  The design strength of the existing test is that we\r\ndon't have such a dependency now, making less to think about in terms\r\nof maintenance in the long-term, even if this is now run\r\nautomatically.\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, andres@anarazel.de, nathandbossart@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Thu, 14 Jul 2022 08:46:02 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: fix stats_fetch_consistency value in postgresql.conf.sample"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657755972; cv=none; d=google.com; s=arc-20160816; b=Lxip1Bak0fmwLPJknwYqmTHyRdzasZY22LG+2Cvh/uCdVWh4w2EDlKUEAFNr86/mdJ HVtxCvqPl5miNGXgXGZni0u0wQVq2Y4SdUx4GISklWsTQbiGTtBWO3HWA7dkbLlqfLxL DOc3cJRHBPhg3iCwFLhyVGDggWcy0BWwKKZwP7elYJqjuHpWhWfBPv6vYxRhBkwRob+e I1UFakkRWP9n63qZ6wpgnLhjL13LTGh81AHzIsT6+4Z66iI2RzBaAgOPSWFyrQ0nZopT U7PLVMrrksySRVY4EYgqf3vnUu3ymHkoxWWfQilvyh9tuCoJhfT+X6Z0LyY+6AM5+7Wm StCw=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp406190lfl; Wed, 13 Jul 2022 16:46:12 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u1-20020adfae41000000b0021dac9cad27si8422695wrd.39.2022.07.13.16.46.12 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 16:46:12 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410643@lists.postgresql.org>) id 1oBm3Y-0006Yi-73 for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 23:46:12 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBm3W-0005yy-7i for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:46:10 +0000", "from out1-smtp.messagingengine.com ([66.111.4.25]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBm3U-0002h8-0j for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 23:46:09 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id 5E0FF5C00D3; Wed, 13 Jul 2022 19:46:07 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute2.internal (MEProxy); Wed, 13 Jul 2022 19:46:07 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 19:46:05 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<Ys9ZOk49mruHPn4q@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<20220616132306.GD29853@telsasoft.com> <20220617.094358.2201653243066915172.horikyota.ntt@gmail.com> <20220622230710.r2m4ex5tlf6mveyh@alap3.anarazel.de> <20220630.173801.662386227537019720.horikyota.ntt@gmail.com> <20220713173000.GD18011@telsasoft.com>"], "X-Me-Proxy": ["<xmx:P1nPYrXzrsvUtjuKfib9JHJlj5KdOmoJTR0v29izM0r8HbwYqjgfmA> <xmx:P1nPYmkmksWTRsEKuvHaoFtib1e3uS2yhtDvjDvoUyRrXSZXekBRzw> <xmx:P1nPYgdNb2WYWRy7XHpp7x-An98tFPb5zY_VktGmDpcPGoXl81pJ9w> <xmx:P1nPYois25T7afgUZNq316_oqwpgD4x4UJD2skYoSaZzfP7DS2XVow>"], "X-Received": ["by 2002:a05:600c:a02:b0:39c:97cc:82e3 with SMTP id z2-20020a05600c0a0200b0039c97cc82e3mr12446113wmp.97.1657755972599; Wed, 13 Jul 2022 16:46:12 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/Ys9ZOk49mruHPn4q%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<20220713173000.GD18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410643@lists.postgresql.org>"], "X-Me-Sender": ["<xms:P1nPYsU1EIU4nn8btcA1uvzC1ekw-bZa7uflVqBcPYQgw7F4z0cCXw> <xme:P1nPYgn_x-dCHPAI2IjZCCeWPQBuDv--PXbWkxu30qbkR5qxCmH2eByU7nsegKEv4 fhNOaDFgDS_VOFEIw>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"DjDmBcDSkawyFYGy\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410643@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:P1nPYgYF9kBHdt1UQjaOQzgSFbx37lLJvAt7ERAk08Kr-2KixfrabcHFTFI3izyMdJQx1xD8ucl0eOWCnlvXNtgiWMo>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657755967; x=1657842367; bh=1lv0UmMFZk JgoaFjljOw+QmbpMJqKPitxGrZvuma+6s=; b=f7F58uBc7feLrs1Wpa4ryiC2VH OnN1G9bfU4Q/1aXMj6SpeEv3k2uQUOfmUyPTPlHsoYKzJo6EuCJK3ZYDLyg8ctR/ jMgJNyeJUQVq7PdOSQUMVxdDgtr8bHDJBP0akJ8nAK7pwYeH3gI4TjP5aWpFFCxm ql3l06X64JhaqNHQPsVJNmNl6tJVDwm8lZSIiKT1flbgUohE2PKwpQH4tCKHfshy zGM8yNLJAxEszh8SaAAD1af95y/RGR92yMimMEyXYTAslGAT6x2n5ph1rjG8yPia ipa7DxKHJ9Y2xp8WhC7Obb1/1m10qgNUJZRayo9xtKK9e4rLSMpQVqE4iM3w==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657755967; x=1657842367; bh=1lv0UmMFZkJgoaFjljOw+QmbpMJq KPitxGrZvuma+6s=; b=KI4ydAyOLV8zKvQW7jVysMh5Mdgm/3NQvstKDxDeh+DI /v80hLJv77I7mV7DnwLYv+KXUYnkvhnL0Mcgkm9D526zHvrS0pw6giMVZcEnSvEg citp3P+Oo7XJSKtrbofXmA7kb+Gd4t4Bz3YYXUkEQLl/1T+ZWZT7SEumwM/EI+P+ 3Kc3nMpQCbRNqm8S1TQiNOQoDtaKo0VY8AdNNLcKH/UkdoeIETcmbEIUR1lpaetV L/TKDzMHn/TKmKaRwLjLm2WOQf/GHn44PSGmHia0K/FTVP/Zjki4/595dpIk1L2e jw+pzL316JxjrQT0TQ32eXRXlr2+01FViymRHzPzRA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedgvdeiucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdlfeehmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tddvnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepjeffueeiffelgfevieekieef jefgleejgedtgffftefgieejjedtjefffefhkeehnecuffhomhgrihhnpegtphhuthhusg gvrdhorhhgnecuvehluhhsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhho mhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiihii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1spsE7WOKJEOJ8uyi70G8r3lnzYrrOCWrIhlGz17KONfkSXupcdIALyjYM7du7bUT6EV/UI"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=1lv0UmMFZkJgoaFjljOw+QmbpMJqKPitxGrZvuma+6s=; b=dHJyCW2iSbi9iOIk88ah3FTCMel7rA5XA3BMvN4dYgr4waTjzRdKvM93aCbSqX7FGY MlvjRdZKqWXAI4aWbnv5nJCdHr7yaQbPGUELNEd5AP3JisaxoIEsUfesxaHxSWOuz9j0 VzeZ2tNtihWWHOhG8rRk/fPn5dddUFuKPVP46LqmgvLO4S9HQik9aTaBdtOaq9Q2Pa5X d3N5QhBgyeCUlsJ/gpcAjNEaS/ZI9o6jrCI3UF3jfRGmVYR2mqmvSbr1yJAb5WKkv9rL rHgUhQUAEPl2nqigIlEAgqjMw4z8Kcv71XJ59KxLtyqpyB4OsXToBunq9Gkv0XFCf6t5 wltg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=f7F58uBc; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=KI4ydAyO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410643@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410643@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=f7F58uBc; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=KI4ydAyO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410643@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410643@lists.postgresql.org"]}	["<20220713173000.GD18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-13 23:54:45+00	pryzby@telsasoft.com	Re: fix stats_fetch_consistency value in postgresql.conf.sample	<20220713235444.GF18011@telsasoft.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "andres@anarazel.de"}, {"Name": "", "Address": "nathandbossart@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	38	9221	[]		On Thu, Jul 14, 2022 at 08:46:02AM +0900, Michael Paquier wrote:\r\n> On Wed, Jul 13, 2022 at 12:30:00PM -0500, Justin Pryzby wrote:\r\n> > How did you make this list ?  Was it by excluding things that failed for you ?\r\n> > \r\n> > cfbot is currently failing due to io_concurrency on windows.\r\n> > I think there are more GUC which should be included here.\r\n> > \r\n> > http://cfbot.cputube.org/kyotaro-horiguchi.html\r\n> \r\n> FWIW, I am not really a fan of making this test depend on a hardcoded\r\n> list of GUCs.  The design strength of the existing test is that we\r\n> don't have such a dependency now, making less to think about in terms\r\n> of maintenance in the long-term, even if this is now run\r\n> automatically.\r\n\r\nIt doesn't really need to be stated that an inclusive list wouldn't be useful.\r\n\r\nThat's a list of GUCs to be excluded.\r\nWhich is hardly different from the pre-existing list of exceptions.\r\n\r\n                # Ignore some exceptions.\r\n                next if $param_name eq "include";\r\n                next if $param_name eq "include_dir";\r\n                next if $param_name eq "include_if_exists";\r\n\r\n-- Exceptions are transaction_*.\r\nSELECT name FROM tab_settings_flags\r\n  WHERE NOT no_show_all AND no_reset_all\r\n  ORDER BY 1;\r\n          name          \r\n------------------------\r\n transaction_deferrable\r\n transaction_isolation\r\n transaction_read_only\r\n(3 rows)\r\n\r\nHow else do you propose to make this work for guc whose defaults vary by\r\nplatform in guc.c or in initdb ?\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, andres@anarazel.de, nathandbossart@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Wed, 13 Jul 2022 18:54:45 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: fix stats_fetch_consistency value in postgresql.conf.sample"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657756498; cv=none; d=google.com; s=arc-20160816; b=sCJNerUqzuCbpY/N3vNGrGgDJv0AASct0uUQSzYc2u99wEIbpkDSiqZWamBSbF7apH A7SSkMB0LB0aYojuo5OGYhIuR7KjmTXnnJBKU9gc719+UrEOvCJh9e7/b/TN4kR/JEU3 wpCYMf9mtyUUeV9W/NCKSTR45nhiWSoz7ie/aa6vNBYIJjRSy23lqOmXpZfV7Oz8tk0p e3e9yA82R772+xL3Hq8adj2BoqM3T7tXSkUfIEQS6igCOwq9H7qwlNg2EcwUeGmrLKwC SzLZXC41HkZqFzrAKsXmp0jfMhIBw7/uqGc3u+nlG4KK8AUmSznOFjJpEQBWdBaXQsDU yaKQ=="], "Received": ["by 2002:ac2:5221:0:0:0:0:0 with SMTP id i1csp408614lfl; Wed, 13 Jul 2022 16:54:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id w202-20020a1fadd3000000b0036c533c81dfsi59880vke.46.2022.07.13.16.54.58 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 16:54:58 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410645@lists.postgresql.org>) id 1oBmC1-0007zy-Ml for postgres.email+pgsql-hackers@gmail.com; Wed, 13 Jul 2022 23:54:57 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBmBz-0007Sj-Qo for pgsql-hackers@lists.postgresql.org; Wed, 13 Jul 2022 23:54:55 +0000", "from mail-io1-xd30.google.com ([2607:f8b0:4864:20::d30]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oBmBs-0004Oi-0O for pgsql-hackers@postgresql.org; Wed, 13 Jul 2022 23:54:55 +0000", "by mail-io1-xd30.google.com with SMTP id q14so90108iod.3 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 16:54:47 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id d13-20020a5d964d000000b006788259b526sm123037ios.41.2022.07.13.16.54.45 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Wed, 13 Jul 2022 16:54:46 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id 2FA77800934; Wed, 13 Jul 2022 18:54:45 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220713235444.GF18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<20220616132306.GD29853@telsasoft.com> <20220617.094358.2201653243066915172.horikyota.ntt@gmail.com> <20220622230710.r2m4ex5tlf6mveyh@alap3.anarazel.de> <20220630.173801.662386227537019720.horikyota.ntt@gmail.com> <20220713173000.GD18011@telsasoft.com> <Ys9ZOk49mruHPn4q@paquier.xyz>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a1f:1890:0:b0:374:57d2:ba7f with SMTP id 138-20020a1f1890000000b0037457d2ba7fmr2528348vky.39.1657756498736; Wed, 13 Jul 2022 16:54:58 -0700 (PDT)", "by 2002:a05:6638:1602:b0:341:3e1f:d862 with SMTP id x2-20020a056638160200b003413e1fd862mr27773jas.24.1657756486467; Wed, 13 Jul 2022 16:54:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220713235444.GF18011%40telsasoft.com>"], "In-Reply-To": ["<Ys9ZOk49mruHPn4q@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410645@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410645@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to:user-agent; bh=sWPJUJ+y3PAS+9XZjVc6eGrenh+SrcDE5OOcKf2qTsg=; b=0K4tnK3gS5ly+nXCw54o4KLCfJt6WxO2WOONYVGcQHYmaN8aSn7JGUBJsnnR4F9XFA AInelUWNpP8cQLI50T9Q6q9fp7qWdmEZo3UNLRGYoJGJym8H2+/u3YdACYjvO/Irpu3e eCjauiJGZkGl2zCFOLGAnQ8vFbKzEg++Z/HANdZd+wR1kBDjQSbKtFTb35Ki0D9Img4u J/Z3lSW0q6bqA1U0URyBNIjLpug4SlOwrpPe13VjbFsshFAuuiQ+9ZzxE/4bc1YOQlnn XA81u5U2S+F54c/ZqWXtNDaw3hvUpNOh2I+2yn0PbSXcWda6zsyoHKpCNptK+yz44EAB qgGQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+iuyyrsGWaGUv/pZl93jreUdND1gcEinwQTbg7PNe8AexzxYmC HC85IMTkV/gy8ZjnhxBL7TYapQ=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1srxc5JvRatrERb3xdf85WC/0di9bQUlEaRg7kYhCcUCVBP2gKuBZSiuJSNJlu1itQXmIoC"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=sWPJUJ+y3PAS+9XZjVc6eGrenh+SrcDE5OOcKf2qTsg=; b=RaAJA4CuFDbiotyQkCfv4OmAyZtCrszqlFJOk8T5XaW9UIa00lmBGsCGFCwM2j3Fkk cDjc5oephf1oBNaRK4z98vJH37CAdPYDWzzdz/yi9XS5pbgpooTKn0VLhr7ODzP/sT1V 9ptz4+M9SXDz1epA5KpBRyC8Ao77MLOyRCkRbvivuX3KLlY73ltXqdXtYGE0YiYVrCyI mb0f4ALKuwBTdXq2U1KCEt4WiUQUuJK7SHefaMrRacVGlF/7l9OSN0xMcULMFqvOhN0t eSISS6SINaiPTW0GZg4ctLyYfbLEUXvvGt1UxcYJE8fVl2iO76nUQ3VBrtpE+HALA5yQ ZnOQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=0K4tnK3g; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410645@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410645@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to:user-agent; bh=sWPJUJ+y3PAS+9XZjVc6eGrenh+SrcDE5OOcKf2qTsg=; b=pw5tuvom7bQ0dUrC1S9Q/YqKgqeln1loidbd87AdYT/xb6F92oZoNHQGH6y23ubYi4 NuxcIHyIJRXCJ47V9Eqw/ZJvZmPhdi2MnMGwu6EpI2ciXan/m+5pxobaNRge4bv4GN1P 6R6mHbCUragY7Oowy/kIzlw958hyFNucoGqaaKKwNWsmnPDKdavgPtjBGws0H5Z1yEQF KQhMkQsfjUGF70HmNNL2fkllO/VSrL+vYe4IiGpdQ54or1ojQv+ZtATUC+S1wz6eolqR MEcDSsmyNBpfEoFDFI2RipAWVbsdAmKZGx+uhbAjkCu0J+k3nwpMtc8pQVADniurSPq8 07GA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=0K4tnK3g; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410645@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410645@lists.postgresql.org"]}	["<Ys9ZOk49mruHPn4q@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 00:49:39+00	tgl@sss.pgh.pa.us	Re: automatically generating node support functions	<2593369.1657759779@sss.pgh.pa.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	39	11371	[]		Just one more thing here ... I really don't like the fact that\r\ngen_node_support.pl's response to unparseable input is to silently\r\nignore it.  That's maybe tolerable outside a node struct, but\r\nI think we need a higher standard inside.  I experimented with\r\npromoting the commented-out "warn" to "die", and soon learned\r\nthat there are two shortcomings:\r\n\r\n* We can't cope with the embedded union inside A_Const.\r\nSimplest fix is to move it outside.\r\n\r\n* We can't cope with function-pointer fields.  The only real\r\nproblem there is that some of them spread across multiple lines,\r\nbut really that was a shortcoming we'd have to fix sometime\r\nanyway.\r\n\r\nProposed patch attached.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["David Rowley <dgrowleyml@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Wed, 13 Jul 2022 20:49:39 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: automatically generating node support functions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657759787; cv=none; d=google.com; s=arc-20160816; b=aMZWfvhBcfKRbX2y5ZKy36tNWNkLa50GJkvHT4dDC976GNHTO2Rq5fOhy7aFNWnH08 Wrcej3rqoL5u20FvtZer5CalENSaamW19N0qEMdq1CCVgLvX4XNPv7grHLhPu/gqyB2d 5UY23NpMiKG40ya4xf/QHFE4zapXl4EjHBI2tQSUinTXvqXux6MBauFuL6PgbtwHzeaK WihkNbJkYa20GRSiR0mZmoJmx+Bi4ByqMzacDsWqmLnU8zkWfIJmH7mXlYmZhhAJ1k64 WlibVpC7n+CYdqgIw4Uthl8qlnspapthRw0TRfuG8lPCgJSJ09kEErJ/shD50kuynv3R A6bQ=="], "Comments": ["In-reply-to Andres Freund <andres@anarazel.de> message dated \\"Mon, 11 Jul 2022 15:41:30 -0700\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp4570jai; Wed, 13 Jul 2022 17:49:47 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bw19-20020a0560001f9300b0021d654970dfsi92393wrb.90.2022.07.13.17.49.47 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 17:49:47 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410651@lists.postgresql.org>) id 1oBn34-0002lq-MQ for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 00:49:46 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBn32-0002EI-OS for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 00:49:44 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBn30-0003Dc-9a for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 00:49:43 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26E0nd1h2593370; Wed, 13 Jul 2022 20:49:39 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2593288.1657759752.0@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2593369.1657759779@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<1116889.1657553859@sss.pgh.pa.us> <1201553.1657562258@sss.pgh.pa.us> <CA+TgmoagVZJdt-pyNw-UK_YzrrFPGtT4oQ1LtbCeCSuAk8y0UQ@mail.gmail.com> <1229446.1657569262@sss.pgh.pa.us> <20220711201755.x5hmdailt63z2xo2@awork3.anarazel.de> <1239476.1657571885@sss.pgh.pa.us> <20220711213755.gwcysmuypke3wckg@awork3.anarazel.de> <1261926.1657577355@sss.pgh.pa.us> <20220711222758.3bdgprqvvjwndn7k@awork3.anarazel.de> <1282697.1657579184@sss.pgh.pa.us> <20220711224130.tg6bcnslgyfijuiw@awork3.anarazel.de>"], "X-Received": ["by 2002:a05:6000:1688:b0:21d:7b36:926a with SMTP id y8-20020a056000168800b0021d7b36926amr5551618wrd.303.1657759787464; Wed, 13 Jul 2022 17:49:47 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2593369.1657759779%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220711224130.tg6bcnslgyfijuiw@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410651@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"----- =_aaaaaaaaaa0\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410651@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uBQisPk8LbaRIRP0GQIS5XMUNZwPf7p5HbN00YvKUv8kdFYHp1iDVGpuXEgXdhN89B/uKV"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=5jnqVf7AhYTYa7G1AOn6SmugxHmKrjPAf2hvNFkxnqg=; b=pxDpRHE15ysUxzBYJwtMQjnUEh7HK5YNVmN/42WEjj37Y24fHXsiWj2qLnGziW0zfd ZzyxCmy9os60uzdrSg/X4CRmNbAaMjuWCeV7w3KdcT5NM3rjunJus61XUOS/yAskS7+8 3I8bKIxQ0BWPdLYsR+AKzfed6+7afUpKWOfAQrC+NeGIO7MMJNo3RlKExI+yd8hiyW2i z1UjtuG/GjUsz8qgM/BOCyRhoV4b1/wt41ad5CbvvBAXL3RLWi/t4Syz9WaRHbwhWbDd tJhvuSfuieSxZZZem7VjnvLx6eplZbVz3pU04mcT6y7zAvjPUgYRyqbmiOh1P3XIMC40 P+Fg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410651@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410651@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410651@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410651@lists.postgresql.org"]}	["<20220711224130.tg6bcnslgyfijuiw@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 01:30:31+00	sawada.mshk@gmail.com	Re: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com>	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	40	46985	[{"part_id": "2", "file_name": "v4-0001-Add-catalog-modifying-transactions-to-logical-dec.patch", "content_id": "f_l5kbrt3l0", "disposition": "attachment", "content_type": "application/x-patch"}]		On Tue, Jul 12, 2022 at 5:52 PM Amit Kapila <amit.kapila16@gmail.com> wrote:\r\n>\r\n> On Tue, Jul 12, 2022 at 1:13 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> >\r\n> > On Tue, Jul 12, 2022 at 3:25 PM Amit Kapila <amit.kapila16@gmail.com> wrote:\r\n> > >\r\n> > > On Tue, Jul 12, 2022 at 11:38 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> > > >\r\n> > > > On Tue, Jul 12, 2022 at 10:28 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> > > > >\r\n> > > > >\r\n> > > > > I'm doing benchmark tests and will share the results.\r\n> > > > >\r\n> > > >\r\n> > > > I've done benchmark tests to measure the overhead introduced by doing\r\n> > > > bsearch() every time when decoding a commit record. I've simulated a\r\n> > > > very intensified situation where we decode 1M commit records while\r\n> > > > keeping builder->catchange.xip array but the overhead is negilible:\r\n> > > >\r\n> > > > HEAD: 584 ms\r\n> > > > Patched: 614 ms\r\n> > > >\r\n> > > > I've attached the benchmark script I used. With increasing\r\n> > > > LOG_SNAPSHOT_INTERVAL_MS to 90000, the last decoding by\r\n> > > > pg_logicla_slot_get_changes() decodes 1M commit records while keeping\r\n> > > > catalog modifying transactions.\r\n> > > >\r\n> > >\r\n> > > Thanks for the test. We should also see how it performs when (a) we\r\n> > > don't change LOG_SNAPSHOT_INTERVAL_MS,\r\n> >\r\n> > What point do you want to see in this test? I think the performance\r\n> > overhead depends on how many times we do bsearch() and how many\r\n> > transactions are in the list.\r\n> >\r\n>\r\n> Right, I am not expecting any visible performance difference in this\r\n> case. This is to ensure that we are not incurring any overhead in the\r\n> more usual scenarios (or default cases). As per my understanding, the\r\n> purpose of increasing the value of LOG_SNAPSHOT_INTERVAL_MS is to\r\n> simulate a stress case for the changes made by the patch, and keeping\r\n> its value default will test the more usual scenarios.\r\n\r\nAgreed.\r\n\r\nI've done simple benchmark tests to decode 100k pgbench transactions:\r\n\r\nHEAD: 10.34 s\r\nPatched: 10.29 s\r\n\r\nI've attached an updated patch that incorporated comments from Amit and Shi.\r\n\r\nRegards,\r\n\r\n--\r\nMasahiko Sawada\r\nEDB:  https://www.enterprisedb.com/\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["Amit Kapila <amit.kapila16@gmail.com>"], "Date": ["Thu, 14 Jul 2022 10:30:31 +0900"], "From": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657762279; cv=none; d=google.com; s=arc-20160816; b=LmGVCYKsUxRhWG3adz5+FY9MhU87FeSuTIPfvIVrYj+KLN3c9EuuNyA5aY9EBj+699 YNgP8BfLoitJxalrOVB10o9luNClrefk57UQLLJlYdFTNA+0ahGXhVHjudNo10tGZ12K GTkgnmIiVyDB7vjMdD3ZYv8EU1atkeYwXiY2JLAXwriFZRfbe6yO+I8e5QhHhOnywSxq Dyv9NinllCuQ02kQavTD7SWC5RlMlPrSdAqU98ht7VLRS1xwSpqgJCIPjXdKMp0bCjs8 a0y2tQZDjxcEjOg0MgdDuJKlA2Di335EWPMDLOj6S00iV2dwJLhZ7QPqYxvwBsP4t7LF TCdw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp13046jai; Wed, 13 Jul 2022 18:31:19 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f21-20020a1f9c15000000b00370858ac349si91749vke.113.2022.07.13.18.31.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 18:31:19 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410653@lists.postgresql.org>) id 1oBnhF-000474-NS for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 01:31:17 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBnhB-0002ev-1J for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 01:31:13 +0000", "from mail-pj1-x102d.google.com ([2607:f8b0:4864:20::102d]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBnh8-000594-1N for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 01:31:12 +0000", "by mail-pj1-x102d.google.com with SMTP id q5-20020a17090a304500b001efcc885cc4so921408pjl.4 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 18:31:09 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <CAD21AoA7WM=ptACtu0cg5XdQ86c5RJDg9efsdPRCxQnUqZ+omg@mail.gmail.com> <CAD21AoDFC5btYbcGOLMWimotg+N45pXJqyEOhbfsOHdz8XUKpg@mail.gmail.com> <CAA4eK1KZHnHhZdL1-Fa-6+sw4JHEPjLjZ=+wTwRHnkooXoxp2A@mail.gmail.com> <CAD21AoDJiAiyp3AHbaPJ1w=twWs2sThUiNDxvpJ+k98voV2PSg@mail.gmail.com> <CAA4eK1KxnYuhU5AyusDAP1SKtVmwAS1wYJ+VNL155x=swbx+gA@mail.gmail.com>"], "X-Received": ["by 2002:ab0:764b:0:b0:382:d232:d709 with SMTP id s11-20020ab0764b000000b00382d232d709mr2550280uaq.87.1657762279378; Wed, 13 Jul 2022 18:31:19 -0700 (PDT)", "by 2002:a17:90a:7c05:b0:1ee:e40c:589b with SMTP id v5-20020a17090a7c0500b001eee40c589bmr6925598pjf.78.1657762267757; Wed, 13 Jul 2022 18:31:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAD21AoAyNPrOFg%2BQGh%2B%3D4205TU0%3DyrE%2BQyMgzStkH85uBZXptQ%40mail.gmail.com>"], "In-Reply-To": ["<CAA4eK1KxnYuhU5AyusDAP1SKtVmwAS1wYJ+VNL155x=swbx+gA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410653@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"00000000000017915705e3b9db85\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410653@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=mRo36zbNBOQ8zBR4Ekrt4Xw2ml/ZaLiMHbWjCL62Kik=; b=TfNQI/m/483hYcn8pDTlR2mlzUs1NoOmVOzIWjCQLQqkZZ3IgGpn+TDzDqRSN9RLbY q2kHv6h07nWivB+zJ/usyf6Q4v5mDrSzYyElNLlRtHJyqvwlPR1kuv0WkObdeNWoUZRy 964cm4qE12WRK0EIjxI5iTNunsyXWAliy9F/qtM9gvUdIHQTz8jZKFE9YKozL0fxfgfR PFUlfBb5OuJSQXa5N2ix3Q4qvOGAUklH2t883O+Np1S9/aiq8rSex7FxWTbOoAjHar8L e3IE9ZLVpXFHvbnq6OhzldCs5VnWmupz1DtCv0PAItIE8ZjxeIAI6DtfDATE4gclqctm AueA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+lgY621JYnH2V2PYL0xenNxOIm3nmQz5oMVxeB0JRsJ781nB7e jPQhdum/AaHhMhwjD14DnRjsr6uDZ/xKvyk3hJ8="], "X-Google-Smtp-Source": ["AGRyM1tkFGrud4A6zBfZ5PxJ4audKfpOeU2coooP+Doo1onIv4Kxwz9i2kGzG6f/2sv1yEY1a5ag"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=mRo36zbNBOQ8zBR4Ekrt4Xw2ml/ZaLiMHbWjCL62Kik=; b=uiGPs3tL3XLODiu8xdioNou1j/1+I/bk1L2Bj4fZ8+sI/k2kJnJJomGkZzn7KPCOd9 PffGzIT4E6/Y9aBpvY2aIMoWb/9XsrVMz4GvJL/EpIMJXV3CAXc4qQDusL2HFSgC/48w xQi0ukE+VzK+mxfwbb1v/vu8KdteKYBYUCLVAuGWRStS25Rq3LSOPgN5f5l0PGAo8Ede CnOTe+7AFRH8iurdqqM/P2glotPAFn3YokTYKzSW7Nr9yBP3K50ZfkZiXtPmeRRO8B2Y rL/6dsqtfIgUMkGXXqjdtThvgVM8SBiTcbQ8ZXOT/wtKJiHhdDUHEOP89cncaGG9CI/j DePQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"TfNQI/m/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410653@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410653@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=mRo36zbNBOQ8zBR4Ekrt4Xw2ml/ZaLiMHbWjCL62Kik=; b=bE0OHjp0WYaB6u3kP9k141gKlN3qP3+92N8ehX6ELmzMtuggPPADuwTdY9e5WkmShf dpF1wUK3n0vJC7O/7RbAykPBrPhpxLV+tADofIg/wDki8YIiu5I66Hi6X7vqh5j4fOhe leC4VGiEKHw6PAw1pWrxrjzfmzv/qWU4mn0lL6Lbr7UZvkN0zhXGaMN0rpV0r7C1C2Dw 8r7fN6j0KWaGlGLsijKkX+Xkiqh6KuWaDjas0nX1qmuznMykExzUccAzDZFJ7E/SKe1h qTRzxbLU9L1n2lDMweP3j2CsGgX6rz4L9ZGHVJRcFZtJtuEpUCRkIoSjEJ8Tv+RRKXBJ OVmw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"TfNQI/m/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410653@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410653@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAA4eK1KxnYuhU5AyusDAP1SKtVmwAS1wYJ+VNL155x=swbx+gA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 01:32:06+00	sawada.mshk@gmail.com	Re: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<CAD21AoAG9v-YPaSxJjZK0uNOfY5onAXJbqkW=g33oGf7tJHZDg@mail.gmail.com>	[{"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	41	10975	[]		On Tue, Jul 12, 2022 at 12:40 PM shiy.fnst@fujitsu.com\r\n<shiy.fnst@fujitsu.com> wrote:\r\n>\r\n> On Tue, Jul 12, 2022 8:49 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> >\r\n> > I've attached an updated patch.\r\n> >\r\n> > While trying this idea, I noticed there is no API to get the length of\r\n> > dlist, as we discussed offlist. Alternative idea was to use List\r\n> > (T_XidList) but I'm not sure it's a great idea since deleting an xid\r\n> > from the list is O(N), we need to implement list_delete_xid, and we\r\n> > need to make sure allocating list node in the reorder buffer context.\r\n> > So in the patch, I added a variable, catchange_ntxns, to keep track of\r\n> > the length of the dlist. Please review it.\r\n> >\r\n>\r\n> Thanks for your patch. Here are some comments on the master patch.\r\n\r\nThank you for the comments.\r\n\r\n>\r\n> 1.\r\n> In catalog_change_snapshot.spec, should we use "RUNNING_XACTS record" instead of\r\n> "RUNNING_XACT record" / "XACT_RUNNING record" in the comment?\r\n>\r\n> 2.\r\n> +                * Since catchange.xip is sorted, we find the lower bound of\r\n> +                * xids that sill are interesting.\r\n>\r\n> Typo?\r\n> "sill" -> "still"\r\n>\r\n> 3.\r\n> +        * This array is set once when restoring the snapshot, xids are removed\r\n> +        * from the array when decoding xl_running_xacts record, and then eventually\r\n> +        * becomes an empty.\r\n>\r\n> +                       /* catchange list becomes an empty */\r\n> +                       pfree(builder->catchange.xip);\r\n> +                       builder->catchange.xip = NULL;\r\n>\r\n> Should "becomes an empty" be modified to "becomes empty"?\r\n>\r\n> 4.\r\n> + * changes that are smaller than ->xmin. Those won't ever get checked via\r\n> + * the ->committed array and ->catchange, respectively. The committed xids will\r\n>\r\n> Should we change\r\n> "the ->committed array and ->catchange"\r\n> to\r\n> "the ->committed or ->catchange array"\r\n> ?\r\n\r\nAgreed with all the above comments. These are incorporated in the\r\nlatest v4 patch I just sent[1].\r\n\r\nRegards,\r\n\r\n[1] https://www.postgresql.org/message-id/CAD21AoAyNPrOFg%2BQGh%2B%3D4205TU0%3DyrE%2BQyMgzStkH85uBZXptQ%40mail.gmail.com\r\n\r\n--\r\nMasahiko Sawada\r\nEDB:  https://www.enterprisedb.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["\\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "Date": ["Thu, 14 Jul 2022 10:32:06 +0900"], "From": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657762372; cv=none; d=google.com; s=arc-20160816; b=NGltSGayacrN1ghIdqD31CK1P8KW92WxBV/wZUeTNr4YSAnV1H87a9exZlh5gPGMuu bq6sDL2YDuR4H+WleHBQvJ4c09rNMqmZhm80QvmSHLWgcVNoJATHFU1tzsJWIut6whqX wzfwqdeLRnLigM2bg3WNRA1d+sFp0U7fGqGlSKGBAuWDHfbJJ6icxOSvTkSGnvR7L2ai 0vph4dMJC1OL3loZKTLOVjGYO/q+hR/UxUl4o82JYDd2dbKhFPL218+7xxNNj42SD47I s/mmbfhbx8f2n2J0oIXbGvr5gx8BNpmV2s5GNnA45b1sVgO3BqEuMetAYlBFoE+jGIcR fqog=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp13348jai; Wed, 13 Jul 2022 18:32:52 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 59-20020ab003c1000000b0038203845bbesi36189uau.200.2022.07.13.18.32.51 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 18:32:52 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410655@lists.postgresql.org>) id 1oBnil-0006pn-5Y for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 01:32:51 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBnig-0005G5-KL for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 01:32:46 +0000", "from mail-pf1-x433.google.com ([2607:f8b0:4864:20::433]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBnie-0003cI-6B for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 01:32:45 +0000", "by mail-pf1-x433.google.com with SMTP id y9so519303pff.12 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 18:32:44 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAD21AoAG9v-YPaSxJjZK0uNOfY5onAXJbqkW=g33oGf7tJHZDg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <TYAPR01MB63155A51D65ABA4A0F876042FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:a1f:17d2:0:b0:374:3ca2:def3 with SMTP id 201-20020a1f17d2000000b003743ca2def3mr2785702vkx.18.1657762372035; Wed, 13 Jul 2022 18:32:52 -0700 (PDT)", "by 2002:a05:6a00:1412:b0:528:47a6:8569 with SMTP id l18-20020a056a00141200b0052847a68569mr5900242pfu.39.1657762362849; Wed, 13 Jul 2022 18:32:42 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAD21AoAG9v-YPaSxJjZK0uNOfY5onAXJbqkW%3Dg33oGf7tJHZDg%40mail.gmail.com>"], "In-Reply-To": ["<TYAPR01MB63155A51D65ABA4A0F876042FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410655@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410655@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=zmF1SPW/IksgQc2ApFyyVeiLKymyWky9OBJi9s6r9MU=; b=a+ujRh7g3rPabBKDV2tx8v2OaK3KAg0hwN6+7AHugX095lwz27Dp0i+eGirJTbib9U DLowTJX6kqSEK0LFx9Y4M+o5mhg7LrxUBIAsNrNB96Psm5z8Y+yjJPkmL3Hvh/vDQOmv LFNTGyo/kBFX/jE11fZoJZkHLfS0Uo/QqPC43kdBiIjh/NaYMjSY7DKWTx6EUjg6TcPa wDsV67OIriwg1OLfh5aUv26V15+l1D1WqauN8BQYB/mUUg2EkupOAyBTB3gikIBLzOco i7N3GNIpP62VyAxO2N0A46/eQMnCIa7nmoPGuV84VkVP+hf0FJ0FU1fWXNIxKKuUtAPO UYhQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/7HHcLQuU4XdqnKClf1jPWxQCFUbDkpJOLAoDuu/p7rFQgShMs j2hjUsr3lwkp4tytQ6M1udWznCo9I123sM1GmH4K3dmX/aU="], "X-Google-Smtp-Source": ["AGRyM1sPUkkg3KTlQwva60H3f1rtSzuOSuyD2rZOdOPywi9jw6BNlv5RyOdlyYGhJXsXXpbo97Us"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=zmF1SPW/IksgQc2ApFyyVeiLKymyWky9OBJi9s6r9MU=; b=mk9aIXzMl+pHHy6HAQ2tbCQHawnfGMegGlr7700fCkIV1bHhXizxBQBetpCgyVpcUt 84tTc20xG4BoGIYvzJR8q5SQewrh7qI00MePEcfimhUK8EFE3HrHGPBGs0ZCMfe3YXcQ X5j8NoNF0z8vZtwEJa5GroMXfHAmn8kv+NNQl78sD1shnVnUidKQr0LC9wKLuMPGZ0kD vfqwbska7QN8xQLMPjSGpkX2Yw1yQWCvz0ldB0XJj0PJpIVLY7VrhSiGNHxQbgiQv6XJ SlKGdh+M3KYKli8DTEDl86xn4fqr6oWS3eDjJGtQwZ1ZkNkMrXrWOquXO3piyMj67pWW Rl8w=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=a+ujRh7g; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410655@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410655@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=zmF1SPW/IksgQc2ApFyyVeiLKymyWky9OBJi9s6r9MU=; b=GuxWBief0MASYJQ4BNSalbbCtTRRIBQqWr5TtYJ5V8npgUtSmxqQ25F8GLHrsZr9SD guLvW3qxikgpq2rDE4BQZO8x8QZs9iYBOK90ChPbtaMdsggOQl4tFtqj+MTYnDDkPf/D QYTvp50uxYpGaDZ6wjjdkURGC7olXTqm98POLNVOX6ntFygR0GQZVW0BaCnJFgYudMDK DX5ImpLZQvuMtv0v8Jn/CZ0bg5aPw6SnXksmNYAkn8453xsENXV80s5f6CZtYn0sC2l9 jz4mcWgVKE5DBgAvK0LGHz7WA3dfb6YSvrPwq1E485ovjILAkSxAi3NpdbC+VMsF1l5e MrDw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=a+ujRh7g; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410655@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410655@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<TYAPR01MB63155A51D65ABA4A0F876042FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 02:16:00+00	shiy.fnst@fujitsu.com	RE: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com>	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	42	21895	[]		On Tue, Jul 12, 2022 5:23 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> \r\n> On Tue, Jul 12, 2022 at 5:58 PM shiy.fnst@fujitsu.com\r\n> <shiy.fnst@fujitsu.com> wrote:\r\n> >\r\n> > It happened when executing the following code because it tried to free a\r\n> NULL\r\n> > pointer (catchange_xip).\r\n> >\r\n> >         /* be tidy */\r\n> >         if (ondisk)\r\n> >                 pfree(ondisk);\r\n> > +       if (catchange_xip)\r\n> > +               pfree(catchange_xip);\r\n> >  }\r\n> >\r\n> > It seems to be related to configure option. I could reproduce it when using\r\n> > `./configure --enable-debug`.\r\n> > But I couldn't reproduce with `./configure --enable-debug CFLAGS="-Og -\r\n> ggdb"`.\r\n> \r\n> Hmm, I could not reproduce this problem even if I use ./configure\r\n> --enable-debug. And it's weird that we checked if catchange_xip is not\r\n> null but we did pfree for it:\r\n> \r\n> #1  pfree (pointer=0x0) at mcxt.c:1177\r\n> #2  0x000000000078186b in SnapBuildSerialize (builder=0x1fd5e78,\r\n> lsn=25719712) at snapbuild.c:1792\r\n> \r\n> Is it reproducible in your environment?\r\n\r\nThanks for your reply! Yes, it is reproducible. And I also reproduced it on the\r\nv4 patch you posted [1].\r\n\r\n[1] https://www.postgresql.org/message-id/CAD21AoAyNPrOFg%2BQGh%2B%3D4205TU0%3DyrE%2BQyMgzStkH85uBZXptQ%40mail.gmail.com\r\n\r\n> If so, could you test it again\r\n> with the following changes?\r\n> \r\n> diff --git a/src/backend/replication/logical/snapbuild.c\r\n> b/src/backend/replication/logical/snapbuild.c\r\n> index d015c06ced..a6e76e3781 100644\r\n> --- a/src/backend/replication/logical/snapbuild.c\r\n> +++ b/src/backend/replication/logical/snapbuild.c\r\n> @@ -1788,7 +1788,7 @@ out:\r\n>     /* be tidy */\r\n>     if (ondisk)\r\n>         pfree(ondisk);\r\n> -   if (catchange_xip)\r\n> +   if (catchange_xip != NULL)\r\n>         pfree(catchange_xip);\r\n>  }\r\n> \r\n\r\nI tried this and could still reproduce the problem.\r\n\r\nBesides, I tried the suggestion from Amit [2],  it could be fixed by checking\r\nthe value of catchange_xcnt instead of catchange_xip before pfree.\r\n\r\n[2] https://www.postgresql.org/message-id/CAA4eK1%2BXPdm8G%3DEhUJA12Pi1YvQAfcz2%3DkTd9a4BjVx4%3Dgk-MA%40mail.gmail.com\r\n\r\ndiff --git a/src/backend/replication/logical/snapbuild.c b/src/backend/replication/logical/snapbuild.c\r\nindex c482e906b0..68b9c4ef7d 100644\r\n--- a/src/backend/replication/logical/snapbuild.c\r\n+++ b/src/backend/replication/logical/snapbuild.c\r\n@@ -1573,7 +1573,7 @@ SnapBuildSerialize(SnapBuild *builder, XLogRecPtr lsn)\r\n        Size            needed_length;\r\n        SnapBuildOnDisk *ondisk = NULL;\r\n        TransactionId   *catchange_xip = NULL;\r\n-       size_t          catchange_xcnt;\r\n+       size_t          catchange_xcnt = 0;\r\n        char       *ondisk_c;\r\n        int                     fd;\r\n        char            tmppath[MAXPGPATH];\r\n@@ -1788,7 +1788,7 @@ out:\r\n        /* be tidy */\r\n        if (ondisk)\r\n                pfree(ondisk);\r\n-       if (catchange_xip)\r\n+       if (catchange_xcnt != 0)\r\n                pfree(catchange_xip);\r\n }\r\n\r\n\r\nRegards,\r\nShi yu\r\n	[]	\N	["\\\\Seen"]	[{"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "Date": ["Thu, 14 Jul 2022 02:16:00 +0000"], "From": ["\\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657764979; cv=pass; d=google.com; s=arc-20160816; b=GWweL73DMeim2Z3WO8iyNYdeIl74cocDMtz7cwRcchQqe08o3zzlsCrirNkK+VRYVt +t1a/Ds3w4dop6aRDWIHruEot0+K1UNk5zJgJ2VSVLpvhr81aLdgcRnjRzJWSAEfK6rb oa12q25KbEWOYxBE50o290aykmNmpbUwTrsDo+GZ3h8D902JcxAto4q65QHXbZHW76e8 AyVwcu/ecpwssZOAV4N0YpFx9vJM/bqv6Nw6hgV0mc56sQWdoLlOCIY4hlyEqOatgkyN pkwBcCT20QcXF3e+amq1Ma3KrbsUJtnZUaetn0xiv33NmAgUL5AFx9icjalqCH66qZxO sAYg==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=hG4w+LAeOZAETfeqT/j+WwPiX9HE/wv19L4cOXPC14Wq4B05BtsNUB4+3y7cRPYIiXMCPGI3573HXgW/aw84jpdCFFFGr2HEQl4r0BHF7JS23N2W2CbSuLGVBKWTpKg4vMirr/PLs084fSbYznaGvf8z8uEunlww9HSKYb3twtNyISbsmpW4POXHTsgrqs8A01ppvNCIXzD4r9obcrTcXilDZTuNuW1UMgft+psYfZq5wQymkMk9UX9Oskga4PrPUO1UH8YWTBTfAkDDmSJdi9kP6jgiybu8vza8voJAHCrovHZ29szNvMeX+mvoVtH1jGlKKIKHVKe9rXI3PPLXBg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp20794jai; Wed, 13 Jul 2022 19:16:20 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r10-20020a67a64a000000b00356b33e7162si20139vsh.583.2022.07.13.19.16.19 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 19:16:19 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410659@lists.postgresql.org>) id 1oBoOo-00065u-Jv for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 02:16:18 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <shiy.fnst@fujitsu.com>) id 1oBoOj-0004YX-LV for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 02:16:14 +0000", "from esa18.fujitsucc.c3s2.iphmx.com ([216.71.158.38]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <shiy.fnst@fujitsu.com>) id 1oBoOf-0003wD-HV for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 02:16:12 +0000", "from mail-os0jpn01lp2104.outbound.protection.outlook.com (HELO JPN01-OS0-obe.outbound.protection.outlook.com) ([104.47.23.104]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 14 Jul 2022 11:16:03 +0900", "from OSZPR01MB6310.jpnprd01.prod.outlook.com (2603:1096:604:f7::9) by TYCPR01MB9780.jpnprd01.prod.outlook.com (2603:1096:400:20a::13) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5417.15; Thu, 14 Jul 2022 02:16:00 +0000", "from OSZPR01MB6310.jpnprd01.prod.outlook.com ([fe80::b1d0:e8c2:ba17:d49f]) by OSZPR01MB6310.jpnprd01.prod.outlook.com ([fe80::b1d0:e8c2:ba17:d49f%6]) with mapi id 15.20.5417.026; Thu, 14 Jul 2022 02:16:00 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <TYAPR01MB6315DC425D32E9579B61EDF1FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com> <CAD21AoAQLeO1LezTZSPGhUAF=QebJUeHePbjCm5DpsKXJyQ7eQ@mail.gmail.com>"], "X-Received": ["by 2002:a67:c21d:0:b0:357:5b18:62e4 with SMTP id i29-20020a67c21d000000b003575b1862e4mr2553773vsj.30.1657764979778; Wed, 13 Jul 2022 19:16:19 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/OSZPR01MB63102143FE2431519DEF7AFDFD889%40OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<CAD21AoAQLeO1LezTZSPGhUAF=QebJUeHePbjCm5DpsKXJyQ7eQ@mail.gmail.com>"], "Msip_labels": ["=?utf-8?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2Uw?= =?utf-8?B?NTBfQWN0aW9uSWQ9ZWYwMDM5NGQtYmE4NC00NmQyLWE4MTItOTYwMzk2OTNj?= =?utf-8?B?MDBlO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRm?= =?utf-8?B?ZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5?= =?utf-8?B?LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxlZD10cnVlO01TSVBfTGFi?= =?utf-8?B?ZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX01ldGhv?= =?utf-8?B?ZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRk?= =?utf-8?B?LTNiMGY0ZmVjZTA1MF9OYW1lPUZVSklUU1UtUkVTVFJJQ1RFRO+/ou++gA==?= =?utf-8?B?776LO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRm?= =?utf-8?B?ZWNlMDUwX1NldERhdGU9MjAyMi0wNy0xNFQwMjoxMzoyOFo7TVNJUF9MYWJl?= =?utf-8?B?bF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfU2l0ZUlk?= =?utf-8?Q?=3Da19f121d-81e1-4858-a9d8-736e267fd4c7;?="], "Return-Path": ["<pgsql-hackers-owner+M79098-410659@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"utf-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410659@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHXGbjuwj9mOYhXQ0usEsUaX8Hh96qEyXkAgNWph4CAWAfvAIAVtt8AgAHNMoCABJ+9gIFdIowAgALHvoCAABKGgIABXKUAgAAvlICAAW79gIAIBgQAgDd24ICAAXWrAIABTBUAgAAje4CAASxWAIAAQB8AgAE3V4CAAFdqgIAADXYAgAAc/ACAACeTgIAFmMAAgACIipCAAAcKgIACrLrQ"], "Thread-Topic": ["[BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10407\\"; a=\\"61803267\\"", "E=Sophos;i=\\"5.92,269,1650898800\\"; d=\\"scan'208\\";a=\\"61803267\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657764969; x=1689300969; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=dndt5fisQ9Wf2bj94StQ3UZpRVAVwtFOChLIVh03PCA=; b=pGDG/YMTrQeDH6C3ynjksrIziR5JUccehHGp80z8mNBQx37MNTovhH9z j+Gc/DdvkoKZcLCsN5xnfiEmDV/XAJvadjeA96ax1IA4/Mf3F8Jo8Vgy6 eed/1KlHWMiks7YgXDosraScgbuCNMUiVNi5veMGYKKxNjfTOVbnLerSQ ONGVntCm/khhoG1hCpBqsZqsp5uZh33IrjjvD4a8xH/aU6TICzdGRTHTp S4alMT/a/S71GCrVP+EQDib2XvRonWwSo5q4vIl6sirhf6lcVKMXCKH8r XC4vEw6sIkE9UXeilOJ2nzVkEVpP3tehnGL2Icjd3o9isWCUf+PWE5YKL g==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=dndt5fisQ9Wf2bj94StQ3UZpRVAVwtFOChLIVh03PCA=; b=ZGU8b/BpysTwyej1j4KkuNHSkswWr9KoA9inaXM3n9+JFMYhxE7vBnoUK76MATg8FBiK9q07tYGwecO7290TQ04ZxDvzCiQjIS98h6nQR1ZP2h+iEMVsGn2Dl2rKFUggjZ2ke9Igo+YtBckwJOUwShSEPFJekUfflb3rTeTDCiU="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["zh-CN"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1v9xd5SptH5Sc9NvRDK9Bp91UvERvvPXK4aGGRBocN2hfx/yUpeUjqzh4TcqnBzZE8L9Xkg"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=dndt5fisQ9Wf2bj94StQ3UZpRVAVwtFOChLIVh03PCA=; b=smIgKCm1rrGG2pedA+Xh3YSLVwGRiHi4uBFI+uaiYb75On8IOI4Zhqgau490PgGkJA 2iUHQlpjc5if9piQsDySfFn0qtas9Ui8+zaBGDWmctK7cSX+Tuz5+BkSrK85W0NHM7LX oiEngVr5HShMT4++IbzD6thy07fyA7G++ndttu4sqDvWCRecaltfVoiPCm1RCBYRO1xE TJXpMTWwJ8ntXeLM3la9pQON4I4sVNaE2IrhtB0yHLnDb4Fjlq5LXFufsxAEbfRaTVZF avJE+7xHp0vQhKGAi6sNukWEm7UfNCOEBu++FAcaC/cbmzXvkitnN46fiN86F9urVrFs DsVw==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=dndt5fisQ9Wf2bj94StQ3UZpRVAVwtFOChLIVh03PCA=; b=Y+rzihEv9ULTEkDNk/NpSgoe2mbcu2PEXZDeGfdaX9kJGXMUFdRINGaXohICohr3V/zdkWKVdApPPtI3wZZ7B/MQdGv9tJmk1wNoCJ+/Dj+qV9ENMQrKOLurAeAYMKmJ0lR+2xvOdM2WpLjnI34MEReIT1yxI0RFd2segtL7bF5/iMC00/ELBik6+l0yDAWm8swqbe82YWodXwgD5vBeGdVxTgAcKOQDJF6c8hDp66neRd6aB2qhgMkxMvG47Dj3bJPtbEsFuh2Ro4dUxFdgcGm8T3gDDnPyf3XTN7A0DDkOIYRJHimdWUc/Bc0iCZKBwk6txeLBdOERdWoZh1Sn+g=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=\\"pGDG/YMT\\"; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"ZGU8b/Bp\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410659@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410659@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["base64"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=\\"pGDG/YMT\\"; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"ZGU8b/Bp\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410659@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410659@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["TYCPR01MB9780:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:OSZPR01MB6310.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(136003)(346002)(366004)(396003)(39860400002)(376002)(52536014)(8936002)(38070700005)(86362001)(2906002)(38100700002)(41300700001)(82960400001)(5660300002)(7696005)(122000001)(6506007)(55016003)(85182001)(54906003)(9686003)(6916009)(53546011)(71200400001)(966005)(26005)(478600001)(33656002)(83380400001)(4326008)(8676002)(64756008)(66446008)(66476007)(66946007)(76116006)(66556008)(316002)(186003);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["MgWz62LZ4MYU4DhLN41/vXmL+dHn+55fWaPDuzXN8j1sXnezU91w+8Xn0FVhEZ2Z53VDHCc+Qibm0rXDSBYRVFN9mYMakSrimZplfCoVkrnAT0L6c+0YrXOf7OI8sgrDPeuQNv7Gdvn9nPaW4/7LBottKXrYDarVs0/GmrzTPF7m143+rKlK0oVgab0BQLmp93xJmsL5hSrQE9XSmQ5vT2Ruhstij6/xZhmbB8gUnhA1VY8UjMwpwV7U8TvRoetAGKQtuy/6Mj1yMvAhPx5lgkQLXTomTHrlpovCw8q4MG7hD7E+8YpUBmaSPFZiHD1B8OpZm/WNBQqcVefusydBoZ+dmIdbQf8Emfs4w1X7GMrE5q22s4whGL25OT27hAQqjNkoGqoGa5ACI9SV1SfCdO0J7nDjN85m3TPC243xcu140TRhgkZG2Lsg88tlPGrNUHCtMoMnoQZYfAv/SdDhdzauiESBL1zlynfNsdSFqlI8iDvNyDQ1npsS/3UGyobuNuKH8Ub0Yk4OH8Ncln5XpyEYMoIKwZPuIJSDYkXJIhgdGibRORoQiCWFk0fokbUYVj4c7pwCDjoZOZnVWl9fCofhUIpxpGG/7/ainNtuE8+TQ9pWlhbocet8ypHraxfc6MOdlmBbVj3HPG+p+NWlF8Mj+Ch19y/iv2tcFQWVBS4Ftt6cyQpThcbaeqaBKVkoFVX+wcjU21OFkK6Wn5Nk6LSxvtTxpjAU77yUYBZskWw10IR56diKDxx4sAYW++kcL28pAudoNmvjGQ7y8TacXSym5Vg5m436G4Ji4s1Q/pNoSpUKLQywCW7g4yd0AXT8pdDndrIPVNN+yVEtznjnKqyUuA1cb3+Qg/wnEmY8brQ1AP8cb7YvaVmB9jmaHh8oI+bWvmEeDwm250yeIpOx6g=="], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?utf-8?B?cTkxaXA2U2txRmFzRWl5Nk1DWkxUdEhYbWlKMzg1anpmc3J4ODRHNWRBQzBo?= =?utf-8?B?S05YYnd5Y0swQk9sRlJQRXkwbXBRZlBjZ3l6K3VqOGp2eUdJRXFkOGlFQmk5?= =?utf-8?B?cHZ6YmV5Y0pjcTY1MVYvaEJzeGNZOEkrbUtLTmhGU0pTTzJDY1Z5WFRSSUh0?= =?utf-8?B?VnlraWNsUW9GK0YwQVVLdjBYcC8zdzhLaEh6N1JRekNNeWFHYlNzOUlDTWd3?= =?utf-8?B?L25nT2l0VnpaVmU4dGdQTU9hZ08rVElBS05FMElqd1g2Wkw5cUZhTklENUth?= =?utf-8?B?K0E4QjNzSWZycmQyeDBqaW9YS20xanE1TjZqYVFBRlpJREtxYjE2ZnF0TWxv?= =?utf-8?B?THVZQXlKblZlb29Jd3dUUk1DZnN3NnpwMVg2L3BjNWhRdEltMUdHcmRnYUFO?= =?utf-8?B?b2pBY0I2OE1nY2JhN1JabStxa1A0N0U4VmZtQmZXTzQ5S0NXdk9aYWZHdDBv?= =?utf-8?B?NlY4NUtNUi9JWVhvQy9ldFJac3NTYVpBUkpXYlhMcm1obUVTVGlCdWZvRndQ?= =?utf-8?B?cTkrSE96cURmeFJGb2J3aXhtVzI5VmZBOEJYeExSaW1nblJNMnVkTkZWVzRF?= =?utf-8?B?VUV0Mm5tQUt3RTJFTzlKb2JMQVpqZEI5WStuV1ZjMS9lR0tRQnJlOUJOeHJW?= =?utf-8?B?WFdyOFhvelFkYUo0b29BTGM1VDRiUVU2SnB0QTJEMFVxbldvcmg4MjQ1dkIr?= =?utf-8?B?VENSRE8rbE9RS090U3dlU09pWTRDb1ZZVXpHNEY5dC8rWnFwNGxibmhXYytX?= =?utf-8?B?RkRaYnZFY0d1bGIyZ2FIRU9ycnRLWHZhcE1BRWo2WDd4cGpLT1Rnb09raitN?= =?utf-8?B?RUlHVUhDNHpmTlFMTUp4c1hqVmRGVWVOOEtqL0tXVUkrUHBKMFpNVS9pcW5U?= =?utf-8?B?a0tIaEZxdjdaR2E1SXE1ZDU3V0FJY29xYnZMTGhYSFNaVFhJRGd0YklJTFpz?= =?utf-8?B?ZlpRZWtxWGtGdSs1MXN1OFFxS3FQTU81VUlrY0RjYlh2cEg2aTR0bmtRNTNV?= =?utf-8?B?Vm1yMFE4dnJDTEhtZUhrWGthZkJCMGc0M3diZDltdk1qaGJXMDJDTFVRTjN0?= =?utf-8?B?R1NCWHZkOG5JckYyb1BnQjE4ZldLWU5PSXF1VlREMVdFUlFRU010alh4T0hB?= =?utf-8?B?VlFSTThGYy92Mk1kRC83ZFBzOHFZb0JqdUJodXUrbmQyRzk4dytQTzhhSmYw?= =?utf-8?B?cUlSQkpsdkVaTE9oUXZhTlJqM2FrZ2hlbWUzZysrT3Z2SmYzZ24zMWlnNEZz?= =?utf-8?B?TDBPbFZDZ1hrRFpCaWs1anZZMjFIUEthMHhkb0FRMVl2ZUllVHFROS9LVUgv?= =?utf-8?B?cW5TbUxyUktBMlBiVWlGN3ZHZHhiUHNPVjFGNmNzcFc3SXhPaEowT2VKQmtZ?= =?utf-8?B?K3RabWNlaTB5bmd4NkVmZ1l5S2ZsZDRYWEVJQXF4Vjd5bUliRDh6TFlOcXl6?= =?utf-8?B?dDdTaUNFWlZtQ28vTXN1dTE3UWlxR0RxWUZpSnBQcU1pYnJkcTlxUHlydnRy?= =?utf-8?B?dWZick1XOXdtRGFhN3ZScjN1Ym13TXpHOTA1Z0FRZXRXODNVdW95WUFaUmE4?= =?utf-8?B?d21nYmJBakQ0RENNWUVHeFFjdjdpRzIrZ2FmWDZ0MGRKM0szeVZCN0gyVUha?= =?utf-8?B?RWhybG45WVh3TXNUbllOZDRUb2YvZ0lNQlhaZTRZVENNRHZLSWNjWXE1RHk5?= =?utf-8?B?SjVCN0dMdnBmTDdkZ1lWOGkxaEhLc2E2M0l2Mll6U2Y5bDlielNjbllnZWZJ?= =?utf-8?B?WjlMZGdMZG9zcFQwbFN3b1ZmekxxOG94WFNQRjhuYWVkZWVlcENnZXVEL25H?= =?utf-8?B?R3pZN1BmM20xQ3RNYnQrVHRGd2hMVDNHdWxnUFRrcDdjMERtSmtlbG5iL3lD?= =?utf-8?B?bnJibjg5L21kVVNCYXQ4R2R3c0ZBRDFQRnRjS1pucGg5WlpIMXRDT2xERGd2?= =?utf-8?B?aUdTbURYeGUwZE5maEt5dGZVRXN1b3FVd1VDM0xZZ2x5YStZOEQ2Tit3aEJj?= =?utf-8?B?M2VsSjJZZ1AraHJQd1BnaVQ4bHJKckFkRnN2WFhtTUhRN2dmc3JaVFpITi9U?= =?utf-8?B?dW5Fa0dza2tDV2x2dnZxVnhoVm9DdEFZWXJVZjQyS2JhRlVxMnptY05Sengy?= =?utf-8?Q?TI45Nf4PbNHqnsiQ0UtZ8ENQ6?="], "X-Ms-Exchange-Crosstenant-Authsource": ["OSZPR01MB6310.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["d8623d24-09c8-4e2d-65f1-08da653ecbbb"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["LNixdeZk81goMRpUQ4ou+L1C7cWPJEbKgOJ2YO7M+6mbcrk1YrDWgBPbLfjQ848PtZis/w+1Oo1kMmgy7mxLcQ=="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["d8623d24-09c8-4e2d-65f1-08da653ecbbb"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["14 Jul 2022 02:16:00.6155 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["TYCPR01MB9780"]}	["<CAD21AoAQLeO1LezTZSPGhUAF=QebJUeHePbjCm5DpsKXJyQ7eQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 02:40:25+00	john.naylor@enterprisedb.com	Re: i.e. and e.g.	<CAFBsxsHr4JO7vRYKZ=UVmyoQC4N+tvPiAB1yCJ-6yUfs80e0gw@mail.gmail.com>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	43	11155	[]	<div dir="ltr"><br>On Wed, Jul 13, 2022 at 4:13 PM Kyotaro Horiguchi &lt;<a href="mailto:horikyota.ntt@gmail.com" target="_blank">horikyota.ntt@gmail.com</a>&gt; wrote:<br>&gt;<br>&gt; At Wed, 13 Jul 2022 18:09:43 +0900 (JST), Kyotaro Horiguchi &lt;<a href="mailto:horikyota.ntt@gmail.com" target="_blank">horikyota.ntt@gmail.com</a>&gt; wrote in<br>&gt; &gt; I happened to see the message below.<br>&gt; &gt;<br>&gt; &gt; &gt; WARNING: ¬†new data directory should not be inside the old data directory, e.g. %s<br>&gt; &gt;<br>&gt; &gt; The corresponding code is<br>&gt; &gt;<br>&gt; &gt; &gt; ... the old data directory, e.g. %s&quot;, old_cluster_pgdata);<br>&gt; &gt;<br>&gt; &gt; So, &quot;e.g.&quot; (for example) in the message sounds like &quot;that is&quot;, which I<br>&gt; &gt; think is &quot;i.e.&quot;.¬† It should be fixed if this is correct.¬† I&#39;m not sure<br>&gt; &gt; whether to keep using Latin-origin acronyms like this, but in the<br>&gt; &gt; attached I used &quot;i.e.&quot;.<br><br>I did my own quick scan and found one use of i.e. that doesn&#39;t really fit, in a sentence that has other grammatical issues:<div><br></div><div>- ¬† ¬† ¬† ¬†Due to the differences how ECPG works compared to Informix&#39;s ESQL/C (i.e., which steps<br>+ ¬† ¬† ¬† ¬†Due to differences in how ECPG works compared to Informix&#39;s ESQL/C (namely, which steps<br>¬† ¬† ¬† ¬† ¬†are purely grammar transformations and which steps rely on the underlying run-time library)<br>¬† ¬† ¬† ¬† ¬†there is no &lt;literal&gt;FREE cursor_name&lt;/literal&gt; statement in ECPG. This is because in ECPG,<br>¬† ¬† ¬† ¬† ¬†&lt;literal&gt;DECLARE CURSOR&lt;/literal&gt; doesn&#39;t translate to a function call into<br><br>I&#39;ve pushed that in addition to your changes, thanks!</div><div><br>--<br>John Naylor<br>EDB: <a href="http://www.enterprisedb.com" target="_blank">http://www.enterprisedb.com</a></div></div>\r\n	On Wed, Jul 13, 2022 at 4:13 PM Kyotaro Horiguchi <horikyota.ntt@gmail.com>\r\nwrote:\r\n>\r\n> At Wed, 13 Jul 2022 18:09:43 +0900 (JST), Kyotaro Horiguchi <\r\nhorikyota.ntt@gmail.com> wrote in\r\n> > I happened to see the message below.\r\n> >\r\n> > > WARNING:  new data directory should not be inside the old data\r\ndirectory, e.g. %s\r\n> >\r\n> > The corresponding code is\r\n> >\r\n> > > ... the old data directory, e.g. %s", old_cluster_pgdata);\r\n> >\r\n> > So, "e.g." (for example) in the message sounds like "that is", which I\r\n> > think is "i.e.".  It should be fixed if this is correct.  I'm not sure\r\n> > whether to keep using Latin-origin acronyms like this, but in the\r\n> > attached I used "i.e.".\r\n\r\nI did my own quick scan and found one use of i.e. that doesn't really fit,\r\nin a sentence that has other grammatical issues:\r\n\r\n-        Due to the differences how ECPG works compared to Informix's\r\nESQL/C (i.e., which steps\r\n+        Due to differences in how ECPG works compared to Informix's ESQL/C\r\n(namely, which steps\r\n         are purely grammar transformations and which steps rely on the\r\nunderlying run-time library)\r\n         there is no <literal>FREE cursor_name</literal> statement in ECPG.\r\nThis is because in ECPG,\r\n         <literal>DECLARE CURSOR</literal> doesn't translate to a function\r\ncall into\r\n\r\nI've pushed that in addition to your changes, thanks!\r\n\r\n--\r\nJohn Naylor\r\nEDB: http://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Thu, 14 Jul 2022 09:40:25 +0700"], "From": ["John Naylor <john.naylor@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: i.e. and e.g."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657766447; cv=none; d=google.com; s=arc-20160816; b=a142p89ZqDApT0df/JXDvHCd2eCLYtXMhZ3d9PN6cDVmNPTNkDzxsF97eGu7zsUW3A k4TkZ78LMuYdz8ScQuBCNdmvVm2AymDo3lCciuKy1IPkevUqGoG1zeBePYotqYffLzkp hqGbjXA5Td5yLY5INJBLN9WNWC9wOYxCZHX6Z8J7EKkdgYKaEvidu1RvkI2/J5RpTmKC GswGvdnwR7wfmSSH7RXym1sK60B/5UuYha4HCF2/5AZ6pGBVB9+/J1xhaieccwhh26cY /61W8R0bub+4EZML7tM5PdhMlJAecUEGdQT57izFfpXx4PM5bLPtrpRDaq0cLAiPN/9Z AAjg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp24764jai; Wed, 13 Jul 2022 19:40:47 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n3-20020a5d5983000000b0021d83b825c2si297886wri.926.2022.07.13.19.40.47 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 19:40:47 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410663@lists.postgresql.org>) id 1oBomV-0002s6-6n for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 02:40:47 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBomQ-0001Kw-Aj for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 02:40:42 +0000", "from mail-io1-xd29.google.com ([2607:f8b0:4864:20::d29]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBomL-00046o-5G for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 02:40:41 +0000", "by mail-io1-xd29.google.com with SMTP id n7so317631ioo.7 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 19:40:36 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFBsxsHr4JO7vRYKZ=UVmyoQC4N+tvPiAB1yCJ-6yUfs80e0gw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220713.180943.589079824955875739.horikyota.ntt@gmail.com> <20220713.181351.787174326048120292.horikyota.ntt@gmail.com>"], "X-Received": ["by 2002:adf:fd02:0:b0:21d:6f22:7857 with SMTP id e2-20020adffd02000000b0021d6f227857mr6209188wrr.633.1657766447678; Wed, 13 Jul 2022 19:40:47 -0700 (PDT)", "by 2002:a02:1981:0:b0:33f:82f:cc41 with SMTP id b123-20020a021981000000b0033f082fcc41mr3466525jab.44.1657766435870; Wed, 13 Jul 2022 19:40:35 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFBsxsHr4JO7vRYKZ%3DUVmyoQC4N%2BtvPiAB1yCJ-6yUfs80e0gw%40mail.gmail.com>"], "In-Reply-To": ["<20220713.181351.787174326048120292.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410663@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000087f85b05e3bad3ca\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410663@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=lSLOUi74aVej8qkKKrlY3qdlBngHMdQEPlG15NoxjdI=; b=CJCfzin1MRR3Shfm8HW+plSUBQ1sTDXjUOCRRyCxtPWN1hIyIxJYj/RG2Zc+gieEmK Q3l+4N9PsWDqrq5JlQuedubOj4uRgHUUngcysdam6hQq6lTk5cxfyo9CKF6ONELxbl6K l9Az7C9idht/KpJ9cFIhBouqmhqwY/GO4vNXk4TlOwr2bb0Yi0P479YuApNiEyXUPvs2 4MK8XvsYKMg/VAuTwAQ4Hm8BV49OK/AtVqVXC4lPClTkiIw7T456WDIsxtHQtnPA9sRk +3BfqdPYyihoOc3kPN2JY9i11ZDobGwsDrNNrm8mi51/aDVQbp7mg7EKMqbtzPNrsx0F sTIw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora85MDZIgORA01LR1XcM+l5NXfrHnekcv/P+qMwqMStJ5u9f8dmW 0AFw6peSxTCnw8FmAPNahNE8rCCwUik1D8A8yeBBLf+IBQdnTItJWuKbLHUjJCSYbxhNcM4e3p/ yzq5g2iZFklPiOo5bwJDaIWcUxi4C8iuXpKzuW1GB/GnVUKjBoB1hnYwu7eXnJa8L1t319KXG0O HV/VJ97heTCey/lcBoZFz388nMuC42YdCxh2g1qvhmhyTVkwgpbKezVfFIe8lH79ndjTLA"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1sGFhUBqxLFRF0PkdlB6J6CRNXgh5vTx/Re8BzAH0Z9LhiNxase5aW82Um9sI8F7ZEW5oTS"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=lSLOUi74aVej8qkKKrlY3qdlBngHMdQEPlG15NoxjdI=; b=ONx8WKzhn0f4IGQ0R3qnpNpcWFDCwa7p+Reedo50EFQX3A29Z5W36fLkQOheAWJ1Uh wofuHCO04u5YCh8mzTL+piSSq6pEIg6fD6fqzDiECiRy7ixIwZYmC0RZMoJ9kd6MgR1f TUpSXH6iahXd3Tjh5826Ub2ds2XTtUQBJXerqpezdfB7SwbSC36zpGYz2FDigWKQq471 SaIJsEV5bg++Vm27t1UemF8x2lEBwYp+tu6rfYyNmzUadLj1SV5svVYbioSEs0Muzuzp S7ObkjFcSZGiSz1EDxH86OFvirVAaiom5K4otuZIaCT1rtquogowICj3/82p4QU0jpbh 3cyw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=CJCfzin1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410663@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410663@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=lSLOUi74aVej8qkKKrlY3qdlBngHMdQEPlG15NoxjdI=; b=t2rVcK1pp22d5k99QeEprjArCE6yS95twlo/AQcMdzdKJM+eUYCoUqz6WvpS5OY2n/ Ag0d4KATb9Vk/ka9gvOJiIguJKAqTs08LxuCee7ppukH2SLUnJbYqFAvNvZFlGu3tTcc js1NU4pDfWDNNVA2d5TpAxMl3AhwcjLf352RE2y6h3mx8XFpiPiWQ+HXp/cMKSZePbqE ztXZrcfrEz3Z87vgLG5z2kx8Q2l+Vw7b0GTK5q+qCrtywLMnnkkCAJFiK0gTRXSZ0VUl OHxeEwt0kVO+iiox//bZAZ/C5iUR7hcqBtDPfuJ3mJekEoTJsYv17VkxQy/L5aE/+I2a lyYg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=CJCfzin1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410663@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410663@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<20220713.181351.787174326048120292.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 03:03:02+00	michael@paquier.xyz	Re: Remove support for Visual Studio 2013	<Ys+HZvHERozifS5g@paquier.xyz>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	44	9881	[]		On Fri, Jul 08, 2022 at 07:38:23AM +0900, Michael Paquier wrote:\r\n> And with 495ed0e now in place, attached is a rebased version.\r\n\r\nHearing nothing about this one, and because it is a nice cleanup\r\noverall, I have gone ahead and applied it:\r\n14 files changed, 24 insertions(+), 177 deletions(-)\r\n\r\nThis removes the dependency on the value of _MSC_VER.\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 12:03:02 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Remove support for Visual Studio 2013"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657767802; cv=none; d=google.com; s=arc-20160816; b=hvMOjLEBMuxt7fPI7ysYlcw7dlg0Ox71DeH7ZEd70rydTy1663tA8BIMxlsmY887AM kvK2OeYKJdlbQjVt+Erw6dd3diMmBJX7qXI0wZvGilCzXJ84xZ8TvYxFM9h8LeVa06MJ 7sR8rONjhzQzAR71g5sIAH5M56yHy8PvkXw8D77X4gnOqVVxSfzzHS9J2fcmVOf+USnw 9w2He0g57nh8OT6lRn/xHXF4h9Fzl6aNQVQU7by7diOiA6sLVzOzm6GGUOAFVFXnXtm6 +gjTqdpqD4pZDkIEujBrnwxTOQds50soN85jwVhf79NoICX8/3ftzggjenxV1B6/09Nx xvqw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp28463jai; Wed, 13 Jul 2022 20:03:22 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id by15-20020a056000098f00b0021d7e3c8cdfsi310444wrb.96.2022.07.13.20.03.21 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 20:03:22 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410665@lists.postgresql.org>) id 1oBp8L-0002Xs-KW for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 03:03:21 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBp8F-0000w2-L1 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:03:17 +0000", "from wout1-smtp.messagingengine.com ([64.147.123.24]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBp8C-0004Hr-Uv for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:03:14 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.west.internal (Postfix) with ESMTP id B1FC332005C1; Wed, 13 Jul 2022 23:03:10 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute2.internal (MEProxy); Wed, 13 Jul 2022 23:03:11 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Wed, 13 Jul 2022 23:03:07 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<Ys+HZvHERozifS5g@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<YoH2IMtxcS3ncWn+@paquier.xyz> <20220526154311.GA19626@telsasoft.com> <Yo/pw2D8MQutXmtR@paquier.xyz> <2459697.1653601840@sss.pgh.pa.us> <YpR2xhVegjXYMvpH@paquier.xyz> <YsdgX6tXUC01jEbw@paquier.xyz>"], "X-Me-Proxy": ["<xmx:bYfPYo111zwjAruzjS9NtS3xZ460TQDwmMwOOsqTWzUQyVEXAqu4eg> <xmx:bYfPYmF_mVsnyhXy_xR3nS5tXrRtEcSlQUzQsAArdgh7bV4ilTK29A> <xmx:bYfPYp_-HvXxQWfOv4ZeytAqVKZzBReFPbZhW1koqqBpzpy17jbU3A> <xmx:bofPYoPFgFUBNKNYP84OIVf6tlgsRCj1jCbxGjAHb_knNYa3IeUkBA>"], "X-Received": ["by 2002:adf:f38f:0:b0:21d:66b5:21c with SMTP id m15-20020adff38f000000b0021d66b5021cmr6096313wro.144.1657767802439; Wed, 13 Jul 2022 20:03:22 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/Ys%2BHZvHERozifS5g%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<YsdgX6tXUC01jEbw@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410665@lists.postgresql.org>"], "X-Me-Sender": ["<xms:bYfPYj1vIPyHNsuPv6UhLD11GhyLRtDsw3p9_HD9GengtES7TslfSQ> <xme:bYfPYiFH8jdSj21kk5XUjVgccboeidzR0NIXTpArFufMFITJSJYxCmu9lYSveiLH_ YsLCUZeSfglS4tVIg>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"GdnFJV6gvru6p6fw\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410665@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:bYfPYj5H3KWo2qOnyrr4EcC5xrwdtRLoeizVZ61XnTf8AAFQc4SN95moSnDnuwaE-aNb0WA1E4khXAjL8VXYqMqMe-Q>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657767790; x=1657854190; bh=ujMNcIzdyE aJ0EZ8PuAExCNC/YNwyeThP/Eu0DlICyU=; b=KqLL18mX3JKLvJeGISKa+cHa+u gO4gwpb/Upqf2aaFfVeIP0FJ1NcU+rKLlzWih7QV5d86TLlk3IDXH4Joy03ee7O2 vTsZCn6LWiGqIUFkpeSk3eXFAao1nRZ0uZgVx30QSYRY0Nkn7tVU7hI0hG5IhcVG j+TNQIP/PNIChjuw9oM/GaIYNLQxEPtiG+0CsYbB7+GzLJKPhiGaBNVOAG72OH8R EQhryr6KUPWoVRMu3B0PqCap+Y8o2t/j4D72MhQwIiILfvAOkifJTB6G0SNOIksX tpXukpuwcFO6j1kaJwSmrKj8i19nVOKyuHxF0BbyYQzhBsWYiaHNbFe+bpTQ==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657767790; x=1657854190; bh=ujMNcIzdyEaJ0EZ8PuAExCNC/YNw yeThP/Eu0DlICyU=; b=RSm2KKUGRSQIWPkM3fKPiTm1FaP9vplDpOcSn4a+SDSd XllkYNIEkyTfI6vgoLBt/R4emjGJ4/PYgVdSkJ6y2JY619C1Y/Mybr1L7LJiucOl ghDV2W5V7nWJxN+ME1QVfFYxRFCP9c8jVZGvxiIckmzGGcN1TskuCwAuwWoe2ibK jqiIBUw4yWV9HVrx+HXMTh0aZ4Jljvx+gpGVNxdHyV4WRSdyTajOFaNFON9Mv6MS 5h3t4ucAdTntPR6dUqq9VB7pzwgWok0t/ThbJGHwhNEy2RQlee81kHSdDxw5fK8U pw+vZy7I7ZZGzh5Ae4RVorQjb99m9cQdE600KECZGA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedgieehucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdljedtmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tddvnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepteelieefudffhffhtdetleeg geegfffhkeeuveetiefgudduvedutefggeeivdejnecuvehluhhsthgvrhfuihiivgeptd enucfrrghrrghmpehmrghilhhfrhhomhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiih ii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vpDLM5ET457ZKmP8lcibxtu+iihsovlrBrVfBziR1krY3iMBql9phbgd6445WTDgRsi9RZ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=ujMNcIzdyEaJ0EZ8PuAExCNC/YNwyeThP/Eu0DlICyU=; b=iffZB3b5Gcxm3eiCWgl3384Vb/jTfsoECFyuJmmst5OpIyKq6kdWy/8nYaM7C5KLQS Uj6mhgxWI3Ho6K6yVjvu2w5uAvk8vR5TTntqG3QvLF+/9mjDpbuESmTbs8/lpaHx2011 c/SRoVrG934g6FmRzmhuFE4RHxEu9IiD35mSE5MfZlw1H+entKpxtr9+qGEMY1T+cnBW zKIlXpSxiavySiX8NjYU+EE1lJXtw8Ku7OtIQQlapzEvG+Y0dTC2OEdVuYkqWL2jWJz5 tRsGSdJy8SquYLijICv2ROcSI5EykZBMMiG1npETx23HC+k0siODsCukDWQm/p+JGcSl sgRQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=KqLL18mX; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=RSm2KKUG; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410665@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410665@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=KqLL18mX; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=RSm2KKUG; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410665@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410665@lists.postgresql.org"]}	["<YsdgX6tXUC01jEbw@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 03:15:24+00	torikoshia@oss.nttdata.com	Re: Add connection active, idle time to pg_stat_activity	<a8ec82fc03dcac57998cdb31a9979cc3@oss.nttdata.com>	[{"Name": "Sergey Dudoladov", "Address": "sergey.dudoladov@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Kuntal Ghosh", "Address": "kuntalghosh.2007@gmail.com"}, {"Name": "Rafia Sabih", "Address": "rafia.pghackers@gmail.com"}]	\N	46	7117	[]		Rafia, Sergey,\r\n\r\n+1 for adding the total_active_time and total_idle_in_transaction_time \r\nto pg_stat_activity.\r\n\r\nI reviewed the patch and here are some comments.\r\n\r\n+      <entry role="catalog_table_entry"><para role="column_definition">\r\n+       <structfield>total_active_time</structfield> <type>double \r\nprecision</type>\r\n+      </para>\r\n+      <para>\r\n+       Time in milliseconds this backend spent in \r\n<literal>active</literal> and\r\n+       <literal>fastpath</literal> states.\r\n\r\nIs 'fastpath' an abbreviation of 'fastpath function call'?\r\nIf so, I feel it's clearer '<literal>fastpath function call</literal>' \r\nthan '<literal>fastpath</literal>'.\r\n\r\n\r\n+extern uint64 pgstat_get_my_active_time(void);\r\n+extern uint64 pgstat_get_my_transaction_idle_time(void);\r\n\r\nAre these functions necessary?\r\nIt seems they are not called from anywhere, doesn't it?\r\n\r\n-- \r\nRegards,\r\n\r\n--\r\nAtsushi Torikoshi\r\nNTT DATA CORPORATION\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "torikoshia", "Address": "torikoshia@oss.nttdata.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, Andres Freund <andres@anarazel.de>, Julien Rouhaud <rjuju123@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Kuntal Ghosh <kuntalghosh.2007@gmail.com>, Rafia Sabih <rafia.pghackers@gmail.com>"], "To": ["Sergey Dudoladov <sergey.dudoladov@gmail.com>"], "Date": ["Thu, 14 Jul 2022 12:15:24 +0900"], "From": ["torikoshia <torikoshia@oss.nttdata.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add connection active, idle time to pg_stat_activity"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657768535; cv=none; d=google.com; s=arc-20160816; b=D8O/6FirTzTpSP98xr1+sMcAhVbBQApv7NhJvKMM2Bckathz7UzTtwLrP04MVoJWn4 E8vzXJhKI75TTSPHs1tyLAVLtsG5YP/cXjLBY/OXywJlZFwRBJ9R50E1KqrbGIz6atI2 9wfLCpqmWC2kCEsOKE0ZNixKys6vLjah4Y7pjP01R5ZHWeS/soJoxbA69fA1ZTXqfefq 7n5Qa0V1CU91EXwJcIGgzVlHlf1xzpO3RScuIbWmP3hwZBJ/RjDjNvvPVd7rWCPovim7 v/GMR8LC6FTNFH2izQ3CdL+4ITjoM3x+PaWQwD8aq5Esq5GituqjgP2FUhCg93C9Qq+X Nc1g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp30855jai; Wed, 13 Jul 2022 20:15:35 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o1-20020a05600002c100b00218503c643fsi416902wry.931.2022.07.13.20.15.35 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 20:15:35 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410668@lists.postgresql.org>) id 1oBpKB-0000od-4z for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 03:15:35 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <torikoshia@oss.nttdata.com>) id 1oBpK6-0007Ue-Eh for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:15:30 +0000", "from oss.nttdata.com ([49.212.34.109]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <torikoshia@oss.nttdata.com>) id 1oBpK3-0004OG-Pr for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:15:29 +0000", "from oss.nttdata.com (localhost [127.0.0.1]) by oss.nttdata.com (Postfix) with ESMTPA id 13EFC60A16; Thu, 14 Jul 2022 12:15:24 +0900 (JST)"], "X-Sender": ["torikoshia@oss.nttdata.com"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<a8ec82fc03dcac57998cdb31a9979cc3@oss.nttdata.com>"], "Precedence": ["bulk"], "References": ["<20220128.143631.654438319295147801.horikyota.ntt@gmail.com> <20220128.144303.648220302965090533.horikyota.ntt@gmail.com> <CAA8Fd-piahPeDNMqt-Kbkkhuak6qbBhiJ+4MaQ2TpYGvQFEciA@mail.gmail.com> <20220201.135516.23011068590309830.horikyota.ntt@gmail.com> <CAA8Fd-pUwWz=2fu3cSzB1iH5f7zQYpeHNmV0-sqK8mxPnq2nnQ@mail.gmail.com> <20220322001335.x76b2htvnih2eofk@alap3.anarazel.de> <CAA8Fd-q+2zpQngKdLk=vu+NVDuJp=5kts-3mJdo-swoAo0kcfw@mail.gmail.com> <d449de03-fa88-0638-c279-65335b995f13@amazon.com> <CAA8Fd-oS8WHe5n6bWZWW07+65dk4p+njCRCV0hMDYPVc-9c0pQ@mail.gmail.com>"], "User-Agent": ["Roundcube Webmail/1.4.11"], "X-Received": ["by 2002:a05:600c:a41:b0:39c:1512:98bd with SMTP id c1-20020a05600c0a4100b0039c151298bdmr13050775wmq.88.1657768535450; Wed, 13 Jul 2022 20:15:35 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/a8ec82fc03dcac57998cdb31a9979cc3%40oss.nttdata.com>"], "In-Reply-To": ["<CAA8Fd-oS8WHe5n6bWZWW07+65dk4p+njCRCV0hMDYPVc-9c0pQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410668@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=US-ASCII; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410668@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Virus-Status": ["Clean"], "X-Virus-Scanned": ["clamav-milter 0.103.6 at oss.nttdata.com"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tN5yZcGXvAQ9w+/jRscpLjRDFaqAGkzZ2j7B1C/hjdfi7KZUvCLCeii9G6Ylt0RYiHuJGf"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:user-agent :references:in-reply-to:subject:cc:to:from:date :content-transfer-encoding:mime-version; bh=1Z5XhuAgTUYyXSgS9jBdlBI0Ye6GoE/r5bHYKsTLE/s=; b=OoOnYiXU2TAGonIZPHEjtVF4yjzGzU/JKrHJ5c+vzSFX4T0c0dBfHjaVd8f77QieA3 d6fwp+jEhEUYgwHb6V7PRv6T7YBsPmFIExhNjeX+Le/I7CTnpwLkeO//HBAhtPDsaQsc 2ilU00PxyyJ8w3XBjt5HsDK/6AzdH+VC8oBpPfSya0QR8AoCukCctuTFZ5GJhpte6cF6 uurOivQr+RrjiogN3mc1r0PQETwbLk6Wqp/mX7ca4cStpkE+u9vqfuvvGR2myUs8TCFN FJ/9AkG0PmPvBAeV0c8JkQM4wm/te0tpJz6V4sC0vOUd/vG91FJiuOpyCxiPTu4RL4Cl Y8+g=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410668@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410668@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410668@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410668@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"]}	["<CAA8Fd-oS8WHe5n6bWZWW07+65dk4p+njCRCV0hMDYPVc-9c0pQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 03:06:07+00	sawada.mshk@gmail.com	Re: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<CAD21AoCZ0xpS-PSLa1ot=TijntYsnHKZ=6u6QAocPcO3E08Q5w@mail.gmail.com>	[{"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	45	11460	[]		On Thu, Jul 14, 2022 at 11:16 AM shiy.fnst@fujitsu.com\r\n<shiy.fnst@fujitsu.com> wrote:\r\n>\r\n> On Tue, Jul 12, 2022 5:23 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> >\r\n> > On Tue, Jul 12, 2022 at 5:58 PM shiy.fnst@fujitsu.com\r\n> > <shiy.fnst@fujitsu.com> wrote:\r\n> > >\r\n> > > It happened when executing the following code because it tried to free a\r\n> > NULL\r\n> > > pointer (catchange_xip).\r\n> > >\r\n> > >         /* be tidy */\r\n> > >         if (ondisk)\r\n> > >                 pfree(ondisk);\r\n> > > +       if (catchange_xip)\r\n> > > +               pfree(catchange_xip);\r\n> > >  }\r\n> > >\r\n> > > It seems to be related to configure option. I could reproduce it when using\r\n> > > `./configure --enable-debug`.\r\n> > > But I couldn't reproduce with `./configure --enable-debug CFLAGS="-Og -\r\n> > ggdb"`.\r\n> >\r\n> > Hmm, I could not reproduce this problem even if I use ./configure\r\n> > --enable-debug. And it's weird that we checked if catchange_xip is not\r\n> > null but we did pfree for it:\r\n> >\r\n> > #1  pfree (pointer=0x0) at mcxt.c:1177\r\n> > #2  0x000000000078186b in SnapBuildSerialize (builder=0x1fd5e78,\r\n> > lsn=25719712) at snapbuild.c:1792\r\n> >\r\n> > Is it reproducible in your environment?\r\n>\r\n> Thanks for your reply! Yes, it is reproducible. And I also reproduced it on the\r\n> v4 patch you posted [1].\r\n\r\nThank you for testing!\r\n\r\n>\r\n> [1] https://www.postgresql.org/message-id/CAD21AoAyNPrOFg%2BQGh%2B%3D4205TU0%3DyrE%2BQyMgzStkH85uBZXptQ%40mail.gmail.com\r\n>\r\n> > If so, could you test it again\r\n> > with the following changes?\r\n> >\r\n> > diff --git a/src/backend/replication/logical/snapbuild.c\r\n> > b/src/backend/replication/logical/snapbuild.c\r\n> > index d015c06ced..a6e76e3781 100644\r\n> > --- a/src/backend/replication/logical/snapbuild.c\r\n> > +++ b/src/backend/replication/logical/snapbuild.c\r\n> > @@ -1788,7 +1788,7 @@ out:\r\n> >     /* be tidy */\r\n> >     if (ondisk)\r\n> >         pfree(ondisk);\r\n> > -   if (catchange_xip)\r\n> > +   if (catchange_xip != NULL)\r\n> >         pfree(catchange_xip);\r\n> >  }\r\n> >\r\n>\r\n> I tried this and could still reproduce the problem.\r\n\r\nDoes the backtrace still show we attempt to pfree a null-pointer?\r\n\r\n>\r\n> Besides, I tried the suggestion from Amit [2],  it could be fixed by checking\r\n> the value of catchange_xcnt instead of catchange_xip before pfree.\r\n\r\nCould you check if this problem occurred when we reached there via\r\ngoto pass, i.e., did we call ReorderBufferGetCatalogChangesXacts() or\r\nnot?\r\n\r\nRegards,\r\n\r\n-- \r\nMasahiko Sawada\r\nEDB:  https://www.enterprisedb.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["\\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "Date": ["Thu, 14 Jul 2022 12:06:07 +0900"], "From": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657768013; cv=none; d=google.com; s=arc-20160816; b=vXl9WmZEy0+tdQ9NBJW9hdZg1/0GX1ei9OYL8edFZGR4TD4YGjvx+ftripPwhK18xx mmplJO4R9TE0SFhzypmACNtvQuEomhbpnF9yz9ghHFPomllNtir0BwuGF9Ql2EyqufvC AWNd1YAjcrw+jsRtR3haf2F0y7XbyMwnsMS68pUAG5oui7F84YkbHF18zFA0Hup0P8mH ZzXt50FMCf8tD6206KaCP8w8crbFgVbdpLUqg5AJrEq8otUkK7vd5zvd6pUQQVY1nAXb R+tpHB63JDmqL4B6P07EKyQ1etrSGrMEwf/Y+k1zsNuBm9W0Al/EBx/bjUnJwLEmvjZD IPDQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp29167jai; Wed, 13 Jul 2022 20:06:54 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id h14-20020a05600c414e00b003a2ca7b4e3bsi556130wmm.180.2022.07.13.20.06.53 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 20:06:53 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410666@lists.postgresql.org>) id 1oBpBl-0007Vn-Bb for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 03:06:53 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBpBg-0005si-KW for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:06:48 +0000", "from mail-pj1-x1033.google.com ([2607:f8b0:4864:20::1033]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oBpBd-00060O-Tb for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 03:06:48 +0000", "by mail-pj1-x1033.google.com with SMTP id o15so1219868pjh.1 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 20:06:45 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAD21AoCZ0xpS-PSLa1ot=TijntYsnHKZ=6u6QAocPcO3E08Q5w@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <TYAPR01MB6315DC425D32E9579B61EDF1FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com> <CAD21AoAQLeO1LezTZSPGhUAF=QebJUeHePbjCm5DpsKXJyQ7eQ@mail.gmail.com> <OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:adf:e28c:0:b0:21d:a8e2:862e with SMTP id v12-20020adfe28c000000b0021da8e2862emr5844511wri.643.1657768013871; Wed, 13 Jul 2022 20:06:53 -0700 (PDT)", "by 2002:a17:90a:7c05:b0:1ee:e40c:589b with SMTP id v5-20020a17090a7c0500b001eee40c589bmr7334700pjf.78.1657768003987; Wed, 13 Jul 2022 20:06:43 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAD21AoCZ0xpS-PSLa1ot%3DTijntYsnHKZ%3D6u6QAocPcO3E08Q5w%40mail.gmail.com>"], "In-Reply-To": ["<OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410666@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410666@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=bIPmT4AuEUUg4/TCwRop/j+8PyC4weLEJuXtgzmGPFg=; b=CIsKqhXohkPuYCMdJTkk9xrcocdMxwt2s3rCmfChUiVAmcrrCDeCvmdWiuoGFCI8MN gFux/DbKZ+RMBCzI8B4t7b/jQrnNC9Oie/N3UsxHsAzSPLpvKFCjdIRu561JWSlStZ+O CvTLPKJY7CETigYYExOlcIDhDP66nwZybu15gi+CwCtuvdySlDbMLK7VKkzPqEjU8Tau hc6RNj77qhtB26f9yGOXkGpVvhWcRwOZz8e32egorjFKxkWX/82d3DSNRlDNi2ef//CP +4dwWCHMFMo7JjVJID8W0B6+FyteRNiCUSyjPIeK/YjfVcjyNCo7LHsqZXFHbDsoUtoE WQ4w=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9bMe3XN8Q8HFWFMzFp3E08rju2wLPDFez+S5M7Uf9lVdlJTAzU hIYPWG4bFBJ8aT5md13iQ8fzPJgUGotb4OBdWQ8="], "X-Google-Smtp-Source": ["AGRyM1v+ZE4PGjlq3NVUOozYuvvnDo1vojI4DQlioMcyYqVj3hxNJQyUQTqsokbpKJxQmSSu3AVo"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=bIPmT4AuEUUg4/TCwRop/j+8PyC4weLEJuXtgzmGPFg=; b=EzzsHNrqH3IuCbW7989P1GZDinwB16yJ2eytTRGgIp158z3XxSpN9IS3ZCxXkxIbyk szmsJZFxiBJV0Yd+wNaN8OHHdmIAMg0r/GOT1OWB2lnuCjU1kjmHjH0OQl/FYK1jOFOK wniqY+5fpDrt55vTxU4gZO+suE3rEscTAzxtLfKZaIEtsgnzMPgV/sVVVCrHHOWWl7Ro Q2bWEbW1b8taAvZs8u8YMALs6nbgozgiP05uRbb0fk890Goh1MM6mgk2ZLc8QbQOS3RE bg3eAh8WYN5i9JJYJvXnD5awe8Q1TmVLeH7L9otEWEFlrQgzQMJk6wTWcPpkAT8q8lOd kLlA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CIsKqhXo; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410666@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410666@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=bIPmT4AuEUUg4/TCwRop/j+8PyC4weLEJuXtgzmGPFg=; b=c5iLAmXIv2vNYo7BqqQm6OxDKAH2SvgUP25OMcZOTA3HbcSrRoRrzTzmbfTuJsR+jG PcJODImUfSRAGa7/lUNnikaOWR4WSnYObCgDm0kLfI3TsH7FirmQ7wEyViJM7e7HKZze TiAHbfy1M/RxKEKFp+PsRqjfXoTDNBZraE/GEjYZ4aTmNODTGbUwxnVphnt4uNNv1fKc jmHyfSIwZ8WDowtfcvZmFA/lKow0HvAZ3XDFO6bqR65yI5jTAW0iYv1MpvZdiDpHCgvV cqyubCUgSh9zFcUgLvz5EY2Cnl7msAk6yccpzBRLhdRdti3i3VlTHEsLJva0lavpyJQa 3YGA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CIsKqhXo; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410666@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410666@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 04:16:55+00	john.naylor@enterprisedb.com	Re: [PoC] Improve dead tuple storage for lazy vacuum	<CAFBsxsGW_aMSw0Odpd=T1UGRyfX2CdjdVqCNBMik-wfnGC0vAA@mail.gmail.com>	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "Yura Sokolov", "Address": "y.sokolov@postgrespro.ru"}, {"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	47	11284	[]		On Tue, Jul 12, 2022 at 8:16 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n\r\n> > > I think that at this stage it's better to define the design first. For\r\n> > > example, key size and value size, and these sizes are fixed or can be\r\n> > > set the arbitary size?\r\n> >\r\n> > I don't think we need to start over. Andres' prototype had certain\r\n> > design decisions built in for the intended use case (although maybe\r\n> > not clearly documented as such). Subsequent patches in this thread\r\n> > substantially changed many design aspects. If there were any changes\r\n> > that made things wonderful for vacuum, it wasn't explained, but Andres\r\n> > did explain how some of these changes were not good for other uses.\r\n> > Going to fixed 64-bit keys and values should still allow many future\r\n> > applications, so let's do that if there's no reason not to.\r\n>\r\n> I thought Andres pointed out that given that we store BufferTag (or\r\n> part of that) into the key, the fixed 64-bit keys might not be enough\r\n> for buffer mapping use cases. If we want to use wider keys more than\r\n> 64-bit, we would need to consider it.\r\n\r\nIt sounds like you've answered your own question, then. If so, I'm\r\ncurious what your current thinking is.\r\n\r\nIf we *did* want to have maximum flexibility, then "single-value\r\nleaves" method would be the way to go, since it seems to be the\r\neasiest way to have variable-length both keys and values. I do have a\r\nconcern that the extra pointer traversal would be a drag on\r\nperformance, and also require lots of small memory allocations. If we\r\nhappened to go that route, your idea upthread of using a bitmapset of\r\nitem offsets in the leaves sounds like a good fit for that.\r\n\r\nI also have some concerns about also simultaneously trying to design\r\nfor the use for buffer mappings. I certainly want to make this good\r\nfor as many future uses as possible, and I'd really like to preserve\r\nany optimizations already fought for. However, to make concrete\r\nprogress on the thread subject, I also don't think it's the most\r\nproductive use of time to get tied up about the fine details of\r\nsomething that will not likely happen for several years at the\r\nearliest.\r\n\r\n--\r\nJohn Naylor\r\nEDB: http://www.enterprisedb.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Matthias van de Meent <boekewurm+postgres@gmail.com>, Yura Sokolov <y.sokolov@postgrespro.ru>, PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "Date": ["Thu, 14 Jul 2022 11:16:55 +0700"], "From": ["John Naylor <john.naylor@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PoC] Improve dead tuple storage for lazy vacuum"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657772235; cv=none; d=google.com; s=arc-20160816; b=BV7nGNIzml4kBskq7aNhke3V4p1M+pqVLvW3vPb7i84qtuhbMsfYb62GfQRpuSCUex jouoLZgghQ8ClGvVsx/rh7phtuL9iIUO4sT/odiSy3rHf9F8LthOsYHqCIz4q0WehZec GLyo2uRxx1VSAd7cMwtyGsmbYEGJfkdGQTrw1FlxQHac9SQdvjeXPEPkLqfiF/Q/dI4u utrkt0R5Lgl7QSoB7RCbaoTWJy5XLtyW8nAq5zWryzDAqbvq/JTDpera6euAoStqnfo+ Hs3swbz0+4IfW4YPjQHVCDK/plto5gqZ5ytVp39o2NCMNEs13f2jg4pduxNqY7X3uaVD 4LFQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp41226jai; Wed, 13 Jul 2022 21:17:15 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c6-20020a05600c0a4600b00398cec6c385si5617028wmq.0.2022.07.13.21.17.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 21:17:15 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410675@lists.postgresql.org>) id 1oBqHq-0001gy-B8 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 04:17:14 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBqHl-00005J-Ry for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:17:09 +0000", "from mail-io1-xd2d.google.com ([2607:f8b0:4864:20::d2d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBqHj-0004pF-Fb for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 04:17:08 +0000", "by mail-io1-xd2d.google.com with SMTP id b17so453831iof.4 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 21:17:07 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFBsxsGW_aMSw0Odpd=T1UGRyfX2CdjdVqCNBMik-wfnGC0vAA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<c5a74d6832924e02c418e28573607f0b@postgrespro.ru> <CAD21AoDy2rmw7dGaGoFqkzxsd+kFg2ttz-bV1D8i=epCXrfWWA@mail.gmail.com> <CAD21AoATJQM4PuQ46NvQAAuxUcATmb7udFyummFHPN-QhUcL5g@mail.gmail.com> <20210728185259.g5pswu26odfqddxq@alap3.anarazel.de> <CAD21AoDf2j=gpNpVATXe+b27Xf1pNNhMMgs+oK3esOTjbZjHrg@mail.gmail.com> <CA+TgmoZy2ygb4AFq33g51BDkQpKZF32XQ_=+2mEANv_cQUzteg@mail.gmail.com> <5a884fd4189793279ecc33edefb938ad@postgrespro.ru> <CAEze2Wjb=BBSY_Dqnf+ht8KZw9obmwm8un6VOFdyPcGOYP8pZw@mail.gmail.com> <20220213020255.vjcamllo47xo2w4e@alap3.anarazel.de> <CAD21AoCLR17FzoUQf=13tAVL0kFbsfnW5rhmetTtM1rBZr+jzQ@mail.gmail.com> <20220213033954.ubq7hzsxzufr5efv@alap3.anarazel.de> <CAD21AoDFaBQrxCQpLetqeoiJCQn7N1G+Sf+QZQy0sn6Wa8mSsg@mail.gmail.com> <CAFBsxsGJXHezeP-zSh0ifvpN_Gj9umcMjFjchhX5v4NC3BakUg@mail.gmail.com> <CAD21AoCfwP6GsnoOuQ=dCAXQV65JQBv84t65t+RaQ6fBdqzYKQ@mail.gmail.com> <CAD21AoCuMd7VUgM1ae85WJ-OSf8CH7UNJRZr9V_nV5cMx=gTbA@mail.gmail.com> <CAFBsxsGQMZTq8d682ZWt9M=i_x7qUN-_0RwGmHSTfxAxo76RuQ@mail.gmail.com> <CAD21AoC2eA_OdwMmBvj7XDxwmdHU4_tBac8G1GgF2OFzZZ7SRA@mail.gmail.com> <CAFBsxsGOOuf1Sfi=ByO4WBUhqSUWj+P7xWZpmrMK3BA19pOuUg@mail.gmail.com> <CAD21AoAuEPyK2Jf9ScZNd-vGzrqcyx5S_g-jGL__3CsykNJV_Q@mail.gmail.com> <CAFBsxsHWW4gX5ze46Q4aPUZGP0T9dSJaUDdq5DMT6rqyWU-W8g@mail.gmail.com> <CAD21AoCsxc=B8pdtKVSPhL26Wvqd3tWfUDC4kRqubKFrpJBGNA@mail.gmail.com> <CAFBsxsFQehrg401Mbkgfg9odAJMTiH2ZOP5i7Z5Ku4rzy0=LSg@mail.gmail.com> <CAD21AoB+M2S4RWHF0ofizq64nJdD_GKUtRHSwAnSGq5tpZnH_w@mail.gmail.com> <CAFBsxsHEtfh76iZihHDwCT=Va8ubOqmMendk8jHZaE_L3m8ZsA@mail.gmail.com> <CAD21AoATLuGOk7mEXXfXXqr7cq+1vWG4bh+YKrrFgukpbyjGeQ@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:2196:b0:3a2:feff:4c42 with SMTP id e22-20020a05600c219600b003a2feff4c42mr3200854wme.163.1657772235204; Wed, 13 Jul 2022 21:17:15 -0700 (PDT)", "by 2002:a05:6602:360b:b0:645:db81:a5ab with SMTP id bc11-20020a056602360b00b00645db81a5abmr2595672iob.71.1657772226420; Wed, 13 Jul 2022 21:17:06 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFBsxsGW_aMSw0Odpd%3DT1UGRyfX2CdjdVqCNBMik-wfnGC0vAA%40mail.gmail.com>"], "In-Reply-To": ["<CAD21AoATLuGOk7mEXXfXXqr7cq+1vWG4bh+YKrrFgukpbyjGeQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410675@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410675@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=I5CAviZyAz4H74feUohul3XdtUny6bOKf0SPKx2lsWo=; b=QIX2cuC3qIzDhw0a/yWJ8JHekUb7tOVTP0KPcSL+XRnnYrzTpwR2DIsBCOcn6lnejg n+NF9o6hbH8lImFU132Oo/AkH1YVF9tyRWdup047uUNV5uQfomFm7OQpFfkYeT4pFhx2 Zg4k1pmS6Qqd8Iu/7OwF0GLTuQB79ptJh6JeL9XWBpir4yzI2oP9n2tXCTirYZUOUQGE nt/yWqsQdd+kOKD6ag3Tt6HMeBrDgw9eZBfZhPfH43QR2YbUkkPArTYb/8Xl3B2QMXlc Pr2AaoZxs1Krzk7AV/inTqG7N8fIFkl4UjPtxF2FIKdmJl/dtdilDsf6S0pUtVxYWlUV 9UgQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/DfzRiEhG0nNt80WX5CXBa8mftas/48RnriLMr4hym39otAh10 DY9u3rl2jB3/r7I4S8UG1HoaKIBM1aMdh5iC06ADkYPv7IqkQE3fliNkmiS+c79ISSa0Yp9GfPS EQ/L1gZpVVtjnGAViXhy5Pov2uZgCtl33TKf9ZeBXE3tRwvqMJ5pDUMkVld4HZVJHGUQPIh9xaz V687fApXGTYZRP4AEdlMoNELBV/3W5QuEK8m2wHgproaTa8hX1/x79"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1vP28W4hS09QiCu94/qdNr7F5wx0mV8BXcuav0VItsuDOWA+Y+9pwcp/hCBajw6g1qeO46H"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=I5CAviZyAz4H74feUohul3XdtUny6bOKf0SPKx2lsWo=; b=SlEs6Ub9HdrkCFfPiXfIHoZ2LAZlANGFR6tsmi/d/w1Iz0GiUCLSGjIOALbILYgGR8 L7l80DyRn2kVbnf3aEekXgN9HhB3k8ryowe5YBH4yqL6vdwJXiWSzzrw4JC0jdZv5b3w rl+e3m9W/6NZargvissB3BN0lvy3P893B19wfkCSjR85J4lT6KqudF9ncJBTeEjwQZgi 3ffQqckzxfssBjhvZvYobHWEc2+1TFSa0Qnt6LY4Pro3BfLue5SPVDYxiURoGIuhSGFG N9OPmZLHnFnCtCkz+m4ov5+6aLbkVQkSNZoN+b1vOQKiK00rkxTa3SRPUNnKGiZ9iMNB 6vUg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=QIX2cuC3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410675@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410675@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=I5CAviZyAz4H74feUohul3XdtUny6bOKf0SPKx2lsWo=; b=zdMAQfLSy3c3q7iOYrzmcQ722oxMR/7Xu1O3Mg25M9U/C+izNSDxi5xrcnSms8cDa9 l4QoXjwmh9oS0juxjhvnj1ee+fzdNO89jAo79XFNoLduZHR+m6rkCCIABsu8AHU/qA26 cLS0adFWSdji5KY5M+k6iLF0GTjRdg3eYaceHgRLCJr3qqeAXioC6zfXNM4cQ7ZGaFIQ c+TRywB0xnFXx9s07ux6UBFqENC+2FMh9b+aXAbb//WOq595sUABpiA5Lu0Gdnt4B9bh +kMTlA1NU2mPXn3BztMQV892Vyv3BepKoJzvSnMnCHYj2aGE6o91QuWzf3hwB2chvHYk cNjQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=QIX2cuC3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410675@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410675@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CAD21AoATLuGOk7mEXXfXXqr7cq+1vWG4bh+YKrrFgukpbyjGeQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 04:45:35+00	smithpb2250@gmail.com	Re: Data is copied twice when specifying both child and parent table in publication	<CAHut+Pu=POft2HuOqJt_7-OJHseajic5Ukj8J89qAJQ4wRXXHQ@mail.gmail.com>	[{"Name": "wangw.fnst@fujitsu.com", "Address": "wangw.fnst@fujitsu.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "osumi.takamichi@fujitsu.com", "Address": "osumi.takamichi@fujitsu.com"}, {"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}, {"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}, {"Name": "Amit Langote", "Address": "amitlangote09@gmail.com"}, {"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "pgsql-hackers@lists.postgresql.org", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Dilip Kumar", "Address": "dilipbalaut@gmail.com"}, {"Name": "Greg Nancarrow", "Address": "gregn4422@gmail.com"}, {"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	\N	48	15842	[]		Here are some review comments for the v6 patch (HEAD only):\r\n\r\n============\r\nHEAD_v6-0001\r\n============\r\n\r\n1. Commit message\r\n\r\nIf there are two publications that publish the parent table and the child table\r\nseparately, and both specify the option PUBLISH_VIA_PARTITION_ROOT, subscribing\r\nto both publications from one subscription causes initial copy twice. What we\r\nexpect is to be copied only once.\r\n\r\n~\r\n\r\nI don‚Äôt think the parameter even works in uppercase, so maybe better to say:\r\nPUBLISH_VIA_PARTITION_ROOT -> 'publish_via_partition_root'\r\n\r\n~~~\r\n\r\n2.\r\n\r\nWhat we expect is to be copied only once.\r\n\r\nSUGGESTION\r\nIt should only be copied once.\r\n\r\n~~~\r\n\r\n3.\r\n\r\nTo fix this, we extend the API of the function pg_get_publication_tables.\r\nNow, the function pg_get_publication_tables could receive the publication list.\r\nAnd then, if we specify option viaroot, we could exclude the partitioned table\r\nwhose ancestor belongs to the publication list when getting the table\r\ninformations.\r\n\r\n~\r\n\r\nDon't you mean "partition table" instead of "partitioned table"?\r\n\r\nSUGGESTION (also reworded)\r\nTo fix this, the API function pg_get_publication_tables has been\r\nextended to take a publication list. Now, when getting the table\r\ninformation, if the publish_via_partition_root is true, the function\r\ncan exclude a partition table whose ancestor is also published by the\r\nsame publication list.\r\n\r\n======\r\n\r\n4. src/backend/catalog/pg_publication.c - pg_get_publication_tables\r\n\r\n- publication = GetPublicationByName(pubname, false);\r\n+ arr = PG_GETARG_ARRAYTYPE_P(0);\r\n+ deconstruct_array(arr, TEXTOID, -1, false, TYPALIGN_INT,\r\n+   &elems, NULL, &nelems);\r\n\r\nMaybe should have some comment to describe that this function\r\nparameter is now an array of publications names.\r\n\r\n~~~\r\n\r\n5.\r\n\r\n+ /* get Oids of tables from each publication */\r\n\r\nUppercase comment\r\n\r\n~~~\r\n\r\n6.\r\n\r\n+ ArrayType  *arr;\r\n+ Datum    *elems;\r\n+ int nelems,\r\n+ i;\r\n+ Publication *publication;\r\n+ bool viaroot = false;\r\n+ List    *pub_infos = NIL;\r\n+ ListCell   *lc1,\r\n+    *lc2;\r\n\r\nThe 'publication' should be declared only in the loop that uses it.\r\nIt's also not good that this is shadowing the same variable name in a\r\nlater declaration.\r\n\r\n~~~\r\n\r\n7.\r\n\r\n+ * Publications support partitioned tables, although all changes\r\n+ * are replicated using leaf partition identity and schema, so we\r\n+ * only need those.\r\n  */\r\n+ if (publication->alltables)\r\n+ current_tables = GetAllTablesPublicationRelations(publication->pubviaroot);\r\n+ else\r\n+ {\r\n+ List    *relids,\r\n+    *schemarelids;\r\n+\r\n+ relids = GetPublicationRelations(publication->oid,\r\n+ publication->pubviaroot ?\r\n+ PUBLICATION_PART_ROOT :\r\n+ PUBLICATION_PART_LEAF);\r\n+ schemarelids = GetAllSchemaPublicationRelations(publication->oid,\r\n+ publication->pubviaroot ?\r\n+ PUBLICATION_PART_ROOT :\r\n+ PUBLICATION_PART_LEAF);\r\n+ current_tables = list_concat(relids, schemarelids);\r\n+ }\r\n\r\nSomehow I was confused by this comment because it says you only need\r\nthe LEAF tables but then the subsequent code is getting ROOT relations\r\nanyway... Can you clarify the comment some more?\r\n\r\n~~~\r\n\r\n8.\r\n\r\n+ bool viaroot = false;\r\n\r\nI think that should have a comment something like:\r\n/* At least one publication is using publish_via_partition_root */\r\n\r\n~~~\r\n\r\n9.\r\n\r\n+ /*\r\n+ * Record the published table and the corresponding publication so\r\n+ * that we can get row filters and column list later.\r\n+ */\r\n+ foreach(lc1, tables)\r\n+ {\r\n+ Oid relid = lfirst_oid(lc1);\r\n+\r\n+ foreach(lc2, pub_infos)\r\n+ {\r\n+ pub_info   *pubinfo = (pub_info *) lfirst(lc2);\r\n+\r\n+ if (list_member_oid(pubinfo->table_list, relid))\r\n+ {\r\n+ Oid    *result = (Oid *) malloc(sizeof(Oid) * 2);\r\n+\r\n+ result[0] = relid;\r\n+ result[1] = pubinfo->pubid;\r\n+\r\n+ results = lappend(results, result);\r\n+ }\r\n+ }\r\n  }\r\n\r\nI felt a bit uneasy about the double-looping here. I wonder if these\r\n'results' could have been accumulated within the existing loop over\r\nall publications. Then the results would need to be filtered to remove\r\nthe ones associated with removed partitions. Otherwise with 10000\r\ntables and also many publications this (current) double-looping seems\r\nlike it might be quite expensive.\r\n\r\n======\r\n\r\n10. src/backend/commands/subscriptioncmds.c - fetch_table_list\r\n\r\n+ if (check_columnlist && server_version >= 160000)\r\n\r\nThis condition does not make much sense to me. Isn‚Äôt it effectively\r\nsame as saying\r\nif (server_version >= 150000 && server_version >= 160000)\r\n\r\n???\r\n\r\n~~~\r\n\r\n11.\r\n\r\n+ /*\r\n+ * Get the list of tables from publisher, the partitioned table whose\r\n+ * ancestor is also in this list should be ignored, otherwise the\r\n+ * initial date in the partitioned table would be replicated twice.\r\n+ */\r\n\r\n11.a\r\nIsn't this comment all backwards? I think you mean to say "partition"\r\nor "partition table" (not partitioned table) because partitions have\r\nancestors but partition-ED tables don't.\r\n\r\n\r\n11.b\r\n"initial date" -> "initial data"\r\n\r\n======\r\n\r\n12. src/test/subscription/t/013_partition.pl\r\n\r\n-# Note: We create two separate tables, not a partitioned one, so that we can\r\n-# easily identity through which relation were the changes replicated.\r\n+# Note: We only create one table for the partition table (tab4) here.\r\n+# Because we specify option PUBLISH_VIA_PARTITION_ROOT (see pub_all and\r\n+# pub_lower_level above), all data should be replicated to the partition table.\r\n+# So we do not need to create table for the partitioned table.\r\n\r\n12.a\r\nAFAIK "tab4" is the *partitioned* table, not a partition. I think this\r\ncomment has all the "partitioned" and "partition" back-to-front.\r\n\r\n12.b\r\nAlso please say ‚Äúpublish_via_partition_root" instead of\r\nPUBLISH_VIA_PARTITION_ROOT\r\n\r\n======\r\n\r\n13. src/test/subscription/t/028_row_filter.pl\r\n\r\n@@ -723,8 +727,11 @@ is($result, qq(t|1), 'check replicated rows to\r\ntab_rowfilter_toast');\r\n # - INSERT (16)        YES, 16 > 15\r\n $result =\r\n   $node_subscriber->safe_psql('postgres',\r\n- "SELECT a FROM tab_rowfilter_viaroot_part");\r\n-is($result, qq(16), 'check replicated rows to tab_rowfilter_viaroot_part');\r\n+ "SELECT a FROM tab_rowfilter_viaroot_part ORDER BY 1");\r\n+is($result, qq(16\r\n+17),\r\n+ 'check replicated rows to tab_rowfilter_viaroot_part'\r\n+);\r\n\r\nThere is a comment above that code like:\r\n# tab_rowfilter_viaroot_part filter is: (a > 15)\r\n# - INSERT (14)        NO, 14 < 15\r\n# - INSERT (15)        NO, 15 = 15\r\n# - INSERT (16)        YES, 16 > 15\r\n\r\nI think should modify that comment to explain the new data this patch\r\ninserts - e.g. NO for 13 and YES for 17...\r\n\r\n------\r\nKind Regards,\r\nPeter Smith.\r\nFujitsu Australia\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, \\"osumi.takamichi@fujitsu.com\\" <osumi.takamichi@fujitsu.com>, \\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>, \\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>, Amit Langote <amitlangote09@gmail.com>, Peter Eisentraut <peter.eisentraut@enterprisedb.com>, \\"pgsql-hackers@lists.postgresql.org\\" <pgsql-hackers@lists.postgresql.org>, Dilip Kumar <dilipbalaut@gmail.com>, Greg Nancarrow <gregn4422@gmail.com>, vignesh C <vignesh21@gmail.com>"], "To": ["\\"wangw.fnst@fujitsu.com\\" <wangw.fnst@fujitsu.com>"], "Date": ["Thu, 14 Jul 2022 14:45:35 +1000"], "From": ["Peter Smith <smithpb2250@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Data is copied twice when specifying both child and parent table in publication"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657773962; cv=none; d=google.com; s=arc-20160816; b=pyNqsOHritDP7IF2MBObG/dhYxBAOvEwpqhCYs1frbY1h23TBvlj2/Ngkx3fXXPmXf ssPZxA7C/zjS3JkkrR6f1YCmGR2zQ7frAI8DAYuQkNCBcRlYTjsawpYOzW5D2N86bN6u G4ynnKgn+E+1rPBMbNM/d49Z/rTfDVf6tVik2cz3OE3NOh9BoKB1xRnVjx0qR95yhnNp vRql5hXauZjwKsUTLDz195P1Q6SBWyGQy8L/xG3YsMmMkKhnkT7tIsC5nNbe+Yf1elvl KyvQyVXkpF3f8Jz3tFM5QsGHDfuZ9O7MUL+g0XBEljrEJCDqp6COGsuY90ZVVhXgDQjW dtUw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp45001jai; Wed, 13 Jul 2022 21:46:03 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t20-20020a7bc3d4000000b003a04514c08asi4214451wmj.126.2022.07.13.21.46.02 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 21:46:02 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410677@lists.postgresql.org>) id 1oBqjh-0003Yj-UV for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 04:46:01 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <smithpb2250@gmail.com>) id 1oBqjf-000324-Q9 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:46:00 +0000", "from mail-oi1-x22e.google.com ([2607:f8b0:4864:20::22e]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <smithpb2250@gmail.com>) id 1oBqjZ-000590-4i for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:45:58 +0000", "by mail-oi1-x22e.google.com with SMTP id r191so1097234oie.7 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 21:45:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAHut+Pu=POft2HuOqJt_7-OJHseajic5Ukj8J89qAJQ4wRXXHQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAA4eK1+RyFHLv1K+3qCdRmqEO0bz68Ga=Tzomvq4Rc40HnNO8A@mail.gmail.com> <CAA4eK1Jy126np5v8wc-k-MTbnneYDhXrjdC0oNriU8ibGcMdGg@mail.gmail.com> <OS0PR01MB5716DC2982CC735FDE388804940B9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OS3PR01MB6275CD6236DEB022C0785E9B9EE69@OS3PR01MB6275.jpnprd01.prod.outlook.com> <OS0PR01MB5716546D48042D44C3F0675794F29@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OSZPR01MB63109BE4F5521C542A75AC9BFDF29@OSZPR01MB6310.jpnprd01.prod.outlook.com> <CAA4eK1LWYqCyDM1_6wZETS0fZ79u+ciU8MAB3eu+R9Keg96rUg@mail.gmail.com> <OS3PR01MB6275CC45E9BC9297261865559EF99@OS3PR01MB6275.jpnprd01.prod.outlook.com> <OSZPR01MB631098CBD1208A4B5A2241E1FDFD9@OSZPR01MB6310.jpnprd01.prod.outlook.com> <OS3PR01MB62751C2FA25E23E24AB6980B9EC69@OS3PR01MB6275.jpnprd01.prod.outlook.com> <TYCPR01MB837349ADD6D0DEEC758CD444EDC89@TYCPR01MB8373.jpnprd01.prod.outlook.com> <TYCPR01MB8373BEA17F82CBFC5121AF65EDCB9@TYCPR01MB8373.jpnprd01.prod.outlook.com> <OS3PR01MB6275E64C5C8BD561FD6E57359ECA9@OS3PR01MB6275.jpnprd01.prod.outlook.com> <CAA4eK1LYJ6smbQQz98A8KLP9QFZTwMR6u8AFSfuMkeA1=DrcCA@mail.gmail.com> <OSZPR01MB62789D224DEEBA60924301599ECA9@OSZPR01MB6278.jpnprd01.prod.outlook.com> <CAA4eK1+h4DNyWFP08XZbmZ1Q7c-7g8SD7Kv0dfUChYofyPVfdQ@mail.gmail.com> <OS3PR01MB6275B26B6BDF23651B8CE86D9ED19@OS3PR01MB6275.jpnprd01.prod.outlook.com> <OS3PR01MB6275937EAEE44CC137711F489ED19@OS3PR01MB6275.jpnprd01.prod.outlook.com> <OS3PR01MB6275AFA91925615A4AA782D09EBD9@OS3PR01MB6275.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:a5d:6c62:0:b0:21d:c697:87f2 with SMTP id r2-20020a5d6c62000000b0021dc69787f2mr339355wrz.283.1657773962864; Wed, 13 Jul 2022 21:46:02 -0700 (PDT)", "by 2002:a05:6808:1446:b0:335:97fc:fd7a with SMTP id x6-20020a056808144600b0033597fcfd7amr3597090oiv.46.1657773951938; Wed, 13 Jul 2022 21:45:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAHut%2BPu%3DPOft2HuOqJt_7-OJHseajic5Ukj8J89qAJQ4wRXXHQ%40mail.gmail.com>"], "In-Reply-To": ["<OS3PR01MB6275AFA91925615A4AA782D09EBD9@OS3PR01MB6275.jpnprd01.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410677@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410677@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc:content-transfer-encoding; bh=QowoZbFJpdXl8nxs5umra7pmahxLKQzv/BfiktCwlcU=; b=nJyY8dHvboUU5wBSetRsnAMtOVWZrKUWmAvGDMssjUVJhIDSU+PBTF8IDrjbkco8ZN BVsWVFVWujXM9gdfWiMl072uaCJrACv2kw8jX1ZLFDBX3TobJ2LqXctsldR0skuR04vQ exe8F5PFxSEX+QvDMY8Esu24yqOdLx1UO/K02GZfGoVlvcQkp28Dy/bLvbHOt+4vbF5+ MtO1kcYfuWdiZITPpTRFV13r0/cDYSwW6qcsvp59UF3D1gzMw4HKY5b5F+0zDcIRG8N5 db116A3320sbLFzigTV+j+T19xkk3oxqVHt/7Qv0wl8v0U6BowKsS+7TzTnVOtrgPQjs PIQA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/w0bPf3TmRIge/lU5+0G6itJEAwUa7eWCA5JZOmvRNgzv4lL8N DyIz0H6htnCEbwizbnsxgDaTY8M+SItQnzXRKFU="], "X-Google-Smtp-Source": ["AGRyM1vqziCAlF0UR0JVgImqN6jXGmp2HWtpNu93tyoREmjLgYfX8Me4I+T0WW3UcUis+qC/3CFe"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:cc:to:subject:message-id:date:from :in-reply-to:references:mime-version:dkim-signature; bh=QowoZbFJpdXl8nxs5umra7pmahxLKQzv/BfiktCwlcU=; b=s9wWMKA4A7343u0GkzmEQkdWFMejLDcNXZfBm/+zNjxZ6vJ8Nnrl8M1HP5lLnRkW7S AnBdpiG4YPzSu9L0X+V5jwil+SZ/j1AnCLIHTPt94L0rziz95ZfAX5HAqR5obJ/B9tSS ARxTAYdVEk4E84eXTsgKjJT+tZRunNbsptN0G4ywTNQK2o4nkOv2UmmksWRchRe2diT8 IDFo0R5k1wOHoFpyAI4TMburYutxBSiYN32XicrxzbQ0jtYkDER1qLe2k4IUzphnBKv7 YirB3Nhccuq6EZs/IPEADlOTo1IHHCFOLjk4rMCjR0uIWHgvNjjWLp2t4JoBwfG6RBxy reLw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=nJyY8dHv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410677@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410677@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc:content-transfer-encoding; bh=QowoZbFJpdXl8nxs5umra7pmahxLKQzv/BfiktCwlcU=; b=SYxC94JL4iOqzVnKNbLGcHEF0Y5W5IrB9YxlAevf91s8npv24jxSqSFiFelxlV8W6i t8ykrP/kjv+R6v90kOcszF3J5xn71jVv5N4ZlXwYwQW2Cx71E20o4b3eI93wnNcVqnbT +na7mal2G3iks7cDH/FpWrfwzBlF+sh63O+QGtv4YvJldq41jdwqWWlSYol2O+zS9WKF NhJoCXYvuGVg3lXSudQ43Sk6wKfj/KV27k4LQk6Wza0tmH0SOHIFum+eLwaZYA2p7r+I 3WqH4rEVnzQz26GyIwDw2VRWY4rIlKB01U8Lc2DwXrKGAWqNDJc9JOtOHINPhMuRlwRr schA=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=nJyY8dHv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410677@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410677@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<OS3PR01MB6275AFA91925615A4AA782D09EBD9@OS3PR01MB6275.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 04:50:40+00	tgl@sss.pgh.pa.us	Re: pg_parameter_aclcheck() and trusted extensions	<2651679.1657774240@sss.pgh.pa.us>	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Joe Conway", "Address": "mail@joeconway.com"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	50	5773	[]		John Naylor <john.naylor@enterprisedb.com> writes:\r\n> The RMT has discussed this item further, and we agree an ABI break is\r\n> acceptable for resolving this issue.\r\n\r\nCool, I'll produce a patch soon.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Joe Conway <mail@joeconway.com>, Nathan Bossart <nathandbossart@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["John Naylor <john.naylor@enterprisedb.com>"], "Date": ["Thu, 14 Jul 2022 00:50:40 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657774249; cv=none; d=google.com; s=arc-20160816; b=g317+zwyL0EPQkEWSAHHwsR7oF6otKGPgPlV7vFkNIQ9ZXdNMmoPpz+L/CsuBnxSnf oJlWK9ncOsL/pZTVLrXFd35gIEHQByWhiRODUdz60u6ZQ6ZQi7yCWDnqe5Hlyq/Cty7/ lB7TmuHh+gMUtP0oChDERx3Th/zaPPgYIOim7q1QNu4W9UlJj+/eevL4LT2lz9S0r8CW /BXpFrXiquu94DlE4A7WCWbBatMoiwli//hFwtRy9rrIcsBbokiIu7CHotbgNRUI9rx1 RV3cGSdtQ0GIeJGX50luLo7AWv5rnvcr6uo0povqTHEAtMw1JGsdwf3Db4phQxA1Uh9Y JFMg=="], "Comments": ["In-reply-to John Naylor <john.naylor@enterprisedb.com> message dated \\"Thu, 14 Jul 2022 11:48:35 +0700\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp45672jai; Wed, 13 Jul 2022 21:50:50 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id a1-20020a056000050100b0021d7f50f9a6si536294wrf.273.2022.07.13.21.50.49 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 21:50:49 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410679@lists.postgresql.org>) id 1oBqoL-0003XQ-DN for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 04:50:49 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBqoJ-00034r-ET for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:50:47 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oBqoG-0005BS-Sg for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 04:50:46 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26E4oeA42651680; Thu, 14 Jul 2022 00:50:40 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2651678.1657774240.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2651679.1657774240@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us> <20220707184001.GA2255643@nathanxps13> <3032103.1657220409@sss.pgh.pa.us> <360a4f7c-26d5-4d55-fceb-80a53f1f0ce8@joeconway.com> <YsfKDTsMlhEokz5+@paquier.xyz> <CAFBsxsG=ujE-ZvB8VeBTUSMO2=P2Fj14JPPnSvouPdZFo8Pk2A@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:3ace:b0:3a0:4ea4:5f77 with SMTP id d14-20020a05600c3ace00b003a04ea45f77mr6876293wms.57.1657774249940; Wed, 13 Jul 2022 21:50:49 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2651679.1657774240%40sss.pgh.pa.us>"], "In-Reply-To": ["<CAFBsxsG=ujE-ZvB8VeBTUSMO2=P2Fj14JPPnSvouPdZFo8Pk2A@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410679@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410679@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tORr9JkyHOK00Kv5AjZEm2koyI1UN9psUPQgnt+J115EtWckidUTIuJ7EX1L+t3x4rxz9/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=Ut0iNr5tvjJGSnD4sWdFDh/fJ5VNWG6MjxPOdA34gXY=; b=DWYPg69Bi9g9nO9LGYtR01e326xGwFDUO+n4W7Vnzfu7W+arrdy1tiWPkGzi+yZoCK Wke5Uqx5gqe/PHzMwgM/kpk5oy/0jQQvHSjQkSmzNwMuDr9Ehg5iIYgeDgTB2JD9qnzQ kFiKwMr8d9oCYRbc0ifZ/iNMTjQYsG5FIYArE1z3PSSuCDrpH+7d0cqNapV3/aZr/yWd Qo1lomXhPhXl+v5tfU60ISRhDlYgfbXb7byIQmvzC2QsxdaNDhY8b61IfjHHRM0GsLip mrzkS8rBMebSP8C+mm+DKDU2w03q5Joc6XYzDwHHJArrSmoCUfpVf+/Y5F2jMbHAxqk3 QSeQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410679@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410679@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410679@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410679@lists.postgresql.org"]}	["<CAFBsxsG=ujE-ZvB8VeBTUSMO2=P2Fj14JPPnSvouPdZFo8Pk2A@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 04:48:35+00	john.naylor@enterprisedb.com	Re: pg_parameter_aclcheck() and trusted extensions	<CAFBsxsG=ujE-ZvB8VeBTUSMO2=P2Fj14JPPnSvouPdZFo8Pk2A@mail.gmail.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Joe Conway", "Address": "mail@joeconway.com"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	49	11505	[]	<div dir="ltr"><br>On Fri, Jul 8, 2022 at 1:09 PM Michael Paquier &lt;<a href="mailto:michael@paquier.xyz">michael@paquier.xyz</a>&gt; wrote:<br>&gt;<br>&gt; On Thu, Jul 07, 2022 at 03:43:03PM -0400, Joe Conway wrote:<br>&gt; &gt; On 7/7/22 15:00, Tom Lane wrote:<br>&gt; &gt;&gt; The aspect that is a bit more debatable is whether to trouble with<br>&gt; &gt;&gt; a set_config_option() wrapper to avoid the API break in v15.<br>&gt; &gt;&gt; I think we&#39;d still be making people deal with an API break in v16,<br>&gt; &gt;&gt; so making them do it this year rather than next doesn&#39;t seem like<br>&gt; &gt;&gt; a big deal ... but maybe someone wants to argue it&#39;s too late<br>&gt; &gt;&gt; for API breaks in v15?<br>&gt; &gt;<br>&gt; &gt; Well there are other API breaks that affect me in v15, and to be honest I<br>&gt; &gt; have done little except keep an eye out for the ones likely to affect<br>&gt; &gt; extensions I maintain so far, so may as well inflict the pain now as later<br>&gt; &gt; ¬Ø\\_(„ÉÑ)_/¬Ø<br>&gt;<br>&gt; With my RMT and hacker hat on, I see no reason to not break ABI or<br>&gt; APIs while we are still in beta, as long as the GA result is as best<br>&gt; as we can make it.¬† I have not looked at the reasoning behind the<br>&gt; issue, but if you think that this feature will work better in the long<br>&gt; term by having an extra field to track the role OID in one of the GUC<br>&gt; structs or in one of its API arguments, that&#39;s fine by me.<br>&gt;<br>&gt; If this requires more work, a revert can of course be discussed, but I<br>&gt; am not getting that this is really necessary here.¬† This would be the<br>&gt; last option to consider.<br><br>The RMT has discussed this item further, and we agree an ABI break is acceptable for resolving this issue.<br><br>--<br>John Naylor<br>EDB: <a href="http://www.enterprisedb.com">http://www.enterprisedb.com</a></div>\r\n	On Fri, Jul 8, 2022 at 1:09 PM Michael Paquier <michael@paquier.xyz> wrote:\r\n>\r\n> On Thu, Jul 07, 2022 at 03:43:03PM -0400, Joe Conway wrote:\r\n> > On 7/7/22 15:00, Tom Lane wrote:\r\n> >> The aspect that is a bit more debatable is whether to trouble with\r\n> >> a set_config_option() wrapper to avoid the API break in v15.\r\n> >> I think we'd still be making people deal with an API break in v16,\r\n> >> so making them do it this year rather than next doesn't seem like\r\n> >> a big deal ... but maybe someone wants to argue it's too late\r\n> >> for API breaks in v15?\r\n> >\r\n> > Well there are other API breaks that affect me in v15, and to be honest\r\nI\r\n> > have done little except keep an eye out for the ones likely to affect\r\n> > extensions I maintain so far, so may as well inflict the pain now as\r\nlater\r\n> > ¬Ø\\_(„ÉÑ)_/¬Ø\r\n>\r\n> With my RMT and hacker hat on, I see no reason to not break ABI or\r\n> APIs while we are still in beta, as long as the GA result is as best\r\n> as we can make it.  I have not looked at the reasoning behind the\r\n> issue, but if you think that this feature will work better in the long\r\n> term by having an extra field to track the role OID in one of the GUC\r\n> structs or in one of its API arguments, that's fine by me.\r\n>\r\n> If this requires more work, a revert can of course be discussed, but I\r\n> am not getting that this is really necessary here.  This would be the\r\n> last option to consider.\r\n\r\nThe RMT has discussed this item further, and we agree an ABI break is\r\nacceptable for resolving this issue.\r\n\r\n--\r\nJohn Naylor\r\nEDB: http://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	{"Cc": ["Joe Conway <mail@joeconway.com>, Tom Lane <tgl@sss.pgh.pa.us>, Nathan Bossart <nathandbossart@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Thu, 14 Jul 2022 11:48:35 +0700"], "From": ["John Naylor <john.naylor@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657774138; cv=none; d=google.com; s=arc-20160816; b=cLo/2rgu55MHsYsJLSqfvQxtgmoMckAm0/kvod0SRcDj2muCP1H7a8CTFL90i0R9HK L25LQa4aBM8UwDGimAgqJGv/riQH4tOZLCU7jmhS0Fk8yiQGprT2g7NephJiGnjnesan rhwUvmmelPcdd95EvWqkl2b5HrcR6ZmdOtfsgBqqbIV4DcfJ8uJPCyP0v/y8Vwx/UkJ2 Yy08V+8eS3RCtMUY0BBwmSM6vW9mFgI884c+Y0dI4Q/FF9W0EWEAW0o3LoFggZweVYGP DwM1KUE0vMFjmZGRWT9Gj3YqyV0e1/9UO7fxBD538rqjLlTxtVBTEOMzxishmtkgkpcn ao6A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp45409jai; Wed, 13 Jul 2022 21:48:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m12-20020a056000180c00b0021dabd85d67si574226wrh.695.2022.07.13.21.48.58 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 21:48:58 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410678@lists.postgresql.org>) id 1oBqmX-00029f-Sg for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 04:48:57 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBqmS-0000WB-Rt for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:48:53 +0000", "from mail-il1-x12c.google.com ([2607:f8b0:4864:20::12c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBqmO-0006r6-Rq for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 04:48:52 +0000", "by mail-il1-x12c.google.com with SMTP id a20so370646ilk.9 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 21:48:48 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFBsxsG=ujE-ZvB8VeBTUSMO2=P2Fj14JPPnSvouPdZFo8Pk2A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us> <20220707184001.GA2255643@nathanxps13> <3032103.1657220409@sss.pgh.pa.us> <360a4f7c-26d5-4d55-fceb-80a53f1f0ce8@joeconway.com> <YsfKDTsMlhEokz5+@paquier.xyz>"], "X-Received": ["by 2002:a05:6000:1688:b0:21d:7b36:926a with SMTP id y8-20020a056000168800b0021d7b36926amr6236034wrd.303.1657774138261; Wed, 13 Jul 2022 21:48:58 -0700 (PDT)", "by 2002:a92:c566:0:b0:2dc:7f17:820b with SMTP id b6-20020a92c566000000b002dc7f17820bmr3926837ilj.23.1657774126678; Wed, 13 Jul 2022 21:48:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFBsxsG%3DujE-ZvB8VeBTUSMO2%3DP2Fj14JPPnSvouPdZFo8Pk2A%40mail.gmail.com>"], "In-Reply-To": ["<YsfKDTsMlhEokz5+@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410678@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000f0654c05e3bc9d98\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410678@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=x7oY98/gZC2beUUchOuo9uBGsXhTbVTJQR6NdDjlRNo=; b=VDMlw71MAORt1wsmjRcK3wVEwTZ5FDWx7Bb9crO8s7AFAGtAttkXNqreusBdJyl91N A+Y5rTcFGbpOqfQHvCvEc7XKZrBVy6Eo+EUS4YGD9diMz2OdKA2tMBpaUo6g7SXKI+xi Uu8pp94zZ+8e4DC6UuFvme9i7yQm8oWFYn2oIRKn0NXHPUgges4D39ko80fFP/pFnpA9 9LeSlKx/cblRFdmYR7u3ZhwW+3krqvJj2Tevbi0wCvEREbMDGuydeTj32qp1FKbB44G9 5EMVjJwUjtQm5QdrMRvWQCMIdEAleW4WK8eh8elQaT5tktLl4LCGJfUTKhO1cai9tJ/D n8ZA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/MghwdYOEaofJqv5QdOKz8cBivN23mvo8Eva0lGGGOEl9AU+oc n+qBwSfaE1uLAAPM76Ov/0mY6X0qNLfq3xbu9KgzdAfk3xeDXUggMP/W5EuyYh9R7ttTsnJV6f4 hFem/s/6MgdttI9YGtQPaXtXKxBmsLIG1tA4ugF4R64WigjyephKzIV4/2cpJdOn/beGiKVwSCq cOFia3QIL66YrZrNnPXmaQOtQMzmqFM9/iYn/PBWzs/L6+zZ+gBYZe"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1vImuBhhwI9tIY5zz0Rlpe6Wx/fe4oeoxigYuMbaca2rMmipGNkIL2EoWamCiQmkTRLNe9p"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=x7oY98/gZC2beUUchOuo9uBGsXhTbVTJQR6NdDjlRNo=; b=ExMC2S7843q3HknAHqdXRNHCtLvTptn4PVzkBfeKh0F/QmqmXBh7JU3lVuChXzACPw DGpku+OCFtVixCfYlskkmIemOOuKlwaRbbgzOsVjc9YQCP4S2GaIFFxHLeMktfBNm/uE v8oixPED18lr4CcnaZd6yst7WDbifNZVWLPPVF+Xa/eu960ohyy/GeT0QsqS789OddQb n8bs4Vgnt3MPj0RFrCHOeKjY1BualQyCY8hoJi3qo44cvE49OUKvtOdR7HrQHlPK1qi9 4e9ajAuszriKsw/+cuBbBVEbFr3Cf+oZ4Dg6nJuk2Z0YT01gwJ39JeXUKOCgUubGsKzC SmFA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=VDMlw71M; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410678@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410678@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=x7oY98/gZC2beUUchOuo9uBGsXhTbVTJQR6NdDjlRNo=; b=1tg2/p3w5ecg8YzZSBQ27c1ttbxAKAr9EpVl4Ap8aMW9YvpopwcnPCGjnjamxdpGMw iSGUhL5pX7Q27zHmy0gRSOYc30K7G+Dazxpc/2d7gq05lPxLBJO2hR//AlIT6Y/w2Ol3 lORSaFR3I6CvH8FoxJQ3xBFu793mFRR3R63tBR/fa+MPr1DJWV1ax7VB/OMqqP3NykES EeKnAJKfnidM8+P/gJsuSBNJb8WyXsIvhID7VvcrLNB/XBdty6HU7YEpsmkYLDs0up/F CkMhYAQzcReTzYozQ+vVhkDBY9kSqUM0w69yLte3NGtHqKkjHcMLkBKOWTPkBZFn4vZo 69uQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=VDMlw71M; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410678@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410678@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<YsfKDTsMlhEokz5+@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 04:54:49+00	pavel.stehule@gmail.com	Re: proposal: possibility to read dumped table's name from file	<CAFj8pRBJsxuT8DK0UZqS07zPA6dgRcU72=5ymJEUpWUVej0wNQ@mail.gmail.com>	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	[{"Name": "Daniel Gustafsson", "Address": "daniel@yesql.se"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@2ndquadrant.com"}, {"Name": "Tomas Vondra", "Address": "tomas.vondra@enterprisedb.com"}, {"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Dean Rasheed", "Address": "dean.a.rasheed@gmail.com"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Surafel Temesgen", "Address": "surafel3000@gmail.com"}, {"Name": "vignesh C", "Address": "vignesh21@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	51	9836	[]	<div dir="ltr"><div dir="ltr"><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">st 13. 7. 2022 v¬†22:49 odes√≠latel Andrew Dunstan &lt;<a href="mailto:andrew@dunslane.net">andrew@dunslane.net</a>&gt; napsal:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><br>\r\nOn 2022-04-25 Mo 13:39, Pavel Stehule wrote:<br>\r\n&gt; Hi<br>\r\n&gt;<br>\r\n&gt; fresh rebase<br>\r\n&gt;<br>\r\n&gt;<br>\r\n<br>\r\n<br>\r\nIf we&#39;re going to do this for pg_dump&#39;s include/exclude options,<br>\r\nshouldn&#39;t we also provide an equivalent facility for pg_dumpall&#39;s<br>\r\n--exclude-database option?<br>\r\n<br></blockquote><div><br></div><div>It has sense</div><div><br></div><div>Regards</div><div><br></div><div>Pavel</div><div><br></div><div><br></div><div>¬†<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\ncheers<br>\r\n<br>\r\n<br>\r\nandrew<br>\r\n<br>\r\n<br>\r\n--<br>\r\nAndrew Dunstan<br>\r\nEDB: <a href="https://www.enterprisedb.com" rel="noreferrer" target="_blank">https://www.enterprisedb.com</a><br>\r\n<br>\r\n</blockquote></div></div>\r\n	st 13. 7. 2022 v 22:49 odes√≠latel Andrew Dunstan <andrew@dunslane.net>\r\nnapsal:\r\n\r\n>\r\n> On 2022-04-25 Mo 13:39, Pavel Stehule wrote:\r\n> > Hi\r\n> >\r\n> > fresh rebase\r\n> >\r\n> >\r\n>\r\n>\r\n> If we're going to do this for pg_dump's include/exclude options,\r\n> shouldn't we also provide an equivalent facility for pg_dumpall's\r\n> --exclude-database option?\r\n>\r\n>\r\nIt has sense\r\n\r\nRegards\r\n\r\nPavel\r\n\r\n\r\n\r\n\r\n>\r\n> cheers\r\n>\r\n>\r\n> andrew\r\n>\r\n>\r\n> --\r\n> Andrew Dunstan\r\n> EDB: https://www.enterprisedb.com\r\n>\r\n>\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Pavel Stehule", "Address": "pavel.stehule@gmail.com"}]	{"Cc": ["Daniel Gustafsson <daniel@yesql.se>, Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@2ndquadrant.com>, Tomas Vondra <tomas.vondra@enterprisedb.com>, Justin Pryzby <pryzby@telsasoft.com>, Dean Rasheed <dean.a.rasheed@gmail.com>, Stephen Frost <sfrost@snowman.net>, Surafel Temesgen <surafel3000@gmail.com>, vignesh C <vignesh21@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>"], "To": ["Andrew Dunstan <andrew@dunslane.net>"], "Date": ["Thu, 14 Jul 2022 06:54:49 +0200"], "From": ["Pavel Stehule <pavel.stehule@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: proposal: possibility to read dumped table's name from file"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657774536; cv=none; d=google.com; s=arc-20160816; b=a8hgjDurNEfw1ubcYRzbV/wbQKrAyW0+GIHaP4yYDJt8bC2eKo5Kuq7TTG+DknWxEs /7aLqpyPWS0obaEdgRMom8Omr1p3bQiZ83SLKH56HtSHnhKTs/CsJi6KUJqvnOwvPGke Oxc1wg37zQEdnlXSYbLqXnBd5ujW+RL6JOSPlEjd4sXM1fXU6draox3PgRzr7UzGJ12v jiqEbaZAO3TWGdhM7m2ANBEwMxiS17KWiaAwbh/tziug7uzkZjefeDoEDi4k0SjB2FlJ LLlDqRNefAN6crgrhNlSh/r5gERc5K1zUiN815K6MO/Q+SGHmUUsSIMNYPE7B8ycZFJx lBTQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp46393jai; Wed, 13 Jul 2022 21:55:36 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n17-20020adfe351000000b0021bc902019esi508538wrj.831.2022.07.13.21.55.35 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 21:55:36 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410680@lists.postgresql.org>) id 1oBqsx-0004AK-N8 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 04:55:35 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pavel.stehule@gmail.com>) id 1oBqss-00011F-PV for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 04:55:30 +0000", "from mail-ej1-x632.google.com ([2a00:1450:4864:20::632]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pavel.stehule@gmail.com>) id 1oBqsq-0005DY-DJ for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 04:55:29 +0000", "by mail-ej1-x632.google.com with SMTP id bp15so1319643ejb.6 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 21:55:28 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFj8pRBJsxuT8DK0UZqS07zPA6dgRcU72=5ymJEUpWUVej0wNQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<202107122259.n6o5uwb5erza@alvherre.pgsql> <3183720.1626131795@sss.pgh.pa.us> <CAFj8pRBq9X=oSNbo+v93EwznkQ3JczEW6UsfQK37vx1ktW-2ZA@mail.gmail.com> <B854A710-E1DE-4C6B-A411-E246A95DCDF9@yesql.se> <CAFj8pRAZbCvM3v8jp5wkPpZHJvAopWpbF=+v+84Pns=qWtvEcg@mail.gmail.com> <CAFj8pRAy+xfSj=tz_=RRx0hsn_x5dMpvTz2RJ9OzCG9GTdPxnA@mail.gmail.com> <CAFj8pRCk0Syge+c1mvkHwpJ6S2zM7nyEMu98iyzRWYsccXuG+g@mail.gmail.com> <7f9cde55-dd3b-a604-bf89-e70511025709@dunslane.net>"], "X-Received": ["by 2002:a5d:4c4d:0:b0:21d:866e:4739 with SMTP id n13-20020a5d4c4d000000b0021d866e4739mr6138202wrt.147.1657774536088; Wed, 13 Jul 2022 21:55:36 -0700 (PDT)", "by 2002:a17:907:7628:b0:72b:4d6f:ce8a with SMTP id jy8-20020a170907762800b0072b4d6fce8amr7042874ejc.59.1657774526178; Wed, 13 Jul 2022 21:55:26 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFj8pRBJsxuT8DK0UZqS07zPA6dgRcU72%3D5ymJEUpWUVej0wNQ%40mail.gmail.com>"], "In-Reply-To": ["<7f9cde55-dd3b-a604-bf89-e70511025709@dunslane.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410680@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000c02a8505e3bcb574\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410680@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=/53LJX0W7fX4i8az1xdmsu4DT/e52Jkjzs73X9o4pRM=; b=ZmhFzVuoeAaQlpBqOt/HIWc3EQGSeqZvKllN4gbq9lWJ9ndgxUfro7XD2tRe8bNPwI vITPEP/BuB13raUyc5FVtTwoMcFx23SeuvDDXy8ZYUpywI49zMXBMFAdMPxcpsKKZwqr VXXQKeMJoURYONrv63UvFOzuGt9r8qej1bkMwml6ipJQb9c8IO/MmyTh+DYAxJsSbZi6 yqS3HddqwEuZQ7Jb/fv0haNlPRx++IYpmOcXNtAdeWhJwShCpgl/cnA01t0ZnUkhn/rv PcbmVnvit/TWm1oWLJ50WnUHgPbLnMatXO0QrsRYfKFeUXVYFtnTgJdJ7s8ZgeKu2fD+ P3Xg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+TfkTa9D9Vhtb3x/cXeCeBs069hWkWpIhIVlNqCBkQTYDBRadD GQ2av7wHj6HC5yMjz7ZZLC3RtqSFZBhPEeFm+Cw="], "X-Google-Smtp-Source": ["AGRyM1sLK+/3wnZ6lnLti2GK43ug7STUHIsAu9yFbD+XlUcj6fcB6sjL28dZgATpLESTirNdPUow"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=/53LJX0W7fX4i8az1xdmsu4DT/e52Jkjzs73X9o4pRM=; b=qMjLLqja56jEGa4GLr9NndevZGQFUNdASfYrunJ2jaBT/GjqXaMZsizpdWAaWVCNXF 6s7YYDqCU7OQG/hFGfbxFsbZ1/k+4q843F8oAsM5c6N7vqvp8GnzeaXLcfnj1OSpOveg xIMAtIY4/S+Ko/aJUJzfuJZQz+EFwZu5GvPwWA+6gB8UGnNuIjqIziLfTJzJKPD9tn+v pT7NICwcTHdBlsUVXz8aXiiSNHzikgVSBu+YWgAdW3Tz+VXZTBTIbBkoX2mHYGIoG38F kz6ctBPEKuZp983vX3YeQTwS3XY33o+T8R3SLpO0tQYO5qvqBBhRz/AHJFUv8Dh8k7dx Rwgg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ZmhFzVuo; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410680@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410680@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=/53LJX0W7fX4i8az1xdmsu4DT/e52Jkjzs73X9o4pRM=; b=S1a9ysWTF9/ZjzGyZbJpf/r+p4xobQq95mqALNpxVPOFOSyS/Fqyet3oNMRRHr50EN Cn2GYtKmfJ+u40inggfLal4Jw9edDpq2ssQ5LSPiNKh7P47XCiPxbqUYiy5Nzi3R9FE4 yuhQNEsMpL6J3HkGDJ9gkiI+TSazPrRFMUP1FYiB4RvedXBdZYXuG+wOyA36sIymP497 Y/9cqCFqvBitWNs0sMPpnszVOcCvQvRFOQ+dy8cmPnBv3fYF1ii7TZ7I/L7wZeziuYup QSBSiYD+TO0y4AHatuyMlq+FgP9axzHerxn85chR5FwkWyZ/7LlD/cfAsLd25I8/jWcR m7rg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ZmhFzVuo; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410680@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410680@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<7f9cde55-dd3b-a604-bf89-e70511025709@dunslane.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 05:41:31+00	michael@paquier.xyz	Re: [PATCH] Completed unaccent dictionary with many missing characters	<Ys+siw2VEuyXdS4B@paquier.xyz>	[{"Name": "Przemys≈Çaw Sztoch", "Address": "przemyslaw@sztoch.pl"}]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	\N	53	10999	[]		On Tue, Jul 05, 2022 at 09:24:49PM +0200, Przemys≈Çaw Sztoch wrote:\r\n> I do not add more, because they probably concern older languages.\r\n> An alternative might be to rely entirely on Unicode decomposition ...\r\n> However, after the change, only one additional Ukrainian letter with an\r\n> accent was added to the rule file.\r\n\r\nHmm.  I was wondering about the decomposition part, actually.  How\r\nmuch would it make things simpler if we treat the full range of the\r\ncyrillic characters, aka from U+0400 to U+4FF, scanning all of them\r\nand building rules only if there are decompositions?  Is it worth\r\nconsidering the Cyrillic supplement, as of U+0500-U+052F?\r\n\r\nI was also thinking about the regression tests, and as unaccent\r\ncharacters are more spread than for Latin and Greek, it could be a\r\ngood thing to have a complete coverage.  We could for example use a\r\nquery like that to check if a character is treated properly or not:\r\nSELECT chr(i.a) = unaccent(chr(i.a))\r\n  FROM generate_series(1024, 1327) AS i(a); -- range of Cyrillic.\r\n--\r\nMichael\r\n	[{"charset": "utf-8", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["Thomas Munro <thomas.munro@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "To": ["=?utf-8?Q?Przemys=C5=82aw?= Sztoch <przemyslaw@sztoch.pl>"], "Date": ["Thu, 14 Jul 2022 14:41:31 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Completed unaccent dictionary with many missing characters"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657777312; cv=none; d=google.com; s=arc-20160816; b=iVY3RsG+x8XH48kCyxQzFea9ad4C6Me9NBD2J+Sx+z+XtRb2rASfrH0aCsteX1Ul5o zjSr2cVorasg+aIL4AaEmUUP+m8j3Q9bNZRGBDXRVxpfqjgXt1B355iu1rLTVDAeqmzs 0FYyBLRU0vLrVag105cI8tLDClYPTOcjba3BmEEuvT1/GiCP7CkE8iyxJpF1hQLXIz/k kNOX6tiuGyydiSWsaza5xRd2bvhpTUdFBvUanX7Gg7MaZmdqQeJ3WzydjoqgPCaS6jtW b1kqkS8POtJZEeLEdCyzX0jZu18HteMKZ2+tmlABA2yzg8yaN/UYxX1kFuHqVbfiYO9f vTxQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp53073jai; Wed, 13 Jul 2022 22:41:52 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b189-20020a6767c6000000b003544e28d934si60682vsc.665.2022.07.13.22.41.52 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 22:41:52 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410685@lists.postgresql.org>) id 1oBrbj-00087o-Ie for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 05:41:51 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBrbd-0006Vc-SG for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:41:47 +0000", "from wout4-smtp.messagingengine.com ([64.147.123.20]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBrbZ-0007fN-Nk for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:41:45 +0000", "from compute4.internal (compute4.nyi.internal [10.202.2.44]) by mailout.west.internal (Postfix) with ESMTP id 2BC21320090D; Thu, 14 Jul 2022 01:41:38 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute4.internal (MEProxy); Thu, 14 Jul 2022 01:41:38 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 01:41:35 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<Ys+siw2VEuyXdS4B@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<Yq/SMQqOAK9w0nJZ@paquier.xyz> <d0e93206-d7cd-37b8-a79b-7ddf73457e02@sztoch.pl> <YrEMvUs1bSBRz407@paquier.xyz> <CA+hUKGJeQOrUpTfaw1D=0t0omNTssXZ8tv8zxPXwm6z1GyQgnw@mail.gmail.com> <b776ca21-a825-d81f-d4f5-739295238cec@sztoch.pl> <YrPufpsLPpnr8YY5@paquier.xyz> <9bb4b652-d830-7760-7ce4-17952fb7f023@sztoch.pl> <YrqOTZBFoRNOOuz5@paquier.xyz> <YsPmq/1BMQryVT05@paquier.xyz> <4c9326a1-6554-262f-1f22-e636933086ed@sztoch.pl>"], "X-Me-Proxy": ["<xmx:kazPYp9xnoYWJcBMlBMp3yo4IDVWubUS9TEc9GjDOusXGlkQCps9CA> <xmx:kazPYgv_YojNBNOjpG_DPBiPVtU5lIvrR4jJikBo9kJU5-71fbi6ig> <xmx:kazPYgEWVSzJmoXa2J6Fq4qHc6h6lbMVN11z7kkgHxZuzEHkwZJJ2Q> <xmx:kazPYp7CjH9ETz15VuUZ87ivY8xejPmfjcRHHraEfQIawZLHTGEfMw>"], "X-Received": ["by 2002:a67:cb11:0:b0:355:84b2:5c58 with SMTP id b17-20020a67cb11000000b0035584b25c58mr2708467vsl.43.1657777312574; Wed, 13 Jul 2022 22:41:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/Ys%2Bsiw2VEuyXdS4B%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<4c9326a1-6554-262f-1f22-e636933086ed@sztoch.pl>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410685@lists.postgresql.org>"], "X-Me-Sender": ["<xms:kazPYkeo03ebIyVoZa0PZUATY9TMuWPWCmusFA0hSqDpCE6XNeOGKg> <xme:kazPYmOMuCmrbIJVzo73Ir6GKwYhjRmRlWIFa7R1V1oOmk9FRZXSZehhLXIdOH4v_ BJaO4umFoeQ63jE6Q>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"VKsP382VHzTqEikn\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410685@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:kazPYlgQWc6vG6qPsTpA77apJ2UE4iy785EqsU8_YFCv0z7X2HVlcIWPnWiIvMTyKweNLAmfcjRS6BygVP25xZmXkKU>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657777297; x=1657863697; bh=Ugu14RktSH rZgSv5Vleli9FMUUsK1Q1zj6uiMrvehlc=; b=pTqhCkN5TbQe3/+jJXPKmBb01G zjFyl44C7oZpXtGPTRY5ZmuysNGpqKpR7f7qV0q1V0KwGyqTwpksZMwzsS+VcedO PX0EggBh+an3e8XiSjp7aTXqX3KNkpNQjpRxNN0nV2/61TrefWgMzG0M9Sk1vkOw Q2AwX7zo7t/QU8XtgmGLQT5bxJ5kFqEcFGBUNaYQ7Xek6wH5A/KX1QkjezHzHmlO AIHUdLNig+sfAHQ03S7ySoYq8s2TkSDYIClhFVLZKjohs99kpx10L1okE6BwA4BK RogaFvKsP04el/ckxryfb7r6yQo80NN+BsXhrK9n1XHdg0E37BZRZg/nsuQg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657777297; x=1657863697; bh=Ugu14RktSHrZgSv5Vleli9FMUUsK 1Q1zj6uiMrvehlc=; b=wLdUlllbTXnekl9zOunKqKgeHm5yRHpUCgFCPaWPlhd8 Xe8/eSk0unvOlpm0LKLKq0yDSOag3poLCk1eHUg/LTLSFNDFb3ne5sHdLLSwtoy/ MX15l0j4hAh2WYIdwFHM7wv9qNTD6jp1p11rraxqJ01OK4l+Pk7kxikL8NTZ16v2 dcbhy5Txs6YlrK/adyMHhjyCP728qPtuOGPPhoPINt87WNuTFXTKrqKj/suET9uo 8mhowdqbaoKrWi23FZw/MjYQX4kqZL7B9IPBWCi5xamIpVlHp2LVHpnG+rQye475 QEtqFlepr5w2/6tBmmQX+1AZPF3OPfppjGWHYlGp1Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedgleejucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdljedtmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tdejnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepveetjefgjeevgedukeehieeu ieeuieevueeiudegheevuefggfduueelgeelieetnecuvehluhhsthgvrhfuihiivgeptd enucfrrghrrghmpehmrghilhhfrhhomhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiih ii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vRP8S33j2sfFRiVeUftMTS6hdckz07WVHnr5mwjvC4rMiyj6PGcNhW50MboQ4OGuv+T6Mw"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=Ugu14RktSHrZgSv5Vleli9FMUUsK1Q1zj6uiMrvehlc=; b=xMcoKk+IO5lN288ftQdssBaHjFBmx59dbIG6e6T3KowjH07VcJKrRPTkPX+aaYQqr9 K4PUU2EhzjDEYxBl4KzGPLV0hU2vNbNBrlg2/0pB80PsiwT7W7rKxHuRe/B0jbXc2/3m u5YEnEdu8VAIfAtnJMCZeI3eqR1ObOnGfArCpLphHIJutCpI2kboohvUAry9y6Ap/w3g 1hXOxE300aeUc/T2rCPb2T+GlsgPd1nBbOK28OzO2NhjgNxkcci8QPMdxGVrnjY7Jpit 2fglOpWlyuR++vxfRwoYXuvAbUZtFCcjS1K2r1ioDGyF08fBL5/DPS+1+gDvqIbD7QTC va7A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=pTqhCkN5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=wLdUlllb; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410685@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410685@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=pTqhCkN5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=wLdUlllb; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410685@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410685@lists.postgresql.org"]}	["<4c9326a1-6554-262f-1f22-e636933086ed@sztoch.pl>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 05:56:32+00	dilipbalaut@gmail.com	Re: Handle infinite recursion in logical replication setup	<CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com>	[{"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	54	9611	[]		On Wed, Jul 13, 2022 at 4:49 PM Dilip Kumar <dilipbalaut@gmail.com> wrote:\r\n>\r\n> On Tue, Jul 12, 2022 at 2:58 PM vignesh C <vignesh21@gmail.com> wrote:\r\n> >\r\n> > On Tue, Jul 12, 2022 at 9:51 AM Amit Kapila <amit.kapila16@gmail.com> wrote:\r\n>\r\n> I find one thing  confusing about this patch.  Basically, this has two\r\n> option 'local' and 'any', so I would assume that all the local server\r\n> changes should be covered under the 'local' but now if we set some\r\n> origin using 'select pg_replication_origin_session_setup('aa');' then\r\n> changes from that session will be ignored because it has an origin id.\r\n> I think actually the name is creating confusion, because by local it\r\n> seems like a change which originated locally and the document is also\r\n> specifying the same.\r\n>\r\n> +       If <literal>local</literal>, the subscription will request the publisher\r\n> +       to only send changes that originated locally. If <literal>any</literal>,\r\n>\r\n> I think if we want to keep the option local then we should look up all\r\n> the origin in the replication origin catalog and identify whether it\r\n> is a local origin id or remote origin id and based on that filter out\r\n> the changes.\r\n\r\nOn the other hand if we are interested in receiving the changes which\r\nare generated without any origin then I think we should change 'local'\r\nto 'none' and then in future we can provide a new option which can\r\nsend the changes generated by all the local origin?  I think other\r\nthan this the patch LGTM.\r\n\r\n\r\n--\r\nRegards,\r\nDilip Kumar\r\nEnterpriseDB: http://www.enterprisedb.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Dilip Kumar", "Address": "dilipbalaut@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Peter Smith <smithpb2250@gmail.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, \\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, \\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["vignesh C <vignesh21@gmail.com>"], "Date": ["Thu, 14 Jul 2022 11:26:32 +0530"], "From": ["Dilip Kumar <dilipbalaut@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Handle infinite recursion in logical replication setup"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657778224; cv=none; d=google.com; s=arc-20160816; b=n8kQ/EX9NgG1sqBH/TJGZc7AUHsaaa4GA95JVxigH4+8md4fVjQ8UHnDGXGq57yKhl f4mtgIaTHbo1yljBH5nW1cSuT+DD3+8LJSVVGeNXNwl4GEF5yjtysCl3dBVImVVYVKQZ QtrRiNliYlhq9JjaQYPKsPBAxQlPK4ojBDhgPS5fMNFy/QN0vzLOQv7DUW6u7SXJW9gg N0GS/PSZjdVLK9s2SkY3JbleXo7OD5LON2aPr7X4z2+iN9Rej7WxKHWKaBlCtXoVVWgT wr+hkQb5ZVIHf8NCQwGG0smaRtbPSH/Ky4JYCZIA4Va/+kBhgGpvDfdq6h+i391Oo8Fc 4HdQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp54961jai; Wed, 13 Jul 2022 22:57:04 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i8-20020a5d5848000000b0021d6c8b9f43si832238wrf.524.2022.07.13.22.57.04 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 22:57:04 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410686@lists.postgresql.org>) id 1oBrqR-0001JY-QK for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 05:57:03 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBrqN-000889-0l for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:56:59 +0000", "from mail-lj1-x22d.google.com ([2a00:1450:4864:20::22d]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBrqG-0007nC-6w for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:56:58 +0000", "by mail-lj1-x22d.google.com with SMTP id x10so476198ljj.11 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 22:56:51 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALDaNm01kX44F4=Nk9paNiLAPs1Vjb+WxUkOdsgnDoZ8HYW=6g@mail.gmail.com> <20220704141402.wdjzpkcybeg4foqg@alvherre.pgsql> <CALDaNm3pNncXjx1e2p6tZoYwS+gD93MhnAUFAxE1WOqRQGA8RA@mail.gmail.com> <CAA4eK1JAh9KCmzPFPA47xVp8esRw_eNC0H9tgyFiw5Lq3sUrCg@mail.gmail.com> <CALDaNm1T5utq60qVx=RN60rHcg7wt2psM7PpCQ2fDiB-R8oLGg@mail.gmail.com> <CAA4eK1JYQWuWQj9rUZpAf9BPoW9j_ecuodfwL-LazCE5AJa9cg@mail.gmail.com> <CALDaNm0B3qh12hJya1sAmsmD916jBqin4-96ihBNX7f1qOppRw@mail.gmail.com> <CAHut+PvZyWyLE13SrS8vZSNRQiONzKYTptn8wWRPt6n-hGoS6g@mail.gmail.com> <CALDaNm2-D860yULtcmZAzDbdiof-Dg6Y_YaY4owbO6Rj=XEHMw@mail.gmail.com> <CAA4eK1+ey5Jmf5AXRc5XGLuLxMD7YdyxNN2B7AoX7r+-xR1m=w@mail.gmail.com> <CALDaNm0w4vkQv8SSrj8h2QbDGVP8k1fDpmBjAD=Er6Ywew_94g@mail.gmail.com> <CAFiTN-vgCxOgsH_SzuqS4zF-9SfW22TCG=LqB5beV1rPscgwwQ@mail.gmail.com>"], "X-Received": ["by 2002:a1c:5452:0:b0:3a3:2b9:6cfe with SMTP id p18-20020a1c5452000000b003a302b96cfemr472726wmi.112.1657778224666; Wed, 13 Jul 2022 22:57:04 -0700 (PDT)", "by 2002:a2e:a172:0:b0:25d:6242:ee10 with SMTP id u18-20020a2ea172000000b0025d6242ee10mr3589889ljl.399.1657778210181; Wed, 13 Jul 2022 22:56:50 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ%40mail.gmail.com>"], "In-Reply-To": ["<CAFiTN-vgCxOgsH_SzuqS4zF-9SfW22TCG=LqB5beV1rPscgwwQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410686@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410686@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=kF6gkBWs5IMQ4jVeW9drlC6at8zlbTv+MTbNTRZpXUs=; b=CrSZcDEvQl4YnezShId2mCPlGRq84vnNIy5DiAU71UQ4tsl6aWOpvXYc63G6R5zqsJ Rt8hQWi0yFEN6gqU8AujIQ5Bu0PngDSNpvZv/SpRJl78Qqmd9oYQPLw0VeNfydDYgoun sNcLY8BURJEhI4ruyWdWKQNCQ/pxx6VAGCrFPqnlbFPxxKO12mLmFPktnjWLTUBXa/Cs iTYCPR6nX95A26LMVgc/hLsLIB5cZ7aKlwM0qtpwhHk6g7Ub+uzrpkWdmjBd+VCxRXSy DyrTrZ35k1JhXeVHWbSqZbKu9iw5Db8z3DTbfTw3+sBkfYT2ju4jVvzvGz0mKMRC7R/g ovgA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8+EmQwj8FOKycWyfbmNjyqew/w31Ojf5mkVHJGD3XN32UrcP68 U3bLIeX1SrFfX7fw+kmGHTVm9Kiu2mzkN5a4Guo="], "X-Google-Smtp-Source": ["AGRyM1s54yjiiHLKQviEAVznIXK23yg883tyi3Bzo0lH1SqGulCITScaJVdGCIxWBAYC0VMXgdZc"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=kF6gkBWs5IMQ4jVeW9drlC6at8zlbTv+MTbNTRZpXUs=; b=hLQPdJiNdZERYnIBmzxiryKMBu1r2g0s+3DtENxCS+a685jVc0FZEPwfnyuZG+CbAd mj/a3czgJpwE3nl0McbQ00szQp0MjUyotIvoqrJJM4Y65RI/X+7CuwL6dbh0jIM/cWAQ h7/5XkyQG56JEPOcOQaGWKMk7vQHT0yNIJbM30wCNKpoTWykcKX01JOtNR/bLHxRgOBZ 8Cgs8vu3q6XSa2UGcMuXCvICUmsZ7hESTGhhjA1Z1379Z/cH90N5bsL2VIV+/EWv2Kcl 35c7vbTQ5VtuYkvEEI/NmLGPlDJxn+sMa32nazUFKu0mWdD8oujIRVWfaT/7dmQCaQDY fEQg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CrSZcDEv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410686@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410686@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=kF6gkBWs5IMQ4jVeW9drlC6at8zlbTv+MTbNTRZpXUs=; b=x7M7acJRB4PcHQDUgSugme1hgqXV4RiCrCnEP1nd5qfWvVdb+22W6Hv9nDWFZXRj7a e+ay482VDXmtTSbKY9BRL0aCORVGJcUvPtnPyeRJ6VWu5MY/KbmZ08mJiDRseTWn5/e6 YX4ZyfpV5PZr3wC1NJE+Tf9uzyQuyTTsEK8FkKA52zRIZnznSds2/Cnp3YUkyKYgunZO d+7D2zGQkydf73+OoDyJCiPmiLrP6H2EY0oKEFrnuV07hHX61UAe6BXRvF8hz2151Giv cVO3jqfh1/aebKs60qrrqDbNAE/fXnsixaFscmiNed77Zy1zHf7AcZaLTi/FFOwlNlCu TUIw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CrSZcDEv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410686@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410686@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAFiTN-vgCxOgsH_SzuqS4zF-9SfW22TCG=LqB5beV1rPscgwwQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 06:24:41+00	john.naylor@enterprisedb.com	Re: First draft of the PG 15 release notes	<CAFBsxsFYSOsQmEAeLwOgqfdt48=cO=7nXoMK2eWD=PjemE_BdA@mail.gmail.com>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	\N	55	9586	[]	<div dir="ltr"><div>Regarding this item:</div><div><br></div>&quot;Allow hash lookup for NOT IN clauses with many constants (David Rowley, James Coleman)<br>Previously the code always sequentially scanned the list of values.&quot;<div><br></div><div>The todo list has an entry titled &quot;Planning large IN lists&quot;, which links to¬†</div><div><br></div><div><a href="https://www.postgresql.org/message-id/1178821226.6034.63.camel@goldbach">https://www.postgresql.org/message-id/1178821226.6034.63.camel@goldbach</a><br></div><div><br></div><div>Did we already have a hash lookup for IN clauses with constants and the above commit adds NOT IN? If so, maybe we have enough to remove¬†this todo item.</div><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div></div><div>John Naylor</div><span style="color:rgb(136,136,136)">EDB:¬†</span><a href="http://www.enterprisedb.com/" rel="noreferrer" style="color:rgb(17,85,204)" target="_blank">http://www.enterprisedb.com</a><br style="color:rgb(136,136,136)"></div></div></div>\r\n	Regarding this item:\r\n\r\n"Allow hash lookup for NOT IN clauses with many constants (David Rowley,\r\nJames Coleman)\r\nPreviously the code always sequentially scanned the list of values."\r\n\r\nThe todo list has an entry titled "Planning large IN lists", which links to\r\n\r\nhttps://www.postgresql.org/message-id/1178821226.6034.63.camel@goldbach\r\n\r\nDid we already have a hash lookup for IN clauses with constants and the\r\nabove commit adds NOT IN? If so, maybe we have enough to remove this todo\r\nitem.\r\n\r\n-- \r\nJohn Naylor\r\nEDB: http://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>, David Rowley <dgrowleyml@gmail.com>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Thu, 14 Jul 2022 13:24:41 +0700"], "From": ["John Naylor <john.naylor@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: First draft of the PG 15 release notes"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657779900; cv=none; d=google.com; s=arc-20160816; b=Na1n/DzAfo2IZ5R6B+0tBYZ27NiJRXZqcrW5Bu3uImYMO+pD0dUPxEMG0n6AaQV6dN l5ATL9Qbp+EG2HS68d24mJrc/dSu3rg/LQtZrhs6UaDwKIOJejKSbCFsJrX4xi7g57mb Z9RR9vxhk3NTW985BIwzFrfBOiyWvaH/NKwXsG2i71MFQ+kdPqUYbZ3RyOq9vUIH+Vz0 l0QA6J1iJlovh3v4gVLBmmF1BT1/87Qxro2gsQrRl6zJENAApF6v4jC0iLldsf9dEIn2 EjT0bOQUVoSLHKDawRqTzKb2s92zrBEZ9qevJlfAx4GR049e1XM98lqYTpOKVA3RyP6f sYRA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp59351jai; Wed, 13 Jul 2022 23:25:00 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id v4-20020a5d59c4000000b0021d8e07b237si832699wry.27.2022.07.13.23.25.00 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 23:25:00 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410694@lists.postgresql.org>) id 1oBsHU-0006pa-E5 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 06:25:00 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBsHP-0005Aa-NL for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 06:24:55 +0000", "from mail-io1-xd2c.google.com ([2607:f8b0:4864:20::d2c]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <john.naylor@enterprisedb.com>) id 1oBsHN-0005va-5D for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 06:24:54 +0000", "by mail-io1-xd2c.google.com with SMTP id b17so619756iof.4 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 23:24:53 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFBsxsFYSOsQmEAeLwOgqfdt48=cO=7nXoMK2eWD=PjemE_BdA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<YsSEe+y5KtRj0W/V@momjian.us> <20220705195349.GB2648447@rfd.leadboat.com> <YsSglBBxcPSUDwUb@momjian.us> <20220705215752.GC2648447@rfd.leadboat.com> <YsTNqC5QO2666i+G@momjian.us> <20220706024557.GD2648447@rfd.leadboat.com> <YsWJ3XYbT7qMfpmy@momjian.us> <20220710031941.GB2808420@rfd.leadboat.com> <YsxSXWSS90Yzqqwv@momjian.us> <20220712063132.GB2937407@rfd.leadboat.com> <Ys3BqwfxDAwCDjES@momjian.us>"], "X-Received": ["by 2002:a1c:7c07:0:b0:3a2:fef0:f999 with SMTP id x7-20020a1c7c07000000b003a2fef0f999mr3796921wmc.62.1657779900855; Wed, 13 Jul 2022 23:25:00 -0700 (PDT)", "by 2002:a05:6602:395:b0:67b:d0c6:50cb with SMTP id f21-20020a056602039500b0067bd0c650cbmr1064805iov.110.1657779892360; Wed, 13 Jul 2022 23:24:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFBsxsFYSOsQmEAeLwOgqfdt48%3DcO%3D7nXoMK2eWD%3DPjemE_BdA%40mail.gmail.com>"], "In-Reply-To": ["<Ys3BqwfxDAwCDjES@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410694@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000099b86305e3bdf59b\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410694@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=JGrqhZn43jSWn2voB90qW9tM14i8zbJGhb25Ac1pch8=; b=OQv3fAlQ82rTkCkzKtzW9hMKzK0PvAcSYbhTwT4rFGedNWMIDCDekx/yCiFgyk1LrW UuNfjU28m4BQ3AWJGtxtU8Y6vMywznhfkgb7C8ROyB8rb3bUDAyUVcbHa0ZKLshdoK5A dLCsCrYdqYofg2CyeyRsHxQzsMCWYzLmnagjRDLifZj97g2KXz+OKKw35RDvEwvQbfvr tCiUDBdfGYOokVr+77dJdatgUj9oCix69iPSIdeLSod67Pe5ZigZoAH738L1/e/K1iTU f3ucvoN+iZm2CPXTyqkcZ2Ge131ATih2STGEnzUEtw7nyHQRSjudM4rbbg5Qox8ta1uK TmHw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+aH10TuNYj4B87Un3s6h+PqoA4MnMWse7EkD7ctX8d8KTZhfSd 9Bf8d9CRUnOe03cNMYi+WX4phfBLVB0ZZBwasG7I7yrPfZ1ujl4s7BJCqGgaQS6PPNfIzOSQkFO d9X4IS0fnJKBu5E2LbzrMiC/V96TnxC5jJmVc41KljVkjpiRz2CMRe617Uy601MWuq+XJSq3Lje 1cvLGyD3G3Fc3jBtn361/XLPr8JOEXmvbmAB2r69GiGDZeQYcc1O39"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1sHkNYvEGonkhwTu/Ja1d+t06TYfBzU9hBAY1yN2JgTMT/YSAGEPYtsIbBU4WQmbnbSJJh5"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=JGrqhZn43jSWn2voB90qW9tM14i8zbJGhb25Ac1pch8=; b=EILW/sjf2Sy9t8JCVhxjAltG8NsK+JPMGmF5lXFmZwHRDvVid2rRYUtfOi7xV/g0uE Hx+daDHVtWoZpV8LHr1FD3zvf+BcG5ha3I3xRJI4Imh+t3qHlYVdlMNKw5lpAzKHJ1gl VEEpBYncsLBU99hQsQLfr+ji3id9XwVnEx7HmIvOkC1HAfLbUo3YeodbbLSTczKrPWhA b11KueHsmzD7tkjs/pzLwcBjDdaxIPrUKLwqmoFSW7J8nvCnlA2DCJpWCB0wWQyl2HoE AeZu49SPi2hy2xVzjR48AHouYt2hDMO70cJKwDviBjvEy2uBuJksg5jxZrJbBklFpVJK n0xQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=OQv3fAlQ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410694@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410694@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=JGrqhZn43jSWn2voB90qW9tM14i8zbJGhb25Ac1pch8=; b=YU79SMv7V4mO2CjtawuKVlEx0GliWxBoOKbQF60o3CfYLoBPj70UKGJvs/zPYqS+kb M8oph2Vgjgv1w/y+xnqC0PFmz0OVbK3vHKDw2yVYvcJckoQF6iqT0gOWTt6b8RMU0ym8 LtwiZjOZXM2G1lsjgwKfHsSYFccZK0QkWFnLThs2kuwZCCHkb1vjBPxpBaEdZuHFAIq2 B6sB/d18Y6xrFgzGl2t+PClCTr7zkk11Yq63pJPJznggENyJ3b+fBuT6Dfzp42c6HCLE g4JP3HjVCuzdUXwAyl+vlbUtZN5IcnzmsnsdntSVDTunzQp9cjOczw3TL/upLTwRgoV6 uKWQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=OQv3fAlQ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410694@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410694@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<Ys3BqwfxDAwCDjES@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 05:30:56+00	dgrowleyml@gmail.com	Re: Skip partition tuple routing with constant partition key	<CAApHDvqFeW5hvQqprXOLuGMMJSf+1C+Wk4w_L-M03sVduF3oYg@mail.gmail.com>	[{"Name": "Amit Langote", "Address": "amitlangote09@gmail.com"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "Greg Stark", "Address": "stark@mit.edu"}, {"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "tsunakawa.takay@fujitsu.com", "Address": "tsunakawa.takay@fujitsu.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@2ndquadrant.com"}]	\N	52	192099	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v11-0001-WIP-Cache-last-used-partition-in-PartitionDesc.patch", "content_id": "f_l5kl4wxd2", "disposition": "attachment", "content_type": "text/plain"}, {"part_id": "3", "file_name": "cache_partition_bench.png", "content_id": "f_l5kkyunm0", "disposition": "attachment", "content_type": "image/png"}, {"charset": "US-ASCII", "part_id": "4", "file_name": "copybench.sh", "content_id": "f_l5kl159u1", "disposition": "attachment", "content_type": "text/x-sh"}, {"charset": "US-ASCII", "part_id": "5", "file_name": "v11-0002-Do-partition-caching-another-way.patch", "content_id": "f_l5kl52ho3", "disposition": "attachment", "content_type": "text/plain"}, {"charset": "US-ASCII", "part_id": "6", "file_name": "v11-0003-likely.patch", "content_id": "f_l5kl570n4", "disposition": "attachment", "content_type": "text/plain"}]		I've spent some time looking at the v10 patch, and to be honest, I\r\ndon't really like the look of it :(\r\n\r\n1. I think we should be putting the cache fields in PartitionDescData\r\nrather than PartitionDispatch. Having them in PartitionDescData allows\r\ncaching between statements.\r\n2. The function name maybe_cache_partition_bound_offset() fills me\r\nwith dread. It's very unconcise. I don't think anyone should ever use\r\nthat word in a function or variable name.\r\n3. I'm not really sure why there's a field named n_tups_inserted.\r\nThat would lead me to believe that ExecFindPartition is only executed\r\nfor INSERTs. UPDATEs need to know the partition too.\r\n4. The fields you're adding to PartitionDispatch are very poorly\r\ndocumented.  I'm not really sure what n_offset_changed means. Why\r\ncan't you just keep track by recording the last used partition, the\r\nlast index into the datum array, and then just a count of the number\r\nof times we've found the last used partition in a row?  When the found\r\npartition does not match the last partition, just reset the counter\r\nand when the counter reaches the cache threshold, use the cache path.\r\n\r\nI've taken a go at rewriting this, from scratch, into what I think it\r\nshould look like.  I then looked at what I came up with and decided\r\nthe logic for finding partitions should all be kept in a single\r\nfunction.  That way there's much less chance of someone forgetting to\r\nupdate the double-checking logic during cache hits when they update\r\nthe logic for finding partitions without the cache.\r\n\r\nThe 0001 patch is my original attempt. I then rewrote it and came up\r\nwith 0002 (applies on top of 0001).\r\n\r\nAfter writing a benchmark script, I noticed that the performance of\r\n0002 was quite a bit worse than 0001. I noticed that the benchmark\r\nwhere the partition changes each time got much worse with 0002.  I can\r\nonly assume that's due to the increased code size, so I played around\r\nwith likely() and unlikely() to see if I could use those to shift the\r\ncode layout around in such a way to make 0002 faster.  Surprisingly\r\nusing likely() for the cache hit path make it faster. I'd have assumed\r\nit would be unlikely() that would work.\r\n\r\ncache_partition_bench.png shows the results.  I tested with master @\r\na5f9f1b88.  The "Amit" column is your v10 patch.\r\ncopybench.sh is the script I used to run the benchmarks. This tries\r\nall 3 partitioning strategies and performs 2 COPY FROMs, one with the\r\nrows arriving in partition order and another where the next row always\r\ngoes into a different partition.  I'm expecting to see the "ordered"\r\ncase get better for LIST and RANGE partitions and the "unordered" case\r\nnot to get any slower.\r\n\r\nWith all of the attached patches applied, it does seem like I've\r\nmanaged to slightly speed up all of the unordered cases slightly.\r\nThis might be noise, but I did manage to remove some redundant code\r\nthat needlessly checked if the HASH partitioned table had a DEFAULT\r\npartition, which it cannot.  This may account for some of the increase\r\nin performance.\r\n\r\nI do need to stare at the patch a bit more before I'm confident that\r\nit's correct. I just wanted to share it before I go and do that.\r\n\r\nDavid\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, Greg Stark <stark@mit.edu>, \\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"tsunakawa.takay@fujitsu.com\\" <tsunakawa.takay@fujitsu.com>, Alvaro Herrera <alvherre@2ndquadrant.com>"], "To": ["Amit Langote <amitlangote09@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:30:56 +1200"], "From": ["David Rowley <dgrowleyml@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Skip partition tuple routing with constant partition key"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657776687; cv=none; d=google.com; s=arc-20160816; b=NMH+KLlkS5bUm4vrY3jsuobuyLD86Vmbb/vklBJeyqcbYhWd3XUIYl4BAYg5wVwsIJ ZFz9PQ7N5Vn7O7qlhA5MFKo90kAcK1U/Ueptn2EmH3NyWBC65kSjq6IsaWAUCXK1uC9Z GruQ/wzZRdIgxovZcXTPDPktWNFgPeQzeSxEjpQMHuakT2ulJ5SwXBanNz50EzdSYWoO sqB2d2v+mY3GlGKrFyA5clbZipfZbhKTh0Ylt5QhcJyfhwbRED+8vLZbozAU3rGLECdU 3oOjsXS812KPgXiXfFVeyQGH+4Cu6vMkhHvffw4cYi/McuMBmEdAMkQgvVE6x9SBlWKp W18w=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp51814jai; Wed, 13 Jul 2022 22:31:28 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t6-20020a675f06000000b003574efdb5b6si60633vsb.433.2022.07.13.22.31.26 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 22:31:27 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410683@lists.postgresql.org>) id 1oBrRd-0000Hd-QF for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 05:31:25 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oBrRb-0008EH-73 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:31:23 +0000", "from mail-oi1-x22f.google.com ([2607:f8b0:4864:20::22f]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oBrRT-0007Tj-R1 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 05:31:22 +0000", "by mail-oi1-x22f.google.com with SMTP id w81so1255304oiw.0 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 22:31:15 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAApHDvqFeW5hvQqprXOLuGMMJSf+1C+Wk4w_L-M03sVduF3oYg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571649B27E912EA6CC4EEF03942D9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqEscNWguQC=QkvHgc=YY=68N-QOPy0Mq8oObuOe=bZh1w@mail.gmail.com> <CAApHDvqLYzH6Jv95ZiFU8OSQ=zdShKSw=EhmmNq8NiqsWtCS=Q@mail.gmail.com> <CA+HiwqFbMSLDMinPRsGQVn_gfb-bMy0J2z_rZ0-b9kSfxXF+Ag@mail.gmail.com> <OS0PR01MB5716B2AFF51ECB0775A77480942A9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqFWGNSy1zwcno=AuLLScCFV64P3BYt+EXqqwM1DYhQ16Q@mail.gmail.com> <OS0PR01MB5716D6702C8C8060CC17292694269@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqGjb_O8qn-uL1=z6ri=fnD35MDMiA4yHunfsgY3=yv=Hw@mail.gmail.com> <OS0PR01MB5716F316F03668D4662FA62394269@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqHat-gsEuA-CCgPA-JMrii0yRNKkrNyMpLdeZSBLHNhxw@mail.gmail.com> <OS0PR01MB57165E31963121F21D84CF6694249@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqE8pNeXqC4FMkOMgbK52m0PmS=0aLxfAFsT7a_4EiFp8g@mail.gmail.com> <OS0PR01MB571617126F5976D2CBA9FF5B94239@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqF2Mgb_-b1n06WN6tNn78pM3vvNWfVZ6FVR-oxS=8-HKA@mail.gmail.com> <OS0PR01MB57169DEA5CFDC23A1F4A832D94239@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqGv4oSPm6Ow_97tj3Hxrf6n-b2wWadPG1b3gQufhb2vhw@mail.gmail.com> <OS0PR01MB57160B80213127D5F9862276943E9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqF8PaKTkVbf2Gdtg2ySjRcshqk=MEBh8AQQW+cGSfgHLw@mail.gmail.com> <CA+HiwqF0qYf4gjMjTnFx_oNDMJ7z8o3SjSSnCEdbBLNEF_0MgQ@mail.gmail.com> <CA+HiwqEnp_iLNkSw1HhUUWt6OBuQVr3Y3O6T7s+OFc5GAhGqSg@mail.gmail.com> <CA+HiwqH86BSZ7mKzqBGX9P0AN1LAoDj=cVwbKm5E0yoaU0FcMw@mail.gmail.com> <OS0PR01MB571697D033C2CFB229D6F86494389@OS0PR01MB5716.jpnprd01.prod.outlook.com> <CA+HiwqFHpwrhwdw715Eky7QSPW8kFiR3MiUqeAJkGNRp5GNKbA@mail.gmail.com> <CA+HiwqFFzYFEwdBHvskjNfgUAV7-2vnuUYYop2QHPQq5SKGX2Q@mail.gmail.com> <CALNJ-vR+u9kNS4jC8i0HPu0ejFUa3uhtdaGZmJ6CB0Q_-rn_0Q@mail.gmail.com> <CA+HiwqGqh-aHXGO8-_ftU7e2GdGUr_T-xqr6Z_6uagyJpEpJfA@mail.gmail.com> <CALNJ-vQnG+EDEdnehzY2NeuSyDpPyMeAi29Vw6iK6e_91xsNUA@mail.gmail.com> <CA+HiwqEQyoS+mvwxh13G52UpDCBLKG1xNjBeDDCFFy2KOVzkWw@mail.gmail.com> <CA+HiwqFvdVZZgJnr_MADr4Hj85wdVeeNFgJt0_uKa8B97ZpXjQ@mail.gmail.com> <CAM-w4HO3+v2Jtxc5P4eWB5DW9m4vyfUJb8eR9c8Akcf3SSMJgQ@mail.gmail.com> <CA+HiwqG2z9437yV4ZPp4cEU72Bhe8hY4AJjUcb=okAuuNPdQWw@mail.gmail.com> <CALNJ-vRevph-xwvoEJTHEtJJThknCLCtj8LM6928mhC7nykCxQ@mail.gmail.com> <CA+HiwqGEj3EoK3FgSc9w19Kp++w9sNJOAKmoG0_hbz09ZmBYMg@mail.gmail.com>"], "X-Received": ["by 2002:a05:6102:5585:b0:357:7b42:2113 with SMTP id dc5-20020a056102558500b003577b422113mr2725184vsb.34.1657776687730; Wed, 13 Jul 2022 22:31:27 -0700 (PDT)", "by 2002:a05:6808:2113:b0:33a:17eb:3d04 with SMTP id r19-20020a056808211300b0033a17eb3d04mr3646289oiw.265.1657776673555; Wed, 13 Jul 2022 22:31:13 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAApHDvqFeW5hvQqprXOLuGMMJSf%2B1C%2BWk4w_L-M03sVduF3oYg%40mail.gmail.com>"], "In-Reply-To": ["<CA+HiwqGEj3EoK3FgSc9w19Kp++w9sNJOAKmoG0_hbz09ZmBYMg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410683@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000beccdd05e3bd355a\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410683@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=Zz37vFrmmu0/pc8d9njhGneJmTOoAAvjJE6/KmdOnb8=; b=DQeMK3p1r7usqoY0jxm3kkDVjlQba8ShOpz9Kvjz9/SOgx4ObqzZofwlC16sSN+2mx 8reUCzU+MZkpG/kiLcfYhRvOeYelpGubxDF8BnbTHuayrEuqmL+TDuBXznLpkUVG0Ahu W3yw3vPtQOsAbZ48wBDLuYKxLLRA5Y2RNax3yNZbJH/0Z1SwIgLVJ4C5sh3wWZxYl4hb niJvJYbKfSA7eF6nBy1E4PhX5/qVf5AMh6UEQZNW7A/GMNasDd99U/mIDwofM9Zj952B +b2/wfuY6N4vS6RXq6iRmEBGH38fEEM7kOGEWxosWiqwy4q8Xeprowikspxhrkdk68SD H5uw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+GDnTCChRn/bYxuCiaskk+L0ChhlHDphr9mTLpyhPMAbIEo1Jm RFXFpOqvKQSZUTT3eDzpqJzKztW88s77+mOvn9Y="], "X-Google-Smtp-Source": ["AGRyM1tUtjzNOkoEXqQxMO/uGwP8X36hT991I2WMaaf8Pqv5G4P1xVyfbrWh9EeZQmXrYJCurH05"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=Zz37vFrmmu0/pc8d9njhGneJmTOoAAvjJE6/KmdOnb8=; b=Df3qOuS3tuJz8kv2ekOkObK/stdJm4/dGnafF0ncd3rWljEXOoockJKz8GAvXOPAEY vulV/+IpC/f7qNfMB+wys5hai4OCq1El7IkAvZpWHQ52DNTOWJYw3XKT/pUqKUyb/TXJ VYNfPv2Ezgcmt2u/OyPSgPnU2ENOjt7A3Iyy+jio/zGQyzwrOQklTL0GN8ObPkFNfown CYM55obYp3ckcRnqUDz3CUjES7ECrn4j0LJ+0lbE4tg2Z8Z5sSAHEESulXMQH2/hV2R0 mMMJ4hOu8gtybgSJfJqqF8rd2muhwKKvTQLlfGOrPNJeQKz65BV0QwtSaJKD4orhQ1N0 pVIA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=DQeMK3p1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410683@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410683@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=Zz37vFrmmu0/pc8d9njhGneJmTOoAAvjJE6/KmdOnb8=; b=BIaIJYWD/lwWVyjC2Ws+P+ZCB0pZri2UdKsTh94LTmirPm6nz+m9GoDCTdFJnmXhtW j+WBSIAxYUItfmpKAJArCIa9OT2QqMMCe9/FcfhvWni4Jj5ifJ3pOlRvBSxchcr6FU2H HwFCNMFgpl84DfAPvICRPVdmqL5lh1vebU9DnVKdPSxlPI7DRx57YopowEWM4uQ4omYC Q7/HVd+DFjxv5TBVxWK9ikfz2pP4ksNrVp40hbUgZckvl2PlShrYWACcZV/4GLeO3c/e gJXBaBmpnX22h5ezHZVd7NhVSsxJDY5MlDwNSNQQqvPGreKFYpgfB7TDaqVwJjI5CZsP Iecg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=DQeMK3p1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410683@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410683@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CA+HiwqGEj3EoK3FgSc9w19Kp++w9sNJOAKmoG0_hbz09ZmBYMg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 06:38:37+00	horikyota.ntt@gmail.com	Re: i.e. and e.g.	<20220714.153837.2007183381600922203.horikyota.ntt@gmail.com>	[{"Name": "", "Address": "john.naylor@enterprisedb.com"}]	[{"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	56	8689	[]		At Thu, 14 Jul 2022 09:40:25 +0700, John Naylor <john.naylor@enterprisedb.com> wrote in \r\n> On Wed, Jul 13, 2022 at 4:13 PM Kyotaro Horiguchi <horikyota.ntt@gmail.com>\r\n> wrote:\r\n> >\r\n> > At Wed, 13 Jul 2022 18:09:43 +0900 (JST), Kyotaro Horiguchi <\r\n> horikyota.ntt@gmail.com> wrote in\r\n> > > So, "e.g." (for example) in the message sounds like "that is", which I\r\n> > > think is "i.e.".  It should be fixed if this is correct.  I'm not sure\r\n> > > whether to keep using Latin-origin acronyms like this, but in the\r\n> > > attached I used "i.e.".\r\n> \r\n> I did my own quick scan and found one use of i.e. that doesn't really fit,\r\n> in a sentence that has other grammatical issues:\r\n> \r\n> -        Due to the differences how ECPG works compared to Informix's\r\n> ESQL/C (i.e., which steps\r\n> +        Due to differences in how ECPG works compared to Informix's ESQL/C\r\n> (namely, which steps\r\n>          are purely grammar transformations and which steps rely on the\r\n\r\nOh!\r\n\r\n> I've pushed that in addition to your changes, thanks!\r\n\r\nThanks!\r\n\r\nregards.\r\n\r\n-- \r\nKyotaro Horiguchi\r\nNTT Open Source Software Center\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	{"Cc": ["pgsql-hackers@lists.postgresql.org"], "To": ["john.naylor@enterprisedb.com"], "Date": ["Thu, 14 Jul 2022 15:38:37 +0900 (JST)"], "From": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: i.e. and e.g."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657780728; cv=none; d=google.com; s=arc-20160816; b=Fkx1gs/b1ey69kNO5ss2dfT0Yx2V4jJ+nKWHNAZrphOIFoBJkMS8oHuQvEGZm3rhQO lenXjyT70UFuazJNLlnWd5c+8SR8tJjm0GShEZ21oe0w+TOXz/xZvBqO7SqO+C6KCDEH qxIXp0gLiDrAEEDa01Y4qnG0Vb6WDhCSVOCvkB/1NyDxhZN2lyR81fK7qCPkO/9PN21v SqM3eoILuSmzYvIPqqguIme6MJCO5DfqmS8typVHH7x1ApRJdo7FOWW4Zw1YnEKr12WI qj8VJNR3jMdm0zTQf2oKK2WxpOrLp/J/wE9fHTkJ/fytM895+GtU6SRCCijX42G1oIZB YiFg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp61110jai; Wed, 13 Jul 2022 23:38:48 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id y12-20020a05600015cc00b0021bbd508d62si1051895wry.778.2022.07.13.23.38.47 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 23:38:48 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410695@lists.postgresql.org>) id 1oBsUp-0005An-Ii for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 06:38:47 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oBsUn-0004hz-H8 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 06:38:45 +0000", "from mail-pg1-x52a.google.com ([2607:f8b0:4864:20::52a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oBsUk-00063F-Hf for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 06:38:44 +0000", "by mail-pg1-x52a.google.com with SMTP id o18so692156pgu.9 for <pgsql-hackers@lists.postgresql.org>; Wed, 13 Jul 2022 23:38:42 -0700 (PDT)", "from localhost (KD036014041111.ppp-bb.dion.ne.jp. [36.14.41.111]) by smtp.gmail.com with ESMTPSA id 141-20020a621693000000b0052ab9f1fe45sm700442pfw.120.2022.07.13.23.38.39 (version=TLS1_3 cipher=TLS_CHACHA20_POLY1305_SHA256 bits=256/256); Wed, 13 Jul 2022 23:38:40 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714.153837.2007183381600922203.horikyota.ntt@gmail.com>"], "Precedence": ["bulk"], "References": ["<20220713.180943.589079824955875739.horikyota.ntt@gmail.com> <20220713.181351.787174326048120292.horikyota.ntt@gmail.com> <CAFBsxsHr4JO7vRYKZ=UVmyoQC4N+tvPiAB1yCJ-6yUfs80e0gw@mail.gmail.com>"], "User-Agent": ["Mew version 6.8 on Emacs 26.1"], "X-Received": ["by 2002:a05:600c:19c8:b0:3a1:7399:861d with SMTP id u8-20020a05600c19c800b003a17399861dmr7379243wmq.170.1657780728533; Wed, 13 Jul 2022 23:38:48 -0700 (PDT)", "by 2002:a65:558f:0:b0:419:57c9:31dd with SMTP id j15-20020a65558f000000b0041957c931ddmr6243168pgs.222.1657780721227; Wed, 13 Jul 2022 23:38:41 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714.153837.2007183381600922203.horikyota.ntt%40gmail.com>"], "In-Reply-To": ["<CAFBsxsHr4JO7vRYKZ=UVmyoQC4N+tvPiAB1yCJ-6yUfs80e0gw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410695@lists.postgresql.org>"], "Content-Type": ["Text/Plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410695@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:message-id:to:cc:subject:from:in-reply-to:references :user-agent:mime-version:content-transfer-encoding; bh=Tj5LuHlq/6UTrNesYhOP2C1uR9OA1eKBqYOXBQd1it0=; b=cFRZaqDnXVzgpQ1JUQnwZv9C5l+PlXkuHV0O9xCGZpOyJJZHkesEqY07VnSmaTQMlw JkPNRpMdHzRHVlzhA9v8nDA0m3glh396VHftC3lAu3X3xGdwj5MgNjbkqKgUX+gAQsk5 zgtnPPK+YQLRN+3cAHq9n+pJgRxpLnPJUQNA7c4EYoc/L1f+DmwCEQGRdVdeHAUnn3pc 9WvSIOzIPbWds+wCCiwbEOPORVYhr6C+ZZPWDulSvZs+t8Mf9rh1R60hnxBpGbcYut2u LrYg/mYkW+xqE4bvDyzym7CTXJ3YwQ12Ly1nYgM1bFmvo/nkuY5al/KuPu0OWCm2wTce nKbg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/MAoo/QKvrI2H9QVEne6ZectaJ5C9JL8ThH9xXIFLSCb3wlnf9 SNthV8cl6lqVVPpvONBZzy8="], "X-Google-Smtp-Source": ["AGRyM1uwH7lwzYL5SUGzWFaYahdpb8phdL1AcHLVOGFVo4TvSMyARrIxwUsT5Xi2SByTanxmbAt9"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:mime-version:user-agent:references :in-reply-to:from:subject:cc:to:message-id:date:dkim-signature; bh=Tj5LuHlq/6UTrNesYhOP2C1uR9OA1eKBqYOXBQd1it0=; b=HibreGmp13AzBhZF8HglTYY5/dzkFOsKb87DBCV/+4nCLhUylDeLpmb6WQuyCZqTBH m/TFkjMFWj6zW8va4juE7IYb0YFOfocUI/Dj991ey5ln3zYlg00vQ3GPaZ+DF87Us8Qi 2azR29qZfp+36+KQFGXoTbPP8BuXxsCeDYoetuJYvVyIPZ6eLtwH+jpXjYS1qX36Fzb5 ZDbSNnHFUUMzM3T6BvkwhdacJpvyRhu8qTJZRFHphnnO3gsT1i5Utb3s5gqllIifdrQd bFxKhuaL2nP7E2xeLAmue1rVXMBt/AjBpsfOI83DhpP8H7azzEW4Lvjn9UdWUrmmlluh HURA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=cFRZaqDn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410695@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410695@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:message-id:to:cc:subject:from:in-reply-to :references:user-agent:mime-version:content-transfer-encoding; bh=Tj5LuHlq/6UTrNesYhOP2C1uR9OA1eKBqYOXBQd1it0=; b=CVQQW9pfkoOm3dCjxFOtveRlR//JVOma9i9wRicn1FEdsrRHVrL1YnbsnuFulXg3ua tEYt65Sl5Ii6u7ecdft0OMpWk/P7HcDOeHSTASzjs4LltwTzHJjB0NOQTLSlrA94DPrH Nubxig11nNvdYoHvsFEhTpv+3+DZL1tKboGha70/iPioMKFiM5lw/+Cm+UqfBv43MquH 1cwDYBM4k7eCZyBH2tFigrHf0iLMW/g2G/1HTLDE9BE6lojp10Wy96p6BwK3Y9m2ErD0 qnkH0GtfNwNYKrgRyVnftExLPkrG3Qr3Igev9vKsSfwDEJgHcFaA6Vs3F3mEHDjAC7mF xqOg=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=cFRZaqDn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410695@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410695@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAFBsxsHr4JO7vRYKZ=UVmyoQC4N+tvPiAB1yCJ-6yUfs80e0gw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 06:51:24+00	ah@cybertec.at	Re: [PROPOSAL] Detecting plan changes with plan_id in pg_stat_activity	<1960.1657781484@antos.home>	[{"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}]	[{"Name": "Imseih (AWS), Sami", "Address": "simseih@amazon.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	57	12919	[]		Shouldn't the patch status be set to "Waiting on Author"?\r\n\r\n(I was curious if this is a patch that I can review.)\r\n\r\nJulien Rouhaud <rjuju123@gmail.com> wrote:\r\n\r\n> On Wed, Jun 22, 2022 at 11:05:54PM +0000, Imseih (AWS), Sami wrote:\r\n> > >    Can you describe how it's kept in sync, and how it makes sure that the property\r\n> > >    is maintained over restart / gc?  I don't see any change in the code for the\r\n> > >    2nd part so I don't see how it could work (and after a quick test it indeed\r\n> > >    doesn't).\r\n> >\r\n> > There is a routine called qtext_hash_sync which removed all entries from\r\n> > the qtext_hash and reloads it will all the query ids from pgss_hash.\r\n> > [...]\r\n> > All the points when it's called, an exclusive lock is held.this allows or syncing all\r\n> > The present queryid's in pgss_hash with qtext_hash.\r\n> \r\n> So your approach is to let the current gc / file loading behavior happen as\r\n> before and construct your mapping hash using the resulting query text / offset\r\n> info.  That can't work.\r\n> \r\n> > >    2nd part so I don't see how it could work (and after a quick test it indeed\r\n> > >    doesn't).\r\n> >\r\n> > Can you tell me what test you used to determine it is not in sync?\r\n> \r\n> What test did you use to determine it is in sync?  Have you checked how the gc/\r\n> file loading actually work?\r\n> \r\n> In my case I just checked the size of the query text file after running some\r\n> script that makes sure that there are the same few queries ran by multiple\r\n> different roles, then:\r\n> \r\n> Size of $PGDATA/pg_stat_tmp/pgss_query_texts.stat: 559B\r\n> pg_ctl restart\r\n> Size of $PGDATA/pg_stat_tmp/pgss_query_texts.stat: 2383B\r\n> \r\n> > >    Can you share more details on the benchmarks you did?  Did you also run\r\n> > >    benchmark on workloads that induce entry eviction, with and without need for\r\n> > >    gc?  Eviction in pgss is already very expensive, and making things worse just\r\n> > >    to save a bit of disk space doesn't seem like a good compromise.\r\n> >\r\n> > Sorry this was poorly explained by me. I went back and did some benchmarks. Attached is\r\n> > The script and results. But here is a summary:\r\n> > On a EC2 r5.2xlarge. The benchmark I performed is:\r\n> > 1. create 10k tables\r\n> > 2. create 5 users\r\n> > 3. run a pgbench script that performs per transaction a select on\r\n> > A randomly chosen table for each of the 5 users.\r\n> > 4. 2 variants of the test executed . 1 variant is with the default pg_stat_statements.max = 5000\r\n> > and one test with a larger pg_stat_statements.max = 10000.\r\n> \r\n> But you wrote:\r\n> \r\n> > ##################################\r\n> > ## pg_stat_statements.max = 15000\r\n> > ##################################\r\n> \r\n> So which one is it?\r\n> \r\n> >\r\n> > So 10-15% is not accurate. I originally tested on a less powered machine. For this\r\n> > Benchmark I see a 6% increase in TPS (732k vs  683k) when we have a larger sized\r\n> > pg_stat_statements.max is used and less gc/deallocations.\r\n> > Both tests show a drop in gc/deallocations and a net increase\r\n> > In tps. Less GC makes sense since the external file has less duplicate SQLs.\r\n> \r\n> On the other hand you're rebuilding the new query_offset hashtable every time\r\n> there's an entry eviction, which seems quite expensive.\r\n> \r\n> Also, as I mentioned you didn't change any of the heuristic for\r\n> need_gc_qtexts().  So if the query texts are indeed deduplicated, doesn't it\r\n> mean that  gc  will artificially\r\n> be called less often?  The wanted target of "50% bloat" will become "50%\r\n> bloat assuming no deduplication is done" and the average query text file size\r\n> will stay the same whether the query texts are deduplicated or not.\r\n> \r\n> I'm wondering the improvements you see due to the patch or simply due to\r\n> artificially calling gc less often?  What are the results if instead of using\r\n> vanilla pg_stat_statements you patch it to perform roughly the same number of\r\n> gc as your version does?\r\n> \r\n> Also your benchmark workload is very friendly with your feature, what are the\r\n> results with other workloads?  Having the results with query texts that aren't\r\n> artificially long would be interesting for instance, after fixing the problems\r\n> mentioned previously.\r\n> \r\n> Also, you said that if you run that benchmark with a single user you don't see\r\n> any regression.   I don't see how rebuilding an extra hashtable in\r\n> entry_dealloc(), so when holding an exclusive lwlock, while not saving any\r\n> other work elsewhere could be free?\r\n> \r\n> Looking at the script, you have:\r\n> echo "log_min_messages=debug1" >> $PGDATA/postgresql.conf; \\\r\n> \r\n> Is that really necessary?  Couldn't you upgrade the gc message to a higher\r\n> level for your benchmark need, or expose some new counter in\r\n> pg_stat_statements_info maybe?  Have you done the benchmark using a debug build\r\n> or normal build?\r\n> \r\n> \r\n\r\n-- \r\nAntonin Houska\r\nWeb: https://www.cybertec-postgresql.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Antonin Houska", "Address": "ah@cybertec.at"}]	{"Cc": ["\\"Imseih (AWS), Sami\\" <simseih@amazon.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Julien Rouhaud <rjuju123@gmail.com>"], "Date": ["Thu, 14 Jul 2022 08:51:24 +0200"], "From": ["Antonin Houska <ah@cybertec.at>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PROPOSAL] Detecting plan changes with plan_id in pg_stat_activity"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657781457; cv=none; d=google.com; s=arc-20160816; b=ziE79S9I9v8+rDeSyBwV15LMHnxJF19L27CPtH0/sKk5TOS5PEunni1GScYkaDO4JR WcKCj7STeRxR6FSpHwpiNybpb8wdi+EOT3tYNoW/5zOYfHU98Kaas4bIRDdQLWUKaZqS PSXY/XQH7ifRT1b7EqR19O5MTwclMuLms8XX9pE09L/NEIJ1hZj/hlc1NYnolNR0QOjQ UuMjEuP8Tc3UjSi43NA1OXO1Es3r6BqhEHz1oKio9LCvGQjzD3dfe7wih6WgehYM4E/j mfm5aEQFUk9/ARnXQ32vydF8mBo13pewBThFB3psKwScTaG18VyVVbtfMv9u2xbH5cvM iO0g=="], "Comments": ["In-reply-to Julien Rouhaud <rjuju123@gmail.com> message dated \\"Thu, 23 Jun 2022 11:12:06 +0800.\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp62670jai; Wed, 13 Jul 2022 23:50:57 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e11-20020a67e18b000000b00356f8f40098si74304vsl.704.2022.07.13.23.50.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 23:50:57 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410697@lists.postgresql.org>) id 1oBsga-0001NH-Nz for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 06:50:56 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <ah@cybertec.at>) id 1oBsgW-0008Ge-CE for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 06:50:52 +0000", "from mail-ej1-x632.google.com ([2a00:1450:4864:20::632]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <ah@cybertec.at>) id 1oBsgS-0008G2-8A for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 06:50:51 +0000", "by mail-ej1-x632.google.com with SMTP id z23so1670787eju.8 for <pgsql-hackers@postgresql.org>; Wed, 13 Jul 2022 23:50:47 -0700 (PDT)", "from antos.home (90-183-80-73.rcq.o2.cz. [90.183.80.73]) by smtp.gmail.com with ESMTPSA id l22-20020a056402231600b0043a1255bc68sm491951eda.94.2022.07.13.23.50.45 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Wed, 13 Jul 2022 23:50:46 -0700 (PDT)"], "X-Mailer": ["MH-E 8.6+git; nmh 1.7+dev; GNU Emacs 27.2.50"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<1959.1657781484.1@antos.home>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<1960.1657781484@antos.home>"], "Precedence": ["bulk"], "References": ["<604E3199-2DD2-47DD-AC47-774A6F97DCA9@amazon.com> <20220616051938.g3wf7rlgyuo4rohj@jrouhaud> <70C9C1F5-BE5C-4008-98F3-88DE09900D0E@amazon.com> <516E294A-A0EC-4998-9C3C-BBFCA6E679A5@amazon.com> <20220622043810.zhk5v4jl3yyvalyo@jrouhaud> <545ABFC1-D5E9-4048-9737-2A7AB2C29174@amazon.com> <20220623031206.6jdycxd2fb65ur5h@jrouhaud>"], "X-Received": ["by 2002:ac5:c5b7:0:b0:374:f09c:5cbd with SMTP id f23-20020ac5c5b7000000b00374f09c5cbdmr2846391vkl.40.1657781457800; Wed, 13 Jul 2022 23:50:57 -0700 (PDT)", "by 2002:a17:906:4fc4:b0:6da:b4c6:fadb with SMTP id i4-20020a1709064fc400b006dab4c6fadbmr7327905ejw.282.1657781446970; Wed, 13 Jul 2022 23:50:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/1960.1657781484%40antos.home>"], "In-Reply-To": ["<20220623031206.6jdycxd2fb65ur5h@jrouhaud>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410697@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410697@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=cybertec-at.20210112.gappssmtp.com; s=20210112; h=from:to:cc:subject:in-reply-to:references:comments:mime-version :content-id:content-transfer-encoding:date:message-id; bh=yKQI/NKm4IIJMVl5/YlGmy1xkDmrY25BfLFUhHCJtxI=; b=daNhdIocvPMFBzvUyqKsAg15/ckyp7nswAK9VMNTiiqpjMLxZicQwuvoXUkqSkc4ja jKGecjNhR7yXeFxb6jd4Aj58pbJR9+7b+6/LGTgXQ80/bcYpczJlkTx2iSXkF1WN5qiw ieT6pDrkBUZl8cTZZZWaLvmghtbTHMOXKAlDXH1rBCBjw01GI+B769e7gohvIaFBGD/w hdm3kZbK385iDg1f4xV38fbRLZjG5TyJzoj2xl/p+fsKMr9rVjkEs5YW9f5dsFe+iM/J z8hbgViE9OyzKyM5rdKaYEptvmyNRV+OezvFUoZkOMSGHz+hgGHjGlZTodnZzMr6ntz8 dW4w=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+nmba2QdG4olBR5D1A+bevbI+6zkHpxfSd+k6hV2Lf0nVNYE44 C0HKcRKfjvxZQb0WDQozx1dfkVoZFgmJwg=="], "X-Google-Smtp-Source": ["AGRyM1t6B91MYaoUQ1Oi89pjQ/LR2vIPZ3ZCNopDCt0wNTQlJwffD8VpWfcn2Q9ihY0Lbjew0/Ak"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from:dkim-signature; bh=yKQI/NKm4IIJMVl5/YlGmy1xkDmrY25BfLFUhHCJtxI=; b=KTwGOHdLHipp4MIeU9gv1XI3LlZM9KI9cvNy+MUoq5nKL7w0fGXQPjccxwx0BnWBLA +cn3m4hAMRN0VXSMDD8frDp/NVq3uNmwSRV7n5vAP0RL4gMxGBxun86FDXYtAhaBkkIZ 9xOowhTBNk2oOYI+7NHGVuq2U0SAI5WtQ+A9R3jYgc63VmIKtpBajAVf3fPXhncc4wXH 43udB5ny2YMSJ51Td12R54RswGXfC2Jrk6CNSmZuIA/LeKLKY0KYvNq8TyC3E8b1VcYy pcb5M1rkdqUV2XTiJtZbiGwZ+lzvZoqzdULNmkqstEirH+dcn6fm0jVPJUnUgAcjlwiK ehEw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@cybertec-at.20210112.gappssmtp.com header.s=20210112 header.b=daNhdIoc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410697@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410697@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:from:to:cc:subject:in-reply-to:references :comments:mime-version:content-id:content-transfer-encoding:date :message-id; bh=yKQI/NKm4IIJMVl5/YlGmy1xkDmrY25BfLFUhHCJtxI=; b=pGZ5YqQjpVZNWbWNDtksnrVOiKd93xF2k1aWYFNv4+A1Au2szZJU9uThMySx4oWeOP uq+5qBrlhbEwlMgrJTB0SUV0SVhzRtSMoSE4wlQMxWe8MipwLebbfpRJZ2KGe5cIjXK9 ESDMq2/KJq0eSAwpwe46Pkbq6DgPdcerGx1KCrHHMF9fFuwRyzM5VgDh7rrkYpDIGCk9 ptZYgfnYk1K4kTJeuWZNpC+NYAgMrmpK2eZuuJpNHXYGqsq8ytjR9aFAnCKUBYf3K0gq Snufpzr9dqxu/p31qNIPZyzRwwzY3dhENbLraWDjYjjHHaryWB/NtlXWXQZ0HIdrY5g9 ALZQ=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@cybertec-at.20210112.gappssmtp.com header.s=20210112 header.b=daNhdIoc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410697@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410697@lists.postgresql.org"]}	["<20220623031206.6jdycxd2fb65ur5h@jrouhaud>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 07:13:10+00	rjuju123@gmail.com	Re: [PROPOSAL] Detecting plan changes with plan_id in pg_stat_activity	<20220714071310.uien2tikv5ddr2vz@jrouhaud>	[{"Name": "Antonin Houska", "Address": "ah@cybertec.at"}]	[{"Name": "Imseih (AWS), Sami", "Address": "simseih@amazon.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	58	7950	[]		Hi,\r\n\r\nOn Thu, Jul 14, 2022 at 08:51:24AM +0200, Antonin Houska wrote:\r\n> Shouldn't the patch status be set to "Waiting on Author"?\r\n>\r\n> (I was curious if this is a patch that I can review.)\r\n\r\nAh indeed, I just updated the CF entry!\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}]	{"Cc": ["\\"Imseih (AWS), Sami\\" <simseih@amazon.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Antonin Houska <ah@cybertec.at>"], "Date": ["Thu, 14 Jul 2022 15:13:10 +0800"], "From": ["Julien Rouhaud <rjuju123@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PROPOSAL] Detecting plan changes with plan_id in pg_stat_activity"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657782805; cv=none; d=google.com; s=arc-20160816; b=w/nV6cO8YR26sKbb/CcK4+i/jPjpjPc1QSpB904WvGnCf1bgRAPvo5TH2Xp5YjgJIh PawCZ96rqawO2FZ7D4H7YKCs8GP3iVv/O0AxxjEsY73cpl6R5wMDc6TWAmujanIJwjbV hfEAIsuGAXUR4uXBzBi9sVfttlEkFtpMKFV0iiEE4H520MWm6q3geoY1U8JyMKsF/dC/ VK+192K5b6BaoSJEP3tkJJak2E94nGi8kcCxHNOa4o/Oe0N6HVI5EkHIQKv6R2XAlZE2 N3hjyylFQtjYqWAgbkIYxS5WiT5g9vlsaUmhazODo1uXHrHbeR8V3dP9DNBdpl/hr6/v vy2g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp66325jai; Thu, 14 Jul 2022 00:13:25 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x25-20020a67c099000000b003575f548996si78433vsi.636.2022.07.14.00.13.25 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 00:13:25 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410700@lists.postgresql.org>) id 1oBt2K-0002PE-Cc for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 07:13:24 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <rjuju123@gmail.com>) id 1oBt2G-0000uY-0L for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 07:13:20 +0000", "from mail-pg1-x52d.google.com ([2607:f8b0:4864:20::52d]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <rjuju123@gmail.com>) id 1oBt2D-0008VM-Oj for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 07:13:19 +0000", "by mail-pg1-x52d.google.com with SMTP id e132so766713pgc.5 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 00:13:17 -0700 (PDT)", "from jrouhaud (2001-b011-1005-73a9-4924-77ab-ddb5-cb36.dynamic-ip6.hinet.net. [2001:b011:1005:73a9:4924:77ab:ddb5:cb36]) by smtp.gmail.com with ESMTPSA id j5-20020a170902da8500b0015e8d4eb285sm644633plx.207.2022.07.14.00.13.13 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 00:13:14 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714071310.uien2tikv5ddr2vz@jrouhaud>"], "Precedence": ["bulk"], "References": ["<604E3199-2DD2-47DD-AC47-774A6F97DCA9@amazon.com> <20220616051938.g3wf7rlgyuo4rohj@jrouhaud> <70C9C1F5-BE5C-4008-98F3-88DE09900D0E@amazon.com> <516E294A-A0EC-4998-9C3C-BBFCA6E679A5@amazon.com> <20220622043810.zhk5v4jl3yyvalyo@jrouhaud> <545ABFC1-D5E9-4048-9737-2A7AB2C29174@amazon.com> <20220623031206.6jdycxd2fb65ur5h@jrouhaud> <1960.1657781484@antos.home>"], "X-Received": ["by 2002:ab0:2702:0:b0:383:bc95:e0b6 with SMTP id s2-20020ab02702000000b00383bc95e0b6mr150371uao.112.1657782805593; Thu, 14 Jul 2022 00:13:25 -0700 (PDT)", "by 2002:a65:60d4:0:b0:419:9871:9cf with SMTP id r20-20020a6560d4000000b00419987109cfmr5283549pgv.214.1657782795418; Thu, 14 Jul 2022 00:13:15 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714071310.uien2tikv5ddr2vz%40jrouhaud>"], "In-Reply-To": ["<1960.1657781484@antos.home>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410700@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410700@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=Bk9nvXrJc5ultgCxoNQWnTVJKzPpjjUe3LL/29Z8ATM=; b=gLEfISI3YuzUnW4i8fm7BdeU1LDTzLsZR7fjfHXxXCn2dDwpawBnWDJLhrAaIDUaLl 9Hnmu+qXjfCznct4aFUkp+D4A9Fb01FYuxkwLx6vCk4gtIj+qZ+C13rJj3mz8kGyVp/p dgXKxkeTPHbOrZC6xmMN1ZtHgZN6dB74QUBIfYNN+SBtjvGu9kEqDCTKxovJcq0gBJKy a0fWuf6JqD0+GhsNTA9NzXun/YeWYm9fuSSuRyGXIIDWkGYRSFUp1q19hHPLPfe/NtAz GdoCE5rul2UKOP4gc8cXsce5FZvIjnP/0V1vKXJZM/+JIR4UWmCI0v7VSqoTmgSo+/90 VNXQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/fT7FlA3VGCa0b1vM9VCd9hYTnRduRUi8AkJuwxkS6ydvx+nSg s8mxC+v3K4u/1+e5uVxuPjI="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uNeA7ScJHj94xjd7KHLlKoIkQ+XezVYoDoMXQ4B9kithcsHHFv8E0Vs0rCPpta4D9rYCAv"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=Bk9nvXrJc5ultgCxoNQWnTVJKzPpjjUe3LL/29Z8ATM=; b=st9QglVv6FMeA+fDq+Za5gYvmf5RT6Jd1l2Tp3zTvPDCHJM70MUkZIIlqEOr9zakqe lf8oj060/JQKmPylYRJxnZDSoCnHzQqX98cE2gHQzjVWE9dcAK/GeQiLaKPa9/OAvqMx 2hLRfVqipj8WdwHtCkGk3MuXpc3Wg7a0a4V+tpaeVX/koJpWzchWnJlZCOAaPcBQLAmr E/kN6LZIp47WFg7MNfIjGf3BJXvz8Lr6Yns35FgvG3XNkeB8Cq/QJ2qtuj+Rp0UAV5ik 6wvklAETIcuJp7chhdS/0EMrQOUdZGXqD27TBdSd4ZFL4ThqnlCDmNzDyfH7zuSCD9ZH Tejg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=gLEfISI3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410700@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410700@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=Bk9nvXrJc5ultgCxoNQWnTVJKzPpjjUe3LL/29Z8ATM=; b=XT0iZtDUdPlRycZpRITwANwpZcpluuVKZL8HiP7pZNIOabSxapP3AhySfdmhPZgQiP Ydqi1f6gtkOyUsYsl6670cfKL7fVS73PlhjZ0rypDAJlml+o9sf43uLYUzosp4SFg9RG N7/WjuhZjXBknWaKqA8PnTNQmRsuhsbNdOokI+C+XFq7fCKkm5SV8DA/0PgjHrznM4ci PI20EOXrpKdDDII9svDVanP7ZfxPdS8rU3jY5euf6TiF3BKqClJMKAM/lbvKhC8R+Yeu LbaV3Dzi0hjPteNC2gnG3fEo0X1HFMg12IE7bJxLg/Abg3YsJfY5zTnn73A/eHyDbTN1 guVg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=gLEfISI3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410700@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410700@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<1960.1657781484@antos.home>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 08:12:14+00	alvherre@alvh.no-ip.org	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<20220714081214.s7cie3vbtyyshzuz@alvherre.pgsql>	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	60	8069	[]		This is not a review, but I think the isolation tests should be\r\nexpanded.  At least, include the case of serializable transactions being\r\ninvolved.\r\n\r\n-- \r\n√Ålvaro Herrera        Breisgau, Deutschland  ‚Äî  https://www.EnterpriseDB.com/\r\n"Pensar que el espectro que vemos es ilusorio no lo despoja de espanto,\r\ns√≥lo le suma el nuevo terror de la locura" (Perelandra, C.S. Lewis)\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Dmitry Koval <d.koval@postgrespro.ru>"], "Date": ["Thu, 14 Jul 2022 10:12:14 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657786353; cv=none; d=google.com; s=arc-20160816; b=c8PdSsSkExX2nSTa479c5VEix/jhA46HhjzaW1EecN5ziNbaYC6G2/Uu3qYhHFfTYg faR4ELHvlnSmBzi1pB4MkIv2vgU3dLuBd3gIbgAt3086gQ1a5trPj8ql4mg8LX7FTUbG JwWXwF9ekpUtIBE3z8eGlOXf669vi3in/5+XW1rcet4cRxQz+6buKsJY8tLWVS5f7cxe aIbkqIBQ00kztm78NJTEDIL0UmtWkOTIiMsGOWr9IL+Z2cUON3K8jBKB1NKRjDfi0HPI Fg82ih/aQyx6rviKeEcfowLVul1HuxTMsLxqFdRF9jl2o7yo/wdyH/vpXd6E4Cj/lafC OjtA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp74769jai; Thu, 14 Jul 2022 01:12:33 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id v18-20020a5d5912000000b0021d89caa847si891546wrd.87.2022.07.14.01.12.33 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 01:12:33 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410711@lists.postgresql.org>) id 1oBtxZ-0002a8-CL for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 08:12:33 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBtxU-0000xt-Sd for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:12:28 +0000", "from wout5-smtp.messagingengine.com ([64.147.123.21]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oBtxQ-0000ZS-Mp for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:12:28 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.west.internal (Postfix) with ESMTP id 96F4B3200681; Thu, 14 Jul 2022 04:12:18 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Thu, 14 Jul 2022 04:12:18 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 04:12:17 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id D0A1436E; Thu, 14 Jul 2022 10:12:14 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714081214.s7cie3vbtyyshzuz@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:4c_PYsTW77yATlfu_yYz2zKFSBSia2OQA7SoxfYe4wKgwL8EOZsY3g> <xmx:4c_PYsxNBh4ZyFmCImtI6k9dkgy0kTKW4zT-ifqHHSo0Z3q3ZoI5Aw> <xmx:4c_PYi4Ei5OPFtwrSA-WP1vLjRdKriQlnfMykh3lrzIlPbDp91fEoA> <xmx:4s_PYpp2-TKuB-UXDO9lx5aSTwP3R6_0WSga1U--NY-wkhTOYiP4fw>"], "X-Received": ["by 2002:a5d:60c5:0:b0:21d:6afe:8499 with SMTP id x5-20020a5d60c5000000b0021d6afe8499mr7271976wrt.258.1657786353703; Thu, 14 Jul 2022 01:12:33 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714081214.s7cie3vbtyyshzuz%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<a351ab9a-337d-dda5-7dcf-5b35100b7447@postgrespro.ru>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410711@lists.postgresql.org>"], "X-Me-Sender": ["<xms:4c_PYvj8V1Qgm8OkOnhEQSncNLOTA3KokZH_yY21mJ6hZUu5b6B1jw> <xme:4c_PYsChU4OEZrGtBqXkPeeCjShmTLhAmyR30WSORhu4tSyW-G9ve6OTzmFjhcugK 07vcO3AQYa37gBXfw>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410711@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:4c_PYvG2TqJhy7MByQGfj798yLrmBy5EQ8aTXzZCHcePzQPxiLKr64cBTkfTX4Eopb68jSclBcIoynXw8YCY6oyq7RlTMUr-lf2hexqzYBwgXmpHv6FdeZBSBp_V4oebalY>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657786338; x=1657872738; bh=s ArGZDPvmVRT4sRjYTsvjHcqQgD4lev6yITyoB2rE80=; b=q2kZLjG6c8hbGpEbc KpvF6RaOollU5nuD8YB/wJYcyV3nJjj4B5pS0mj5kr3yvGpQnOjPzZAMli39MYom pwXXQ0iMJfRZhUmcf1YE1e+O8v7xDSqULs/9KTGxidR03Vwydjs4RN2g0ubNvmYN UD34ocKPBnAzyWO7xQhhz8xM8MDl+UEpc7FzMtJHNpWQTPWqRMOOAwc+i7IaIfnO Xh+wuoCoxF6/0aPcCvT3l9A7sHVZaD+BvkHWS1aJoXy4p8efO1xC7APDhHOj9Lg9 GE2gBh1UxxJXyxiBhWRlbnAFayzFrr8Bsnn/yqky9ygDa967gIPiX/BtyrJUsb2t YU24g=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejlecutefuodetggdotefrodftvfcurf hrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecuuegr ihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenucfjug hrpeffhffvvefukfggtggugfgjsehtkeertddttdejnecuhfhrohhmpeetlhhvrghrohcu jfgvrhhrvghrrgcuoegrlhhvhhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorhhgqeenuc ggtffrrghtthgvrhhnpedvkedtffduffdtffffheffhfejjefhgfeiueeukeejkeffgfdu fffhudffffeuveenucffohhmrghinhepvghnthgvrhhprhhishgvuggsrdgtohhmnecuve hluhhsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhhomheprghlvhhhvghr rhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vpsQIMYowzptnLLSZri+U1kiGITDLFEh0/BTpucjM6COLwqLO3f4LJBblwBmnuo16XVMLl"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=sArGZDPvmVRT4sRjYTsvjHcqQgD4lev6yITyoB2rE80=; b=Zk5AAsvh1HJ3cH+r+ZibReJqivAHcrF5vmvqwZsAKIy4UNAu03N7H/LOZejC16JaBc 1tfVwzSNsntiKDQzOrQO/nkg4AalVak5XcC+Ed/l7Q3nE5+n2A+fAk9T+usVCAr+754A U4acACTb91bG+DPwtD+6lcX1wtg9n8rUg5pAY6Nuvc0sfIGlrUU1H+RTasVUao4ZRHu4 Lf2Cd5q5N+ay0ZDfjKDwgPO6Olg+XUrBMSVrwFu8Pd0wDtpwbaYMQuUV8gpbUlTVpkJ0 hxcnY846vAxKzEMj7y9u/mxsLrf8e1rX6qm1O72FRh6bpuHMECaYOBCUM0bgWbVcFYIg 4nbQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=q2kZLjG6; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410711@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410711@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=q2kZLjG6; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410711@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410711@lists.postgresql.org"]}	["<a351ab9a-337d-dda5-7dcf-5b35100b7447@postgrespro.ru>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 08:00:08+00	michael@paquier.xyz	Re: Backup command and functions can cause assertion failure and segmentation fault	<Ys/NCI4Eo9300GnQ@paquier.xyz>	[{"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}]	[{"Name": "Fujii Masao", "Address": "masao.fujii@oss.nttdata.com"}, {"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	59	15472	[{"charset": "us-ascii", "part_id": "1.2", "file_name": "0001-Add-TAP-test-for-BASE_BACKUP-cancellation-with-pg_st.patch", "disposition": "attachment", "content_type": "text/x-diff"}]		On Fri, Jul 08, 2022 at 08:56:14AM -0400, Robert Haas wrote:\r\n> On Thu, Jul 7, 2022 at 10:58 AM Fujii Masao <masao.fujii@oss.nttdata.com> wrote:\r\n>> But if many think that it's worth adding the test, I will give a\r\n>> try. But even in that case, I think it's better to commit the\r\n>> proposed patch at first to fix the bug, and then to write the patch\r\n>> adding the test.\r\n\r\nI have looked at that in details, and it is possible to rely on\r\npg_stat_activity.wait_event to be BaseBackupThrottle, which would make\r\nsure that the checkpoint triggered at the beginning of the backup\r\nfinishes and that we are in the middle of the base backup.  The\r\ncommand for the test should be a psql command with two -c switches\r\nwithout ON_ERROR_STOP, so as the second pg_backup_stop() starts after\r\nBASE_BACKUP is cancelled using the same connection, for something like\r\nthat:\r\npsql -c "BASE_BACKUP (CHECKPOINT 'fast', MAX_RATE 32);" \\\r\n     -c "select pg_backup_stop()" "replication=database"\r\n\r\nThe last part of the test should do a pump_until() and capture "backup\r\nis not in progress" from the stderr output of the command run.\r\n\r\nThis is leading me to the attached, that crashes quickly without the\r\nfix and passes with the fix.\r\n\r\n> It's true that we don't really have good test coverage of write-ahead\r\n> logging and recovery, but this doesn't seem like the most important\r\n> thing to be testing in that area, either, and developing stable tests\r\n> for stuff like this can be a lot of work.\r\n\r\nWell, stability does not seem like a problem to me here.\r\n\r\n> I do kind of feel like the patch is fixing two separate bugs. The\r\n> change to SendBaseBackup() is fixing the problem that, because there's\r\n> SQL access on replication connections, we could try to start a backup\r\n> in the middle of another backup by mixing and matching the two\r\n> different methods of doing backups. The change to do_pg_abort_backup()\r\n> is fixing the fact that, after aborting a base backup, we don't reset\r\n> the session state properly so that another backup can be tried\r\n> afterwards.\r\n> \r\n> I don't know if it's worth committing them separately - they are very\r\n> small fixes. But it would probably at least be good to highlight in\r\n> the commit message that there are two different issues.\r\n\r\nGrouping both fixes in the same commit sounds fine by me.  No\r\nobjections from here.\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1.1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["Fujii Masao <masao.fujii@oss.nttdata.com>, Masahiko Sawada <sawada.mshk@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Robert Haas <robertmhaas@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:00:08 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Backup command and functions can cause assertion failure and segmentation fault"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657785627; cv=none; d=google.com; s=arc-20160816; b=af/WA/WpL8bci+lFXtgGRNYgGaS73OArF/KHCmE8/gzC2Zezijx4PgyIR4/ge8Dbrl QT2SzTKKLZgvZUNcArbya6Xc+8VYTSKb28WxTaT95tR+DbwU1zw5ogNJlFPOpZ7wvOhT vAMa/fFHPiv7YTdC4stB9HZXpNIf7BMX9OLfy6iPTYfXLFJHISdAUlcuhaQegRfA93YX 3iUJMStyRdNbNKqKhxdx9eEDArTFWzRDGucl8IRp3jUbnpZR75vQR1cAX1uTgGp7mw+J K1xAyfL6ZjcAtZNbmy7b4jbTAzqKmYL0uy3kxJhYwjQWAjFDgMf5gQGGx9HYX5nTfatb yQcA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp72874jai; Thu, 14 Jul 2022 01:00:28 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id k12-20020a67ef4c000000b00357a1c2c4fesi12358vsr.718.2022.07.14.01.00.27 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 01:00:27 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410710@lists.postgresql.org>) id 1oBtlq-0005jU-Nj for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 08:00:26 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBtlk-0004A4-Ut for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:00:22 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oBtlh-0006nt-SG for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:00:19 +0000", "from compute1.internal (compute1.nyi.internal [10.202.2.41]) by mailout.nyi.internal (Postfix) with ESMTP id 193AA5C010A; Thu, 14 Jul 2022 04:00:16 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute1.internal (MEProxy); Thu, 14 Jul 2022 04:00:16 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 04:00:13 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<Ys/NCI4Eo9300GnQ@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<3374718f-9fbf-a950-6d66-d973e027f44c@oss.nttdata.com> <CAD21AoBkR611M6K+6i-xNDjmCd-=hFN_svNgRtvuezyjviw1sA@mail.gmail.com> <6a759108-a02c-34fd-856c-d7c09d29d2ba@oss.nttdata.com> <Yr6XJg2QDT1aHYyJ@paquier.xyz> <fa0f1057-923e-ad61-e6f4-ba5fc29135ec@oss.nttdata.com> <YsYkPzSpnr5Yt3uA@paquier.xyz> <bef8abcd-8cb8-1320-9f2b-bc9677413625@oss.nttdata.com> <CA+TgmoYSp060HUuGWbKrZjP+X6kb7dgRiwZZz-hzVEDLkDhZDQ@mail.gmail.com>"], "X-Me-Proxy": ["<xmx:D83PYmzqHh_pvHshJEWUGmuT8gmH46_Zq8V19-t3LpGDsLyxEpvgYA> <xmx:D83PYlScmgYtiKyvVFsLSNi3ATJQoD-JADj60D3-5-6KYv-cxw9QbQ> <xmx:D83PYhakni7A-Q4DSk0gCb1Go03xy4d2SNnqTle_hYpe7YigSDQZ0Q> <xmx:EM3PYgdg9WFAPRzfueJqJEKGEpvYL5wQMQidkhNZrFg05LpMOOTTog>"], "X-Received": ["by 2002:a1f:340f:0:b0:374:7b8a:378 with SMTP id b15-20020a1f340f000000b003747b8a0378mr2958962vka.37.1657785627788; Thu, 14 Jul 2022 01:00:27 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/Ys/NCI4Eo9300GnQ%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<CA+TgmoYSp060HUuGWbKrZjP+X6kb7dgRiwZZz-hzVEDLkDhZDQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410710@lists.postgresql.org>"], "X-Me-Sender": ["<xms:D83PYgDzv-DF3muZYNdIQ42yUzhtrMrNQB73EDKtjNbCPrvwzJBeKA> <xme:D83PYiiTAnJQ9YpeBQIUSdFQQqhJ5fjDLR9FbNNnHZqHy2RAp00KVWW1TEy323to2 ESxcN8A4DPKj7OGuQ>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"Rl06c4Rcy11LiIsM\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410710@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:D83PYjnwjisGO_47Ah08CI5LOtzIYXqGBFIhBM-FdRsPIkadOcsavwaRPYGOcFJA_PHBV_FEUdS-xKded5COVRZ7SHg>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657785616; x=1657872016; bh=sZAL7rgl3l UWs6tbKGrtjE21PSuQ1umfyEOLgVncaXI=; b=JjpWnh5yOzA12kgZrdJxPy7Nck loAzJu30FJ7EbNNvaomrUaFfBZPDAFccMSt8LHGdxltYQuGZEI9e7kXd0yjDLuU8 RnIX8BXw0IAg607cfVWRscj7tIfBqKitCkZ7PMgF37329zAArNAU4Ey4bwMi7NVV HxSwWBWibZHiZPtWtj2Wo3C8G0N1MIcAQjZ7RSuprQdNjDJPQprwfyb+qEiRJiwv CbWbILbWHzOiD8UM4CUGFYQNvyTef2XJJDK2jGSi0wIe9bWyL8fvwPcSVxUMT7t9 ZYIIlzMu1lTywjk8hpgKCyA9EeqoeIQswyWxc7MHXGEU+++6Va7OnsWp4ZLQ==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657785616; x=1657872016; bh=sZAL7rgl3lUWs6tbKGrtjE21PSuQ 1umfyEOLgVncaXI=; b=kggdj5PtxEiq3HDMivT1ZkMlY54kjJWMogN00XcCT3Ux NqgiOHiF8wgahmRxyhpvvwXPSU6mRXpknjIFEK7YLO2wGcrwcSKxctRhgSQY1rcH ld5ORy7A96YeWorKGmiArV0gjXV3ZO0PetJ1o1dOB59gM0f5Tln6BKATwIUwr6f3 sZlyGq8jyi+0XdOCDMhi0X9vBwsACIiWpztPJ8Z7pDmRdfGxjjtG85m6IrPmxaOU dj3x7Ipy18wozbw1rw1Dd2kCpA93Sw0/Qf6lXDQeubxt++XxJZkESK0QcW5fL57c +rNw8QgOYX19eeaPs9zAAYVNpZ2EtwR19zUyrn58Qg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejkedguddviecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enfghrlhcuvffnffculdefhedmnecujfgurhepfffhvfevuffkfhggtggujgesghdtreer tddtvdenucfhrhhomhepofhitghhrggvlhcurfgrqhhuihgvrhcuoehmihgthhgrvghlse hprghquhhivghrrdighiiiqeenucggtffrrghtthgvrhhnpeetleeifedufffhhfdtteel geeggeffhfekueevteeigfduudevudetgfegiedvjeenucevlhhushhtvghrufhiiigvpe dtnecurfgrrhgrmhepmhgrihhlfhhrohhmpehmihgthhgrvghlsehprghquhhivghrrdig hiii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vjkGdldUvHaNiua79JK612eug9Gb/OdFmi3vlNWH+dHRLSGLc04OXFsNqrvvMrHuQ0ney1"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=sZAL7rgl3lUWs6tbKGrtjE21PSuQ1umfyEOLgVncaXI=; b=Z7EUG7GCNhzH5x/QZb/7JmYHOjmTho0YjYKs8xQpVPMZ51822B1MZ89wmouZlE3scn i/BLff4HJ5jOpxS3qyFcbnGYAfTP2W1ef3BqCOgDGVGmarlLgcgdzjMqQrG97WHbxE58 PGBv+rpgFWYgXlbc8XjSp5Jn8nhIGffYT82Xgsme7Isj58wmktv7x071VFV6v2rQZts9 WuJuhGUDzEZ76LL9UYGNFG6v5HHdkwMn/gJZ6MaEBdFQR61py02ZTGw3GxkOPEJGmSq6 VISP9ptBRLg0vFFu+VMHMmgjRTwU+27WQlvHNXiNB35rwojkAE7Y6Mf1tPVqNziwjsAe RIjg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=JjpWnh5y; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=kggdj5Pt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410710@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410710@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=JjpWnh5y; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=kggdj5Pt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410710@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410710@lists.postgresql.org"]}	["<CA+TgmoYSp060HUuGWbKrZjP+X6kb7dgRiwZZz-hzVEDLkDhZDQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 08:26:32+00	horikyota.ntt@gmail.com	Re: Issue with recovery_target = 'immediate'	<20220714.172632.682019860423173203.horikyota.ntt@gmail.com>	[{"Name": "", "Address": "david@pgmasters.net"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	61	9347	[]		At Wed, 13 Jul 2022 14:41:40 -0400, David Steele <david@pgmasters.net> wrote in \r\n> While it is certainly true that timeline 2 cannot be replayed to from\r\n> timeline 1, it should not matter for an immediate recovery that stops\r\n> at consistency. No timeline switch will occur until promotion. Of\r\n> course the cluster could be shut down before promotion and the target\r\n> changed, but in that case couldn't timeline be adjusted at that point?\r\n> \r\n> This works by default for PostgreSQL < 12 because the default timeline\r\n> is current. Since PostgreSQL 12 the default has been latest, which\r\n> does not work by default.\r\n> \r\n> When a user does a number of recoveries it is pretty common for the\r\n> timelines to get in a state that will make most subsequent recoveries\r\n> fail. We think it makes sense for recovery_target = 'immediate' to be\r\n> a fail safe that always works no matter the state of the latest\r\n> timeline.\r\n> \r\n> Our solution has been to force recovery_target_timeline = 'current'\r\n> when recovery_target = 'immediate', but it seems like this is\r\n> something that should be done in PostgreSQL instead.\r\n> \r\n> Thoughts?\r\n\r\nI think it is natural that recovery defaultly targets the most recent\r\nupdate.  In that sense, at the time the admin decided to recover the\r\nserver from the first backup, the second backup is kind of dead, at\r\nleast which should be forgotten in the future operation.\r\n\r\nEven if we want "any" backup usable, just re-targeting to the current\r\ntimeline after the timeline error looks kind of inconsistent to the\r\nbehavior mentioned above. To make "dead" backups behave like the\r\n"live" ones, we would need to check if the backup is in the history of\r\neach "future" timelines, then choose the latest timeline from them.\r\n\r\n# Mmm. I remember about a recent patch for pg_rewind to do the same...\r\n\r\nregards.\r\n\r\n-- \r\nKyotaro Horiguchi\r\nNTT Open Source Software Center\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["david@pgmasters.net"], "Date": ["Thu, 14 Jul 2022 17:26:32 +0900 (JST)"], "From": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Issue with recovery_target = 'immediate'"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657787207; cv=none; d=google.com; s=arc-20160816; b=apFiZwSz+G/59Vib76ECaqDQK/M6Ber2HV3dfpZVICR7wjMsmE/iVRQRPZli5E36zL Lj1LPB/0aACYBbMMwztQDuJUiwucRrtFDBA75JR38lTLy9pkk01J6m8FJ1PM7a71h2qq 7jaYQE0vWZhiu+ptTouItA23FEZStdoufWrGcCc+JPQAs+dT6uwlNpVTs5r5JcfkJaju Q2CZn5bM7UBmyQZNhpxCWfOC6Ud2qtZCXt8uGxWGcdeRXBN4f75DGO3FW0AsIXYOyVVd GKxfMDgKByxax+U2TBw3SMONKqn5XE0O7DIaVcQ/4qZPHnYuJSF65eJyp+6rsuiKme/1 5avQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp76903jai; Thu, 14 Jul 2022 01:26:48 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u4-20020a1fab04000000b0037516228a8dsi177695vke.98.2022.07.14.01.26.47 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 01:26:47 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410714@lists.postgresql.org>) id 1oBuBK-0004h8-V8 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 08:26:46 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oBuBG-0003Ce-GT for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:26:42 +0000", "from mail-pj1-x1034.google.com ([2607:f8b0:4864:20::1034]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oBuBC-0000f5-Is for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 08:26:42 +0000", "by mail-pj1-x1034.google.com with SMTP id v4-20020a17090abb8400b001ef966652a3so7800729pjr.4 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 01:26:38 -0700 (PDT)", "from localhost (KD036014041111.ppp-bb.dion.ne.jp. [36.14.41.111]) by smtp.gmail.com with ESMTPSA id o90-20020a17090a0a6300b001f0cece9285sm580725pjo.18.2022.07.14.01.26.33 (version=TLS1_3 cipher=TLS_CHACHA20_POLY1305_SHA256 bits=256/256); Thu, 14 Jul 2022 01:26:35 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714.172632.682019860423173203.horikyota.ntt@gmail.com>"], "Precedence": ["bulk"], "References": ["<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net>"], "User-Agent": ["Mew version 6.8 on Emacs 26.1"], "X-Received": ["by 2002:a67:d192:0:b0:356:32d5:4a4b with SMTP id w18-20020a67d192000000b0035632d54a4bmr3009718vsi.5.1657787207895; Thu, 14 Jul 2022 01:26:47 -0700 (PDT)", "by 2002:a17:90b:1c8e:b0:1ee:e899:c612 with SMTP id oo14-20020a17090b1c8e00b001eee899c612mr8669730pjb.170.1657787195965; Thu, 14 Jul 2022 01:26:35 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714.172632.682019860423173203.horikyota.ntt%40gmail.com>"], "In-Reply-To": ["<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410714@lists.postgresql.org>"], "Content-Type": ["Text/Plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410714@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:message-id:to:cc:subject:from:in-reply-to:references :user-agent:mime-version:content-transfer-encoding; bh=Peyd4fWkR/YjuvXABXDpP1IIIiMyLb7Z5h1vi/sMC+s=; b=jJg7jnM+SH0NeQwaOR2AnEvT1su1ealg1hl9OBjbjVqTx4XUbT6AkKkuX+Del4XT97 3IRJRfUK4BRUxxSTcASJredxkrEnHeSQoeWlPVHXfaRQXmBRUuWIpVqahifFZpivHbP3 +0Q6rVVtmX3ErOwjij4bSA+rLQy2G2FIVXypSeiWPGybd5YVcPy9T6pmyq2InlCZBJxR GED5kER0h16vMgz/qwUWLlZ4k7OBadgMfIeef4B28hS+tRL0HwyT9kyK8vR8R96rZyIh 8IRoOW9/afvmq9lfCI/evCDuZtEfb1sHOERunQqY7n5rHPHTDXNtjrOA9/1Jh0oM/5yM ACgQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9imedh+V3+/81at24P9gt7r3vk1naLEdKXjGitmm2ozZ/xioYY 6vtMpQSwWlpbQvKztFSk1Os="], "X-Google-Smtp-Source": ["AGRyM1ttHCvL/FiBzSehAF80LoyQT08xehD63Sg9qUy2+3Pd8NrfqeyPmAYYhpdoYvaJa3SNSKn7"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:mime-version:user-agent:references :in-reply-to:from:subject:cc:to:message-id:date:dkim-signature; bh=Peyd4fWkR/YjuvXABXDpP1IIIiMyLb7Z5h1vi/sMC+s=; b=x+fHRVbyUKVCgV8x0jTuwu2BWqFTPYHQkpnKpKZ5jBExez8A0J1QfhEhWNB6pKz4os Qh9MvBM7TZIE5pwC0PC5IUQoxzdvD1k85F0smZZf+CwaGxhFEEJzf3SdZZS7bN5ujh14 aDK2C/a8X1b2AzUS2YzRUI6nuJMRdynJdoxW4hHuFsG2GLH6GPUILbcbL/uhbWidmbna nEUJ6dDtwB8nG7b8jrHUQfOX0p15jLlB0wlngqTYNkj7zMR0l3N0qgP5+G8I/wFIvwoC ky8SusOPfh2Qr8pdbfxyQ1w51wMpFhWeRTgD0//8hNyYeyR6lwTPNfO5S9folp7kmjjO Yiaw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jJg7jnM+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410714@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410714@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:message-id:to:cc:subject:from:in-reply-to :references:user-agent:mime-version:content-transfer-encoding; bh=Peyd4fWkR/YjuvXABXDpP1IIIiMyLb7Z5h1vi/sMC+s=; b=S6SpB5gZN6cXIJwv6Jx0zrZZYaPNTW3TqFVz1HaN6E66N5WZ5zq0xlm7r+5ofrfOKm ZpJedMLABS45vqVBs7XotNllCxohGzudaiqiGnLwVrgJ+jWBRKshj3pLcrMDQ4KmY/iq HkVO2HgUACUz4DLULmSU4mStM14W62zgPu5JRD2BOOO8O8NRClF7ulfXy6GSBM4r2FU0 ii/H+hgM9VBfnR8Z3yoBPw/6J1mMUXbzi96m/92JcEWWpoQCx2TcLWLT4XCxHIqdAsax gs7wbvubKGbC+TFExkphaBya4duSJdpO5REq4Llh4XeaMR83n7dYnnJu1jg9B5gSabY2 Ib+A=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jJg7jnM+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410714@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410714@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 08:36:13+00	niyas.sait@linaro.org	Re: [PATCH] Add native windows on arm64 support	<CAFPTBD_zcrXZihjbyUENiMLkx8JH+FrSEGFr0E0ZX4VKnmoj4w@mail.gmail.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}, {"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	62	19088	[{"part_id": "2", "file_name": "v2-0001-Enable-postgres-native-build-for-windows-arm64-pl.patch", "content_id": "f_l5krzw7t0", "disposition": "attachment", "content_type": "application/octet-stream"}]	<div dir="ltr">Hello,<div><br></div><div>Please find a new patch (no further changes) rebased on top of¬†the master.</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, 10 May 2022 at 02:02, Michael Paquier &lt;<a href="mailto:michael@paquier.xyz">michael@paquier.xyz</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On Mon, May 09, 2022 at 12:44:22PM +0100, Niyas Sait wrote:<br>\r\n&gt; Microsoft updated documentation [1] and clarified that ASLR cannot be<br>\r\n&gt; disabled for Arm64 targets.<br>\r\n&gt; <br>\r\n&gt; Because ASLR can&#39;t be disabled on ARM, ARM64, or ARM64EC architectures,<br>\r\n&gt; &gt; /DYNAMICBASE:NO isn&#39;t supported for these targets.<br>\r\n<br>\r\nBetter than nothing, I guess, though this does not stand as a reason<br>\r\nexplaining why this choice has been made.¬† And it looks like we will<br>\r\nnever know.¬† We are going to need more advanced testing to check that<br>\r\nDYNAMICBASE is stable enough if we begin to enable it.¬† Perhaps we<br>\r\nshould really look at that for all the build targets we currently<br>\r\nsupport rather than just ARM, for the most modern Win32 environments<br>\r\nif we are going to cut support for most of the oldest releases..<br>\r\n--<br>\r\nMichael<br>\r\n</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><span style="color:rgb(34,34,34)">Niyas Sait</span><br style="color:rgb(34,34,34)"><span style="color:rgb(34,34,34)">Linaro Limited</span><br></div></div>\r\n	Hello,\r\n\r\nPlease find a new patch (no further changes) rebased on top of the master.\r\n\r\nOn Tue, 10 May 2022 at 02:02, Michael Paquier <michael@paquier.xyz> wrote:\r\n\r\n> On Mon, May 09, 2022 at 12:44:22PM +0100, Niyas Sait wrote:\r\n> > Microsoft updated documentation [1] and clarified that ASLR cannot be\r\n> > disabled for Arm64 targets.\r\n> >\r\n> > Because ASLR can't be disabled on ARM, ARM64, or ARM64EC architectures,\r\n> > > /DYNAMICBASE:NO isn't supported for these targets.\r\n>\r\n> Better than nothing, I guess, though this does not stand as a reason\r\n> explaining why this choice has been made.  And it looks like we will\r\n> never know.  We are going to need more advanced testing to check that\r\n> DYNAMICBASE is stable enough if we begin to enable it.  Perhaps we\r\n> should really look at that for all the build targets we currently\r\n> support rather than just ARM, for the most modern Win32 environments\r\n> if we are going to cut support for most of the oldest releases..\r\n> --\r\n> Michael\r\n>\r\n\r\n\r\n-- \r\nNiyas Sait\r\nLinaro Limited\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Niyas Sait", "Address": "niyas.sait@linaro.org"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Tom Lane <tgl@sss.pgh.pa.us>, Thomas Munro <thomas.munro@gmail.com>, Julien Rouhaud <rjuju123@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Thu, 14 Jul 2022 09:36:13 +0100"], "From": ["Niyas Sait <niyas.sait@linaro.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Add native windows on arm64 support"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657787794; cv=none; d=google.com; s=arc-20160816; b=fSyMudpKsIKCf/nwKzKdg5m42qoHLappZtOVReOZqIdaUvMMoh3w7/KBBTT+MrD9Eo Q0XxuSW5tm6UVSCQeTRHGgcHTBnzXvs2HCFaG6971YznVJpc1Vg0d9a6nYkKl+HzgkTt EVbwucawGkZ8CFA2v40lFyOuuPuNaB2xsJTovUOREdmrl3eko9bFWW8+TmMuNFicK2fO ubUGVjru7bo2lU3g0zLPZeRqXr2PkWHDAUNu/fXDBxCQhpbvPImVEFP3AYbuMGvrf4QJ sTLGcZWgLrQe+fn9ivBh2XSGBz9FrEIJvEzJs0R20rKpl64moYIiXbO9DKwOPi+5EMS2 GqBQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp78337jai; Thu, 14 Jul 2022 01:36:34 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b13-20020a05600003cd00b0021bdbb5fe3asi1137458wrg.842.2022.07.14.01.36.34 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 01:36:34 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410715@lists.postgresql.org>) id 1oBuKo-0000Vp-3n for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 08:36:34 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <niyas.sait@linaro.org>) id 1oBuKj-0007Jk-Fm for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:36:29 +0000", "from mail-qv1-xf2c.google.com ([2607:f8b0:4864:20::f2c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <niyas.sait@linaro.org>) id 1oBuKg-0000jT-HS for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 08:36:28 +0000", "by mail-qv1-xf2c.google.com with SMTP id kh20so952629qvb.5 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 01:36:25 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFPTBD_zcrXZihjbyUENiMLkx8JH+FrSEGFr0E0ZX4VKnmoj4w@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220407172258.uj5lgd6k25sngeno@alap3.anarazel.de> <3385302.1649353369@sss.pgh.pa.us> <20220407175359.h7gzgmmnbicq75d6@alap3.anarazel.de> <CAFPTBD_+n3C_rrt9Y5mytaw0GJX+SAywMCgKfEpRxpLvzeSMrA@mail.gmail.com> <Yl9TmT/Jmz7i2umV@paquier.xyz> <CAFPTBD9qPsFMN_Y0HwR+2uRtQGfVnQRa-mxUnAu-MhyEnf8JHA@mail.gmail.com> <YmDYdiKlYP0D57ZH@paquier.xyz> <CAFPTBD8Mk0X3h0UhWDbN7dLf1-eFeqcE8Qe3SUKzH9b+Gj1kBg@mail.gmail.com> <YmX2nJyeykpODEsB@paquier.xyz> <CAFPTBD-+YT0wZTh_KJHK+G_DfA9+Y6FrkACkCFz8d4+BZjacuQ@mail.gmail.com> <Ynm5g2152/yKc/0o@paquier.xyz>"], "X-Received": ["by 2002:a05:600c:19ce:b0:3a2:f368:1a91 with SMTP id u14-20020a05600c19ce00b003a2f3681a91mr9309138wmq.37.1657787794506; Thu, 14 Jul 2022 01:36:34 -0700 (PDT)", "by 2002:a05:6214:2681:b0:473:8e21:68c5 with SMTP id gm1-20020a056214268100b004738e2168c5mr6651931qvb.25.1657787784098; Thu, 14 Jul 2022 01:36:24 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFPTBD_zcrXZihjbyUENiMLkx8JH%2BFrSEGFr0E0ZX4VKnmoj4w%40mail.gmail.com>"], "In-Reply-To": ["<Ynm5g2152/yKc/0o@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410715@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000fccb3605e3bfcbb4\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410715@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=linaro.org; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=aLLxPQct+/my5GfI4aTRooWl9v8w8RWgGziwTus9+O0=; b=zvNBEQRtNdEaq9UAYDdNLzzlFyVzEx94fJhLu0+Y0kUov8v75e6ECOxQq75XE6vfxc ml8sZ2+l/ySUqPKSj8LBe6CQYGIfYn3z3B3L+jjYR0X0O1iilIa7ZObErALh7t4pQjDY 8HbLr1Z1Frg0SxshWV1O4b7ilMUV80An4c/Svc8le93sfPgX17Euv6XQJNzyQfzlKsKm oCIyzz4+qgtX0MRbXQb63Dg3C6wDmjInrYLUtigyRxDPctrKRqFoxF1NLx1bU3iGWTfz nrz2o0CcWIU2zOIraBgiLZAuWXyEX3j2StYlqP4NMSzkOoaq5GpbYvedH/WwpwkDq1Kn MmTQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9KCRXJvOdPjtqqM1EwXggRN0YuvPQFROFGWsvfKGk0hOw9L+uz hZ/kvKuWapTAmQyn46j9is+eozGiZsNVNhY/l51prw=="], "X-Google-Smtp-Source": ["AGRyM1uQHrGhBi+xaH30I5izFtjfas/g4FKLQeCZ6zrg4s87ojvCRoUgWrsBiRkeDteQT3vqhBja"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=aLLxPQct+/my5GfI4aTRooWl9v8w8RWgGziwTus9+O0=; b=Ld+pB+wTzdkVglpMLSXrQUthV0MTbEVacDqrDQ59A0Qtn+xu6NeTEZsCbF7z8MdMZ6 ZautyEReKw4HM1ARJgTOqt4T+3+x5pOPG5tkBMI2Mc51CfZwGLvsq3guSQiWj+SaUjWN 6LkquGKdjfdgRfEZc1IuPDmjJpdACuP8z74yugVbMfe5YvaG+RHBgDq37WA0PGDY+YaK pMGrrFaE2JuCnwgN0TwoQav/f9aMNnfr7DJuW4vd+cMbzxYpQKNWiFAiBShhQ7fz6UYU GddH19XswY2mJS+X1JaY7zx6SSqh3V1/VAZUs66QCjFxWxtAc2EbAXFnxE0ct3Z66RLE 2/5A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@linaro.org header.s=google header.b=zvNBEQRt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410715@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410715@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=linaro.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=aLLxPQct+/my5GfI4aTRooWl9v8w8RWgGziwTus9+O0=; b=tyuzV2+mNJTKwJTAm4DEEUFmI/UnjCidEOWrwZx9sYq87EKkowqR6jRX+0cIJqhhxB ZWAyyIApEYh5KZZJ0INuvD0dtcib1wh8GwAsCjFtef+g0W5MDaU9ABWv5gmB2gx201nB pHeIkAMT6E84XQ+6zAiq3SK35RO1p85Jw6DJ2BG7NvC3m00dBywhJzNBRTIfvrebyMSy jFswbyBKFKNQpZnjlgKeF/FO1aOKp3rEyS38THobD3hOvVjEVUFr4gpJJHVWJtY7wxIQ z/DV1XLCLoxjpiSnkIBr71/JxYshdNDeyXmUOSJbKWqX+Vy6zEFB9//g+aUj+vvwbxBl GIEw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@linaro.org header.s=google header.b=zvNBEQRt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410715@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410715@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=linaro.org"]}	["<Ynm5g2152/yKc/0o@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 09:43:37+00	bharath.rupireddyforpostgres@gmail.com	Re: Patch proposal: New hooks in the connection path	<CALj2ACVCpL=CsBef9zMv2M-+hmAbjmXuXC7Wfr=7cpR50sYt-Q@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Joe Conway", "Address": "mail@joeconway.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	64	8447	[]		On Fri, Jul 8, 2022 at 5:54 PM Bharath Rupireddy\r\n<bharath.rupireddyforpostgres@gmail.com> wrote:\r\n>\r\n> Looking at v2-0003 patch and emit_log_hook, how about we filter out\r\n> for those connectivity errors either based on error codes and if they\r\n> aren't unique, perhaps passing special flags to ereport API indicating\r\n> that it's a connectivity error and in the emit_log_hook we can look\r\n> for those connectivity error codes or flags to collect the stats about\r\n> the failure connections (with MyProcPort being present in\r\n> emit_log_hook)? This way, we don't need a new hook. Thoughts?\r\n\r\nBertrand and Other Hackers, above comment may have been lost in the\r\nwild - any thoughts on it?\r\n\r\nRegards,\r\nBharath Rupireddy.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bharath Rupireddy", "Address": "bharath.rupireddyforpostgres@gmail.com"}]	{"Cc": ["Joe Conway <mail@joeconway.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, Nathan Bossart <nathandbossart@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 15:13:37 +0530"], "From": ["Bharath Rupireddy <bharath.rupireddyforpostgres@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Patch proposal: New hooks in the connection path"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657791837; cv=none; d=google.com; s=arc-20160816; b=Felc7aTNdea+qCn2VUeZG/d07XwZnz/wqCfQnw7G1M729RyNw0lKy1wIsgzjpOoGnD WPzKYY9GCghrxMZQF1F0O+zN256z1+Z1lVNVtRzFmzREtWmHFeXkqt7KaPeGkqeSEikT jyLPsCRR3z9+8ld98/S5ArD+UihMnLick3+myLc44n/CNdQBAs1Owy+G9h025S1VUW5e 3qGQJ4s9RPLySa5DpTzs2FOdGTJX+J5FkoABclWg0Gh53jxbOtA+wBfomHqqkXtwvQCT oixLCwcI3gPOlnFbMuTAjOawL5OII6sWqQXNyXnKpVzvaknHCuzwDEkxhe3t2v0UMEPj PLGQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp87568jai; Thu, 14 Jul 2022 02:43:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m10-20020a5d64aa000000b0021d7052d401si1699232wrp.497.2022.07.14.02.43.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 02:43:57 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410724@lists.postgresql.org>) id 1oBvO1-0002v2-Ii for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 09:43:57 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bharath.rupireddyforpostgres@gmail.com>) id 1oBvNw-00018n-QN for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 09:43:52 +0000", "from mail-lf1-x131.google.com ([2a00:1450:4864:20::131]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <bharath.rupireddyforpostgres@gmail.com>) id 1oBvNu-0007gI-KX for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 09:43:51 +0000", "by mail-lf1-x131.google.com with SMTP id t25so1881214lfg.7 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 02:43:50 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALj2ACVCpL=CsBef9zMv2M-+hmAbjmXuXC7Wfr=7cpR50sYt-Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<245dab92-b226-eece-edd6-654fddb5b9fc@amazon.com> <CALj2ACX+oF+-yxZxMGwGHZR=CT6maG5fyyZCGn-RD_p9Z-RewA@mail.gmail.com> <a1c91f52-5dc7-08d7-10dc-65de86c80299@amazon.com> <20220701230027.GE624998@nathanxps13> <3a562c62-03e9-1bf5-738b-c00529aba8f7@amazon.com> <CALj2ACVBcOTkpCDqKiZX=+L+8aigc-+12-eQuFSALtcYR6Z=DQ@mail.gmail.com> <56bea23d-da9b-d52d-16d8-73ae34202474@joeconway.com> <52ffc34d-c5d5-ec14-6712-5ee5416b797a@amazon.com> <364f3452-c52b-798d-b4c6-48b4ee8dc8ac@joeconway.com> <3091617.1657224634@sss.pgh.pa.us> <CALj2ACVnHiCeQXK1qkHSvXqeCQubO2VH4v=dXUHA5Pf6jZPGVA@mail.gmail.com>"], "X-Received": ["by 2002:adf:ee8a:0:b0:21d:76f0:971e with SMTP id b10-20020adfee8a000000b0021d76f0971emr7607766wro.130.1657791837954; Thu, 14 Jul 2022 02:43:57 -0700 (PDT)", "by 2002:a05:6512:39cd:b0:489:c7a5:7a46 with SMTP id k13-20020a05651239cd00b00489c7a57a46mr4606110lfu.142.1657791828951; Thu, 14 Jul 2022 02:43:48 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALj2ACVCpL%3DCsBef9zMv2M-%2BhmAbjmXuXC7Wfr%3D7cpR50sYt-Q%40mail.gmail.com>"], "In-Reply-To": ["<CALj2ACVnHiCeQXK1qkHSvXqeCQubO2VH4v=dXUHA5Pf6jZPGVA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410724@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410724@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=Hd9rHzBlAmEqkRClUJx35mzr4bjtVbQBS+S4XAhSMJw=; b=LTlvCsBpIlx86Sv2sEGPxZYSjin/J9nYDdWZ3vyMQWMG2+O/kSKkd2P1oar03NZFUj TZmFwfZgPAVyNr5D0P1TAi3kNRqogJpDfsB4sPQNNE8K0ZoS0dkGk2f4hLp4LcCEGkia QMaGam9LQd0Q6+ttp26bMU6eRzD5zk/ZnvTN838+mbX5jGKnAcBZsd/xdAiyRNC9ug6Z 6tH5Ga6fuamKCqvAFD9ZrdDffw14xzDq27WQTl6BESax4EVv7A2MhVk6mimyuTeYcw+3 6NkpCGgilfwex5OEtuP/Fr7o002hpFkPuHUM6wPCintNNJ7/ShimRAjfhzILkfEQGMPJ OlsA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8LcOYPSRk6TI7chS4qNgf1F4MtbaOrmTXnn6zg23wpFZYVRl9B OufUHB/bZCWvcNMOhVL4D4D7D0JuqOfsqv8bIdePIig8uUg="], "X-Google-Smtp-Source": ["AGRyM1v0Fn9yQjS5TMBH6pSHiIWyPxuy7CpmDVTCaZLyPy8nJnL46uF1QNMlyBpmCwEgmbUiAVqO"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=Hd9rHzBlAmEqkRClUJx35mzr4bjtVbQBS+S4XAhSMJw=; b=t4QBmiQmnULfeFJSN7f9e1uRO8Z3MOxoxFRR0huIuk5xrCO6xNDZ1bDQJyMLl0nG8K EDmqr//aHAvBpJq9LT2mAJ/qd+scjPpnfCeEenZEcZEUk2TQlcppgaVxD0HPmU3A+ZGN 8DtugZmYdQFAik7bI99Pq0DH31kJn6jYxBNOUmD3djXKtg+GEOpRWCDMoZ8MKC3t1XtZ VxfWKNx57bSJDLr2Mgzrfkq+nKAiMCWqdLVJ8oxUlBckFrulWN+urevnLjnpVRl5HmL5 tOgJxv8Usteesv8UlynIySamsHcdpHTvdwVcEXI4Xm7LxMYJXq+UllrhwS7kG3d69QjD hMgQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=LTlvCsBp; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410724@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410724@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=Hd9rHzBlAmEqkRClUJx35mzr4bjtVbQBS+S4XAhSMJw=; b=kF3RAsr/Lqb+8559iKUHl4VQdLURIKY0YHPoBIKz/GATd49r3aYMl0I0ohJnnuED6E j5ZneD7oKR0f7uqz7sAHvi6Fak64bVM4WIlA94EX6ilI2Wf6tb/CvQys8gb2Cg4AbXsR +82Og0Eb7ZgFjz7BVZy0Bi5rIYdGiKXVfD5W44Pli3pyDoHTyZOGJDoGCSU9VPQZltsQ WQaXXgCt/H1tRXdTjmPuppjoYypnK5jHTWZzhubDJ9K7MnaRIE+6Adqw6WdBN0N1toa2 73d3P5r1wxvhCz1mnp7lJkWeVOJyz9s9+rCO557y4vwNOnQAw8Sx9QnVlL40QN/KGYbf p9Ig=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=LTlvCsBp; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410724@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410724@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CALj2ACVnHiCeQXK1qkHSvXqeCQubO2VH4v=dXUHA5Pf6jZPGVA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 09:40:56+00	bharath.rupireddyforpostgres@gmail.com	Re: optimize lookups in snapshot [sub]xip arrays	<CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q@mail.gmail.com>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	63	10732	[]		On Wed, Jul 13, 2022 at 10:40 PM Nathan Bossart\r\n<nathandbossart@gmail.com> wrote:\r\n>\r\n> Hi hackers,\r\n>\r\n> A few years ago, there was a proposal to create hash tables for long\r\n> [sub]xip arrays in snapshots [0], but the thread seems to have fizzled out.\r\n> I was curious whether this idea still showed measurable benefits, so I\r\n> revamped the patch and ran the same test as before [1].  Here are the\r\n> results for 60‚Çãsecond runs on an r5d.24xlarge with the data directory on\r\n> the local NVMe storage:\r\n>\r\n>      writers  HEAD  patch  diff\r\n>     ----------------------------\r\n>      16       659   664    +1%\r\n>      32       645   663    +3%\r\n>      64       659   692    +5%\r\n>      128      641   716    +12%\r\n>      256      619   610    -1%\r\n>      512      530   702    +32%\r\n>      768      469   582    +24%\r\n>      1000     367   577    +57%\r\n\r\nImpressive.\r\n\r\n> As before, the hash table approach seems to provide a decent benefit at\r\n> higher client counts, so I felt it was worth reviving the idea.\r\n>\r\n> The attached patch has some key differences from the previous proposal.\r\n> For example, the new patch uses simplehash instead of open-coding a new\r\n> hash table.  Also, I've bumped up the threshold for creating hash tables to\r\n> 128 based on the results of my testing.  The attached patch waits until a\r\n> lookup of [sub]xip before generating the hash table, so we only need to\r\n> allocate enough space for the current elements in the [sub]xip array, and\r\n> we avoid allocating extra memory for workloads that do not need the hash\r\n> tables.  I'm slightly worried about increasing the number of memory\r\n> allocations in this code path, but the results above seemed encouraging on\r\n> that front.\r\n>\r\n> Thoughts?\r\n>\r\n> [0] https://postgr.es/m/35960b8af917e9268881cd8df3f88320%40postgrespro.ru\r\n> [1] https://postgr.es/m/057a9a95-19d2-05f0-17e2-f46ff20e9b3e%402ndquadrant.com\r\n\r\nAren't these snapshot arrays always sorted? I see the following code:\r\n\r\n/* sort so we can bsearch() */\r\nqsort(snapshot->xip, snapshot->xcnt, sizeof(TransactionId), xidComparator);\r\n\r\n/* sort so we can bsearch() later */\r\nqsort(snap->subxip, snap->subxcnt, sizeof(TransactionId), xidComparator);\r\n\r\nIf the ordering isn't an invariant of these snapshot arrays, can we\r\nalso use the hash table mechanism for all of the snapshot arrays\r\ninfrastructure rather than qsort+bsearch in a few places and hash\r\ntable for others?\r\n\r\n+ * The current value worked well in testing, but it's still mostly a guessed-at\r\n+ * number that might need updating in the future.\r\n+ */\r\n+#define XIP_HASH_MIN_ELEMENTS (128)\r\n+\r\n\r\nDo you see a regression with a hash table for all the cases? Why can't\r\nwe just build a hash table irrespective of these limits and use it for\r\nall the purposes instead of making it complex with different\r\napproaches if we don't have measurable differences in the performance\r\nor throughput?\r\n\r\n+static inline bool\r\n+XidInXip(TransactionId xid, TransactionId *xip, uint32 xcnt,\r\n+ xip_hash_hash **xiph)\r\n\r\n+ /* Make sure the hash table is built. */\r\n+ if (*xiph == NULL)\r\n+ {\r\n+ *xiph = xip_hash_create(TopTransactionContext, xcnt, NULL);\r\n+\r\n+ for (int i = 0; i < xcnt; i++)\r\n\r\nWhy create a hash table on the first search? Why can't it be built\r\nwhile inserting or creating these snapshots? Basically, instead of the\r\narray, can these snapshot structures be hash tables by themselves? I\r\nknow this requires a good amount of code refactoring, but worth\r\nconsidering IMO as it removes bsearch thus might improve the\r\nperformance further.\r\n\r\nRegards,\r\nBharath Rupireddy.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bharath Rupireddy", "Address": "bharath.rupireddyforpostgres@gmail.com"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Nathan Bossart <nathandbossart@gmail.com>"], "Date": ["Thu, 14 Jul 2022 15:10:56 +0530"], "From": ["Bharath Rupireddy <bharath.rupireddyforpostgres@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: optimize lookups in snapshot [sub]xip arrays"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657791677; cv=none; d=google.com; s=arc-20160816; b=I43to61ppXl4XoaHBXAxPItZ8NX95/6yw/zQ4jqRTCUSNBOMJesllMC+6COCz49zX9 GBWUJD5YIAgVn/ThaNtJbdQNXk3Vl4Apg+EvKek5+Ftowame+0oeJHkGEVuVFBzHjiil ZT1Lb4NksNHsx+tOxYLUOhVUlb8fKIilMeTaM4wJlUxJFizIarlggaOyG5K/ZgMElvUG PD29RhsI5V3Sa8BpvWOeQ7VhQdFF2maOEfEIiP6s1BWxuvx0zkI9fAqmRqxLnNIiM5Fr p8Uwrui9eknG4Rbvugi1dfDcAwz9GGtKJpw67IKGZNYCDrMAKTxr11YOuHD/Hy8fnLN0 iwew=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp87278jai; Thu, 14 Jul 2022 02:41:17 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r145-20020a1fa897000000b00370789e376fsi198394vke.14.2022.07.14.02.41.17 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 02:41:17 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410721@lists.postgresql.org>) id 1oBvLQ-00025D-Op for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 09:41:16 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bharath.rupireddyforpostgres@gmail.com>) id 1oBvLM-0000c6-BZ for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 09:41:12 +0000", "from mail-lf1-x12a.google.com ([2a00:1450:4864:20::12a]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <bharath.rupireddyforpostgres@gmail.com>) id 1oBvLI-0001Ls-R8 for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 09:41:11 +0000", "by mail-lf1-x12a.google.com with SMTP id t1so1866967lft.8 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 02:41:08 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220713170950.GA3116318@nathanxps13>"], "X-Received": ["by 2002:a05:6102:2437:b0:357:2aab:1f8a with SMTP id l23-20020a056102243700b003572aab1f8amr3160929vsi.83.1657791677725; Thu, 14 Jul 2022 02:41:17 -0700 (PDT)", "by 2002:a05:6512:3f27:b0:47f:77d9:f23b with SMTP id y39-20020a0565123f2700b0047f77d9f23bmr4604163lfa.94.1657791667865; Thu, 14 Jul 2022 02:41:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q%40mail.gmail.com>"], "In-Reply-To": ["<20220713170950.GA3116318@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410721@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410721@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc:content-transfer-encoding; bh=3jG8611JcFHeQTa1KnkQb/fpml60GOPfK5u/2m/PVmY=; b=qgbephjI32AGBvS0YZjtMc/8alI4FXL/r4zAHFRGpY+Bkle+3SphsEUJ88SgPlrcwU bH+RuOXVPe6TZ6upUknSqvnAEZXAIV0h0FHCFlIbuZqqz/BRHE4RLoQcTMCM+P0Kxgu0 IhulqrBjwmsC3vTKO6LArkiFfnVFnXWaS19HpK0i74+46d+HtJGsAeKgJ8db2wzUQ+8J 3LmGUqmA6uk7n5Oaz/bzGYRoResyLb8ZPcYW6x+R1+7/ShMl8bD5i3NdS0fyFuWfscKV dV2qomjvSVNkpfa7E/8grWvCugPhZsHycklT6xDO6PwkVu6sCi0oTCF6e2hJZ9bJJ1z6 PQ1Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8jWU6SfrX2jX2ltZHz5Fc+5/9ZYYGtlc+SwH9WC+q2y7YFYF2+ vDh24jBbN+hwkrLMvw2G7UyFta+qGGoMOb27kwc="], "X-Google-Smtp-Source": ["AGRyM1s0AFdkTzuAgBGUW19ReVD++sMdyAnN2vyphl6VWYW4M68YFMU/gNZ9T+2jqWuZ9yquYArP"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:cc:to:subject:message-id:date:from :in-reply-to:references:mime-version:dkim-signature; bh=3jG8611JcFHeQTa1KnkQb/fpml60GOPfK5u/2m/PVmY=; b=aFb001AmZwbT9JT0w5k38zGjCpYMtr28Vv2aCi9wphSyriMbXVdkW8bqr2/YVq6MpD ILGm+td7nFmHtCCRCBHwoBBw/fLXOOSWngjzI3MM5C+9aHDt8ex1DO0zY+DWldMzxqkM cAGb6tPKzgCGm+3MN1Ngm7yZQy5zptrv9w30E5AYv7SRHSmbER24MKnuh6EWKVKal5yp XesdVcaM0V2HscPZtH4M2baXemz74oktH75MUZNAFu3pvBzxtjDADIvpSPaEufEOzYes o56LzxZKgSuAUj5loMMqxrtdf6vaDlThuMxHK0EqkPf6k0E4xYDEQkVnp18n5N0Sa2aE xJNw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qgbephjI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410721@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410721@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc:content-transfer-encoding; bh=3jG8611JcFHeQTa1KnkQb/fpml60GOPfK5u/2m/PVmY=; b=kEY0DyUBxRXkROzIpeKMb7ShT+zG60cHpADkdL+f9/Ebq5uLDRLxJYG0cwxAxhlDfw x6FqKU6Oc7OhGAJqREQKCwq1MLedbCg0rE+NxYjaaaH9skYPvQdyoMawZywT29FO7/Xu 0IKUvfbNqBsFN5aoYPkKbya7vbqFC8ieFMmBb7fjUng1jFdSA7LSMSokQv3ljWrhLKjG N8IByTL9Y2Kgk4TAGLNro9n4zwVVGtvEZl9luSx97p9VGW86C+ogJW4HT+gOngXnTxuX 7MYHVOtJw4YpjnnJPczHbKtLsYDPLktvwePToE35e1lZTGcicqd/bOSiHDCt+0mtG9gX 9Puw=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qgbephjI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410721@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410721@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220713170950.GA3116318@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 09:57:15+00	guofenglinux@gmail.com	Re: remove_useless_groupby_columns is too enthusiastic	<CAMbWs496jLH9725OTWpC1-tnra=VkFY3hQf24DxzwAkC4kO20A@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	\N	65	10596	[]	<div dir="ltr"><div dir="ltr"><br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Jul 13, 2022 at 1:31 AM Tom Lane &lt;<a href="mailto:tgl@sss.pgh.pa.us">tgl@sss.pgh.pa.us</a>&gt; wrote:</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\nI tried the attached quick-hack patch that just prevents<br>\r\nremove_useless_groupby_columns from removing anything that<br>\r\nappears in ORDER BY.¬† That successfully fixes the complained-of<br>\r\ncase, and it doesn&#39;t change any existing regression test results.<br>\r\nI&#39;m not sure whether there are any cases that it makes significantly<br>\r\nworse.</blockquote><div><br></div>If there happens to be an index on t2.othercol, t2.x, the patch would<br>definitely win since we can perform a GroupAggregate with no explicit<br>sort. If there is no such index, considering the redundant sorting work<br>due to the excess columns, do we still win?<br><br>I&#39;m testing with the query below:<br><br>create table t (a int primary key, b int, c int);<br>insert into t select i, i%1000, i from generate_series(1,1000000)i;<br>analyze t;<br>create index t_b_a_idx on t (b, a);<br><br>select sum(c) from t group by a, b order by b limit 10;<br><br>If we have index &#39;t_b_a_idx&#39;, there would be big performance<br>improvement. Without the index, I can see some performance drop (I&#39;m not<br><div>using parallel query mechanism).¬†<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n(I also kind of wonder if the fundamental problem here is that<br>\r\nremove_useless_groupby_columns is being done at the wrong time,<br>\r\nand we ought to do it later when we have more semantic info.</blockquote><div>¬†</div><div>Concur with that.<br><br>Thanks<br>Richard<br></div></div></div>\r\n	On Wed, Jul 13, 2022 at 1:31 AM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n\r\n> I tried the attached quick-hack patch that just prevents\r\n> remove_useless_groupby_columns from removing anything that\r\n> appears in ORDER BY.  That successfully fixes the complained-of\r\n> case, and it doesn't change any existing regression test results.\r\n> I'm not sure whether there are any cases that it makes significantly\r\n> worse.\r\n\r\n\r\nIf there happens to be an index on t2.othercol, t2.x, the patch would\r\ndefinitely win since we can perform a GroupAggregate with no explicit\r\nsort. If there is no such index, considering the redundant sorting work\r\ndue to the excess columns, do we still win?\r\n\r\nI'm testing with the query below:\r\n\r\ncreate table t (a int primary key, b int, c int);\r\ninsert into t select i, i%1000, i from generate_series(1,1000000)i;\r\nanalyze t;\r\ncreate index t_b_a_idx on t (b, a);\r\n\r\nselect sum(c) from t group by a, b order by b limit 10;\r\n\r\nIf we have index 't_b_a_idx', there would be big performance\r\nimprovement. Without the index, I can see some performance drop (I'm not\r\nusing parallel query mechanism).\r\n\r\n\r\n> (I also kind of wonder if the fundamental problem here is that\r\n> remove_useless_groupby_columns is being done at the wrong time,\r\n> and we ought to do it later when we have more semantic info.\r\n\r\n\r\nConcur with that.\r\n\r\nThanks\r\nRichard\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Richard Guo", "Address": "guofenglinux@gmail.com"}]	{"Cc": ["Pg Hackers <pgsql-hackers@lists.postgresql.org>, David Rowley <dgrowleyml@gmail.com>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 17:57:15 +0800"], "From": ["Richard Guo <guofenglinux@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: remove_useless_groupby_columns is too enthusiastic"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657792659; cv=none; d=google.com; s=arc-20160816; b=ok6t+KTpn1w3cpz7Q/Bi852fJQFTpm2qZPrFfLpagzTvnFM8Tuw6N7/1gryC5CDyJx Obg5KbcchGlGyJ9bEumUwHFwReeOQ0Dmx5YdbrRhbcxpwnYLss5IsHcxPED1lrkomVhw gtarQeHxgmCRh1U9BjmL5FzIHZdGwsqOxA4yV1UKMqjAud/tcclQAdG6hOavSkrw/TAI eIGoOZC7Q/k5y8z92AAMSJrXA/eDMD0RuUGeY6mUp5XJ+ah0bTxgx0GUpUOcpi+O0GF6 8Z8UQIwpugQR1VhRffs3KxFBdsiNwAxye7StmBvKn6cC0NLJs0UmW/kJNknXf7NiJmq0 sTaw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp89533jai; Thu, 14 Jul 2022 02:57:39 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id k12-20020a67ef4c000000b00357a1c2c4fesi36608vsr.718.2022.07.14.02.57.39 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 02:57:39 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410725@lists.postgresql.org>) id 1oBvbG-0003iY-7v for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 09:57:38 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oBvbB-00023W-NS for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 09:57:33 +0000", "from mail-il1-x132.google.com ([2607:f8b0:4864:20::132]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oBvb5-0001Ud-Gb for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 09:57:33 +0000", "by mail-il1-x132.google.com with SMTP id k1so695905ilu.1 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 02:57:27 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAMbWs496jLH9725OTWpC1-tnra=VkFY3hQf24DxzwAkC4kO20A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<1657885.1657647073@sss.pgh.pa.us>"], "X-Received": ["by 2002:a1f:2fc4:0:b0:374:bbbf:263c with SMTP id v187-20020a1f2fc4000000b00374bbbf263cmr3273167vkv.6.1657792659224; Thu, 14 Jul 2022 02:57:39 -0700 (PDT)", "by 2002:a92:cac1:0:b0:2da:d188:ad84 with SMTP id m1-20020a92cac1000000b002dad188ad84mr4154246ilq.21.1657792645876; Thu, 14 Jul 2022 02:57:25 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAMbWs496jLH9725OTWpC1-tnra%3DVkFY3hQf24DxzwAkC4kO20A%40mail.gmail.com>"], "In-Reply-To": ["<1657885.1657647073@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410725@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000c4d31305e3c0ed29\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410725@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=49gRolDvzROmc01mvbWxaxrwlVCVFQBj80Y7Nv/C2eo=; b=TVfLxKbP6mowcUJYYsi6TSQp5N9dnkG3S7t2fTloiDU7bMotfxV2r1fD6LP0M8EpdE FgnK6wEjp9HIL4joDOGQAZIakyXcczUpoTJS+FEC28HKIR7uKdl6tc5+VCHXZY4xVNkz ba0dIVKOhLN7UfADpgS+a7VWekH0KeJfwPdeEPsew20gU4OQFmNKFHAQ/1dfpC1Xkxxx TPvs2Vz+bHPYgdH6WC4se4QY0AQDJTkizaMpWuDI7oRQ3WC3GKpUnHWTL49G94s8xeW9 b4XE5lME3LqxCX/VgmZA8BffM+N0ZFg92+AXepmoD0BYb/M0JqE2z7ATXxVALaY5+ulh tqLA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8tXfyJPv8wVoRYQ5ijKBMKm1+JZdY46Usg4574qJv84z38/tGC cyXIe759uzSK/I85QJqS0YqEcaj+8iYcxAccYeA="], "X-Google-Smtp-Source": ["AGRyM1v0isN2t04L/qhIuFb58fVt1YpDidvyapvJ4PJzLxLi9ah2b5Wd7JJcbthF7bwqEH99RpXp"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=49gRolDvzROmc01mvbWxaxrwlVCVFQBj80Y7Nv/C2eo=; b=0s2V9Mez58YLUtPvkZRF06uD0lshAUL+cmBE3pc8GBELCd5Z6jY+Fm5VOlDYNGViQl 0CRAO4DXPmDokM+iGD7cLOFshumVnWmi7JEfFTPvz2fq33sxkFJ+xvu0OpHaXEwaz8Wp 5ICA5mvfkXMic+Qgmi67rxeB6EAneOICn/JMhs9qF/Oxw406PCb+tnffm7JKbhM0IYEF kFXGnbtYqTPf65UX0yQgo+/Ek2FAUdiJnTsfz4ZTX/n5UGybHsO9GVbfGdfg22jQwOpG 6UvoWsjUOxq6aVZ9Sjqrh5tdjLC1xLBKi5u3t4s+9cP2bZeMOQTKJDw05Dogt5DHCOL0 wLkQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=TVfLxKbP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410725@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410725@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=49gRolDvzROmc01mvbWxaxrwlVCVFQBj80Y7Nv/C2eo=; b=q+Js/nSDx0wccvZr7oF8amGpwkiaFo/++XyCoWB7LDrnNLA70JNE2+QGhgQdMLRldA Xn8/QOQ3/kEGc5BD+Fsw51RXnEH+FvDIJQeqjUzssZG2oZRVxWrFWl9teTHYeaU3gaq0 HnEyo8Goekh6S13GDnD29pJQ7sOLZAFotRcb2UJv+d+2Dbqfam5437kh0Gm8fnSGBLDY hTOafLa9HJt7i92PV+dwLITIDti4N91XWrIiEmO0RIy5Mngs94Nvn/WOVSRm0RqgtEpU qss6ckFgT0nRd9OwGbZ0nzHRtnKIDjwqLgOtmpYxjG+LxzhrjnYsEo6eOg/yvkqYU2mq 18RA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=TVfLxKbP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410725@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410725@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<1657885.1657647073@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 10:13:38+00	geidav.pg@gmail.com	Improving scalability of Parallel Bitmap Heap/Index Scan	<CAPsAnrn5yWsoWs8GhqwbwAJx1SeLxLntV54Biq0Z-J_E86Fnng@mail.gmail.com>	[{"Name": "PostgreSQL Developers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	\N	66	28380	[]	<div dir="ltr"><div class="gmail_default" style="font-family:monospace">Hi hackers,<br><br>While debugging some slow queries containing Bitmap Heap/Index Scans (in short BHS / BIS), we observed a few issues regarding scalability:<br><ol><li>The BIS always only runs in a single process,¬†also when the parent BHS is parallel. The first process arriving in the BHS serves as leader and executes the BIS.</li><li>As long as execution is &quot;exact&quot; (TIDs are stored instead of page bits), the parallel BHS sorts all TIDs to ensure pages are accessed sequentially. The sort is also performed just by a single worker. Already with a few tens of thousands of pages to scan, the sort time can make up a significant portion of the total runtime. Large page counts and the need for parallelism are not uncommon for BHS, as one use case is closing the gap between index and sequential scans. The BHS costing seems to not account for that.</li><li>The BHS does not scale well with an increasing number of parallel workers, even when accounting for the sequential parts of execution. A perf profile shows that the TID list / bitmap iteration code heavily contents on a mutex taken for every single TID / page bit (see LWLockAcquire(&amp;istate-&gt;lock, LW_EXCLUSIVE) in tidbitmap.c:1067).</li><li>The EXPLAIN ANALYZE statistics of the parallel BHS do not include the statistics of the parallel workers. For example the number of heap pages processed is what just the leader did. Similarly to other parallel plan nodes we should aggregate statistics across workers.</li></ol>The EXPLAIN ANALYZE output below shows (1) to (3) happening in action for different numbers of workers. I had to obfuscate the query slightly. The difference between the startup time of the BHS and the BIS is the time it takes to sort the TID list. The self time of the BHS is just the time spent on processing the shared TID list and processing the pages. That part runs in parallel but does not scale.<br><br>Workers | Total runtime | Startup time BIS | Startup time BHS | Self time BHS (excl. sorting)<br>-------------------------------------------|------------------|------------------------------<br>2 ¬† ¬† ¬† | 15322 ms ¬† ¬† ¬†| 3107 ms ¬† ¬† ¬† ¬† ¬†| 5912 ms ¬† ¬† ¬† ¬† ¬†| 9269 ms<br>4 ¬† ¬† ¬† | 13277 ms ¬† ¬† ¬†| 3094 ms ¬† ¬† ¬† ¬† ¬†| 5869 ms ¬† ¬† ¬† ¬† ¬†| 7260 ms<br>8 ¬† ¬† ¬† | 14628 ms ¬† ¬† ¬†| 3106 ms ¬† ¬† ¬† ¬† ¬†| 5882 ms ¬† ¬† ¬† ¬† ¬†| 8598 ms<br><br>None of this is really new and some of it is even documented. So, what I am more wondering about is why things are the way they are and how hard it would be to change them. I am especially curious about:</div><div class="gmail_default" style="font-family:monospace"><ul><li>What stops us from extending the BIS to run in parallel? Parallel Bitmap Index Scans are also supported.</li><li>What about reducing the sort time by, e.g.</li><ul><li>dividing TIDs across workers, ending up with N parallely sorted streams,</li><li>cooperatively sorting the TIDs with multiple workers using barriers for synchronization,</li><li>optimizing the PagetableEntry data structure for size and using a faster sorting algorithm like e.g. radix sort</li><li>a combination of the first three options</li></ul><li>With separate TID lists per worker process the iteration problem would be solved. Otherwise, we could</li><ul><li>optimize the iteration code and thereby minimize the duration of the critical section,</li><li>have worker processes acquire chunks of TIDs / page bits to reduce locking.</li></ul></ul>Is there interest in patches improving on the above mentioned shortcomings? If so, which¬†options do you deem best?<br><br>--<br>David Geier<br>(ServiceNow)<br><br><br><br>-- 2 workers<br><br>¬†Finalize Aggregate (actual time=15228.937..15321.356 rows=1 loops=1)<br>¬† ¬†Output: count(*)<br>¬† ¬†-&gt; ¬†Gather (actual time=15187.942..15321.345 rows=2 loops=1)<br>¬† ¬† ¬† ¬† ¬†Output: (PARTIAL count(*))<br>¬† ¬† ¬† ¬† ¬†Workers Planned: 2<br>¬† ¬† ¬† ¬† ¬†Workers Launched: 2<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Partial Aggregate (actual time=15181.486..15181.488 rows=1 loops=2)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Output: PARTIAL count(*)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=15181.364..15181.366 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=15181.608..15181.610 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Bitmap Heap Scan on foo (actual time=5912.731..15166.992 rows=269713 loops=2)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Filter: ...<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Rows Removed by Filter: 4020149<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=5912.498..15166.936 rows=269305 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=5912.963..15167.048 rows=270121 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Bitmap Index Scan on foo_idx (actual time=3107.947..3107.948 rows=8579724 loops=1)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Index Cond: -<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=3107.947..3107.948 rows=8579724 loops=1<br>¬†Planning Time: 0.167 ms<br>¬†Execution Time: 15322.081 ms<br><br><br>-- 4 workers<br><br>¬†Finalize Aggregate (actual time=13175.765..13276.415 rows=1 loops=1)<br>¬† ¬†Output: count(*)<br>¬† ¬†-&gt; ¬†Gather (actual time=13137.981..13276.403 rows=4 loops=1)<br>¬† ¬† ¬† ¬† ¬†Output: (PARTIAL count(*))<br>¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬†Workers Launched: 4<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Partial Aggregate (actual time=13130.344..13130.346 rows=1 loops=4)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Output: PARTIAL count(*)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=13129.363..13129.365 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=13130.085..13130.087 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 2: ¬†actual time=13130.634..13130.635 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 3: ¬†actual time=13131.295..13131.298 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Bitmap Heap Scan on foo (actual time=5870.026..13120.579 rows=134856 loops=4)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Filter: ...<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Rows Removed by Filter: 2010074<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=5869.033..13120.453 rows=128270 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=5869.698..13118.811 rows=135333 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 2: ¬†actual time=5870.465..13121.189 rows=137695 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 3: ¬†actual time=5870.907..13121.864 rows=138128 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Bitmap Index Scan on foo_idx (actual time=3094.585..3094.586 rows=8579724 loops=1)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Index Cond: -<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 3: ¬†actual time=3094.585..3094.586 rows=8579724 loops=1<br>¬†Planning Time: 0.146 ms<br>¬†Execution Time: 13277.315 ms<br><br>-- 8 workers<br><br>¬†Finalize Aggregate (actual time=14533.688..14627.962 rows=1 loops=1)<br>¬† ¬†Output: count(*)<br>¬† ¬†-&gt; ¬†Gather (actual time=14492.463..14627.950 rows=8 loops=1)<br>¬† ¬† ¬† ¬† ¬†Output: (PARTIAL count(*))<br>¬† ¬† ¬† ¬† ¬†Workers Planned: 8<br>¬† ¬† ¬† ¬† ¬†Workers Launched: 8<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Partial Aggregate (actual time=14483.059..14483.061 rows=1 loops=8)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Output: PARTIAL count(*)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=14480.058..14480.061 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=14480.948..14480.950 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 2: ¬†actual time=14481.668..14481.670 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 3: ¬†actual time=14482.829..14482.832 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 4: ¬†actual time=14483.695..14483.697 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 5: ¬†actual time=14484.290..14484.293 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 6: ¬†actual time=14485.166..14485.168 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 7: ¬†actual time=14485.819..14485.821 rows=1 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Bitmap Heap Scan on foo (actual time=5886.191..14477.239 rows=67428 loops=8)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Filter: ...<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Rows Removed by Filter: 1005037<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 0: ¬†actual time=5882.909..14474.627 rows=60325 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 1: ¬†actual time=5883.788..14474.945 rows=69459 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 2: ¬†actual time=5884.475..14475.735 rows=69686 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 3: ¬†actual time=5886.149..14477.162 rows=64680 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 4: ¬†actual time=5886.987..14477.653 rows=71034 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 5: ¬†actual time=5887.347..14478.667 rows=65836 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 6: ¬†actual time=5888.978..14479.239 rows=67755 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 7: ¬†actual time=5888.896..14479.886 rows=70651 loops=1<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Bitmap Index Scan on foo_idx (actual time=3106.840..3106.840 rows=8579724 loops=1)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Index Cond: -<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Worker 7: ¬†actual time=3106.840..3106.840 rows=8579724 loops=1<br>¬†Planning Time: 0.150 ms<br>¬†Execution Time: 14628.648 ms<br></div></div>\r\n	Hi hackers,\r\n\r\nWhile debugging some slow queries containing Bitmap Heap/Index Scans (in\r\nshort BHS / BIS), we observed a few issues regarding scalability:\r\n\r\n   1. The BIS always only runs in a single process, also when the parent\r\n   BHS is parallel. The first process arriving in the BHS serves as leader and\r\n   executes the BIS.\r\n   2. As long as execution is "exact" (TIDs are stored instead of page\r\n   bits), the parallel BHS sorts all TIDs to ensure pages are accessed\r\n   sequentially. The sort is also performed just by a single worker. Already\r\n   with a few tens of thousands of pages to scan, the sort time can make up a\r\n   significant portion of the total runtime. Large page counts and the need\r\n   for parallelism are not uncommon for BHS, as one use case is closing the\r\n   gap between index and sequential scans. The BHS costing seems to not\r\n   account for that.\r\n   3. The BHS does not scale well with an increasing number of parallel\r\n   workers, even when accounting for the sequential parts of execution. A perf\r\n   profile shows that the TID list / bitmap iteration code heavily contents on\r\n   a mutex taken for every single TID / page bit (see\r\n   LWLockAcquire(&istate->lock, LW_EXCLUSIVE) in tidbitmap.c:1067).\r\n   4. The EXPLAIN ANALYZE statistics of the parallel BHS do not include the\r\n   statistics of the parallel workers. For example the number of heap pages\r\n   processed is what just the leader did. Similarly to other parallel plan\r\n   nodes we should aggregate statistics across workers.\r\n\r\nThe EXPLAIN ANALYZE output below shows (1) to (3) happening in action for\r\ndifferent numbers of workers. I had to obfuscate the query slightly. The\r\ndifference between the startup time of the BHS and the BIS is the time it\r\ntakes to sort the TID list. The self time of the BHS is just the time spent\r\non processing the shared TID list and processing the pages. That part runs\r\nin parallel but does not scale.\r\n\r\nWorkers | Total runtime | Startup time BIS | Startup time BHS | Self time\r\nBHS (excl. sorting)\r\n-------------------------------------------|------------------|------------------------------\r\n2       | 15322 ms      | 3107 ms          | 5912 ms          | 9269 ms\r\n4       | 13277 ms      | 3094 ms          | 5869 ms          | 7260 ms\r\n8       | 14628 ms      | 3106 ms          | 5882 ms          | 8598 ms\r\n\r\nNone of this is really new and some of it is even documented. So, what I am\r\nmore wondering about is why things are the way they are and how hard it\r\nwould be to change them. I am especially curious about:\r\n\r\n   - What stops us from extending the BIS to run in parallel? Parallel\r\n   Bitmap Index Scans are also supported.\r\n   - What about reducing the sort time by, e.g.\r\n      - dividing TIDs across workers, ending up with N parallely sorted\r\n      streams,\r\n      - cooperatively sorting the TIDs with multiple workers using barriers\r\n      for synchronization,\r\n      - optimizing the PagetableEntry data structure for size and using a\r\n      faster sorting algorithm like e.g. radix sort\r\n      - a combination of the first three options\r\n   - With separate TID lists per worker process the iteration problem would\r\n   be solved. Otherwise, we could\r\n      - optimize the iteration code and thereby minimize the duration of\r\n      the critical section,\r\n      - have worker processes acquire chunks of TIDs / page bits to reduce\r\n      locking.\r\n\r\nIs there interest in patches improving on the above mentioned shortcomings?\r\nIf so, which options do you deem best?\r\n\r\n--\r\nDavid Geier\r\n(ServiceNow)\r\n\r\n\r\n\r\n-- 2 workers\r\n\r\n Finalize Aggregate (actual time=15228.937..15321.356 rows=1 loops=1)\r\n   Output: count(*)\r\n   ->  Gather (actual time=15187.942..15321.345 rows=2 loops=1)\r\n         Output: (PARTIAL count(*))\r\n         Workers Planned: 2\r\n         Workers Launched: 2\r\n         ->  Partial Aggregate (actual time=15181.486..15181.488 rows=1\r\nloops=2)\r\n               Output: PARTIAL count(*)\r\n               Worker 0:  actual time=15181.364..15181.366 rows=1 loops=1\r\n               Worker 1:  actual time=15181.608..15181.610 rows=1 loops=1\r\n               ->  Parallel Bitmap Heap Scan on foo (actual\r\ntime=5912.731..15166.992 rows=269713 loops=2)\r\n                     Filter: ...\r\n                     Rows Removed by Filter: 4020149\r\n                     Worker 0:  actual time=5912.498..15166.936 rows=269305\r\nloops=1\r\n                     Worker 1:  actual time=5912.963..15167.048 rows=270121\r\nloops=1\r\n                     ->  Bitmap Index Scan on foo_idx (actual\r\ntime=3107.947..3107.948 rows=8579724 loops=1)\r\n                           Index Cond: -\r\n                           Worker 1:  actual time=3107.947..3107.948\r\nrows=8579724 loops=1\r\n Planning Time: 0.167 ms\r\n Execution Time: 15322.081 ms\r\n\r\n\r\n-- 4 workers\r\n\r\n Finalize Aggregate (actual time=13175.765..13276.415 rows=1 loops=1)\r\n   Output: count(*)\r\n   ->  Gather (actual time=13137.981..13276.403 rows=4 loops=1)\r\n         Output: (PARTIAL count(*))\r\n         Workers Planned: 4\r\n         Workers Launched: 4\r\n         ->  Partial Aggregate (actual time=13130.344..13130.346 rows=1\r\nloops=4)\r\n               Output: PARTIAL count(*)\r\n               Worker 0:  actual time=13129.363..13129.365 rows=1 loops=1\r\n               Worker 1:  actual time=13130.085..13130.087 rows=1 loops=1\r\n               Worker 2:  actual time=13130.634..13130.635 rows=1 loops=1\r\n               Worker 3:  actual time=13131.295..13131.298 rows=1 loops=1\r\n               ->  Parallel Bitmap Heap Scan on foo (actual\r\ntime=5870.026..13120.579 rows=134856 loops=4)\r\n                     Filter: ...\r\n                     Rows Removed by Filter: 2010074\r\n                     Worker 0:  actual time=5869.033..13120.453 rows=128270\r\nloops=1\r\n                     Worker 1:  actual time=5869.698..13118.811 rows=135333\r\nloops=1\r\n                     Worker 2:  actual time=5870.465..13121.189 rows=137695\r\nloops=1\r\n                     Worker 3:  actual time=5870.907..13121.864 rows=138128\r\nloops=1\r\n                     ->  Bitmap Index Scan on foo_idx (actual\r\ntime=3094.585..3094.586 rows=8579724 loops=1)\r\n                           Index Cond: -\r\n                           Worker 3:  actual time=3094.585..3094.586\r\nrows=8579724 loops=1\r\n Planning Time: 0.146 ms\r\n Execution Time: 13277.315 ms\r\n\r\n-- 8 workers\r\n\r\n Finalize Aggregate (actual time=14533.688..14627.962 rows=1 loops=1)\r\n   Output: count(*)\r\n   ->  Gather (actual time=14492.463..14627.950 rows=8 loops=1)\r\n         Output: (PARTIAL count(*))\r\n         Workers Planned: 8\r\n         Workers Launched: 8\r\n         ->  Partial Aggregate (actual time=14483.059..14483.061 rows=1\r\nloops=8)\r\n               Output: PARTIAL count(*)\r\n               Worker 0:  actual time=14480.058..14480.061 rows=1 loops=1\r\n               Worker 1:  actual time=14480.948..14480.950 rows=1 loops=1\r\n               Worker 2:  actual time=14481.668..14481.670 rows=1 loops=1\r\n               Worker 3:  actual time=14482.829..14482.832 rows=1 loops=1\r\n               Worker 4:  actual time=14483.695..14483.697 rows=1 loops=1\r\n               Worker 5:  actual time=14484.290..14484.293 rows=1 loops=1\r\n               Worker 6:  actual time=14485.166..14485.168 rows=1 loops=1\r\n               Worker 7:  actual time=14485.819..14485.821 rows=1 loops=1\r\n               ->  Parallel Bitmap Heap Scan on foo (actual\r\ntime=5886.191..14477.239 rows=67428 loops=8)\r\n                     Filter: ...\r\n                     Rows Removed by Filter: 1005037\r\n                     Worker 0:  actual time=5882.909..14474.627 rows=60325\r\nloops=1\r\n                     Worker 1:  actual time=5883.788..14474.945 rows=69459\r\nloops=1\r\n                     Worker 2:  actual time=5884.475..14475.735 rows=69686\r\nloops=1\r\n                     Worker 3:  actual time=5886.149..14477.162 rows=64680\r\nloops=1\r\n                     Worker 4:  actual time=5886.987..14477.653 rows=71034\r\nloops=1\r\n                     Worker 5:  actual time=5887.347..14478.667 rows=65836\r\nloops=1\r\n                     Worker 6:  actual time=5888.978..14479.239 rows=67755\r\nloops=1\r\n                     Worker 7:  actual time=5888.896..14479.886 rows=70651\r\nloops=1\r\n                     ->  Bitmap Index Scan on foo_idx (actual\r\ntime=3106.840..3106.840 rows=8579724 loops=1)\r\n                           Index Cond: -\r\n                           Worker 7:  actual time=3106.840..3106.840\r\nrows=8579724 loops=1\r\n Planning Time: 0.150 ms\r\n Execution Time: 14628.648 ms\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Geier", "Address": "geidav.pg@gmail.com"}]	{"To": ["PostgreSQL Developers <pgsql-hackers@lists.postgresql.org>"], "Date": ["Thu, 14 Jul 2022 12:13:38 +0200"], "From": ["David Geier <geidav.pg@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Improving scalability of Parallel Bitmap Heap/Index Scan"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657793641; cv=none; d=google.com; s=arc-20160816; b=IJ/HA+Mh0hjtymW/IF7e928dtjuKIoaDNpc8x70TYCRKc2aByaX3FhQcPv7kfeDzsN YxRuuUsvp5dPDfzKnRITucE5T8Qa0RTPkTrIbTXvMvl6lucWBPVyFdZtyl3n/eafqrzG HrJAEwyXAaoGw3FF1meyxtxnTl2+su2LSCGTa9uP85on0Y1OtSzCMDwA6RS09jJFsrLc +L8v8TSiWIK3TfCl4LJt8UtQks4DsquLMjXD/YVTo+AwWLvdY6dLOTqfWyiA/Ikw44ed lSf2JZRqMPYPw1CLY8MIa2WPnU+j3HP9og98uhmvwSSQ9eZi1FY5skG60GnH0vH8idPT hORw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp92503jai; Thu, 14 Jul 2022 03:14:01 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id h67-20020a676c46000000b0035748af2522si115202vsc.796.2022.07.14.03.14.01 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 03:14:01 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410727@lists.postgresql.org>) id 1oBvr6-0003fq-6Z for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 10:14:00 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <geidav.pg@gmail.com>) id 1oBvr1-00026b-7Y for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 10:13:55 +0000", "from mail-wr1-x42a.google.com ([2a00:1450:4864:20::42a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <geidav.pg@gmail.com>) id 1oBvqy-0007uB-8N for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 10:13:54 +0000", "by mail-wr1-x42a.google.com with SMTP id r2so867459wrs.3 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 03:13:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAPsAnrn5yWsoWs8GhqwbwAJx1SeLxLntV54Biq0Z-J_E86Fnng@mail.gmail.com>"], "Precedence": ["bulk"], "X-Received": ["by 2002:a1f:4f84:0:b0:375:465:67c0 with SMTP id d126-20020a1f4f84000000b00375046567c0mr2800982vkb.27.1657793641296; Thu, 14 Jul 2022 03:14:01 -0700 (PDT)", "by 2002:a5d:558f:0:b0:21d:9a5e:6b3c with SMTP id i15-20020a5d558f000000b0021d9a5e6b3cmr7429327wrv.649.1657793629635; Thu, 14 Jul 2022 03:13:49 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAPsAnrn5yWsoWs8GhqwbwAJx1SeLxLntV54Biq0Z-J_E86Fnng%40mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410727@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000067c70005e3c12842\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410727@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:from:date:message-id:subject:to; bh=BypF1v71tgGBwWkpJDeARfVsbY6gpkASaOMZhB7Tjak=; b=ioVSve0rLsD20gF6Hlr3ldaR11/lqUKTwujCHRvFc2eba5/Ux60I3yRN+2lu5uEKwX r/ZBAIivFit8ml+Ch+BrWqA/BcSM26CfuU4Mt/SeKoIfU1q1vHCle3v2N28bWVyBZ9k3 Wk+W8oOSrMcNhNkgFX5xkatJq4J0LXXOWU1zmIFWvgrPPs0+Vxm3/j0cShNMqznnw5/i fWxa8JxKNw0kg028TP6oz9GTBnGoyi8PyKHn2BaX20CUDkNQDhIdyvSKY89xFDtvU9qt tOmyAradccaf9N8Gefve1oq75/5+BZMezpsb8YBRTCXIoQcy5yzzUBF650+PREro/ASy BwfA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/oa4clYh3gSaob6oFYouvzdqPuNs/h1zK4451OTTnh8Qf5Gy/W jf+5e50w0lo8nprLBDz2HzGlYjigGgxxT+1k3avJ7/tEE/c="], "X-Google-Smtp-Source": ["AGRyM1sSBu9aoGgEhImi7WigQPmIIHYFT37Z5KK2gTsTB9WqbWk+QHqogQ52QWhjO+iW0eeJ0F5o"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:to:subject:message-id :date:from:mime-version:dkim-signature; bh=BypF1v71tgGBwWkpJDeARfVsbY6gpkASaOMZhB7Tjak=; b=QEqelfGCRim9DikIvu8RfIRI4+lfrfd+W4Cju9RhuVO04sD9upF6fpekWuL1JJAjKV tH+iYf8711EUX/ryv0GE5bAXcvjA2y9/BgQdDEXtbxmzPtIb7kXjUSHAgeTcKUTj9Imj lLKZ04BfD/NblYesM00fGrgMJ5/ijIGWrl3BMLYy7EIi0aJqawtwsPRu5J8zQBiRJsTa sAS1a/zb+zIm3CUjUMLgB3UNYVSFGg3OPXVha4DwVpEtYmjKLfapBo7V0BKyH5l77Bf1 9AOdkwBmFK61JTC8dN2pwkKukqqYysWRjEH2TGorBrURkW/jBcsYQ/jb1EwiZ/Tku/pN 7RjA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ioVSve0r; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410727@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410727@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:from:date:message-id:subject:to; bh=BypF1v71tgGBwWkpJDeARfVsbY6gpkASaOMZhB7Tjak=; b=iVenitByY4ih8Cr8VNV4FKVZPPBu6+1kgkvKpTu8Xzwdf+yIZA4/2fvdXBW4EgYs3O W5fDafeMGBI7I834lvvKczzd0ry56Y6yCJsKTghkjb+oE/44xV/bWyT8NGGUEpcNOWev nr3qbBFSAGcvVby20i80hBe2gzcx+6ilZh/s81WLr8zh9mIEn1aE426ugAO0RHFOJZOn e1xESZmBUYZeKcqDAqM7riWB9M6XCy5ye8f2jVlCiLANC7Ln1/Sygc0mfC0YrTtKxuJX u8xABn+PKCJcIdkOuyGZAjtpIFt+jjglYrDdEgDMWJWlqz70xMO5jkIw8qIWlFmjQFwQ HGVA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ioVSve0r; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410727@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410727@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 10:45:33+00	gareth.palmer3@gmail.com	Re: [PATCH] Implement INSERT SET syntax	<CA+A-St+NntBh2EGu3a0xbVxJFzaeEOn=Vn_V84OuhM59_HKarQ@mail.gmail.com>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "Marko Tiikkaja", "Address": "marko@joh.to"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "wenjing zeng", "Address": "wjzeng2012@gmail.com"}, {"Name": "Rachel Heaton", "Address": "rachelmheaton@gmail.com"}, {"Name": "Gareth Palmer", "Address": "gareth@internetnz.net.nz"}, {"Name": "movead li", "Address": "movead.li@highgo.ca"}, {"Name": "David Steele", "Address": "david@pgmasters.net"}, {"Name": "Ibrar Ahmed", "Address": "ibrar.ahmad@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	\N	67	35526	[{"charset": "US-ASCII", "part_id": "2", "file_name": "insert-set-v9.patch", "content_id": "f_l5kwm5nx0", "disposition": "attachment", "content_type": "text/x-patch"}]		Hello,\r\n\r\nHere is a new version of the patch that applies to HEAD.\r\n\r\nIt also adds some regression tests for overriding {system,user} values\r\nbased on Wenjing Zeng's work.\r\n\r\nGareth\r\n\r\nOn Thu, 14 Jul 2022 at 22:40, Jacob Champion <jchampion@timescale.com> wrote:\r\n>\r\n> On Thu, Apr 7, 2022 at 11:29 AM Marko Tiikkaja <marko@joh.to> wrote:\r\n> > I can help with review and/or other work here.  Please give me a\r\n> > couple of weeks.\r\n>\r\n> Hi Marko, did you get a chance to pick up this patchset? If not, no\r\n> worries; I can mark this RwF and we can try again in a future\r\n> commitfest.\r\n>\r\n> Thanks,\r\n> --Jacob\r\n>\r\n>\r\n>\r\n>\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Gareth Palmer", "Address": "gareth.palmer3@gmail.com"}]	{"Cc": ["Marko Tiikkaja <marko@joh.to>, Tom Lane <tgl@sss.pgh.pa.us>, Justin Pryzby <pryzby@telsasoft.com>, wenjing zeng <wjzeng2012@gmail.com>, Rachel Heaton <rachelmheaton@gmail.com>, Gareth Palmer <gareth@internetnz.net.nz>, movead li <movead.li@highgo.ca>, David Steele <david@pgmasters.net>, Ibrar Ahmed <ibrar.ahmad@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Thu, 14 Jul 2022 22:45:33 +1200"], "From": ["Gareth Palmer <gareth.palmer3@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Implement INSERT SET syntax"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657795580; cv=none; d=google.com; s=arc-20160816; b=a3gpRuNnjdbRTQqgOq3Wg+KKiqNj6H7uL5IEax+03TL7OXjFBXp4jsBHXWhvK8w1mg PdWJUHQnUtZUt4zjSwJcoVSnGWo1JgodkVHgPpFXbK/FStGyN0Ai2fiAXCeeuWHhDbfw FqwazEJSLc3MfzxcLOWmcnBkxyJTXTGjAnSFmwWszOZXSHwG9mgT/LJQ04vnyf213cLo AjieXF5f0YRoIj95++9ZwcFtvaRPYfp2Cr24cgbqkck8e2xQV9hZipKsueXqiEYiHmxv JjWVxGOicezCFe9HzU3A3WtPMrqaq5ZWhwu7SkiZNmHQNV2E9SDo0hNtbkFd2U+WHwrK qHOA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp98205jai; Thu, 14 Jul 2022 03:46:21 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z2-20020a05600c0a0200b003974862e14bsi9373640wmp.5.2022.07.14.03.46.20 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 03:46:20 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410731@lists.postgresql.org>) id 1oBwMO-0004RQ-Cf for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 10:46:20 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <gareth.palmer3@gmail.com>) id 1oBwMJ-0002mQ-8k for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 10:46:15 +0000", "from mail-ej1-x629.google.com ([2a00:1450:4864:20::629]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <gareth.palmer3@gmail.com>) id 1oBwMF-0008G4-Ky for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 10:46:14 +0000", "by mail-ej1-x629.google.com with SMTP id sz17so2655226ejc.9 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 03:46:11 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+A-St+NntBh2EGu3a0xbVxJFzaeEOn=Vn_V84OuhM59_HKarQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<385970D7-37BF-4D23-A5FD-525BBE18849E@internetnz.net.nz> <2DF75D93-3804-4862-BC0F-0FF9EED2B547@internetnz.net.nz> <158752322823.1122.13550500209229339746.pgcf@coridan.postgresql.org> <9253E61F-A278-40B4-AC24-F571C48F4181@internetnz.net.nz> <678007b3-1faa-f7e0-226b-ed3b44c8af51@pgmasters.net> <CADJcwiUOScJixci5E3Dd+RCmYWkWiP7h4g0Sf30nYe9k4hFnxQ@mail.gmail.com> <EF5FA46A-24F9-4915-B81A-3D2A30225B26@gmail.com> <20220124035805.GS23027@telsasoft.com> <2720923.1648049571@sss.pgh.pa.us> <CAL9smLA9hJ-B3Eq3fxe7=CG7ESkH+C6sW762fbnVQvMxsxfVSA@mail.gmail.com> <CAAWbhmg4M2jf181v+cAoMJEM89cNX987R4FxuArWpspdCMvsYQ@mail.gmail.com>"], "X-Received": ["by 2002:a5d:584e:0:b0:21d:bcd6:5c8b with SMTP id i14-20020a5d584e000000b0021dbcd65c8bmr7100323wrf.391.1657795580810; Thu, 14 Jul 2022 03:46:20 -0700 (PDT)", "by 2002:a17:906:99c5:b0:6df:8215:4ccd with SMTP id s5-20020a17090699c500b006df82154ccdmr7853177ejn.684.1657795570201; Thu, 14 Jul 2022 03:46:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BA-St%2BNntBh2EGu3a0xbVxJFzaeEOn%3DVn_V84OuhM59_HKarQ%40mail.gmail.com>"], "In-Reply-To": ["<CAAWbhmg4M2jf181v+cAoMJEM89cNX987R4FxuArWpspdCMvsYQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410731@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000001290ef05e3c19c8d\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410731@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=9VO1cDp7TuTi2NIHNF5AAjK/lC48uKB8oMr9YrbltQA=; b=KiN2gSWUu6aG3aFNA5ZiJHgu+AN4UYZOJNQ8KQuqpfVhBd59M7pYA1u3f8MHUz7Aom QWrS0ruLUa2hG51xCfkdhO5GuowNtkI7XlzDqbV5pB4kNrSHL+/B4nji99JwjfIoSNfu 7b8THK/cjIhG7UMmZ2NVoowE1Wr8h7+zQpvO5aYM0/fbpSSlKGwVRz6aALj/t2oPnlRm 42T1IfN47SbRXFzDnx39t4ls5skNwHmp3piZJPOnryElQPaRwZ6pvzRm3FC+goddRkgO o55Gb87MaqThJYvHAdU7ntHE8zkKGodW7JrSCkUL3gHxs5eohkJJ+AYjEbS0fjeMCzbi s8jw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9sBE0MXX548p0/YsmbCEMAKs1KGqfVkx/Fm1Z6uYcG82HqEyQE F/rlWHpSxe/+n+bWu/RmpE+cemgzBlyopKb/+WI="], "X-Google-Smtp-Source": ["AGRyM1si5FkwjqsZ4DKcOIfb9wR4DLb5xLlYU6GlZcXwNGQcsp7UZnzRukY2EgGBhAjTh1kugkq2"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=9VO1cDp7TuTi2NIHNF5AAjK/lC48uKB8oMr9YrbltQA=; b=ZwxHg6z+LRtpkYv2Tz9Y6oaDrQ30vUhyLsmV8uUQfcEcDcsDT1wvJWQgETh7RgAT0N ox6cas5jcdInS1kKgzxyDtYJo300sBClf4ul9bXnrVr7bhAHjI7UyJjhscso16oYdqwE 1uj8SD3Thj3MRcV2Of6Mep3jchits5VfmdTqOVSgFequkngNMgBXyjLQa9vLv+qzlH1H BOimkVT9Kw1r42KzqitRyijDFNGgPSyttKlsLmLXvDaJgT5hHcaemlRYG9dUiNE0ie/c I0XocP/M5TDEP6dRA7shgnQOj9/kvJ4wL4ctsplwrxNFxPYXy4qmcNfUEDZbdXN+zCvo ru0g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=KiN2gSWU; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410731@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410731@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=9VO1cDp7TuTi2NIHNF5AAjK/lC48uKB8oMr9YrbltQA=; b=lzGxvqzutDs+IUmp5LaQsoMMdBIIQVT99T4JHzJyyTEE8h7YsmH7H4EpykdgpLgSEU 5XuOzq5o96Iwr8tbABtNm00PPbeDWIXNPxaCXOEdN9zcslM8/rmcey8n3erbitKRwYo3 BQPZjO2W1DdbpfodwxZOedMwKfgSPb+cISgjrju218owvM0QpQJKZLUAuPUwmzemFMQ/ +qPcwym/eambYwWrwHZ6Vq+vuaZFKPc0uCF2wqVc2gU2UEvBNMr6ICF9TNF/DWHj77QQ q1ssMWDm/WANX+uoJX136iABEZnXjINo28gPeW5MllGTiAu+LpSFri0IN3wCj2FSOg3y AzXg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=KiN2gSWU; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410731@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410731@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAAWbhmg4M2jf181v+cAoMJEM89cNX987R4FxuArWpspdCMvsYQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 11:20:16+00	d.koval@postgrespro.ru	Re: enable/disable broken for statement triggers on partitioned tables	<388009b0-7fc7-4f6e-0c69-44df38413551@postgrespro.ru>	[{"Name": "Amit Langote", "Address": "amitlangote09@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	\N	69	6548	[]		> I agree that the patch shouldn't have changed that behavior, so I've\r\n> fixed the patch so that EnableDisableTrigger() recurses even if the\r\n> parent trigger is unchanged.\r\n\r\nThanks, I think this patch is ready for committer.\r\n\r\n-- \r\nWith best regards,\r\nDmitry Koval\r\n\r\nPostgres Professional: http://postgrespro.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Simon Riggs <simon.riggs@enterprisedb.com>"], "To": ["Amit Langote <amitlangote09@gmail.com>"], "Date": ["Thu, 14 Jul 2022 14:20:16 +0300"], "From": ["Dmitry Koval <d.koval@postgrespro.ru>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: enable/disable broken for statement triggers on partitioned tables"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657797627; cv=none; d=google.com; s=arc-20160816; b=tAGqQj22awy1xsGatfFvz2C+Se+7DkjfliY8tw23RLzFXDjEuEtcFloUnabBk6Jw9D hPxOUbkCET9L3Lmr6lgyWoLrJ25fUfTDTqO78KTGYAs4O5PbSFFqfHXu6yOIFvEnZfd3 vjhw2qLuX05I+SGaJRBAiHy0/n2CmESudKAGZVsC3EB48aP/eMH6KDuNWuKNNdXgqqIv qKkj7wm5whrnITnfWPQMYkNMn2FN2WwDR6/eE9I7plJRtqFqiwzQnWhQOaMHtHtNOfie 8HybqE9vKiKJdUd4HkTIOuGIx4Dp9CFdXFEJZdTzMJlkWlGPsRy9henJkAF92tp1oZL5 f/Ow=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp104878jai; Thu, 14 Jul 2022 04:20:27 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id id7-20020a05600ca18700b003a2dd99bb06si1529833wmb.89.2022.07.14.04.20.27 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 04:20:27 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410738@lists.postgresql.org>) id 1oBwtP-0005Yq-Dv for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 11:20:27 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBwtK-0003w9-OT for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:20:22 +0000", "from mail.postgrespro.ru ([93.174.131.139]) by makus.postgresql.org with esmtp (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oBwtH-0008VZ-Do for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:20:21 +0000", "from [192.168.28.32] (cyclops.postgrespro.ru [93.174.131.138]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (Client did not present a certificate) by mail.postgrespro.ru (Postfix) with ESMTPSA id BEE9B21C0759; Thu, 14 Jul 2022 14:20:16 +0300 (MSK)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<388009b0-7fc7-4f6e-0c69-44df38413551@postgrespro.ru>"], "Precedence": ["bulk"], "References": ["<CA+HiwqG-cZT3XzGAnEgZQLoQbyfJApVwOTQaCaas1mhpf+4V5A@mail.gmail.com> <CA+HiwqHNbyd1DH=vZzKwLuqKEVuoNqF8BenhgMidMebWTxooYQ@mail.gmail.com> <ea25d7d5-0454-8d09-9936-12ee9bddf942@postgrespro.ru> <CA+HiwqFUmjnNAwn9SOeeRpcEWXwkjx5hbZZ8CHxGBUCD8a0ssA@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:600c:1e10:b0:3a2:e35c:f5fb with SMTP id ay16-20020a05600c1e1000b003a2e35cf5fbmr8574572wmb.27.1657797627768; Thu, 14 Jul 2022 04:20:27 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/388009b0-7fc7-4f6e-0c69-44df38413551%40postgrespro.ru>"], "In-Reply-To": ["<CA+HiwqFUmjnNAwn9SOeeRpcEWXwkjx5hbZZ8CHxGBUCD8a0ssA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410738@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410738@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/simple; d=postgrespro.ru; s=mail; t=1657797616; bh=LicA6aI+lgGuaGMC+yQPo/0yeAk2qMQlACCWrPIvhBw=; h=Date:Subject:To:Cc:References:From:In-Reply-To; b=B5CbBZgUm6fyoUbW8zwCKvYKE8Ewfyze3DTgCykhqA+MgHphSlpEcRzM22hhjsBWB QVhStUmvAsXgRwo2vNjkrL9GI+jQfex2Zu13YrbHjwXrLqxf34HKcq6wkfd3+WPwDr qba1W+QD1m+KMGrXLjH7G/zsSJjPvLjDohIeog7A="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vzMkqgW/8MFaZJwSmbOdGC6E+0WX1Ba3C3dHgeFegkrXUGzfj+ChPADPO44Fr/cVNDEp4f"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=Koua2uzCRL8f+eixtbLaMIQbl0ASEfvSAsi/S0IbMd8=; b=GiVmh1fPf/0SasIkrIgpJMxSOQRhwOk9zSc33rK/SMeAGZr/6ongkuwVYxNaowcqqJ H3iNtcb618rnK354Dj7YnQBI2v44JYIZGuEmaY+lDpOR3JIKBeD/Mbm6xPX3KP5zJ2Ge o7LgBIwW/9pZyZ0xIMigXgANIGViYa7yHwdWgEieiK6x9SIcGDTalohqiWk3bqw1dS9d LEh+vS/kOFiOo1zNCfiSrUWW/lIYYvSal89lbhRfwz0XKlsJkEUiguwlU5nCBHWyDQVV bJVoqR52FVqFdPITYiB0NMVqv5AiMmmc1RmR0kz3f8w+yR6wYquCbu9bI2lasd9Vxk/J Y5gg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=B5CbBZgU; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410738@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410738@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=B5CbBZgU; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410738@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410738@lists.postgresql.org"]}	["<CA+HiwqFUmjnNAwn9SOeeRpcEWXwkjx5hbZZ8CHxGBUCD8a0ssA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 11:07:56+00	dhyan@nataraj.su	Re: Bug: Reading from single byte character column type may cause out of bounds memory reads.	<2710588.JKtg82POfv@thinkpad-pgpro>	[{"Name": "Spyridon Dimitrios Agathos", "Address": "spyridon.dimitrios.agathos@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}, {"Name": "Isaac Morland", "Address": "isaac.morland@gmail.com"}]	\N	68	10952	[]		–í –ø–∏—Å—å–º–µ –æ—Ç —Å—Ä–µ–¥–∞, 13 –∏—é–ª—è 2022 –≥. 16:14:39 MSK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Aleksander \r\nAlekseev –Ω–∞–ø–∏—Å–∞–ª:\r\n\r\nHi! Let me join the review process. Postgres data types is field of expertise I \r\nam interested in.\r\n\r\n0. Though it looks like a steady bug, I can't reproduce it. Not using \r\nvalgrind, not using ASan (address sanitizer should catch reading out of bounds \r\ntoo). I am running Debian Bullseye, and tried to build both postgresl 14.4 and \r\ncurrent master.\r\n\r\nNever the less I would dig into this issue. And start with the parts that is \r\nnot covered by the patch, but seems to be important for me.\r\n\r\n1. typename "char" (with quotes) is very-very-very confusing. it is described \r\nin documentation, but you need to be postgres expert or careful documentation \r\nreader, to notice important difference between "char" and char. \r\nWhat is the history if "char" type? Is it specified by some standard? May be it \r\nis good point to create more understandable alias, like byte_char, ascii_char \r\nor something for usage in practice, and keep "char" for backward compatibility \r\nonly.\r\n\r\n2. I would totally agree with  Tom Lane and Isaac Morland, that problem should \r\nbe also fixed  on the side of type conversion.  There is whole big thread about \r\nit. Guess we should come to some conclusion there\r\n\r\n3.Fixing out of bound reading for broken unicode is also important.  Though \r\nfor now I am not quite sure it is possible.\r\n\r\n\r\n> -\t\t\tp += pg_mblen(p);\r\n> +\t\t{\r\n> +\t\t\tint t = pg_mblen(p);\r\n> +\t\t\tp += t;\r\n> +\t\t\tmax_copy_bytes -= t;\r\n> +\t\t}\r\n\r\nMinor issue: Here I would change variable name from "t" to "char_len" or \r\nsomething, to make code more easy to understand.\r\n\r\nMajor issue: is pg_mblen function safe to call with broken encoding at the end \r\nof buffer? What if last byte of the buffer is 0xF0 and you call pg_mblen for it?\r\n\r\n\r\n>+\t\tcopy_bytes = p - s;\r\n>+\t\tif(copy_bytes > max_copy_bytes)\r\n>+\t\t\tcopy_bytes = max_copy_bytes;\r\n\r\nHere I would suggest to add comment about broken utf encoding case. That would \r\nexplain why we might come to situation when we can try to copy more than we \r\nhave.\r\n\r\nI would also suggest to issue a warning here. I guess person that uses \r\npostgres would prefer to know that he managed to stuff into postgres a string \r\nwith broken utf encoding, before it comes to some terrible consequences.  \r\n\r\n> Hi Spyridon,\r\n> \r\n> > The column "single_byte_col" is supposed to store only 1 byte.\r\n> > Nevertheless, the INSERT command implicitly casts the 'üÄÜ' text into\r\n> > "char". This means that only the first byte of 'üÄÜ' ends up stored in the\r\n> > column. gdb reports that "pg_mblen(p) = 4" (line 1046), which is expected\r\n> > since the pg_mblen('üÄÜ') is indeed 4. Later at line 1050, the memcpy will\r\n> > copy 4 bytes instead of 1, hence an out of bounds memory read happens for\r\n> > pointer 's', which effectively copies random bytes.\r\n> Many thanks for reporting this!\r\n> \r\n> > - OS: Ubuntu 20.04\r\n> > - PSQL version 14.4\r\n> \r\n> I can confirm the bug exists in the `master` branch as well and\r\n> doesn't depend on the platform.\r\n> \r\n> Although the bug is easy to fix for this particular case (see the\r\n> patch) I'm not sure if this solution is general enough. E.g. is there\r\n> something that generally prevents pg_mblen() from doing out of bound\r\n> reading in cases similar to this one? Should we prevent such an INSERT\r\n> from happening instead?\r\n\r\n\r\n-- \r\nNikolay Shaplov aka Nataraj\r\nFuzzing Engineer at Postgres Professional\r\nMatrix IM: @dhyan:nataraj.su\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nikolay Shaplov", "Address": "dhyan@nataraj.su"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Aleksander Alekseev <aleksander@timescale.com>, Tom Lane <tgl@sss.pgh.pa.us>, Andrew Dunstan <andrew@dunslane.net>, Isaac Morland <isaac.morland@gmail.com>"], "To": ["Spyridon Dimitrios Agathos <spyridon.dimitrios.agathos@gmail.com>, pgsql-hackers@lists.postgresql.org"], "Date": ["Thu, 14 Jul 2022 14:07:56 +0300"], "From": ["Nikolay Shaplov <dhyan@nataraj.su>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Bug: Reading from single byte character column type may cause out of bounds memory reads."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657796890; cv=none; d=google.com; s=arc-20160816; b=kJeriKs99uETC16bnKHE681qup6nvg7D+Sal+lHjfxofNbbwBGMxA756DcCEcC3BJ+ dDOSeOvOLxfb0SxXZI1iE5gUBJn7MsRdoJE2FGI2NjkBDEP1ElPMOF+S12tlW9M+2nCk PjWjMBHbTsE6Uq4RV5GpLQmOWE/3psxqJP9eoyjK3t2f4hYcJOY8k9F4m8z5Hbu/C1Sy f3/UfSryb6T8Tbmesrsv6vJW5hEu+AfJUPTmy90NSAWNTxApCfriDk+jDjKA7Y5G6S5R sRVZXgNTwZEACYCmwbrjIWXkZT6WMboaBqTiOJlV7XRJYdBoUGRMAxXTyZIGgMeSO+Co 4UNw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp102510jai; Thu, 14 Jul 2022 04:08:10 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x187-20020a6763c4000000b0034b9889de80si133794vsb.8.2022.07.14.04.08.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 04:08:10 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410734@lists.postgresql.org>) id 1oBwhV-0005WR-AU for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 11:08:09 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dhyan@nataraj.su>) id 1oBwhQ-0003xj-S0 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:08:04 +0000", "from mail.nataraj.su ([88.198.198.57]) by makus.postgresql.org with esmtp (Exim 4.92) (envelope-from <dhyan@nataraj.su>) id 1oBwhN-0008Oq-Rd for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:08:03 +0000", "from thinkpad-pgpro.localnet (unknown [91.203.188.92]) by mail.nataraj.su (Postfix) with ESMTPSA id 1E23C9D8A2; Thu, 14 Jul 2022 11:07:57 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2710588.JKtg82POfv@thinkpad-pgpro>"], "Precedence": ["bulk"], "References": ["<CAFM5RapGbBQm+dH=7K80HcvBvEWiV5Tm7N=NRaYURfm98YWc8A@mail.gmail.com> <CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"], "X-Received": ["by 2002:a1f:ab90:0:b0:36c:5dff:95d3 with SMTP id u138-20020a1fab90000000b0036c5dff95d3mr3357396vke.0.1657796890159; Thu, 14 Jul 2022 04:08:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2710588.JKtg82POfv%40thinkpad-pgpro>"], "In-Reply-To": ["<CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410734@lists.postgresql.org>"], "Content-Type": ["multipart/signed; boundary=\\"nextPart1856128.osHXIfKUFp\\"; micalg=\\"pgp-sha512\\"; protocol=\\"application/pgp-signature\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Organization": ["Postgres Professional"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410734@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vksEKd0sT6nk6veLp+Vqv/R0moC+MnH7PhZ4nXeHHQnzmXpkTO5KL3e/jo0ipdUwoajsKs"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version:references :in-reply-to:organization:message-id:date:subject:cc:to:from; bh=OJ9X2GlGUZjlOe3/UDx8qiCeNAyO0aNGzpm8hdBrti4=; b=KA3ubFXoZ/uwnpo5GBOjZ8m3BYwTQHa/epUHT0yFBdKjwfZcjPhdr/s9tyyM5d6MAY TvOWDOBEpXUnzxYlkKkXXDs9TSBpmItIke83tP/GzDjRkOH7W9zEtbhEKYTlMyBForyT CnObWp67w0BPNI2zSicRLfIgdf1w5CJQk2BPehHiBpRLwJM04+pNHjX6PPUInhqVjUkp cLIBMrRCvC06lIF+fitgoOT6r3S5dyEuEfTZYujEU5f6TE4UrPakSsRjFqRSiSYIc8mO 8pH2mlSSsv43qmXbFNO9jy2brCWOQ2h/vKAB1FF5c2f5mjSCSEL8suxEUChFnB59swto a9sg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410734@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410734@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410734@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410734@lists.postgresql.org"]}	["<CAJ7c6TNguAKGcYxk=SHGvGAGfdrx_2DP5bvtDNu+eQ+3kDbt7w@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 11:20:58+00	sergey.dudoladov@gmail.com	Re: Introduce "log_connection_stages" setting.	<CAA8Fd-orLatOYoJq3qspbz=R2T9VyzhBcrZNFKEnHzXqeFONdA@mail.gmail.com>	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	[{"Name": "", "Address": "euler@eulerto.com"}]	\N	70	9272	[]		Hello,\r\n\r\nThank you for the constructive feedback.\r\n\r\n> Your proposal will add more confusion to the already-confused logging-related GUCs.\r\n> I wouldn't introduce a new GUC that depends on the stage of other GUC as you proposed.\r\n\r\nAgreed, coupling a new GUC with "log_connections" is likely to lead to\r\nextra confusion.\r\n\r\n> There are 3 stages: connect (received), authorized (authenticated), disconnect.\r\n\r\nI've taken connection stages and terminology from the existing log messages.\r\nThe reason I have separated "authorized" and "authenticated" are [1]\r\nand [2] usages of "log_connections";\r\n"received" is mentioned at [3].\r\n\r\n>> Example: log_connection_stages=‚Äôauthorized,disconnected‚Äô.\r\n> would turn the boolean value into an enum value\r\n\r\nI have thought about enums too, but we need to cover arbitrary\r\ncombinations of message types, for example log only "received" and\r\n"disconnected".\r\nHence the proposed type "string" with individual values within the\r\nstring really drawn from an enum.\r\n\r\n> merge log_connections and log_disconnections into a new GUC (?) and deprecate them.\r\n\r\nAre there any specific deprecation guidelines ? I have not found any\r\nafter a quick search for GUC deprecation in Google and commit history.\r\nA deprecation scheme could look like that:\r\n1. Mention in the docs "log_(dis)connections" are deprecated in favor\r\nof "log_connection_stages"\r\n2. Map "log_(dis)connections" to relevant values of\r\n"log_connection_stages" in code if the latter is unset.\r\n3. Complain in the logs if a conflict arises between the old params\r\nand "log_connection_stages", with "log_connection_stages"\r\ntaking the precedence.\r\n\r\nRegards,\r\nSergey\r\n\r\n[1] https://github.com/postgres/postgres/blob/3f8148c256e067dc2e8929ed174671ba7dc3339c/src/backend/utils/init/postinit.c#L257-L262\r\n[2] https://github.com/postgres/postgres/blob/02c408e21a6e78ff246ea7a1beb4669634fa9c4c/src/backend/libpq/auth.c#L372\r\n[3] https://github.com/postgres/postgres/blob/master/src/backend/postmaster/postmaster.c#L4393\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Sergey Dudoladov", "Address": "sergey.dudoladov@gmail.com"}]	{"Cc": ["euler@eulerto.com"], "To": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "Date": ["Thu, 14 Jul 2022 13:20:58 +0200"], "From": ["Sergey Dudoladov <sergey.dudoladov@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Introduce \\"log_connection_stages\\" setting."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657797678; cv=none; d=google.com; s=arc-20160816; b=UlJpehrxe/6tAtXx3V0zIJvxwC+HFC9onaQ09Acs5Rkrk9QRwrTfYU4KxL5m6X2evY rNOh8hczj59nYt3QjQCqVk9Jvuud956WthIg+8MNwEEVP4Y4OCGaUlS5OblcD7kuCQwJ gzPUZIX+vwpACih53jNEF+7EnFKcoOopaTr8F8QyetiMQYP/rvxfvS7jgFGBoV5qdPOf 32iLxRRlHcKp5HYDd283+CfT13utk6wGn38Fun/Zzgp/7CtkOFhWw6mzpN21c2+6cIQ0 ILCgukcwLfOYPRYxguViayD00GXNda9XeZhSjmmhnA2Ii64s8Hp01/WO537Ez6DdNG4J UTTA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp105061jai; Thu, 14 Jul 2022 04:21:18 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z17-20020a05600c03d100b003a2e1d57df2si1569486wmd.151.2022.07.14.04.21.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 04:21:18 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410740@lists.postgresql.org>) id 1oBwuE-0008O5-EQ for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 11:21:18 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sergey.dudoladov@gmail.com>) id 1oBwu9-0006fh-QC for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:21:13 +0000", "from mail-yw1-x112a.google.com ([2607:f8b0:4864:20::112a]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sergey.dudoladov@gmail.com>) id 1oBwu7-000255-74 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:21:13 +0000", "by mail-yw1-x112a.google.com with SMTP id 00721157ae682-31bf3656517so13311597b3.12 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 04:21:11 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAA8Fd-orLatOYoJq3qspbz=R2T9VyzhBcrZNFKEnHzXqeFONdA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAA8Fd-qCB96uwfgMKrzfNs32mqqysi53yZFNVaRNJ6xDthZEgA@mail.gmail.com> <8cf66a46-ae53-40bd-a590-0a5adc8f7ee0@www.fastmail.com>"], "X-Received": ["by 2002:a05:600c:3c8a:b0:3a0:4ad8:d3c4 with SMTP id bg10-20020a05600c3c8a00b003a04ad8d3c4mr14613104wmb.43.1657797678786; Thu, 14 Jul 2022 04:21:18 -0700 (PDT)", "by 2002:a0d:d997:0:b0:31d:669c:5bd7 with SMTP id b145-20020a0dd997000000b0031d669c5bd7mr9216816ywe.340.1657797669633; Thu, 14 Jul 2022 04:21:09 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAA8Fd-orLatOYoJq3qspbz%3DR2T9VyzhBcrZNFKEnHzXqeFONdA%40mail.gmail.com>"], "In-Reply-To": ["<8cf66a46-ae53-40bd-a590-0a5adc8f7ee0@www.fastmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410740@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410740@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc:content-transfer-encoding; bh=ZMbrzg2x7iOsyWzhY030v0Gu/tnGtuicI/oz+TS48XM=; b=dV1xuuFduoFIG+sRyWG6T/iZqnJS3FKvPuFv+GIcOvaUYqnzrz7apwHFCf/3uwJ2z/ mJSVFc4t1vPIlnx4xheFXzvMNu9WDR40l0bPmAxFJnXqe0zDwfIOVPIBGeXqUDUowGwv 22cI0oHQegwaqsMz62i05GgokpDlXktTCTbVWn200yYkEYCQo7o9xhBnpVLu/Jb1IwTv LKBvJ7cZ/N6vp9XolFjPVBHPu8c/w7MOdjW77iSELeVLU+2qhprw+sS7+3j6wJRWkRRg asVE6LERKq5WXkb7GbKJNdqNuEn8bA4OfyOIPPDI9IXfZui/WN0kEcvvLYxwKcav9fRS gEtA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+Ckpvm3vwvYLFy/ZaZ5FdlntoC6Ir2+jGWbyiPga8DU1nl6sFk AA4v6zG/H7UmC06wVFGf0IqaoAn9UwO3cdv75y/it/2uPdQ="], "X-Google-Smtp-Source": ["AGRyM1sjBChHBSJ2mfwm9Ctw66MoZvjuOe5gNUsWnwKnuizUKkFSxnvae38EAxO4yjU4o2PGIFTG"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:cc:to:subject:message-id:date:from :in-reply-to:references:mime-version:dkim-signature; bh=ZMbrzg2x7iOsyWzhY030v0Gu/tnGtuicI/oz+TS48XM=; b=hdX9Xn2IUHtSR2r7zzV2g/RbTPBrYsRmQDVToWgmDhD8PNIXnIYO5lOf1jIPU/e+d9 Tuq/EikczhNCyyEMkkzxgZgdsQVI6vS6I3O4vgAfGUuQzVJ7RNZaS4dItLbxoDZ3uWA0 aMCnI3TlnCHIpJRUhV70OU/5jbisvwAkuWTu6WnfQLhMQM6/abJkbVpk3MoMwIvjcPw4 TzyI9q0p4iCczxcq9EPOZLsPpU36d2Wq1c9ZJ0TGx3zS//SSrBPsC6txoX+PhHCs8OPF 7niw/BFmd3kC+AFRnyEGdatJuPP3YGtAuTLvoF9V5FvVzYt0NqOLlQTgrqpOpkh2kPVq CR9g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dV1xuuFd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410740@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410740@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc:content-transfer-encoding; bh=ZMbrzg2x7iOsyWzhY030v0Gu/tnGtuicI/oz+TS48XM=; b=GpCm4Nr0B/gRlu4EzO/lX/LEt5VWBpqgvJsk3n47gMsw6fD+h9O5/OIH6lWlzr4GiS 4NzRNN4vside1bojnf25lBgBUPGVt2g4eBtrTHm+BkUH2XY3Pk6vaxsap1mP+8ThUNc5 HcZd2GmTSnj8njhe/YsLgJ7NMZak0HjlNeE7k1IYIp2SSTbpreJ7Ew318/CE97ikDBFs E+qed1SCogkeJwEfYx+4YMy21Y1zNwsqOjFByp799y1tLBVgSyGAlbODxyrmf8gjpHlX L+zurrnttY4phmUh9jNYBglbayMfHc+8sd4luHPi/2JmWOv+c1vd7aYUAkB7RBiXnoKU oCmA=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dV1xuuFd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410740@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410740@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<8cf66a46-ae53-40bd-a590-0a5adc8f7ee0@www.fastmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 11:51:03+00	amitlangote09@gmail.com	Re: enable/disable broken for statement triggers on partitioned tables	<CA+HiwqFvTKBVdL2Q_w3dDq5Qoew8w=EGA=E2zCtggWL+21ec9Q@mail.gmail.com>	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	\N	72	7765	[]		On Thu, Jul 14, 2022 at 8:20 PM Dmitry Koval <d.koval@postgrespro.ru> wrote:\r\n> > I agree that the patch shouldn't have changed that behavior, so I've\r\n> > fixed the patch so that EnableDisableTrigger() recurses even if the\r\n> > parent trigger is unchanged.\r\n>\r\n> Thanks, I think this patch is ready for committer.\r\n\r\nGreat, thanks.\r\n\r\n-- \r\nThanks, Amit Langote\r\nEDB: http://www.enterprisedb.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Amit Langote", "Address": "amitlangote09@gmail.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Simon Riggs <simon.riggs@enterprisedb.com>"], "To": ["Dmitry Koval <d.koval@postgrespro.ru>"], "Date": ["Thu, 14 Jul 2022 20:51:03 +0900"], "From": ["Amit Langote <amitlangote09@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: enable/disable broken for statement triggers on partitioned tables"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657799490; cv=none; d=google.com; s=arc-20160816; b=u7o3yNf/jS6gxr2Dprzx6WKwMHQ4lmmBfrJ24woKXACe9AIghUXkEobAAQwsYwJ/26 LYDgGpxto+C3LRDCxrc6exHoyQf4HJhzoWjXwSx3iydbLA+tPPoBlpAXBvWcrF2OD7on A3OAVmvodNj9BI6/gEZpiG6vlPiKBd+FCKVBh+WtS5250HGWmrUQqgdaYZFmXY8OJ7QY w8JdiEwnkUQqy7UEnxmEj8EyFj5uv6w0Uy/ay0Z+oZs6ziud+sPdaPZaMlUStOVbd2fu QxxhZVwQKGnLSe6ZMjGtbfvWIAdmIJeDAXAjsBnaY6Fv/ftZbtjaOJ7ka03bX1Zm8Xs4 OwMQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp111510jai; Thu, 14 Jul 2022 04:51:30 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e1-20020a05600c4e4100b003a2d414fbebsi6020945wmq.162.2022.07.14.04.51.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 04:51:30 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410752@lists.postgresql.org>) id 1oBxNR-0006DC-SK for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 11:51:29 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <amitlangote09@gmail.com>) id 1oBxNN-0004WG-6j for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:51:25 +0000", "from mail-vk1-xa2b.google.com ([2607:f8b0:4864:20::a2b]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <amitlangote09@gmail.com>) id 1oBxNK-0002NB-NK for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:51:24 +0000", "by mail-vk1-xa2b.google.com with SMTP id w129so679624vkg.10 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 04:51:22 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+HiwqFvTKBVdL2Q_w3dDq5Qoew8w=EGA=E2zCtggWL+21ec9Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CA+HiwqG-cZT3XzGAnEgZQLoQbyfJApVwOTQaCaas1mhpf+4V5A@mail.gmail.com> <CA+HiwqHNbyd1DH=vZzKwLuqKEVuoNqF8BenhgMidMebWTxooYQ@mail.gmail.com> <ea25d7d5-0454-8d09-9936-12ee9bddf942@postgrespro.ru> <CA+HiwqFUmjnNAwn9SOeeRpcEWXwkjx5hbZZ8CHxGBUCD8a0ssA@mail.gmail.com> <388009b0-7fc7-4f6e-0c69-44df38413551@postgrespro.ru>"], "X-Received": ["by 2002:a05:600c:3591:b0:3a0:563a:49d3 with SMTP id p17-20020a05600c359100b003a0563a49d3mr8345624wmq.60.1657799490243; Thu, 14 Jul 2022 04:51:30 -0700 (PDT)", "by 2002:a1f:1d0f:0:b0:374:448a:dec2 with SMTP id d15-20020a1f1d0f000000b00374448adec2mr3375013vkd.5.1657799480871; Thu, 14 Jul 2022 04:51:20 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BHiwqFvTKBVdL2Q_w3dDq5Qoew8w%3DEGA%3DE2zCtggWL%2B21ec9Q%40mail.gmail.com>"], "In-Reply-To": ["<388009b0-7fc7-4f6e-0c69-44df38413551@postgrespro.ru>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410752@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410752@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=zQPiKzJYcjAsBztmAzTzZKjmhikrPP1FhsCc9Y4XEYQ=; b=oc+AUO5qSIP8Zy0sPKY7N+6+RQXXTRbzBPlFMBfZBlWoVkHa9LnsUatTbT8HNIRIcl LNdew/UtCzNAO/3ZwaWUTc1GT0BrLWNAVznjT4BcxHfktPp+BWlPOOjyNKTmxGvIgMdd U1ZoZdgFQjKVlS1jg6PEgHqG/EggZU1dLzhZflEyONEPiA7h6hJ4YnuKmo6Z9UmgcIg2 aKWUOtjQh78PEdXo29WGsgZ0gYK9QCWoXiaP3D6mbGkCJuF2N00CEOnpp6ymkbQC0eK2 qn35J/yVRzsSEXguJ0NgwjEUYohzhHkpistDijDgHd9rvKS2yxPov9HZ5UzX+h/GfRJ0 FHSQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/aiQa04WacQPXLNHYf9fpChhLMb4bjNgLbrmz1jbkgYTQt50wX ZzO+5dUss27hTEPgncXj9TUq2JBuAf8Kmn9bcJ0="], "X-Google-Smtp-Source": ["AGRyM1v1nwSxQoAX0/05+QWtsq1U/Xzac07axDhQQGC9q18gYgaw0jNt5dYspj3+99/nrdKdU7TF"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=zQPiKzJYcjAsBztmAzTzZKjmhikrPP1FhsCc9Y4XEYQ=; b=KcBMWi0jhNE9gTjkQ9guHZiSk5HQo9GcNOgK5D/h7H54qLKCahRAMfSDAFnEZOj5ho y6fXpP6iHIKc8Ruxnn3IkllOukxNtGsY9AJq1+3Tfc/8ZwbY8l7BUxxdWIQWyggy3r2z oMTNkm5qkmTHBwq9upt6rgnebI5QHKKCcB/5qZiheSiJc4kE/Js1vKU8I96V8rTZfsBr a/WweYltzx/P45QR0+D9yA0J2Tf+jB6H5Brk4+q5SzJWU0tm9sV8onldJz8YRgxf9hDm GM73oRNfkTdujeABWF7kkoKpWqMr9aXuQsAtKGwp+ksOKbQ0jy74qWJI+ussZ0AX0Iag 0S2Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=oc+AUO5q; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410752@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410752@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=zQPiKzJYcjAsBztmAzTzZKjmhikrPP1FhsCc9Y4XEYQ=; b=qe5nzMVRaE13LYObIT7V2ouSsnMR5d5QqQYjYMrMqMj7rrAiy+eGxLRxdU6OSkxZqG CIYSr7pVq31aq3QmG5ktFOr67soMcmD5upR5ZClxeMC1vD/ygyuYeqvJJ/et/KVD7WBU 38h71z/zN03txGevHmwK0dAKPh8kPdTfVaNgkq41ONH4uzK1SyGnJXCNJQ8DBdfD9Lel sTp5oytlXNiHHsg4xaA9IpYp68LFciCWnbSiUw8leHGznH/z202vWjSWhxWyaQPIloGx qs5QsF5q+R9Y9KWx1Ptdp40Bb1ljDgej/G/B/rn+HGl6vuvrR8O9jDJzXwxG7ZDyO9F1 C+8A=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=oc+AUO5q; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410752@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410752@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<388009b0-7fc7-4f6e-0c69-44df38413551@postgrespro.ru>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 11:48:32+00	dilipbalaut@gmail.com	Re: making relfilenodes 56 bits	<CAFiTN-ttOXLX75k_WzRo9ar=VvxFhrHi+rJxns997F+yvkm==A@mail.gmail.com>	[{"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Heikki Linnakangas", "Address": "hlinnaka@iki.fi"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	71	201289	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v9-0001-Convert-buf_internal.h-macros-to-static-inline-fu.patch", "content_id": "f_l5kyvhna0", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "3", "file_name": "v9-0002-Preliminary-refactoring-for-supporting-larger-rel.patch", "content_id": "f_l5kyvhnu1", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "4", "file_name": "v9-0003-Remove-the-restriction-that-the-relmap-must-be-51.patch", "content_id": "f_l5kyvhnx2", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "UTF-8", "part_id": "5", "file_name": "v9-0004-Widen-relfilenumber-from-32-bits-to-56-bits.patch", "content_id": "f_l5kyvhnz3", "disposition": "attachment", "content_type": "text/x-patch"}]		On Wed, Jul 13, 2022 at 9:35 AM Dilip Kumar <dilipbalaut@gmail.com> wrote:\r\n>\r\n> On Tue, Jul 12, 2022 at 7:21 PM Robert Haas <robertmhaas@gmail.com> wrote:\r\n> >\r\n>\r\n> > In this version, I also removed the struct padding, changed the limit\r\n> > on the number of entries to a nice round 64, and made some comment\r\n> > updates. I considered trying to go further and actually make the file\r\n> > variable-size, so that we never again need to worry about the limit on\r\n> > the number of entries, but I don't actually think that's a good idea.\r\n> > It would require substantially more changes to the code in this file,\r\n> > and that means there's more risk of introducing bugs, and I don't see\r\n> > that there's much value anyway, because if we ever do hit the current\r\n> > limit, we can just raise the limit.\r\n> >\r\n> > If we were going to split up durable_rename(), the only intelligible\r\n> > split I can see would be to have a second version of the function, or\r\n> > a flag to the existing function, that caters to the situation where\r\n> > the old file is already known to have been fsync()'d.\r\n>\r\n> The patch looks good except one minor comment\r\n>\r\n> + * corruption.  Since the file might be more tha none standard-size disk\r\n> + * sector in size, we cannot rely on overwrite-in-place. Instead, we generate\r\n>\r\n> typo "more tha none" -> "more than one"\r\n>\r\nI have fixed this and included this change in the new patch series.\r\n\r\nApart from this I have fixed all the pending issues that includes\r\n\r\n- Change existing macros to inline functions done in 0001.\r\n- Change pg_class index from (tbspc, relfilenode) to relfilenode and\r\nalso change RelidByRelfilenumber().  In RelidByRelfilenumber I have\r\nchanged the hash to maintain based on just the relfilenumber but we\r\nstill need to pass the tablespace to identify whether it is a shared\r\nrelation or not.  If we want we can make it bool but I don't think\r\nthat is really needed here.\r\n- Changed logic of GetNewRelFileNumber() based on what Robert\r\ndescribed, and instead of tracking the pending logged relnumbercount\r\nnow I am tracking last loggedRelNumber, which help little bit in\r\nSetNextRelFileNumber in making code cleaner, but otherwise it doesn't\r\nmake much difference.\r\n- Some new asserts in buf_internal inline function to validate value\r\nof computed/input relfilenumber.\r\n\r\n-- \r\nRegards,\r\nDilip Kumar\r\nEnterpriseDB: http://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Dilip Kumar", "Address": "dilipbalaut@gmail.com"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Heikki Linnakangas <hlinnaka@iki.fi>, Thomas Munro <thomas.munro@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Robert Haas <robertmhaas@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:18:32 +0530"], "From": ["Dilip Kumar <dilipbalaut@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: making relfilenodes 56 bits"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657799348; cv=none; d=google.com; s=arc-20160816; b=kpN6SEtdJKda1KPgVmdXaUQOwNox7gpnl5w/75kYSha17/VEB3oL+kOTFyrDy3NMXC uLZAGEH6M0ewjeSSLG14oJ3xlh6OR3oH1Ue2ZIaq/kXohpKh+JJqRqaLC/v203maw7n9 3g/VI34jdV0bu8QOZQVEjcrwHr+zir0IwoP5vfEIdU8WC4Rosj8lxcISQpSe8NBctnvv A7sy1BQUpPokZ5zuuv5FLvWsrlnAnLc6n+NzoRebgLZmNTedVZ3KOV48YDGpL13XOZj1 qFwHRB/oWyHMJxlKtCVQkUfsN0xu6W/PaMlseePFe6WoTyDxMIVwx5IyPL9O+F28ZIZr hqiQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp111147jai; Thu, 14 Jul 2022 04:49:09 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id id11-20020a05600ca18b00b003a2e383cf7bsi1556378wmb.220.2022.07.14.04.49.08 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 04:49:08 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410751@lists.postgresql.org>) id 1oBxLA-0000Dd-Fz for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 11:49:08 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBxL3-0006Xn-D8 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 11:49:02 +0000", "from mail-lj1-x22d.google.com ([2a00:1450:4864:20::22d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBxKv-0000L6-AG for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 11:49:00 +0000", "by mail-lj1-x22d.google.com with SMTP id w2so1855369ljj.7 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 04:48:53 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFiTN-ttOXLX75k_WzRo9ar=VvxFhrHi+rJxns997F+yvkm==A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CA+TgmoZfxMRfWW7X16TGWh1Q8taRtCb3hRTwWqY-4_XiQCYYKw@mail.gmail.com> <CAFiTN-vTe79M8uDH1yprOU64MNFE+R3ODRuA+JWf27JbhY4hJw@mail.gmail.com> <CA+TgmoZyKktnjNjpa_6wHfhNRaZfYS4Nfu--t8k5JgKkTR8paw@mail.gmail.com> <CA+TgmoZTJsbJXoXWceQkaHdxjFz23BL=+xZiD64FgqVAQ77jPQ@mail.gmail.com> <CAFiTN-s5ehHu2N9vuZcwg+NOENvf3v0FMXQQZq1faGjReP7mtw@mail.gmail.com> <CA+TgmoZq5=LWDK7kHaUbmWXxcaTuw_QwafgG9dr-BaPym_U8WQ@mail.gmail.com> <20220711185736.zc3ht4n56ceqmh6d@awork3.anarazel.de> <CA+TgmobwFU-D_cWAqUooUGaQrC91B5QOW79HF=n-1=ApmFh9=Q@mail.gmail.com> <20220711193429.g45fzlf7gs6rjuon@awork3.anarazel.de> <CA+TgmoacMgLv_0edhN=oWjnUvJyFjXww4Q4re4kfm+qkSBtjaQ@mail.gmail.com> <20220711232157.o3w7kfd4zoswpe37@awork3.anarazel.de> <CA+TgmoZhAAD+92KM6M73Rnpi_3YcCosMY=_ff-Eqhix3uzuSYA@mail.gmail.com> <CAFiTN-s3E16MCR72sWVogrZ1B5_8p1eqK1fbWRYmLXV9LxYY6A@mail.gmail.com>"], "X-Received": ["by 2002:a5d:4602:0:b0:21d:6784:cdcb with SMTP id t2-20020a5d4602000000b0021d6784cdcbmr7754104wrq.470.1657799348990; Thu, 14 Jul 2022 04:49:08 -0700 (PDT)", "by 2002:a05:651c:2111:b0:25d:6b28:3c96 with SMTP id a17-20020a05651c211100b0025d6b283c96mr4468439ljq.39.1657799331407; Thu, 14 Jul 2022 04:48:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFiTN-ttOXLX75k_WzRo9ar%3DVvxFhrHi%2BrJxns997F%2Byvkm%3D%3DA%40mail.gmail.com>"], "In-Reply-To": ["<CAFiTN-s3E16MCR72sWVogrZ1B5_8p1eqK1fbWRYmLXV9LxYY6A@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410751@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"00000000000042054505e3c27c61\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410751@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=CTgNVsIWN+INp1xOSbh6dl1N5BaaJ4X8ugoYqO37VBk=; b=iP+00vjaSJIywKEH9HwcDfVxELrhENJhTmI0Yl3rYsbnNU1rLVuaYrckCKun8p3FGN yC/poWAwZg2da9Lg+QFUhQF91f1QkbSzhVeS5diOcQnI0oVTZqNV6yiNyDQ2u3I0ygmb m/dg2ZSaSWFNYSpWngQ2Aou+4BV+fj02AQP9getOZZgMwgwefOy7pv7zdoXryfRaIQ8o o7IhuYYAXefisrEh0Rs80aJH/wlEPhe2T7gb2ca/5e7OSOsAwX8lcxv5Oox2WV2vfnrz HNHvY5vv06BncmB94k0KBqSaAKBexzlNAJ9N7mhlf3onygC7ZBcBF8sfokf3pEkJmi7j 3/EQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+lx2YUXTMUZ8cDB7Y0TGNyPVvfliBJEJe7uA7raw+d4Od37Xl6 FlD2j2z0OeYSE9tb/bVHpcHZxto/M5QJRI+qpJ4MzEaPdw+5Wg=="], "X-Google-Smtp-Source": ["AGRyM1s1s71Z5V+1v3ouiQbd9oYCIqH2Ep3Tz/MoKZFS1p8rbD11EKZMyapPg6LyZ7QZ9e8oW/TG"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=CTgNVsIWN+INp1xOSbh6dl1N5BaaJ4X8ugoYqO37VBk=; b=t8a0u7jbLzBP9UgGxBi0tVN7KlObt1WqAleECwKidGc+/Er356sbosyI6aA7qdO8kD zZgGEWRfeZsmtB29X0F9ctGuZ+yThzXKsH2XMFXidwxS8WeM5zlTXWVvP7UP+Lm/5ras xbLeKkE5/tZcLIHIYG746+KrJhOpSuR5aDPyC3oTu1NorUxxc0ISU/KhHLH5adAWThHh mylz70Yx9XfzGmSh/dwnFX5IsZC02MkRqzBebJPSoH/xwMeL7Bo0nVKxwY2pdCdIZDAd tkHDHV5+IWyWBBmliNHBFyc8bvsHCWMvGlotQQsAhYbR1DIX5ghY3M2d2FPp3uCy/me2 QXeg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iP+00vja; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410751@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410751@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=CTgNVsIWN+INp1xOSbh6dl1N5BaaJ4X8ugoYqO37VBk=; b=sNxtOTCaag9mvGrW1385RazgoNPh9D/GNOpiK3dv1WJx6/M0+Ka/JJ2GH3OhFLBOjs XxUHyk2PiCWd8pZxDVggUABlS6BY1PJajvj7PdLbDb4DlOFUTKjVixINBCg1OOz4A9tk MQD8aV+yaFHQxrvRCqMLcYuo9Rihlt5K1r3eYBxRYLrHBLIrwKAvPKZ5hARVcxmTFfyf osL9dLbUTokEyQo7UXO+7KjDIyzyS4icceZA8oPoiGb/W0soHPXn4D89BeGIX1O8SIPk FTZXIFkWTfMSf8b5YKCZPc9oAbqkcV2aRgsZxGmrmEdi34TNqmIliomjUCwLjXOMNYAI ubXQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iP+00vja; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410751@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410751@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAFiTN-s3E16MCR72sWVogrZ1B5_8p1eqK1fbWRYmLXV9LxYY6A@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 12:11:15+00	thomas.munro@gmail.com	Re: Fix gcc warning in sync.c (usr/src/backend/storage/sync/sync.c)	<CA+hUKGKCkca1Yp3xey52xdFwWXnJRQM-=0kVwQE8iHE8eTvzJA@mail.gmail.com>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Ranier Vilela", "Address": "ranier.vf@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	73	8550	[]		On Mon, Jul 11, 2022 at 9:45 PM Kyotaro Horiguchi\r\n<horikyota.ntt@gmail.com> wrote:\r\n> At Mon, 11 Jul 2022 01:45:16 -0400, Tom Lane <tgl@sss.pgh.pa.us> wrote in\r\n> > Kyotaro Horiguchi <horikyota.ntt@gmail.com> writes:\r\n> > > At Sat, 9 Jul 2022 21:53:31 -0300, Ranier Vilela <ranier.vf@gmail.com> wrote in\r\n> > >> 528 |    entry = (PendingUnlinkEntry *) lfirst(cell);\r\n> >\r\n> > > Actually, I already see the following line (maybe) at the place instead.\r\n> > >> PendingUnlinkEntry *entry = (PendingUnlinkEntry *) lfirst(cell);\r\n> >\r\n> > Yeah, I see no line matching that in HEAD either.\r\n\r\nConfusing report :-)\r\n\r\n> > However, I do not much like the code at line 528, because its\r\n> > "PendingUnlinkEntry *entry" is masking an outer variable\r\n> > "PendingFsyncEntry *entry" from line 513.  We should rename\r\n> > one or both variables to avoid that masking.\r\n\r\nFair point.\r\n\r\n> I thought the same at the moment looking this.  In this case, changing\r\n> entry->syncent, unl(del)lent works. But at the same time I don't think\r\n> that can be strictly applied.\r\n\r\nYeah, let's rename both of them.  Done.\r\n\r\n> So, for starters, I compiled the whole tree with -Wshadow=local. and I\r\n> saw many warnings with it.  At a glance all of them are reasonably\r\n> "fixed" but I don't think it is what we want...\r\n\r\nWow, yeah.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Ranier Vilela <ranier.vf@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Fri, 15 Jul 2022 00:11:15 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Fix gcc warning in sync.c (usr/src/backend/storage/sync/sync.c)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657800722; cv=none; d=google.com; s=arc-20160816; b=E5SzTxKN5yvX5epk1fR0lZfp+vn6S/WqK8HmmN/vjdlsrT0hzmgRWP+cQqhP16q584 vRpmEwuAeMK1zlZn+e97BRg95P0lc4/M+ASt97RO3z89D1m45cYLWVvOVTqWgjykuqfI Tv+mBZ/sp7Q7bf3JomkhFtd0t7/U9UArL7VpJ1DQO8m0wiOYys3+t+2h2+snWJQYR7w7 gCRU+brtowdDJABSTMHC9jsUaK/W2ZnMqhBSZ4EkaIGfNeS93XgBnDkkvOGdZl4X307V Wd7Kb8wnqrfqYM+pbUyDCdiH8JJ0XboNvvJ8ErhBrLgzErFUEA0VghuYauaEsSgNxI4w MPrQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp115553jai; Thu, 14 Jul 2022 05:12:02 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id w1-20020a5d6081000000b0021d0e755186si1440794wrt.873.2022.07.14.05.12.02 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 05:12:02 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410767@lists.postgresql.org>) id 1oBxhK-00012o-DZ for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 12:12:02 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBxhF-0007o3-Jk for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 12:11:57 +0000", "from mail-io1-xd34.google.com ([2607:f8b0:4864:20::d34]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBxhB-0000WR-3h for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 12:11:56 +0000", "by mail-io1-xd34.google.com with SMTP id p81so1218365iod.2 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 05:11:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGKCkca1Yp3xey52xdFwWXnJRQM-=0kVwQE8iHE8eTvzJA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAEudQArDrFyQ15Am3rgWBunGBVZFDb90onTS8SRiFAWHeiLiFA@mail.gmail.com> <20220711.143500.1660612605708077512.horikyota.ntt@gmail.com> <946810.1657518316@sss.pgh.pa.us> <20220711.184507.1003785783441202992.horikyota.ntt@gmail.com>"], "X-Received": ["by 2002:a05:600c:3b1d:b0:3a2:60a1:fe30 with SMTP id m29-20020a05600c3b1d00b003a260a1fe30mr8929738wms.193.1657800722814; Thu, 14 Jul 2022 05:12:02 -0700 (PDT)", "by 2002:a05:6602:150c:b0:67b:a137:eaac with SMTP id g12-20020a056602150c00b0067ba137eaacmr4044027iow.86.1657800712297; Thu, 14 Jul 2022 05:11:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGKCkca1Yp3xey52xdFwWXnJRQM-%3D0kVwQE8iHE8eTvzJA%40mail.gmail.com>"], "In-Reply-To": ["<20220711.184507.1003785783441202992.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410767@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410767@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=2cb6WAiUtIstcAcGq0NozLARNLj0DNMrxiGSx+78DWM=; b=mJp8eWT+ReFqsAn5OixQGyFWqIstpCuCN9D+8u039xpS09kDG7SrRHQYRJXvhm/KM+ sXOC/oLKix6tfCQI+95y8mDmnN2ROoHVbvJyX8nKMtGlVO7PL1liS5fx5yZfVCJPauRx r1HdiIdL9f+1xdnwMh6cbnicFvAQnw0TIMlnTsGK+FhipDRKS8E3+wtCJZvAj3WJW86z zjrgSN6beXCI5cQbNbkN/lBC+SIr4rTWMsXtCfQMgxBR0iV6atGVkTou6mHj/fd9c28n UUS+x++l8Gh8aYhi0cuv3Nt2CpwKAFDtK0iprRKSRzE5ttyJTYrF/KFpVmphY8DHohwj uYhQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/hIUGZFmcn5RAPVgFexYoEBNcU/BuuDUVP3sR9MyotsL4JELJ4 GeZAvShQFLdLJquhlaAuqdRzJSqXbGWIWLF7ojA="], "X-Google-Smtp-Source": ["AGRyM1su2IxW2YJ0+jWSQxY2dfwgZpFfy8Nk+OzmHglX4i8LOwRIxr+Dx64+3wk3pFDIjnBjoM7g"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=2cb6WAiUtIstcAcGq0NozLARNLj0DNMrxiGSx+78DWM=; b=A1zaPkrwuKZWivCGvVQdwxLJd8jKtAM81zt+d7AO7JmfwNCC12jFhzPctFw3TtKvap r+TEC7deSXwCzGdVmSDwUGA2i8/2FV9UX7Qq+yT65tfOO4HEYZIRnyjan59V8JBPruFC Gmbk3Ze8IGmZ0oPCDWRHZ3SL5vfmI+4dle2o+P5q9InRTFT2TlgS+/yAxzd33beWPY/N XlPLXITt/YYgxbwJoMbus0HOK9uUnkDc4YqLCCa6W9JSNNGu6jhkgUEkTqgiARzDC2eY AmFjMkxZWEpyCpr9OB8XzUni5zta+ytUoM+JhGb5Lpau6BzbAui23Rf0wUZUqM3kxWDx 5fVA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=mJp8eWT+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410767@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410767@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=2cb6WAiUtIstcAcGq0NozLARNLj0DNMrxiGSx+78DWM=; b=kMulTWGv23oP1K78GjaGrc6QtQ8rHJxOFPw8Fej3TUVvyI658HWvd01dOwzgQSawBs knRFKQALc4gtgkgpmjNbEsmmsyp3zVlc/kd1MS0MHslDigMR9RJyEfpRxJyPZyuCgCvE A8bhfh0HUR0oO41OCpA92MFYQbZX9H4VfhRw8zG4JFkFsgBbfJdMGYk+S7X71NcnprAO hRcL3Ugl/qXBfHGZ1HGC6pX3KwZnkpA24yQHw+hgA0ZhwL7SGJ6IaqzNxBHL5lbw8BKU XWxw7VgcFtP58Rs9BpbbXEufo3lEyxRFjxNWWuEe9VJvRftNz8ieuv9pD8FHzRKCxCUT 7c/g=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=mJp8eWT+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410767@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410767@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220711.184507.1003785783441202992.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 12:15:22+00	thomas.munro@gmail.com	Re: EINTR in ftruncate()	<CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	74	8177	[]		On Tue, Jul 12, 2022 at 5:45 AM Andres Freund <andres@anarazel.de> wrote:\r\n> Hm - given that we've observed ftruncate failing with strace, and that\r\n> stracing to find problems isn't insane, shouldn't we retry the ftruncate too?\r\n> It's kind of obsoleted by your next patch, but not really, because it's not\r\n> unconceivable that other OSs behave similarly? And IIUC you're planning to not\r\n> backpatch 0002?\r\n\r\nYeah.  Done, and pushed.  0002 not back-patched.\r\n\r\n> > +     pgstat_report_wait_start(WAIT_EVENT_DSM_FILL_ZERO_WRITE);\r\n>\r\n> (not new in this patch, just moved around) - FILL_ZERO_WRITE is imo an odd\r\n> description of what's happening... In my understanding this isn't doing any\r\n> writing, just allocating. But whatever...\r\n\r\nTrue.  Fixed in master.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 00:15:22 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657800971; cv=none; d=google.com; s=arc-20160816; b=j3qHURAP+9k3Yx26cbOLOBOwsvr6nSJxfSpPo6iHhEs+FYxc9U87fVaMaIkvKt9gEK ZGJv6D3u1w48HuSk5GgYDEtyAwmS+2flOXn7le1qa2JR4l6JoGT7FOObeNd2XGf3wpSM KmzfcrOZmbQEURsGz8eYBikQIIk7/zNLKjUEVvlR+l/h8Tv4OwGPeVLYrFK6j9/qKsro PZLeguTNoJszzyJeBqZUJs9zPh6RZBn4hC++0tKqxnq0XDJ6gS2443r3tG/1w6okTyMA cKyRTNr6cDg9lyhD5dTwBLM7Vdpxha0v4hXxS+W3NytLA8uvklAkEcv5PY+DYk7p6eig 5coQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp116746jai; Thu, 14 Jul 2022 05:16:12 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b8-20020a5d5508000000b0021bb3cd0a18si1403124wrv.135.2022.07.14.05.16.11 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 05:16:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410768@lists.postgresql.org>) id 1oBxlL-00089K-G2 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 12:16:11 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBxlG-0006Wp-P7 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 12:16:06 +0000", "from mail-io1-xd29.google.com ([2607:f8b0:4864:20::d29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBxlA-0002fZ-GG for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 12:16:06 +0000", "by mail-io1-xd29.google.com with SMTP id b17so1219647iof.4 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 05:16:00 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220706002015.57q6dvife3c3fjxz@awork3.anarazel.de> <20220706192941.av3nxh4sdozyn5qz@alvherre.pgsql> <20220706203859.qbem3yjlvx2xbegc@alap3.anarazel.de> <CA+hUKGKS2Radu-1Ewhe1-LEj19C-3XAQ7wnkQMb4e9E9q9ZXSg@mail.gmail.com> <20220706210323.bjjzokyj6nzvofm3@alap3.anarazel.de> <CA+hUKGJj=+GVjtLaeT7sD1gnS6tn=4Lb5+iACf4RT7wBuguLZg@mail.gmail.com> <CA+hUKGJSm-nq8s+_59zb7NbFQF-OS=xTnTAiGLrQpuSmU2y_1A@mail.gmail.com> <20220711174518.yldckniicknsxgzl@awork3.anarazel.de>"], "X-Received": ["by 2002:a05:600c:1d8d:b0:3a2:dfd9:f275 with SMTP id p13-20020a05600c1d8d00b003a2dfd9f275mr9000179wms.87.1657800971910; Thu, 14 Jul 2022 05:16:11 -0700 (PDT)", "by 2002:a6b:5d08:0:b0:67b:cfc3:6265 with SMTP id r8-20020a6b5d08000000b0067bcfc36265mr1706537iob.142.1657800958850; Thu, 14 Jul 2022 05:15:58 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGKfH8kfF_SUqAxxxOTX%3DEvwdgJx61d89Hj--mKnhOjGEQ%40mail.gmail.com>"], "In-Reply-To": ["<20220711174518.yldckniicknsxgzl@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410768@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410768@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=2h0RHq9BqDFO5zEeF9gzURdEwKZMq5RXwgdTFyY4IPE=; b=ZB6Urkh9F01Wb9xr0phRlcNE2Mcgr66lpyS1ej57tmnL9NHwrgsekhNNyQ49ZG8Onx 4DdXF5InAfJuTn1ZvJ3Z0QO0OK0NjHmK6iDTBxGFr6XC979elmI1JGEYUJjSr+x9AnNm 3QyEnF7G0jutanY1xx1tEdjlSHCiA0RlBRk5dAKSCNN/PPwb4hrUKBY7xX+SbqM0+Yot QHr4ylUoCdbr0DjT6ZizhQvV7/09fj/UepeF5IY9DeswGqvrcZw7wpEJSNjYdLCj87x+ FQmgQA3ko8pcoE0N68l+y9J/ljsawdRwSIEM+IvDmIXrBF6vIuKG8OttTJ/U+NN2EsCq oxrQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/+0pcO+o026L8ER6bkY74B0SQS4vfYo/SF+7Y73NJylU57fkFM 5L7kAMf6iC8NEmUdMd0DKMvNrz4MBIhaDlsMNUA="], "X-Google-Smtp-Source": ["AGRyM1sJfCuS5RokW3F4pbaaPFSj4DxEwp6EikYzfBAakbYLTqS9iZw12gGqL+Fv2ukcKt/D22RO"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=2h0RHq9BqDFO5zEeF9gzURdEwKZMq5RXwgdTFyY4IPE=; b=auWMvIuJQ/1MHS8BZIhpDJK2+KlbmJwylRrrDpmmYG222rO4B1A3+PzSbdXtRSR4Cs Yd85BW2yAqlHo3BZVdzhsfwwkTeQicl1lgBCCzQtEHGL3rqpz8i5d5Z+CTlX3BDF5Juo 5rd3GlkPuEPtWWQpN8q3kxtbBCNLJaCb0JgEm5JFLrcq39r8tWvQdpDO/hwfwO9yhJgv AxHQ6h46nRPgF1M48OPLoLn2BOJNXCSAcy2qCA/Hj3tPVmXPPXeP2b86Xq1SWYugvq1t ZGgFd/Djl3CUUMWn3sdteoIGOtTB3zSofsqz9OubLxLmgxuG2LuZE0Z04VjG38fEZkHU LhtA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ZB6Urkh9; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410768@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410768@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=2h0RHq9BqDFO5zEeF9gzURdEwKZMq5RXwgdTFyY4IPE=; b=a/2mWV/ve6pRDxgTqFZfClpj9qezcvXB3EA7Ird5T4BcQd2Fe9QczOdpoAV2goyxRS 1KCqQc+upZ8HJZCvuGX5N7PjxAzyJ0l9h9iBKw1a4RkJv6Iz5gj22UCXevjxeqYSt+Gf 5I3fZ8J5WewBJVUQeQkPF3Pk4WPYKC/KH7BR9qTwsANzS6pSToEgGCB5cg7M5PzkeRvh qoFKLMriTLULSAeXxO50RqJ/CC0reURALJVTkJueI6rivBBkGQZ40p8mWDuOP2LQNQTL /gXqV9efu28Zr9yT+tIH3732U5muOXSAZ0veoAfTipbRRKH8yXJIcDP6sejMrTXTrf0D kVXg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ZB6Urkh9; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410768@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410768@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220711174518.yldckniicknsxgzl@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 12:45:29+00	geidav.pg@gmail.com	Re: Lazy JIT IR code generation to increase JIT speed with partitions	<CAPsAnrkpCKNeU17T6Ez98m2or8+nVS3ZmC+HxsbCKS0pVycVAg@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Luc Vlaming", "Address": "luc@swarm64.com"}, {"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	75	18440	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:monospace"><span style="font-family:Arial,Helvetica,sans-serif">On Mon, Jul 4, 2022 at 10:32 PM Andres Freund &lt;</span><a href="mailto:andres@anarazel.de" target="_blank" style="font-family:Arial,Helvetica,sans-serif">andres@anarazel.de</a><span style="font-family:Arial,Helvetica,sans-serif">&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Hi,<br>\r\n<br>\r\nOn 2022-06-27 16:55:55 +0200, David Geier wrote:<br>\r\n&gt; Indeed, the total JIT time increases the more modules are used. The reason<br>\r\n&gt; for this to happen is that the inlining pass loads and deserializes all to<br>\r\n&gt; be inlined modules (.bc files) from disk prior to inlining them via<br>\r\n&gt; llvm::IRMover. There&#39;s already a cache for such modules in the code, but it<br>\r\n&gt; is currently unused. This is because llvm::IRMover takes the module to be<br>\r\n&gt; inlined as std::unique_ptr&lt;llvm::Module&gt;. The by-value argument requires<br>\r\n&gt; the source module to be moved, which means it cannot be reused afterwards.<br>\r\n&gt; The code is accounting for that by erasing the module from the cache after<br>\r\n&gt; inlining it, which in turns requires reloading the module next time a<br>\r\n&gt; reference to it is encountered.<br>\r\n&gt;<br>\r\n&gt; Instead of each time loading and deserializing all to be inlined modules<br>\r\n&gt; from disk, they can reside in the cache and instead be cloned via<br>\r\n&gt; llvm::CloneModule() before they get inlined. Key to calling<br>\r\n&gt; llvm::CloneModule() is fully deserializing the module upfront, instead of<br>\r\n&gt; loading the module lazily. That is why I changed the call from<br>\r\n&gt; LLVMGetBitcodeModuleInContext2() (which lazily loads the module via<br>\r\n&gt; llvm::getOwningLazyBitcodeModule()) to LLVMParseBitCodeInContext2() (which<br>\r\n&gt; fully loads the module via llvm::parseBitcodeFile()). Beyond that it seems<br>\r\n&gt; like that prior to LLVM 13, cloning modules could fail with an assertion<br>\r\n&gt; (not sure though if that would cause problems in a release build without<br>\r\n&gt; assertions). Andres reported this problem back in the days here [1]. In the<br>\r\n&gt; meanwhile the issue got discussed in [2] and finally fixed for LLVM 13, see<br>\r\n&gt; [3].<br>\r\n<br>\r\nUnfortunately that doesn&#39;t work right now - that&#39;s where I had started. The<br>\r\nproblem is that IRMover renames types. Which, in the case of cloned modules<br>\r\nunfortunately means that types used cloned modules are also renamed in the<br>\r\n&quot;origin&quot; module. Which then causes problems down the line, because parts of<br>\r\nthe LLVM code match types by type names.<br>\r\n<br>\r\nThat can then have the effect of drastically decreasing code generation<br>\r\nquality over time, because e.g. inlining never manages to find signatures<br>\r\ncompatible.<br>\r\n<br></blockquote><div><span class="gmail_default" style="font-family:monospace">Looking at the LLVM patches these issues seem to be gone.</span></div><div><span class="gmail_default" style="font-family:monospace">The same suggests dumping the bitcode and running all tests with JIT force-enabled.</span></div><div><span class="gmail_default" style="font-family:monospace">See below.</span></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; However, curiously the time spent on optimizing is also reduced (95ms<br>\r\n&gt; instead of 164ms). Could this be because some of the applied optimizations<br>\r\n&gt; are ending up in the cached module?<br>\r\n<br>\r\nI suspect it&#39;s more that optimization stops being able to do a lot, due to the<br>\r\ntype renamign issue.<br>\r\n<br>\r\n<br>\r\n&gt; @Andres: could you provide me with the queries that caused the assertion<br>\r\n&gt; failure in LLVM?<br>\r\n<br>\r\nI don&#39;t think I have the concrete query. What I tend to do is to run the whole<br>\r\nregression tests with forced JITing. I&#39;m fairly certain this triggered the bug<br>\r\nat the time.<br>\r\n<br>\r\n<br>\r\n&gt; Have you ever observed a segfault with a non-assert-enabled build?<br>\r\n<br>\r\nI think I observed bogus code generation that then could lead to segfaults or<br>\r\nsuch.<br></blockquote><div><span class="gmail_default" style="font-family:monospace">OK, then using a non-assert-enabled LLVM build seems good enough. Especially, given the fixes they merged in [3].</span>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n<br>\r\n&gt; I just want to make sure this is truly fixed in LLVM 13. Running &#39;make<br>\r\n&gt; check-world&#39; all tests passed.<br>\r\n<br>\r\nWith jit-ing forced for everything?<br>\r\n<br>\r\nOne more thing to try is to jit-compile twice and ensure the code is the<br>\r\nsame. It certainly wasn&#39;t in the past due to the above issue.<br>\r\n<br></blockquote><div><span class="gmail_default" style="font-family:monospace">Yes, with jitting force-enabled everything passes (I removed all checks for the various &#39;jit_above&#39; costs from planner.c).</span></div><div><span class="gmail_default" style="font-family:monospace"><br></span></div><div><span class="gmail_default" style="font-family:monospace"></span></div><div><span class="gmail_default" style="font-family:monospace">I also dumped the bitcode via &#39;SET jit_dump_bitcode = ON&#39; and compared the bitcode output after inlining and after optimization for two successive executions of the very same query. The .bc files after inlining only differ¬†in two bytes. The .bc files after optimization differ in a lot more bytes. However, the same is true for the master branch. How do you exactly conclude the identity of compilation output?</span></div><div><span class="gmail_default" style="font-family:monospace"><br></span></div><div><span class="gmail_default" style="font-family:monospace">--</span></div><div><span class="gmail_default" style="font-family:monospace">David Geier<br>(ServiceNow)</span></div></div></div>\r\n	On Mon, Jul 4, 2022 at 10:32 PM Andres Freund <andres@anarazel.de> wrote:\r\n\r\n> Hi,\r\n>\r\n> On 2022-06-27 16:55:55 +0200, David Geier wrote:\r\n> > Indeed, the total JIT time increases the more modules are used. The\r\n> reason\r\n> > for this to happen is that the inlining pass loads and deserializes all\r\n> to\r\n> > be inlined modules (.bc files) from disk prior to inlining them via\r\n> > llvm::IRMover. There's already a cache for such modules in the code, but\r\n> it\r\n> > is currently unused. This is because llvm::IRMover takes the module to be\r\n> > inlined as std::unique_ptr<llvm::Module>. The by-value argument requires\r\n> > the source module to be moved, which means it cannot be reused\r\n> afterwards.\r\n> > The code is accounting for that by erasing the module from the cache\r\n> after\r\n> > inlining it, which in turns requires reloading the module next time a\r\n> > reference to it is encountered.\r\n> >\r\n> > Instead of each time loading and deserializing all to be inlined modules\r\n> > from disk, they can reside in the cache and instead be cloned via\r\n> > llvm::CloneModule() before they get inlined. Key to calling\r\n> > llvm::CloneModule() is fully deserializing the module upfront, instead of\r\n> > loading the module lazily. That is why I changed the call from\r\n> > LLVMGetBitcodeModuleInContext2() (which lazily loads the module via\r\n> > llvm::getOwningLazyBitcodeModule()) to LLVMParseBitCodeInContext2()\r\n> (which\r\n> > fully loads the module via llvm::parseBitcodeFile()). Beyond that it\r\n> seems\r\n> > like that prior to LLVM 13, cloning modules could fail with an assertion\r\n> > (not sure though if that would cause problems in a release build without\r\n> > assertions). Andres reported this problem back in the days here [1]. In\r\n> the\r\n> > meanwhile the issue got discussed in [2] and finally fixed for LLVM 13,\r\n> see\r\n> > [3].\r\n>\r\n> Unfortunately that doesn't work right now - that's where I had started. The\r\n> problem is that IRMover renames types. Which, in the case of cloned modules\r\n> unfortunately means that types used cloned modules are also renamed in the\r\n> "origin" module. Which then causes problems down the line, because parts of\r\n> the LLVM code match types by type names.\r\n>\r\n> That can then have the effect of drastically decreasing code generation\r\n> quality over time, because e.g. inlining never manages to find signatures\r\n> compatible.\r\n>\r\n> Looking at the LLVM patches these issues seem to be gone.\r\nThe same suggests dumping the bitcode and running all tests with JIT\r\nforce-enabled.\r\nSee below.\r\n\r\n>\r\n> > However, curiously the time spent on optimizing is also reduced (95ms\r\n> > instead of 164ms). Could this be because some of the applied\r\n> optimizations\r\n> > are ending up in the cached module?\r\n>\r\n> I suspect it's more that optimization stops being able to do a lot, due to\r\n> the\r\n> type renamign issue.\r\n>\r\n>\r\n> > @Andres: could you provide me with the queries that caused the assertion\r\n> > failure in LLVM?\r\n>\r\n> I don't think I have the concrete query. What I tend to do is to run the\r\n> whole\r\n> regression tests with forced JITing. I'm fairly certain this triggered the\r\n> bug\r\n> at the time.\r\n>\r\n>\r\n> > Have you ever observed a segfault with a non-assert-enabled build?\r\n>\r\n> I think I observed bogus code generation that then could lead to segfaults\r\n> or\r\n> such.\r\n>\r\nOK, then using a non-assert-enabled LLVM build seems good enough.\r\nEspecially, given the fixes they merged in [3].\r\n\r\n>\r\n>\r\n> > I just want to make sure this is truly fixed in LLVM 13. Running 'make\r\n> > check-world' all tests passed.\r\n>\r\n> With jit-ing forced for everything?\r\n>\r\n> One more thing to try is to jit-compile twice and ensure the code is the\r\n> same. It certainly wasn't in the past due to the above issue.\r\n>\r\n> Yes, with jitting force-enabled everything passes (I removed all checks\r\nfor the various 'jit_above' costs from planner.c).\r\n\r\nI also dumped the bitcode via 'SET jit_dump_bitcode = ON' and compared the\r\nbitcode output after inlining and after optimization for two successive\r\nexecutions of the very same query. The .bc files after inlining only\r\ndiffer in two bytes. The .bc files after optimization differ in a lot more\r\nbytes. However, the same is true for the master branch. How do you exactly\r\nconclude the identity of compilation output?\r\n\r\n--\r\nDavid Geier\r\n(ServiceNow)\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Geier", "Address": "geidav.pg@gmail.com"}]	{"Cc": ["Luc Vlaming <luc@swarm64.com>, PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Thu, 14 Jul 2022 14:45:29 +0200"], "From": ["David Geier <geidav.pg@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Lazy JIT IR code generation to increase JIT speed with partitions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657802751; cv=none; d=google.com; s=arc-20160816; b=BHGtOrXsSgV/CpYAqAzBtaM1Szb8oT0uDa1Kf1lgof7kORZl8KSUgKDtBP0kcYEmZA ZSSdchSRv3gfYrc2IOv8HXHbrycy6eYiOlH813DcEJYdnTlMWCs8OK3543SdsnOOeTn9 HUHo4bVSRfSqbrRc8OFjDN1z8hMnq+c45zooMP+TP+HRLRwE1obVTclPPZa85dYNBLVa QLUeZg1ZQHVApp5Jh16db7dLQLi9pq7aiGRZgp1pGJGXeHI8MB08pXy/SCJSbXqkUzGw 8qiSobEWHEYGimuPLuTzmKwH+OOVRoZrpTuhl2/m4k2GNcLjAcyELeLXMW+IzMGO0TJZ m/Tw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp127063jai; Thu, 14 Jul 2022 05:45:51 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q13-20020a67d78d000000b00357441c10aesi171514vsj.677.2022.07.14.05.45.50 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 05:45:51 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410790@lists.postgresql.org>) id 1oByE2-0000pj-2Z for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 12:45:50 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <geidav.pg@gmail.com>) id 1oByDx-0007kw-GG for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 12:45:45 +0000", "from mail-wr1-x432.google.com ([2a00:1450:4864:20::432]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <geidav.pg@gmail.com>) id 1oByDv-0002u5-30 for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 12:45:45 +0000", "by mail-wr1-x432.google.com with SMTP id r10so2425175wrv.4 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 05:45:42 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAPsAnrkpCKNeU17T6Ez98m2or8+nVS3ZmC+HxsbCKS0pVycVAg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<244ee08c-5e26-45d1-8d10-d7b4d16b08ae@swarm64.com> <20201230015757.2hlnyp5k2ww5hjyf@alap3.anarazel.de> <1240d601-f57c-429e-862a-862a8b3a5294@swarm64.com> <a38f0178-690c-28fc-6960-306475da17a6@swarm64.com> <33147b42-3386-6c71-cfca-1e997e6b73f5@swarm64.com> <1ee73e09-e3d8-22cf-3b0e-9a3f1ace0596@swarm64.com> <CAPsAnrkVBMSGb6uiYF_Y2XdmMtz-TwdqcYfet+8vR_ETDfDGNw@mail.gmail.com> <20220704203222.5my22fcsdqjr7ejj@awork3.anarazel.de>"], "X-Received": ["by 2002:a67:e0c1:0:b0:357:5179:c310 with SMTP id m1-20020a67e0c1000000b003575179c310mr3223799vsl.25.1657802751178; Thu, 14 Jul 2022 05:45:51 -0700 (PDT)", "by 2002:a5d:4283:0:b0:21d:7ae3:71a3 with SMTP id k3-20020a5d4283000000b0021d7ae371a3mr8062809wrq.233.1657802740927; Thu, 14 Jul 2022 05:45:40 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAPsAnrkpCKNeU17T6Ez98m2or8%2BnVS3ZmC%2BHxsbCKS0pVycVAg%40mail.gmail.com>"], "In-Reply-To": ["<20220704203222.5my22fcsdqjr7ejj@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410790@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"0000000000007b0f5f05e3c347af\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410790@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=UyKEKmnZPGNHuDjiF8ymlNb1iaGK0XtNwFAGlhulDvw=; b=Rg1vmTbTz12LikRp9UcX4rkoSy5RhEj3LqyeNrxP8pKz+ZRTI9nmhn0dF3L9ivdRl8 CC5NdQTFSzHM9PGRleLNdNwkEtYEjQyKk4M0l7gPFEvSLhYfOgCuWBdBn85eT/Z8+Fa+ STs7IZsycJTORWBvOMnpvoyQlGL6S+WvMqHbF5t39RuKXs+gm2EL8OxxFVLC7vk9dUWE PBuF5asrjMxeia3Zdc58zR+zFDkebfsqzqr3Gcvl78F1Y+ebLQizrCB78xLbWaBTg+1e GivfTt1PPO8HkCDMslIGHlJWyQVfn/x1mt2E6311J5LzNEGqMu5f9Xj2Sh5jiNU1Sywu V3nQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9k++JzXyTojHzPpDwly/Qhkm9+QqcJvLNsfkjf/tO1w5Ol7oS5 YiwW0v3EzK/2LAlu0h5snMqNsx41/ojy6DWh62I+wrL7"], "X-Google-Smtp-Source": ["AGRyM1uXpSCi8KmB4PUqidAhA6sfkT4epkpL+eYcTicqTQEAsTQSgS/v/zx7TFunf1+jgougt/tK"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=UyKEKmnZPGNHuDjiF8ymlNb1iaGK0XtNwFAGlhulDvw=; b=sgTBoU8w/852cnP22BPlRSrf9HfvfeP4khl47niB2yCpYeIpPJXaIfMtoeHC+hebWW GAlYjjlgAl13LuCQBAg42BUaq4Uhin/VefuTzc0sZt6mEmoPtm9FKtGz7Gujcm89nagH aRn79DTb/xC0ZsFg+zNZFaXOiJ06qpdgsENOnn1GczjajkQ+HRonYaMaQovwL2aiYi9U 7he1mO4RNAHUlWWHqd1F9b5EGupXLks3CMTD0azH+8R6XLZlYcTehPaJ+5VOpDvPZlRR yrRz2pFWI1+GRXZPKQE1FhT7qRQWUQs/C7xU6t0D31DFpTfVrWeY+6BkwANjPoQoReaw I8Hw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=Rg1vmTbT; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410790@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410790@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=UyKEKmnZPGNHuDjiF8ymlNb1iaGK0XtNwFAGlhulDvw=; b=Iu4uDoCApxs7AO/JLhwsyqdU9Qk0w6JHImAz5cULqEFsO++ESSB2Tao8aavExHuDGQ n5t2sL+Tm9VIScTUsyyxvnwcgiLb38PPARUPrd+r7lyfoGC0lVdXNaharXeh5amiSEDi WzpQgIhvs4TDrUvt8j3IA9hfKITJ6nak0DWnb/wP9TXReC2FTrtKQ/aq1X+cdR38u3uB zmzeoY5lA09J5tj4kqBRQ04eAeDe+yGapB3i1YeEMi8TM5BGQTvsOK/7ivA7X/kJ6NXd HzoL+9eIs35iI0ISFZB8EfP4X2mX391PoLCpUG5QqoCw4HZTAefI0PwcsOoAod+JAfWm 7Qkg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=Rg1vmTbT; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410790@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410790@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220704203222.5my22fcsdqjr7ejj@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 13:02:29+00	thomas.munro@gmail.com	Re: EINTR in ftruncate()	<CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	76	7925	[]		On Fri, Jul 15, 2022 at 12:15 AM Thomas Munro <thomas.munro@gmail.com> wrote:\r\n> Yeah.  Done, and pushed.  0002 not back-patched.\r\n\r\nHmm, there were a couple of hard to understand build farm failures.\r\nMy first thought is that the signal mask stuff should only be done if\r\nIsUnderPostmaster, otherwise it clobbers the postmaster's signal mask\r\nwhen reached from dsm_postmaster_startup().  Looking into that.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 01:02:29 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657803799; cv=none; d=google.com; s=arc-20160816; b=lgpi0yAA4A0tz8TomvDNBukdppxMn/WdKSOikd4rBr+S0L/Svq5sVqbemCDbZhk/Em uPKGVAlh6Tu9wQ0NnRCY++8KoO4bMBA19UsjOXD6c/J3vTpU2dbEAsJK3GdnxJFcjUq+ Zr/nakfjpSJiznaTsGg4LJb/bqUBpIrwhbQaOGB/vZjw6vFkvQipceX7Hl2Frk/xsTFZ 1g1JZiCH5/2nBCtcQgtMp0RQchtPY5tfkFLCXwTwkWZbBMYrZVr0HgNzDMsLVge6Jlrc idtgfZrxJx89Tb++pIOaSd4BMlhHWDRRpeSrGI9Gxlm8DzWWXd+ME6d/2hDgEQOPKs/S 5bpQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp132266jai; Thu, 14 Jul 2022 06:03:19 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l14-20020a5d6d8e000000b0021d928d243asi2056416wrs.933.2022.07.14.06.03.19 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 06:03:19 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410792@lists.postgresql.org>) id 1oByUx-0007sU-6L for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 13:03:19 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oByUs-0006JL-Ji for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:03:14 +0000", "from mail-io1-xd2f.google.com ([2607:f8b0:4864:20::d2f]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oByUm-00031j-Hy for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:03:14 +0000", "by mail-io1-xd2f.google.com with SMTP id z132so1351229iof.0 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 06:03:08 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220706002015.57q6dvife3c3fjxz@awork3.anarazel.de> <20220706192941.av3nxh4sdozyn5qz@alvherre.pgsql> <20220706203859.qbem3yjlvx2xbegc@alap3.anarazel.de> <CA+hUKGKS2Radu-1Ewhe1-LEj19C-3XAQ7wnkQMb4e9E9q9ZXSg@mail.gmail.com> <20220706210323.bjjzokyj6nzvofm3@alap3.anarazel.de> <CA+hUKGJj=+GVjtLaeT7sD1gnS6tn=4Lb5+iACf4RT7wBuguLZg@mail.gmail.com> <CA+hUKGJSm-nq8s+_59zb7NbFQF-OS=xTnTAiGLrQpuSmU2y_1A@mail.gmail.com> <20220711174518.yldckniicknsxgzl@awork3.anarazel.de> <CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com>"], "X-Received": ["by 2002:a1c:6a06:0:b0:3a0:5099:f849 with SMTP id f6-20020a1c6a06000000b003a05099f849mr14449711wmc.14.1657803799645; Thu, 14 Jul 2022 06:03:19 -0700 (PDT)", "by 2002:a05:6638:1910:b0:33e:ec0f:5dc0 with SMTP id p16-20020a056638191000b0033eec0f5dc0mr4934359jal.261.1657803786314; Thu, 14 Jul 2022 06:03:06 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGKNpK%3D2OMeea_AZwpLg7Bm4%3DgYWk7eDjZ5F6YbozfOf8w%40mail.gmail.com>"], "In-Reply-To": ["<CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410792@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410792@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=w+bpDWZDP9E4GZbv2Jsl1fglXzu4AA8GF1/x+4XrEJs=; b=im4BMgH7QMCEujEN0ielKe4U/rugHi24O3szymbIN9XilemVPoXnc+GmW1h3PTeGgq 9gc/pOwm8tU9X71SHMsGYQzAEx3RJxg/TJuv3qPtmBabJH0hreTCupPVB9lyDJYpLWja B1fPkCEwZsbqxHhJJslc9NxkByvmlgbKPySYMlxnc2YyrQHsKO2cq3F2LcXtmYbXKOlj HAabiXW70NynLUeX51jYiqp+5oOsR6dsvaii7Ho7tNidjs1UAlf+ftn/Tp8rq8X5NcGd SlBU173BFN8wCn4YMZ6/Kpr5kyEkzLiXU2fO6YlihpT0KPD2RvVVECeQem12VfCk32vS muug=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/LH3sT9mvuE3dvj0LxgJi23MLsYC/6us09l0o9jeunXNsrcqqR bDZ7sRTQhexusgpPzWmSrQSq528cCYR/QO19P+REcm/Yhz4t1dKJ"], "X-Google-Smtp-Source": ["AGRyM1ufI16G7JMbgtoToZmsmImFOkHAUCeyeWZhLo+/tp3VQzdri3Zk0NrTZgSjnpJrkn/DUNF5"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=w+bpDWZDP9E4GZbv2Jsl1fglXzu4AA8GF1/x+4XrEJs=; b=G/Q16hH2A1BKY7QyQwhrRic/HtWeSP5Us6bjMm+BIxSgCTnYN1vRarInEo1UOxiLCK +L6wFfdyQQuAEZOBBjVJDowxO5eNMoJDtQynFBkOJA5G+QYwV0m0Lwj0x9zn/F7Y/yxY 6zvBcgXj7T8XFhsnSt8tf4L0ENE1EpFa5QkGEq+lZm58O+6WvLOaCaa4EI5Xv3A/AZ4K JoAojXe7XBwJiwUaNxNXpM9SvNqG2Pi3VNLhItL05W+sjPvqLubFGmIMndBG/SfhmKUc tUU5iL6qRcHVe/TvfKaImJPac6Iy+2i0YHEQ7JJxgOVBkjNmPQlEx8Z3vk9nrV5VjdEO eMjw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=im4BMgH7; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410792@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410792@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=w+bpDWZDP9E4GZbv2Jsl1fglXzu4AA8GF1/x+4XrEJs=; b=WceiVI/BfBB5SyF36vQ2C9XQa+hQbBYxfHvl57UBpyuvSAZzZY9L3BvBzaTMqXQQ2g 3w7087sggaq1WtUruErNOMfhrvnvu0oLpbtGpjaCvTCLivrBCL0QQPOPIedBYFY841v0 WB7FU7GYiiwqABK3UfzpV/84Yle8PVMEEidEz+cBHyojWPtanhpOKRZGkVygz+ZPR1O2 rBHv8BehJ6lCq8rIJbucSwUyZPKBNBf+D0RrFRha6na4dwdx+JtiBp+2DwlNvw0K/Fl7 NtLh+5KJNPGjbu7mkiydHCV96PqsKwkr8N3Gpv4wtxLLj4cmNLM6q7AkxVNBsrJjJJRu 5S6w=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=im4BMgH7; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410792@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410792@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 14:02:58+00	ah@cybertec.at	Re: Problem about postponing gathering partial paths for topmost scan/join rel	<2752.1657807378@antos.home>	[{"Name": "Richard Guo", "Address": "guofenglinux@gmail.com"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	79	10184	[]		Richard Guo <guofenglinux@gmail.com> wrote:\r\n\r\n> On Wed, Jul 28, 2021 at 3:42 PM Richard Guo <guofenglinux@gmail.com> wrote:\r\n> \r\n>  To fix this problem, I'm thinking we can leverage 'root->all_baserels'\r\n>  to tell if we are at the topmost scan/join rel, something like:\r\n> \r\n>  --- a/src/backend/optimizer/path/allpaths.c\r\n>  +++ b/src/backend/optimizer/path/allpaths.c\r\n>  @@ -3041,7 +3041,7 @@ standard_join_search(PlannerInfo *root, int levels_needed, List *initial_rels)\r\n>                           * partial paths.  We'll do the same for the topmost scan/join rel\r\n>                           * once we know the final targetlist (see grouping_planner).\r\n>                           */\r\n>  -                       if (lev < levels_needed)\r\n>  +                       if (!bms_equal(rel->relids, root->all_baserels))\r\n>                                  generate_useful_gather_paths(root, rel, false);\r\n> \r\n>  Any thoughts?\r\n> \r\n> Attach a patch to include the fix described upthread. Would appreciate\r\n> any comments on this topic.\r\n\r\n\r\nI think I understand the idea but I'm not sure about the regression test. I\r\nsuspect that in the plan\r\n\r\nEXPLAIN (COSTS OFF)\r\nSELECT count(*) FROM tenk1 a JOIN tenk1 b ON a.two =3D b.two\r\n  FULL JOIN tenk1 c ON b.two =3D c.two;\r\n                         QUERY PLAN                         \r\n\r\n------------------------------------------------------------\r\n Aggregate\r\n   ->  Hash Full Join\r\n         Hash Cond: (b.two =3D c.two)\r\n         ->  Gather\r\n               Workers Planned: 4\r\n               ->  Parallel Hash Join\r\n                     Hash Cond: (a.two =3D b.two)\r\n                     ->  Parallel Seq Scan on tenk1 a\r\n                     ->  Parallel Hash\r\n                           ->  Parallel Seq Scan on tenk1 b\r\n         ->  Hash\r\n               ->  Gather\r\n                     Workers Planned: 4\r\n                     ->  Parallel Seq Scan on tenk1 c\r\n\r\n\r\nthe Gather node is located below the "Hash Full Join" node only because that\r\nkind of join currently cannot be executed by parallel workers. If the parallel\r\n"Hash Full Join" gets implemented (I've noticed but not checked in detail\r\n[1]), it might break this test.\r\n\r\nI'd prefer a test that demonstrates that the Gather node at the top of the\r\n"subproblem plan" is useful purely from the *cost* perspective, rather than\r\ndue to executor limitation.\r\n\r\n\r\n[1] https://commitfest.postgresql.org/38/2903/\r\n\r\n-- \r\nAntonin Houska\r\nWeb: https://www.cybertec-postgresql.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Antonin Houska", "Address": "ah@cybertec.at"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Richard Guo <guofenglinux@gmail.com>"], "Date": ["Thu, 14 Jul 2022 16:02:58 +0200"], "From": ["Antonin Houska <ah@cybertec.at>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Problem about postponing gathering partial paths for topmost scan/join rel"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657807355; cv=none; d=google.com; s=arc-20160816; b=NecldIH/ZvZdoEoIqkLzQ2dhpDYLn4bvjGicC9nae6KPj5JYwvY/S3/M0AqfGkx3XT syaiIL95ANLt9jYnu+qZoD83eyCGQVvpev1rvSv6Dm/xZ4D9vCmTYIA/Ni3s7P5K7jyv ijqS1l3mFURGRGbz79lMqIdumXzxcTmQ1hMYEVVpVAkVDnAWOowtoCnab7IdLrQE5CrR 85Clk1zv+VVZ69BOuLxaOLbCgB8plzbYxSLGGv12zMlEKNrYJl+JQqPR2RobxHuwvda1 o87Ww5UyGHQbd97LCzH5syvqsXyRSRwdEhMNJ7c7ENEvW3SX/vfz6ZHTVaKXJW1l8kHM nxhA=="], "Comments": ["In-reply-to Richard Guo <guofenglinux@gmail.com> message dated \\"Fri, 30 Jul 2021 15:14:45 +0800.\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp146256jai; Thu, 14 Jul 2022 07:02:35 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q16-20020a5d6590000000b0021b9c6fb5dasi1515537wru.414.2022.07.14.07.02.35 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 07:02:35 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410834@lists.postgresql.org>) id 1oBzQJ-0000Jh-0q for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 14:02:35 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <ah@cybertec.at>) id 1oBzQE-00074A-7h for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:02:30 +0000", "from mail-ej1-x62c.google.com ([2a00:1450:4864:20::62c]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <ah@cybertec.at>) id 1oBzQ6-0001SN-UI for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 14:02:29 +0000", "by mail-ej1-x62c.google.com with SMTP id dn9so3588110ejc.7 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 07:02:22 -0700 (PDT)", "from antos.home (90-183-80-64.rcq.o2.cz. [90.183.80.64]) by smtp.gmail.com with ESMTPSA id gc33-20020a1709072b2100b0072b29827867sm747960ejc.177.2022.07.14.07.02.19 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 07:02:20 -0700 (PDT)"], "X-Mailer": ["MH-E 8.6+git; nmh 1.7+dev; GNU Emacs 27.2.50"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2751.1657807378.1@antos.home>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2752.1657807378@antos.home>"], "Precedence": ["bulk"], "References": ["<CAMbWs4-mH8Zf87-w+3P2J=nJB+5OyicO28ia9q_9o=Lamf_VHg@mail.gmail.com> <CAMbWs4-bbPocLuRb2+tL-BRz_fEZAuj7ZS=QdcM7uCe_qtw2uA@mail.gmail.com>"], "X-Received": ["by 2002:adf:f746:0:b0:21d:6afd:b7d3 with SMTP id z6-20020adff746000000b0021d6afdb7d3mr8291523wrp.501.1657807355441; Thu, 14 Jul 2022 07:02:35 -0700 (PDT)", "by 2002:a17:906:9be0:b0:72b:4600:e9ce with SMTP id de32-20020a1709069be000b0072b4600e9cemr8879282ejc.224.1657807340870; Thu, 14 Jul 2022 07:02:20 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2752.1657807378%40antos.home>"], "In-Reply-To": ["<CAMbWs4-bbPocLuRb2+tL-BRz_fEZAuj7ZS=QdcM7uCe_qtw2uA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410834@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410834@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=cybertec-at.20210112.gappssmtp.com; s=20210112; h=from:to:cc:subject:in-reply-to:references:comments:mime-version :content-id:content-transfer-encoding:date:message-id; bh=NLn2FzjOyMfuwWyjCVOtyXL69maIn+VmIzTVm1rOI3k=; b=L+tu9keNOVQV0BEwzEGkhHZ9bqWgOxbDAB1pDHIixOrsvrwthEOh5Th+FGkdOM9FCN RgMlCDx44Bkmnr3oEQlK4Q/bVzCqaXMEBGIfMQUMXY2MakPxYMLOuzzTiQwGJFhdxvyl 66QsFZgrL7iegDmkJC2PiXyz5UUZF+p48hkS1HubgJM7RvgBDvAZIKcBGFdo8IONtdVo hG/LMJNZd1FvLHbNpLZFxYw1WMzQ5YpA8+DazThwZHsOjLgNL6chus2TMo7aljMjkLA9 nIjeTpILW2+LH7iFmHCre0ZOdFFymAJOlQ+Wh4YFTVE0dS2lqcjFcdOoBbKgWHOjqehR JiDA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9K1GqI1gBW128XaqTFSwq1YQzuiTFExHfGKXwQcs7E8FZSmKjC /4fBQhQMG5OwKFz/+KLSCc4e5rC2yrG/sA=="], "X-Google-Smtp-Source": ["AGRyM1sRHkd04n2stBg4opKUB/dZdKOtY8kUNkedgeuQV1RWT4E5AVQAQ1IPEkj5IZpe6tivO3Zb"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from:dkim-signature; bh=NLn2FzjOyMfuwWyjCVOtyXL69maIn+VmIzTVm1rOI3k=; b=v7TaUE7JFDwmF4YX9IS9bmbPuqQbi9gDdlvFUrbuXumMV4NCG0V33PB5SHDmWxlpJ5 FRoBc3X+QUd567xdYb9eU5YzxBbXfnQ0k6oYouMyXyJdPhjCFhZ7nPr/eQxHa+WJm+0d CJklKXzliVXZMtbsk/bn6jE2Bqx1P7I6lFr3flmJmYxkWZHGCbOBQwhmqF6eQ/jmankx L6ZU21GhLW5RMFO15DVzbR8OtE4dR/PejYrKUoeufVVxLnPDoe/jRJunU+rEMZZihlph EfTDW13mZ6KDytDOG3ObRW5h1/87R3TdI+zemtZnlm1uuywuczd9htuWLHkxOG5PCOgO kx5A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@cybertec-at.20210112.gappssmtp.com header.s=20210112 header.b=L+tu9keN; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410834@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410834@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:from:to:cc:subject:in-reply-to:references :comments:mime-version:content-id:content-transfer-encoding:date :message-id; bh=NLn2FzjOyMfuwWyjCVOtyXL69maIn+VmIzTVm1rOI3k=; b=yQFijmwpMXnHa5g7PNUj19AIbnrYnh2tImpdDILy5kJi3cvgowRMukfKmRsTiHG79i dWIipFeD4oND5s6+Jr8/RtUpdR4rKZ6FgTBTsVKgg5f6SNJA4cQpapo1DzErgU1HWvMw DwBGm2+mT+FIzXgrYu/ZOu7Tj1XG6+86lqIvzQOpWg69vaLAVpmav4b9AkBls9Z2aGTS cAXjMsvTdxZnnXyEhMYhFzSavfzvyURnDyJlP/DyZtxymPX77lTCFUo804bzqqa3Ftj3 9zQzSNgWPm11MB41/pQkIaido7A7IzY5e+lYMLCFUtm2ZJxv0kzyy51OZ5q0hyKOcmjS p0sQ=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@cybertec-at.20210112.gappssmtp.com header.s=20210112 header.b=L+tu9keN; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410834@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410834@lists.postgresql.org"]}	["<CAMbWs4-bbPocLuRb2+tL-BRz_fEZAuj7ZS=QdcM7uCe_qtw2uA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 13:12:11+00	dilipbalaut@gmail.com	Re: Handle infinite recursion in logical replication setup	<CAFiTN-tcSvk8kE3x0u+8V5rfoXO-Uy5-5AX_jXSB1ZjodfPdtA@mail.gmail.com>	[{"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}, {"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	\N	78	15093	[]	<div>On Thu, 14 Jul 2022 at 6:34 PM, vignesh C &lt;<a href="mailto:vignesh21@gmail.com">vignesh21@gmail.com</a>&gt; wrote:<br></div><div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex" dir="auto">On Thu, Jul 14, 2022 at 11:26 AM Dilip Kumar &lt;<a href="mailto:dilipbalaut@gmail.com" target="_blank">dilipbalaut@gmail.com</a>&gt; wrote:<br>\r\n&gt;<br>\r\n&gt; On Wed, Jul 13, 2022 at 4:49 PM Dilip Kumar &lt;<a href="mailto:dilipbalaut@gmail.com" target="_blank">dilipbalaut@gmail.com</a>&gt; wrote:<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; On Tue, Jul 12, 2022 at 2:58 PM vignesh C &lt;<a href="mailto:vignesh21@gmail.com" target="_blank">vignesh21@gmail.com</a>&gt; wrote:<br>\r\n&gt; &gt; &gt;<br>\r\n&gt; &gt; &gt; On Tue, Jul 12, 2022 at 9:51 AM Amit Kapila &lt;<a href="mailto:amit.kapila16@gmail.com" target="_blank">amit.kapila16@gmail.com</a>&gt; wrote:<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; I find one thing¬† confusing about this patch.¬† Basically, this has two<br>\r\n&gt; &gt; option &#39;local&#39; and &#39;any&#39;, so I would assume that all the local server<br>\r\n&gt; &gt; changes should be covered under the &#39;local&#39; but now if we set some<br>\r\n&gt; &gt; origin using &#39;select pg_replication_origin_session_setup(&#39;aa&#39;);&#39; then<br>\r\n&gt; &gt; changes from that session will be ignored because it has an origin id.<br>\r\n&gt; &gt; I think actually the name is creating confusion, because by local it<br>\r\n&gt; &gt; seems like a change which originated locally and the document is also<br>\r\n&gt; &gt; specifying the same.<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; +¬† ¬† ¬† ¬†If &lt;literal&gt;local&lt;/literal&gt;, the subscription will request the publisher<br>\r\n&gt; &gt; +¬† ¬† ¬† ¬†to only send changes that originated locally. If &lt;literal&gt;any&lt;/literal&gt;,<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; I think if we want to keep the option local then we should look up all<br>\r\n&gt; &gt; the origin in the replication origin catalog and identify whether it<br>\r\n&gt; &gt; is a local origin id or remote origin id and based on that filter out<br>\r\n&gt; &gt; the changes.<br>\r\n&gt;<br>\r\n&gt; On the other hand if we are interested in receiving the changes which<br>\r\n&gt; are generated without any origin then I think we should change &#39;local&#39;<br>\r\n&gt; to &#39;none&#39; and then in future we can provide a new option which can<br>\r\n&gt; send the changes generated by all the local origin?¬† I think other<br>\r\n&gt; than this the patch LGTM.<br>\r\n<br>\r\nThanks for the comment. The attached v33 patch has the changes to<br>\r\nspecify origin as &#39;none&#39; instead of &#39;local&#39; which will not publish the<br>\r\ndata having any origin.</blockquote><div dir="auto"><br></div><div dir="auto">I think the ‚Äònone‚Äô might have problem from expand ability pov? ¬†what if in future we support the actual origin name and than what none mean? no origin or origin name none?¬† Should we just give origin name empty name ‚Äò‚Äô?¬† Or is there some other issue?</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex" dir="auto"></blockquote><div dir="auto"><br></div><div dir="auto">‚Äî</div><div dir="auto">Dilip</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex" dir="auto"></blockquote></div></div>-- <br><div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"><div dir="ltr"><span style="color:rgb(80,0,80);font-size:12.8px">Regards,</span><br style="color:rgb(80,0,80);font-size:12.8px"><span style="color:rgb(80,0,80);font-size:12.8px">Dilip Kumar</span><br style="color:rgb(80,0,80);font-size:12.8px"><span style="color:rgb(80,0,80);font-size:12.8px">EnterpriseDB:¬†</span><a href="http://www.enterprisedb.com/" style="color:rgb(17,85,204);font-size:12.8px" target="_blank">http://www.enterprisedb.com</a><br></div></div>\r\n	On Thu, 14 Jul 2022 at 6:34 PM, vignesh C <vignesh21@gmail.com> wrote:\r\n\r\n> On Thu, Jul 14, 2022 at 11:26 AM Dilip Kumar <dilipbalaut@gmail.com>\r\n> wrote:\r\n> >\r\n> > On Wed, Jul 13, 2022 at 4:49 PM Dilip Kumar <dilipbalaut@gmail.com>\r\n> wrote:\r\n> > >\r\n> > > On Tue, Jul 12, 2022 at 2:58 PM vignesh C <vignesh21@gmail.com> wrote:\r\n> > > >\r\n> > > > On Tue, Jul 12, 2022 at 9:51 AM Amit Kapila <amit.kapila16@gmail.com>\r\n> wrote:\r\n> > >\r\n> > > I find one thing  confusing about this patch.  Basically, this has two\r\n> > > option 'local' and 'any', so I would assume that all the local server\r\n> > > changes should be covered under the 'local' but now if we set some\r\n> > > origin using 'select pg_replication_origin_session_setup('aa');' then\r\n> > > changes from that session will be ignored because it has an origin id.\r\n> > > I think actually the name is creating confusion, because by local it\r\n> > > seems like a change which originated locally and the document is also\r\n> > > specifying the same.\r\n> > >\r\n> > > +       If <literal>local</literal>, the subscription will request the\r\n> publisher\r\n> > > +       to only send changes that originated locally. If\r\n> <literal>any</literal>,\r\n> > >\r\n> > > I think if we want to keep the option local then we should look up all\r\n> > > the origin in the replication origin catalog and identify whether it\r\n> > > is a local origin id or remote origin id and based on that filter out\r\n> > > the changes.\r\n> >\r\n> > On the other hand if we are interested in receiving the changes which\r\n> > are generated without any origin then I think we should change 'local'\r\n> > to 'none' and then in future we can provide a new option which can\r\n> > send the changes generated by all the local origin?  I think other\r\n> > than this the patch LGTM.\r\n>\r\n> Thanks for the comment. The attached v33 patch has the changes to\r\n> specify origin as 'none' instead of 'local' which will not publish the\r\n> data having any origin.\r\n\r\n\r\nI think the ‚Äònone‚Äô might have problem from expand ability pov?  what if in\r\nfuture we support the actual origin name and than what none mean? no origin\r\nor origin name none?  Should we just give origin name empty name ‚Äò‚Äô?  Or is\r\nthere some other issue?\r\n\r\n>\r\n‚Äî\r\nDilip\r\n\r\n> --\r\nRegards,\r\nDilip Kumar\r\nEnterpriseDB: http://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Dilip Kumar", "Address": "dilipbalaut@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Amit Kapila <amit.kapila16@gmail.com>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, Peter Smith <smithpb2250@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>, \\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "To": ["vignesh C <vignesh21@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:42:11 +0530"], "From": ["Dilip Kumar <dilipbalaut@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Handle infinite recursion in logical replication setup"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657804354; cv=none; d=google.com; s=arc-20160816; b=dA8ueLQ9WgCJJDM3rnOm1OO2B8UnAABpp0sbkO4N26QMZTsDV1pcjiZ3cwldGo16aR eugTqlA+Uc0Mf9KXAbhhI8g4NUeT/q6i0XIQZpSOA8RZgKHMrxBmSgLmJIKGSd8Ml5v2 C2shd7y+Vi08afL+J5j+BwDOVhv4jjFuYMy8eKJJ0l50vAO8u7Qwd71RcOzlG8dOPaPB ldrfXGGWzTEmEbzGGWYWSl2YWhwgmp9atw98OvpjgvQ6qCG+JBsNja8jhl/dWnVUp6FQ YJPOuYO6uPUhRL53EmOUyUTKfiCaFHgBNxYjUfZRHwivPN2/9MK/d2DGvrDAYlpV7laD KlXA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp135039jai; Thu, 14 Jul 2022 06:12:34 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id s12-20020a67b24c000000b003570bf4556asi189943vsh.461.2022.07.14.06.12.33 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 06:12:34 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410802@lists.postgresql.org>) id 1oBydt-0007dw-0k for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 13:12:33 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBydo-00067C-HG for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:12:28 +0000", "from mail-lf1-x12e.google.com ([2a00:1450:4864:20::12e]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dilipbalaut@gmail.com>) id 1oBydl-0000zU-O5 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:12:27 +0000", "by mail-lf1-x12e.google.com with SMTP id r9so2713953lfp.10 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 06:12:25 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAFiTN-tcSvk8kE3x0u+8V5rfoXO-Uy5-5AX_jXSB1ZjodfPdtA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALDaNm01kX44F4=Nk9paNiLAPs1Vjb+WxUkOdsgnDoZ8HYW=6g@mail.gmail.com> <20220704141402.wdjzpkcybeg4foqg@alvherre.pgsql> <CALDaNm3pNncXjx1e2p6tZoYwS+gD93MhnAUFAxE1WOqRQGA8RA@mail.gmail.com> <CAA4eK1JAh9KCmzPFPA47xVp8esRw_eNC0H9tgyFiw5Lq3sUrCg@mail.gmail.com> <CALDaNm1T5utq60qVx=RN60rHcg7wt2psM7PpCQ2fDiB-R8oLGg@mail.gmail.com> <CAA4eK1JYQWuWQj9rUZpAf9BPoW9j_ecuodfwL-LazCE5AJa9cg@mail.gmail.com> <CALDaNm0B3qh12hJya1sAmsmD916jBqin4-96ihBNX7f1qOppRw@mail.gmail.com> <CAHut+PvZyWyLE13SrS8vZSNRQiONzKYTptn8wWRPt6n-hGoS6g@mail.gmail.com> <CALDaNm2-D860yULtcmZAzDbdiof-Dg6Y_YaY4owbO6Rj=XEHMw@mail.gmail.com> <CAA4eK1+ey5Jmf5AXRc5XGLuLxMD7YdyxNN2B7AoX7r+-xR1m=w@mail.gmail.com> <CALDaNm0w4vkQv8SSrj8h2QbDGVP8k1fDpmBjAD=Er6Ywew_94g@mail.gmail.com> <CAFiTN-vgCxOgsH_SzuqS4zF-9SfW22TCG=LqB5beV1rPscgwwQ@mail.gmail.com> <CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com> <CALDaNm3gEsd0KkKfraGe0qRrr1=7BAmgtmZiJUGBXHpZO4-VEg@mail.gmail.com>"], "X-Received": ["by 2002:a1f:9e47:0:b0:375:22dc:96f7 with SMTP id h68-20020a1f9e47000000b0037522dc96f7mr2244639vke.1.1657804354010; Thu, 14 Jul 2022 06:12:34 -0700 (PDT)", "by 2002:a05:6512:eaa:b0:489:3781:7b39 with SMTP id bi42-20020a0565120eaa00b0048937817b39mr5206145lfb.76.1657804343188; Thu, 14 Jul 2022 06:12:23 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAFiTN-tcSvk8kE3x0u%2B8V5rfoXO-Uy5-5AX_jXSB1ZjodfPdtA%40mail.gmail.com>"], "In-Reply-To": ["<CALDaNm3gEsd0KkKfraGe0qRrr1=7BAmgtmZiJUGBXHpZO4-VEg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410802@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000fba22605e3c3a678\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410802@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=fG8FVAuPt8gTZdObxVgJP3da1KAfPl5HRDk7wSo/5I4=; b=XQpa6YYLwmnZvS5ydUOLqOBcJkqGF4RYWQr1OWDsCUzfQ5dBKy6Xf8hgslFtjjuh5i qVTTqDbJTAgOLgpDdzO/n7KiNewIPD0Bqb746wU8Bx1vIeFa2ZUR/p3vczDiDsJqAMit G0x1WsDA/y3MppnLZYLVWDC/xvYfYy+vdEWGK6yrdyFZ/NPPWY6TqHrMVn0myLZdLG58 Dn5/Z4XXvj7Ub1Eoc8o+WAm3Lv0Hz0Z6G711098SERUiB0zElLfCuDXkoO01ikCIkswg 07N11dzuP8IExvBoxB40by9oSoF7bGOXfp7JxBW4da777LK8u/Zmoo2K0qFIgEQK2QN7 mqKw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+obJtjcVXeN3wP3UFaXDpbms/Qg8t2xnEVxXl9t5wPvxcmG4PR QpEHPjxBZxLYReC5D5nv7gefBFouBvPVHNGP+Yk="], "X-Google-Smtp-Source": ["AGRyM1tJnsQs93ywA44QUQurgc84k+NxaDdKJmklc0y+C1GAE6WquEsAmuchu8kbtuv8A3T/NEpU"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=fG8FVAuPt8gTZdObxVgJP3da1KAfPl5HRDk7wSo/5I4=; b=czsH7Oxcpxib32wLutDouXzsoVuqDYL17JUFbkE4g270k8FuM1EHTPqpYNGBk10ztZ 5ECGOjLnixYtoofQmQVL/kLnGUS11AO/t/O7A5bbxIX1EImdd5HYINVq6ZzFsIOkuIcu Zb8B73C0agt7VMFTKTrps8/r4czscuMfgniqBcienv3wHhBHHoEeSi/VdZCPpm46mE8H a2DSt60Z+WrzclifFXdecKinnk9Y8hHWDprV7UULQcn6kQgK9Zo2jkh8sKwRoyeXkCPq AswQym2diMC0G7xSPilY7dzQCn5+qSbwkVPk7I/H+/WYQJ1rLrjSKlYMCaZervwhaoqE 43JA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=XQpa6YYL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410802@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410802@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=fG8FVAuPt8gTZdObxVgJP3da1KAfPl5HRDk7wSo/5I4=; b=gen5Q/J8dx0CaToTtzCz7rt4v2rMu3YDXxIzJa/iZVAdq8TYLt248o1av4aV25Nifj itPgy5E3wqaTtzEyVIVIL/LEwpLbvGb19QJtnKlYv2Hi20b11QKXuPu2dZC8WqcnZnyj xjppvYevJ2Qc1WQK8dnDXwjG0Lmruvo22oO/5F+Djf7DXLdIKptuJHGswFJ4N3OkybdD iaMj6AcXR7P8NOlpxA2XL5XcZJ9qM4VE9ezhDESRFfAOAx8pi2g5nucB+ygGC2QdIzsg 4VnHrevNvZeTi5ez7UrWYF3oaChbg2VTq/DxlDv6rM5Gd/mZ80WMEOW2BemMPM3ThYRf wJgA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=XQpa6YYL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410802@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410802@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CALDaNm3gEsd0KkKfraGe0qRrr1=7BAmgtmZiJUGBXHpZO4-VEg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 13:04:02+00	vignesh21@gmail.com	Re: Handle infinite recursion in logical replication setup	<CALDaNm3gEsd0KkKfraGe0qRrr1=7BAmgtmZiJUGBXHpZO4-VEg@mail.gmail.com>	[{"Name": "Dilip Kumar", "Address": "dilipbalaut@gmail.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	77	170615	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v33-0001-Skip-replication-of-data-having-origin.patch", "content_id": "f_l5l1l1uo0", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "3", "file_name": "v33-0002-Check-and-throw-an-error-if-publication-tables-w.patch", "content_id": "f_l5l1l7cu1", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "4", "file_name": "v33-0003-Document-bidirectional-logical-replication-steps.patch", "content_id": "f_l5l1lfx42", "disposition": "attachment", "content_type": "text/x-patch"}]		On Thu, Jul 14, 2022 at 11:26 AM Dilip Kumar <dilipbalaut@gmail.com> wrote:\r\n>\r\n> On Wed, Jul 13, 2022 at 4:49 PM Dilip Kumar <dilipbalaut@gmail.com> wrote:\r\n> >\r\n> > On Tue, Jul 12, 2022 at 2:58 PM vignesh C <vignesh21@gmail.com> wrote:\r\n> > >\r\n> > > On Tue, Jul 12, 2022 at 9:51 AM Amit Kapila <amit.kapila16@gmail.com> wrote:\r\n> >\r\n> > I find one thing  confusing about this patch.  Basically, this has two\r\n> > option 'local' and 'any', so I would assume that all the local server\r\n> > changes should be covered under the 'local' but now if we set some\r\n> > origin using 'select pg_replication_origin_session_setup('aa');' then\r\n> > changes from that session will be ignored because it has an origin id.\r\n> > I think actually the name is creating confusion, because by local it\r\n> > seems like a change which originated locally and the document is also\r\n> > specifying the same.\r\n> >\r\n> > +       If <literal>local</literal>, the subscription will request the publisher\r\n> > +       to only send changes that originated locally. If <literal>any</literal>,\r\n> >\r\n> > I think if we want to keep the option local then we should look up all\r\n> > the origin in the replication origin catalog and identify whether it\r\n> > is a local origin id or remote origin id and based on that filter out\r\n> > the changes.\r\n>\r\n> On the other hand if we are interested in receiving the changes which\r\n> are generated without any origin then I think we should change 'local'\r\n> to 'none' and then in future we can provide a new option which can\r\n> send the changes generated by all the local origin?  I think other\r\n> than this the patch LGTM.\r\n\r\nThanks for the comment. The attached v33 patch has the changes to\r\nspecify origin as 'none' instead of 'local' which will not publish the\r\ndata having any origin.\r\n\r\nRegards,\r\nVignesh\r\n	[]	\N	["\\\\Seen"]	[{"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Peter Smith <smithpb2250@gmail.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, \\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, \\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Dilip Kumar <dilipbalaut@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:34:02 +0530"], "From": ["vignesh C <vignesh21@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Handle infinite recursion in logical replication setup"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657803868; cv=none; d=google.com; s=arc-20160816; b=wTCX+/mjPY3Oci/7H36+iHHxhCwUdigdqn2DnRqLne4IcvVYhr2kQuLfU5W3yUanyX N8/C/GT1+VwqNGAn4kCsV3h1vYW4uqU7+PEjGgxxa5TFPOGgO2r3bzefOMyopLu79uKq kn08y0TZXHBDzsATtm12JoQdLH1ifG8s46EJZBMtVi8fDBxDC6piuVfUvBZ7eX0i11wq rAL+6LL9LsHacWGFD/PhLojAt/VWTuUw3xvqOghJnRNctV9k9nEW9OKdl4HOem+WIoOk RQeaPfq7xxfc6xrZP6wXi0G+9I++lwAkaKrYTqiV5l4xou9ylErpWx1Svz3mxPx4TiT2 Rq1g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp132634jai; Thu, 14 Jul 2022 06:04:29 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id s18-20020adfdb12000000b0021d669b3403si1678506wri.555.2022.07.14.06.04.28 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 06:04:28 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410794@lists.postgresql.org>) id 1oByW4-00035m-GS for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 13:04:28 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <vignesh21@gmail.com>) id 1oByVy-0001Qh-8b for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:04:22 +0000", "from mail-oa1-x33.google.com ([2001:4860:4864:20::33]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <vignesh21@gmail.com>) id 1oByVs-0000vE-12 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 13:04:21 +0000", "by mail-oa1-x33.google.com with SMTP id 586e51a60fabf-f2a4c51c45so2284235fac.9 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 06:04:15 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALDaNm3gEsd0KkKfraGe0qRrr1=7BAmgtmZiJUGBXHpZO4-VEg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALDaNm01kX44F4=Nk9paNiLAPs1Vjb+WxUkOdsgnDoZ8HYW=6g@mail.gmail.com> <20220704141402.wdjzpkcybeg4foqg@alvherre.pgsql> <CALDaNm3pNncXjx1e2p6tZoYwS+gD93MhnAUFAxE1WOqRQGA8RA@mail.gmail.com> <CAA4eK1JAh9KCmzPFPA47xVp8esRw_eNC0H9tgyFiw5Lq3sUrCg@mail.gmail.com> <CALDaNm1T5utq60qVx=RN60rHcg7wt2psM7PpCQ2fDiB-R8oLGg@mail.gmail.com> <CAA4eK1JYQWuWQj9rUZpAf9BPoW9j_ecuodfwL-LazCE5AJa9cg@mail.gmail.com> <CALDaNm0B3qh12hJya1sAmsmD916jBqin4-96ihBNX7f1qOppRw@mail.gmail.com> <CAHut+PvZyWyLE13SrS8vZSNRQiONzKYTptn8wWRPt6n-hGoS6g@mail.gmail.com> <CALDaNm2-D860yULtcmZAzDbdiof-Dg6Y_YaY4owbO6Rj=XEHMw@mail.gmail.com> <CAA4eK1+ey5Jmf5AXRc5XGLuLxMD7YdyxNN2B7AoX7r+-xR1m=w@mail.gmail.com> <CALDaNm0w4vkQv8SSrj8h2QbDGVP8k1fDpmBjAD=Er6Ywew_94g@mail.gmail.com> <CAFiTN-vgCxOgsH_SzuqS4zF-9SfW22TCG=LqB5beV1rPscgwwQ@mail.gmail.com> <CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com>"], "X-Received": ["by 2002:adf:f14d:0:b0:21d:ad67:c2e0 with SMTP id y13-20020adff14d000000b0021dad67c2e0mr8223445wro.247.1657803868911; Thu, 14 Jul 2022 06:04:28 -0700 (PDT)", "by 2002:a05:6870:4603:b0:101:72f6:ba77 with SMTP id z3-20020a056870460300b0010172f6ba77mr7192042oao.38.1657803855193; Thu, 14 Jul 2022 06:04:15 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALDaNm3gEsd0KkKfraGe0qRrr1%3D7BAmgtmZiJUGBXHpZO4-VEg%40mail.gmail.com>"], "In-Reply-To": ["<CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410794@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000e5b26705e3c389b5\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410794@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=GOJLagiP52LTEjPtKWGvyWf/tBO5mO2piVCvt1AJ9tQ=; b=Z7d3E4LMstTtq97LFA5Tns1Q/7VolpeZJ9Ot1Gn+27sTiG1mYh7bATy6oMIWZOiDoT tTnP/QVy0Jbfuj5/CbnJG9qIyJucNHjgL/4Yd4bFhND2UsLl2+l3ok7eHbLC5WsbvJRN aMsYtKXFkZ4zsANy6v8lc7IMeYwtYYbN9UDR0rjT4Din7kU8v+b132+V2uTsMlUPtR7Q LF68crwJXDOsU5OZ+c9TE2/BYZaktaG0c8jEckaI/54nqkpuxPEBpLNh1oLo3szEPf4M 6Q8etcPMj8kd5aCn8xbsUs/hG9ineYUdos8kNnaa/uXdbkzLHuG5nLla4s58ivz1nmQi 5m7g=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9myT/isUCWPRsRJfk+9jvhPNJ1Eo2pDWmNSPUFCo0lK/5Q8KLp 5liagjIkU209snGmeLV3/F3ImpCDw9QNTI7Z8oM4jS6l"], "X-Google-Smtp-Source": ["AGRyM1vtbSXrU67GCIGpbYdlR5INbCOG9HSkY9vGx9B0arf5iVFQI3Jme05KrBkGra7YpaF0pqRM"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=GOJLagiP52LTEjPtKWGvyWf/tBO5mO2piVCvt1AJ9tQ=; b=ZedidDqVhbu9wputAJ635pddQFacSyN98bfM37f9hTb2hRUQG2RBFduz+L3PnDezwL FKF2DXsM0p9CwX5+N5UHJhb19tfkHaQAucgh5BgoPyWGqOBV3WKyYJ05JDR2s3VlQgqW zAtr+9rqQy7nIFMlHL2RHkIOQ4bFIvbjnlSQvUxRFOK9pgRMdM04Hii/rCK1x/dQqQJd JOAzRuqtkGkjVeNCGAc2jOE2xic3n7+vKKIb2D1KoZVuRRz8oeXJ6pH9fTtHebEO7PQE AIEUwxf5A1SClXQf4Vs1yzanyCMF1obLZkPR/0/VsNGppoxjxJEKkmGKK4TOYT6pQc6U XQDw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=Z7d3E4LM; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410794@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410794@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=GOJLagiP52LTEjPtKWGvyWf/tBO5mO2piVCvt1AJ9tQ=; b=HR/3eSZuK8sIs2uDkp8SVW0GwxZ1kT6aypEku/bJ2jnho/PntR6uCnxKje6fDixFRR PEJjeiZ7M8b8eTi2Y8QwthBAUoeW0AfefjpK5x92XoWASJqsim7MO7VYvJRoUFmTC6IT fllrbgVo1Ig0ZrZDR2DuCcFnVCM6lue6sR36CKOHlN4s9lWN7qqB9i7CmKmkSINwft2y lXFKhK4vKd5fLV0j5RSlGefpKIqqKyFk4yxqOMt2DjCMqWBM+Ipk9jH+PiqujDgS/t6E l2WFxmdO30GvAqDri+m/0Lshq0k22dH7hXWbaKZQu9Ugiqh1mqsB+5E9cIsGm6A5LhHb ydzg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=Z7d3E4LM; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410794@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410794@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAFiTN-tC4T2AbeVytp73sjJ6qqCNQbFWVtb25YmEZB1CzfkQvQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 14:26:10+00	thomas.munro@gmail.com	Re: EINTR in ftruncate()	<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	80	9069	[]		On Fri, Jul 15, 2022 at 1:02 AM Thomas Munro <thomas.munro@gmail.com> wrote:\r\n> On Fri, Jul 15, 2022 at 12:15 AM Thomas Munro <thomas.munro@gmail.com> wrote:\r\n> > Yeah.  Done, and pushed.  0002 not back-patched.\r\n>\r\n> Hmm, there were a couple of hard to understand build farm failures.\r\n> My first thought is that the signal mask stuff should only be done if\r\n> IsUnderPostmaster, otherwise it clobbers the postmaster's signal mask\r\n> when reached from dsm_postmaster_startup().  Looking into that.\r\n\r\nI pushed that change, and I hope that clears up the problems seen on\r\neg curculio.  It does raise the more general question of why it's safe\r\nto assume the signal mask is UnBlockSig on entry in regular backends.\r\nI expect it to be in released branches, but things get more\r\ncomplicated as we use DSM in more ways and it's not ideal to bet on\r\nthat staying true.  I checked that this throw-away assertion doesn't\r\nfail currently:\r\n\r\n        if (IsUnderPostmaster)\r\n+       {\r\n+               sigset_t old;\r\n+               sigprocmask(SIG_SETMASK, NULL, &old);\r\n+               Assert(memcmp(&old, &UnBlockSig, sizeof(UnBlockSig)) == 0);\r\n                PG_SETMASK(&BlockSig);\r\n+       }\r\n\r\n... but now I'm wondering if we should be more defensive and possibly\r\neven save/restore the mask.  Originally I discounted that because I\r\nthought I had to go through PG_SETMASK for portability reasons, but on\r\ncloser inspection, I don't see any reason not to use sigprocmask\r\ndirectly in Unix-only code.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 02:26:10 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657808815; cv=none; d=google.com; s=arc-20160816; b=PfXCvwutQUitZPbNUoW+2SaCAPpBnSM9i80hcM+iRio2TXsZrAZZXUDuhTrywUWsZs 1yysAu8HapIswFHtqaOk0A25Hp+GRh4x0iMsGO/fvNhoaU/1e7aaHI3N9q0Q0hK+EjVl uPUOEuzi7BjJmTp2qvNMHoeIY0udH1PXDt73V7GgY+Lv2oXLhHI4WwzNMUbIj5nFz0CC Xl87ytH1aiPJSv4mpUlMR8a69Cdb9PSKcZ5MndsTxnjatvdbaVbnUt9mrP1bF+GhQrwX b2NH/U17qJkurfTc0pII7mxDr3OxP47lF8kzEOzpoZxDSzX2MYW+k7NCz3KgKpE975wv k4Eg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp152783jai; Thu, 14 Jul 2022 07:26:55 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b3-20020a5d45c3000000b0021bb2fb5ea7si1779231wrs.253.2022.07.14.07.26.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 07:26:55 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410847@lists.postgresql.org>) id 1oBznq-00075Q-W8 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 14:26:54 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBznm-0005Rx-AX for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:26:50 +0000", "from mail-il1-x129.google.com ([2607:f8b0:4864:20::129]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oBznj-0001dV-UO for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:26:49 +0000", "by mail-il1-x129.google.com with SMTP id w16so582543ilh.0 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 07:26:47 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220706002015.57q6dvife3c3fjxz@awork3.anarazel.de> <20220706192941.av3nxh4sdozyn5qz@alvherre.pgsql> <20220706203859.qbem3yjlvx2xbegc@alap3.anarazel.de> <CA+hUKGKS2Radu-1Ewhe1-LEj19C-3XAQ7wnkQMb4e9E9q9ZXSg@mail.gmail.com> <20220706210323.bjjzokyj6nzvofm3@alap3.anarazel.de> <CA+hUKGJj=+GVjtLaeT7sD1gnS6tn=4Lb5+iACf4RT7wBuguLZg@mail.gmail.com> <CA+hUKGJSm-nq8s+_59zb7NbFQF-OS=xTnTAiGLrQpuSmU2y_1A@mail.gmail.com> <20220711174518.yldckniicknsxgzl@awork3.anarazel.de> <CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com> <CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com>"], "X-Received": ["by 2002:adf:fc02:0:b0:21d:7de9:2e8 with SMTP id i2-20020adffc02000000b0021d7de902e8mr8360139wrr.706.1657808815385; Thu, 14 Jul 2022 07:26:55 -0700 (PDT)", "by 2002:a05:6e02:148d:b0:2dc:9a63:aab9 with SMTP id n13-20020a056e02148d00b002dc9a63aab9mr4825402ilk.6.1657808807157; Thu, 14 Jul 2022 07:26:47 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGKx6Biq7_UuV0kn9DW%2B8QWcpJC1qwhizdtD9tN-fn0H0g%40mail.gmail.com>"], "In-Reply-To": ["<CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410847@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410847@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=/ubYGx1ZYGTDt6a4h7vwIDorXvSdM/KRrb1U5hNf0hg=; b=l/9v0DWs8oFQU3cz8SW1YjYmCBp05aOUDNegvoafXzwI65FahJh6sEIo2bRJ5BDnER zCtTNpARuHAKZ3f/2nTta+ZY41u9jv5Xc4P0XsyOnt+QDQeROBbI/2WO0JZKemPcG/Pp CSQlw5kmc0Og1YvFKS9cqY003cbjwSwGYR9ibkens9ts21ID2StuQV7lgcvt3NlzVK+I sF3EEd5uGaU6Bj4L+k3HNJ9kOqhwgkuwEfEp4By5kcDyBCDLKv6DkTMl7eDjdRbTY+ny 8imK0yo5T0xMB1ubUbLSsAXwF8RtyqXgt7zivGPNwYXfeyJ7/enk3BGAnKjsF+ycg1NV gRMw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8BBHKCl8QH+zIwEG3hR4ibELOgAksL8ErF+x0uyN9jPzlnOWQF 01WSztUIAmDx/xV+jlNZ5P7xaJROt1pvsV7OcUY="], "X-Google-Smtp-Source": ["AGRyM1tB4QX0sWGSuZJqfaLGPFOoHiNoaRuNE5Q3HgnGmWIDmobyZO6NDiw8DZDwfnBbY4k5OV+v"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=/ubYGx1ZYGTDt6a4h7vwIDorXvSdM/KRrb1U5hNf0hg=; b=cPr6qjQNVjkCS5h68yxGL+oHDVvMa9+lDrCZ8rQ9wG4tvRce6zkfv+nmistN/0lhF6 bMCb9znOymd1adGHJeMa7lCcQxY6q01VkJqNuSpUbtcJBI4/v4iWNOspp5ez3j96ljna 5g6jPijgnEVtzHM1t92eYaDLjfGSUKIsM1fw4aJwGzZ7fiy71mppa+7V+JHuSwr9uWD7 deSM6bnMRxvu5lRZofv1dm81urAuO4k7dyGynuFfHLgBFjdeyhV0Cv/bGQhyS9bkqqdh 325rD/lGAltwdlzm1IyaYe/r15/hDrQiOpacOGR+XHj34Iawg9y5pHahnE2Bel2pl/6X oohw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"l/9v0DWs\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410847@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410847@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=/ubYGx1ZYGTDt6a4h7vwIDorXvSdM/KRrb1U5hNf0hg=; b=untaISGLzfmjATphKHsemodWNF2sM+HpIC5dFgOs23GpywiBu2MzlQgJtObtaBjpsK glutxA60TWu8YhKIKS7eiXshF6cNOrQjLhFMuMGKtRpn5A/7MocnXToYhCQcCt516zt5 TfFBSNHwg7qfYDyAPlOIL46ESUiJ9PQwzMqeSyCNZnDhGFfW3TT4qZt2reWOr3BtXmhm FItjEbCS4wcD0Er+IN6UtTrOlJopgz7/bh62Gec84kajT+uq8msT+63vZPhmO2EDRJF7 P7xjH7aSLAfe5Nc2i+gnSpO14F6Mrts+sTDPVzHKk5M+SHDWsyeo2q+5PtFsmJnZIyaj me2A=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"l/9v0DWs\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410847@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410847@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 14:46:52+00	alvherre@alvh.no-ip.org	Re: EINTR in ftruncate()	<20220714144652.jph7exiywushg4gc@alvherre.pgsql>	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	81	8716	[]		On 2022-Jul-15, Thomas Munro wrote:\r\n\r\n> I checked that this throw-away assertion doesn't fail currently:\r\n> \r\n>         if (IsUnderPostmaster)\r\n> +       {\r\n> +               sigset_t old;\r\n> +               sigprocmask(SIG_SETMASK, NULL, &old);\r\n> +               Assert(memcmp(&old, &UnBlockSig, sizeof(UnBlockSig)) == 0);\r\n>                 PG_SETMASK(&BlockSig);\r\n> +       }\r\n> \r\n> ... but now I'm wondering if we should be more defensive and possibly\r\n> even save/restore the mask.\r\n\r\nYeah, that sounds better to me.\r\n\r\n> Originally I discounted that because I thought I had to go through\r\n> PG_SETMASK for portability reasons, but on closer inspection, I don't\r\n> see any reason not to use sigprocmask directly in Unix-only code.\r\n\r\nISTM it would be cleaner to patch PG_SETMASK to have a second argument\r\nand to return the original mask if that's not NULL.  This is more\r\ninvasive, but there aren't that many callsites of that macro.\r\n\r\n-- \r\n√Ålvaro Herrera               48¬∞01'N 7¬∞57'E  ‚Äî  https://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Thomas Munro <thomas.munro@gmail.com>"], "Date": ["Thu, 14 Jul 2022 16:46:52 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657810030; cv=none; d=google.com; s=arc-20160816; b=1D8UxygOggU7qBtmgiLC9tazUKCgetfk4MF8b1344PzjbsjqyqVl6MdhB09oN3BIV+ 4UZ5cwLS4S7Web7O7a6Osasm17AYoktbHlaClrQJVl4TrDAchT8/0W+OWOMkk2SmH1Ue sT/BRDe1T46Qb732AVAOhoJ8P3tuFP4Hrc7G9PFpcBZbg6Ux3LTUEBcM1Hxs9u64JJAp aEHcNXuRvkLyHH9qFsUmSZ7RZJgRm0+IXl6zJBstCPbdhXEBHYDzWHlOTW2MWYsE1Sgp CoqQR7UWWCRY5koP0fZfZreXROPUw/Xx6l7gzNgZybvvD1s1aVlGBfB9N97FFZjsor0Z YV1A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp157557jai; Thu, 14 Jul 2022 07:47:10 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n12-20020a5d598c000000b0021dbd7d3b3csi2104104wri.469.2022.07.14.07.47.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 07:47:10 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410856@lists.postgresql.org>) id 1oC07R-0001iL-QJ for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 14:47:09 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oC07M-0008TJ-Hb for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:47:05 +0000", "from wout3-smtp.messagingengine.com ([64.147.123.19]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oC07J-0001nf-Oa for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:47:03 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.west.internal (Postfix) with ESMTP id 597423200A12; Thu, 14 Jul 2022 10:46:57 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute5.internal (MEProxy); Thu, 14 Jul 2022 10:46:57 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 10:46:56 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id E27CA36E; Thu, 14 Jul 2022 16:46:52 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:YCzQYnJ9lCR20ig7ZOTNs9jBRH3MjlTSdu4Tkyqjp_U3AzpJpCRThQ> <xmx:YCzQYuKZSbnbV-Gt-z8qtF2euLgCOMCtHrcIRVUUWXPzQxsNyEo1wA> <xmx:YCzQYowt1l0FdyG4Juj7XLKUJtxxU30XPDAMhe12Se2j4Mug7ulQyw> <xmx:YCzQYggF3_ufTIMEiCm4JtYbNAYUdt2F5V2fE2P_dxnQL8MAfriY9Q>"], "X-Received": ["by 2002:a5d:558f:0:b0:21d:9a5e:6b3c with SMTP id i15-20020a5d558f000000b0021d9a5e6b3cmr8463720wrv.649.1657810030268; Thu, 14 Jul 2022 07:47:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714144652.jph7exiywushg4gc%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410856@lists.postgresql.org>"], "X-Me-Sender": ["<xms:YCzQYq5ToMEh9uQ38H4cFs_Te2oHeQ5QK5BmiiCragH4e2T-dcDfMg> <xme:YCzQYj4R0MwGRRClwOtd06ld2Vr-OG3fko3HEGwDoT29aZAl4wSv3X66RfxB7sMsM Em2MhcA6iBww6MNCA>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410856@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:YCzQYpdjncRZO2ZEnl1MaatGd3GQHF34Bos_nMicyodWSJf3TNFvq2-TN_VDJETF1LiZCwLboLsStJAAUnRPI0pLrJSmQCqtqhvf7S19rLc98f5o0bSpJB9_9ftKH5Xa96c>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657810016; x=1657896416; bh=O eO2NAGrkqLETJ2XKyL4sdQVL38sBz1VirLU/ikmXb0=; b=U9IOwGwtEdtELwoNO O0scVuw7RqLEJ1Yu6vWxec8LgQDkPL6mQgqz9yFybtXgQ4MGyD1l8g+CRG6N+xap l2dH2yq8OT4XapXyAzIARHYAkx5CnAAxqczlATpEhbVe0irD0CxlndHaPv6c4xmG L4Glil/qjfO/TgPhajhMW32FnO6FV2QnSu9RRJAqMpI1kWpFnNU+O2NIXoCXk5fA BIQzAMij2AgqKe0zY9QL98gHM9GoJRRYCwQqZd5zrf0NPelkkEg8JqhjlkI41Yyb mhruD5LqUIe66igKUTQtM/jd6O5srNCn3MiHMj4umrmdmJiRds3DL0dYcYIiE2Bm ANltg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejledgkedtucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkgggtugfgjgesthekredttddtjeenucfhrhhomheptehlvhgr rhhoucfjvghrrhgvrhgruceorghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh eqnecuggftrfgrthhtvghrnhepvdektdffudfftdffffehfffhjeejhffgieeuueekjeek fffgudffhfduffffueevnecuffhomhgrihhnpegvnhhtvghrphhrihhsvggusgdrtghomh enucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegrlhhv hhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1u64+JboOoP2+zZSxZuqOuRjWmtPee2Chv1HgDurihsRJvqHHCGWVbRyrgLMJNu8kZpixpe"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=OeO2NAGrkqLETJ2XKyL4sdQVL38sBz1VirLU/ikmXb0=; b=M4F94dO5YmOBaHC6jfrQVXpVWsypbrQusVHC8uVqs51X0Pfv97Mb9wtxMxI9gM4y0j /bSZXckEYm0cKmR8E+lbi7QP/t08qITiFGlR5sM6hyQDxt05yQhSUJNOtTvXHO5lBJo/ Uqf6Fudq3c2B8myrj9E3wKaBEDrSozAWj+2ejGW22TDUvqrYiu3UzVAG5WMgIcw6d+hw 7zDxReqvgvX58XKma5HqANHNIKCwTYyFwoTWbMarWANHSpISbIUkY6NngEJvSopnlc4K IYRaDMpl3+QnyEIRy87vCF35dSukRTtZGz4z60TMiDh6JFDewZbyJ4BAZIMo6Sf5gF9s voBQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=U9IOwGwt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410856@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410856@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=U9IOwGwt; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410856@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410856@lists.postgresql.org"]}	["<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 15:27:24+00	tgl@sss.pgh.pa.us	Re: EINTR in ftruncate()	<2835511.1657812444@sss.pgh.pa.us>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	85	5711	[]		Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> ISTM it would be cleaner to patch PG_SETMASK to have a second argument\r\n> and to return the original mask if that's not NULL.  This is more\r\n> invasive, but there aren't that many callsites of that macro.\r\n\r\n[ shoulda read your message before replying ]\r\n\r\nGiven that this needs back-patched, I think changing PG_SETMASK\r\nis a bad idea: there might be outside callers.  However, we could\r\nadd another macro with the additional argument.  PG_GET_AND_SET_MASK?\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Thomas Munro <thomas.munro@gmail.com>, Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Thu, 14 Jul 2022 11:27:24 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657812459; cv=none; d=google.com; s=arc-20160816; b=v0HQT8m9+D/F3/mjHkXacGnVv/bfYUfN77ztVs0amKXpEri7AUQsOJIp4oZYfdYBla sfVIsXAqHpKGFGsFNA6At3NTawiBgjvYg9eKpj27SPyKSOfJ+UCE2L8RV2GHIzTShDZA DHGhM76tEkUlqP83ecCBtwquO5YNaZwZcxKIwT8UqYDwJvO0n8dVWOmhdzqhJyXtKPcA /hcMV4BYa9LpUOjtFIq/CRyraCc6xg5vBvQ3IeRkOLMpmYZhqoJY09We3CHVAzW9boyp vb4ZR3R6qtygN72jiyLqinkmAfQDsDU2JtXFFxTckMuIJIb/mD+QmXU9P3LSm5jozdMe Gd7w=="], "Comments": ["In-reply-to Alvaro Herrera <alvherre@alvh.no-ip.org> message dated \\"Thu, 14 Jul 2022 16:46:52 +0200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp167095jai; Thu, 14 Jul 2022 08:27:39 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n35-20020a05600c502300b003a2f217e0fdsi8005933wmr.30.2022.07.14.08.27.38 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 08:27:39 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410867@lists.postgresql.org>) id 1oC0kc-0001bB-LJ for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 15:27:38 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC0kY-00084T-02 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:27:34 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC0kR-0004JG-OK for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:27:33 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EFRO9n2835512; Thu, 14 Jul 2022 11:27:24 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2835510.1657812444.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2835511.1657812444@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql>"], "X-Received": ["by 2002:a5d:4302:0:b0:21b:a641:9a36 with SMTP id h2-20020a5d4302000000b0021ba6419a36mr8341868wrq.87.1657812459020; Thu, 14 Jul 2022 08:27:39 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2835511.1657812444%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410867@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410867@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vql/M+yaBzioHDGHwv8UwlJ4zr5mbkJQIEHH3pESKWmjfcGtmVrCwM3Cnvrdjz1c05qo2X"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=3G+aSwSaGBXBb7mXG/3QTV0qQHG/lniTc8iYWPoNUnQ=; b=L0E9utQGKohfR5tNVdwTGBnUJkiVTJVltppS/pZI5QWQQt4aq2bKGzb5JizC6mTyc5 3pCBJgrOIw3BC5VWqoG+IyPhZDhiaGiuUK9m18y7nNjWi7eRLNDuu812pepfa9Dj/Zcq l1iyxhSD20nZf480N5m/C5QFxgRLQAwTFgHDVDFhV0s0rJbpXpS9m+4mwmpcU4uLUZEN DKDZHU72ZuRnYf+S/gsD+wNy6m8YAY1Qeu/vA7fElNLkJADl1Pkc4eULsOBkwW6af5qp QjFunatkzKoHNK4Iwnzb+9Jxq5xdjmvLqA7wRb84kpfNpF4knngZT8ZUzXKdBxh0Mqex 1F/A=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410867@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410867@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410867@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410867@lists.postgresql.org"]}	["<20220714144652.jph7exiywushg4gc@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 14:53:37+00	tushar.ahuja@enterprisedb.com	Re: replacing role-level NOINHERIT with a grant-level option	<8210e573-c861-fe45-302b-56d7352aae48@enterprisedb.com>	[{"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "Joe Conway", "Address": "mail@joeconway.com"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bossart, Nathan", "Address": "bossartn@amazon.com"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	82	10136	[]		On 7/11/22 11:01 PM, Robert Haas wrote:\r\n> Oops. Here is a rebased version of v3 which aims to fix this bug.\r\nI found one issue where pg_upgrade is failing\r\n\r\nPG v14.4 , create these below objects\r\n\r\ncreate user u1 with superuser;\r\ncreate user u3;\r\ncreate group g2 with user¬† u1;\r\n\r\nnow try to perform pg_upgrade from v16(w/patch), it is failing with \r\nthese messages\r\n\r\n[edb@centos7tushar bin]$ tail -10 \r\ndc2/pg_upgrade_output.d/20220714T195919.494/log/pg_upgrade_utility.log\r\n--\r\n--\r\nCREATE ROLE "u3";\r\nCREATE ROLE\r\nALTER ROLE "u3" WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB LOGIN \r\nNOREPLICATION NOBYPASSRLS;\r\nALTER ROLE\r\nGRANT "g2" TO "u1" WITH¬† GRANTED BY "edb";\r\npsql:dc2/pg_upgrade_output.d/20220714T195919.494/dump/pg_upgrade_dump_globals.sql:47: \r\nERROR:¬† syntax error at or near "BY"\r\nLINE 1: GRANT "g2" TO "u1" WITH¬† GRANTED BY "edb";\r\n ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† ^\r\nThis issue is not reproducible on PG v16 (without patch).\r\n\r\n-- \r\nregards,tushar\r\nEnterpriseDB  https://www.enterprisedb.com/\r\nThe Enterprise PostgreSQL Company\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "tushar", "Address": "tushar.ahuja@enterprisedb.com"}]	{"Cc": ["Nathan Bossart <nathandbossart@gmail.com>, Joe Conway <mail@joeconway.com>, Tom Lane <tgl@sss.pgh.pa.us>, \\"Bossart, Nathan\\" <bossartn@amazon.com>, Stephen Frost <sfrost@snowman.net>, PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Robert Haas <robertmhaas@gmail.com>"], "Date": ["Thu, 14 Jul 2022 20:23:37 +0530"], "From": ["tushar <tushar.ahuja@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: replacing role-level NOINHERIT with a grant-level option"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657810440; cv=none; d=google.com; s=arc-20160816; b=K1lDsOS26uh2TTdsSjp31dtzUQN9H9RsZljyl7hphDMCOtba6I7IeSFIbWQexhDtwC 1FjdiI+fiWK90GqosthBrshUXf/bLLwEqynRJ7GwdIByXf2euL1lFGF71IJJlWNqXHG1 4ocru7HedXbDAcsKTLGtNmZ+9vaPC4RDzFOQ0tc3bOjhnnA6Dl7H3PITfm1xodROYWht SCqaUyZAggICaqqcWcqLfkCInQBa+8lXgVqeHnDDko+76eNJ9sf1i91rLxb2WBO174Ev qWa+DxxGKaJ/8fyTv1r1RYwznANNvOQT2nk8wHLtDyelF/+OgxK1tOAz+NS0wWkgRwr4 L62Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp158828jai; Thu, 14 Jul 2022 07:54:00 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g12-20020a67d48c000000b003562fda61dfsi280516vsj.12.2022.07.14.07.54.00 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 07:54:00 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410858@lists.postgresql.org>) id 1oC0E3-0005yF-F2 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 14:53:59 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tushar.ahuja@enterprisedb.com>) id 1oC0Dy-0004UX-2I for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 14:53:55 +0000", "from mail-pl1-x62a.google.com ([2607:f8b0:4864:20::62a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <tushar.ahuja@enterprisedb.com>) id 1oC0Ds-0001qi-JJ for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 14:53:52 +0000", "by mail-pl1-x62a.google.com with SMTP id k19so624315pll.5 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 07:53:48 -0700 (PDT)", "from localhost.localdomain ([114.143.109.178]) by smtp.gmail.com with ESMTPSA id c128-20020a624e86000000b00525231e15ccsm1774751pfb.113.2022.07.14.07.53.43 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128); Thu, 14 Jul 2022 07:53:45 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<8210e573-c861-fe45-302b-56d7352aae48@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<20220701025830.GA369935@nathanxps13> <12e2f0cb-08ff-c65f-d31e-76cea1af70ec@joeconway.com> <CA+TgmoZRO3tO_w+ROHW6Xe1fmQfzVyPuZ5OtbYX40w3YBQkMwA@mail.gmail.com> <442d7887-645d-0e31-e971-7a8dc8952d2f@joeconway.com> <CA+Tgmoaw_k2jooV214S=2bOBDPPLo7Nnq27-UGp6MNTfk11x5g@mail.gmail.com> <CA+TgmoYbjr6F6V3zVp0p4Jjd8jZf9TuCV1iHZ8w-fw9NGanW9w@mail.gmail.com> <20220701211225.GA418166@nathanxps13> <CA+TgmoaS-RuSxbzRek9SUn-9ZoN=dSw1qXutkvxQegSuZUwYDA@mail.gmail.com> <20220702221635.GB1044460@nathanxps13> <CA+TgmoZCE8r93EfdJxGoLYbf9qa0nai33Y6cP16N-DXb1G941w@mail.gmail.com> <20220703171742.GB1048244@nathanxps13> <CA+TgmoZ90mLF6qogXuoyQYVoO7UcRfr1Mdnp=O+W10gNx_iObA@mail.gmail.com> <CA+Tgmoa5Sf4PiWrfxA=sGzDKg0Ojo3dADw=wAHOhR9dggV=RmQ@mail.gmail.com> <CAC6VRoZLfROLLsCOVkOSmPRwRS5h4Wyw_ntwaQ1K9s_HQp9Y+w@mail.gmail.com> <CA+Tgmobep7Zi1MCKhhUa1HnJZahf+Zj3aP7OoPAQzcAvEv56cw@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Thunderbird/78.14.0"], "X-Received": ["by 2002:a05:6102:410:b0:357:9087:d584 with SMTP id d16-20020a056102041000b003579087d584mr3085048vsq.24.1657810440361; Thu, 14 Jul 2022 07:54:00 -0700 (PDT)", "by 2002:a17:90a:7ac4:b0:1ef:a606:4974 with SMTP id b4-20020a17090a7ac400b001efa6064974mr16819750pjl.51.1657810427088; Thu, 14 Jul 2022 07:53:47 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/8210e573-c861-fe45-302b-56d7352aae48%40enterprisedb.com>"], "In-Reply-To": ["<CA+Tgmobep7Zi1MCKhhUa1HnJZahf+Zj3aP7OoPAQzcAvEv56cw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410858@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=utf-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410858@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=subject:to:cc:references:from:message-id:date:user-agent :mime-version:in-reply-to:content-transfer-encoding:content-language; bh=/JhRtqyidVMi3rWP/EOBhwgF+IMAdh7T+kQmFL0OrW8=; b=ODH6f/t3kB06Z+nH6qxvGuO6UO4xfAdUXZg2CI/Y4SoERdDaS9mHeNkyXCdp+HSBEf BqQWjG5glF8WBEY9uYmEQtRSfqGK/jIoKb8BqGM5A+vWTZrstbYGy8GQm4RGJpSs8pEk U8HabxoOrL08cUYTOr70fCd6lcw9R4d9vZCdvQAW6YVS6ZrsbWTXEzScM522Xm1Q2Jrm SdHyP1pgoQuJ09TsjKyTTUROrjzkBmJMvH9wtvzCjZpkcgNZjfFi3je36Q8i+yhoZK9W yWCdrwX8z1rA9eXJT/7RqEi5MyDzkC+Dtcm2JgryNeDdbCr3QAMW7OY61BZeLCYNBLam Disw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8hKU/9jE69qLuZ3d8tIIuHM22xy4qjeR0+i5ftH2nVkWihtv4Y /D8X+C8rzUeqVSfXkJoQVHoO7oF17yzVfEP9uurKT1m5jbL26nvA9u+kBUCqzpkPqqTR4z6bIlO ObmFIXhvS8HdeHlWuk3ctCqfgo1QzXVdzUPxRQEAAwUQP0auckG4Teiqi3sFhxRoCgKPAO0+mog LrmxLUxFmBts2zgnj6ePiVwcbKJz6p3BncvjlGPNuqdszmwhWdeEAldhw+dCL39j4J1qQwUC8yQ 4gfmvxxXfUetuHqUbP1bl26ioIsEQfWn45Tgg=="], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1tCzSNV1bAJ3Al9ufRECTeM32DeguX/8uzKoYfsLoFiamQD/qWR2osxfl1LoqdTQ8jHaWQ9"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:content-language :content-transfer-encoding:in-reply-to:mime-version:user-agent:date :message-id:from:references:cc:to:subject:dkim-signature; bh=/JhRtqyidVMi3rWP/EOBhwgF+IMAdh7T+kQmFL0OrW8=; b=ri6YY+DUnr0CisRwL0L3RfdmBu9AErb7SMH8JvN+IcqhcCxQCxgcrWRJnmC5e3rwe/ qfwFFw6c36aiknkaoc3GDigNwWjf3NxWdbmBOUop6l4gLwqF+Ru1pbesasu1eJ0EOJ3K WM9TNhVyqUlgDiPmI5BZZDu6VjERjKzWLz1k8/6ZcB1T54575XPbGq0373viaFGMLqj/ mMIPgLlPsZws2tsy118mFDJVWzaqT7N3607Wlm7AEu0e4TVUA5Fr6ikGbARbFrnRO6gM 2l1jvJfP+ZH8ErG8dw6flmmv2o0bGAOnf7//ZBhoibzM/rloHQp5Ci2h5b6mLKW2dA/X 4r4g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=\\"ODH6f/t3\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410858@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410858@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:subject:to:cc:references:from:message-id:date :user-agent:mime-version:in-reply-to:content-transfer-encoding :content-language; bh=/JhRtqyidVMi3rWP/EOBhwgF+IMAdh7T+kQmFL0OrW8=; b=fps725r9DoBIYf0MHLTzlZezZy0fYA6H1DDR/7J8HLTusoykQTd5WTuJp1V4emSuOk 9i/90myFz3rUOFH+TyYIcYGo+IEoNslQ6SN6n4PmWqodH9gznrLoWsHR3xcQaoTnYOt0 3ZwPrlyp1RiXyZ/koxL9ei92SccvvGzX6+4PjlYs9Ph7BNJbUEv+Z8McyuOtiu2Z9EIG R6tH/rU4FGeOc04GKAYNYccMuWuHh3n6zsPRkwPy911CJ4otgaJei4CzA/n4yuozjMy+ IFE2W8hJ2/wRXyFn6BQjwvc8oYu2AZw5ChXoPvPqQWF6tfHvHSbm35T+325BP3CS2prE WoBg=="], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=\\"ODH6f/t3\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410858@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410858@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CA+Tgmobep7Zi1MCKhhUa1HnJZahf+Zj3aP7OoPAQzcAvEv56cw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 15:24:49+00	tgl@sss.pgh.pa.us	Re: EINTR in ftruncate()	<2834561.1657812289@sss.pgh.pa.us>	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	84	6467	[]		Thomas Munro <thomas.munro@gmail.com> writes:\r\n> ... but now I'm wondering if we should be more defensive and possibly\r\n> even save/restore the mask.\r\n\r\n+1, sounds like a more future-proof solution.\r\n\r\n> Originally I discounted that because I\r\n> thought I had to go through PG_SETMASK for portability reasons, but on\r\n> closer inspection, I don't see any reason not to use sigprocmask\r\n> directly in Unix-only code.\r\n\r\nSeems like the thing to do is to add a suitable operation to the\r\npqsignal.h API.  We could leave it unimplemented for now on Windows,\r\nand then worry what to do if we ever need it in that context.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Andres Freund <andres@anarazel.de>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Thomas Munro <thomas.munro@gmail.com>"], "Date": ["Thu, 14 Jul 2022 11:24:49 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657812303; cv=none; d=google.com; s=arc-20160816; b=w9Wd6OP1QL2VJLeWqdyWvc20x07WT36qReCqMx50x7xlSsauEyil7rnLMW2dsO9TRb MzKPmsIDEWxBW/azQAIrv/9UWqNBDGUmPHWbjkKVhtJxcOiIK523NVWTG0BXKi8ImG8+ /9550zlYzpqTx+I0KncbkU3Fo/3NHmvz81xXz8df11zOhjAepLg8EPXGUrf9XT8zHTdi yk66bqVks0gbfN5mePwPHJAdO0WnlxLYQd7N3JPfxAHij3oAx3MNGF93knkmFO+t0tDy KGhb4QDjKNhuySXpMgrYCqt+OMek5BdyLfUiW+cKGUr+a/zL8+eydu4xYyvxmFQM1yGV rZ6Q=="], "Comments": ["In-reply-to Thomas Munro <thomas.munro@gmail.com> message dated \\"Fri, 15 Jul 2022 02:26:10 +1200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp166648jai; Thu, 14 Jul 2022 08:25:03 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c14-20020a056000184e00b0021d6a1e7c4fsi2690644wri.188.2022.07.14.08.25.03 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 08:25:03 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410865@lists.postgresql.org>) id 1oC0i7-00033q-0o for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 15:25:03 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC0i2-0001LC-9C for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:24:58 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC0hx-00024H-9B for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:24:54 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EFOnu42834562; Thu, 14 Jul 2022 11:24:49 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<2834560.1657812289.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<2834561.1657812289@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220706002015.57q6dvife3c3fjxz@awork3.anarazel.de> <20220706192941.av3nxh4sdozyn5qz@alvherre.pgsql> <20220706203859.qbem3yjlvx2xbegc@alap3.anarazel.de> <CA+hUKGKS2Radu-1Ewhe1-LEj19C-3XAQ7wnkQMb4e9E9q9ZXSg@mail.gmail.com> <20220706210323.bjjzokyj6nzvofm3@alap3.anarazel.de> <CA+hUKGJj=+GVjtLaeT7sD1gnS6tn=4Lb5+iACf4RT7wBuguLZg@mail.gmail.com> <CA+hUKGJSm-nq8s+_59zb7NbFQF-OS=xTnTAiGLrQpuSmU2y_1A@mail.gmail.com> <20220711174518.yldckniicknsxgzl@awork3.anarazel.de> <CA+hUKGKfH8kfF_SUqAxxxOTX=EvwdgJx61d89Hj--mKnhOjGEQ@mail.gmail.com> <CA+hUKGKNpK=2OMeea_AZwpLg7Bm4=gYWk7eDjZ5F6YbozfOf8w@mail.gmail.com> <CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"], "X-Received": ["by 2002:a5d:5244:0:b0:21d:866e:2409 with SMTP id k4-20020a5d5244000000b0021d866e2409mr8727564wrc.400.1657812303515; Thu, 14 Jul 2022 08:25:03 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/2834561.1657812289%40sss.pgh.pa.us>"], "In-Reply-To": ["<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410865@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410865@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1usNNlMOqwJegIWz9m2c/pA8HgDjEgLWfvjVVSf3s7Z5V+dAg7K1JblxvaW0IAlIIqJCMrV"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=/cO7njj+9f96WoLM2s9CH4ctFdwAaDqvuB+4rMLmE1s=; b=LTSG/BOLnDWJ8pcpD4Qz0AUOgpNnpifc3VmLYjt9LMt3PxVTnheIRWovUn1ef19cnY oj4cXKHPj3Clax0USApVfLyKnHfaegBrlaf02W357WOUCK/y0xpoGAA7Mn3aaWbyw66I HKUYOP3xSiPln5tCA8yx5raUjXiMSov1b82DV4H4gHCwQtm1RrvdV+d7yN2Mt5ehcMXY qjL1LakBHjDeAG5gH4ZpU9RNDOBYh1Qk0J1N6a8kzAEiIh3UzWZ0cpUtpvnZKytG1O3R PiG2TF9I8CwEuoLwfYZGj3zt5KAR8+wWQIXrb0rfQTFg+2orMsabQyZDVaPzb99wrXKs YFoQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410865@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410865@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410865@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410865@lists.postgresql.org"]}	["<CA+hUKGKx6Biq7_UuV0kn9DW+8QWcpJC1qwhizdtD9tN-fn0H0g@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 15:15:26+00	bruce@momjian.us	Re: First draft of the PG 15 release notes	<YtAzDpzRr+XClgxr@momjian.us>	[{"Name": "John Naylor", "Address": "john.naylor@enterprisedb.com"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	\N	83	6264	[]		On Thu, Jul 14, 2022 at 01:24:41PM +0700, John Naylor wrote:\r\n> Regarding this item:\r\n> \r\n> "Allow hash lookup for NOT IN clauses with many constants (David Rowley, James\r\n> Coleman)\r\n> Previously the code always sequentially scanned the list of values."\r\n> \r\n> The todo list has an entry titled "Planning large IN lists", which links to¬†\r\n> \r\n> https://www.postgresql.org/message-id/1178821226.6034.63.camel@goldbach\r\n> \r\n> Did we already have a hash lookup for IN clauses with constants and the above\r\n> commit adds NOT IN? If so, maybe we have enough to remove¬†this todo item.\r\n\r\nAgreed, I have removed it now.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>, David Rowley <dgrowleyml@gmail.com>"], "To": ["John Naylor <john.naylor@enterprisedb.com>"], "Date": ["Thu, 14 Jul 2022 11:15:26 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: First draft of the PG 15 release notes"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657811735; cv=none; d=google.com; s=arc-20160816; b=ajSGlgY8dCwt2inzumTeKLx5R6fKOilz5Oe2jaoD2a4Vy7rTMYkuHO7aCOlYWhAPQ5 9SOKbbR735oG2YeKIqJYPwY74nWqFBx7EiHIHd3BAjQo+sLRRZH+fwTERzKj71t1ftKO VnttxlERx2rmDFE5yl+SDQd0FpJfkVkqOK1bG+iR5GO7yEFGrQoTjXvkkbMcYNosDkey yzEaTkCSiDU5g6mniEB+LlMUwkkiHZ3wTzu5nxX5dnLxLDDIMEYrAo3GcfHy2yD4PPvW ap0rPKKp67F8zdcftKg0KdY7WB7byEW1UFSMtMJIGKUfY7To2Kr2NhwtAiSLp7M5Famx vcXA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp164506jai; Thu, 14 Jul 2022 08:15:36 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o15-20020a05600002cf00b0021d163daeb4si3216110wry.500.2022.07.14.08.15.35 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 08:15:35 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410863@lists.postgresql.org>) id 1oC0Yx-000602-A9 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 15:15:35 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC0Ys-0004O8-RQ for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:15:30 +0000", "from momjian.us ([72.94.173.45]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC0Yq-000208-Hx for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 15:15:29 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC0Yo-0094zu-5W; Thu, 14 Jul 2022 11:15:26 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtAzDpzRr+XClgxr@momjian.us>"], "Precedence": ["bulk"], "References": ["<YsSglBBxcPSUDwUb@momjian.us> <20220705215752.GC2648447@rfd.leadboat.com> <YsTNqC5QO2666i+G@momjian.us> <20220706024557.GD2648447@rfd.leadboat.com> <YsWJ3XYbT7qMfpmy@momjian.us> <20220710031941.GB2808420@rfd.leadboat.com> <YsxSXWSS90Yzqqwv@momjian.us> <20220712063132.GB2937407@rfd.leadboat.com> <Ys3BqwfxDAwCDjES@momjian.us> <CAFBsxsFYSOsQmEAeLwOgqfdt48=cO=7nXoMK2eWD=PjemE_BdA@mail.gmail.com>"], "X-Received": ["by 2002:a5d:4e49:0:b0:21d:6e8a:fa3 with SMTP id r9-20020a5d4e49000000b0021d6e8a0fa3mr8274107wrt.528.1657811735860; Thu, 14 Jul 2022 08:15:35 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtAzDpzRr%2BXClgxr%40momjian.us>"], "In-Reply-To": ["<CAFBsxsFYSOsQmEAeLwOgqfdt48=cO=7nXoMK2eWD=PjemE_BdA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410863@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410863@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sGRldUUPWpVEgQMNHoPPR8uK2GmhX0Vid7gw4PCsh4NZ0MpdSEM7RcSb2qDefI8+ld7QCK"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date; bh=B5bNSjZnfOOrC6YeaoHPdSTIKIIU6auZVy9XmuiVOCw=; b=BzKls5QQQ1NaCIyqfty77W/MBV8yedQEqc+19v3KqAsENE3YZ4kQrHOWMDDloYot+n 1d1Z7mFn/qPqu2TzaWzsjgkeGqFmlAhnarx9o0ZqZHlwOC/YMleVPdysRz83XG44yl+K ZwaUElqNpetD8muOmzvsf3C4YMYw5Dy7TP0ExBFN7Ndos7HyOCtc7FYeYptL8jUW6biV w1t8JTY7efBZt/WTeGar9uWAcYOp3Vc5UPZcKPiaL0qC/VvCNVmYLvoTz2IhitrfzNvE bNP5BC95aWAUw/y5q3+W7cu+eDDAcFy7oMH9kdSii/odKEhsQxybrMnwl3tgKZxzurZV wh9Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410863@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410863@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410863@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410863@lists.postgresql.org"]}	["<CAFBsxsFYSOsQmEAeLwOgqfdt48=cO=7nXoMK2eWD=PjemE_BdA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 15:45:52+00	andrew@dunslane.net	Re: SQL/JSON documentation JSON_TABLE	<10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net>	[{"Name": "Erik Rijkers", "Address": "er@xs4all.nl"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	86	12836	[{"charset": "UTF-8", "part_id": "2", "file_name": "json-docs-fix.patch", "disposition": "attachment", "content_type": "text/x-patch"}]		\r\nOn 2022-07-08 Fr 16:20, Andrew Dunstan wrote:\r\n> On 2022-07-08 Fr 16:03, Erik Rijkers wrote:\r\n>> Hi,\r\n>>\r\n>> Attached are a few small changes to the JSON_TABLE section in func.sgml.\r\n>>\r\n>> The first two changes are simple typos.\r\n>>\r\n>> Then there was this line:\r\n>>\r\n>> ----\r\n>> context_item, path_expression [ AS json_path_name ] [ PASSING { value\r\n>> AS varname } [, ...]]\r\n>> ----\r\n>>\r\n>> those are the parameters to JSON_TABLE() so I changed that line to:\r\n>>\r\n>> ----\r\n>> JSON_TABLE(context_item, path_expression [ AS json_path_name ] [\r\n>> PASSING { value AS varname } [, ...]])\r\n>> ----\r\n>>\r\n>> Some parts of the JSON_TABLE text strike me as opaque.¬† For instance,\r\n>> there are paragraphs that more than once use the term:\r\n>> ¬†¬† json_api_common_syntax\r\n>>\r\n>> 'json_api_common_syntax' is not explained.¬† It turns out it's a relic\r\n>> from Nikita's original docs. I dug up a 2018 patch where the term is\r\n>> used as:\r\n>>\r\n>> ---- 2018:\r\n>> JSON_TABLE (\r\n>> ¬†json_api_common_syntax [ AS path_name ]\r\n>> ¬†COLUMNS ( json_table_column [, ...] )\r\n>> ¬†¬†¬†¬† (etc...)\r\n>> ----\r\n>>\r\n>> with explanation:\r\n>>\r\n>> ---- 2018:\r\n>> json_api_common_syntax:\r\n>> ¬†¬† The input data to query, the JSON path expression defining the\r\n>> query, and an optional PASSING clause.\r\n>> ----\r\n>>\r\n>> So that made sense then (input+jsonpath+params=api), but it doesn't\r\n>> now fit as such in the current docs.\r\n>>\r\n>> I think it would be best to remove all uses of that compound term, and\r\n>> rewrite the explanations using only the current parameter names\r\n>> (context_item, path_expression, etc).\r\n>>\r\n>> But I wasn't sure and I haven't done any such changes in the attached.\r\n>>\r\n>> Perhaps I'll give it a try during the weekend.\r\n>>\r\n>>\r\n>>\r\n>\r\n> Thanks for this. If you want to follow up that last sentence I will try\r\n> to commit a single fix early next week.\r\n>\r\n>\r\n\r\nHere's a patch that deals with most of this. There's one change you\r\nwanted that I don't think is correct, which I omitted.\r\n\r\n\r\ncheers\r\n\r\n\r\nandrew\r\n\r\n\r\n--\r\nAndrew Dunstan\r\nEDB: https://www.enterprisedb.com\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Erik Rijkers <er@xs4all.nl>"], "Date": ["Thu, 14 Jul 2022 11:45:52 -0400"], "From": ["Andrew Dunstan <andrew@dunslane.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: SQL/JSON documentation JSON_TABLE"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657813567; cv=none; d=google.com; s=arc-20160816; b=H1tIBH9Hyops2egi24zGj6yARHmjHDjKBg566o7U9ToET2YhS8hxyiAjHPVR3cQ+I6 IvKy/yEi9ILbxnITvrswNT4Ea+FgfvVoIDRqvjdWQ/iinFZRFRVWXc9BYQBGitbpUS24 CmsrM/2j73z0STSrzFuRRqauqzMNEnNm9ER5xpl2/xAMAgyaGemYt152qamhFQq6xYlh RuvKduQokiFO8Bk7LHEfTrHTmn4Vh114+GUrxR9Ik9zeogj7dnQZCen9acJHMv5bUnuw My1xNo62JHXJG7WzYmnvkADVG0T02a8jzWRtjBQ4kUoYwIHKKLLhW0rviez0YQTous45 ezAA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp170573jai; Thu, 14 Jul 2022 08:46:08 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m4-20020a677104000000b003573b093debsi318200vsc.526.2022.07.14.08.46.07 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 08:46:07 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410872@lists.postgresql.org>) id 1oC12U-0004EZ-RM for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 15:46:06 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oC12Q-0002hl-9p for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:46:02 +0000", "from relay11.mail.gandi.net ([2001:4b98:dc4:8::231]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oC12M-0002Eh-Qw for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 15:46:00 +0000", "(Authenticated sender: adsend@dunslane.net) by mail.gandi.net (Postfix) with ESMTPSA id E761F100003; Thu, 14 Jul 2022 15:45:53 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net>"], "Precedence": ["bulk"], "References": ["<7bb38ff6-c4ef-5c5d-4645-185b4ad3d094@xs4all.nl> <b2c5da4d-5ca0-f111-3460-f98851975434@dunslane.net>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.5.0"], "X-Received": ["by 2002:a05:6102:1276:b0:357:6cbf:165b with SMTP id q22-20020a056102127600b003576cbf165bmr3746406vsg.85.1657813567929; Thu, 14 Jul 2022 08:46:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/10c997db-9270-bdd5-04d5-0ffc1eefcdb7%40dunslane.net>"], "In-Reply-To": ["<b2c5da4d-5ca0-f111-3460-f98851975434@dunslane.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410872@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"------------cLPiWX0e3ol8wN1HQnjFMWlU\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410872@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uh8t6kg49xri+dKeCs1cl5NfnAItRLZFa+4hR4heGxQ9prZyaCdDNfa1nwfrZhUk3aydn/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:references :cc:to:from:content-language:subject:user-agent:mime-version:date :message-id; bh=qwVXch3OwKP+d5X2FoB5aiO6ZeIRjSGIg30IyFDbP70=; b=XQS4v8xJ6jAsIXbxEB9lJCUtWfC0WGApawPbw9I1ICfmmevT0MhfwNDRZa5xc68Tdl bI6W9SV3oMopqn41qINXWKBVZLzZ5/SQGJLIbIrm+HsiGtzdNdacvCR9KZIrKM59i1HP X+/pcNWO1Pt1jb5nc/AISHG57I9oEzrUFfW18AOx3oSlkOC8Eq4MG0kXkdrQb/SgCWu2 ucvJ5o0zabVBum1vWRhrXdNEWoXqC/+CnCb1Ojr2tlxyEmQ2dUpWCkVmczqrtnSEgbAU nzG5KVAfV1rw6sRSZc3XtgrCkgmL9aKYYBbz6oClYQIzrMHqFh9IFFjzU1icbTmalyCJ ptlg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410872@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410872@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410872@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410872@lists.postgresql.org"]}	["<b2c5da4d-5ca0-f111-3460-f98851975434@dunslane.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 16:26:18+00	pryzby@telsasoft.com	MERGE and parsing with prepared statements	<20220714162618.GH18011@telsasoft.com>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	87	9251	[]		We've used INSERT ON CONFLICT for a few years (with partitions as the target).\r\nThat's also combined with prepared statements, for bulk loading.\r\n\r\nI was looking to see if we should use MERGE (probably not, but looking anyway).\r\nAnd came across this behavior.  I'm not sure if it's any issue.\r\n\r\nCREATE TABLE CustomerAccount (CustomerId int, Balance float);\r\n\r\nPREPARE p AS\r\nMERGE INTO CustomerAccount CA\r\nUSING (SELECT $1 AS CustomerId, $2 AS TransactionValue) AS T\r\nON CA.CustomerId = T.CustomerId\r\nWHEN NOT MATCHED THEN\r\n  INSERT (CustomerId, Balance)\r\n  VALUES (T.CustomerId, T.TransactionValue)\r\nWHEN MATCHED THEN\r\n  UPDATE SET Balance = Balance + TransactionValue;\r\n\r\nERROR:  operator does not exist: integer = text\r\nLINE 3: ON CA.CustomerId = T.CustomerId\r\n\r\n        postgres: pryzbyj postgres [local] PREPARE(+0x2337be) [0x56108322e7be]\r\n        postgres: pryzbyj postgres [local] PREPARE(oper+0x198) [0x56108322f1fb]\r\n        postgres: pryzbyj postgres [local] PREPARE(make_op+0x7e) [0x56108322f55a]\r\n        postgres: pryzbyj postgres [local] PREPARE(+0x228f2b) [0x561083223f2b]\r\n        postgres: pryzbyj postgres [local] PREPARE(+0x227aa9) [0x561083222aa9]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformExpr+0x1c) [0x5610832227f9]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformMergeStmt+0x339) [0x56108322d988]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformStmt+0x70) [0x5610831f4071]\r\n        postgres: pryzbyj postgres [local] PREPARE(+0x1fa350) [0x5610831f5350]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformTopLevelStmt+0x11) [0x5610831f5385]\r\n        postgres: pryzbyj postgres [local] PREPARE(parse_analyze_varparams+0x5b) [0x5610831f54f4]\r\n        postgres: pryzbyj postgres [local] PREPARE(pg_analyze_and_rewrite_varparams+0x38) [0x5610834bcdfe]\r\n        postgres: pryzbyj postgres [local] PREPARE(PrepareQuery+0xcc) [0x561083292155]\r\n        postgres: pryzbyj postgres [local] PREPARE(standard_ProcessUtility+0x4ea) [0x5610834c31a0]\r\n\r\nWhy is $1 construed to be of type text ?\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Thu, 14 Jul 2022 11:26:18 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657815990; cv=none; d=google.com; s=arc-20160816; b=Bn6Lqtk/jJQvbfro0U4G17MFC2ohtvW9njHaT+7KWv1YKhaudU/8eMVFaqX14Ewq3l aHPHQPU6rlxNCDW6D6CvpweA0CFglZ0Jx0Jk99xWH/CkEPCEGX2AIw6o1IXVRvDK2HrM 0jaW/J1zrwZY1B1RDajY4oXqCPp6LhVuR8nB3hjEddYC5KztgPq98V7O6St/zqcm+tfv bCy4ipH0XctMrg1sWbquCvPPakKpRrljCsZOZn0YZMNcRzRGOkk/r5Wly6BwmmVzSNR1 x99Z2naPRbLcCGQJIigZDPbnxlGQuZ69AqPajsb8Bl6fF0GhDQBuGE/Xyi2PM5iVgUy6 yJyA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp179684jai; Thu, 14 Jul 2022 09:26:30 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m196-20020a1f26cd000000b0037023b19834si463556vkm.130.2022.07.14.09.26.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 09:26:30 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410891@lists.postgresql.org>) id 1oC1fZ-0006An-D8 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 16:26:29 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oC1fU-0004Xs-Qi for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 16:26:24 +0000", "from mail-qk1-x729.google.com ([2607:f8b0:4864:20::729]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oC1fR-0002XD-Id for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 16:26:23 +0000", "by mail-qk1-x729.google.com with SMTP id f14so1617444qkm.0 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 09:26:21 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id e25-20020ac86719000000b0031ec38da567sm1954792qtp.0.2022.07.14.09.26.19 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Thu, 14 Jul 2022 09:26:20 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id E8501800B38; Thu, 14 Jul 2022 11:26:18 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714162618.GH18011@telsasoft.com>"], "Precedence": ["bulk"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a1f:2049:0:b0:374:866b:6dd8 with SMTP id g70-20020a1f2049000000b00374866b6dd8mr4036685vkg.15.1657815990297; Thu, 14 Jul 2022 09:26:30 -0700 (PDT)", "by 2002:a05:620a:f0d:b0:6b5:473d:d4b with SMTP id v13-20020a05620a0f0d00b006b5473d0d4bmr6623811qkl.6.1657815980483; Thu, 14 Jul 2022 09:26:20 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714162618.GH18011%40telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410891@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410891@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:mime-version:content-disposition :user-agent; bh=hkELo5OC0pnOJQeGPMj2Rdpicyo/RPPsL92LOZOeBKk=; b=IvZO8SHjwVXH4yqYCPaZa994/Q9dk+RGvHfSl/vTHQYiUaQiaHO1vlvD8ugUzFlnek amVE4RY77p1xdPbk91xVZu7grueRg3SX+WsYrtTuUUDTBPc+aWdvy01cwfcnDu+179kI mqHH6wovlXnHMsIdtUK5RDARh+WukFJBv/6Jp/0xymHk8NVOr+jHthiPCdbCQu6m6uLA ALED4LcpzZ7KqD8kQ+2Wry+0APjl1AP450PPhDSdcSbKP2+DOQIgGRBCWlE8Aw/4CH/B kHrSocP2EX/KRI+NlALoFrK9w7ir7PF84unEXKlp+g3dfIgLlMj0eC7vqI1fbLs2u0AD TWBQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9vHT2jIlPiqVI+uNk3cV8BEwep+4MhDWxsIMkrVgmIyqTQHDbp IR8YfuczVZ3/Wjq3sDo7BOhF1g=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1ssQ//tYpcWRGz94B1l2SGMz3LB1LETFuWUBlWzEovq76SagGWH/o5gd1CMy+7RBCq+sAAB"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent :content-disposition:mime-version:message-id:subject:cc:to:from:date :dkim-signature; bh=hkELo5OC0pnOJQeGPMj2Rdpicyo/RPPsL92LOZOeBKk=; b=Tda+HQQLVX1by7L3D2qDxuAltIi5SYPhpUUhhGNEz/dzrVy0QDlJ1HyQBZlyfnb3bx zDAHYEsaUFoftgo4WxiwkamLgg2bJsOhkHNiMUmOc1y8wSIyINpPG6sv82ab3Ynp56Ty z7Dzz9o2nw3biFMqHaVr62V8boSsrhbZFuMwlh/pbdtabluxriml3n0U0Eof5rYG56S1 XgMGGBnnYeG2r+0T3+fb20Cb/BzBOaIAlARHWFky2/3vUOsePa/DFK1ddCf9mpOTHC9k ayJMCM31iTiXBtSTqTgErHt9bDSMmGNmxQYk3nm/EPqvwJgxQl6vnUvfhzcCIFoW8bwi /25Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=IvZO8SHj; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410891@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410891@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:mime-version :content-disposition:user-agent; bh=hkELo5OC0pnOJQeGPMj2Rdpicyo/RPPsL92LOZOeBKk=; b=KMUryr0JfC3mwRbdXOggdbFQFURNPno7X+tbwmXyJLOcNummWHMbhxm19BpFX34Duy o+XIGAA/c8aVPoc0kuHCQ+21bfeW3eTB3rMqlQTBtefhou11XZzpqTLXyu7QeihHW1LK IGI26oAjPojOxO7BW3XyOZ6JQr88mPIBdxUxOT3iSAT27HSQVvwWnkGpkbY4CcdCvLig a0eFbHT5Yqvha11kqzV/KixZFzYdGQMsngV1LOazEj+dDrhSb/Qt9ALMsVbaP399n6xL DI1xjuz6oj/jBoBYjVmhM4U1lh6aP1P4TyD05XVl1Mnyj1Jat+j6VvOJZcfQmblEhMAj xkVw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=IvZO8SHj; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410891@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410891@lists.postgresql.org"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 16:32:42+00	vignesh21@gmail.com	Re: Refactor to make use of a common function for GetSubscriptionRelations and GetSubscriptionNotReadyRelations.	<CALDaNm1JrV7LcHTy40-fv0mKpsuVZAEO+VPUS44jsENpWuOB2g@mail.gmail.com>	[{"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	88	19277	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v3-0001-Refactor-to-make-use-of-a-common-function-for-Get.patch", "content_id": "f_l5l91xwm0", "disposition": "attachment", "content_type": "text/x-patch"}]		On Thu, Jul 14, 2022 at 4:34 AM Peter Smith <smithpb2250@gmail.com> wrote:\r\n>\r\n> On Wed, Jul 13, 2022 at 7:55 PM vignesh C <vignesh21@gmail.com> wrote:\r\n> >\r\n> > On Wed, Jul 13, 2022 at 1:13 PM Michael Paquier <michael@paquier.xyz> wrote:\r\n> > >\r\n> > > On Wed, Jul 13, 2022 at 12:22:06PM +0530, vignesh C wrote:\r\n> > > > Most of the code is common between GetSubscriptionRelations and\r\n> > > > GetSubscriptionNotReadyRelations. Added a parameter to\r\n> > > > GetSubscriptionRelations which could provide the same functionality as\r\n> > > > the existing GetSubscriptionRelations and\r\n> > > > GetSubscriptionNotReadyRelations. Attached patch has the changes for\r\n> > > > the same. Thoughts?\r\n> > >\r\n> > > Right.  Using all_rels to mean that we'd filter relations that are not\r\n> > > ready is a bit confusing, though.  Perhaps this could use a bitmask as\r\n> > > argument.\r\n> >\r\n> > The attached v2 patch has the modified version which includes the\r\n> > changes to make the argument as bitmask.\r\n> >\r\n>\r\n> By using a bitmask I think there is an implication that the flags can\r\n> be combined...\r\n>\r\n> Perhaps it is not a problem today, but later you may want more flags. e.g.\r\n> #define SUBSCRIPTION_REL_STATE_READY 0x02 /* READY relations */\r\n>\r\n> then the bitmask idea falls apart because IIUC you have no intentions\r\n> to permit things like:\r\n> (SUBSCRIPTION_REL_STATE_NOT_READY | SUBSCRIPTION_REL_STATE_READY)\r\n>\r\n> IMO using an enum might be a better choice for that parameter.\r\n\r\nChanged it to enum so that it can be extended to support other\r\nsubscription relations like ready state subscription relations later\r\neasily. The attached v3 patch has the changes for the same.\r\n\r\nRegards,\r\nVignesh\r\n	[]	\N	["\\\\Seen"]	[{"Name": "vignesh C", "Address": "vignesh21@gmail.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Peter Smith <smithpb2250@gmail.com>"], "Date": ["Thu, 14 Jul 2022 22:02:42 +0530"], "From": ["vignesh C <vignesh21@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Refactor to make use of a common function for GetSubscriptionRelations and GetSubscriptionNotReadyRelations."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657816388; cv=none; d=google.com; s=arc-20160816; b=sLEqxPESI2IaPH75kFrTOZYW0rKC9OoHeR7Uf6lhrIDH0E/lYIcYCuJzzV9Yt34Mrw kB/ktnX5o2yWxzMNeqtbqwwH8+AopjqS1l2Zx0Jfp+7+GD2ClCimYfAhn1CI5fqT9Zv0 yyUeck0AQ6j2mA78tQ0GgJQccQ/gvDkNDzyKtsxKfX0waxjO8yEHuIGAakRc3s+EEk5v VUXY49PiaNbkNQ0BvpZnP8wi2NqrQgHfvIKqRE0JZ7mOOn9noxzJyf7P3kRhg89d/xS7 8qzVh7GBP4r4zFxWuiq4lHtATEKtRZvS1RlKTM/838tmoWFh6Z7jTnJS4clbgOi7BdnX KC/Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp181272jai; Thu, 14 Jul 2022 09:33:08 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id w4-20020a67d184000000b003578298859dsi363409vsi.259.2022.07.14.09.33.07 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 09:33:08 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410894@lists.postgresql.org>) id 1oC1lz-0000gp-4L for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 16:33:07 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <vignesh21@gmail.com>) id 1oC1lu-0007OK-IY for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 16:33:02 +0000", "from mail-ot1-x32c.google.com ([2607:f8b0:4864:20::32c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <vignesh21@gmail.com>) id 1oC1ls-0004o0-8o for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 16:33:02 +0000", "by mail-ot1-x32c.google.com with SMTP id a14-20020a0568300b8e00b0061c4e3eb52aso1562906otv.3 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 09:33:00 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALDaNm1JrV7LcHTy40-fv0mKpsuVZAEO+VPUS44jsENpWuOB2g@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALDaNm0eW-9g4G_EzHebnFT5zZoasWCS_EzZQ5BgnLZny9S=pg@mail.gmail.com> <Ys53oZ75RF3RxKb0@paquier.xyz> <CALDaNm266bU_RxkbM49pHuxPmd7NP3vHCXaeDSzCPDFWAoBOJg@mail.gmail.com> <CAHut+PtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ@mail.gmail.com>"], "X-Received": ["by 2002:a67:ec50:0:b0:357:79d0:a632 with SMTP id z16-20020a67ec50000000b0035779d0a632mr3731538vso.82.1657816388248; Thu, 14 Jul 2022 09:33:08 -0700 (PDT)", "by 2002:a9d:6942:0:b0:61c:73ec:7ae2 with SMTP id p2-20020a9d6942000000b0061c73ec7ae2mr2660883oto.162.1657816375697; Thu, 14 Jul 2022 09:32:55 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALDaNm1JrV7LcHTy40-fv0mKpsuVZAEO%2BVPUS44jsENpWuOB2g%40mail.gmail.com>"], "In-Reply-To": ["<CAHut+PtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410894@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000002d92ca05e3c67433\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410894@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=xFTuDSI/IVpJvb3b28L1k59PlT14e3CKFm532fxKhGs=; b=YoQR1zFmG5n388iJAPssU5KWe0XRt1qm1G7hm6yMEQ+beRQQqWC79E5aMaiFI0CBSm LQ40mWR/+PhP+dVzekyvZ+R4fFGSsKjbgNBEDJX9S1Q0cQFR2F9JphekRfJXcv02jf4h IHuoaUkXKt4t5ErM6bMtVSUQmBA4TjGaeISk09+Ydbx2o5w7kcrC1Km4gVuQCkTlokR/ SuZIzj8Eg2oFv3KWRxHH2lmuIRX94JKT40J2NDYpcWjcTJ/j/NnKaw5IPHlKaYlk/BPM EkFhR1Xp9OXdNTehkmlB2yAe3hBsKBOULORaeFa1gqjhVre9N38/+WJaG3il5pbxHwRl KjJw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9bGV+lGywOWXbDlhlp5E1gC+ZcqnccL3AlpdhTMGwCG9t5xG/s 6Wrf3HG78FIjguYHCKGYcR9oexy5uIlxlFZSETA="], "X-Google-Smtp-Source": ["AGRyM1vXUNZfqFJnUA1TEyicHQacK6EztzADU1BbR8cjiKPuyGmcW3iXxlxNISawF+inJY5xgP39"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=xFTuDSI/IVpJvb3b28L1k59PlT14e3CKFm532fxKhGs=; b=TCH8SiwuFu3FGiT3iKcNrfm9YpP6YbH9/zjqA4/4BJEGCUDWxAiCYRY3fH6IN9UfN3 B8hsgXv3g7HX1qwmDwpzj/BfM9ZOs24MyTEK8AzOUKjoUeHWCqZIvrj4RsTL2YkPwjU8 /ecAuUDAlYMGiGZJ52wlzvAla/QdKs7zGeZbNYH9sYvh7B29Q9Tmi+vRP+F+/2mwAI7T g0vXgjKIXBsOHSJGS64+1MUWHd0SDQLsv5TELJvCjNYjoEE51jvsVBfe7DfArLkvbxhW 71xBkcT+Y/yCCOUHErBVENOuKLevqwNrdW3ArxGK+Mg+6CIFX9Z1JwFMucylA/u6ymTR RfgQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=YoQR1zFm; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410894@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410894@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=xFTuDSI/IVpJvb3b28L1k59PlT14e3CKFm532fxKhGs=; b=xCy+YADnxlG5DXOHaZa5EkoU4xhWk/mhDJicwWbiCR/x5owph/K+mkxaA2NDuTcMlb NO+wBGeStu8qdT75xsBBRFsoohtW/CsSmmsOwHfZlZZ+XXcMSCi9QG45k0wHy32skkys N6bGODGwdss128ArPwyQld4nM+4evXH+z4y3TWFd2MuGBhssEyq7beYSMgvfcsBe1nZU 3x/8uSeu3Ct1rnRnjPSxMgQJTSS97WVoOtUSfUVMXW2KXu+7lBVPHTOFREAmS4Y2dwWa oOGGo6BRn5ZVuLui9onDziyftyr+A8Uge7CeczNThAQGx6+TAFV7AAOv+bDQ8OEntkxQ dWZg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=YoQR1zFm; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410894@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410894@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAHut+PtGmUuktq-JugG5o68pUkW6fzDZorSa4NCUsVhkrXkAFQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 17:36:39+00	sawada.mshk@gmail.com	Re: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<CAD21AoA93C_a+3MetsY_bq1AQT4Yukf7pRsFPWZc74M=w_2daw@mail.gmail.com>	[{"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	89	10764	[]		On Thu, Jul 14, 2022 at 12:06 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n>\r\n> On Thu, Jul 14, 2022 at 11:16 AM shiy.fnst@fujitsu.com\r\n> <shiy.fnst@fujitsu.com> wrote:\r\n> >\r\n> > On Tue, Jul 12, 2022 5:23 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> > >\r\n> > > On Tue, Jul 12, 2022 at 5:58 PM shiy.fnst@fujitsu.com\r\n> > > <shiy.fnst@fujitsu.com> wrote:\r\n> > > >\r\n> > > > It happened when executing the following code because it tried to free a\r\n> > > NULL\r\n> > > > pointer (catchange_xip).\r\n> > > >\r\n> > > >         /* be tidy */\r\n> > > >         if (ondisk)\r\n> > > >                 pfree(ondisk);\r\n> > > > +       if (catchange_xip)\r\n> > > > +               pfree(catchange_xip);\r\n> > > >  }\r\n> > > >\r\n> > > > It seems to be related to configure option. I could reproduce it when using\r\n> > > > `./configure --enable-debug`.\r\n> > > > But I couldn't reproduce with `./configure --enable-debug CFLAGS="-Og -\r\n> > > ggdb"`.\r\n> > >\r\n> > > Hmm, I could not reproduce this problem even if I use ./configure\r\n> > > --enable-debug. And it's weird that we checked if catchange_xip is not\r\n> > > null but we did pfree for it:\r\n> > >\r\n> > > #1  pfree (pointer=0x0) at mcxt.c:1177\r\n> > > #2  0x000000000078186b in SnapBuildSerialize (builder=0x1fd5e78,\r\n> > > lsn=25719712) at snapbuild.c:1792\r\n> > >\r\n> > > Is it reproducible in your environment?\r\n> >\r\n> > Thanks for your reply! Yes, it is reproducible. And I also reproduced it on the\r\n> > v4 patch you posted [1].\r\n>\r\n> Thank you for testing!\r\n\r\nI've found out the exact cause of this problem and how to fix it. I'll\r\nsubmit an updated patch next week with my analysis.\r\n\r\nThank you for testing and providing additional information off-list, Shi yu.\r\n\r\nRegards,\r\n\r\n--\r\nMasahiko Sawada\r\nEDB:  https://www.enterprisedb.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["\\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 02:36:39 +0900"], "From": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657820246; cv=none; d=google.com; s=arc-20160816; b=qnGoyENKF0iH6Gv5L9qeO5W9SAxcR2i7tzjFgQCuhQUjNFDOp8WmIRd1LFZg3cMvwe TQEK3eMfTW26GywuhooHghQXFm8S3spfGqkpmvxGw/gbn3xdoj432zzIonOulL8jyF53 J7a4ul0iDPlvNr/gyzGsWtJzKqA7bxcFqTtKZjRFwTpZToUDD28TaXIouvv6+I4XYo2Q 96GPoYUijS7UhmzkirbUrb9/9NxzwA8A83Eso7wgcPNr0v6qs5SLsqeP0G3mgjzUN95g ZlhcKm7ttY1KWnTDOIJno48Oh+0Xi09R3AAjoIfwrdJTRGB3FlMlRSQtd1LkY2T5Hcga PaLw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp194332jai; Thu, 14 Jul 2022 10:37:26 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z2-20020a05600c0a0200b003974862e14bsi10587264wmp.5.2022.07.14.10.37.26 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 10:37:26 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410913@lists.postgresql.org>) id 1oC2mE-0001My-9A for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 17:37:26 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oC2m9-0008FV-GX for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 17:37:21 +0000", "from mail-pg1-x533.google.com ([2607:f8b0:4864:20::533]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oC2m6-0003AI-Qh for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 17:37:20 +0000", "by mail-pg1-x533.google.com with SMTP id o18so2183678pgu.9 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 10:37:18 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAD21AoA93C_a+3MetsY_bq1AQT4Yukf7pRsFPWZc74M=w_2daw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <TYAPR01MB6315DC425D32E9579B61EDF1FD869@TYAPR01MB6315.jpnprd01.prod.outlook.com> <CAD21AoAQLeO1LezTZSPGhUAF=QebJUeHePbjCm5DpsKXJyQ7eQ@mail.gmail.com> <OSZPR01MB63102143FE2431519DEF7AFDFD889@OSZPR01MB6310.jpnprd01.prod.outlook.com> <CAD21AoCZ0xpS-PSLa1ot=TijntYsnHKZ=6u6QAocPcO3E08Q5w@mail.gmail.com>"], "X-Received": ["by 2002:a5d:4f02:0:b0:21d:63f6:380c with SMTP id c2-20020a5d4f02000000b0021d63f6380cmr9280630wru.635.1657820246624; Thu, 14 Jul 2022 10:37:26 -0700 (PDT)", "by 2002:a63:585f:0:b0:418:6f73:c2af with SMTP id i31-20020a63585f000000b004186f73c2afmr8687285pgm.114.1657820237309; Thu, 14 Jul 2022 10:37:17 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAD21AoA93C_a%2B3MetsY_bq1AQT4Yukf7pRsFPWZc74M%3Dw_2daw%40mail.gmail.com>"], "In-Reply-To": ["<CAD21AoCZ0xpS-PSLa1ot=TijntYsnHKZ=6u6QAocPcO3E08Q5w@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410913@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410913@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=ebHrSdrKiakcozZA1uL6KqvCKbnxqneF9SKpsUtYaOs=; b=NLwk8yk1Yi7HPR567IojdDvg9HxFk9+vzOrCdofwvO01M4LmGkZ997YYCDRkT2Qts7 tFbexX+v0OtJY/ekZJRxhZ5TIF1j5wIXdERe18LfmMfH1uAmebGLQyx4nJBaxLFEFI0r Gs9Yzgov6zPiUcTZgMREqxWcLpeJ6jGcrqPtFnYibZnbyUbm0lLtwtMaqlA1v/cufrLC 8iZ8IUzY7CzcKd8eE3Y2kL63Z1NaILRjCz6TniCKftGlNl0NTeY+yCf1a1KZebCtz6Pd mGU6gaCCQWsaus5121IGQIIQDC+yQDE4anyTU/uTo0t95tqWnoF18zFghSvaNpUITDhm TxtQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+jMOGbIisCOwxuO590pggUiJeGxEti6RNOCbe78W/qZv5OROZH /HGyPShn3i2H80835Wq8zeRYk0HogQOjw77LO7o="], "X-Google-Smtp-Source": ["AGRyM1tZUVjxXq5ng0HiyJEnthxJ2fKS1DDGRTUr5lX1sjzN6QoLMYQEZLMzELnF5j8TNPEETbzX"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=ebHrSdrKiakcozZA1uL6KqvCKbnxqneF9SKpsUtYaOs=; b=I8+Ah+dDpeNBvQ19UmDzhKoDG63NAOheIJrTN97D6oVZAYzPA1zU13LxJMRfZoTYQo uZO4aE2edy6Lh8pHWMMI9XUY9nyZiiK/oDOSic4rn3gQNIFK46lvFAoyh0LQIXc4oXFP FPxv49Fsy1lAWLsk0ReMa/fT9/bacTtUZlv4m6D8pHHu94/S1/lSU26H2pEFhevnrogX eUJMVDLpw/cn2dgdY7uUjD7MHqoM1+IpBduo3/5/+e3nV34XyUHwDNzd4WivRlZBI+JD dpA0QhTJJqw0ed6RXcpN3mwNmzEjOWLvtqhgxYMnVuRxP6i4ktTL4jXKJIKwXfjTBGdd piow=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=NLwk8yk1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410913@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410913@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=ebHrSdrKiakcozZA1uL6KqvCKbnxqneF9SKpsUtYaOs=; b=mW0ojIsg9H16eKJTUzj4X/qNSMJeo0criyl8zEjbMBlx1/o2p+P2DN5/du7t3jvAb9 1TVaz2untSMZPJBcaI/pJYH10MeNAIHXrC08NDce3kLniYw5Y0/bZFvevkOC8nahjME7 btB26Fyg/N+JPtVwzDXjoVNGBvrzuHG+/xUVXdJvdW483Tr9kTo2SbRSn9hmdfZSH94y FU4seuaYjYGHEitf6cmlgKj4kR5yXNnYwebt/X0TGkCls1B1kuH4S6fOBQPMPrchdreV 9dHyei8MPi+Q5u2mk4VZdC1tPtAfNcb5WhEYblsOtLGqjqKWtDs/qVATzAvAZxJ2FLsY ap/Q=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=NLwk8yk1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410913@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410913@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAD21AoCZ0xpS-PSLa1ot=TijntYsnHKZ=6u6QAocPcO3E08Q5w@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 19:18:11+00	bruce@momjian.us	Re: doc: Bring mention of unique index forced transaction wait behavior outside of the internal section	<YtBr8/Wwn0RyBT9N@momjian.us>	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	\N	92	5904	[]		On Mon, Jul 11, 2022 at 05:22:41PM +0300, Aleksander Alekseev wrote:\r\n> Hi Bruce,\r\n> \r\n> > I was not happy with putting this in the Transaction Isolation section.\r\n> > I rewrote it and put it in the INSERT secion, right before ON CONFLICT;\r\n> > patch attached.\r\n> \r\n> Looks good.\r\n\r\nApplied to all supported PG versions.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "To": ["Aleksander Alekseev <aleksander@timescale.com>"], "Date": ["Thu, 14 Jul 2022 15:18:11 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: Bring mention of unique index forced transaction wait behavior outside of the internal section"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657826301; cv=none; d=google.com; s=arc-20160816; b=cA/bqh8XrQfNH3jZH4GMWKJlIX7wBipEVLiWSx4KkxXfDbDelXnumKkAk2seS4DTqT x0JFWARzrtBFkoAhR6qiSLQGX5yHoims1bHNNrp5yKUO6jsumDgVqlyBR6RT4ArRPgvg vIwjUrydkQf96f8hXvnAVX5GBPhGkXiMm+p1bfxO+rZGQ5qg56lLI8QJIyHiLOLy9XeO GJdPWs7F/Ym7tKfscW5PoIqBlKQEeco3tDd+oF1sNxKF+umjCTYSPX3Q3pNpfZHuAnZU VXVLlQwqfE5Xg6m7Wjl6pzO4bpagF7XzPao1uN/1DBQ4zs27KXxZKiKNXVzXs87DQlc1 UwPA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp216260jai; Thu, 14 Jul 2022 12:18:21 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x13-20020a67ae0d000000b0035741b0ac19si490479vse.740.2022.07.14.12.18.21 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 12:18:21 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410947@lists.postgresql.org>) id 1oC4Ls-0003mr-IY for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 19:18:20 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4Lo-0002Br-4M for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:18:16 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4Ll-0006Ij-MY for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:18:15 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC4Lj-00Be4c-F0; Thu, 14 Jul 2022 15:18:11 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtBr8/Wwn0RyBT9N@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwZpbdzceO41VE-xt1Xh8rWRRfgopTAK1wL9EhCo0Am-Sw@mail.gmail.com> <CAJ7c6TPDBaaHPgmj5bs89GofubKArbDBP+GnT=Gc4FO16q4-WQ@mail.gmail.com> <CAKFQuwYGy3rX=G+dVgbthhDRvsEzk9jR6Tj0QGV9C8ALvUAxOQ@mail.gmail.com> <YsjVzy5Aaue0fdDp@momjian.us> <CAJ7c6TPALc5FVaNCsaShOWtZ6xoZkdawDM2aeEbeWYnPrbTFNA@mail.gmail.com>"], "X-Received": ["by 2002:a05:6102:10c:b0:357:758b:8bb6 with SMTP id z12-20020a056102010c00b00357758b8bb6mr4403736vsq.24.1657826301479; Thu, 14 Jul 2022 12:18:21 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtBr8/Wwn0RyBT9N%40momjian.us>"], "In-Reply-To": ["<CAJ7c6TPALc5FVaNCsaShOWtZ6xoZkdawDM2aeEbeWYnPrbTFNA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410947@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410947@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1snUQF+inHm1b1PQgw5aByAQHZdXEKZ7qMrTjYHTRYTnjbWOdxyc4K4l1XTfbO/gw+V1dBN"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=PBg6xDMMNfwrQaQUf+mOfgM3s4t1RA4PHDJ1PSWMFwo=; b=XOQyiKQ0HmDKseNWvCMYnstQgunS/qkjcyQuSmmEA5PZT2pGzg+K9j7/87eJmRpdu/ nIYsYVblD+pCL+aV0PA/EsYZDTjr+r3ObQzD/qyh3jw2jltjiQYfa33arN084kd7Oaja cL2oFeU9pXTSFfNVq2GmhN1qLcm9VQklZgcYFcXZvmV6E5AmG0SJXNOcxLQABPZs5JN/ 5e2sQ+mHX4WFs+Cp90uaMqky2RhjLl5nmHVsUCKs348hSgCU83PKOXbtzm0URL1Xvnf9 G7k4zxkIQfmfoVXW1MrM61LFeGymmT0WeoWPwDCCxN0UdeJqTdfh0IjG1YMnhU1Lv439 8snQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410947@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410947@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410947@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410947@lists.postgresql.org"]}	["<CAJ7c6TPALc5FVaNCsaShOWtZ6xoZkdawDM2aeEbeWYnPrbTFNA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 18:34:07+00	nathandbossart@gmail.com	Re: Pre-allocating WAL files	<20220714183407.GA3126910@nathanxps13>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}, {"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}, {"Name": "Bossart, Nathan", "Address": "bossartn@amazon.com"}, {"Name": "Maxim Orlov", "Address": "m.orlov@postgrespro.ru"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	91	8469	[]		On Fri, Apr 08, 2022 at 01:30:03PM -0700, Nathan Bossart wrote:\r\n> On Thu, Mar 17, 2022 at 04:12:12PM -0700, Nathan Bossart wrote:\r\n>> It seems unlikely that this will be committed for v15, so I've adjusted the\r\n>> commitfest entry to v16 and moved it to the next commitfest.\r\n> \r\n> rebased\r\n\r\nIt's now been over a year since I first posted a patch in this thread, and\r\nI still sense very little interest for this feature.  I intend to mark it\r\nas Withdrawn at the end of this commitfest.\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Maxim Orlov <orlovmg@gmail.com>, Pavel Borisov <pashkin.elfe@gmail.com>, \\"Bossart, Nathan\\" <bossartn@amazon.com>, Maxim Orlov <m.orlov@postgrespro.ru>, Andres Freund <andres@anarazel.de>, pgsql-hackers@lists.postgresql.org"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Thu, 14 Jul 2022 11:34:07 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Pre-allocating WAL files"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657823660; cv=none; d=google.com; s=arc-20160816; b=gizJoes3Wd3pGs4JReKRvuloVlcN+h6AEp8fY/P98hSWGEvxHDoS8+bgWUz9g8WVo/ hrOUDRsfpj8xDkWyQsrG4jzPE1J0ia1i1g0cB878fRaayqQ/QtU7jOAfUR2FZCX+KiE7 0GU1LZ7ucLFMnuATcVM8AiB7VWxZOQnYPfDt41RhIuQ/a5O+MH/vZm+Aw4zCfkpYMg1V ggzNGSPd9SfiSFwcH0Auc43XeVc8rZV88AAjC7dJEZXsF7lWD1muaB1V6N2ijjBsqr8y c8i1MqmBS8PtVOj0Czf481IPNBVq9kD7LmVsI4no7hjUrVQQSAX8fhyUdUcFhpHscqIX jO6Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp207363jai; Thu, 14 Jul 2022 11:34:20 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id w127-20020a676285000000b00357656790f5si459877vsb.654.2022.07.14.11.34.19 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 11:34:20 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410935@lists.postgresql.org>) id 1oC3fH-0005Di-4l for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 18:34:19 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC3fC-0003b2-Ol for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 18:34:14 +0000", "from mail-pf1-x42a.google.com ([2607:f8b0:4864:20::42a]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC3f8-0005mv-TM for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 18:34:14 +0000", "by mail-pf1-x42a.google.com with SMTP id c3so1689486pfb.13 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 11:34:10 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id s10-20020a170903214a00b0016be834d544sm1762600ple.237.2022.07.14.11.34.07 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 11:34:08 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714183407.GA3126910@nathanxps13>"], "Precedence": ["bulk"], "References": ["<20201225200953.jjkrytlrzojbndh5@alap3.anarazel.de> <51BAAB3B-9D3C-4155-B125-42E4F06DCDF4@amazon.com> <163352276350.15435.3988688227048304232.pgcf@coridan.postgresql.org> <CB15BEBD-98FC-4E72-86AE-513D34014176@amazon.com> <CALT9ZEG+R9ne6xTyEVSiLhZ7wJAQ1Jq-9XVZs=zbd_jQJyPTdA@mail.gmail.com> <CACG=ezb5Os_ohi1caZJLKsGJc-nSSqGXFrMjmKw4qN8fG_=NEg@mail.gmail.com> <20220301144044.GG25269@telsasoft.com> <20220301150704.GA1030078@nathanxps13> <20220317231212.GB1415284@nathanxps13> <20220408203003.GA1630183@nathanxps13>"], "X-Received": ["by 2002:a67:d116:0:b0:357:35b:1757 with SMTP id u22-20020a67d116000000b00357035b1757mr4102390vsi.65.1657823660071; Thu, 14 Jul 2022 11:34:20 -0700 (PDT)", "by 2002:a63:3542:0:b0:419:aea6:f8bc with SMTP id c63-20020a633542000000b00419aea6f8bcmr4759876pga.611.1657823648794; Thu, 14 Jul 2022 11:34:08 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714183407.GA3126910%40nathanxps13>"], "In-Reply-To": ["<20220408203003.GA1630183@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410935@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410935@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=FhaOidMhBOhlDMczv/jNTeyaR1Waw86FQdAL0Cv4UNU=; b=dnt29VsE+qVE1ttRnWva6e0i6ojmwa7IhR122JgYKXiH0d/y6JZbja7kSVwJpmA1qF tTv6Uhip3ajlADLxeWJePzfgXgcoOqyEV/Bce6/nVRxEHhd/q71iwc63OBZ5brCWT+fu PRlsUoQqpv+HjfLg1ULfKxe4wBdDAI/VxdxAlKUV/M1DeBOvjFwCSFdavUICJsuO9gG2 0iXFgd+znq1Axu139urGP3WodJWJUSukUklT9RCEqmvw+CKa3Nja8zqnA2F5Tq9fztn2 QIp4VS30nDsv6OhxQ60mByuZNdA2ysdNgo3goeZ+LmVYnOvf7P0FstWG8+oJ+9BjukVE f72A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8sJaZ4o42dDeksDOk9XhAStGxvj+3ZuqR3k6LzNCrin4F1fR+/ YIfOicHFvCi9tvihlHFF/qw="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uXNhccE5hr4gMuMlKWCICHRkx5aIEko5Lu1pYRv9AptbdqzwIBUz9tbavrngErtmP4Dw8l"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=FhaOidMhBOhlDMczv/jNTeyaR1Waw86FQdAL0Cv4UNU=; b=Ez1IKRuAZSnW0mkkS01bt6FbwMfGzISj0nF9N+F3HIM95VUsiCzg8HVaOi1wITpvLJ Iw5JRZ4d6A1uqdwf+vUKSGjqbOp7GD60thKnL5kBM6qlOsqRtrLTcf5Iqg5eXc4REKNI jj6T+00bFqMdQGg7xy58BkvBgM7/5BdihmmCcnqOXQyZJS07f8OF+SjckVBILcaZgg/G RREpDlnu0Uzmd7cXdlOEUexXat9x9HleecFTwLje5qy1ySZ9RZyRRsbXxTkfPLtkiHST PWGRecGxDpf+PwtadhK2mUgg4q1sFavsu0/vWmsXP7MavnjWXeLx074n9jpMvxmEdnMh b5rQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dnt29VsE; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410935@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410935@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=FhaOidMhBOhlDMczv/jNTeyaR1Waw86FQdAL0Cv4UNU=; b=IT+AKMvhunQEkbqqe/7IWvYEGtU8PnntpykgYaIgbOlpCsmP2UrdQ5P6s0D24+hEdr oC5PJa13VIma5qfnLgIwfh2e193JLCYL11XGpThi8/RxKkXZMklOw331XCd5BZ+dJA8M Si1VTkz0zuU0lHvK5AbV8S+dvjuGFYvqGv7CA0Blb1+A2aMGExsTWA0Z6N3htwtCG1cN I5Dph2IBW3/Tn+Es9KEux327+iB0sNyw26sIZpN6T1401nFr0kDXqzKsxcM65LWW1ue0 y3e5dRmYiQc7cd7dQh2MSM3E+llHNVDSnShVw1xACWkrIFwfjAoJgNJOrB7SZGX5LoPB lIpQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dnt29VsE; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410935@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410935@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220408203003.GA1630183@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 18:09:38+00	nathandbossart@gmail.com	Re: optimize lookups in snapshot [sub]xip arrays	<20220714180938.GA3125784@nathanxps13>	[{"Name": "Bharath Rupireddy", "Address": "bharath.rupireddyforpostgres@gmail.com"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	90	11418	[]		Hi Bharath,\r\n\r\nThanks for taking a look.\r\n\r\nOn Thu, Jul 14, 2022 at 03:10:56PM +0530, Bharath Rupireddy wrote:\r\n> Aren't these snapshot arrays always sorted? I see the following code:\r\n> \r\n> /* sort so we can bsearch() */\r\n> qsort(snapshot->xip, snapshot->xcnt, sizeof(TransactionId), xidComparator);\r\n> \r\n> /* sort so we can bsearch() later */\r\n> qsort(snap->subxip, snap->subxcnt, sizeof(TransactionId), xidComparator);\r\n\r\nAFAICT these arrays are sorted in limited cases, such as\r\npg_current_snapshot() and logical replication.  GetSnapshotData() does not\r\nappear to sort them, so I don't think we can always assume they are sorted.\r\nIn the previous thread, Tomas analyzed simply sorting the arrays [0] and\r\nfound that it provided much less improvement compared to the hash table\r\napproach, so I have not seriously considered it here.\r\n\r\n> If the ordering isn't an invariant of these snapshot arrays, can we\r\n> also use the hash table mechanism for all of the snapshot arrays\r\n> infrastructure rather than qsort+bsearch in a few places and hash\r\n> table for others?\r\n\r\nUnless there is demonstrable benefit in doing so for the few places that\r\nsort the arrays, I'm —ïkeptical it's worth the complexity.  This patch is\r\ntargeted to XidInMVCCSnapshot(), which we can demonstrate has clear impact\r\non TPS for some workloads.\r\n\r\n> + * The current value worked well in testing, but it's still mostly a guessed-at\r\n> + * number that might need updating in the future.\r\n> + */\r\n> +#define XIP_HASH_MIN_ELEMENTS (128)\r\n> +\r\n> \r\n> Do you see a regression with a hash table for all the cases? Why can't\r\n> we just build a hash table irrespective of these limits and use it for\r\n> all the purposes instead of making it complex with different\r\n> approaches if we don't have measurable differences in the performance\r\n> or throughput?\r\n\r\nI performed the same tests as before with a variety of values.  Here are\r\nthe results:\r\n\r\n     writers  HEAD  1   16  32  64  128\r\n    ------------------------------------\r\n     16       659   698 678 659 665 664\r\n     32       645   661 688 657 649 663\r\n     64       659   656 653 649 663 692\r\n     128      641   636 639 679 643 716\r\n     256      619   641 619 643 653 610\r\n     512      530   609 582 602 605 702\r\n     768      469   610 608 551 571 582\r\n     1000     367   610 538 557 556 577\r\n\r\nI was surpised to see that there really wasn't a regression at the low end,\r\nbut keep in mind that this is a rather large machine and a specialized\r\nworkload for generating snapshots with long [sub]xip arrays.  That being\r\nsaid, there really wasn't any improvement at the low end, either.  If we\r\nalways built a hash table, we'd be introducing more overhead and memory\r\nusage in return for approximately zero benefit.  My intent was to only take\r\non the overhead in cases where we believe it might have a positive impact,\r\nwhich is why I picked the somewhat conservative value of 128.  If the\r\noverhead isn't a concern, it might be feasible to always make [sub]xip a\r\nhash table.\r\n\r\n> +static inline bool\r\n> +XidInXip(TransactionId xid, TransactionId *xip, uint32 xcnt,\r\n> + xip_hash_hash **xiph)\r\n> \r\n> + /* Make sure the hash table is built. */\r\n> + if (*xiph == NULL)\r\n> + {\r\n> + *xiph = xip_hash_create(TopTransactionContext, xcnt, NULL);\r\n> +\r\n> + for (int i = 0; i < xcnt; i++)\r\n> \r\n> Why create a hash table on the first search? Why can't it be built\r\n> while inserting or creating these snapshots? Basically, instead of the\r\n> array, can these snapshot structures be hash tables by themselves? I\r\n> know this requires a good amount of code refactoring, but worth\r\n> considering IMO as it removes bsearch thus might improve the\r\n> performance further.\r\n\r\nThe idea is to avoid the overhead unless something actually needs to\r\ninspect these arrays.\r\n\r\n[0] https://postgr.es/m/057a9a95-19d2-05f0-17e2-f46ff20e9b3e%402ndquadrant.com\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Bharath Rupireddy <bharath.rupireddyforpostgres@gmail.com>"], "Date": ["Thu, 14 Jul 2022 11:09:38 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: optimize lookups in snapshot [sub]xip arrays"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657822191; cv=none; d=google.com; s=arc-20160816; b=sBXR42eGhbt2tNdlPvbD/F+ITOc6po15GSitWwoLvjkJIh/vNIwTTtO33C3xnzo3F4 PrREWI5Zz1JYpgyWjqU0M5lQ26EvmLXv/VkLh9cmPtHIq4x5qaY//a4/O7608qYzqd7/ o9OIJ39ZdR1ESispLeR68ZCWU3t9GNa17E9pgiCdKdpQfcT5V6IFcbn8e0BoYERnjcHd bSicllEgl46x6WxhiHeIZwiolcdRRHGa5vqW/K/rs6Rq5XampiPnhlBxZm1QGPszFGwh MoQV14xdWgS3DvuSu22NImRivEiRdhFCQDAIjIDqlu+pYK0E+G9fENEAfKfgNbJAEcLv McjQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp202613jai; Thu, 14 Jul 2022 11:09:51 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q17-20020a67d791000000b00356d8b9fd0dsi431580vsj.18.2022.07.14.11.09.50 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 11:09:51 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410920@lists.postgresql.org>) id 1oC3Ha-0000mt-3E for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 18:09:50 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC3HV-0007hZ-IH for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 18:09:45 +0000", "from mail-pg1-x52b.google.com ([2607:f8b0:4864:20::52b]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC3HS-0005Yz-7l for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 18:09:45 +0000", "by mail-pg1-x52b.google.com with SMTP id 72so2311549pge.0 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 11:09:41 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id j5-20020a637a45000000b00419d02e580fsm462478pgn.47.2022.07.14.11.09.38 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 11:09:39 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714180938.GA3125784@nathanxps13>"], "Precedence": ["bulk"], "References": ["<20220713170950.GA3116318@nathanxps13> <CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q@mail.gmail.com>"], "X-Received": ["by 2002:a67:eec9:0:b0:324:c32c:dbdd with SMTP id o9-20020a67eec9000000b00324c32cdbddmr4170260vsp.33.1657822191160; Thu, 14 Jul 2022 11:09:51 -0700 (PDT)", "by 2002:a63:cf52:0:b0:40d:fb07:a793 with SMTP id b18-20020a63cf52000000b0040dfb07a793mr9031215pgj.576.1657822179584; Thu, 14 Jul 2022 11:09:39 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714180938.GA3125784%40nathanxps13>"], "In-Reply-To": ["<CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410920@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410920@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:content-transfer-encoding:in-reply-to; bh=Ce1rkwK/Ahjnms5vQ8qPdsDgO4hzFvNo9TI464sgeB4=; b=iW+blsxnvntkwFQLq5ZDmkXECpM4R/8IZM/FxjLZbm9whCZDa9mjpW7lNngVE/rp1l t7eiOMRHjfLrUqR4VK5LG/nraKEnmuf4U1puXdQQABqqfhGV/XlTN0hZ8LmWKneCcpGT 2/70NYyYiktsWNuDvOF3BycMh1Z7P6lvwRvL+1CFX7jZdDlK69O6qF70QhfkBPcFUgf9 eZVH2LfI3TZIyN6Ul3EfEpxdQ6LVtkPwQ8UB2y4rUeLzI4p/zIB4w5nK0vehDgnxVMmF 6Pd+w8GoA+Otp5v9wR7Os561HY1g7R1oFaM2GvpKkegMUc5qh5q2cwCjVXQ9cmufKFWb 5vxg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/up2f6IGKHJV72ag+h/m/BiM8dtz/tOKu1OZBotFH1rvxY90P0 Q6y12oAhJTWzmqfC3qZlTRQ="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vitxhdCuwXosAlntXMWlLUlJLbU/+5Rx9osal8XuUu1eahEXnHQs9003hQJgI+xygraxbb"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date:dkim-signature; bh=Ce1rkwK/Ahjnms5vQ8qPdsDgO4hzFvNo9TI464sgeB4=; b=XxbYZH1BGZb9iFxX4c0h6qi8Uw7IKx2l77dIM2fkMQltk90zd0UyOu2GIs0KKGEUkh TDntVUJdYizP/vtsFJrj23Xx/joAuRjdymwbj4/SwmtY89fs/sabtwXWI4ur2xNei4JD 1YGQgZn5J6tflrXZETKzuFSog1Q1W2KeB2zWIXIyDz7XfQXnbbT/lcFxhUDue5op2NbQ 2qrP6upvvb6DwOvVW9NvulMDuOtU5yHnZ+zbDRHth5yJFF7MjAQlnhoiBnSWF+tLjtmV 0mf9HzICE3KCMXm8MuCiP5TC0jB9gFtbuBEXQufyfqjhnSHelmaSWtvX+UAY8RsV3wlM PdPg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iW+blsxn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410920@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410920@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:content-transfer-encoding :in-reply-to; bh=Ce1rkwK/Ahjnms5vQ8qPdsDgO4hzFvNo9TI464sgeB4=; b=Hks7MLqPoOdDWvGhU6CTfH0M1EZAH0mlLv3zkD0NI3a+wwM3TS2Gr63cBwLyjHE1gS gf2J4KNuQSnRO/E6Goq622zv8V70WPn1/Jo7wIHqQzIduS6yBVTK1g/FK7nJ4GMnuqYQ WFC+UXRnOJYlQ/t7u5+ELYTxYAIlgP20+Zr/NGo7vW7/SDXvQcEX+ODcoS48R+V3nEE7 3gXQMwplqxiicGJomvaXJuN22pxTTjXeXEXEDcNFDBTr4pG646KanaeWKg80frHAyTbK xICCP3jywRslkPXNXrdMgvUX199kBYVsQ9fr6hu8vUoUQC4iLFrKWH+KEamw6sW/o6xV dvcw=="], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=iW+blsxn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410920@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410920@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CALj2ACUUF0ZZGikWBsX88U1dFs72npfuprh2rp0zw_vxH-7O3Q@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 19:34:54+00	bruce@momjian.us	Re: doc: Clarify what "excluded" represents for INSERT ON CONFLICT	<YtBv3ixsUyKhFY3y@momjian.us>	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	[{"Name": "Peter Geoghegan", "Address": "pg@bowt.ie"}, {"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	93	6729	[]		On Fri, Jul  8, 2022 at 11:18:43PM -0400, Bruce Momjian wrote:\r\n> On Fri, Jul  1, 2022 at 08:11:36AM -0700, David G. Johnston wrote:\r\n> > That said, I still think that the current wording should be tweak with respect\r\n> > to row vs. rows (especially if we continue to call it a table):\r\n> > \r\n> > Current:\r\n> > "The SET and WHERE clauses in ON CONFLICT DO UPDATE have access to the\r\n> > existing row using the table's name (or an alias), and to [rows] proposed\r\n> > for insertion using the special excluded table."\r\n> > \r\n> > Change [rows] to:\r\n> > \r\n> > "the row"\r\n> > \r\n> > \r\n> > I'm undecided whether "FROM excluded" should be something that works - but I\r\n> > also don't think it would actually be used in any case.\r\n> \r\n> I found two places where a singular "row" would be better, doc patch\r\n> attached.\r\n\r\nPatch applied to all supported versions.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["Peter Geoghegan <pg@bowt.ie>, Robert Haas <robertmhaas@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "Date": ["Thu, 14 Jul 2022 15:34:54 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: Clarify what \\"excluded\\" represents for INSERT ON CONFLICT"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657827307; cv=none; d=google.com; s=arc-20160816; b=aDO17z5Sre8zNLBZy50EoDaqPpHk+zy/VlLlBZ9wU57J1eqk8jobb2yrb+6HdlAUBo a5EAKG/MK7mvozncKVni0rUB/3Kuekc9TEA26wzf4m/gfrNRzPL4tPxP7XyEukTZdV2T BopiSqBrOCJ7qSUhlVHA6yviCpwEHctzG94lfGdExRceCUJV8hfmU1lv4qLfARCf6XOK c2BTTn+kc+fG51HCNOAzXZ5LtQGSdeCaKFIBE2PzzDZsD67pofBBsXcMSmwP5arXoWWG vOuWq4bbiGd01XxSbDaSyYdgiPooxSI5svBTvfZ7NQR2U9qfs2T6ehEDUihRSpT44xW7 5fwg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp219528jai; Thu, 14 Jul 2022 12:35:07 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bh22-20020a05600c3d1600b003a2ed5857d2si3390562wmb.62.2022.07.14.12.35.06 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 12:35:07 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410959@lists.postgresql.org>) id 1oC4c6-0004ge-HT for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 19:35:06 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4c1-000395-VN for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:35:01 +0000", "from momjian.us ([72.94.173.45]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4by-00046G-FC for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:35:00 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC4bu-00C3Yi-II; Thu, 14 Jul 2022 15:34:54 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtBv3ixsUyKhFY3y@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwa4J0+WuO7kW1PLbjoEvzPN+Q_j+P2bXxNnCLaszY7ZdQ@mail.gmail.com> <CA+TgmoaJF29UvFJsSLoc5pzi_3-M6JNwf+mh6zERLe+vLwrthA@mail.gmail.com> <CAKFQuwbDFk5ZzDYbaNfmKgHZAOXzgMYVbSrUouDRWPkMj4Mhcg@mail.gmail.com> <CAH2-Wzmx5Q-fakiieGOmv=bvOV_KTA1ObA-OZXVN5N6mc3Se3Q@mail.gmail.com> <CAKFQuwZCb3SuuwzLJ7nsoYOUmXJrjvhAZ76vswn-FeX78L_oGw@mail.gmail.com> <CAH2-Wz=O1=_DCzPCLtjgnh6n=Lwsr-vVv4Ddhd7sQ4yiYgPKHw@mail.gmail.com> <CA+TgmoYnY++qFbGw_2HY7zA5Mzcec2D5vm2RYRHYmXfvGke91w@mail.gmail.com> <CAH2-Wz=AqNjjTuVZxj_CfbS9PJG437UOeb44R-AyFtvuhRAunA@mail.gmail.com> <CAKFQuwaUcRSLNLBXaDOzY5r73G0TQggP2+T22920m6gbTgVzog@mail.gmail.com> <Ysjzk2aq9W9slwcY@momjian.us>"], "X-Received": ["by 2002:a5d:6f11:0:b0:21d:7f60:e5a3 with SMTP id ay17-20020a5d6f11000000b0021d7f60e5a3mr9666748wrb.8.1657827307082; Thu, 14 Jul 2022 12:35:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtBv3ixsUyKhFY3y%40momjian.us>"], "In-Reply-To": ["<Ysjzk2aq9W9slwcY@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410959@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410959@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uLj0HufxYXxw/GwOpHdaSyY3m+1sQDUixr/fHqECoJsDxGoI8SnKoEGf2TssmrtY/0tIxi"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=zRkTOaQoGiQMaZrCLhbFAZowH4kj+J8nLjrtr1SFm8s=; b=RkaIEGybGYCcmrvL/QKWtVsHyGW2Ru1N0HhoCGinUuePiBe1CIBaf5lNvD3T59/3EX U59Wf89zUI+wZHSNH+UMvWmxBowWelxN97P0RNabtuxQgkkwlf2nYxdycJgNQBneAwCx eo/KM13p+6pNeQx9FaLkAsdtHUbiqV8fpja48IoJMzwEYhP46kTE6MtcSzIIqx14FcYN hwtiKgCPN2drbc7Y5wJ7GhfA19e8OIcYcsqSPXfc/RWJY+2KypcYJAzQ5x6e8X4jYWQx 4Qyj1DNUiJKK/zUtWxAVPOojQjPuilSxv0gHFOGRMfPZATZlGQcOo5EdFgTpyEdLndh8 akJw=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410959@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410959@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410959@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410959@lists.postgresql.org"]}	["<Ysjzk2aq9W9slwcY@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 19:44:48+00	bruce@momjian.us	Re: doc: Clarify Savepoint Behavior	<YtByML/PDMm1okkg@momjian.us>	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	94	6489	[]		On Sat, Jul  9, 2022 at 12:59:23PM -0400, Bruce Momjian wrote:\r\n> On Sun, Jun 26, 2022 at 09:14:56AM -0700, David G. Johnston wrote:\r\n> > So leave the "release" behavior implied from the rollback behavior?\r\n> > \r\n> > On the whole I'm slightly in favor of your proposed wording (mostly due to the\r\n> > better fitting of the ROLLBACK command, though at the omission of RELEASE...)\r\n> > but are you seeing anything beyond personal style as to why you feel one is\r\n> > better than the other?¬† Is there some existing wording in the docs that I\r\n> > should be conforming to here?\r\n> \r\n> I have developed the attached patch based on the discussion here.  I\r\n> tried to simplify the language and example to clarify the intent.\r\n> \r\n> I was confused why the first part of the patch added a mention of\r\n> releasing savepoints to the ROLLBACK TO manual page --- I have removed\r\n> that and improved the text in RELEASE SAVEPOINT.\r\n\r\nPatch applied to all supported versions.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["Simon Riggs <simon.riggs@enterprisedb.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "Date": ["Thu, 14 Jul 2022 15:44:48 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: Clarify Savepoint Behavior"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657827905; cv=none; d=google.com; s=arc-20160816; b=KZhwdm9Y4LqbJWNoMqgwuDdEKXlu11mV5J/KhUvA52ah0AJS6occvrmRTq2m2LocDk F7UFFsJNLQoBX+8m6wZMLwa0mB4x7Pzp/scAkddr/BMu4mPZQvNA3qBinlup820znLXf pwF3dNNXCJ6Hx3hZr8rGqtfaFZWIgrS7N6/FjoaBQa55x6n6wHS7aHyfW1nJVNGfJdly rL1k9pCWZ4I211HZpKle47e/wmwmdDgNqmD+iPJZJaIcOxVeFNEfH7Gspk4ZCJqlnuDf IhF832+esMFcK61vbTjciLBP6vGwhIufGwXzaE+9J1GZaSskFiWJNwUNxFDzslULHtrx iwRA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp221169jai; Thu, 14 Jul 2022 12:45:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bd17-20020a05600c1f1100b003a04dd006a9si7134977wmb.174.2022.07.14.12.45.05 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 12:45:05 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410968@lists.postgresql.org>) id 1oC4ll-0005Ry-Bw for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 19:45:05 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4lc-0001ZW-Pu for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:44:56 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC4lY-0006Ym-3y for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 19:44:56 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC4lU-00CQ97-BB; Thu, 14 Jul 2022 15:44:48 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtByML/PDMm1okkg@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwYQCxSSuSL18skCWG8QHFswOJ3hjovHsOZUE346i4OpVQ@mail.gmail.com> <CAKFQuwa+8KSNbqXxS_k1HidcAnN3vbOYMiWzUispbuCaRfKozA@mail.gmail.com> <CANbhV-G_VNmOBw5nijVYJbmTXdMhKtDYQyEnrA+fbNJWSYkwzw@mail.gmail.com> <CAKFQuwaCe-oHVLuXL0e=54EredKUPy8YEHCyuw=x17ycbBK+fw@mail.gmail.com> <Ysmz69O6RXp7574B@momjian.us>"], "X-Received": ["by 2002:a5d:4402:0:b0:21d:8093:138c with SMTP id z2-20020a5d4402000000b0021d8093138cmr9569432wrq.535.1657827905708; Thu, 14 Jul 2022 12:45:05 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtByML/PDMm1okkg%40momjian.us>"], "In-Reply-To": ["<Ysmz69O6RXp7574B@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410968@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410968@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1urmu1gB0RBH7dkJQFmNeHF8ztd1CZM3Xjw6e+cxPiSlV34veSDN3UAgN6BmXhpGZdTWn1T"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date; bh=zdwLWjEpOV1nxZNT7cEziZ8uZXcP9BWz1H07z5OwSPo=; b=ztbKASKDW3aMPjy5y+FVM2enuZoWJfo2w6xPC6N8G8WIMpOAyulCBeD5zrU4rhEUPm /vMUWHfz31L/6eZog4ptP9CDfONhJwhmXkTorBJoLLRMXDqn9JamaGaGglC9WFJDUXlT 0BK6kNYylOQ4nQJiEWiWKPx9k982gwMvtOKxR/7oTf/jsrpR7ryD4JChWGd5fAjzbpKs TInK7WIhRhYiQGDIh6dlW2YjQ0OYyaFbPw6zyhPHe9A1rEUR3Sac28xokiN0ygZbjruw oRakXgv7/VRZXiWptCKvrrJxA1frpqX/wgfTM3SNeWXjZ2Wx/ahVKArDA7wD1T0MrvNa kvxg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410968@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410968@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410968@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410968@lists.postgresql.org"]}	["<Ysmz69O6RXp7574B@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 20:02:30+00	tgl@sss.pgh.pa.us	Re: pg_parameter_aclcheck() and trusted extensions	<3126292.1657828950@sss.pgh.pa.us>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	95	34796	[]		I wrote:\r\n> Michael Paquier <michael@paquier.xyz> writes:\r\n>> Looks like a bug to me, so I have added an open item assigned to Tom.\r\n\r\n> Yeah.  So the fix here seems pretty obvious: rather than applying the\r\n> permissions check using bare GetUserId(), we need to remember the role\r\n> OID that originally applied the setting, and use that.\r\n\r\nHere's a draft patch for that.  I initially ran around and changed all\r\nthe set_config_option callers as I threatened before, but as I did it\r\nI could not help observing that they were all changing in exactly the\r\nsame way: basically, they were passing GetUserId() if the GucContext\r\nis PGC_S_SESSION and BOOTSTRAP_SUPERUSERID otherwise.  Not counting\r\nguc.c internal call sites, there is a grand total of one caller that\r\nfails to fit the pattern.  So that brought me around to liking the idea\r\nof keeping set_config_option's API stable by making it a thin wrapper\r\naround another function with an explicit role argument.  The result,\r\nattached, poses far less of an API/ABI hazard than I was anticipating.\r\nIf you're not poking into the GUC tables you have little to fear.\r\n\r\nMost of the bulk of this is mechanical changes to pass the source\r\nrole around properly in guc.c's data structures.  That's all basically\r\ncopy-and-paste from the code to track the source context (scontext).\r\n\r\nI noted something that ought to be looked at separately:\r\nvalidate_option_array_item() seems like it needs to be taught about\r\ngrantable permissions on GUCs.  I think that right now it may report\r\npermissions failures in some cases where it should succeed.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, pgsql-hackers@postgresql.org"], "To": ["Nathan Bossart <nathandbossart@gmail.com>"], "Date": ["Thu, 14 Jul 2022 16:02:30 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657828963; cv=none; d=google.com; s=arc-20160816; b=kzl3M/8Q3Ghz8mMsPlu38O4R4o2HTqcCL/dbXRyZ4pV7HWOvOwP3yXiS3PhXUZo5FW 0J54hr2H8t6dopjaDbmvq+OT+ypaOIxgOi6EOsP2mRYOasmbCCFZdVpWPG9E3oTmYS88 WWs5kgtJsVxzibYYr0UwYOu8XX+eYVJuUMXb6qsKvJyn5TLiLWIlSdy1AihCKrLAXHPX TuZr1A6NA+NyC5KtoroEkqZTOKtvLjvDbH65MvjFkxo+muPkjEzOH/+XHTxahLnYJA4g E69oBg4p3EY7u4aTTI00vivmgcrIYmOBxQ7ZbgMm9+jPHmcNJvuE/aA8E3sb2dmvTB2z PvAQ=="], "Comments": ["In-reply-to Tom Lane <tgl@sss.pgh.pa.us> message dated \\"Thu, 07 Jul 2022 12:41:00 -0400\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp224479jai; Thu, 14 Jul 2022 13:02:43 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z23-20020a1cf417000000b003a2d4cb4e55si2972655wma.72.2022.07.14.13.02.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 13:02:43 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410971@lists.postgresql.org>) id 1oC52p-0003t5-60 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 20:02:43 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC52k-00029V-6S for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 20:02:38 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC52h-0004Kq-35 for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 20:02:37 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EK2U5q3126293; Thu, 14 Jul 2022 16:02:30 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3126061.1657828872.0@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3126292.1657828950@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us>"], "X-Received": ["by 2002:a05:600c:211:b0:3a2:e982:1c12 with SMTP id 17-20020a05600c021100b003a2e9821c12mr16972197wmi.18.1657828963710; Thu, 14 Jul 2022 13:02:43 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3126292.1657828950%40sss.pgh.pa.us>"], "In-Reply-To": ["<2995921.1657212060@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410971@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"----- =_aaaaaaaaaa0\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410971@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1u38DzS//E5D1cmXtkR7BkBd69lao7OVWtVLN/fN5O25S16HlzpB3uIwVkR1Anf60Kg7qhT"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=UcU3+V2jODbF0EU7H7JnnHQvEtlWDApCCQqoIW1srAs=; b=VdR64k3h/zqg3p7Am06YAh3reMKCw0X3psjFHj+SrIh/5NIURdpqHQFj6m8BnS2KJj GjYaYKH+UqxBMHJj1HWlAFjOxHHNHqXdVB55zLe/eX1+a2kn0Gxhd1VJLRnZxnpxMAD7 9Vn+s4rC0/8uNMxfsORL+f1nIBcvZJjngBKeyczk7QpFvPW+cfCux+KX3nXNUAb6rqw6 5wNf1LJDNDqQi3gb1UkJ6sNbiVZ70fI9O4VzQw7akq06fuxDkvGqvDew21pW8Y+JQ26x 1lOEhkKfUlm7TDqi9yI4GJhDG0Jt8w5t3eSuZmN9tcvYyN24L6k24XdTZMbfsfDEVJq1 RdpQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410971@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410971@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410971@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410971@lists.postgresql.org"]}	["<2995921.1657212060@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 20:07:30+00	bruce@momjian.us	Re: System catalog documentation chapter	<YtB3gvS85M7N1W8N@momjian.us>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Peter Smith", "Address": "smithpb2250@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	97	6165	[]		On Tue, Jul 12, 2022 at 05:16:41PM -0400, Bruce Momjian wrote:\r\n> On Tue, Jul 12, 2022 at 08:56:01PM +0200, Peter Eisentraut wrote:\r\n> > On 08.07.22 18:07, Bruce Momjian wrote:\r\n> > > so I guess we can backpatch this with no issues.\r\n> > \r\n> > It inserts a new chapter, which would renumber all other chapters. That's a\r\n> > pretty big change to backpatch.  I'm against that.\r\n> \r\n> Okay, I can see the renumbering as being confusing so I will do PG 15\r\n> and head only.\r\n\r\nPatch applied to PG 15 and master.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Peter Smith <smithpb2250@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Thu, 14 Jul 2022 16:07:30 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: System catalog documentation chapter"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657829262; cv=none; d=google.com; s=arc-20160816; b=vaUUw0I7+MU/n0SVt6K2ijSjScxHmmRSfNP0CqTuMQ14twZUwOpKFN/PnUb8MMvf/q ymvp6kvyfXIqkqh8KpAPIFxr4Szf3k+R2TCnJQuDFAB8+H2IShuAYM6IcZDveaS/iYbr xHzq5CGNDgLZEvuAi/e+AHdybZe5ywr6ZMxmFBqQa9CVvVtfW2LiwMSHDsIPG9l+zZ/E jeTjywEXIWJ/OX/5CecNrz3M3RlUxMqEJ0OlTuBImlsZD9hjTKCjqk9m/jszfVB9lp/k 7epOYmTgd8ALtVYV1en/HlJgcORpfUBpGJKHSy6V1t6h7O3z0jEMOGXOAykv9qKg2esO 9sZA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp226097jai; Thu, 14 Jul 2022 13:07:42 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id h4-20020a676c04000000b0034bb0094fd8si509711vsc.733.2022.07.14.13.07.42 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 13:07:42 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410973@lists.postgresql.org>) id 1oC57d-00007j-QS for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 20:07:41 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC57Z-00073l-B4 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 20:07:37 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC57W-0006l2-T5 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 20:07:36 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC57S-00Dkk1-SW; Thu, 14 Jul 2022 16:07:30 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtB3gvS85M7N1W8N@momjian.us>"], "Precedence": ["bulk"], "References": ["<1989395.1654782654@sss.pgh.pa.us> <CAHut+PsRbngr0KbFRyKVohiHk=_4mSQYN6RLYDdPNQ1+U76yEA@mail.gmail.com> <CAHut+PtBFWVkCoYepMzVUSYzsc_xLJFRvXdZ0baoSyD+kAPGKw@mail.gmail.com> <YscHJDPyG82tNlqd@momjian.us> <CAHut+Pt-oiv_U=zKqPaqtUjbzSGppBToNRXM_=mNmqsFZh46TA@mail.gmail.com> <YshRHalTZQx1yhTq@momjian.us> <3376434.1657295387@sss.pgh.pa.us> <YshWUYD92cDtlJh1@momjian.us> <cd32f2a4-3904-4cc4-3429-28731313c665@enterprisedb.com> <Ys3kucja+Exhy2Vx@momjian.us>"], "X-Received": ["by 2002:a67:d31d:0:b0:357:2ba3:9fc9 with SMTP id a29-20020a67d31d000000b003572ba39fc9mr4134013vsj.55.1657829262762; Thu, 14 Jul 2022 13:07:42 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtB3gvS85M7N1W8N%40momjian.us>"], "In-Reply-To": ["<Ys3kucja+Exhy2Vx@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410973@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410973@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1tfk/ZdPIoMtbypf2KqNKP1xbiXLPqqdam74Z1wWO5N4EQi5KMXz/cZVICLtPG0e0wyLpte"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=7ToLVb8YRclIjRR9BhV/AFaxOgPwpNsCTp7F13UJoIk=; b=lym3Akmkg6gDAatrG2PYvUc1Bl8Z0sPf1BDUNiHXLJhuxHDfQzdB+fXu6rTLY/v2y4 4bn7zBCyz7XYw3il0UvYV4b6OeOw9ST++X75AVkeC+FNXs2Zfk4691ZzKBfe2H/pCYji uYJSgnWTprWMkcCNB38b7LA03CMLu/EbfbzOV8j4UQU4M5rQIAe7yHySHl3kH+4PEoxD S4VjWiqOZD9C2cZ9l3OekRUaRvwrO8399h7DcAqv9jf6KmQSsOAQtdbSVwZvCCkZQvuC xo9IF8V0ucJ5GKYbFCy9PiqEdkUgwNvByg2KdK+mnbPoB5Y5wns0Jhg9WyO10arxc9oV VFFA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410973@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410973@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410973@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410973@lists.postgresql.org"]}	["<Ys3kucja+Exhy2Vx@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 20:04:23+00	andres@anarazel.de	Re: [RFC] building postgres with meson -v9	<20220714200423.5qfmbaut6e6mbhfe@awork3.anarazel.de>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	96	10264	[]		Hi,\r\n\r\nOn 2022-07-07 12:09:32 +0200, Peter Eisentraut wrote:\r\n> On 06.07.22 15:21, Andres Freund wrote:\r\n> > > Here is my rough assessment of where we are with this patch set:\r\n> > > \r\n> > > 08b4330ded prereq: deal with \\ paths in basebackup_to_shell tests.\r\n> > > \r\n> > > This still needs clarification, per my previous review.\r\n> > Hm. I thought I had explained that bit, but apparently not. Well, it's pretty\r\n> > simple - without this, the test fail on windows for me, as soon as one of the\r\n> > binaries is in a directory with spaces (which is common on windows). Iimagine\r\n> > what happens with e.g.\r\n> >    qq{$gzip --fast > "$escaped_backup_path\\\\\\\\%f.gz"}\r\n> > if $gzip contains spaces.\r\n> > \r\n> > \r\n> > This doesn't happen currently on CI because nothing runs these tests on\r\n> > windows yet.\r\n> \r\n> Hmm, maybe this patch looked different the last time I saw it.\r\n\r\nDon't think it had changed since I wrote it first.\r\n\r\n\r\n> The quoting of "$gzip" is clearly necessary.\r\n> \r\n> What about the backslash replacements s{\\\\}{/}g ?  Is that also required for\r\n> passing the path through the shell?\r\n\r\nI don't recall the details, but it's definitely needed for embedding it into\r\npostgresql.conf. We could double the escapes instead, but that doesn't seem an\r\nimprovement (and wouldn't work when passing it to the shell anymore).\r\n\r\n\r\n> If so, the treatment of $tar in that\r\n> way doesn't seem necessary, since that doesn't get called through an\r\n> intermediate shell.  (That would then also explain why $gzip in the\r\n> pg_basebackup tests doesn't require that treatment, which had previously\r\n> confused me.)\r\n\r\nYea, it doesn't immediately look like it's needed, and the test passes without\r\nit. I guess I might just have tried to be complete...\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Thu, 14 Jul 2022 13:04:23 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [RFC] building postgres with meson -v9"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657829080; cv=none; d=google.com; s=arc-20160816; b=Eeu8XW67mVt2D1D8zyz2zdJ5OAHtXsQL7pz4Ie90vb+uiaCguCfSLlxdRc3uwRw1iT 4Rn3DecGhsrBzvcsIdk4WORYDLNa6sa7pqBgje7x6KM6q42fjxRLIPjAjQNlAWNyTCED UXa1EaHQZ5n9+C/dWFUTlBdfBYeJmBh3xJEaxwqffyvHHUIjTosai8jhqqHqnkP3kPu4 PzN4C3c+XDsj4hz0PUYKwjvY7CdcCPJ6sTfYp1lHX+ULFgaGlztNl77yO42Hzsc6fX/V b4rkW6/qoaZNFPj6Dh5DHklFjMKGsxXbJwcGOi3+8P7m6tFx+d0IBXCb3V/+VG1lkO4U ZUhw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp224882jai; Thu, 14 Jul 2022 13:04:40 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f9-20020adff989000000b0021d9ae8f912si2334140wrr.1046.2022.07.14.13.04.40 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 13:04:40 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410972@lists.postgresql.org>) id 1oC54h-0002AT-R6 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 20:04:39 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oC54b-0000W2-K3 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 20:04:35 +0000", "from out5-smtp.messagingengine.com ([66.111.4.29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oC54X-0006is-DB for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 20:04:32 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id 26D765C00F9; Thu, 14 Jul 2022 16:04:26 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute5.internal (MEProxy); Thu, 14 Jul 2022 16:04:26 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 16:04:25 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714200423.5qfmbaut6e6mbhfe@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<20211012083721.hvixq4pnh2pixr3j@alap3.anarazel.de> <20220701093312.phiokhpoqaftuer5@alap3.anarazel.de> <0e81e45c-c9a5-e95b-2782-ab2dfec8bf57@enterprisedb.com> <20220706132126.2zwx7nzgz73xf5yf@awork3.anarazel.de> <ce1b6eb3-5736-6f38-9775-b7020128b8d8@enterprisedb.com>"], "X-Me-Proxy": ["<xmx:yXbQYmz24Q-lDKwrA_7uM5Cgm5na4ctS98Ax-ZiRfZMwASMUdt11WA> <xmx:yXbQYlS4btZ9PkP8ug39ozYsBt_hjQ8lig9Dv_n1NaxlSn6xbOsZqA> <xmx:yXbQYhaQFg2UD6bh6idx78R8YqBn929mwe6rwZ8PJxw8uzYcite4BQ> <xmx:ynbQYm63vSvz97ouSabSg2oXp1eC3ofH1_yf5NzCIkjvdq724JNssw>"], "X-Received": ["by 2002:a05:600c:2107:b0:3a2:d6c7:9d70 with SMTP id u7-20020a05600c210700b003a2d6c79d70mr17246666wml.42.1657829080248; Thu, 14 Jul 2022 13:04:40 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714200423.5qfmbaut6e6mbhfe%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<ce1b6eb3-5736-6f38-9775-b7020128b8d8@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410972@lists.postgresql.org>"], "X-Me-Sender": ["<xms:yXbQYgBPypcQbAFDzU41voUtz7ogm8MXBlNsKJmxUqABu_j2ogqA6g> <xme:yXbQYii_E4DItFeg4wQAaFUSMtnMiUZ5Jaf0YDTA2w23yq52zQwtXChzwMpGgsKBa -P-0qUXlzLww99MeQ>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410972@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:yXbQYjmsZiYqrQ0IhfQUxPbpJmBovpCkiO8XHOxcGrIWTsIHV79HYXU20TeJF4ZD1acE6IZDHmWkeLEYDb5lhUuZLs0HcVJoa192MQmON5Rcw7iFsI-gtdwdwLmk>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657829066; x=1657915466; bh=dWxabKgz9V p1IByc8FYFXmR9Gg8n3Z5cQADNguMNgNM=; b=qY9yWvj5RDs8MG3p9qNOrQqUTu myRu7FPEuA6PThP5v8cssFtS3mvxw1j9BCL8mgRsvoCbaHpCB7SNr/ChA0g66KFk dUiaNu/USoyoRnxvm2Hu8U+XCYxY3CX63VdpxPYPZAj1VTV9Qos4h3fjeepAG8yq WiMjb9CX5szPrnUx6HE9wURFB1puo+sggAHGJoNY0dfzOkQDqPt/h1HjscgOZxon UKM42pieJQUM3FRlglxnFVxA7v7UaqBlpDhDVdl4O3kROFRKCd6bjPjCcsSXsuIl 18Fk2TWoav3/E7/gUITHjeOYynPlafXjms79LCeudP3GFBW3S+nZtswLmr+g==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657829066; x=1657915466; bh=dWxabKgz9Vp1IByc8FYFXmR9Gg8n 3Z5cQADNguMNgNM=; b=CkG95sbDtSRJlzZJUQmjvnzvM/UEpFc+dIVZc9HSB/OZ xhHTqF5jbiWqwzzkwhzqBGNJ4eL4JkkiOZC6NycyboqjI1+kAnnkk8T87pTmCLnw Wnx0J2JFH5I7yssNKBZA+0z+k8RtbuW9rRmTm7om0CfdnN21YtaoHCJeMPsYWP6j lq2ON53393QIOGqfIYxjV1qGJMRQ1r1q8h9ewkIru9qvH4gl6bgWvwgV0fEqLTsQ 2gIg6xnFutzzAoyMsVcNGD+wpKLgAQSeigeaaF4ke+cqZk/W9d/sgzJcKVejBHbl gOIjcz+H4SCfmStMjYFYfEm5SqbuIymPbt8BzAcVew=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejledgudegiecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vx4J3ba4qVnG+o+j424xvBoDggfPmn/3RRF3QWHZl5hO/b5SA5X+Izdlrqdgjrl4wUt9YT"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=dWxabKgz9Vp1IByc8FYFXmR9Gg8n3Z5cQADNguMNgNM=; b=ClKSDDQq58oi7hjkzxKGpTR61Owmimtrar1OF9NUeSXQmeeWvRi2ykLMQ3SmVQL2Rz a0mU07ZUZiCU9H0tfN8cPwafMygQnnn7DVTYkeQVHwSalzf5t3x7NMcJTtLF8v40Rpgw eLVYy3qbiamNegmTwzG+VM2H/20angZLROXO3ky0j2J3qffCouVZ7afdSAt9oShp4/ip cPoJIyAtK/cifYHzirUeU9tLEsTbnVUK8DhPalh6he3zM+VekLyDhLvuKt/UxUPES5bt lUNZvs1P7tqh+0v0m+Xnr7U/IhGu5XpOLDGW0rfza7R5FOerosfK1sF3QYuTP4fclhkT uQCQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=qY9yWvj5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=CkG95sbD; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410972@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410972@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=qY9yWvj5; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=CkG95sbD; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410972@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410972@lists.postgresql.org"]}	["<ce1b6eb3-5736-6f38-9775-b7020128b8d8@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 20:12:33+00	peter.eisentraut@enterprisedb.com	Re: [PATCH] Log details for client certificate failures	<49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	98	15418	[{"charset": "UTF-8", "part_id": "2", "file_name": "v5-0002-squash-Log-details-for-client-certificate-failure.patch", "disposition": "attachment", "content_type": "text/plain"}]		On 13.07.22 01:06, Jacob Champion wrote:\r\n>> I had to read up on this "ex_data" API.  Interesting.  But I'm wondering\r\n>> a bit about how the life cycle of these objects is managed.  What\r\n>> happens if the allocated error string is deallocated before its\r\n>> containing object?  Or vice versa?\r\n> \r\n> Yeah, I'm currently leaning heavily on the lack of any memory context\r\n> switches here. And I end up leaking out a pointer to the stale stack\r\n> of be_tls_open_server(), which is gross -- it works since there are no\r\n> other clients, but that could probably come back to bite us.\r\n> \r\n> The ex_data API exposes optional callbacks for new/dup/free (I'm\r\n> currently setting those to NULL), so we can run custom code whenever\r\n> the SSL* is destroyed. If you'd rather the data have the same lifetime\r\n> of the SSL* object, we can switch to malloc/strdup/free (or even\r\n> OPENSSL_strdup() in later versions). But since we don't have any use\r\n> for the ex_data outside of this function, maybe we should just clear\r\n> it before we return, rather than carrying it around.\r\n\r\nConcretely, I was thinking like the attached top-up patch.\r\n\r\nThe other way can surely be made to work somehow, but this seems much \r\nsimpler and with fewer questions about the details.	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Thu, 14 Jul 2022 22:12:33 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657829571; cv=none; d=google.com; s=arc-20160816; b=WPDZavPp3r+RCyhI5d4xAkopGDtvKSZ8R9GzfFE71fhcDDDjX5lQEcF3FHrCKo9sSl MuglaiFcATb4me9ICd7cLADwo6cbMSI1xadbOx36RYE7nsns9qr5a+KvO92J7PKQ9woc KVd7zKCRYKj3PRkqjxF0HnhhodmseqLOZvUPLX9LOPkzyvC2lXpMWGaJD9cPDXIHSb4d TDhIrqIeVFo2F3BdLIeTd0wnDn+RPknfHy6OAI7BVjbkeLulpqAjU7OonkuQCwztM2u0 SPZt11oOK9ox2ROw7nCy/b4wFBI+qSxcMaEY3sbJwSvTwJsw0p7cCyOA0WDlOMSj30zC fn1A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp227551jai; Thu, 14 Jul 2022 13:12:51 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id bt26-20020ab03f1a000000b0037f4d6a3a71si602466uab.1.2022.07.14.13.12.51 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 13:12:51 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410976@lists.postgresql.org>) id 1oC5Cc-00048r-7H for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 20:12:50 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oC5CX-0002Vq-PX for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 20:12:45 +0000", "from out5-smtp.messagingengine.com ([66.111.4.29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oC5CP-0006nh-Dt for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 20:12:45 +0000", "from compute1.internal (compute1.nyi.internal [10.202.2.41]) by mailout.nyi.internal (Postfix) with ESMTP id CEAB05C015B; Thu, 14 Jul 2022 16:12:35 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute1.internal (MEProxy); Thu, 14 Jul 2022 16:12:35 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 16:12:34 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<d13c4a5787c2a3f83705124f0391e0738c796751.camel@vmware.com> <cd03fa63-d4d9-8d3b-f9f5-13206a28d888@enterprisedb.com> <a922e857c4e4a073f219bc5005b862eb22255c20.camel@vmware.com> <290871e5-f1d9-54a8-5df4-dbd9e604c08d@enterprisedb.com> <7c0468dcadbc0d0c987daf9ca08c8d111948eae6.camel@vmware.com> <9b8338210b865d79239ec35ca523792ce331c0a3.camel@vmware.com> <c60a8948-00a0-147d-75df-62699193371f@enterprisedb.com> <CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:s3jQYrljTzLAn857Z0KKVPbac7gp8_5kv0X9IBi-O0XXM4YAAOkVkA> <xmx:s3jQYh1wNViND3j2MzZE88Ja3gBzukvz04sH1sEDTyfk1BFxUDJ4og> <xmx:s3jQYqtmHZMBTRW27_c1aM66nZIaV0nOMoXVJ2laGpor2nye3x_wEA> <xmx:s3jQYrzk2BHgugNjJppmfeEEmwkKA0LHcbWngrm4bPU68jWopM11xQ>"], "X-Received": ["by 2002:a1f:1184:0:b0:36c:9592:47a with SMTP id 126-20020a1f1184000000b0036c9592047amr4509128vkr.25.1657829571255; Thu, 14 Jul 2022 13:12:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/49b48719-d6cf-9e03-fab3-e4505cf9d585%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410976@lists.postgresql.org>"], "X-Me-Sender": ["<xms:s3jQYjkMIW-Z1KdMuUhfB6UNBJDE7OELrhrAG0zSO7VF1sAYpVzJ8g> <xme:s3jQYm2Gj_wOswL-p2Mt0UiXEsKvNfUnBUQb4ZXLvl1j4JjtB_EMcywIVoD8HszFN KrAINu9ACrLCrJtiw>"], "Content-Type": ["multipart/mixed; boundary=\\"------------hYxhs0C21eYy0R2YgD8je2X9\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410976@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:s3jQYpqCvuUxW7NzU8zyPrTGleqNuabI22qX6VHtFk0v1a8vDaE_K-qBEJRJCnUpgvT5poc4ohZCcf7ALvx9gh8eXrPeua17>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657829555; x=1657915955; bh=ZGd0lKfV6yzX4shl4RUvd8YIuvLZ 9NFIKBDZyVIxu38=; b=bWbx/4UY6OKNU07daV+F/FHCclgC52hep+Bp/t0cW5SX v06/Sz91XBrOekxjZBF3GGvmO2l6POhbZXEtWeel71ykGqe9w3akwRaS5DPO+QqN aurfwRzW1N2Gk1K6NYYiWCHInoDuVibVt0zfk5Ejm7CACyNeSsmlDgtCAci7YvZh 2K1C8qE/aZScKVyLcDWvNhwwGsbutZGNnokQxixfYClqqaeghpGTuA6oskL3GfG4 buCU1RWf0CHVnIk3qcWXbaHRDxuUQU1iR1UIEGRPjMGrwwd+ZK8pjJhVcL53Udy2 4N7emZ2akACsxIh+rICiBz49VBe15kXVBnF+NzG4uw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejledgudegkecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpegtkfffgggfuffvvehfhfgjsehmtderredtfeejnecuhfhrohhmpefrvght vghrucfgihhsvghnthhrrghuthcuoehpvghtvghrrdgvihhsvghnthhrrghuthesvghnth gvrhhprhhishgvuggsrdgtohhmqeenucggtffrrghtthgvrhhnpeeutdekheeuhedtvdfg ffehleetfefhieefudeitdffiedtledujefhjedufeffffenucevlhhushhtvghrufhiii gvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpehpvghtvghrrdgvihhsvghnthhrrghu thesvghnthgvrhhprhhishgvuggsrdgtohhm"], "X-Google-Smtp-Source": ["AGRyM1tZP+mMpOM6J6lZgoyIn2pVMNyVIjbEecHnk7T+iAdAKfAvS730YtO9prISPmuW8undcBLZ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:from :references:cc:to:content-language:subject:user-agent:mime-version :date:message-id:feedback-id:dkim-signature; bh=ZGd0lKfV6yzX4shl4RUvd8YIuvLZ9NFIKBDZyVIxu38=; b=IeddbVOFSTIoEhYInc/ppC0vgW9aDMlsY3gyIOUFOxTZ7Cc9/ws1idKJ+lTQ+PUBk3 ZIWBpjBujfAxQIv1e07amn5x1MPHTAnohAoiVbH9+2Ew2P9ttjziIWAxq/jElot6Q+G9 bZ/TCmzBTkssMRAqmFbR9nt9HAUxbC4Cy1aDXKbTUgBR9UV8bz+Lv9jimpkagmECNuDl aLhnUKAATvcJRdQ+mO3V6V78CS55HN5+4WhezfpmQEmfvTdn+IAAwvw03XPrjAZCS9pG k4a5beNpbeoV1sSoBgTqB2q3MDn12DQLF64U1h7iip6hs3jcOWNiXqJUk3IFuuTzQ/p4 B/pA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"bWbx/4UY\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410976@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410976@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"bWbx/4UY\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410976@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410976@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:09:02+00	jchampion@timescale.com	Re: [PATCH] Log details for client certificate failures	<CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	99	8236	[]		On Thu, Jul 14, 2022 at 1:12 PM Peter Eisentraut\r\n<peter.eisentraut@enterprisedb.com> wrote:\r\n> Concretely, I was thinking like the attached top-up patch.\r\n>\r\n> The other way can surely be made to work somehow, but this seems much\r\n> simpler and with fewer questions about the details.\r\n\r\nAh, seeing it side-by-side helps. That's much easier, I agree.\r\n\r\nThanks,\r\n--Jacob\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Thu, 14 Jul 2022 14:09:02 -0700"], "From": ["Jacob Champion <jchampion@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657832966; cv=none; d=google.com; s=arc-20160816; b=N6cGjmjsh68iBNprf901KoJZSqvz+hNsPagRCFcV4fwq2gMCKZfoixPVbF7vQEBJbj RcpJHISjYaqlxnqzLH12aF9MuZn6/RJJxTtPsT6Qu7GBlDIHh44zIUhPgFfSyPhv8CW9 C3lnkf/a1h7GkCMYetcTI5AayIn3AIqhaRi9u/jobIECd5LOuXxQET5fZAiALZ0creMD 2PcH1C3XnhMd216lHsK7eR3A5JVVMADQhP8Pw0K1zFGspMKwCXNvWMrNR8AODXqI2sKc T2ChUTJk0+DueIt99CKHQ6Xc8NSlIh1jHDLX8g4kQRZeWKHS/HJmyGSx9Jh8fE6aZhsL 809A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp241834jai; Thu, 14 Jul 2022 14:09:26 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i10-20020a5d584a000000b0021d6e917418si3512650wrf.198.2022.07.14.14.09.26 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:09:26 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410993@lists.postgresql.org>) id 1oC65N-0002vL-On for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:09:25 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oC65J-0001Df-5c for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:09:21 +0000", "from mail-ot1-x32d.google.com ([2607:f8b0:4864:20::32d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oC65C-0004zg-CX for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 21:09:19 +0000", "by mail-ot1-x32d.google.com with SMTP id t26-20020a9d775a000000b006168f7563daso2141008otl.2 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 14:09:14 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<d13c4a5787c2a3f83705124f0391e0738c796751.camel@vmware.com> <cd03fa63-d4d9-8d3b-f9f5-13206a28d888@enterprisedb.com> <a922e857c4e4a073f219bc5005b862eb22255c20.camel@vmware.com> <290871e5-f1d9-54a8-5df4-dbd9e604c08d@enterprisedb.com> <7c0468dcadbc0d0c987daf9ca08c8d111948eae6.camel@vmware.com> <9b8338210b865d79239ec35ca523792ce331c0a3.camel@vmware.com> <c60a8948-00a0-147d-75df-62699193371f@enterprisedb.com> <CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com>"], "X-Received": ["by 2002:adf:f746:0:b0:21d:6afd:b7d3 with SMTP id z6-20020adff746000000b0021d6afdb7d3mr9747676wrp.501.1657832966226; Thu, 14 Jul 2022 14:09:26 -0700 (PDT)", "by 2002:a05:6830:290a:b0:618:b519:53f5 with SMTP id z10-20020a056830290a00b00618b51953f5mr4196939otu.237.1657832953290; Thu, 14 Jul 2022 14:09:13 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww%40mail.gmail.com>"], "In-Reply-To": ["<49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410993@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410993@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=1zH0bS7uxaI+bXvI4JCpiIrOSXCpMD+vwwIYLA5Ozgs=; b=U889zPHWmFKEo1dlKSEcZwe+feph9kCygQ0TDrUF+OymXhRR6E63wIIVU/Q6Z7EYx6 L53CBNG6Sx0gS2pevWQDtp2hV4Mbc4rvhSWiQ2xH9zYEocrqqG6uYZHrTUdOH2zJ1EQZ ri5aA9CawIy3JG33kHakGJr+7sl3kQrkXNrYVHdZzCKSYHJRC34BJzRkEhZFrjIXXrWC fVsCgMa9TbSeagh2kaS2+5O9+i8wi/ntefWsstsrjzOd4qb7jnU/uAnNK38uroy+LR+0 1Rpqo2cfbG/jGBZ0eb/9gzJfeW7eeRqlHhrp5WUlhrKZlsl9lzG+SoDo4jp96qtUV030 Q9mw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/Uz3wCXYo6Bqoef4Ioc6WcUFYJe/Wg8WJ6CJQzIwuBxLho0+Pp tfhm103655NjLxDLb8vSVKPQUs0Eaf8j1zXCaCxzDp/MTl4bhw=="], "X-Google-Smtp-Source": ["AGRyM1tKltHkbW7iQEfyd+Sj4NE1LjlcytiWBNA2yPvpr/SO/rHNR9oSX9JdOjUEZy6ygOqnpOxw"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=1zH0bS7uxaI+bXvI4JCpiIrOSXCpMD+vwwIYLA5Ozgs=; b=alBRh7Sf/vSRecWzc2Itvm+MaJ9DTnjsYQUlXinvM6+CEscqoNnzsMVVjgemub2yv6 Dfa7UO2in1YLE32vEqIDMdNQa+SNZNBPvAiVV1IJUlq9xhT6zZPtWZ5a4MN+pgPPbKAN 0sOa44m8sjumHxqYTv6Pu6TA90HvZ1S4FRBtdFhA0myVlcFjOyQjz1wD09bSaTdr/SwH ABCEV5R4za2sFmZMentXA3ZWMz6Shqq471e70nBFs8xB2kv5Xb7L7KBk/SXKMBNr8eaD /l4QIHpYfUbQUWgzEQ4AOIUF4j9XVazMTTwu4stH4p2y2kmLGoOtx+D3Q0pUThC+8kRR 7FWA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=U889zPHW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410993@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410993@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=1zH0bS7uxaI+bXvI4JCpiIrOSXCpMD+vwwIYLA5Ozgs=; b=KGrdo++d5JHU+M4m7AzZb2Z7d15gLNmkI93ip2lza1E7iXbI3kPAipgIcLzpo/NKFI bxBs5J3XEsmHToAR0epa7mW5QVmsPBbtW/TFQK6VpYC31sx2ICuETjOg5lVs6MkYEUv8 YS2RTBrsE9c+4lCTAK/UUSmdl5UMhuvMLKCM8eizmj3B85SqBRu6smESn/sWgtEkB1gB M8kC/LhOckWFuD4ji3yyehleFF3SDrt0I5L2l3TTkLhgmAnaSmFY6LobCnkC0n2kM8zH uQUAI26gsvS4b1BrMKDiA+15/7kFsmSpn2hyRSr3rafxOYI2f9KLSKlKm5zo0x2EVbXE hUhw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=U889zPHW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410993@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410993@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:21:03+00	david@pgmasters.net	Re: Issue with recovery_target = 'immediate'	<4b6e1ec2-ca08-3baa-db9d-ea444939226e@pgmasters.net>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	101	7914	[]		On 7/14/22 04:26, Kyotaro Horiguchi wrote:\r\n> At Wed, 13 Jul 2022 14:41:40 -0400, David Steele <david@pgmasters.net> wrote in\r\n>> While it is certainly true that timeline 2 cannot be replayed to from\r\n>> timeline 1, it should not matter for an immediate recovery that stops\r\n>> at consistency. No timeline switch will occur until promotion. Of\r\n>> course the cluster could be shut down before promotion and the target\r\n>> changed, but in that case couldn't timeline be adjusted at that point?\r\n>>\r\n>> This works by default for PostgreSQL < 12 because the default timeline\r\n>> is current. Since PostgreSQL 12 the default has been latest, which\r\n>> does not work by default.\r\n>>\r\n>> When a user does a number of recoveries it is pretty common for the\r\n>> timelines to get in a state that will make most subsequent recoveries\r\n>> fail. We think it makes sense for recovery_target = 'immediate' to be\r\n>> a fail safe that always works no matter the state of the latest\r\n>> timeline.\r\n>>\r\n>> Our solution has been to force recovery_target_timeline = 'current'\r\n>> when recovery_target = 'immediate', but it seems like this is\r\n>> something that should be done in PostgreSQL instead.\r\n>>\r\n>> Thoughts?\r\n> \r\n> I think it is natural that recovery defaultly targets the most recent\r\n> update.  In that sense, at the time the admin decided to recover the\r\n> server from the first backup, the second backup is kind of dead, at\r\n> least which should be forgotten in the future operation.\r\n\r\nWell, I dislike the idea of a dead backup. Certainly no backup can be \r\nfollowed along all timelines but it should still be recoverable.\r\n\r\n> Even if we want "any" backup usable, just re-targeting to the current\r\n> timeline after the timeline error looks kind of inconsistent to the\r\n> behavior mentioned above. To make "dead" backups behave like the\r\n> "live" ones, we would need to check if the backup is in the history of\r\n> each "future" timelines, then choose the latest timeline from them.\r\n\r\nI think this makes sense for for non-immediate targets. The idea is that \r\nrecovering to the "latest" timeline would actually recover to the latest \r\ntimeline that is valid for the backup. Is that what you had in mind?\r\n\r\nHowever, for immediate targets, only the current timeline makes sense so \r\nI feel like it would be better to simply force the current timeline.\r\n\r\n> # Mmm. I remember about a recent patch for pg_rewind to do the same...\r\n\r\nDo you have a link for this?\r\n\r\nRegards,\r\n-David\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Steele", "Address": "david@pgmasters.net"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:21:03 -0400"], "From": ["David Steele <david@pgmasters.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Issue with recovery_target = 'immediate'"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657833679; cv=none; d=google.com; s=arc-20160816; b=kNzzw1lQKPJZWScpd4fEk2UC9C0p8l7vLkA9DFRKe0pN5wS95LNIhALYr/5PuhFrO4 +1h0nJ+mwOrLKYS7SVzbW0CBZR2AEPYoGWY93Q/cTIjM7M5Ypn/Gw88RAdoBBIf7H7sT +T2Ol3AerzX4iuGvP8SvxnXUTaheFjNyzdCtXkxW3xtSP1uBB+JP/mXpJh1uDpHE5lfl XDo42uRn2BIwPHAJkQVU7voNlJ+d2pXjVhM7OBw2LMdAhxYpN8ONXZe5S2MTWawaiUno S9c+R7hclS3pFwm0X1QeLQ8QdV2Rbt7TXXvUa82DIr5kMRvvXO/QyTZZdm+J7F+9DeWH PsKw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp244000jai; Thu, 14 Jul 2022 14:21:19 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o3-20020a05600c378300b003a2e0397945si2795003wmr.217.2022.07.14.14.21.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:21:19 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410998@lists.postgresql.org>) id 1oC6Gs-0005rP-Oe for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:21:18 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david@pgmasters.net>) id 1oC6Go-0004HM-8r for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:21:14 +0000", "from mail.thelabyrinth.net ([45.56.70.56]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david@pgmasters.net>) id 1oC6Gh-0007Pb-KU for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 21:21:13 +0000", "from [172.20.20.20] (c-24-126-12-120.hsd1.wv.comcast.net [24.126.12.120]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (No client certificate requested) (Authenticated sender: dsteele) by mail.thelabyrinth.net (Postfix) with ESMTPSA id 1346054665; Thu, 14 Jul 2022 21:21:04 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<4b6e1ec2-ca08-3baa-db9d-ea444939226e@pgmasters.net>"], "Precedence": ["bulk"], "References": ["<5a6ce6bf-2a27-2b90-5cdb-14f6c89ca238@pgmasters.net> <20220714.172632.682019860423173203.horikyota.ntt@gmail.com>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:600c:3cf:b0:3a2:f221:bcb6 with SMTP id z15-20020a05600c03cf00b003a2f221bcb6mr11397838wmd.107.1657833679115; Thu, 14 Jul 2022 14:21:19 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/4b6e1ec2-ca08-3baa-db9d-ea444939226e%40pgmasters.net>"], "In-Reply-To": ["<20220714.172632.682019860423173203.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410998@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410998@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uuLs0c2m3G1t5MhzXXQaaVJ5+pDyKp5qXyTtCN6eLVjbGXbjPX/QWTaORf13PPwpWLs1dX"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=bJ/YRXv55m7Q/xLGgpjB0nbQKaj831VAW30cPpozn6o=; b=x3BgA2V2q6FZmdXPPYrhnF/RO4L5aqrvptvl13joNoadumEj3hTcJ2Om3Ju7V9fdsh 6XWUb/ycynSQ8E+CNpJ4LZLtn3CpH5+0XBcXmYu4g3mhpsQaypOwqx/ZFWMm8nK5Bgri A6htDIid5IpA9MSfqkUdCU5qr5tgJV2jQjwJj7TRubRDfsps7T4K3ajE02g28F7774p/ 7W2kLzEbDq1DkVYNm0ddi8YRAEeFK/AruPsPEofuCddT4ePC3j+DwPLxWnA/jl/5O8QY UFjm+uqEvRWAS1VZalX8I3flkCVtPtJKzr6VfN0HsEWE5IFsm3gQRRnTYXY2XGqWz5AQ swmA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410998@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410998@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410998@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410998@lists.postgresql.org"]}	["<20220714.172632.682019860423173203.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:17:17+00	tgl@sss.pgh.pa.us	Re: Making the subquery alias optional in the FROM clause	<3149278.1657833437@sss.pgh.pa.us>	[{"Name": "Dean Rasheed", "Address": "dean.a.rasheed@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	100	5790	[]		Dean Rasheed <dean.a.rasheed@gmail.com> writes:\r\n> Attached is an update with the following changes:\r\n\r\n> * Docs updated as suggested.\r\n> * transformLockingClause() updated to skip subquery and values rtes\r\n> without aliases.\r\n> * eref->aliasname changed to "unnamed_subquery" for subqueries without aliases.\r\n\r\nThis looks good to me.  Marked RFC.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Dean Rasheed <dean.a.rasheed@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:17:17 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Making the subquery alias optional in the FROM clause"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657833448; cv=none; d=google.com; s=arc-20160816; b=FWVAStyMFAVi/zOTfOYOt3ogknxFXiLGhYSUiC7poEtblgjLVT/jhmDPp/A4jAgkwY fVtn+AHt/ttWFpDp/M75wXBIEpvSdRQFbpyzkNbnabWPAYJt5/0+sFhZY4FmCdzjej5N p3Om+UW5v85BMPDc7RHqeZwP5omfS6GXEXcNWlV4Xyssk/TiHTBEUClspafVi9yBHUqK cteuZx+xoLGZMpT2zmSn1ARFQfelf5TIlo79kHyntHJvcaLP8+BkLoi29c7KlVrTG0/R FTECrFe5GD/UfJf+8i4Hsz8LFmf0syJtW5A8iCkhDBaKRCKBNFCgBWna32pxa/IY66iw avmw=="], "Comments": ["In-reply-to Dean Rasheed <dean.a.rasheed@gmail.com> message dated \\"Sat, 09 Jul 2022 11:28:20 +0100\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp243369jai; Thu, 14 Jul 2022 14:17:28 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m2-20020a67d582000000b0035711ad3797si552064vsj.437.2022.07.14.14.17.28 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:17:28 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-410995@lists.postgresql.org>) id 1oC6D9-0001vR-Qt for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:17:27 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6D5-0008Ra-80 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:17:23 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6D1-00053j-2E for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:17:22 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26ELHHw73149279; Thu, 14 Jul 2022 17:17:17 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3149277.1657833437.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3149278.1657833437@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<CAEZATCUCGCf82=hxd9N5n6xGHPyYpQnxW8HneeH+uP7yNALkWA@mail.gmail.com> <1988015.1657044045@sss.pgh.pa.us> <CAEZATCVSAOkYHd6EVSsdGYccCAvdcGX0HYEmOXS3THy4wWVFQA@mail.gmail.com> <CAEZATCWY670FpOF=63Wq5ZKYMbJNY-wK5CscdRxjtiqNT51tSw@mail.gmail.com>"], "X-Received": ["by 2002:a05:6102:3f06:b0:356:f57f:4f59 with SMTP id k6-20020a0561023f0600b00356f57f4f59mr4543918vsv.70.1657833448776; Thu, 14 Jul 2022 14:17:28 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3149278.1657833437%40sss.pgh.pa.us>"], "In-Reply-To": ["<CAEZATCWY670FpOF=63Wq5ZKYMbJNY-wK5CscdRxjtiqNT51tSw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-410995@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-410995@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vVr4VMEhw6PbywgDzwQDe8NKTipkLGQOsAUJ5QR+jnjpsNari6Uug/b3t7VD/Wg0sSXmAJ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=H3jm73KctwbsCcs6109zFmb5ADS8cUQkPYOitAcN+V8=; b=O99L/Et9UAcz2q7rIqXQ0/cA7UgXDawf3TDtCxNwu9mUyeFBafr04Pwjsz9Na9LxeQ gefZUE77vAu5MQNwPr1p3FWfoh6oAwY+4hej4nXv+sq/dAJAEcxir4EJeNlRFmJXtdz/ bmVWs+2u5ihsqk7VgzB80OyufsNe6kh+QwvjG6A5N4ukxZhNXdbgebx3sS6kvxEMbl1A guJxO+iCWLoF/0LTboWeuA8idaSg58aEmahd3jnhK/4mN6jlvcjTbLVQ1bN4tkhl6xdK IF4OgSdz5wVbplJIMr29sp/zTIUJO1lvHK0N1SRDhZgdHF1YHiIK475jg6kjxhNH6jQJ 1c0Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410995@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410995@lists.postgresql.org"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-410995@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-410995@lists.postgresql.org"]}	["<CAEZATCWY670FpOF=63Wq5ZKYMbJNY-wK5CscdRxjtiqNT51tSw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:34:42+00	tgl@sss.pgh.pa.us	Re: EINTR in ftruncate()	<3153247.1657834482@sss.pgh.pa.us>	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	103	5794	[]		Thomas Munro <thomas.munro@gmail.com> writes:\r\n> So why would I add another wrapper like PG_SETMASK and leave it\r\n> unimplemented for now on Windows, when I could just use sigprocmask()\r\n> directly and leave it unimplemented for now on Windows?\r\n\r\nFair enough, I guess.  No objection to this patch.\r\n\r\n(Someday we oughta go ahead and make our Windows signal API look more\r\nlike POSIX, as I suggested back in 2015.  I'm still not taking\r\npoint on that, though.)\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Thomas Munro <thomas.munro@gmail.com>"], "Date": ["Thu, 14 Jul 2022 17:34:42 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657834493; cv=none; d=google.com; s=arc-20160816; b=uAuWS5UWG9q0H+nM2VfjsXPOjRpm4Xh9CmMdzuTHiMVPRAyzjtAmSdl4ULupC2lcDM E6Gx3+h8Lkqsqg4MkRqVsH/6Xggc4wtYfAWPQQcSpZIAoA4MWSJO8ps0Kd5UA5Td/Qyg D9XWpT4rVuLDglNQ9aQ03AOzCZEKRR8LTwjArw1ja0QBFg2TI6uGTGB3VJSVIp/s/SzT jSXUVhweOqdum2KgD3XhU+AbX0Lb06jz+/E+ZQlV0Q5j2+/8bfZT4y3CFVDfKUFT2mXw tQsY36libE08vVtNSSl3jbZVuc+ybB26vxf9bwU3hcM+qtUo7nd/YeGKm7cWfym6Tsaq 2qPA=="], "Comments": ["In-reply-to Thomas Munro <thomas.munro@gmail.com> message dated \\"Fri, 15 Jul 2022 09:22:36 +1200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp247266jai; Thu, 14 Jul 2022 14:34:54 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n16-20020a7bc5d0000000b003a2cfa1f8acsi6341748wmk.121.2022.07.14.14.34.53 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:34:53 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411003@lists.postgresql.org>) id 1oC6U1-0002if-LA for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:34:53 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6Tw-00011K-Vz for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:34:49 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6Tu-0005BL-RL for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:34:47 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26ELYg613153248; Thu, 14 Jul 2022 17:34:42 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3153246.1657834482.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3153247.1657834482@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql> <2835511.1657812444@sss.pgh.pa.us> <CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:25c5:b0:3a2:ed17:77b8 with SMTP id 5-20020a05600c25c500b003a2ed1777b8mr11176711wml.138.1657834493957; Thu, 14 Jul 2022 14:34:53 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3153247.1657834482%40sss.pgh.pa.us>"], "In-Reply-To": ["<CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411003@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411003@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vj5jEVMRZmmk7VCfoIfoXY+PZdpUtNcfU1Dzx1pIEHWY1lS4g2+Kpr8ddZLz8FF0uZ6msE"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=HXHtGFfAKCTmN3CTuEDtijVf/MhFgSS+yGD/m8yHRwM=; b=C9YiQS+EwQ8j/FKPcjFoiU0lrcdFENvuAQiJ7jZAh7Vzv3GVeBjnD1+FqWS2peGa1d nq7Wz7ovp6LYbXbfMpx7LgiY6pdfakNBrcJYDzJeVbB+NGS8MEjQTxbM6X3F+cXxhMdR A5joDbqJ6YHpn3YtN5k7Oz0AItz7dojK4D5eeWAjYXkgrGaYmDTgjkHmo0jdU9jtagXU FMQcq6XGDlDchWhEnRC6TEAQzqwOZQKWUZPCox4QrOoxh1aQx3gz7h+AUPmWyB0AqnjQ bLUunQUjnMdcHgTCp79nXZooy0a9MhGg3W0bkogEDDjjpl8iVYLIWKehLFHzTTpvQs8l Or6Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411003@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411003@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411003@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411003@lists.postgresql.org"]}	["<CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:22:36+00	thomas.munro@gmail.com	Re: EINTR in ftruncate()	<CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	102	12992	[{"charset": "US-ASCII", "part_id": "2", "file_name": "0001-Make-dsm_impl_resize-more-future-proof.patch", "content_id": "f_l5lj9v6p0", "disposition": "attachment", "content_type": "text/x-patch"}]		On Fri, Jul 15, 2022 at 3:27 AM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n> Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> > ISTM it would be cleaner to patch PG_SETMASK to have a second argument\r\n> > and to return the original mask if that's not NULL.  This is more\r\n> > invasive, but there aren't that many callsites of that macro.\r\n>\r\n> [ shoulda read your message before replying ]\r\n>\r\n> Given that this needs back-patched, I think changing PG_SETMASK\r\n> is a bad idea: there might be outside callers.  However, we could\r\n> add another macro with the additional argument.  PG_GET_AND_SET_MASK?\r\n\r\nIt's funny though, the reason we had PG_SETMASK in the first place is\r\nnot for Windows.  Ancient commit 47937403676 added that for long gone\r\npre-POSIX systems like NeXTSTEP which only had single-argument\r\nsigsetmask(), not sigprocmask().  In general on Windows we're\r\nemulating POSIX signal interfaces with normal names like sigemptyset()\r\netc, it just so happens that we chose to emulate that pre-standard\r\nsigsetmask() interface (as you complained about in the commit message\r\nfor a65e0864).\r\n\r\nSo why would I add another wrapper like PG_SETMASK and leave it\r\nunimplemented for now on Windows, when I could just use sigprocmask()\r\ndirectly and leave it unimplemented for now on Windows?\r\n\r\nThe only reason I can think of for a wrapper is to provide a place to\r\ncheck the return code and ereport (panic?).  That seems to be of\r\nlimited value (how can it fail ... bad "how" value, or a sandbox\r\ndenying some system calls, ...?).  I did make sure to preserve the\r\nerrno though; even though we're assuming these calls can't fail by\r\nlong standing tradition, I didn't feel like additionally assuming that\r\nsuccessful calls don't clobber errno.\r\n\r\nI guess, coded like this, it should also be safe to do it in the\r\npostmaster, but I think maybe we should leave it conditional, rather\r\nthan relying on BlockSig being initialised and sane during early\r\npostmaster initialisation.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 09:22:36 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657833801; cv=none; d=google.com; s=arc-20160816; b=PiYkbOH2phQEuY43jebNH+taKlFyRhpepexGGefr7LmH/X9S02rvTZccsNyP+Kdj+8 U4ZSGByDHU8DoiGXTVTWEO7g44ih/Eav3uRISqpp6iLv19JgSYIyt9JjisfomHPz5zs1 pL7eJtQ3PtK+BUafwid6f6tsrJE3KxQl9NvKoWDL96RGSkRwzSyJMZ89VgK3aDmMCZOT ywQmdhnb+jC4CkSsJaVBC6Q63wkF9rALrow7Fz2LK+NJ4ASLTeT8Fq1R3qzMtQhd7436 SEw+5nE9huMtSz3yoNIBBmQFAiKqC39V9QbmB1LPtHO3UWOduADjfEyf5ysGzc4+4W1x Q6kw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp244280jai; Thu, 14 Jul 2022 14:23:22 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u2-20020adfeb42000000b0021d854d3b7dsi2505656wrn.966.2022.07.14.14.23.21 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:23:21 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411000@lists.postgresql.org>) id 1oC6Ir-0002WN-EE for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:23:21 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oC6Im-0000vU-JU for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:23:16 +0000", "from mail-io1-xd2d.google.com ([2607:f8b0:4864:20::d2d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oC6Ik-00056p-24 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:23:15 +0000", "by mail-io1-xd2d.google.com with SMTP id l24so2483544ion.13 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 14:23:13 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql> <2835511.1657812444@sss.pgh.pa.us>"], "X-Received": ["by 2002:a05:600c:1e8a:b0:3a2:ee8a:bbc9 with SMTP id be10-20020a05600c1e8a00b003a2ee8abbc9mr16209894wmb.6.1657833801836; Thu, 14 Jul 2022 14:23:21 -0700 (PDT)", "by 2002:a05:6638:268d:b0:33f:226b:46a9 with SMTP id o13-20020a056638268d00b0033f226b46a9mr5756228jat.18.1657833793390; Thu, 14 Jul 2022 14:23:13 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg%40mail.gmail.com>"], "In-Reply-To": ["<2835511.1657812444@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411000@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000005a269a05e3ca82ff\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411000@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=N/WM1pYBTCnhvE971sUd+C7OdY94kHTzYAgXWlDCHGE=; b=e9wISwbXvWNjHfvBkldqbqRaOglNGDAr4kA8WPp5IBdCWYUHy58LL9CPU8hX/nD0Xv Vt5OzavVOlfr4zLKnYyTrt9YJXaWis4mXbl9UL7l00vwTZCQ5447UwAvt1fBi78Hol3U E3JUYgC6PzZuV+xULkvlBccu8roY/wdumZGmCfMYOuDQrxr1g8rV9vrdiXeaiDCjr9H0 P/VIpDvup9/mZGsLSbgMpRBIUedNHf9FjqQYdqCiBVch/o61KywhlICmx6swL8lW5xgM wn6vm4BfaLpG6FBw0PAjBeUvWdbLpi8O4Q+/dRczQnjTiXE+WSnHce8ySL7fz6gpljcb AW6Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora94Th8Y1loE89lkYSZz9iBBXNvJ0h9mU9CHl/aBKoxX968qlev/ IPFh02dWjAfH4uL3dE8lkjn5zc4PlyaapW2pwgE="], "X-Google-Smtp-Source": ["AGRyM1uAJxxsj4h55V7jddCFQCLOJTgsJ7qCBuhct1GIeFHpxr6nJgR+QC8SJzvS17dFqi5Xx/Hl"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=N/WM1pYBTCnhvE971sUd+C7OdY94kHTzYAgXWlDCHGE=; b=jyaoUKVkuLl4hcvF9TbaPpwItXinx91CC7IOQ4AtNA+GHEMB8r3GY395Elrra1CIoJ YgwdBrTyzjULL+Z5CQbNykP3Bs4s1BcsxLuZXCXRC+b2BYSQ+ONzmwK2DdeFi1DEQAtw yvKsHA4IoO+9N3qaB9dm7qK9Kxs8mD+LJkH4e6toRDCKWW0080Gzl8qWNZDDz6mQZcM6 8yJTJq7fYUFHXsXiiF0AgXJmmY2IteqH+0AfDNafLHtnoBkCW8IqjvAVFcS82FrMHr7d G7n4WgAVwIpPjWrd9sfddREfYHd+3U6yQnA1OfS6pIztYybLcBYbt5CM28nbDJr1u0xL 7BWA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=e9wISwbX; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411000@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411000@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=N/WM1pYBTCnhvE971sUd+C7OdY94kHTzYAgXWlDCHGE=; b=hrqAAPKp8p9Hjrm1NlSm6S/cW4fom0IW/lN+v3y93RqVrccvQVm14l+U9Dyeu/l9iI C7Nt4S22v4sBf50OjFnmKI04/9bHdNtOMKh9CFpb7tNNQiAg4xxOPZkYCjelEELJzGWG kGYtBbr/XGPz8vDkjXi8RKA60urWD0Da6ZGv+u0Q/RPt+QwdBLvYCdDkKdDwIgtGYSAw W0lcmcNW/xa/eoRLh7Q7X/v0IbGKww6vfmJbCAIBUL47xnlgDm8KPXJ4el2vTzSXx3/O eJQ2/Auho3NYPnQ7iKe++4LiOnc6uAYI4WK5v5+L645oQZSR2vFsblyiUi2IS1X6xvpC R+FQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=e9wISwbX; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411000@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411000@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<2835511.1657812444@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:41:51+00	bruce@momjian.us	Re: doc: Clarify Routines and Extension Membership	<YtCNn2EzntHJG4Se@momjian.us>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	105	6318	[]		On Fri, Jul  8, 2022 at 10:55:55PM -0400, Bruce Momjian wrote:\r\n> > The/that inconsistency ... choose one.  Or actually, the "an ... the"\r\n> > combination you used elsewhere doesn't grate on the ear either.\r\n> > \r\n> > +      For each extension, refuse to drop anything if any objects (other than the\r\n> > +      extensions listed) depend on it.  However, its own member objects, and routines\r\n> > +      that are explicitly dependent on this extension, are skipped.\r\n> > +      This is the default.\r\n> > \r\n> > "skipped" seems like a horrible choice of word; it could easily be read as\r\n> > "they don't get dropped".  I am not convinced that mentioning the member\r\n> > objects here is an improvement either.  In the first sentence you are\r\n> > treating each extension as a monolithic object; why not in the second?\r\n> \r\n> I created a modified patch based on this feedback;  patch attached.  I\r\n> rewrote the last change.\r\n\r\nPatch applied to PG 13 and later, where extension dependency was added. \r\nThank you for the patch.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 17:41:51 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: Clarify Routines and Extension Membership"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657834921; cv=none; d=google.com; s=arc-20160816; b=UCRuffCxm1BltQIN+0Td4b/KiDrmAe0vVOM2XC5iRz2bREEH6kQqgGoDkrkw/5wE52 6Uoy/HdB7g0xv+jI9YO1zI4tWPw5gj4kuqVAtObGE3EQnOkmgoAN7H0kER6v6nuZNly1 zsgOg9jajKJrGYusOyGpUzNfDfM6w8QzzyVUPKqW5rAbfgKXLXYqxhzRU5bN2c3SUb7j UORppsKe4Eanp+TMMCYMxom8Xb+CfKfRLPZdZF/W2Cfu/vujaD0lZIhbj3Evy9d1jAUn +wQlNe2Z3T/i83EYcBJe+2AfjfV1gjXJaniH/Y44YiZlMMsEwaMZS+Vlfnlga9lkweZe OPCQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp248662jai; Thu, 14 Jul 2022 14:42:02 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t9-20020adfeb89000000b00217df75b8f8si2595925wrn.865.2022.07.14.14.42.01 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:42:01 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411009@lists.postgresql.org>) id 1oC6av-0004Jn-IF for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:42:01 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC6aq-0002fb-QW for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:41:56 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC6ao-0007h1-Fr for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:41:56 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC6al-00F6fO-OR; Thu, 14 Jul 2022 17:41:51 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtCNn2EzntHJG4Se@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwbPSHMDGkisRUmewopweC1bFvytVqB=a=X4GFg=4ZWxPA@mail.gmail.com> <2041509.1657066329@sss.pgh.pa.us> <YsjuO5Ql71trmbss@momjian.us>"], "X-Received": ["by 2002:a05:6000:1863:b0:21d:bdb8:5f64 with SMTP id d3-20020a056000186300b0021dbdb85f64mr8575349wri.446.1657834921903; Thu, 14 Jul 2022 14:42:01 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtCNn2EzntHJG4Se%40momjian.us>"], "In-Reply-To": ["<YsjuO5Ql71trmbss@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411009@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411009@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vsY/pydGA3vBlyVOb4bDA6DHeIeACuSbHUuh3h1j1Lvg6NJ332C7vbzCf9iSxkJe/q39qA"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=+f3dbV0zBVyW2tedhrOV5lvIQu/9ajM+4tCNpkH/Itk=; b=B25pYGop5MUCem+yvq0EZ5p9jmvJNanHdSTwvxoFOALlrdGlTwINf79QzG8i455WCP BRsyxJuDh/VVUOCb4cvK/PsGyxdOTqjwJwVFK9/A7BfmTtGctYKdydB/HEEqVBu1BKJd yIbqNqHzf81daldqPX3V/br4WFmqnuzBrqBdLgTskUuh/q5r4+dJpyCXZKnyoanzx3mR HziDcQsXd1uB6DzTg2bHeDbkLwld8A3Ok8IRegP1WIUd9x37ZnLlxWZ6KA/ee3llwVRr /xQ8zYIoHYCGgpMC9Z6pzQywfnVS3W/58wuuCOCRmsF9qJw6qf4GbgMI7fzctaWIOYDG OZ/w=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411009@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411009@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411009@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411009@lists.postgresql.org"]}	["<YsjuO5Ql71trmbss@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:03:45+00	tgl@sss.pgh.pa.us	Re: pg_parameter_aclcheck() and trusted extensions	<3159281.1657836225@sss.pgh.pa.us>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	108	6647	[]		Nathan Bossart <nathandbossart@gmail.com> writes:\r\n> On Thu, Jul 14, 2022 at 04:02:30PM -0400, Tom Lane wrote:\r\n>> I noted something that ought to be looked at separately:\r\n>> validate_option_array_item() seems like it needs to be taught about\r\n>> grantable permissions on GUCs.  I think that right now it may report\r\n>> permissions failures in some cases where it should succeed.\r\n\r\n> Which cases do you think might be inappropriately reporting permissions\r\n> failures?  It looked to me like this stuff was mostly used for\r\n> pg_db_role_setting, which wouldn't be impacted by the current set of\r\n> grantable GUC permissions.  Is the idea that you should be able to do ALTER\r\n> ROLE SET for GUCs that you have SET permissions for?\r\n\r\nWell, that's what I'm wondering.  Obviously that wouldn't *alone* be\r\nenough permissions, but it seems like it could be a component of it.\r\nSpecifically, this bit:\r\n\r\n\t/* manual permissions check so we can avoid an error being thrown */\r\n\tif (gconf->context == PGC_USERSET)\r\n\t\t /* ok */ ;\r\n\telse if (gconf->context == PGC_SUSET && superuser())\r\n\t\t /* ok */ ;\r\n\telse if (skipIfNoPermissions)\r\n\t\treturn false;\r\n\r\nseems like it's trying to duplicate what set_config_option would do,\r\nand it's now missing a component of that.  If it shouldn't check\r\nper-GUC permissions along with superuser(), we should add a comment\r\nexplaining why not.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, pgsql-hackers@postgresql.org"], "To": ["Nathan Bossart <nathandbossart@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:03:45 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657836236; cv=none; d=google.com; s=arc-20160816; b=GLhyKAw+qGv+9PpX0w4M6AL87SkK3G9nTHWvI5BNVios+HmgZkk4cwj6z7wfTO36yO wzeeAqx2Tm0yooFcshsr+09yHnuO+Ut3HsVAcw+FbpJmowVrMXk3WMwFe/9lIShoKgZn etFOI+GcKHtV1vBHOP1SYby2cLLmmuXtRCyD8sQr+SfWB2ODCm9xJo2yCcGmTgKCJ+kQ UYGsYd9JPeJATJSHmn46zS6Cnn6cJGqLzhTp17awiZ38SFc0QGNLEhoWGTHOGNeYHU3/ 6O5zq8yGbIUPS/DNeL6QVUvY4HWJ3Vpm+63yekHYh5eJtLkMo+/oveaDPW9Db73I8SB/ MLTQ=="], "Comments": ["In-reply-to Nathan Bossart <nathandbossart@gmail.com> message dated \\"Thu, 14 Jul 2022 14:52:25 -0700\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp251961jai; Thu, 14 Jul 2022 15:03:56 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d9-20020a67c109000000b00354488449d7si560538vsj.110.2022.07.14.15.03.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:03:56 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411017@lists.postgresql.org>) id 1oC6w7-00084b-6O for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:03:55 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6w2-0006aS-Q4 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:03:50 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC6w0-0005Qb-LJ for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 22:03:49 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EM3j503159282; Thu, 14 Jul 2022 18:03:45 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3159280.1657836225.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3159281.1657836225@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us> <3126292.1657828950@sss.pgh.pa.us> <20220714215225.GA3173833@nathanxps13>"], "X-Received": ["by 2002:a1f:a2c4:0:b0:370:c1be:57cc with SMTP id l187-20020a1fa2c4000000b00370c1be57ccmr4618064vke.10.1657836236050; Thu, 14 Jul 2022 15:03:56 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3159281.1657836225%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220714215225.GA3173833@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411017@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411017@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vr8ps3qbkVqY1Wve05xNcIEqK3DFN65TAiP+Fq+oIjfRTG4Psi3LGnzu786n1wqFPOrhzp"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=PZTsL6dtBa8bk++oJgGCWpGvTLC5NF3cNBjUibPaWAY=; b=ZRaeXd2gf9LUvWG2r6wxlSYmvntJQQ/sVzGsfT7Oh9VsiIAFMCDhKVDM3LTQtKebgO 8VuwiMubHFTd4vdCTddwZciZN1JO3dYDhrEzA3MuKFGN6xHnAZxqNEAso0LcpJZrEpdG TgfN6G7My6GyL4VeZjiavAeZTeoj4gDOWXsY3P3mlKryczQ/piwhCM3ctQO6DkFJiCWB 78qKvD8zTY7hF99fusX5E8EEArg5hgEBx4ZxrmNHx8ccx5Y+kiVQvDJqux08x18Z052Q uw4d5++2fd209DmL7/oY9HFq9oWgdOoe2j+eVEuqt2Fn0pnx8DT00r42mYLCzvFAXUDI jcMQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411017@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411017@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411017@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411017@lists.postgresql.org"]}	["<20220714215225.GA3173833@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:39:32+00	euler@eulerto.com	Re: Introduce "log_connection_stages" setting.	<01a4a798-b724-4ef3-8a44-379c430758b8@www.fastmail.com>	[{"Name": "Sergey Dudoladov", "Address": "sergey.dudoladov@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	\N	104	14197	[]	<!DOCTYPE html><html><head><title></title><style type="text/css">p.MsoNormal,p.MsoNoSpacing{margin:0}</style></head><body><div>On Thu, Jul 14, 2022, at 8:20 AM, Sergey Dudoladov wrote:<br></div><blockquote type="cite" id="qt" style=""><div>I've taken connection stages and terminology from the existing log messages.<br></div><div>The reason I have separated "authorized" and "authenticated" are [1]<br></div><div>and [2] usages of "log_connections";<br></div><div>"received" is mentioned at [3].<br></div></blockquote><div>After checking the commit 9afffcb833d, I agree that you need 4 stages:<br></div><div>connected, authorized, authenticated, and disconnected.<br></div><div><br></div><blockquote type="cite" id="qt" style=""><div>I have thought about enums too, but we need to cover arbitrary<br></div><div>combinations of message types, for example log only "received" and<br></div><div>"disconnected".<br></div><div>Hence the proposed type "string" with individual values within the<br></div><div>string really drawn from an enum.<br></div></blockquote><div>Ooops. I said enum but I meant string list.<br></div><div><br></div><blockquote type="cite" id="qt" style=""><div>Are there any specific deprecation guidelines ? I have not found any<br></div><div>after a quick search for GUC deprecation in Google and commit history.<br></div><div>A deprecation scheme could look like that:<br></div><div>1. Mention in the docs "log_(dis)connections" are deprecated in favor<br></div><div>of "log_connection_stages"<br></div><div>2. Map "log_(dis)connections" to relevant values of<br></div><div>"log_connection_stages" in code if the latter is unset.<br></div><div>3. Complain in the logs if a conflict arises between the old params<br></div><div>and "log_connection_stages", with "log_connection_stages"<br></div><div>taking the precedence.<br></div></blockquote><div>No. AFAICS in this case, you just remove log_connections and log_disconnections<br></div><div>and create the new one (see for example the commit 88e98230268 that replace<br></div><div>checkpoint_segments with min_wal_size and max_wal_size). We don't generally<br></div><div>keep ConfigureNames* entries for deprecated GUCs. Unless you are renaming a GUC<br></div><div>-- see map_old_guc_names; that's not the case. When we remove a GUC, we are<br></div><div>introducing an incompatibility so the only place it will be mentioned is the<br></div><div>release notes (there is a section called "Migration to Version X" that lists<br></div><div>all incompatibilities). From the developer's point of view, you only need to<br></div><div>mention in the commit message that this commit is introducing an<br></div><div>incompatibility. Hence, when it is time to write the release notes, the<br></div><div>information about the removal and the new replacement will be added.<br></div><div><br></div><div><br></div><div id="sig112409080"><div class="signature">--<br></div><div class="signature">Euler Taveira<br></div><div class="signature">EDB&nbsp;&nbsp; <a href="https://www.enterprisedb.com/">https://www.enterprisedb.com/</a><br></div></div><div><br></div></body></html>	On Thu, Jul 14, 2022, at 8:20 AM, Sergey Dudoladov wrote:\r\n> I've taken connection stages and terminology from the existing log messages.\r\n> The reason I have separated "authorized" and "authenticated" are [1]\r\n> and [2] usages of "log_connections";\r\n> "received" is mentioned at [3].\r\nAfter checking the commit 9afffcb833d, I agree that you need 4 stages:\r\nconnected, authorized, authenticated, and disconnected.\r\n\r\n> I have thought about enums too, but we need to cover arbitrary\r\n> combinations of message types, for example log only "received" and\r\n> "disconnected".\r\n> Hence the proposed type "string" with individual values within the\r\n> string really drawn from an enum.\r\nOoops. I said enum but I meant string list.\r\n\r\n> Are there any specific deprecation guidelines ? I have not found any\r\n> after a quick search for GUC deprecation in Google and commit history.\r\n> A deprecation scheme could look like that:\r\n> 1. Mention in the docs "log_(dis)connections" are deprecated in favor\r\n> of "log_connection_stages"\r\n> 2. Map "log_(dis)connections" to relevant values of\r\n> "log_connection_stages" in code if the latter is unset.\r\n> 3. Complain in the logs if a conflict arises between the old params\r\n> and "log_connection_stages", with "log_connection_stages"\r\n> taking the precedence.\r\nNo. AFAICS in this case, you just remove log_connections and log_disconnections\r\nand create the new one (see for example the commit 88e98230268 that replace\r\ncheckpoint_segments with min_wal_size and max_wal_size). We don't generally\r\nkeep ConfigureNames* entries for deprecated GUCs. Unless you are renaming a GUC\r\n-- see map_old_guc_names; that's not the case. When we remove a GUC, we are\r\nintroducing an incompatibility so the only place it will be mentioned is the\r\nrelease notes (there is a section called "Migration to Version X" that lists\r\nall incompatibilities). From the developer's point of view, you only need to\r\nmention in the commit message that this commit is introducing an\r\nincompatibility. Hence, when it is time to write the release notes, the\r\ninformation about the removal and the new replacement will be added.\r\n\r\n\r\n--\r\nEuler Taveira\r\nEDB   https://www.enterprisedb.com/\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Euler Taveira", "Address": "euler@eulerto.com"}]	{"To": ["\\"Sergey Dudoladov\\" <sergey.dudoladov@gmail.com>, \\"PostgreSQL Hackers\\" <pgsql-hackers@lists.postgresql.org>"], "Date": ["Thu, 14 Jul 2022 18:39:32 -0300"], "From": ["\\"Euler Taveira\\" <euler@eulerto.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Introduce \\"log_connection_stages\\" setting."], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657834809; cv=none; d=google.com; s=arc-20160816; b=ejz7hXiRggOv9YGlAqQYW7hu1xHigMDeW/u1xoHW1MxOoxFpg0QIoaO53a+voxIcFQ 0e7+ejvLwZdsy34UyyBvVvWqWeTju0acDL/XcmrxymlrfIi+d5np+z3f8wsVEqleC8yo Tsy58STub1hk2u27vXbRhv3N1ZBEU36vZFuElHw8P3gpHhv35ne1rgSIRd2KEA+NF3dW 641KZGStYsK6DK6McvvUF8h1l7mDXop4cftLkfSKx+whmge+vRYu+EBcOKXmq2GDn4jH uR/PH0mJylPD3KDm4ZpBxAnCzXFVrFEqUOebtWpDqoHqbEdefrY0s2ux4lUcVRKEavmD 20ow=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp248315jai; Thu, 14 Jul 2022 14:40:09 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u2-20020a676002000000b0035428a648dbsi569946vsb.320.2022.07.14.14.40.09 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:40:09 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411004@lists.postgresql.org>) id 1oC6Z6-0004S4-Tv for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:40:08 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <euler@eulerto.com>) id 1oC6Z0-0002eD-Mr for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:40:04 +0000", "from wout4-smtp.messagingengine.com ([64.147.123.20]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <euler@eulerto.com>) id 1oC6Yw-0007f7-Ap for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:40:02 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.west.internal (Postfix) with ESMTP id 1FB003200940; Thu, 14 Jul 2022 17:39:54 -0400 (EDT)", "from imap49 ([10.202.2.99]) by compute2.internal (MEProxy); Thu, 14 Jul 2022 17:39:54 -0400", "by mailuser.nyi.internal (Postfix, from userid 501) id 45C0A15A0083; Thu, 14 Jul 2022 17:39:53 -0400 (EDT)"], "X-Mailer": ["MessagingEngine.com Webmail Interface"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<01a4a798-b724-4ef3-8a44-379c430758b8@www.fastmail.com>"], "Precedence": ["bulk"], "References": ["<CAA8Fd-qCB96uwfgMKrzfNs32mqqysi53yZFNVaRNJ6xDthZEgA@mail.gmail.com> <8cf66a46-ae53-40bd-a590-0a5adc8f7ee0@www.fastmail.com> <CAA8Fd-orLatOYoJq3qspbz=R2T9VyzhBcrZNFKEnHzXqeFONdA@mail.gmail.com>"], "User-Agent": ["Cyrus-JMAP/3.7.0-alpha0-755-g3e1da8b93f-fm-20220708.002-g3e1da8b9"], "X-Me-Proxy": ["<xmx:KY3QYqfWR9H2Sfem_w4lhM-TSvyciTwut7rSOE9At0C9QtZiMzxV1g> <xmx:KY3QYkLbR59VMb2NG_fVBz3EyJnkhcDi7mEVZGtB5B4nXkmgGlCKNA> <xmx:KY3QYnJrsfldBu6iv-Q6OfE1xXp4y_gGd2ObP9Nx4sr_TqygThZLvw> <xmx:KY3QYindOtzXxih2ZiHuYt1LUIl78XUcUeQ1XNQPEAJJH93J1A3xow>"], "X-Received": ["by 2002:a67:c405:0:b0:357:59ac:1500 with SMTP id c5-20020a67c405000000b0035759ac1500mr4246894vsk.39.1657834809834; Thu, 14 Jul 2022 14:40:09 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/01a4a798-b724-4ef3-8a44-379c430758b8%40www.fastmail.com>"], "Feedback-Id": ["i0c21471d:Fastmail"], "In-Reply-To": ["<CAA8Fd-orLatOYoJq3qspbz=R2T9VyzhBcrZNFKEnHzXqeFONdA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411004@lists.postgresql.org>"], "X-Me-Sender": ["<xms:KY3QYj4sHc1aV9rC3iGfWizKUL0IJ6Lbb2ylKiPIDdXd2Y-Eo1VmBQ> <xme:KY3QYo6mSWAvRvuuzmNpWjs5INQU3TZHR0854Xh-TZXokvuty5avL6DHnAp77WfFi v5hOHtopI7FcGnnLZc>"], "Content-Type": ["multipart/alternative; boundary=f86832264b1f47f7a773dee26f30d5b9"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411004@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=eulerto.com; h= cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657834793; x=1657921193; bh=xOV9caH0av iyz0n75qkpZ4FNp37lYPhZ6TVIPnUElNA=; b=dsIGWPQZEZpGw+mOT7/tDhKOG6 Jjh16+MQwKNskrWYE+YKq2D8I/DdpxU/zSijl0PsXidtK/HvlwQvR6MwdW6NuFeg fYKuNTPtpG+cm1ZOQoQLM+7I1IA3nYP3Q8Jmae7+dsbCBZZ+RD7Ccf1uBJFxSAOv 4GEJGRFnxAkI9t8qx335nqEhyYEbw9aURkU9CQPQorHBeCD2Nz+o/siZO10HpMQr OuHEYu1Rpxy7d+m/6Erxvtb/iu7K8tARdDv0TTgTuXkjA5K7Fuk+uWlXdzG3GFM7 hsRNZRjRjLt6m/KCrzTzKb/Y/fUZtwcdTA7MAHfFNFiDUcIHWILLFUOW7RLg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657834793; x=1657921193; bh=xOV9caH0aviyz0n75qkpZ4FNp37l YPhZ6TVIPnUElNA=; b=s1yzR/pkvnx8EnjkccIaluV5m1xAsRRAj3vJkIol0qGH V6DG0XixfB9uYOrqGgMIkeQSElU4ZaR/6diD8tYC695dhY8iIuZDgldPDI7wCmJM lIgVxO2zz24aIuTDW6Aw2phdRA2+l3fqr+m6BPg5f3BQ20rTa+2ByP/bP5sjD69w UStE02XX6MOEwU8SR70s44CLIPEwqR4Yx7+MLZ3GBvb8eSLxqmsSWL7m5ikXSIma IPda/2i5PMxBhHC1S5TpPk9G5mzTMAqix/4EznUGdGJdPRlH6Iac6gJ3BK1bEjvv ZCou6m2XKAyI7ZHilAN7X2z/kSKNv9v13lt2QL/qJg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudejledgudeiiecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpefofgggkfgjfhffhffvufgtsegrtderreerredtnecuhfhrohhmpedfgfhu lhgvrhcuvfgrvhgvihhrrgdfuceovghulhgvrhesvghulhgvrhhtohdrtghomheqnecugg ftrfgrthhtvghrnhepjeethfeuvdfgffdtteevudeftdejueffkeelveekhfevkeegleef hfejhedtjeegnecuffhomhgrihhnpegvnhhtvghrphhrihhsvggusgdrtghomhenucevlh hushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegvuhhlvghrsegv uhhlvghrthhordgtohhm"], "X-Google-Smtp-Source": ["AGRyM1uR1lF91GBDwzZMu1vS3giHF4mgW4aV1TxqHsxEe9q9Sry363w2dqWkyLVzJ53U9pgwr7vC"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:subject:to:from:date :references:in-reply-to:message-id:mime-version:user-agent :feedback-id:dkim-signature:dkim-signature; bh=xOV9caH0aviyz0n75qkpZ4FNp37lYPhZ6TVIPnUElNA=; b=FzglYhlDwxtERlIaumPTB6gAHbIJhD88Hgv84BQG2AkC4HhTidd2xyXAwrKBDzQYLW 9wTzmYPtHElZb0B77zIHKhXp/VIDi7dcj3+F9ahT984lErPH+BFIYNF/S8hnPjbz5RxC TdI6UDb5n49AA8+jirI3Fud8DVKx0zi0cQwyltOGO26R9DLLAfJqSNP3zQHWOy+3qyJC w4Q0Lk7u9vr2pgopJ7IzCfehjl4IF0HZPNsrW9peQvSINErRpdHcX5xMgW1RNQwHItFg cl5V1k0HPFzlN1DqeUDyUncL4huEPXooL4D8bBHLIUoO/8uCV0r4Gj3+5VSiP0D6kIa2 2obg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@eulerto.com header.s=fm3 header.b=dsIGWPQZ; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"s1yzR/pk\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411004@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411004@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@eulerto.com header.s=fm3 header.b=dsIGWPQZ; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"s1yzR/pk\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411004@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411004@lists.postgresql.org"]}	["<CAA8Fd-orLatOYoJq3qspbz=R2T9VyzhBcrZNFKEnHzXqeFONdA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:52:25+00	nathandbossart@gmail.com	Re: pg_parameter_aclcheck() and trusted extensions	<20220714215225.GA3173833@nathanxps13>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	107	9211	[]		On Thu, Jul 14, 2022 at 04:02:30PM -0400, Tom Lane wrote:\r\n> Here's a draft patch for that.  I initially ran around and changed all\r\n> the set_config_option callers as I threatened before, but as I did it\r\n> I could not help observing that they were all changing in exactly the\r\n> same way: basically, they were passing GetUserId() if the GucContext\r\n> is PGC_S_SESSION and BOOTSTRAP_SUPERUSERID otherwise.  Not counting\r\n> guc.c internal call sites, there is a grand total of one caller that\r\n> fails to fit the pattern.  So that brought me around to liking the idea\r\n> of keeping set_config_option's API stable by making it a thin wrapper\r\n> around another function with an explicit role argument.  The result,\r\n> attached, poses far less of an API/ABI hazard than I was anticipating.\r\n> If you're not poking into the GUC tables you have little to fear.\r\n> \r\n> Most of the bulk of this is mechanical changes to pass the source\r\n> role around properly in guc.c's data structures.  That's all basically\r\n> copy-and-paste from the code to track the source context (scontext).\r\n\r\nAt first glance, this looks pretty reasonable to me.  \r\n\r\n> I noted something that ought to be looked at separately:\r\n> validate_option_array_item() seems like it needs to be taught about\r\n> grantable permissions on GUCs.  I think that right now it may report\r\n> permissions failures in some cases where it should succeed.\r\n\r\nWhich cases do you think might be inappropriately reporting permissions\r\nfailures?  It looked to me like this stuff was mostly used for\r\npg_db_role_setting, which wouldn't be impacted by the current set of\r\ngrantable GUC permissions.  Is the idea that you should be able to do ALTER\r\nROLE SET for GUCs that you have SET permissions for?\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, pgsql-hackers@postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 14:52:25 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657835554; cv=none; d=google.com; s=arc-20160816; b=oxn49I0QNbxj7DpyuvI5dss69T8rXfFT5naphBzb02Qmbl/AppV9wHEDLkjGdClm7n Z072qnO2mguJTj4WsklTtnZyYv1DRPt4zIU2pP2bfvJJSdnXYdv9d2YMB0LLb402W6B6 OKCNsb27OZqBvuTgbe2Z8+bByCoo8AUf6KJHtNHPinCrqXHeUuFB+Z2p7kLV1B3Ecjgo LgwLPwH8OFd/x6R1YJ2VvPg81UxGDSsV7y4kUjfqg/jxq+jwVxW69slRGseaWZ5BFdz2 c5B2Si7jk5Fn/Jj2Jrnd1cwcpN5FO9eC5E7gRIg/yLaYR+0Zi9kQnm8IuOyXeDujwOxX RrAw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp250222jai; Thu, 14 Jul 2022 14:52:35 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id h65-20020a1c2144000000b003a2e25fa09fsi7013309wmh.19.2022.07.14.14.52.34 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:52:34 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411012@lists.postgresql.org>) id 1oC6l8-00027t-K5 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:52:34 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC6l3-0000Sr-W6 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:52:30 +0000", "from mail-pj1-x1031.google.com ([2607:f8b0:4864:20::1031]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC6l0-0005LM-Jy for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 21:52:28 +0000", "by mail-pj1-x1031.google.com with SMTP id 89-20020a17090a09e200b001ef7638e536so9838459pjo.3 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 14:52:26 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id l1-20020a63f301000000b00415320bc31dsm1869400pgh.32.2022.07.14.14.52.24 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:52:24 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714215225.GA3173833@nathanxps13>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us> <3126292.1657828950@sss.pgh.pa.us>"], "X-Received": ["by 2002:a5d:5889:0:b0:21d:bccd:38e3 with SMTP id n9-20020a5d5889000000b0021dbccd38e3mr9356016wrf.659.1657835554923; Thu, 14 Jul 2022 14:52:34 -0700 (PDT)", "by 2002:a17:902:f111:b0:16b:f440:5ce0 with SMTP id e17-20020a170902f11100b0016bf4405ce0mr10203808plb.163.1657835545475; Thu, 14 Jul 2022 14:52:25 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714215225.GA3173833%40nathanxps13>"], "In-Reply-To": ["<3126292.1657828950@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411012@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411012@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=znmRE9ujnyFbViub1wnZPN+luMriWQRwQRd0bJ4bKvs=; b=anif18ByOqyuBrAi5t8G1Ur4559hYUqz2VzZ66gmpNB2CyjIJRySnYtPHpRgHzC33L 0LfnhWeYSV9zKZ+yKmuC1GF0bd4y/AAtQ69JgMe/T0dJIzI+4sEO8vFQXcvVlvRIdVln SfQvpDa6FhBkAF6xBvFMP6Ei/oQRSJZzOJd3AImE9jlvFury71T+cp6nMP+Li4ELhmuM BTfINTi4ocgzG/7Kip+OVsTzv0GCVtOg8/zQ6rG2QqoXDR+iP9y1xP87sR7/v8xS/PHu 6uIN7ChcGTWFUHAusi+EI4EM/yaIMml80NKzQp1jlyYhX/+Yj8dufoKi91oj2/b1dmXA DsOw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/W4MMmmZEayft4BQHfWPtHp0VcfB+NPN5H0+d1OycgoVrCgguT hD/u7qKb1p13D38+nJiHtueTMWXpxD4="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1snjpk9FLja15AiZVwS/ajTHu+ZpqMk6xj9u7zTM94N74SW3ZbjOHbPr2LUEkUx7fBfTLWp"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=znmRE9ujnyFbViub1wnZPN+luMriWQRwQRd0bJ4bKvs=; b=b7qH8tGpgFcoP6yqhbT0Dy3ipCcjxfHkIJGLdjoDc0Qf4KfTuzcb6hoEu4YMWru+mV o/LSMIoadp1bIIgCQHa5Xv4lYbtVlvkOJDTEUQFKZXA5uHNcljpBAQBVUtZ/kHe+LWZc PDE1JUYi4MYcOqRWlcZivydg14sT1rC2iVT9PNM9Kbb8ePQXEgYKMbrWysttkO8aUVMq J9FF1L5G0DDpaDpEXRuEzKAsOxjREoY/lRHhWaNGbyxnqpop2+g0jYbj+k2+7feWGuff PTS3FRnxrhF5PkHyMHmJt6wUd8CupVIo2GuOu0f1wYOrZjvxgc4TZGICoo9A3kdiWAjn p36g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=anif18By; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411012@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411012@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=znmRE9ujnyFbViub1wnZPN+luMriWQRwQRd0bJ4bKvs=; b=dtwHKKxLHHhlpYWOKaDu4VvvDv+/vX6CYi8BiKn5HC9wQLKxKEmgRmaCaLWdCSu38+ YR/aUzivmUvr+ga8akX+yooHRnR6wlbWECmxEbj8TJsE/HOA6E9uvBuRk9VZaz64Ba7O rgc/RajtiZBTIBfEeOMu22LoJ2FsTNhjDt0WMm6FHChlzr1QCbJzDDQDdarTstOKiipL FgODr7/d147Ch/pAV9VdQtZsJYVTDBlYD5CEHfunv0DWJ2afojfR36V2KGRfhFnd49OL 8SEniQkHpot68UyMBsBUKlVToeI2nsnw3TgNtK8pgoVVFJOyAaJm7ypyV/nrJySLp50G t8wg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=anif18By; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411012@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411012@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<3126292.1657828950@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 21:47:40+00	alvherre@alvh.no-ip.org	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220714214740.drhmvdx2aseqgvvb@alvherre.pgsql>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	106	35778	[{"charset": "us-ascii", "part_id": "2", "file_name": "v25-0001-Fix-replay-of-create-database-records-on-standby.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "3", "file_name": "v25-0002-split-is_path_tslink-as-a-new-routine.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "4", "file_name": "v25-0003-Don-t-rely-on-ignore_invalid_pages-at-all.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "5", "file_name": "v25-0004-do-CheckTablespaceDirectory-first.patch", "disposition": "attachment", "content_type": "text/x-diff"}]		Here's a couple of fixups.  0001 is the same as before.  In 0002 I think\r\nCheckTablespaceDirectory ends up easier to read if we split out the test\r\nfor validity of the link.  Looking at that again, I think we don't need\r\nto piggyback on ignore_invalid_pages, which is already a stretch, so\r\nlet's not -- instead we can use allow_in_place_tablespaces if users need\r\na workaround.  So that's 0003 (this bit needs more than zero docs,\r\nhowever.)\r\n\r\n0004 is straightforward: let's check for bad directories before logging\r\nabout consistent state.\r\n\r\nAfter all this, I'm not sure what to think of dbase_redo.  At line 3102,\r\nis the directory supposed to exist or not?  I'm confused as to what is\r\nthe expected state at that point.  I rewrote this, but now I think my\r\nrewrite continues to be confusing, so I'll have to think more about it.\r\n\r\nAnother aspect are the tests.  Robert described a scenario where the\r\npreviously committed version of this patch created trouble.  Do we have\r\na test case to cover that problematic case?  I think we should strive to\r\ncover it, if possible.\r\n\r\n-- \r\n√Ålvaro Herrera         PostgreSQL Developer  ‚Äî  https://www.EnterpriseDB.com/\r\n"The eagle never lost so much time, as\r\nwhen he submitted to learn of the crow." (William Blake)\r\n	[{"charset": "utf-8", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Thu, 14 Jul 2022 23:47:40 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657835277; cv=none; d=google.com; s=arc-20160816; b=TkG7myeO7ku2Y+3lmL1zGL91t6woNoPvvFiInKEhaDUSXggxZu4N8Rp2x1FmYIo0fY AdOR5VFHZEfxAOKDwcXO2nbqpVJY+v+JRJFKj9Bt2cU8eLU+o6XaZqwZ+6pyIf9/eWFs VVD/xphxKdj+odwtcy4zUL+IFhF4i0zKW0wTwskeavDzEgm4tAM21vUZ40/ZPPFcAZ/j /rtjOke5u50ebforUayCE7GsLy7YcpjZdlvEVN52eMZO4wjU1kqNytgYUd6Yem9RjpKG sGOSC6OJNjwZIu+niZPIeFUCBKtB8hRS88njk3wwMAg65W4T4Jw1ny+vdXIGYEOnETpc rmQA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp249570jai; Thu, 14 Jul 2022 14:47:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id j186-20020a676ec3000000b003572992ac21si539529vsc.506.2022.07.14.14.47.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 14:47:57 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411011@lists.postgresql.org>) id 1oC6ge-00083h-Rm for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 21:47:56 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oC6ga-0006ZG-7c for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 21:47:52 +0000", "from wout5-smtp.messagingengine.com ([64.147.123.21]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oC6gW-0007kr-BD for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 21:47:51 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.west.internal (Postfix) with ESMTP id 3DACE320098E; Thu, 14 Jul 2022 17:47:45 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute5.internal (MEProxy); Thu, 14 Jul 2022 17:47:45 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 17:47:44 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id 674F236E; Thu, 14 Jul 2022 23:47:40 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714214740.drhmvdx2aseqgvvb@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:AI_QYlkLdw6IUqBIOC7lJ5KUqu0RK7CMQOyvuZIZosX-rN1n3reC7Q> <xmx:AI_QYj2PMf2kYVwl6gL4KDRfYJKxgHCp3ogapM8kVFN5Mtte_i5i6g> <xmx:AI_QYktn7ceXFu9aIznTSsQSze5WBjZv2BH1MmTl-pYHF-kpylu_sw> <xmx:AI_QYuT2Fn2ptn_YB4VGbTtcUOzfXCGXETZn8LmnO6PTihMLJL5OCg>"], "X-Received": ["by 2002:a05:6122:410:b0:374:9b13:daae with SMTP id e16-20020a056122041000b003749b13daaemr4688688vkd.24.1657835277929; Thu, 14 Jul 2022 14:47:57 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714214740.drhmvdx2aseqgvvb%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220713164345.j3n67rc45rpa4vop@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411011@lists.postgresql.org>"], "X-Me-Sender": ["<xms:AI_QYll5tybtm7XB1G8AXFlAf4z__NwfyPx_lFUqJOoVeQMCGrKSBA> <xme:AI_QYg29JqcBlbJDfIKnhZ4NncMDwR10F4sOriWyZODfbzqWodEreC14pNS55vd5f 0yDicvgRbsMLQ5TtA>"], "Content-Type": ["multipart/mixed; boundary=\\"hwk7mjf7k3wvtowq\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411011@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:AI_QYrqEtH7fAlgQp0hw3lJKDTs9uqPlmQsF-TAIhECDBljhk9wsN-4BUJnC348OAngL9vYuj_cJB2f48iuXv4J7_Oi_H5hnP8XqZoqnxYOgRISJixTBscU_Eww4Cc2Fj94>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657835264; x=1657921664; bh=h uVbszS6k2nNwJwVyQ12yHP6QQ2vumA5E6GIITs5Ljk=; b=VoP4senrY7TcPVI4L aUYXsGobW39Z1BTiIddkk2Xdo1+NOnSlMrG8f+xm8UiJ4150EQWD9gYhOFgy7k5P r4JLfniO6k0mM7VwWzPRXAMmNiTaK9T933cSJ2xAJBdcwcO7/Go3QvrPDZbSYN83 kF0zOXiuYAn+91PYi3Ufppcx74QsqxrrAS3Tgjf1jTYg3+2LhbTlb3Y2+L9+h4J6 rhXwKttmIPMdAEGpEAyjfDLMnfzD4btAEgkCT6rOSRko8vpIoj56wk/gfd/H7IAa Oh8IpiP+WM9gLx/m1l4jGkhkf6FiRbgyWTr5xARjPX1cCeDsIHt2W6hQ3nDIEhWY +noVg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddgtddvucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucenucfjughrpeffhffvvefukfggtggugfgjsehmke erredttdejnecuhfhrohhmpeetlhhvrghrohcujfgvrhhrvghrrgcuoegrlhhvhhgvrhhr vgesrghlvhhhrdhnohdqihhprdhorhhgqeenucggtffrrghtthgvrhhnpeduleekkefgtd dttedtkefguddvieffleetgeejiefhteehkeevfeettdduvdfhueenucffohhmrghinhep vghnthgvrhhprhhishgvuggsrdgtohhmnecuvehluhhsthgvrhfuihiivgeptdenucfrrg hrrghmpehmrghilhhfrhhomheprghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhr gh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vlbxLTMk51x39UQnxRJn4FztoZuc3SY8ZXL6ddH6th5gzbIyZDEGPwbyLjWonGo+9Yod+z"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=huVbszS6k2nNwJwVyQ12yHP6QQ2vumA5E6GIITs5Ljk=; b=NwXd7aAhIE2vSXRgTBAUiNcGpLcoI4BNqEgc62+l1+JaMffngV0kDpGkUCwkOVi01r u5oiFZqs3wz9qC1L0noWTFeR+/TkgjgfCjG+NgGTw7Xw9hQ5TfUJRuaxk8dQFiPGrWQw 17vk+R/g4q2vCfHI8KnyfH5bKu0Y93mk77DufNUy7mpVcOCLX4K+SENsFQv9GhgjGvHW SgtJuJ5l5pVx/z/NT81OaSyx1Z0Jch7mH+P4l7k/GRIX1NaHw/P8fc2nVnJWv80t/T1S zwE0OgVHWIRxQDmIziqL9ChHiCOE8lEjFNkkNKNS1pZX5VZDjXvtCIUY2s+LtfsuZYXt 2B3Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=VoP4senr; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411011@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411011@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=VoP4senr; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411011@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411011@lists.postgresql.org"]}	["<20220713164345.j3n67rc45rpa4vop@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:31:31+00	bruce@momjian.us	Re: [PATCH v1] remove redundant check of item pointer	<YtCZQ/Dr3tqhiAQE@momjian.us>	[{"Name": "Junwang Zhao", "Address": "zhjwpku@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	109	7164	[]		On Wed, Apr 27, 2022 at 08:04:00PM +0800, Junwang Zhao wrote:\r\n> In function ItemPointerEquals, the ItemPointerGetBlockNumber\r\n> already checked the ItemPointer if valid, there is no need\r\n> to check it again in ItemPointerGetOffset, so use\r\n> ItemPointerGetOffsetNumberNoCheck instead.\r\n> \r\n> Signed-off-by: Junwang Zhao <zhjwpku@gmail.com>\r\n> ---\r\n>  src/backend/storage/page/itemptr.c | 4 ++--\r\n>  1 file changed, 2 insertions(+), 2 deletions(-)\r\n> \r\n> diff --git a/src/backend/storage/page/itemptr.c b/src/backend/storage/page/itemptr.c\r\n> index 9011337aa8..61ad727b1d 100644\r\n> --- a/src/backend/storage/page/itemptr.c\r\n> +++ b/src/backend/storage/page/itemptr.c\r\n> @@ -37,8 +37,8 @@ ItemPointerEquals(ItemPointer pointer1, ItemPointer pointer2)\r\n>  \r\n>  \tif (ItemPointerGetBlockNumber(pointer1) ==\r\n>  \t\tItemPointerGetBlockNumber(pointer2) &&\r\n> -\t\tItemPointerGetOffsetNumber(pointer1) ==\r\n> -\t\tItemPointerGetOffsetNumber(pointer2))\r\n> +\t\tItemPointerGetOffsetNumberNoCheck(pointer1) ==\r\n> +\t\tItemPointerGetOffsetNumberNoCheck(pointer2))\r\n>  \t\treturn true;\r\n>  \telse\r\n>  \t\treturn false;\r\n\r\nLooking at the code:\r\n\r\n\t/*\r\n\t * ItemPointerGetOffsetNumberNoCheck\r\n\t *      Returns the offset number of a disk item pointer.\r\n\t */\r\n\tstatic inline OffsetNumber\r\n\tItemPointerGetOffsetNumberNoCheck(const ItemPointerData *pointer)\r\n\t{\r\n\t    return pointer->ip_posid;\r\n\t}\r\n\t\r\n\t/*\r\n\t * ItemPointerGetOffsetNumber\r\n\t *      As above, but verifies that the item pointer looks valid.\r\n\t */\r\n\tstatic inline OffsetNumber\r\n\tItemPointerGetOffsetNumber(const ItemPointerData *pointer)\r\n\t{\r\n\t    Assert(ItemPointerIsValid(pointer));\r\n\t    return ItemPointerGetOffsetNumberNoCheck(pointer);\r\n\t}\r\n\r\nfor non-Assert builds, ItemPointerGetOffsetNumberNoCheck() and\r\nItemPointerGetOffsetNumber() are the same, so I don't see the point to\r\nmaking this change.  Frankly, I don't know why we even have two\r\nfunctions for this.  I am guessing ItemPointerGetOffsetNumberNoCheck is\r\nfor cases where you have an Assert build and do not want the check.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["pgsql-hackers@lists.postgresql.org"], "To": ["Junwang Zhao <zhjwpku@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:31:31 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH v1] remove redundant check of item pointer"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657837900; cv=none; d=google.com; s=arc-20160816; b=UC7idSm0kYR5d2Fbkhw/7YB7xzR1n4c8SaRcMqIfekcXisIf8EHQbSHKVyr7t6Hg3H Bu0ntSEwKt3m18eNv8DgxJPjZy7PuMJY2VBKCIPjN+tS4LvGo8kZTUYotNBXzv+9I4nt sjgmfSPWHrtwKLlj3V1dYT97tEX5nU1+FfEqenwSWLNRvV/FjHsgvmwFvcTgfb08VhoY 952mk2+jTXlH8iNlHoKUCZ9E/MxF2CEeEbYGmD6Nv69X7XdE8tOLe5CN3GeEw7NA2aTr Yl/KT4XwyYcQlbQWjKA30yuLO+mMTgTygJ20quBP26SGk48pFz75GLSwGPDySnoyYFOz nQvQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp256550jai; Thu, 14 Jul 2022 15:31:40 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 3-20020a05600c024300b003a0487c8b39si5942976wmj.36.2022.07.14.15.31.40 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:31:40 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411020@lists.postgresql.org>) id 1oC7My-000729-06 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:31:40 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7Mt-0005NJ-DH for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:31:35 +0000", "from momjian.us ([72.94.173.45]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7Mr-0005c5-3c for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:31:34 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC7Mp-00FcGn-J3; Thu, 14 Jul 2022 18:31:31 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtCZQ/Dr3tqhiAQE@momjian.us>"], "Precedence": ["bulk"], "References": ["<20220427120400.65649-1-zhjwpku@gmail.com>"], "X-Received": ["by 2002:adf:efc7:0:b0:21d:9412:7d54 with SMTP id i7-20020adfefc7000000b0021d94127d54mr10142393wrp.230.1657837900389; Thu, 14 Jul 2022 15:31:40 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtCZQ/Dr3tqhiAQE%40momjian.us>"], "In-Reply-To": ["<20220427120400.65649-1-zhjwpku@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411020@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411020@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1ubA/SiyjfGhFssXZ9dzxb7eDaKY4NkhWffpIRK+FdW+10Rvui8IXoeWDcKryAJuSJISznO"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=xR/QdkyU3FkiE7bqQenDVLhJ7UNsIlF4/Q+McFJ/5Tw=; b=jlXFKJgVxYC5Hya2++dorKPS5bKejqFKdNQAS5dgkF8SDBpmUJMLb4a5kct/lMOKBo Lqykk6jCuL86QWFQ3iB4BhCExCpC8ewQPj9FLgmhWdcs+9SW1d8lvbNjffjJh9BTXtGF vvbeZONanxe6sPTJ5hsI8IyvyOufTneKsO4AQt+6vyKCCnuNGNTgoowbnDz2xPgSAAUN 6EqrPMZ1KWnapFnRL9xdASVDB/L7Q21q4ShxdJiQv8i3KSLj/aRGqGVvynaG8bwnN2wn clx9NXEwMYE34g3Uu1cbYelqyDjPIiCIQT3q1/lV7/dqhpTrH9B0HUWy5/z6wkRaeUao 6keQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411020@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411020@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411020@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411020@lists.postgresql.org"]}	["<20220427120400.65649-1-zhjwpku@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:43:24+00	bruce@momjian.us	Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter	<YtCcDNsKw0AllD3O@momjian.us>	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	110	6133	[]		On Mon, Apr 25, 2022 at 08:33:47AM -0700, David G. Johnston wrote:\r\n> Hi,\r\n> \r\n> Both the location and name of the linked to section make no sense to me:\r\n> \r\n> https://www.postgresql.org/docs/current/functions-admin.html#\r\n> FUNCTIONS-ADMIN-DBOBJECT\r\n> \r\n> Neither¬†of the tables listed there manage (cause to change) anything.¬† They are\r\n> pure informational functions - size and path of objects respectively.¬† It\r\n> belongs in the previous chapter "System Information Functions and Operators"\r\n> with a different name.\r\n\r\nSo, the section title is:\r\n\r\n\t9.27.7. Database Object Management Functions\r\n\r\nI think the idea is that they _help_ to manage database objects by\r\nreporting their size or location.  I do think it is in the right\r\nchapter, but maybe needs a better title?  I can't think of one.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:43:24 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657838619; cv=none; d=google.com; s=arc-20160816; b=qtnD/4nkA2fAu+UTJJmbJ2u3K11lRNxhqnwsmX8Vq2WpxicseofufiEe+qUuYVNqJP TsChxlTYbohhZETLKJRHtuSNe3dxu9Cmzmmbgm0V6J2a+wHBHq3i0v4FqsImG3vVqBWa fAK/meieFoPfKcm3tU9PriU+uKTB9Cay07msKApVqOWD1nDDRNj4r1lyEtuhDZvL9XvX r1v6kCFFoEn7mtiWnfCvtfwUaCqj35as4kVn42jwQiqtQFw4HgSJclH+pR40985NLVXj eCw1Py+22qfD/vUBxlDU1VeFsPYIgdnLJWiaw6tEBfCTePbu1oGjy97q2zxM5nwes8Yx sjkA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp258347jai; Thu, 14 Jul 2022 15:43:39 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i7-20020a0560001ac700b0021bab0cbcfesi3431133wry.791.2022.07.14.15.43.39 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:43:39 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411021@lists.postgresql.org>) id 1oC7YZ-0004Nr-1x for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:43:39 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7YU-0002iX-BB for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:43:34 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7YN-00088m-Er for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:43:33 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC7YK-00FeIe-QD; Thu, 14 Jul 2022 18:43:24 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtCcDNsKw0AllD3O@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwaN3hKxd79+LpaEjJsgruww-SFe5zE_iciwaL-hGVN8bA@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:1549:b0:3a1:6f35:c431 with SMTP id f9-20020a05600c154900b003a16f35c431mr11334481wmg.74.1657838619473; Thu, 14 Jul 2022 15:43:39 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtCcDNsKw0AllD3O%40momjian.us>"], "In-Reply-To": ["<CAKFQuwaN3hKxd79+LpaEjJsgruww-SFe5zE_iciwaL-hGVN8bA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411021@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411021@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1srWkL9lMwUzC/BWwAOb9bjiItS09idC97Cmtcpucf07KAbGCRzJwV+D3XNru5xTlR9BRk/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date; bh=tGE/urgUHa4bH+LuQJQ/Ro3pYdNaM7AS0unphYM6DPo=; b=z9P9K6JggKDyr0xz+H7sTxl+bwYXOSSuc7y+2oXvDjDxJ5rV0XlZP/l1lVunhEwLmM DP8wbIivoR1ONl+mzJhetCQV2jwGq5hn34lPz9UO+ylh+qHDFjLjcBEcn8IcOsQaQfXW ywUBKfXou43qbt/Yh1GqeZ6l9ZNDYijkQak5ftSp4V8uWDMEPpXSESR1Ua2o5HRa1+wf DMiHgNskj/HP6LJ4SBPkBuH62wRFAADXIcjSjpC1uv68O7gw93xzoitfuHto/Hbjxc+m d1Q9NHEb3lxaAH1gZ91ygQ2VJOO1O5d2SWsWuRB8xGawGI9JJUgSw94bfuwHTVkk/kJ4 KvVQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411021@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411021@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411021@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411021@lists.postgresql.org"]}	["<CAKFQuwaN3hKxd79+LpaEjJsgruww-SFe5zE_iciwaL-hGVN8bA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:51:07+00	pg@bowt.ie	Re: [PATCH v1] remove redundant check of item pointer	<CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "Junwang Zhao", "Address": "zhjwpku@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	112	8093	[]		On Thu, Jul 14, 2022 at 3:31 PM Bruce Momjian <bruce@momjian.us> wrote:\r\n> On Wed, Apr 27, 2022 at 08:04:00PM +0800, Junwang Zhao wrote:\r\n> for non-Assert builds, ItemPointerGetOffsetNumberNoCheck() and\r\n> ItemPointerGetOffsetNumber() are the same, so I don't see the point to\r\n> making this change.  Frankly, I don't know why we even have two\r\n> functions for this.  I am guessing ItemPointerGetOffsetNumberNoCheck is\r\n> for cases where you have an Assert build and do not want the check.\r\n\r\nSometimes we use ItemPointerData for things that aren't actually TIDs.\r\nFor example, both GIN and B-Tree type-pun the ItemPointerData field\r\nfrom the Indextuple struct. Plus we do something like that with\r\nUPDATEs that affect a partitioning key in a partitioned table.\r\n\r\nThe proposal doesn't seem like an improvement. Technically the\r\nassertion cannot possibly fail here because the earlier assertion\r\nwould always fail instead, so strictly speaking it is redundant -- at\r\nleast right now. That is true. But it seems much more important to be\r\nconsistent about which variant to use. Especially because there is\r\nobviously no overhead in builds without assertions enabled.\r\n\r\n-- \r\nPeter Geoghegan\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Geoghegan", "Address": "pg@bowt.ie"}]	{"Cc": ["Junwang Zhao <zhjwpku@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Thu, 14 Jul 2022 15:51:07 -0700"], "From": ["Peter Geoghegan <pg@bowt.ie>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH v1] remove redundant check of item pointer"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657839101; cv=none; d=google.com; s=arc-20160816; b=MGu5PR8Xe4BhO0eeN97yq+u/CIrSwd50C0ob2SieGyMkcz5RJ73FW6RlhMrtZmOw7m +1j7Vw85Vbg65mZ+atsMvOopOWqNGfkD/1e+VXmF05W3jhgsMncngrxxI7NpI0mgVZDY BOkT1Uw3c6N79FrcBRlsVTjlf93/nsWNgICOCEvUNKkdG+65WwBmMY84wEUdZ5YuXrxd GTTCmKGdbq7+NfYIK942yjwna/X2pdlz6yWNHAHleGpXszBpFOk5+II+ondctVj3zYjN wpjYKcQHkvUFpVevljKSFw6CAumke6FxWgf9jdmM051mX3MEVWHSWbxcC8WY6sW+P2s6 ymmg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp259415jai; Thu, 14 Jul 2022 15:51:41 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l14-20020a5d4bce000000b0021d68df9309si2654175wrt.818.2022.07.14.15.51.41 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:51:41 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411026@lists.postgresql.org>) id 1oC7gL-0007ht-DV for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:51:41 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pg@bowt.ie>) id 1oC7gG-0005zN-Kk for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:51:36 +0000", "from mail-ed1-x52e.google.com ([2a00:1450:4864:20::52e]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pg@bowt.ie>) id 1oC7gE-0008DJ-JD for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:51:36 +0000", "by mail-ed1-x52e.google.com with SMTP id g1so4196959edb.12 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 15:51:34 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220427120400.65649-1-zhjwpku@gmail.com> <YtCZQ/Dr3tqhiAQE@momjian.us>"], "X-Received": ["by 2002:adf:f60a:0:b0:21d:6dd7:cf93 with SMTP id t10-20020adff60a000000b0021d6dd7cf93mr9956051wrp.261.1657839101813; Thu, 14 Jul 2022 15:51:41 -0700 (PDT)", "by 2002:a05:6402:2804:b0:439:83c2:8be2 with SMTP id h4-20020a056402280400b0043983c28be2mr15198259ede.292.1657839093290; Thu, 14 Jul 2022 15:51:33 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAH2-Wz%3D8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ%40mail.gmail.com>"], "In-Reply-To": ["<YtCZQ/Dr3tqhiAQE@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411026@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411026@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=bowt-ie.20210112.gappssmtp.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=TgxLp+iGbwbrsG4MvCV4iPMCQH5j0arixjbcm1zTikM=; b=P8ht6a1oDLTbgkpW7qZEdiy+W+z5x1XY3kvc1CxWRExPPYm+ZTgLu2vpzJtYB00xGv KljqIuiwhD+fOGKJzs3LCpwFmVdGwKAPsi5jisnIBgsBOTXGGKuI7FopFVmyVXDPOoyl HlN/Zfw7tR+DxM/HcO0iJxHU/gz3CPQtNVF0Uzcix2Us4c3E08Xl30mAgmbV14GPcf0A oCPvS0BuKaUo9Wbq5jw7fs2vW7Lm5nIJ2xKYkDGxchuELmcjVZ4bS+vMQhzCzW4QnRRL yjoluk1nHP56wpq5GMCO9/aDR+8v+qPZpFn2mIFIZVsxC3jBeTg2O4M20Sq/V2sI/13w 3m/w=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8M/94ER225Pq9mBHL+hQMMBwBNV1w/aL/iyEaDwD35Zy5mNMK+ CAqLIepJc5P71HE6d9VpqaMYuPJ8GlV8HawCG6WQ6Q=="], "X-Google-Smtp-Source": ["AGRyM1sJFdF9wS4KuBgkprK/o8qcRBX6t0FwqtO0F7NMj/uRFVodU1pOr1h84Ak1f8Z91WLgAjDx"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=TgxLp+iGbwbrsG4MvCV4iPMCQH5j0arixjbcm1zTikM=; b=Xb0K2oYWRt0gvkO/08BbA5VB3mJbXhhTRwxnfM6bGJGlkZBlK3SKUUW4u+Jk7k8GSB av1gUzPjmKLBtlqowb8AaEfR+/89KajKt0n/BeNBbNbD6kqWpT4bRGDOUpW5JE/tEnN9 Rua1BpizaAUFsvpdQfVHG1yIcEOCxJxzJq3QcxXr9RPZSNvyU0vc719ftqW48yhQc+ng 5wmyRH3oko50FDCqWjEUYWYCDo2AQ4lsjcIwXyXV4UqR8yddL4Zx80YKtJ5SANl2TtUq h7uLK4p2rDO93H1UnXKn5iYfHnXuiniTOR8WMHV4k4TokbE7VTQHLc5XVYUUHZC3oeuw KA2A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@bowt-ie.20210112.gappssmtp.com header.s=20210112 header.b=P8ht6a1o; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411026@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411026@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=TgxLp+iGbwbrsG4MvCV4iPMCQH5j0arixjbcm1zTikM=; b=4unorXamzKgcNIr7Etey4gO5P5C0qtYS9AUCDk7n/gqvtsx9GNDJfg1bEw5e4+D9w+ pJeUrLujMhEAmixAjSZR5bR3FMwvJgAj0UWMtybubEHQb1hanrPpU+MRLikVeMI0faFe EvWqVD9JhCgzQnX5IpSP1/bRwmlU22SgTXJe/Jauj3N2JbIo02WZihrfB4Z8OTpD3mIP penEwfhIktvsfx7VXo495HTVkmpXMIY9pt9qAC6F8CGdUQ7vle5BcVTl9pKXPDuAZOOZ VwdwOPMl9m64Q0bYjdIokYv1J+fItTuki0LEaR+ffVxxbjK2KKRkpWaCqhEwceQdwyYA XIYA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@bowt-ie.20210112.gappssmtp.com header.s=20210112 header.b=P8ht6a1o; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411026@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411026@lists.postgresql.org"]}	["<YtCZQ/Dr3tqhiAQE@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:59:11+00	tgl@sss.pgh.pa.us	Re: [PATCH v1] remove redundant check of item pointer	<3170808.1657839551@sss.pgh.pa.us>	[{"Name": "Peter Geoghegan", "Address": "pg@bowt.ie"}]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}, {"Name": "Junwang Zhao", "Address": "zhjwpku@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	116	5901	[]		Peter Geoghegan <pg@bowt.ie> writes:\r\n> The proposal doesn't seem like an improvement. Technically the\r\n> assertion cannot possibly fail here because the earlier assertion\r\n> would always fail instead, so strictly speaking it is redundant -- at\r\n> least right now. That is true. But it seems much more important to be\r\n> consistent about which variant to use. Especially because there is\r\n> obviously no overhead in builds without assertions enabled.\r\n\r\nEven in an assert-enabled build, wouldn't you expect the compiler to\r\noptimize away the second assertion as unreachable code?\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Bruce Momjian <bruce@momjian.us>, Junwang Zhao <zhjwpku@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Peter Geoghegan <pg@bowt.ie>"], "Date": ["Thu, 14 Jul 2022 18:59:11 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH v1] remove redundant check of item pointer"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657839564; cv=none; d=google.com; s=arc-20160816; b=P4YrhALwg/wbrtNW2J3DZKPunUKnTXSTyD8dRinIZkX6mVg49A5CuphTcloRaKdu59 /htlsq6Ryo1Owv2JCgFffPjOL/AfyGBMqzXH3NQRlUo2/ao7KePhNK7HbaCA0f1Zf0Aq 8f+1PWI8Nt+EzLUrwt2A3WqeLMt3SWIc5u3xSrxSQWavw560eVehkJSqPyOvcLe1lFw8 QD2vHdz4K/X+1yWfzUq5XWwOWXGMDLhnl5trGRo4GOfpXWZ0jOxliAVnSH8Cb/QRDYj3 ec+wqr2mPYCDM3B9F421hGhqhqa21JxoY/aMwQlU+aEfGr8N85igBkcshOS9aJwuP2bU xEMw=="], "Comments": ["In-reply-to Peter Geoghegan <pg@bowt.ie> message dated \\"Thu, 14 Jul 2022 15:51:07 -0700\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp260761jai; Thu, 14 Jul 2022 15:59:24 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q3-20020adf9dc3000000b0021b88b4d022si2788714wre.259.2022.07.14.15.59.24 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:59:24 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411030@lists.postgresql.org>) id 1oC7no-00065F-G3 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:59:24 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC7nj-0004O1-Qm for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:59:19 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC7nd-0008Hk-KX for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:59:19 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EMxBXU3170809; Thu, 14 Jul 2022 18:59:11 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3170807.1657839551.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3170808.1657839551@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220427120400.65649-1-zhjwpku@gmail.com> <YtCZQ/Dr3tqhiAQE@momjian.us> <CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com>"], "X-Received": ["by 2002:a7b:ce04:0:b0:3a1:92e0:d889 with SMTP id m4-20020a7bce04000000b003a192e0d889mr11116417wmc.131.1657839564801; Thu, 14 Jul 2022 15:59:24 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3170808.1657839551%40sss.pgh.pa.us>"], "In-Reply-To": ["<CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411030@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411030@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uTC6mkzfTaQrYoHxRQgcFkMx4tZItY+rwxxDqkfk/8VyZ6xKZ5lAlZA3sgfwsTPdDdQRAA"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=xxqL/Sa09vNnrrOjfV/3GNyQQ7LG0o/6ePJr7i+1LGw=; b=b7WdB/nzI2B3s9a5+XRfQQUQ3V1kCu8O1ofJTNCDrSqapXX2um9/nF70fBdJpBKCov jcrNgAzvQUXze8VqGOrEasrs5ZnPVYuUc56v2ze6II0CAhtbWe5pIGYD5S0qdVSVVWY2 /7GGZNn7uJ9+WpRaAo5ksxaAJ7hGzkZV2aZAG/fm8K8N2uR3tewO4JGqsU14jyjNC6J6 5zkULFw/n0Oribl6ztLiVzjrf3G3Ql+crw2R+uAMaxbEdw9AYydwkxaIoiS8khWRjk5p /HetjehpPdjVQ2XQpwqCj76BbKCi2XmROxpJN/p0HXoSZgVrwDpcv8kkQco1vne7+u1K wt2Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411030@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411030@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411030@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411030@lists.postgresql.org"]}	["<CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:57:29+00	tgl@sss.pgh.pa.us	Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter	<3170227.1657839449@sss.pgh.pa.us>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	113	6698	[]		Bruce Momjian <bruce@momjian.us> writes:\r\n> On Mon, Apr 25, 2022 at 08:33:47AM -0700, David G. Johnston wrote:\r\n>> Both the location and name of the linked to section make no sense to me:\r\n>> https://www.postgresql.org/docs/current/functions-admin.html#\r\n>> FUNCTIONS-ADMIN-DBOBJECT\r\n>> Neither¬†of the tables listed there manage (cause to change) anything.¬† They are\r\n>> pure informational functions - size and path of objects respectively.¬† It\r\n>> belongs in the previous chapter "System Information Functions and Operators"\r\n>> with a different name.\r\n\r\n> So, the section title is:\r\n> \t9.27.7. Database Object Management Functions\r\n> I think the idea is that they _help_ to manage database objects by\r\n> reporting their size or location.  I do think it is in the right\r\n> chapter, but maybe needs a better title?  I can't think of one.\r\n\r\nI'm hesitant to move functions to a different documentation page\r\nwithout a really solid reason.  Just a couple days ago I fielded a\r\ncomplaint from somebody who couldn't find string_to_array anymore\r\nbecause we'd moved it from "array functions" to "string functions".\r\n\r\nI'd be the first to say that the division between 9.26 and 9.27 is\r\npretty arbitrary ... but without a clearer demarcation rule,\r\nmoving functions between the two pages seems more likely to\r\nadd confusion than subtract it.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Thu, 14 Jul 2022 18:57:29 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657839461; cv=none; d=google.com; s=arc-20160816; b=rnnuamhQ3SQ/HIEBRnPd0eWsnDliBD2dAnUpSG7GhGpRfjvlK5DNkMmSwmAa55ec2i 8NxDHK4op0JgF7n1ZdGT5xmO8pSGyD6MuDLSpyblYSdtJeeyXZKzQdyfoUx42mZRHNpa bcgxppfN9pKa7vFaYsZ7M273KeS8BDB+TrhsfN1Igf6hqT+rtYq0CgCLib36fBAVoaSA fQ8PN64SnLgvyvcU+X1XIICb40GUfVl23AYIpZ7L1gIq4LJ3j7Tp+WPAJ/Szzl/JOYJc eH7t2XLg6tATUPbCF9nVyyV5wL9aSjfCJofJxg2GK0msooHNDlRWZsAz+C8isPtdAceY 9fMQ=="], "Comments": ["In-reply-to Bruce Momjian <bruce@momjian.us> message dated \\"Thu, 14 Jul 2022 18:43:24 -0400\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp260557jai; Thu, 14 Jul 2022 15:57:41 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t4-20020a05600001c400b0021da952321esi3076313wrx.233.2022.07.14.15.57.40 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:57:41 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411027@lists.postgresql.org>) id 1oC7m8-0003CN-P1 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:57:40 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC7m3-0001JO-VZ for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:57:35 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oC7m0-0008Gj-1L for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:57:35 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26EMvT1R3170228; Thu, 14 Jul 2022 18:57:29 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3170226.1657839449.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3170227.1657839449@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwaN3hKxd79+LpaEjJsgruww-SFe5zE_iciwaL-hGVN8bA@mail.gmail.com> <YtCcDNsKw0AllD3O@momjian.us>"], "X-Received": ["by 2002:a05:600c:2c4c:b0:3a2:dd0f:fa03 with SMTP id r12-20020a05600c2c4c00b003a2dd0ffa03mr11212297wmg.18.1657839461130; Thu, 14 Jul 2022 15:57:41 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3170227.1657839449%40sss.pgh.pa.us>"], "In-Reply-To": ["<YtCcDNsKw0AllD3O@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411027@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411027@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vmjOKfbiwUWa2NGwadWbjTyeGCAKvqoBFU+Ox8J2iS/HNK9RordNe1vtq8DSpH2QZYkKFa"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=tv0DM4AYLLQP5ccki8P1Uim6W1PJqe5eTluJruCriNU=; b=osIaVhb5TtGPjJSfPLE0w+VeKOwsPFM1BNh8RlpJNieHYo+0AtYTu55vyC9N1BXtSa DzKaZj+WHwFMJ4HUjzpSnBV39XIBR78GyU1NG/xmLhms7MJcfCggaa7mYJwGSFHiCs0v tTlPZnExvkQ3nkv6ifGii8HtcpTK7oferrUhjG4prnJFF3Py5qNbp/pSLYK7ZOVsnj5A b0k24juBsJzjDJw6MezgZa/DAaAA+ko50i7ux39BsmZ2gYJ8J+l5pO5WUnR11rZitgRf aofmsno0HCZeJI1mrmYwAQVBtI+ZJzIKsQR2DT72FDIWS9G4Hs+vuAqId1v4BRSxuXUQ 3qEg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411027@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411027@lists.postgresql.org"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411027@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411027@lists.postgresql.org"]}	["<YtCcDNsKw0AllD3O@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:58:09+00	bruce@momjian.us	Re: doc: New cumulative stats subsystem obsoletes comment in maintenance.sgml	<YtCfgReFVWdeN92+@momjian.us>	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	\N	115	7081	[]		On Wed, Apr 20, 2022 at 04:40:44PM -0700, David G. Johnston wrote:\r\n> Hackers,\r\n> \r\n> The new cumulative stats subsystem no longer has a "lost under heavy load"\r\n> problem so that parenthetical should go (or at least be modified).\r\n> \r\n> These stats can be reset so some discussion about how the system uses them\r\n> given that possibility seems like it would be good to add here.¬† I'm not sure\r\n> what¬†that should look like though.\r\n> \r\n> diff --git a/doc/src/sgml/maintenance.sgml b/doc/src/sgml/maintenance.sgml\r\n> index 04a04e0e5f..360807c8f9 100644\r\n> --- a/doc/src/sgml/maintenance.sgml\r\n> +++ b/doc/src/sgml/maintenance.sgml\r\n> @@ -652,9 +652,8 @@ vacuum insert threshold = vacuum base insert threshold +\r\n> vacuum insert scale fac\r\n> ¬† ¬† ¬†tuples to be frozen by earlier vacuums.¬† The number of obsolete tuples and\r\n> ¬† ¬† ¬†the number of inserted tuples are obtained from the cumulative statistics\r\n> system;\r\n> ¬† ¬† ¬†it is a semi-accurate count updated by each <command>UPDATE</command>,\r\n> - ¬† ¬†<command>DELETE</command> and <command>INSERT</command> operation. ¬†(It is\r\n> - ¬† ¬†only semi-accurate because some information might be lost under heavy\r\n> - ¬† ¬†load.) ¬†If the <structfield>relfrozenxid</structfield> value of the table\r\n> + ¬† ¬†<command>DELETE</command> and <command>INSERT</command> operation.\r\n> + ¬† ¬†If the <structfield>relfrozenxid</structfield> value of the table\r\n> ¬† ¬† ¬†is more than <varname>vacuum_freeze_table_age</varname> transactions old,\r\n> ¬† ¬† ¬†an aggressive vacuum is performed to freeze old tuples and advance\r\n> ¬† ¬† ¬†<structfield>relfrozenxid</structfield>; otherwise, only pages that have\r\n> been modified\r\n\r\nYes, I agree and plan to apply this patch soon.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, Andres Freund <andres@anarazel.de>"], "To": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "Date": ["Thu, 14 Jul 2022 18:58:09 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: New cumulative stats subsystem obsoletes comment in maintenance.sgml"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657839499; cv=none; d=google.com; s=arc-20160816; b=Hkw40Qy9spWkDQNaacmx2lg8kBBtmC1iKKryThuN4mnvTm+FrqqOmwirY+a9G0235y VWCu7SjRbOP52iQSLFRmbYMCH2hMkk95VvHBc+VTtcvwNEphJlhvgmbTHtqm5hx+UG1b foD8RS8DF2wYTIaZxzDqze5AXi/0fve/VJmcIJVyhVgLdGqTxYqmvnmg+Uz5qpiDcfSX WGFT1La0+6xxUAhZbH8cx4+Pd1ITveLei29PhGzkM3MiDzjBYU1AcnfFWxUdy3iIorK/ Vm7+3fyjekKaV88NfO8Pqqp2vNFCTk2uZtlxEx3ukdW+7aCtmvXCAk0XXy3sloG4u9R8 Pnbw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp260638jai; Thu, 14 Jul 2022 15:58:19 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id az6-20020a05600c600600b003a2f5617e02si3494798wmb.99.2022.07.14.15.58.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:58:19 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411029@lists.postgresql.org>) id 1oC7mk-00019b-Pb for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:58:18 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7mg-0007nT-1c for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:58:14 +0000", "from momjian.us ([72.94.173.45]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC7md-0005pr-P1 for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:58:12 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC7mb-00Fgkd-AB; Thu, 14 Jul 2022 18:58:09 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtCfgReFVWdeN92+@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwbxqkgLsF4vCKJUgqAObGPwhGwvK7P2dv_uX3sWKBksNA@mail.gmail.com>"], "X-Received": ["by 2002:a05:600c:ada:b0:3a2:e8ac:7c99 with SMTP id c26-20020a05600c0ada00b003a2e8ac7c99mr11045403wmr.96.1657839499077; Thu, 14 Jul 2022 15:58:19 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtCfgReFVWdeN92%2B%40momjian.us>"], "In-Reply-To": ["<CAKFQuwbxqkgLsF4vCKJUgqAObGPwhGwvK7P2dv_uX3sWKBksNA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411029@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411029@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1tjGLP+f2TJhIhlsWI8UJRSOyfY39uqI0hqahr7MSiSkwr/B3eyxAtBPs3T+3HcGn46DtD/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date; bh=8PPI9v1icFFjbz2RepgwCk9w0aaD86NYIlLJNQKt0qo=; b=q5K7/9EzXBzriLvrojKU+P/GQs29onxQiv1RbksKe12XLqRdsFybztj6r0HTe9z7rQ NuZ78CJBLI09jFl3GV1TgVwdKnzy8OLd4jPBidm9CKCAkJmEvZ8UliwEZCEP18A+Fmyz 0SFaqqKOmYzeulnb5OqrHEkcfo2P0pWnu3rE2FuGzQGzcCYbxGpNh5nyr0tLD/eAH9Qp 6x1/pPjwX4Aek/cyxDAjSAS05pZOJdDEiw6WNHbLDrp1kJF2jKe+RZImwmsUhzLFIpei 6Wohs11pn0wuezV86cO7pw2SG/Z6YIu5Gt1N+pqN7ERF9YfCHe2OD0LT5WOuLEEkGcMX hVFw=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411029@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411029@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411029@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411029@lists.postgresql.org"]}	["<CAKFQuwbxqkgLsF4vCKJUgqAObGPwhGwvK7P2dv_uX3sWKBksNA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 23:10:20+00	pg@bowt.ie	Re: [PATCH v1] remove redundant check of item pointer	<CAH2-WzmH7uax50-GyOKXPP_YA-suwXgTcT3N-58rxQWx_Qxksw@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}, {"Name": "Junwang Zhao", "Address": "zhjwpku@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	117	7774	[]		On Thu, Jul 14, 2022 at 3:59 PM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n> Even in an assert-enabled build, wouldn't you expect the compiler to\r\n> optimize away the second assertion as unreachable code?\r\n\r\nI think that it probably would, even at -O0 (GCC doesn't really allow\r\nyou to opt out of all optimizations). I did think of that myself, but\r\nit seemed rather beside the point.\r\n\r\nThere have been individual cases where individual assertions were\r\ndeemed a bit too heavyweight. But those have been few and far between.\r\nI myself tend to use *lots* of technically-redundant assertions like\r\nthis for preconditions and postconditions. At worst they're code\r\ncomments that are all but guaranteed to stay current.\r\n\r\n-- \r\nPeter Geoghegan\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Geoghegan", "Address": "pg@bowt.ie"}]	{"Cc": ["Bruce Momjian <bruce@momjian.us>, Junwang Zhao <zhjwpku@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 16:10:20 -0700"], "From": ["Peter Geoghegan <pg@bowt.ie>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH v1] remove redundant check of item pointer"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657840255; cv=none; d=google.com; s=arc-20160816; b=y9azjKAw8rwJhmtIpIsI2CqJKrSKSZ5F5ZDkv8CBcVGvOImi9WGm8KT6zeJX8fIFMP Dbb917CqeEoov9CKjCMAiME4mh1IGz48jSYOsWQbdI4zDteu6Ig5K4ax9VhbyR+yocS2 JdW97wiMvMhtr9LbOO3z2SHFGMQA0TacBmi8XoMjWhD+f//C6S9Q0Hs/duGx7TstE5U8 v6f2kCBmO0Bf3y/heEEwSp+f7CHjiuETgseTrdUySZmTXQLVMsHWfzk4GBBOTIRlvo4X rSC1aL/1Ix39FgDXlyChNRtlTjvT/4pp6MnYhm57LhL9LMjbsSqL0r9CKEE7aeBxqTMm ejFA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp263571jai; Thu, 14 Jul 2022 16:10:55 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n4-20020a5d5984000000b00210a6de6434si4340180wri.798.2022.07.14.16.10.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 16:10:55 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411031@lists.postgresql.org>) id 1oC7yw-00030B-Sg for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 23:10:54 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pg@bowt.ie>) id 1oC7ys-0001KB-8p for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 23:10:50 +0000", "from mail-ej1-x62e.google.com ([2a00:1450:4864:20::62e]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pg@bowt.ie>) id 1oC7yp-0005v4-Tk for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 23:10:49 +0000", "by mail-ej1-x62e.google.com with SMTP id mf4so6075843ejc.3 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 16:10:47 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAH2-WzmH7uax50-GyOKXPP_YA-suwXgTcT3N-58rxQWx_Qxksw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220427120400.65649-1-zhjwpku@gmail.com> <YtCZQ/Dr3tqhiAQE@momjian.us> <CAH2-Wz=8vLbqP6pWr66u5beekSm6SaAMBeMuQsbu7i2jpsQ6oQ@mail.gmail.com> <3170808.1657839551@sss.pgh.pa.us>"], "X-Received": ["by 2002:a7b:c01a:0:b0:3a1:7ab1:e5dc with SMTP id c26-20020a7bc01a000000b003a17ab1e5dcmr17189920wmb.128.1657840255293; Thu, 14 Jul 2022 16:10:55 -0700 (PDT)", "by 2002:a17:906:6989:b0:726:f129:1748 with SMTP id i9-20020a170906698900b00726f1291748mr10663380ejr.495.1657840246368; Thu, 14 Jul 2022 16:10:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAH2-WzmH7uax50-GyOKXPP_YA-suwXgTcT3N-58rxQWx_Qxksw%40mail.gmail.com>"], "In-Reply-To": ["<3170808.1657839551@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411031@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411031@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=bowt-ie.20210112.gappssmtp.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=8djXAxxCjS8Vbve4uj50fpRiOjdzrAdhv/UwKp9uINQ=; b=fM44Uh3fbPbh3qJJc/oN2qHS4WbIr+Vom2cJuj48J8dz3u81s2f8/0oJv9QmqgDqR+ HvLThU9+Ua7HizqRqENgj16maM2q0GtMhyjvBH4vfYMSk7TaT7fWDv7Lc10idTnyiqBJ qmkS+EHiespR8F3W6gOZvTvXUIXGSlh8JpLOSjXymn36Ib4dj6OaLZensSTOmJjx1M/N oeBZzPsHegZiyWfdjS+Oq093piQzkxCZB96WCqqo5sRn0rMl07SGDeVUcNvMThgsfhvC k9CF2UG5UO8gVVbVawYoZ2yUla9jwCpUZ3Wp+P0NgLIS2ofNR3iRLGzD39kq97rLN3eq rfRQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora88tfPztiJVH983WTUu7RmOkb/CSX86DoDp9k+8L1LTQ6bM9/iG BINJuc+lgOS33Yjnm7S32/UehmO7Yv7mzguWCtUtIQ=="], "X-Google-Smtp-Source": ["AGRyM1sx7UA7qhI9CpmwcQGsxn4XyMmwBLadOnZesJ4tj5Sa5J6SIOUWwNxnGYCPeZu7sooyh/yT"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=8djXAxxCjS8Vbve4uj50fpRiOjdzrAdhv/UwKp9uINQ=; b=HhLVwp/2RL18iA16n+lYDdnqCIPX3w4RQDspyg2UTLd870efRkXvW0dzIXKnx7Mh42 QmJt2vlyKrO+wR46zvntnw+D8uDS9fYukD7W0dpWsBIH7gZTSTfLwmiF7uyird8dMH+Y 1bJLWTm7BNKvSB/aQonIcv5nytVuABhxyVt3wq7iAvXYKjOxBzd2hfd6F1pOT04z/VU6 vxhWfcFhonkqsq+fVXoNU/LIoRkO4Q4IdMvrSMrkwpO1Hn8xEqEUxnYqvbmbw/bcsBTi hA8rpa09TYmsOkl81Xlju+7jrGx5CHYrA00atTbc9lJRAXUY8fZjrxY8U0qUn36OTP+z 6Vjw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@bowt-ie.20210112.gappssmtp.com header.s=20210112 header.b=fM44Uh3f; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411031@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411031@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=8djXAxxCjS8Vbve4uj50fpRiOjdzrAdhv/UwKp9uINQ=; b=gd5bD/Pi1go+BOAY94WreNfI19YHndzFY9ZmC0JUg6bUnZj6tBfZ8DkP2thNln1VOS YQP8FKQwlTDNrUj+RH9MbUCCd1L6ocfz7RRLB6NHW3NuKrR3GxydOVFRPvalorqbEooQ pZRrboYHh7u5dA6HA+NOQVBD3LgU6h8zeydOj0SADjh0kATOH/uiEL3fSPN0Uebze8Wl b9SavO93sUYMTpQXOrmzzmgYM00UhifSCCIUmzsoE02dBwZZSX0GmCxvYvNjjRhBawwd wSElP2+UMIZWCaClznEfs2ip3FhXKMJS+PTq4Kf3FE/Z+Kp88B81vr5gI40wTKEShSg+ OzEA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@bowt-ie.20210112.gappssmtp.com header.s=20210112 header.b=fM44Uh3f; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411031@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411031@lists.postgresql.org"]}	["<3170808.1657839551@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:57:35+00	nathandbossart@gmail.com	Re: pg_parameter_aclcheck() and trusted extensions	<20220714225735.GB3173833@nathanxps13>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	114	10940	[]		On Thu, Jul 14, 2022 at 06:03:45PM -0400, Tom Lane wrote:\r\n> Nathan Bossart <nathandbossart@gmail.com> writes:\r\n>> On Thu, Jul 14, 2022 at 04:02:30PM -0400, Tom Lane wrote:\r\n>>> I noted something that ought to be looked at separately:\r\n>>> validate_option_array_item() seems like it needs to be taught about\r\n>>> grantable permissions on GUCs.  I think that right now it may report\r\n>>> permissions failures in some cases where it should succeed.\r\n> \r\n>> Which cases do you think might be inappropriately reporting permissions\r\n>> failures?  It looked to me like this stuff was mostly used for\r\n>> pg_db_role_setting, which wouldn't be impacted by the current set of\r\n>> grantable GUC permissions.  Is the idea that you should be able to do ALTER\r\n>> ROLE SET for GUCs that you have SET permissions for?\r\n> \r\n> Well, that's what I'm wondering.  Obviously that wouldn't *alone* be\r\n> enough permissions, but it seems like it could be a component of it.\r\n> Specifically, this bit:\r\n> \r\n> \t/* manual permissions check so we can avoid an error being thrown */\r\n> \tif (gconf->context == PGC_USERSET)\r\n> \t\t /* ok */ ;\r\n> \telse if (gconf->context == PGC_SUSET && superuser())\r\n> \t\t /* ok */ ;\r\n> \telse if (skipIfNoPermissions)\r\n> \t\treturn false;\r\n> \r\n> seems like it's trying to duplicate what set_config_option would do,\r\n> and it's now missing a component of that.  If it shouldn't check\r\n> per-GUC permissions along with superuser(), we should add a comment\r\n> explaining why not.\r\n\r\nI looked into this a bit closer.  I found that having SET permissions on a\r\nGUC seems to allow you to ALTER ROLE SET it to others.\r\n\r\n\tpostgres=# CREATE ROLE test CREATEROLE;\r\n\tCREATE ROLE\r\n\tpostgres=# CREATE ROLE other;\r\n\tCREATE ROLE\r\n\tpostgres=# GRANT SET ON PARAMETER zero_damaged_pages TO test;\r\n\tGRANT\r\n\tpostgres=# SET ROLE test;\r\n\tSET\r\n\tpostgres=> ALTER ROLE other SET zero_damaged_pages = 'on';\r\n\tALTER ROLE\r\n\tpostgres=> SELECT * FROM pg_db_role_setting;\r\n\t setdatabase | setrole |        setconfig        \r\n\t-------------+---------+-------------------------\r\n\t           0 |   16385 | {zero_damaged_pages=on}\r\n\t(1 row)\r\n\r\nHowever, ALTER ROLE RESET ALL will be blocked, while resetting only the\r\nindividual GUC will go through.\r\n\r\n\tpostgres=> ALTER ROLE other RESET ALL;\r\n\tALTER ROLE\r\n\tpostgres=> SELECT * FROM pg_db_role_setting;\r\n\t setdatabase | setrole |        setconfig        \r\n\t-------------+---------+-------------------------\r\n\t           0 |   16385 | {zero_damaged_pages=on}\r\n\t(1 row)\r\n\r\n\tpostgres=> ALTER ROLE other RESET zero_damaged_pages;\r\n\tALTER ROLE\r\n\tpostgres=> SELECT * FROM pg_db_role_setting;\r\n\t setdatabase | setrole | setconfig \r\n\t-------------+---------+-----------\r\n\t(0 rows)\r\n\r\nI think this is because GUCArrayReset() is the only caller of\r\nvalidate_option_array_item() that sets skipIfNoPermissions to true.  The\r\nothers fall through to set_config_option(), which does a\r\npg_parameter_aclcheck().  So, you are right.\r\n\r\nRegarding whether SET privileges should be enough to allow ALTER ROLE SET,\r\nI'm not sure I have an opinion yet.  You would need WITH GRANT OPTION to be\r\nable to grant SET to that role, but that's a bit different than altering\r\nthe setting for the role.  You'll already have privileges to alter the role\r\n(e.g., CREATEROLE), so requiring extra permissions to set GUCs on roles\r\nfeels like it might be excessive.  But there might be a good argument for\r\nit.\r\n\r\n-- \r\nNathan Bossart\r\nAmazon Web Services: https://aws.amazon.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, pgsql-hackers@postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 15:57:35 -0700"], "From": ["Nathan Bossart <nathandbossart@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_parameter_aclcheck() and trusted extensions"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657839470; cv=none; d=google.com; s=arc-20160816; b=S9rDMhdTYwd1ZT0ptTQKEMMO6C/Vgsyu0R83Keigf+FgyGh+9Ipzlt7VW7FSeCv9iy F3CEDLUWa0aQHNg7XT7ciZZQeDHSpqZ/q7yWjuUEr/qM/R44nx9/yOyWOoeB3sWadMTz llSHEV9JuxMwXuZRBUYucEP/mrsr2soxEyomk3eMODVOQwyVmHz54g84IMOEBTXCCbMN b64r40KMHbXFOGR2E7v0f+JQgsbrxZ3rXqjV5UOwinPdVDeirHkG3+dlbYU+1ZIcUPhO DGqERj1sETmRht84dz+4Y/YHRIGM+PSHRKyMrnLRuTxiYTDzffNtnhtSjkMGTHwE3o0R qNjQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp260573jai; Thu, 14 Jul 2022 15:57:50 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i67-20020a1c3b46000000b003a2fe209ec2si5823985wma.60.2022.07.14.15.57.50 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:57:50 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411028@lists.postgresql.org>) id 1oC7mI-0005yD-5Y for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:57:50 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC7mD-00049J-DM for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:57:45 +0000", "from mail-pj1-x102a.google.com ([2607:f8b0:4864:20::102a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <nathandbossart@gmail.com>) id 1oC7m6-0005ot-Kl for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 22:57:44 +0000", "by mail-pj1-x102a.google.com with SMTP id g16-20020a17090a7d1000b001ea9f820449so9942270pjl.5 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 15:57:38 -0700 (PDT)", "from nathanxps13 ([50.54.155.70]) by smtp.gmail.com with ESMTPSA id q126-20020a634384000000b0040ca587fe0fsm1902968pga.63.2022.07.14.15.57.36 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:57:36 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714225735.GB3173833@nathanxps13>"], "Precedence": ["bulk"], "References": ["<20220706224727.GA2158260@nathanxps13> <YsYxEtX8zOYKf3Ru@paquier.xyz> <2995921.1657212060@sss.pgh.pa.us> <3126292.1657828950@sss.pgh.pa.us> <20220714215225.GA3173833@nathanxps13> <3159281.1657836225@sss.pgh.pa.us>"], "X-Received": ["by 2002:adf:e908:0:b0:21d:76ea:abbf with SMTP id f8-20020adfe908000000b0021d76eaabbfmr9876751wrm.226.1657839470522; Thu, 14 Jul 2022 15:57:50 -0700 (PDT)", "by 2002:a17:902:ebd2:b0:16c:2607:acbe with SMTP id p18-20020a170902ebd200b0016c2607acbemr10589358plg.14.1657839457649; Thu, 14 Jul 2022 15:57:37 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714225735.GB3173833%40nathanxps13>"], "In-Reply-To": ["<3159281.1657836225@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411028@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411028@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to; bh=0v/yB2VQQLH/PXg8dPVzRtqjjnFxHbSIU1oG5FIz7zo=; b=V9kcVVYPwNCZ0Ev6UpP9IRXxZK++Pn3OTotxQdt0QxDV63mAr+hNU31IJpZC7Hi5T9 rUHiimNwgphorBiZ+KXGPw0z25I/NOtQoxzRTUdypRX+soa8X7W8xOpdwEx16GwLIyS5 O/MfX4H7UcjtlB0HUuwUyqYCGaCEDYaYe2hYNBXj8I75K8gijlAWqTxsv0CGTbKPhSBx 6/3O50thn/LFv/pWwHel2vH7pjfVsHpkSbBHI6wES3xxdIvFa7FU9n3E8VFH5+LwbNPx uns1wTF2qN5RYdyy95hBeD/bGvsl9vDv/5FtMNXkgBe1zv0xToMAJKAwB2YmkhH0GCvN Codg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9Wr8Ttfx2Secim2NlL8E52kdUNMOTs3sblRSYQY32CE4toTD5f /UUJF98l94rsUp5fBzM74m7C/F+1nPg="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1tEpB/Vlcd/mpot7ePcEW4A6K/8SedyeKJ/nABCg8q4lAf2VQPT3h3o7DHR3yF1ff5J77r0"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=0v/yB2VQQLH/PXg8dPVzRtqjjnFxHbSIU1oG5FIz7zo=; b=QJJ9gkSwgNsvV6RTI8XIVWilt0ux3a9blAsyz9AN7ZQngXZPDtNYoTLAXFNEUePiDO HpVjvPiJ+GIFoxHg0TcC7XqxpQdfj5WnaT+N/yEo0USy/yyrU/Vlsjs/oiPt+MXt5Ksi xn0a9IIGY3vnZeoHww31aNBm1IAXm7K8tg4KV2UbinIHIdzgllCFHk3W+XA4gcqjvoCT OAFGMmi1xLbmuGHVSCd+arqIaY33NHYYiCO5JqGIcBgKuhNPG7lFhVFTnKOP9xKjep3b yqUp/+BO+gigVCeBNgvBrzayA3RbmfIWXpEnQXSKLgfVVcNUrx4hOtqY1hS42jipP0bl K9OA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=V9kcVVYP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411028@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411028@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to; bh=0v/yB2VQQLH/PXg8dPVzRtqjjnFxHbSIU1oG5FIz7zo=; b=k++Qdkj6RZiKtfZywqGL5lIEL4kjx32vQOQmC5+TlNbGBIk9quLMX8UYXUnmLwi0Mz ou3QkIl0Av03tzTXkPpmxXpbs8Y3Rhcp0aMNRPO71yOUKBBYKZrvLYhM7tyHky+8Psp6 fKwJuaUiLx1G+tDB6+lsLt7mfSZ7UU1IITCs7EpYlFACZge/VNF9kAVK4lM3/WF8UHK6 hK8UGY0N8/1+c4BiY+/GDyBh8E8+jXg3qMJBSqwxuVhIiE8TZi+ZGYMHg+Jl6u7FywsZ Ahdw6a8lmNN3vqUWWd5HavALeAHtATH/oQqHsfNdj4evAaXeZYaMaYxze50kjwVygm/6 5EoQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=V9kcVVYP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411028@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411028@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<3159281.1657836225@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 22:44:48+00	melanieplageman@gmail.com	Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)	<CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Magnus Hagander", "Address": "magnus@hagander.net"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Lukas Fittl", "Address": "lukas@fittl.com"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	\N	111	102399	[{"charset": "US-ASCII", "part_id": "2", "file_name": "v26-0003-Track-IO-operation-statistics.patch", "content_id": "f_l5llm2g92", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "3", "file_name": "v26-0004-Add-system-view-tracking-IO-ops-per-backend-type.patch", "content_id": "f_l5llm2ga3", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "4", "file_name": "v26-0002-Remove-unneeded-call-to-pgstat_report_wal.patch", "content_id": "f_l5llm2g91", "disposition": "attachment", "content_type": "text/x-patch"}, {"charset": "US-ASCII", "part_id": "5", "file_name": "v26-0001-Add-BackendType-for-standalone-backends.patch", "content_id": "f_l5llm2g60", "disposition": "attachment", "content_type": "text/x-patch"}]	<div dir="ltr"><div dir="ltr">In addition to adding several new tests, the attached version 26 fixes a<br>major bug in constructing the view.<br><br>The only valid combination of IOPATH/IOOP that is not tested now is<br>IOPATH_STRATEGY + IOOP_WRITE. In most cases when I ran this in regress,<br>the checkpointer wrote out the dirty strategy buffer before VACUUM got<br>around to reusing and writing it out in my tests.<br><br>I&#39;ve also changed the BACKEND_NUM_TYPES definition. Now arrays will have<br>that dead spot for B_INVALID, but I feel like it is much easier to<br>understand without trying to skip that spot and use those special helper<br>functions.<br><br>I also started skipping adding rows to the view for WAL_RECEIVER and<br>WAL_WRITER and for BackendTypes except B_BACKEND and WAL_SENDER for<br>IOPATH_LOCAL.<br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, Jul 12, 2022 at 1:18 PM Andres Freund &lt;<a href="mailto:andres@anarazel.de">andres@anarazel.de</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\nOn 2022-07-11 22:22:28 -0400, Melanie Plageman wrote:<br>\r\n&gt; Yes, per an off list suggestion by you, I have changed the tests to use a<br>\r\n&gt; sum of writes. I&#39;ve also added a test for IOPATH_LOCAL and fixed some of<br>\r\n&gt; the missing calls to count IO Operations for IOPATH_LOCAL and<br>\r\n&gt; IOPATH_STRATEGY.<br>\r\n&gt; <br>\r\n&gt; I struggled to come up with a way to test writes for a particular<br>\r\n&gt; type of backend are counted correctly since a dirty buffer could be<br>\r\n&gt; written out by another type of backend before the target BackendType has<br>\r\n&gt; a chance to write it out.<br>\r\n<br>\r\nI guess temp file writes would be reliably done by one backend... Don&#39;t have a<br>\r\ngood idea otherwise.<br>\r\n<br></blockquote><div><br></div><div>This was mainly an issue for IOPATH_STRATEGY writes as I mentioned. I<br>still have not solved this.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; I&#39;m not sure how to cause a strategy &quot;extend&quot; for testing.<br>\r\n<br>\r\nCOPY into a table should work. But might be unattractive due to the size of of<br>\r\nthe COPY ringbuffer.<br></blockquote><div><br></div><div>Did it with a CTAS as Horiguchi-san suggested.<br></div><div>¬†</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\n&gt; &gt; Would be nice to have something testing that the ringbuffer stats stuff<br>\r\n&gt; &gt; does something sensible - that feels not entirely trivial.<br>\r\n&gt; &gt;<br>\r\n&gt; &gt;<br>\r\n&gt; I&#39;ve added a test to test that reused strategy buffers are counted as<br>\r\n&gt; allocs. I would like to add a test which checks that if a buffer in the<br>\r\n&gt; ring is pinned and thus not reused, that it is not counted as a strategy<br>\r\n&gt; alloc, but I found it challenging without a way to pause vacuuming, pin<br>\r\n&gt; a buffer, then resume vacuuming.<br>\r\n<br>\r\nYea, that&#39;s probably too hard to make reliable to be worth it.<br>\r\n<br></blockquote><div><br></div><div>Yes, I have skipped this.</div><div><br></div><div>- Melanie <br></div></div></div>\r\n	In addition to adding several new tests, the attached version 26 fixes a\r\nmajor bug in constructing the view.\r\n\r\nThe only valid combination of IOPATH/IOOP that is not tested now is\r\nIOPATH_STRATEGY + IOOP_WRITE. In most cases when I ran this in regress,\r\nthe checkpointer wrote out the dirty strategy buffer before VACUUM got\r\naround to reusing and writing it out in my tests.\r\n\r\nI've also changed the BACKEND_NUM_TYPES definition. Now arrays will have\r\nthat dead spot for B_INVALID, but I feel like it is much easier to\r\nunderstand without trying to skip that spot and use those special helper\r\nfunctions.\r\n\r\nI also started skipping adding rows to the view for WAL_RECEIVER and\r\nWAL_WRITER and for BackendTypes except B_BACKEND and WAL_SENDER for\r\nIOPATH_LOCAL.\r\n\r\nOn Tue, Jul 12, 2022 at 1:18 PM Andres Freund <andres@anarazel.de> wrote:\r\n\r\n> On 2022-07-11 22:22:28 -0400, Melanie Plageman wrote:\r\n> > Yes, per an off list suggestion by you, I have changed the tests to use a\r\n> > sum of writes. I've also added a test for IOPATH_LOCAL and fixed some of\r\n> > the missing calls to count IO Operations for IOPATH_LOCAL and\r\n> > IOPATH_STRATEGY.\r\n> >\r\n> > I struggled to come up with a way to test writes for a particular\r\n> > type of backend are counted correctly since a dirty buffer could be\r\n> > written out by another type of backend before the target BackendType has\r\n> > a chance to write it out.\r\n>\r\n> I guess temp file writes would be reliably done by one backend... Don't\r\n> have a\r\n> good idea otherwise.\r\n>\r\n>\r\nThis was mainly an issue for IOPATH_STRATEGY writes as I mentioned. I\r\nstill have not solved this.\r\n\r\n\r\n>\r\n> > I'm not sure how to cause a strategy "extend" for testing.\r\n>\r\n> COPY into a table should work. But might be unattractive due to the size\r\n> of of\r\n> the COPY ringbuffer.\r\n>\r\n\r\nDid it with a CTAS as Horiguchi-san suggested.\r\n\r\n\r\n>\r\n> > > Would be nice to have something testing that the ringbuffer stats stuff\r\n> > > does something sensible - that feels not entirely trivial.\r\n> > >\r\n> > >\r\n> > I've added a test to test that reused strategy buffers are counted as\r\n> > allocs. I would like to add a test which checks that if a buffer in the\r\n> > ring is pinned and thus not reused, that it is not counted as a strategy\r\n> > alloc, but I found it challenging without a way to pause vacuuming, pin\r\n> > a buffer, then resume vacuuming.\r\n>\r\n> Yea, that's probably too hard to make reliable to be worth it.\r\n>\r\n>\r\nYes, I have skipped this.\r\n\r\n- Melanie\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Melanie Plageman", "Address": "melanieplageman@gmail.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Magnus Hagander <magnus@hagander.net>, Pg Hackers <pgsql-hackers@postgresql.org>, Lukas Fittl <lukas@fittl.com>, Thomas Munro <thomas.munro@gmail.com>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Thu, 14 Jul 2022 18:44:48 -0400"], "From": ["Melanie Plageman <melanieplageman@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657838711; cv=none; d=google.com; s=arc-20160816; b=dae/hFfoRMPgItKKLzmrZ74xY3vLJ9xVG90eBCxt3xP7LShvFD5gA2VyU5dmdemBJQ GridQi0j9wyiChEzKVDjKZDXtJEh9M7nKwQGgIrxT7JRC1wiRHzX/PEGd+sU6VVN9F/p YvI75chZX1fBerMJChB5KjwMdnRq4yTp5YlSWgTunmJMt1mmRTQgWp5iBzOfi9Du49NW Tvr4YzpiAwBW3VZ71mTf6t59RL4pEwiL3foB8zGgD92MGROwtLTABv8ZtdQ6J0dyUdj2 aBGQI4IOXXYX0ZZBdB+4+rgcYXvcqpnKQX7gyvTicuHsFu/e/ByFb5XT2KzmRVHnmNsR TnFA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp258548jai; Thu, 14 Jul 2022 15:45:12 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p3-20020a5d59a3000000b0021dac9c986esi3945137wrr.921.2022.07.14.15.45.11 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 15:45:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411024@lists.postgresql.org>) id 1oC7a3-0001ww-Hn for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 22:45:11 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oC7Zy-0000Kt-0W for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 22:45:06 +0000", "from mail-wm1-x336.google.com ([2a00:1450:4864:20::336]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oC7Zt-00089o-Ol for pgsql-hackers@postgresql.org; Thu, 14 Jul 2022 22:45:05 +0000", "by mail-wm1-x336.google.com with SMTP id b6so1346287wmq.5 for <pgsql-hackers@postgresql.org>; Thu, 14 Jul 2022 15:45:01 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAAKRu_bwAmyQ=3SfxG3Jb8rRUBjoMwJtT99D6gG5fqqLmVpCQA@mail.gmail.com> <20211216201837.fm73l7zixfjknttd@alap3.anarazel.de> <CAAKRu_ZKgdacVqLjjfpp6zAnd_Ks9vTqU3UOh-JkPWvWMJ6KEw@mail.gmail.com> <CAAKRu_Y2t8uOhMBU461foxJd_C0gTyND-wZzvE8d-FLFtJOksw@mail.gmail.com> <CAAKRu_YbiJxFiEUi_d_UW_DWc=rnP4vJmBNgUHmXPr5awfQPfA@mail.gmail.com> <CAAKRu_ZJkk1KUZS-KAaa3EZ2e1o2YD7w8-NF-po5dTHM7cF=Rg@mail.gmail.com> <20220322001505.fgysjvihvagduete@alap3.anarazel.de> <CAAKRu_Y_B9pLm1-b6A5CfRhuWEMMy2iMy1zNG0_3GhejD-ZsMg@mail.gmail.com> <20220706192047.sikr2vuwvpslqdrw@alap3.anarazel.de> <CAAKRu_YKc9e_=CZ4RB97Krx9TQb-zfNMoqdP45AYs5uZFqXeSA@mail.gmail.com> <20220712171810.7f2ppc45torgaavu@awork3.anarazel.de>"], "X-Received": ["by 2002:a05:6000:1682:b0:21d:bc7c:1c72 with SMTP id y2-20020a056000168200b0021dbc7c1c72mr9857874wrd.199.1657838711960; Thu, 14 Jul 2022 15:45:11 -0700 (PDT)", "by 2002:a7b:cb53:0:b0:3a2:f19e:b764 with SMTP id v19-20020a7bcb53000000b003a2f19eb764mr14351912wmj.101.1657838700495; Thu, 14 Jul 2022 15:45:00 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY%2BJaYUX_oUmtZug%40mail.gmail.com>"], "In-Reply-To": ["<20220712171810.7f2ppc45torgaavu@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411024@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000d6f49505e3cba62a\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411024@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=1Rq2Psk6rvEcwiWSCYkT1b311YiIqnPHJIAsxZUwbwI=; b=eCqNxntWWiLSe604IGr4E8fq0tU8spMbGI9B+8fdOEdMarNazI7ytQULoVdYHBf0k3 oCfUXYC0jqNZbAOhwdbekZM7CJhcToNBAAq0xRzz8EYpAa9YVTZ47/tlB4LhThJpJdJu nDfW+JDvbBgWlTP6+NowSaimJyUnc9zzFoP6+8ACfBtwQOkhW0E6mU3hHyYPcihrEmeq f6n9QcaWzdWZ7HJF0TYm6uXL0QBynS8u6sQJNhpOF9FW5Jxc/xZy69hMFG0wG+Lq1SeJ JxioPTyuyvaUzD9kpIU4f8scf60tTvaOq68XoJaB3NLTefw6evHIKsr2lXKEhRZVZRj3 N0zg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8Kil+gndyq7KK+7hpIZwbYVkCB/lJpNDcS9fFeEMFLz1JBrdN7 tlIT2NGJ9MajjEBg5g2PZe2UUEAnipMu97dCH2c="], "X-Google-Smtp-Source": ["AGRyM1v4jQfSDEjCbqP2yb3IS6cUAU9PKj8Z35VrrliBR05aLN6v4JK76C7aPFIXdlF3k9mBJI+1"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=1Rq2Psk6rvEcwiWSCYkT1b311YiIqnPHJIAsxZUwbwI=; b=Jj/lqFxV349gqSAxKqilO6QaSSi5mwDB3b4j4XBr42M/DAdsNfNAht+Ew29ALaju7O DRmCMpyDg3ldyY+SZkNY/1GjL7hnbno9GQFydoGY/vIC3qEs09d8b3El9n6rk+Q7O3mo PR1JD0Y+UB29wNEOdsm40ez5MrwFcDwKGp8XFp2MQcwIRcVgbATn76g+MY6Q1wKXboUq mh4PRjKXqPYLwyi0zPCRV7IrxVduoeOWKlx+8OJRQzY4Rempo4OClo9Y67ZO7ZcnhQgq DWejVG/g0QsmGloPlEcBKd3D28ln8LIJL01JMZyqG2iZ8kaG8c08qE/OnOmcZGwX/nGs f4Sg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=eCqNxntW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411024@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411024@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=1Rq2Psk6rvEcwiWSCYkT1b311YiIqnPHJIAsxZUwbwI=; b=J1DUfOHzeKn4gNQO4wwgqLCpN5iScdwicBmzi6b+/cQ3lsu3cBqmTbVLSVDpGxSJVT nQihLgKLUbXKq13hxyU06Tr6qXGKg+M8LoVtBvinS1k7RNfvOIDa2DwMUMpsn/OCcoBA vfK5fPxO9zPiIpBqoa2fthgGnWZptq6heRJH/hx8AsJ9SB+wF5foOErDa3YWndGsdEMu UNZwVx0cCstA/AIIAdpj0sMyO2qKWZkpF6O8cH4QeSD8y8FNwOwGn3tpd2O2YHOw19fF QOJ5kjn7CHKJn5zJZkdeylOEsm8MgIATJQVxdpUkKNsgVGh0gHmL9GnkKMcud/PnlbQt ER+A=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=eCqNxntW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411024@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411024@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220712171810.7f2ppc45torgaavu@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-14 23:31:01+00	andres@anarazel.de	Re: doc: New cumulative stats subsystem obsoletes comment in maintenance.sgml	<20220714233101.2pzkzg6fjnmpucwu@awork3.anarazel.de>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	118	10517	[]		Hi,\r\n\r\nI had missed David's original email on this topic...\r\n\r\nOn 2022-07-14 18:58:09 -0400, Bruce Momjian wrote:\r\n> On Wed, Apr 20, 2022 at 04:40:44PM -0700, David G. Johnston wrote:\r\n> > The new cumulative stats subsystem no longer has a "lost under heavy load"\r\n> > problem so that parenthetical should go (or at least be modified).\r\n> > \r\n> > These stats can be reset so some discussion about how the system uses them\r\n> > given that possibility seems like it would be good to add here.¬† I'm not sure\r\n> > what¬†that should look like though.\r\n> > \r\n> > diff --git a/doc/src/sgml/maintenance.sgml b/doc/src/sgml/maintenance.sgml\r\n> > index 04a04e0e5f..360807c8f9 100644\r\n> > --- a/doc/src/sgml/maintenance.sgml\r\n> > +++ b/doc/src/sgml/maintenance.sgml\r\n> > @@ -652,9 +652,8 @@ vacuum insert threshold = vacuum base insert threshold +\r\n> > vacuum insert scale fac\r\n> > ¬† ¬† ¬†tuples to be frozen by earlier vacuums.¬† The number of obsolete tuples and\r\n> > ¬† ¬† ¬†the number of inserted tuples are obtained from the cumulative statistics\r\n> > system;\r\n> > ¬† ¬† ¬†it is a semi-accurate count updated by each <command>UPDATE</command>,\r\n> > - ¬† ¬†<command>DELETE</command> and <command>INSERT</command> operation. ¬†(It is\r\n> > - ¬† ¬†only semi-accurate because some information might be lost under heavy\r\n> > - ¬† ¬†load.) ¬†If the <structfield>relfrozenxid</structfield> value of the table\r\n> > + ¬† ¬†<command>DELETE</command> and <command>INSERT</command> operation.\r\n> > + ¬† ¬†If the <structfield>relfrozenxid</structfield> value of the table\r\n> > ¬† ¬† ¬†is more than <varname>vacuum_freeze_table_age</varname> transactions old,\r\n> > ¬† ¬† ¬†an aggressive vacuum is performed to freeze old tuples and advance\r\n> > ¬† ¬† ¬†<structfield>relfrozenxid</structfield>; otherwise, only pages that have\r\n> > been modified\r\n> \r\n> Yes, I agree and plan to apply this patch soon.\r\n\r\nIt might make sense to still say semi-accurate, but adjust the explanation to\r\nsay that stats reporting is not instantaneous?\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Thu, 14 Jul 2022 16:31:01 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: New cumulative stats subsystem obsoletes comment in maintenance.sgml"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657841481; cv=none; d=google.com; s=arc-20160816; b=1KeSsctAzjtv9+nboEjfrfJ9/8Xa+MWPMA1oolhVdVaj2fjEwF2FlNaW4nFMw6kTVK oGVxJ3t2Efth99MN15TXTp2PaqvaB3SB3bIo5P2Cle0nHH7tPZtLf1WXCEj+0vob3qMe NtW2MXQSL2f5yKcINROFn8A+lJDCK8K89NT6of+eLnnZjzFlKu5cp+0yqjSRal2kOdUB Hc+qT6jsbQMzOLO7dO1PEiPL585SP/Y3/DmCRWYTZvQAtNnlzHDFqC8Rx/4szFq5cvyR aF6AeSz9B8M+DUzYINRakjtb87qQxHgbYz2bV8WR5Tcr/IJt+bKdPvIwz/Ctxqh1njy8 BEug=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp2795jai; Thu, 14 Jul 2022 16:31:21 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id az24-20020a05600c601800b003a2f1953f1asi7942948wmb.45.2022.07.14.16.31.21 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 16:31:21 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411033@lists.postgresql.org>) id 1oC8Ij-0001tl-27 for postgres.email+pgsql-hackers@gmail.com; Thu, 14 Jul 2022 23:31:21 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oC8Ic-00009C-Sb for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 23:31:16 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oC8IT-0000AU-SQ for pgsql-hackers@lists.postgresql.org; Thu, 14 Jul 2022 23:31:13 +0000", "from compute4.internal (compute4.nyi.internal [10.202.2.44]) by mailout.nyi.internal (Postfix) with ESMTP id 1436B5C00FF; Thu, 14 Jul 2022 19:31:03 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute4.internal (MEProxy); Thu, 14 Jul 2022 19:31:03 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 19:31:02 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220714233101.2pzkzg6fjnmpucwu@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<CAKFQuwbxqkgLsF4vCKJUgqAObGPwhGwvK7P2dv_uX3sWKBksNA@mail.gmail.com> <YtCfgReFVWdeN92+@momjian.us>"], "X-Me-Proxy": ["<xmx:NqfQYiBnCddVyQmpK5ShbJGWC2HcNUlMuPesyw4X7CDWZ652vpCqag> <xmx:NqfQYvhsaw9yeB46lWwUr1ZjRWzIq00w32SXqQd-m73w9OErMJmGsw> <xmx:NqfQYurRKhoZjukkVsFG5Ik4sJ1x0hluCdiZM_a6AiVcl68t0wxOoQ> <xmx:N6fQYnY2OnLisucStd7k1ACilUWUAQC31g8EZU2WLMq5qmgMt0A7sA>"], "X-Received": ["by 2002:adf:f0d2:0:b0:21d:78b0:33c1 with SMTP id x18-20020adff0d2000000b0021d78b033c1mr9870876wro.122.1657841481495; Thu, 14 Jul 2022 16:31:21 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220714233101.2pzkzg6fjnmpucwu%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<YtCfgReFVWdeN92+@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411033@lists.postgresql.org>"], "X-Me-Sender": ["<xms:NqfQYmTB_G-6HCvGYwQkCVtafqWK_gWi2ctEvYKirPSRJvi26b5MQw> <xme:NqfQYrxLhAypQQvqZbyhZh0QJTHSazg-w_4ZoQFf4PLU5pfNjK_XnQNe-qRO9NRPE OdVvLpV9R_-5jPTWA>"], "Content-Type": ["text/plain; charset=iso-8859-1"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411033@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:NqfQYj1_DwF8aUe-XNM2Y5i1F9TRVU2RPvmlShBMmDxzSy_mcZas-9YGmpErPwSpSmlLJXK1n-8lMHJh_bOd9FW8zFO46dxXb5wHfbQQbrhP1QDscxWQQfYMiniu>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-transfer-encoding:content-type:date:date:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to; s=fm3; t=1657841463; x= 1657927863; bh=3SIYn9JYFi6unC0ACOAZe4EoKtpVOI6+X+i8Botgt5o=; b=L y5arV5m1W0tMhl7FWCOIZfuxBO/HeyMLJWNDBDpaV9AvxB9vsJNagONDX/tyGth0 mNYXdwgSiJGRS2vlbTkoc5hPOYcINEwSY3OTRj/gUScIThxMIYjZi3kzsayb0PGp 8DOEo1Es4Kpm/AIJ46nwe7f1fO8+G+CbAsD4DxESY7h7iFM6wkVHAn5qBhRiwNqc e4EdNxRUIpXp8JhbNGehPmDVEEmcY0Im0a15clHbuB3CVZJw0W4ffIrOq/5M7B8q TDIF53QtOKOts51qTzpfV1vHX+C3LsNHlrycyL25X8nki+TWoxA0FgnFDlEBTJKF XKY4QgUhIiqk1lyYe9phg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657841463; x= 1657927863; bh=3SIYn9JYFi6unC0ACOAZe4EoKtpVOI6+X+i8Botgt5o=; b=T lVJ23oIcHNq4V4BPZLDxyFl2m3F+/MGg6hMkun9Z5vQkwZ87sxli6CGgYt/TBjKG jqr1E8J2VBeVpa/7a6nc/sGXXnacduMIuHGA2rIKa6DRyQVQUYrCkJamXiNIslxB Ktk4uXwNP4+23okYBgb9scnYLWwsJVRQUOvmDHyt8lZ7zObjzXR8apsey92uPCB6 KmZULsy1Vzyz37ac+vG83UHn5m2TU0ustVHAhR1sdONfG5Qn3JbA1kjCNaFf79a6 5jHaLu9uvJnWYmtbtuNOgjsgN8Mh+OjBZD8B9KbuARXsukTxzACV0l8AiPgp8lSs CLt/zEbt76dE8fJVf1ymw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddgvddvucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkfhggtggugfgjsehtkeertddttddunecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedutdeigeeljeehueejieevgeeulefhkeelueffudekudeludffheff gfetieevhfenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1ulWuqjWuzaXNYfmzDDBhO+SfaRBHzKXGiWaLM8xQEPs8YauuyI2g4JDiSpfc9YvuzNRtkH"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:cc:to:from:date:feedback-id :dkim-signature:dkim-signature; bh=3SIYn9JYFi6unC0ACOAZe4EoKtpVOI6+X+i8Botgt5o=; b=kfpHtcfgE+dfqhcOwcX/79NSku1Mcw8Lssbkk06YEqt3vRumQSiJpHHvJqh8RRT5h3 TEssTmSivj6fd9jbEjJV9ztna0oE93JGeT3E2GRK8K6Ya8mMtPYl6xt7hb4Oaw1kG0E0 ieB4spFMofP/m6LaeD6UkMwMMs5zKKV6FKjKB72RNQsOTWDg1VVbLbPdVo+QtQBKQOAr y5mT5M1JMOddKpyvt4aj8xxTfzamG+0tmYk9jviLLD5HoIWeOqmwO8gxHcXlXPq53B05 YlexAOD3YieaIxqO+EIEWFtVQACmpUQ5bFbRzEpS9ZyNQKi55qlhm5WmFiOuVLrLvx86 3LIw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=Ly5arV5m; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=TlVJ23oI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411033@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411033@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=Ly5arV5m; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=TlVJ23oI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411033@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411033@lists.postgresql.org"]}	["<YtCfgReFVWdeN92+@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 00:01:41+00	bruce@momjian.us	Re: Fix typo in progress reporting doc	<YtCuZXL20Sx+L8oN@momjian.us>	[{"Name": "Nitin Jadhav", "Address": "nitinjadhavpostgres@gmail.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	119	5695	[]		On Fri, Mar 11, 2022 at 04:07:32PM +0530, Nitin Jadhav wrote:\r\n> Hi,\r\n> \r\n> I have observed that the table naming conventions used in\r\n> 'progress-reporting.html' are not consistent across different\r\n> sections. For some cases "Phases" (Table 28.37. CREATE INDEX Phases)\r\n> is used and for some cases "phases" (Table 28.35. ANALYZE phases) is\r\n> used. I have attached a patch to correct this.\r\n\r\nPatch applied to PG 13, where it first appeared, and all later releases.\r\nThanks.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Nitin Jadhav <nitinjadhavpostgres@gmail.com>"], "Date": ["Thu, 14 Jul 2022 20:01:41 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Fix typo in progress reporting doc"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657843311; cv=none; d=google.com; s=arc-20160816; b=fmwcVblL/Nnxc8QRvlghQPQy3ihurasOg7qTPpL4BMxfLyx5zsizjmW1oWBfs+S+VZ 8G8EFBnFZ3WpVLicVmYfRm6Ktj0jTTsdMrGlsVzUUIiQ3JHTFiglW8NPOqxE3mmKo2cX BkopLjp/3VoxOTzM7w4ck8SJBuyUu/cS9/MxCUz+xMkMKE/WCFBxTMVDAi4JVNt52ZRf aEpv90Xje+bfp65yu58LgvfV/a+TFZHjPnKt8XFicqM7Dc+I5VS2jzvPkcnXL7J6QRze vezPxMn/kp8kQWfrIvOW8dIDtVRLo5rZggqK6CpTtyMbzEdZ37NpKXLv4Fw4EskEhKSy M5vg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp7589jai; Thu, 14 Jul 2022 17:01:51 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c4-20020a5d4cc4000000b0021d8e3feb3bsi2952310wrt.316.2022.07.14.17.01.51 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 17:01:51 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411042@lists.postgresql.org>) id 1oC8mE-0003hF-Sj for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 00:01:50 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC8mA-0001s5-6Y for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 00:01:46 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC8m7-0000Uv-Jt for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 00:01:45 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC8m5-00GN2J-OX; Thu, 14 Jul 2022 20:01:41 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtCuZXL20Sx+L8oN@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAMm1aWbmTHwHKC2PERH0CCaFVPoxrtLeS8=wNuoge94qdSp3vA@mail.gmail.com>"], "X-Received": ["by 2002:a05:6000:1447:b0:21d:b22b:e5d with SMTP id v7-20020a056000144700b0021db22b0e5dmr9804045wrx.189.1657843311274; Thu, 14 Jul 2022 17:01:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtCuZXL20Sx%2BL8oN%40momjian.us>"], "In-Reply-To": ["<CAMm1aWbmTHwHKC2PERH0CCaFVPoxrtLeS8=wNuoge94qdSp3vA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411042@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411042@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1t7MyXZw+RxRnrKDUFvGJLLI1nuYMyVOMGBlVe75rB739wGgl8yBK7mMX1bXecvHnGcF2NO"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=RHkwSk23lYGH3W0OS0ovg0O/3mTRhVxH7EOmSO4uPBY=; b=Xq+/4qJCCP2oNJY2JcHaMXpP7Xi8ZscbiSdV/Z/b9uBrQxpWU4AEkiJi+IwmIKZy0J v9OwOmPEg1LgFlTDARiByNJrS467/pJoqT645fQfXe3288YGrVZBMPArH3oD9SrrIpYc l6Odtut1T9GVNdozP39OZRvpj9XrOgRzlfgItG+Pk4+W/o+RVpWxkmd01Pto1ztHGWF+ RkdmulJcykjwi9+XPXK4d47jXXVwHORYkC4ZNeGDrepIb1qqlzELf6ZFgAicQre7TpSr RLupEqmXSbeFgzvPCZjSY5sOvL4WVaMQSUt4KgELwlbvdXSzvPzoXPYBjF+xmoPtFvm6 dS4g=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411042@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411042@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411042@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411042@lists.postgresql.org"]}	["<CAMm1aWbmTHwHKC2PERH0CCaFVPoxrtLeS8=wNuoge94qdSp3vA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 00:49:36+00	bruce@momjian.us	Re: Doc about how to set max_wal_senders when setting minimal wal_level	<YtC5oOW7H50vT/L7@momjian.us>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Japin Li", "Address": "japinli@hotmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "david.g.johnston@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	120	9161	[{"charset": "us-ascii", "part_id": "2", "file_name": "wal.diff", "disposition": "attachment", "content_type": "text/x-diff"}]		On Tue, Jul  5, 2022 at 08:02:33PM -0400, Tom Lane wrote:\r\n> "Precondition" is an overly fancy word that makes things less clear\r\n> not more so.  Does it mean that setting wal_level = minimal will fail\r\n> if you don't do these other things, or does it just mean that you\r\n> won't be getting the absolute minimum WAL volume?  If the former,\r\n> I think it'd be better to say something like "To set wal_level to minimal,\r\n> you must also set [these variables], which has the effect of disabling\r\n> both WAL archiving and streaming replication."\r\n\r\nI have created the attached patch to try to improve this text.\r\n\r\n-- \r\n  Bruce Momjian  <bruce@momjian.us>        https://momjian.us\r\n  EDB                                      https://enterprisedb.com\r\n\r\n  Indecision is a decision.  Inaction is an action.  Mark Batterson\r\n\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	{"Cc": ["Japin Li <japinli@hotmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, david.g.johnston@gmail.com, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Thu, 14 Jul 2022 20:49:36 -0400"], "From": ["Bruce Momjian <bruce@momjian.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Doc about how to set max_wal_senders when setting minimal wal_level"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657846190; cv=none; d=google.com; s=arc-20160816; b=s4UKG5vEbx3nvXYUW+fpExAlj+TtTGBDRe/D8TOcwBPVoa7haU7+GkjlyrvQPgowS+ xsaJfRHC26hOSktje42ANRZ1YSrGSMz7ANIi3cXJCG9uv0DCmh09iqvBOPaMAfvw8xhf JnTd65J2vQCSTZhsmu7EJiTh5sLbIp6ajWcNPiCYtGdYqVlWroN/Y6ZKMjQAihq8TZNS DEYsGAHRvfTPA8mzWHdChNJRBR4dR+LgAjoaVZyjhxASm7QryM0ty1X3qi2jyxquzemK rvGGCFG7dDmEF1OPKOVFHCQ4JPs1Gdjyex23LF07UIzeRlr90lDSGaM53olElV07CT3E S1Jw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp16106jai; Thu, 14 Jul 2022 17:49:50 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 30-20020ab00421000000b0038231b77fd8si631915uav.145.2022.07.14.17.49.49 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 17:49:50 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411049@lists.postgresql.org>) id 1oC9We-0003h5-T9 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 00:49:48 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC9Wa-00020a-9t for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 00:49:44 +0000", "from momjian.us ([72.94.173.45]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <bruce@momjian.us>) id 1oC9WX-0000u7-PF for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 00:49:43 +0000", "from bruce by momjian.us with local (Exim 4.94.2) (envelope-from <bruce@momjian.us>) id 1oC9WS-00GWRT-Uu; Thu, 14 Jul 2022 20:49:36 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtC5oOW7H50vT/L7@momjian.us>"], "Precedence": ["bulk"], "References": ["<CAKFQuwZ24UcfkoyLLSW3PMGQATomOcw1nuYFRuMev-NoOF+mYw@mail.gmail.com> <m2k0dbsmkh.fsf@hotmail.com> <MEYP282MB16696D67A00860E84B67DE4DB6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <20220304.150535.1261751585521581252.horikyota.ntt@gmail.com> <MEYP282MB1669FD5DB2A59F8104ED3C32B6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <2040586.1657065753@sss.pgh.pa.us>"], "X-Received": ["by 2002:a67:c009:0:b0:357:92c6:77cc with SMTP id v9-20020a67c009000000b0035792c677ccmr3973067vsi.35.1657846190018; Thu, 14 Jul 2022 17:49:50 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtC5oOW7H50vT/L7%40momjian.us>"], "In-Reply-To": ["<2040586.1657065753@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411049@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"BOmEWPLpz6MdMzMY\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411049@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1ttzUpJCj1lhqsTSxflugFTwjoENSEilwgYIPZ70QwgA4rb5J0x6KKYn7XNw+kbMZNZhPpc"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=2yG9nFnDtRQoL+QCInRHDmsoEJrIhypYQrnyiuEUzDg=; b=TpXqv/dyxt73ZSs3f764SlR5f2NMcMmvbsvt6bhhePzfdHcRv4tuSPHGgOqv554B72 2qJO6ONmgaFtmRQUeZrMOQpWZU39zvvU9UtafqGCKMC+4FzOOqROxvyWIE9rnKiqbl9B cIVfr9QxsialDWeNZI2Jqx5l/xN2jJ5tEavEBSD3+VMUraoyRgjzULYl9Y+ezRNmfTr/ Tl4T2VzFdjlNxQaozV6a3PreOCt4s40tTnkUYkq6z4n9onWI7QP+u9/aHf4PEFBXKfYx 06yR5nx72kMg9aSmNhOShDk2+xOp8x7VpwpX4Czfc4KnXvoHp3BhqaJf5n186egTsvBc cibQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411049@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411049@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411049@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411049@lists.postgresql.org"]}	["<2040586.1657065753@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 02:26:16+00	houzj.fnst@fujitsu.com	RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger	<OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	\N	123	16458	[]		On Wednesday, July 13, 2022 5:58 PM Hou, Zhijie wrote:\r\n> Hi hackers,\r\n> \r\n> I noticed that we didn't collect the ObjectAddress returned by\r\n> ATExec[Attach|Detach]Partition. I think collecting this information can make it\r\n> easier for users to get the partition OID of the attached or detached table in\r\n> the event trigger. So how about collecting it like the attached patch ?\r\n\r\nAdded to next CF.\r\n\r\nBest regards,\r\nHou zhijie\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}]	{"To": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "Date": ["Fri, 15 Jul 2022 02:26:16 +0000"], "From": ["\\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657851991; cv=pass; d=google.com; s=arc-20160816; b=n3W1putp45D/KBwSFY9sGUVqVEd4k7d/Y8UAgA53Ydm/1BAcYzLeeZAPjtxzHyZuvz 9a5sfP2q3XBupVAogke1QJhyu5guq8WM627YMFYUvmZCPOMQjYWdrD8Sagn2NlyXQyOT OsGOnSbQQe+H1dHCHnjqVwW6Hd56gXa8PBbqNSiV2rG17nmFM4FwfSPiVv6Mj0xw+IJU khOLTKY6zuN7MKAtpE4XKjzLML8SP+hdyd9hup/O/OnmrkhFAc1XD0YucYgsJooEtHVs ixfrdYUFMh5Ow1WrFlF84GlytZ9C4V89HujYUH2T3MWWVr7/PZ1YEGWy2XMbIoiktFsH RjmQ==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=guYH4cjblfRVK3vbAcqgUp4nI4XiC/OdA5aW4fTile7N0kgPiCx5TbWeNseGrIfPxHuHCikFN7Od4L4V2UxXYP3vWy2FSKPTXWlDaHw9fV6jdb2vyxr3C8VKH6bF2lpPXCc6yxKlErzFNTeeZggEEkTjJWG5fSDwFr7J7RGFrw+drbBxfc2FJ33QgsxzEmFsPY/Dw6Wgr3epsFj8zPhtfZlrvKjR1o1ktkLcME9UDr43T8BtbTys6WsLqZggVzeQJsTuaVpLAi6LGS3YERQvJfdaTDFqQDPkyR3CcEn7L/+EUuYCFOQipqloomPe4m7dgc1s/MCHWgZOjMQajIb0Fw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp30158jai; Thu, 14 Jul 2022 19:26:31 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 204-20020a1f00d5000000b0037425e57908si665211vka.77.2022.07.14.19.26.31 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 19:26:31 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411063@lists.postgresql.org>) id 1oCB2E-0007Bi-Kz for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 02:26:30 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <houzj.fnst@fujitsu.com>) id 1oCB29-0005dv-PM for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 02:26:26 +0000", "from esa7.fujitsucc.c3s2.iphmx.com ([68.232.159.87]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <houzj.fnst@fujitsu.com>) id 1oCB26-0007SD-M8 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 02:26:24 +0000", "from mail-os0jpn01lp2109.outbound.protection.outlook.com (HELO JPN01-OS0-obe.outbound.protection.outlook.com) ([104.47.23.109]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 11:26:19 +0900", "from OS0PR01MB5716.jpnprd01.prod.outlook.com (2603:1096:604:bb::12) by TYAPR01MB4431.jpnprd01.prod.outlook.com (2603:1096:404:12d::17) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.14; Fri, 15 Jul 2022 02:26:16 +0000", "from OS0PR01MB5716.jpnprd01.prod.outlook.com ([fe80::c943:3fe1:8fba:a589]) by OS0PR01MB5716.jpnprd01.prod.outlook.com ([fe80::c943:3fe1:8fba:a589%2]) with mapi id 15.20.5438.014; Fri, 15 Jul 2022 02:26:16 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:a67:ec88:0:b0:357:83f:e0f3 with SMTP id h8-20020a67ec88000000b00357083fe0f3mr4852802vsp.76.1657851991797; Thu, 14 Jul 2022 19:26:31 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/OS0PR01MB57163974C18461685AF55E9A948B9%40OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "Msip_labels": ["=?iso-2022-jp?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZl?= =?iso-2022-jp?B?Y2UwNTBfQWN0aW9uSWQ9ZTZkM2ZmNzQtODExYy00ZDExLTkzN2QtOGQ0?= =?iso-2022-jp?B?MjcwZGYzNzU0O01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFi?= =?iso-2022-jp?B?NGQtM2IwZjRmZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9h?= =?iso-2022-jp?B?NzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxl?= =?iso-2022-jp?B?ZD10cnVlO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQt?= =?iso-2022-jp?B?M2IwZjRmZWNlMDUwX01ldGhvZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9OYW1lPUZV?= =?iso-2022-jp?B?SklUU1UtUkVTVFJJQ1RFRBskQiJMJT8lUhsoQjtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9TZXREYXRl?= =?iso-2022-jp?B?PTIwMjItMDctMTNUMDk6NDU6NDRaO01TSVBfTGFiZWxfYTcyOTVjYzEt?= =?iso-2022-jp?B?ZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX1NpdGVJZD1hMTlmMTIx?= =?iso-2022-jp?B?ZC04MWUxLTQ4NTgtYTlkOC03MzZlMjY3ZmQ0Yzc7?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411063@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"iso-2022-jp\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411063@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AdiWno0Tur3qHjPYRiC4S1qOSup9qABU5bsA"], "Thread-Topic": ["Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60512554\\"", "E=Sophos;i=\\"5.92,272,1650898800\\"; d=\\"scan'208\\";a=\\"60512554\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657851982; x=1689387982; h=from:to:subject:date:message-id:references:in-reply-to: content-transfer-encoding:mime-version; bh=sWPJ3bLGQqQTqY/ZxA2LSoKJtkVRN2GaSXS3Y3P2Gso=; b=TQrZpPORA6dCz7ozLDGn3l1ZC/nzndOaqjDHcRLqdxmtd11Xoy5gRqaF w07AKWdWC8JXRvu7Muw1/5atpsAEeHBf4nV6zFqPJxj3t/f79ZoGgzj4t 3r3KE9QgX90BSsvPur41fTiBUATPKWn9BkSH8rw3mczy7dB+a4DHBvP5m Wg4r7Q/nPl2PYzIh/mYN23Mn3YXFXGKptaZrQElx8gyYNjuon9itV5d4C hqjhOKU+Hj5IMoclmJTOUgv0VsG6mpybN+jTJjlvrECAMSMGnJGu3AjbP 9GVyZcfHy9zq3UbvbDhC4Kyu5ZwTAIEY9e6VSIVG2JjU5wiY9ffJ4R6ud w==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=sWPJ3bLGQqQTqY/ZxA2LSoKJtkVRN2GaSXS3Y3P2Gso=; b=HaQW4jbdlMv2/yrPUQV6FsAJJg1U6NbDvxBvNa9GFk7GwDAOZdaxFvOMcdpT8C5alzUfykI7KKWPeoBgSMq2klj2mjIeniYTCXDnFlMPJHzDJ+f7ZebI0apaaw0IxTJ99y/+Chak8r+fhWXyVAW4fnavukZirzjPNkulw6hie+Q="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vZZ2zoDHm7NExCeDRfn4CqPG92oxcdNPSVd0Fyp3Nf5tSuw+HnO16FfM1RjOEGVh7Ht6sU"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:to:from:dkim-signature:dkim-signature; bh=sWPJ3bLGQqQTqY/ZxA2LSoKJtkVRN2GaSXS3Y3P2Gso=; b=s2rZxEWGDclqal9MsLC095AORAafFcBe+S0llGy2rARs1yqbU3VJvg8WrOaO/fucod 2nBO71ImlivorEdhzbYi+DDnbQKimzBx0wMhziW8iIkNa5b8NQhV/XZvU7tBf7oXaFmU pyva+UcGMVFe48yu5Mb5qoqsxJPztnTXTpzw32abhbq6m20FbwwnaaqI/OOWSl3jpOz/ CeCyL+3q4swC8ME8PYLJEgCCw73D9xi0Kro1gXNiNrHsY4Whbp6IXvuOx/9SXm13XIoL bMXy5IwtN8chTa5q30dfecYiTF/PEE8h5DXpiQmwjQ8VNDGbOYVj3xPq1tg7OyAVwJ9E biNQ==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=sWPJ3bLGQqQTqY/ZxA2LSoKJtkVRN2GaSXS3Y3P2Gso=; b=nkhxo+G/hKM5qIDkXnW5V7/zUrW5hO+1TcZaulTdvUeVH+ekkOc23pAJaOImZOJYQJcmrzO+SwhxZSUSLJwKOOtdRhPUEj9L6eef3l+MSldb8vKJz/tYGqgiVLDIGCNK7ltSSZsflyr1caa1LX1gDz+uitcknvDyNFl+shn4h0yX18alMolwPI0t7zLVFaY7aQ8EhREbpC9WRaExfkv8Hq3AR+fVtbfw6+vp2hwQ5mgyoaINPotV7oCHhJw76H2XyUBVxh/zG8hBr6AUOVFxMV5guguLul0ggb0qZbbwyL8S7aNTwFLW50QWYY9HVYLhd7I9/MqVOd5NX3CtyOi/aQ=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=TQrZpPOR; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=HaQW4jbd; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411063@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411063@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=TQrZpPOR; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=HaQW4jbd; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411063@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411063@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["TYAPR01MB4431:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:OS0PR01MB5716.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(366004)(396003)(136003)(346002)(39860400002)(376002)(186003)(55016003)(33656002)(83380400001)(122000001)(38100700002)(82960400001)(85182001)(38070700005)(8936002)(478600001)(7696005)(2906002)(5660300002)(52536014)(316002)(41300700001)(6916009)(71200400001)(4744005)(86362001)(8676002)(66476007)(66556008)(66946007)(66446008)(76116006)(64756008)(6506007)(26005)(53546011)(9686003);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["+xrahbpQicY28THV+2LkNchBDlflILyea7p3BcV2Xbo2HfnZQEdk4miInlT5vbexJ2UA2JJE/+osp3pKrDO90Ep9u+QiDzfCDGU4DqYzZq5myVmUSEclcDYrkU5IUqcwvXs9gOCD+Fl1LiKB9keta7KoxGQ8Y0MrTJZCMPjaeL2KRc81ieMSpPi2Y7N4n/PoRKBvseiR3+faAAl+hO1zviA7GiWJBluBtZFoe/Dg2xFUbCTJrTs39yWRJyXQ7aKIIG8aiUkkYCCxBTb6r3iUR/kqcYaKDF4cZYxU2PhWD/a4Ooc77mX9ovrHkYacbW+OIzcoNKar6u3s/fVcMkDPuc35iusK8qeolbHAFVbJCpG+MRgG53UcFY3WXJE7h4/Pu0CW6+J5PLnUTFcgtHXt64xbDVJtDl8UghELEVCCeXoiHgzbz0if9kLrvYzAqbDn8UGbFOA2+mwuBB/5nFQvD3MC46Nt7LpVG6m3HJxtRkjzzHf6gjPVqrXbSnqr/tE63kabttjdsWPDBhj5O+18MDFAJqqyrquYbsrBvgfweU3POLAkoeSJbb2zjosOPxYP+T+tJKsYBUj6j3e700JuwKgQnmszEBmCBVgvnFV87qcR4XWCWHPbT1uy/wZsBcYNdMM3v3Hm3yeyEdgZ6Mc9zpSsFXU7codal9lyD49CPl42SAGfXZQzpotdESBKgiEnVNTn0MmXQ+myRR3j/Mm50u5eMquF9lnSaOf57Z/3Fik/uzjgkvrA3pvknhuF68KkY9oieVLS6nFFYK2j6UY/kcsP9QYmxCiyeE92dJWiTlOoSDlQPoEObN5C4HBB65hH"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-2022-jp?B?dDQ5bklTYlorS3YzaXUwb2hRdVdiZ2ZsY2ZLTzZjYVIwZi9XeXcxQmtR?= =?iso-2022-jp?B?ZjB6Q29VM2t1aHNZYXlISFRjVGtxb21NL3dZejMwUEwvWkFQUVVtMHlJ?= =?iso-2022-jp?B?cUVuaU05R1JtY1pmMVNIWkdPdFlJRm5zWnZjazFLY1YzUTdxdS94YWs4?= =?iso-2022-jp?B?M2Q3UWNBTGtaVUtEcXNmWmtlcThDWjVoUnJlVkNGSm9hMHZSTjRHaEly?= =?iso-2022-jp?B?SGZGb2JhQTRQVFdBTVYvZFdZU0N0bm93OWdyUnNDQW5sNDBreUJpclRW?= =?iso-2022-jp?B?ZVRPVW9QbHpsdWVQOTZhc1l4anJuaEJyTTRuSmY3K0JBcUl6OXAwdVNl?= =?iso-2022-jp?B?TGNwUDNWS3hqQ3c5dUxaSzZkOUlyMDg5dVZPUEhCc21jWE9paDhJR21I?= =?iso-2022-jp?B?TEc4dEVObFZvZi9xN0tWWnZCdnFsZ1kyNTNOLzBCM2d6anAyQi9WekdN?= =?iso-2022-jp?B?MUhsa0xVMUYwUU02SUlyL0dOcWVSaUNSVE9heXhYVW92ZlZSWDNFeFBk?= =?iso-2022-jp?B?QnFNNFhxZENYQVB2OW5WaGtFZGFhSWEzZEhtZmJWS0FJemtoS2RUZnRZ?= =?iso-2022-jp?B?Nkd3a1JkdUhYaFBkVU1CZ2VyVkdjZlN0eTdjNVVTaXJNK0hWL0dJSU1I?= =?iso-2022-jp?B?QWkybE1EdTV4MVZHU3pJY091S2IxVTlXM1VGci9ickQrZkJIaURoY1JD?= =?iso-2022-jp?B?eXpFK3ZidnRVWnhQcEV5SUtTMk1JMTJpYkEyNCtxU05PZzNhb1pDRmZD?= =?iso-2022-jp?B?T3FTKzlvTmRXOXAreXMrUU92N2VndDgwMUxrS3FDaTBuUHRFMEhyOWdO?= =?iso-2022-jp?B?UlgyVDBVTXA2OWdVY2F3VDlhZzZ0VFhyOFNUY0l1TkQ4bkR5VTJEOHRL?= =?iso-2022-jp?B?ZjBPa05ibXVYc0hPdXdQQlViL0hmaWsrcVVGRDZyVlhzWVpnUzBUSjEx?= =?iso-2022-jp?B?MFJJTWNNZnBLU2MyVlJ0NmdkQXhMN2pWY0J5UzUwdzhsdlUyQU9leWdo?= =?iso-2022-jp?B?UmMxcEdiaWsrOWJ4aC9YYzV5amJnVDdRRThGQ056enYrZHhCNnZzaDlr?= =?iso-2022-jp?B?blpZTjVKaE1Xc1BscmZkRXpTUmZOM0JmbTJESThpMWU2c2M1MDFsUVFD?= =?iso-2022-jp?B?bmZZakp3eG4ySU1zcGg5S3lpMVp4QmpTcTVrcXFuRHIyZVFWODQycVhO?= =?iso-2022-jp?B?cUhCcS9FUDVhbUI1MS9OekxUV2hZZFA4S1V3YlRzNDN6cDN2anZLVDhu?= =?iso-2022-jp?B?dS9ieDBBUGx0MVROdENSYk9UK2d3aUkyb3ZUaEJ4eUF0OWY4RmlzelB4?= =?iso-2022-jp?B?QWxmQllodFg5eHJnUWlJNHBGdHFmLzFEOG14R1U5Q1NvYjFCM2p5MFhs?= =?iso-2022-jp?B?TDZqWU1KRVE1V1ZoS3pCWG5qTXl3Sk5DeTc4UE9pdG1vZ2s0UVNzKzNP?= =?iso-2022-jp?B?ck02bXl2NkhIU29SUldlRHJJZ3ZqazlreEZoeWxUL1ZhaGFMTHJnL2JN?= =?iso-2022-jp?B?L1ZrNDF6L1dONkU4ZDl6U1NHeFlUSHg5M2F1R0oxWnYrK1VEUk01UkpI?= =?iso-2022-jp?B?b1JseTRkUXJOQXd3aHZ5R05pdmdjUExuOEZ2eGE2Q3J1S1pQWWRRZnFZ?= =?iso-2022-jp?B?a2xSc3NkN3RHcndZT3JneVRmREVKWmUrL2QvNktyY1dqUFpDekRmK25U?= =?iso-2022-jp?B?ek5OZEJnZGk1T3ZCWFM0UjR5aEpXQXdOWTFNZXJVT0tsSzBxTW1yclFJ?= =?iso-2022-jp?B?bERXWWo4OE5RUi9BeXdFL2NUWnBtTElaTitqd0RQY0JLb2RmT1FBMmp6?= =?iso-2022-jp?B?YmMvVUtrMXpWSTk4eHM5V2FselhSSFRpait3ekNoRHlJcDZZUmJPbWUw?= =?iso-2022-jp?B?aVVWei94V3liZEYzMDFnREQ4aWdqeHlyekZrOC9vV3BSNTN0NlNSU0Vw?= =?iso-2022-jp?B?SE1SUzhQbzBUcTZMbmRYKzRRT0hXUHpyQUw4Z2RDZ01URkk2OE9MSDBt?= =?iso-2022-jp?B?MVloSkU2MlpPMkc5WjRCZm82QU5pRFBvZXFsZUQ2cEw2VW8vTFlNdUV0?= =?iso-2022-jp?B?NTdxSjNTQnhYSDNtYzZkZ0g0LzRxSnlCMk5TTG96cXFTYWJ4YU1RbC9E?= =?iso-2022-jp?B?dm5kZFRjV1dIWTJ5b2tJRjgzR1VsbzBLZGZkUGdKUmdhTHFkNStQSmZh?= =?iso-2022-jp?B?SUZhYlgxd2R5UlZqK2xUOG02VlFwUFJZT1Y1OWpiNWZnSy84eVdXU3Jt?= =?iso-2022-jp?B?ZWhXUkRMU0cwVDlUcTVYRnVQVGUybGxvcEllckdLUmRmYXdVU0dzOFhi?= =?iso-2022-jp?B?eUJSbw==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["OS0PR01MB5716.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["055b52f0-4934-4f53-623b-08da66096560"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["VAFbJfyG1QV+PXPMiVxHVTqiq045XC9sM1aFVsCaN+NhMf8jrUrzf7KE+iGcMavILi7K8ooUJ9zMlssXXHnTaQ=="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["055b52f0-4934-4f53-623b-08da66096560"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 02:26:16.7588 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["TYAPR01MB4431"]}	["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 02:13:01+00	dgrowleyml@gmail.com	Re: [PATCH v1] remove redundant check of item pointer	<CAApHDvr1xVuxNsGzrYT=gja0X-50EadiYH+mSFoJw1t0V70FMQ@mail.gmail.com>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "Junwang Zhao", "Address": "zhjwpku@gmail.com"}, {"Name": "PostgreSQL Developers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	122	7777	[]		On Fri, 15 Jul 2022 at 10:31, Bruce Momjian <bruce@momjian.us> wrote:\r\n> for non-Assert builds, ItemPointerGetOffsetNumberNoCheck() and\r\n> ItemPointerGetOffsetNumber() are the same, so I don't see the point to\r\n> making this change.  Frankly, I don't know why we even have two\r\n> functions for this.  I am guessing ItemPointerGetOffsetNumberNoCheck is\r\n> for cases where you have an Assert build and do not want the check.\r\n\r\nWe'll want to use ItemPointerGetOffsetNumberNoCheck() where the TID\r\ncomes from sources we can't verify. e.g user input... '(2,0)'::tid.\r\nWe want to use ItemPointerGetOffsetNumber() for item pointers that\r\ncome from locations that we want to ensure are correct.  e.g TIDs\r\nwe're storing in an index.\r\n\r\nDavid\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	{"Cc": ["Junwang Zhao <zhjwpku@gmail.com>, PostgreSQL Developers <pgsql-hackers@lists.postgresql.org>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Fri, 15 Jul 2022 14:13:01 +1200"], "From": ["David Rowley <dgrowleyml@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH v1] remove redundant check of item pointer"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657851209; cv=none; d=google.com; s=arc-20160816; b=Ym7/aIS9AMKT5Qz5G/Id566G0Z3MVQNoa0po+0Rwt8ZGPCDyId5IxGLOnLbXFLgmb4 018X0G9H22VqdOKDnBtl7skglt+3YTY2WGSp+LhRqIEsbQn8g/jmoZFdRxuUmeJV6Fbf rNVUne42Q4Dx78EcHaxvOay2ktyMBO7eht9UqFkOpJuA7a5wGBQI3v1lxYPK5yqiK9Ha VWQd8a+/g4v3Fpu8FOo0HNoDou8RDFMaWKn2oWkIq2Hhk7XmDKaLpczNkxShZR5HTNAH D6k7vG77munQaMfbGkKyOmThXRjAD4egE3uhdyTvwysfNDL+FsMSy7xsod0oEjKUeu6r yERg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp28184jai; Thu, 14 Jul 2022 19:13:29 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id j1-20020ab064c1000000b00382c8a9534asi634048uaq.195.2022.07.14.19.13.28 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 19:13:29 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411061@lists.postgresql.org>) id 1oCApb-00043B-V2 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 02:13:27 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oCApX-0002ZJ-I2 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 02:13:23 +0000", "from mail-ot1-x336.google.com ([2607:f8b0:4864:20::336]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oCApV-0001cM-6R for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 02:13:22 +0000", "by mail-ot1-x336.google.com with SMTP id t26-20020a9d775a000000b006168f7563daso2592523otl.2 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 19:13:20 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAApHDvr1xVuxNsGzrYT=gja0X-50EadiYH+mSFoJw1t0V70FMQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220427120400.65649-1-zhjwpku@gmail.com> <YtCZQ/Dr3tqhiAQE@momjian.us>"], "X-Received": ["by 2002:a1f:2612:0:b0:374:6e34:aa2 with SMTP id m18-20020a1f2612000000b003746e340aa2mr4759143vkm.26.1657851209085; Thu, 14 Jul 2022 19:13:29 -0700 (PDT)", "by 2002:a05:6830:b85:b0:605:4e76:f077 with SMTP id a5-20020a0568300b8500b006054e76f077mr4485027otv.211.1657851198937; Thu, 14 Jul 2022 19:13:18 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAApHDvr1xVuxNsGzrYT%3Dgja0X-50EadiYH%2BmSFoJw1t0V70FMQ%40mail.gmail.com>"], "In-Reply-To": ["<YtCZQ/Dr3tqhiAQE@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411061@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411061@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=spAK0lig+SWDn+bANM7RqaiVgvFrXi8DiJb7c2ZYZXE=; b=PFt8WTSizeABNivWIeyTzr755hS4jXYvTZOv3qtvQcY6BqVGpjk93vbMRuTKNb7XvD DGSS3O/PYmlZetbfZ+lX1xUaTP7kYKf2t0ufw+nqcQq5SfEQgbtu6I9EkwuSZyQCbdwj y3hmzlNME5yHi/hLj2tSlj8GtD6kUxndvV0i4gvqUBLkALMEsVAIs8AYv4/eHLE+zie4 fetaGClQlJQw0gn2KlX7S65YXf7eamXwphDYunQeaLmJk/3dARcL8G8rFY/SPGKbM5td 6Qrbr8/xFEhIDswbmI3tGl/4J+rCPpu11e/W4+8xHFlGxohsnmHj1v14t7nXWOY0oLYX IXfA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8EFxHdnAtTbDVuV0z8hlbheP3D+Z7IMw5yvp7WFoJxeu2CzJh/ GYvFvAI8GCAWDSB1cS3u57KI5HY0UQmsz37zikY="], "X-Google-Smtp-Source": ["AGRyM1vaEuTOW6Pq5/D7G1BKstc8pbA+5utDG1pLK0jtnaqvDVsh1tvUkhlf+mKLWooDmNKaCMD4"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=spAK0lig+SWDn+bANM7RqaiVgvFrXi8DiJb7c2ZYZXE=; b=rVAAJmlmNlMMsiF+SniWKyl8o27ATqDFp2VxzXsEkPRyqoTuGMOz0MB8Aqhckh6BxA 06y/KtLMCHuSDMTShSa2ZJKcrb3cxY1oye9pe7t1zur/IvOF5ReaGmOM4fXUqBStdsI4 oEfKnFWXtVkvTvwvG7Ucgj9VcYttQYVInsdNqvYPJgxAYo5FXqCBymeeI8VC7tfQpo52 MYZESndQjt79brNmB/wrnauHjgNLCrdDfJfUfAQi6ctoRojWlVJf7J7bhJz6blYevQs2 cBj/0XPY9pQg1F6iITOZ+XJit7ZV25jRyx6FkjE1Y/swxlz64DQ6fHrq0IC0iXu67vLp 1r6w=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=PFt8WTSi; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411061@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411061@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=spAK0lig+SWDn+bANM7RqaiVgvFrXi8DiJb7c2ZYZXE=; b=l8WO+Qxh0qBbtng4rv0gpIGNI5OvrJA1bV7KXp0lu54oQz6PKqKSlM8LRWXF9oGM6v vN6eWEda8YkacTy6BAKm+Q/1/VxnGDr3Yni9Mz/Sg+1S4Q8Mh0XSpCKfn4GuBTSetGVT bLu4cAamtRTkX+F5KP3S06nSnik1xKJWscpki8K4m/2GTsYpVI4VBjXGcJ4675qgupC3 tGhuBWoguumAuAn7+hy7aB1AZ2OO8sxIOpd73+sXO189DUwGg+HF+ipaaWMqz3/2hcg3 FglQaeugY+elnlbgCzz4IIMC7DtErbqtugdKh5zB0S25Ie/LI5SW0V8YIMbsmlE3a2Gt 8uFg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=PFt8WTSi; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411061@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411061@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<YtCZQ/Dr3tqhiAQE@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 01:27:17+00	david.g.johnston@gmail.com	Re: doc: Clarify Routines and Extension Membership	<CAKFQuwY1YtxQHVWUFYvSnOjZ5VPpXjF33V52bSKEwFjK2K=1Aw@mail.gmail.com>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	121	15855	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Thu, Jul 14, 2022 at 2:41 PM Bruce Momjian &lt;<a href="mailto:bruce@momjian.us">bruce@momjian.us</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On Fri, Jul¬† 8, 2022 at 10:55:55PM -0400, Bruce Momjian wrote:<br>\r\n&gt; &gt; The/that inconsistency ... choose one.¬† Or actually, the &quot;an ... the&quot;<br>\r\n&gt; &gt; combination you used elsewhere doesn&#39;t grate on the ear either.<br>\r\n&gt; &gt; <br>\r\n&gt; &gt; +¬† ¬† ¬† For each extension, refuse to drop anything if any objects (other than the<br>\r\n&gt; &gt; +¬† ¬† ¬† extensions listed) depend on it.¬† However, its own member objects, and routines<br>\r\n&gt; &gt; +¬† ¬† ¬† that are explicitly dependent on this extension, are skipped.<br>\r\n&gt; &gt; +¬† ¬† ¬† This is the default.<br>\r\n&gt; &gt; <br>\r\n&gt; &gt; &quot;skipped&quot; seems like a horrible choice of word; it could easily be read as<br>\r\n&gt; &gt; &quot;they don&#39;t get dropped&quot;.¬† I am not convinced that mentioning the member<br>\r\n&gt; &gt; objects here is an improvement either.¬† In the first sentence you are<br>\r\n&gt; &gt; treating each extension as a monolithic object; why not in the second?<br>\r\n&gt; <br>\r\n&gt; I created a modified patch based on this feedback;¬† patch attached.¬† I<br>\r\n&gt; rewrote the last change.<br>\r\n<br>\r\nPatch applied to PG 13 and later, where extension dependency was added. <br>\r\nThank you for the patch.<br></blockquote><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Thank you and apologies for being quiet here and on a few of the other¬†threads. I&#39;ve been on vacation and flagged as ToDo some of the non-simple feedback items that have come this way.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">The change to restrict and description in drop extension needs to be fixed up (the other pages look good).</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">&quot;This option prevents the specified extensions from being dropped if there exists non-extension-member objects that depends on any the extensions. This is the default.&quot;</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">At minimum: &quot;...that depend on any of the extensions.&quot;</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I did just now confirm that if any of the named extensions failed to be dropped the entire command fails.¬† There is no partial success mode.<br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I&#39;d like to avoid non-extension-member, and one of the main points is that the routine dependency is member-like, not actual membership.¬† Hence the separate wording.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I thus propose to replace the drop extension / restrict paragraph and replace it with the following:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">&quot;This option prevents the specified extensions from being dropped if other objects - besides these extensions, their members, and their explicitly dependent routines - depend on them.¬† This is the default.&quot;</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Also, I&#39;m thinking to change, on the same page (description):</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">&quot;Dropping an extension causes its component objects,&quot;<br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">to be:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">&quot;Dropping an extension causes its member objects,&quot;</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I&#39;m not sure why I¬†originally chose¬†component over member...</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div></div>\r\n	On Thu, Jul 14, 2022 at 2:41 PM Bruce Momjian <bruce@momjian.us> wrote:\r\n\r\n> On Fri, Jul  8, 2022 at 10:55:55PM -0400, Bruce Momjian wrote:\r\n> > > The/that inconsistency ... choose one.  Or actually, the "an ... the"\r\n> > > combination you used elsewhere doesn't grate on the ear either.\r\n> > >\r\n> > > +      For each extension, refuse to drop anything if any objects\r\n> (other than the\r\n> > > +      extensions listed) depend on it.  However, its own member\r\n> objects, and routines\r\n> > > +      that are explicitly dependent on this extension, are skipped.\r\n> > > +      This is the default.\r\n> > >\r\n> > > "skipped" seems like a horrible choice of word; it could easily be\r\n> read as\r\n> > > "they don't get dropped".  I am not convinced that mentioning the\r\n> member\r\n> > > objects here is an improvement either.  In the first sentence you are\r\n> > > treating each extension as a monolithic object; why not in the second?\r\n> >\r\n> > I created a modified patch based on this feedback;  patch attached.  I\r\n> > rewrote the last change.\r\n>\r\n> Patch applied to PG 13 and later, where extension dependency was added.\r\n> Thank you for the patch.\r\n>\r\n\r\nThank you and apologies for being quiet here and on a few of the\r\nother threads. I've been on vacation and flagged as ToDo some of the\r\nnon-simple feedback items that have come this way.\r\n\r\nThe change to restrict and description in drop extension needs to be fixed\r\nup (the other pages look good).\r\n\r\n"This option prevents the specified extensions from being dropped if there\r\nexists non-extension-member objects that depends on any the extensions.\r\nThis is the default."\r\n\r\nAt minimum: "...that depend on any of the extensions."\r\n\r\nI did just now confirm that if any of the named extensions failed to be\r\ndropped the entire command fails.  There is no partial success mode.\r\n\r\nI'd like to avoid non-extension-member, and one of the main points is that\r\nthe routine dependency is member-like, not actual membership.  Hence the\r\nseparate wording.\r\n\r\nI thus propose to replace the drop extension / restrict paragraph and\r\nreplace it with the following:\r\n\r\n"This option prevents the specified extensions from being dropped if other\r\nobjects - besides these extensions, their members, and their explicitly\r\ndependent routines - depend on them.  This is the default."\r\n\r\nAlso, I'm thinking to change, on the same page (description):\r\n\r\n"Dropping an extension causes its component objects,"\r\n\r\nto be:\r\n\r\n"Dropping an extension causes its member objects,"\r\n\r\nI'm not sure why I originally chose component over member...\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Thu, 14 Jul 2022 18:27:17 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: doc: Clarify Routines and Extension Membership"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657848466; cv=none; d=google.com; s=arc-20160816; b=SzmUGFlIQfCrcpfkckP+WLko9D1aCTDBcdvzPzhr9qf+U/JLsIyQaAznf66riiLaXs tuU1sbzd/5YaFi4UUOftYlqoDIs4yZEYTu5ItWMg69J1xegK7f9DH56h67dWO7BW9fNZ 1jyybnLxzi+bXJx1NNbWILC0EAoeDOsC2MrhIg1dgqMiSHV/EhJX/2/+0WBadMoM0cRW tNICTTNaGXrZZcT7yBdu5JRAKdpoGYC5STCZmdcItT1+LpUFdx6+ik27g+PQ/Vi4S7ba VC0oc5OKywKDamzz5PHMR6glTczWpElDWz9Kvk8ZgakGtD/k8U2QLIbS5cMH9Oikcam6 TrjQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp21473jai; Thu, 14 Jul 2022 18:27:46 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u21-20020a67c815000000b0035750d5a279si581851vsk.723.2022.07.14.18.27.46 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 18:27:46 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411056@lists.postgresql.org>) id 1oCA7N-0001JL-Bm for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 01:27:45 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCA7I-0008AO-Kh for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 01:27:40 +0000", "from mail-ej1-x633.google.com ([2a00:1450:4864:20::633]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCA7F-00071q-Su for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 01:27:39 +0000", "by mail-ej1-x633.google.com with SMTP id mf4so6470945ejc.3 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 18:27:37 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwY1YtxQHVWUFYvSnOjZ5VPpXjF33V52bSKEwFjK2K=1Aw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAKFQuwbPSHMDGkisRUmewopweC1bFvytVqB=a=X4GFg=4ZWxPA@mail.gmail.com> <2041509.1657066329@sss.pgh.pa.us> <YsjuO5Ql71trmbss@momjian.us> <YtCNn2EzntHJG4Se@momjian.us>"], "X-Received": ["by 2002:a67:efc4:0:b0:357:484d:3141 with SMTP id s4-20020a67efc4000000b00357484d3141mr5061531vsp.0.1657848466585; Thu, 14 Jul 2022 18:27:46 -0700 (PDT)", "by 2002:a17:907:b590:b0:72b:949c:c737 with SMTP id qx16-20020a170907b59000b0072b949cc737mr11612263ejc.155.1657848455358; Thu, 14 Jul 2022 18:27:35 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwY1YtxQHVWUFYvSnOjZ5VPpXjF33V52bSKEwFjK2K%3D1Aw%40mail.gmail.com>"], "In-Reply-To": ["<YtCNn2EzntHJG4Se@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411056@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000045eb9705e3cdecd8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411056@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=c/w/lah5+oSztd4igmUsAWAgDShiUkQqHZWTPllc5WM=; b=GJ3RifmICNO1T0ycdfM2ZCwTOaJg7QWYqSHQQUdeWnFPBGeeVaEvaKLXZof2DzCRDM PKRzlURPit8K9oz8V/PDhDlwpIAUN5Ea43+nIvrvkCwVpLT4wNRvobhKeK0Ls/56ra3V IzjREt6NY1Sjfkh5toMwDPcTVqtgz5D3VnikPBpuPrUEV6f05Kjw8OJ1FH0FHy7GLIxh BXkoXUMjjuRJ2wBmpS7v0oZztUK3FXgsep24JFC2Qu3YpVZ85oTz4YY5ns6qmunal4sd BVgMxahkXEj8ZhCTMvAJRR/0LIzVudfhEUZzrxooEOAPU42dfZyqFGJdfjrhyqHMk2Cd 8qrg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/DdyJTUTE0TL8CW/kQNziCM3aeln8yJh4pHpDDWueKuvo2QIGV qMt4iBT6rtatXkLubUJOGjm/pNZGhAWevNGWIM0="], "X-Google-Smtp-Source": ["AGRyM1slnKwC9LBK9YkzsHWtL9+F6WrW7/qKj0IdELsCqZ3ekdkb8OxpwN/+Om64CknjmzFib4QC"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=c/w/lah5+oSztd4igmUsAWAgDShiUkQqHZWTPllc5WM=; b=OkGmKXgGnjkcxrxEodwDE6TBDxtLexvEQEOYzojdfHpFV+Vy0E29FB3xv8aNqbK7oj yJsAUFeumHRCl2+reVEOxRYQgw0PFarveC17CVmkdg7MbsaiGva3KdeBX6KfYjK/CB5e YVafsjAA1128JG3uY++bBIZ2D/GqOR5xsy92+2eWjbewreO//fsmTzEEtbZJ0GVAgIph eNsw8UJ6ONYNEYbe5fkhuvG4mbf1vkQYQVdDKG/ZaakzZx275oyIiPxaCx4IoUmATz4D M+9lOc2HKCp+4Xo2tkbDWxO7pXU98eJnlOyjxlSeGorEPj1ZkKWxQyvAJ9cUhJBNumCj tgHw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=GJ3RifmI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411056@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411056@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=c/w/lah5+oSztd4igmUsAWAgDShiUkQqHZWTPllc5WM=; b=R4Het6K3QNcZ9xviUR06EjTH+CJgbLNWr7zDW/+DgOxR7xQIqcVqsATEWcwTKgZI3S 7mIPANO4BfXaES2Iv1uAwfsG7tzYUHggOblSufXXrhEP/dxoZKsibT1ZqsIJyx4YbGB3 TB0Y1X1Ja1YPutljdY8jlqv61XbpyIez9sM+qh/SJnN2X0rKB2bNRuRufsRS2HlxlWef 1/HLJQgYCypg1QbtTTA8hIU58Uxy/UdH/nE3eLMsLt1xTOHaD2vdgTJWZXxhi8wmJwEn tUmIE2qMvgJyNrXeo60wO6oYQw5s6dTxKt42U3YHn+Zedo/KSl3kkZyODDqyckvWUp15 qveQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=GJ3RifmI; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411056@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411056@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<YtCNn2EzntHJG4Se@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 03:21:30+00	kuroda.hayato@fujitsu.com	RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger	<TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>	[{"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	124	16937	[]		Hi,\r\n\r\n> > I noticed that we didn't collect the ObjectAddress returned by\r\n> > ATExec[Attach|Detach]Partition. I think collecting this information can make it\r\n> > easier for users to get the partition OID of the attached or detached table in\r\n> > the event trigger. So how about collecting it like the attached patch ?\r\n> \r\n> Added to next CF.\r\n\r\nSounds good. I grepped ATExecXXX() functions called in ATExecCmd(),\r\nand I confirmed that all returned values have been collected except them.\r\n\r\nWhile checking test code test about EVENT TRIGGER,\r\nI found there were no tests related with partitions in that.\r\nHow about adding them?\r\n\r\nBest Regards,\r\nHayato Kuroda\r\nFUJITSU LIMITED\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 03:21:30 +0000"], "From": ["\\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657855304; cv=pass; d=google.com; s=arc-20160816; b=VeBPCVTxYnW1hYw1Zs6Bti9g1GH1OG9mly9Is4fk2j/arUkLZbYifKEIIiQxyELlUs l1FxDTOQkWaUSsxgOdyB3c4J/FjLR/BAL7+fhNTc6mlMA1Hrnu7t8sKU0seBjj8WMu+q o5sT4ci61S8PMcOHGmLiqCmqpvoaBeAyfSpCiThsu0f0i73XhvNlwxj+IO3Vz0DmNWAb uVZ9Hhzd7XzlSHqRGiDj+2hW2zZjenGidVzPRa8WrhuewhEE1VIx57A2kheSw3G0WQn/ daTtmglqWjaG+7WBp6QervJ8TS0WLdXinVu73/WXt+3Fi/GK4Mi9Hut0bcpLNJSGk0v5 40sg==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=GUPy+2/XNGkNY3u7l+mNis+/ZgQxZ/z+R0waGYIGDqUa44bDaKX+T2eEH5vj3pUj9xh6ypkv71nCQui3XSjk/WYjffC9+vxLw3iBh9nkzTs1kv/uoxs0O0Y/orW4ilrNCFExkErC26nA9QYl1SfIrrR4mAaUQYqerIdUPPGtC3t+poc8hgZzEc0VETyShb8pqfq4/1VoXLac+tZMc4nnOFtniz2oIX/h7CH6yKkT/RbSk8aN8jayhe0cyjCCnmsRD13lsH3zGTnhC3tv0rU8iJHvFnqdyrR9mdag2KfB1aBXwxdNfKrkJrtnV2CQ4TUhZBWRuefylTF20ec36BZCkg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp38198jai; Thu, 14 Jul 2022 20:21:44 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q1-20020adfea01000000b0021dac504a96si3276494wrm.56.2022.07.14.20.21.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 20:21:44 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411068@lists.postgresql.org>) id 1oCBtf-0000qK-Ia for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 03:21:43 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCBta-0007Ne-U7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 03:21:38 +0000", "from esa2.fujitsucc.c3s2.iphmx.com ([68.232.152.246]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCBtX-00029L-LP for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 03:21:38 +0000", "from mail-tycjpn01lp2170.outbound.protection.outlook.com (HELO JPN01-TYC-obe.outbound.protection.outlook.com) ([104.47.23.170]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 12:21:34 +0900", "from TYCPR01MB5870.jpnprd01.prod.outlook.com (2603:1096:400:42::9) by TYWPR01MB8607.jpnprd01.prod.outlook.com (2603:1096:400:13c::12) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.12; Fri, 15 Jul 2022 03:21:30 +0000", "from TYCPR01MB5870.jpnprd01.prod.outlook.com ([fe80::7981:3fec:52a5:1d6f]) by TYCPR01MB5870.jpnprd01.prod.outlook.com ([fe80::7981:3fec:52a5:1d6f%4]) with mapi id 15.20.5438.014; Fri, 15 Jul 2022 03:21:30 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:a5d:69c9:0:b0:21d:6427:f553 with SMTP id s9-20020a5d69c9000000b0021d6427f553mr11076731wrw.257.1657855304055; Thu, 14 Jul 2022 20:21:44 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/TYCPR01MB587008E7121BBDDE98482484F58B9%40TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "Msip_labels": ["=?iso-2022-jp?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZl?= =?iso-2022-jp?B?Y2UwNTBfQWN0aW9uSWQ9ZTZkM2ZmNzQtODExYy00ZDExLTkzN2QtOGQ0?= =?iso-2022-jp?B?MjcwZGYzNzU0O01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFi?= =?iso-2022-jp?B?NGQtM2IwZjRmZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9h?= =?iso-2022-jp?B?NzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxl?= =?iso-2022-jp?B?ZD10cnVlO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQt?= =?iso-2022-jp?B?M2IwZjRmZWNlMDUwX01ldGhvZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9OYW1lPUZV?= =?iso-2022-jp?B?SklUU1UtUkVTVFJJQ1RFRBskQiJMJT8lUhsoQjtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9TZXREYXRl?= =?iso-2022-jp?B?PTIwMjItMDctMTNUMDk6NDU6NDRaO01TSVBfTGFiZWxfYTcyOTVjYzEt?= =?iso-2022-jp?B?ZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX1NpdGVJZD1hMTlmMTIx?= =?iso-2022-jp?B?ZC04MWUxLTQ4NTgtYTlkOC03MzZlMjY3ZmQ0Yzc7?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411068@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"iso-2022-jp\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411068@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AdiWno0Tur3qHjPYRiC4S1qOSup9qABU5bsAAAD9UIA="], "Thread-Topic": ["Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"68703420\\"", "E=Sophos;i=\\"5.92,272,1650898800\\"; d=\\"scan'208\\";a=\\"68703420\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657855296; x=1689391296; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=Sb+h7p6uMScehi2q/S/fWG42jk0PFXZRbCe3LEQAi2Y=; b=Q0roUOMeQarcrgfGMgB5owf/qdr0Ui7b+cpJkuEXXfJjxOXEGa2WE3Lp 982Ro0OuDHVH2OnrmuZbHtnCl1KI5wo8Xt/AwcjjtdEcoa9Zws3fI9eYA FKvcHBBpsBwbljfGTe12vfxXB0MC4EJ/VHpAZiJ2PICndVpiwCKWL9EtZ /sCtkKLRbJuelDv6oQy5CbfB89METWqL4JETBhT0pctupqn1ZV3Vi8K1K aSSDvzv7ErbZaeX7q2/wyPeCA+9HIkKbzTNmtarUnVJGpycnDbgROeFuW E2bZjtDyStRqVqWWB1/46srTMBoeXfrdl51coTsn+CG6aoz28+FHcruWo w==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=Sb+h7p6uMScehi2q/S/fWG42jk0PFXZRbCe3LEQAi2Y=; b=m3b+s90+JB98ToQ/4ib6WPLjzqT34KhBVe8k/TBYlNrj4GFZUhsv62iWx80dwlnDeDiPTJyqXzjFtZGPOOf/UHrvBQHrcuSWA879JyqXXRgbHIr1Fe+43z8Rp7Iwd4DDWn/h4oAU0JnmI6cWZx/zqcDGNJdV4w3eQBas1PulJ1k="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1sNbS+BSbR6mUEEwLQX6f3bijrXVP80lG7XkdSgRbaPlWK2Wrov49XN2wA1Q2Z6kNl5MjF2"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=Sb+h7p6uMScehi2q/S/fWG42jk0PFXZRbCe3LEQAi2Y=; b=ix3FATZvFjnD5nLNuC158WpVAZzRBQfdvpDQVR5EYgOYxG/LqJyKW/WjTDDvO0WIVO RjyvElzMFyDX4NApzgfD5fuVlMgXawDInd3pYx76Rd3G3Iy8XS6Kclu/5okTUlY661JC jFfSB9mSoQ2coF8WFW59VzC/4m+fwX8z0w2YXHLbKFbBWm69TWbfgnrFh/LH3FB7BmuE NYn/4cSy7lcgqI7t/ZiEeYcWMr5KkmTQwNcpiygv4GLbYYzr1+oVs37ZkSiy3ocNnxkI tEAr8vZVN2gxlAfY4f/4hRc/oG7mn29gIthq3OJ37w2T0iN+jYJTXkg9GC0uIXGbJe1o FfSQ==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=Sb+h7p6uMScehi2q/S/fWG42jk0PFXZRbCe3LEQAi2Y=; b=UneUSwzlqmqVqncj7u0J4m8TN3FTwlubMvZhtayyV9tScYsXEV3JMtQD9oMk9rbHDhS4ciI7k36qktnHLWY7j94mzPr5yjhxifdgEzxQykxpbINOOQmdYXMM6M6E+evi7DZBuweesXrlx1oipvOKxWAvQXk6daUmCcMLMohY6tu694ME5+zkGY/cbWvpyPaVwTeP4I+XvqdfGGjO1z43KAsRtTWW+BplnEhMoB/rsioAVBhZjCoU0+zIjImlnshixlcpIYNQWqlgmdS/p7st5Y+QgNfNnUFdGAC2l02JscR0a7GHTkbvAWXLCsmCVNdEt+ceYTd91VfVZ8qkcvhShw=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=Q0roUOMe; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=m3b+s90+; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411068@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411068@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=Q0roUOMe; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=m3b+s90+; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411068@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411068@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["TYWPR01MB8607:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:TYCPR01MB5870.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(376002)(346002)(396003)(136003)(366004)(39860400002)(66446008)(8676002)(33656002)(85182001)(76116006)(83380400001)(64756008)(4326008)(55016003)(86362001)(9686003)(66556008)(66476007)(66946007)(4744005)(26005)(2906002)(52536014)(8936002)(6862004)(38070700005)(7696005)(316002)(6636002)(478600001)(186003)(71200400001)(6506007)(122000001)(41300700001)(38100700002)(82960400001)(5660300002);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["rYqNlnsNVTvrAIExvuTdE5AYUfzvufDCodV7WkYj9mf8ovoNBh4xFvVtjvMGyrYaoEDWjF9a1F0RnnACG1JHQfSnocfwT1+8RL9JKoIZow5N3/oWgyT2qqs1prtWOFQu+1upebmUJS0tl40KQ7zgwQkMEhO8wHFejCkogOGbhCbsQ0QRaxkkQo7H1KFQUhee11ivZPaq/iPAk9yzmjA2I00nSITV115Xm7IxxpqtKky9dyiibfdpqjXJ+0avGBcfrk5pytWnS3g+WUCwo0AgrWKUo2W7R9FzNBzbzdTxh0B/BXOZwUUiJtjsZBuJqP688eMqr5b9sXgcQRRAcICII2yivbVS1/nGSWiQHT6xmud8AUSbmiDdXMAwez22WCBCIyXMDMfnxf4hM6yKAUoAuYDtuTDzh+/Q8E7vTAPG6jQCdaw8IqQJufQkzRcrnCniobwlAKIiVmSRBRtxn/J0AIgp/+la5kevqbYDVk/feG4JOZN/DJHUG4zVb1wH9SzbsM20K5y75CusBZbebEZGYyxLl+Mt2FyyLEHtxUQ6Wr5iVvuoWMDfsZtkGKQaiSWfBvlRWQQW7u19/sScj7SGdO1i2+DHlcjkdmvyz4L8IXT/wFvpRIBAPTMiD4jji0Rc/Uh4XIPZSJHVl2rUk3HsbkEVOQptfhID4AAqu7PAik/pBE5bHpqfLPBHHp8v/cKE5WhiQhcSlycTia9HGE8lZNTEKzgf6nsNesz+vxu2xpSvii+MvLj5PUkLsIs9I0maEfCbh3kiulpiTBGyvDuoircfcYlY5UGDzyfw2mCamVbH6yhw0KHJahs9usS6caJx"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-2022-jp?B?RWV1TC81NmJmZ0o5QUR5bTFUbUlkVlFrS2dCd3QyNVJPMHBkZHkvY2E1?= =?iso-2022-jp?B?eHRlYlY1dHNtclIrVVRvTnkvVEFTdmdFQ3EzTTkxYkh1Yk1VYmlqOUxk?= =?iso-2022-jp?B?NmRBSmVmNUdhYUpGdzVFWFMwTktRRDFsY09XU1RWMklqWGE4TUhKWW1O?= =?iso-2022-jp?B?TTNwZTIwSERFZmlYR3NPUzZKYW1EckdQZlVSTXRPdHV2dzd5TVMrdVhu?= =?iso-2022-jp?B?eDBCUVI3WUtaY1praGpSbkhEcjFkR2JDQzlkUm9Fd0dCMC9KREdiYS9I?= =?iso-2022-jp?B?MDVCa1hBWFlvUDJaSW9KTE1GWjlueFB3a1VPTFl6ck5mekw4ZURqUzl4?= =?iso-2022-jp?B?NGhVa3ZVNFVxTU5Nb2RMODM4aG5MYVRyaWwvZ0JzUjBYWHFEbmRYM2Np?= =?iso-2022-jp?B?d3RwM3U5c0NoR0JyaC9JcUJHN0R6SXFwRXNwTHFqek1BRHpYWU9wbXVF?= =?iso-2022-jp?B?cGVPWCttR2JKTEVJVXV5V2xWR3QwVGV0Y0hXYWN1RFgvY2Y2OVRKNnox?= =?iso-2022-jp?B?Ulp1RG9LSjhidkQyemZDcjVZN0pGQ2ZqZ0w5UU5rWW5rRjkzNXhvTS82?= =?iso-2022-jp?B?TjVvTzZtY2lYK3p0RCsrTml1aGtyaEIrRXE5WnZoUHlIcHAvV1FKM2oy?= =?iso-2022-jp?B?WmJoOG9mSU9ST1VDZzRxcjRYMjFGUzg0YWw1UmVhNHVCSm1BT1d4ckRP?= =?iso-2022-jp?B?aUZCbXZRUElnbmRuZS9BUGpMUUpYTTlCU1RUV2JzYUhKdmpBM2NIaitL?= =?iso-2022-jp?B?QktRdWNyLzk2M2F5RzkydGkramZBbmlUdEFqUkd3SGFZUllGR2c0RWJr?= =?iso-2022-jp?B?KytmRUNJQjNGOHhQUGRpVWlyKzUxNlFKUUMyL2xTTXdUaFN3N1BsUXVO?= =?iso-2022-jp?B?MTFUeVRVSEl4aWQzZTYvNTl5MVRVVjZkOHNuQVYwWWpaekdSc3k2b1pq?= =?iso-2022-jp?B?UlVlRnE0bUxPVGpzVTVPT2RUMkJXUmRjcERUcVU5RFRVaEpaSmlDcktG?= =?iso-2022-jp?B?SmJTdkp1Z25SNmVleXAwVXdtSUhnSmpZT2kxSjdIdFd1T2l3RjlwUHU4?= =?iso-2022-jp?B?SkRZUENKaXNPcjUweHRJdC9hZVJBcmVLalNPZElOQThWS1FlS3ZqbUNE?= =?iso-2022-jp?B?NjJJcGRETHZkcDl0VGlKb3U2RnNHZmdScXI4ZktNaEIwZlJ3MDN5cGlE?= =?iso-2022-jp?B?UURGTnZYcUhaOEszR00zTUV6aXl0TXE5OGQ1Z3pQV1pvNzN1Lzg4eGYw?= =?iso-2022-jp?B?Z3lHRVo4NnFiM0w5YTRSWjhpTThhcDE5NTB4MXJKVUM0RHlpMy9WMEpE?= =?iso-2022-jp?B?TUNHMEE2alp0bWNEeTBUcXdlRzNFZjFnQktYL3ZYVmtJYnNxcmF2cjVH?= =?iso-2022-jp?B?NmNVY2Z6b3hod3l3RDNJWG5sM3A4Tmo5d1YvZGlLRDErQ01KUFhsMjJv?= =?iso-2022-jp?B?SXVuNmVIODdTYS9iR1hFMjhHeU4rbG5ybkJSY1dyTFg4U3JoUkM0Rzd5?= =?iso-2022-jp?B?cGxyNGdIOFVJK1lQV2dhQ3NnbENaOEk5SmtLTUs5NFVYYlFnVitMV091?= =?iso-2022-jp?B?b29vVDhrdllac0Z6YVBMTU5EWEh1NnhhbFJkOVFTWlNraWpMU05aazBB?= =?iso-2022-jp?B?R211d0M4WCtheS85LzhncG51WC83cGJnK3R1bVpjckRvUkxLS2duZ3dK?= =?iso-2022-jp?B?THg4KzMxbVo3WUNYSkZDNmxINXlSUWd4VTdVYVVsYnF6WG9lVlFMblB3?= =?iso-2022-jp?B?eDJLVTBXTGEvTE1HRXZGZGprQmJMSTB4dTdxQUJwczZPRWZ2alRpVkQ1?= =?iso-2022-jp?B?VVBDNVNKZC9VTGloQ0l3ekNoYXVoY1RucVJvaDMza3BpZGRWV0p6RTBN?= =?iso-2022-jp?B?aE8zSlVKNy9MMlpPdUNobVdFSXo5MGN5WmFuRWZTaWJhN2c0bVdxcWhI?= =?iso-2022-jp?B?WFg2STRVZEx5UkpUMUNCQjZGL1lQUVh1eXJhSFhwaktGbjIxRkRRZVJi?= =?iso-2022-jp?B?YjViT3ZOaGZFTW1rbmtjMjdsNWVsT1VJRlE3Y1Nwc0tweVNSczZ0SUNH?= =?iso-2022-jp?B?dDlRK0RsbW55TVJKRkQwWDllN3JuQVNaYTIxejE4d0pCdE9IUzR4bkxP?= =?iso-2022-jp?B?WlJKSVRpakdOZGpGVU9rY1IvSEFVZ1lIdSs1bjJ1Zkh3VGVra2t1UUta?= =?iso-2022-jp?B?cWJYUDAzc3pUcTJFTloxaVNzTzdEdlZCL2s5dUtZMEdRSUprK3o0UnFN?= =?iso-2022-jp?B?Q2szK3R2Tld3MGVHOVlIS016dlFsYUYxUDU2cHVFak4xMVdjOE81ZjJH?= =?iso-2022-jp?B?SWNPNkYzSEJXTUc2UTFIdFNBZCtEYmpDYUE9PQ==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["TYCPR01MB5870.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["cb633324-e9ec-4b77-3fd9-08da66111cb2"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["c17OiIgeBFMNRJeFS00rsad+qLNjLxC5dDmj6G5zikojI16B/3JiGJCogmWRiEtbPIpFj0H+n/GI8QjRpmsIKxXXJSw2nZIWT7hDamc9afQ="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["cb633324-e9ec-4b77-3fd9-08da66111cb2"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 03:21:30.7955 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["TYWPR01MB8607"]}	["<OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 03:41:03+00	michael@paquier.xyz	Re: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger	<YtDhz3ub0CFfgJlr@paquier.xyz>	[{"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	[{"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	125	10228	[]		On Fri, Jul 15, 2022 at 03:21:30AM +0000, kuroda.hayato@fujitsu.com wrote:\r\n> Sounds good. I grepped ATExecXXX() functions called in ATExecCmd(),\r\n> and I confirmed that all returned values have been collected except them.\r\n> \r\n> While checking test code test about EVENT TRIGGER,\r\n> I found there were no tests related with partitions in that.\r\n> How about adding them?\r\n\r\nAgreed.  It would be good to track down what changes once those\r\nObjectAddresses are collected.\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["\\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 12:41:03 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657856478; cv=none; d=google.com; s=arc-20160816; b=zm4OqTgb2XhhSln+5rp2v8uB1PmHyl5WUi852AHJbO8s88M12VoxZ6hU+q7HVZXSEd NGIZjl6pIap2kxzajfuTe1/e5/zrWRc0nL9o3aenPUJe7Ghsf8Owxzc07UE7eDcuJ0VC hLLlNQrvEcvYHpxeFsHWqsuODC+Ho3hhW++WgnEe/se1fT5zMTJeI3QTKm7OnjeAvpoC /wmKMO1Mj5RPBxjK5Lr8On+Up8158Bl9MWjq6GQ4rGH/p8r+8ZCpYbeuupMGztrmghWm U9N7r91ffZyT8ymszK5KmjyiRGjAWKeZFYG+c94CphlqfE9qJ4o716GVAqBEgXs5ocfP RG6A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp40886jai; Thu, 14 Jul 2022 20:41:18 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 8-20020a1f1908000000b003752fbc241asi636201vkz.224.2022.07.14.20.41.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 20:41:18 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411072@lists.postgresql.org>) id 1oCCCb-0007CW-Qu for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 03:41:17 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oCCCW-0005c4-SJ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 03:41:13 +0000", "from out4-smtp.messagingengine.com ([66.111.4.28]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oCCCU-0002IH-2D for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 03:41:12 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.nyi.internal (Postfix) with ESMTP id B10685C00DA; Thu, 14 Jul 2022 23:41:08 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Thu, 14 Jul 2022 23:41:08 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 23:41:07 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtDhz3ub0CFfgJlr@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "X-Me-Proxy": ["<xmx:1OHQYplnPVOkikT83rtmWiG8tD6PV_jYjie8pRQF5WGsFRx9MqZiuQ> <xmx:1OHQYn1WiAde6xiSL90lNCuz8djZR2KbTrTHnKMlN8JlyhMjFHbAIQ> <xmx:1OHQYou941SYkaibBlGQpUrt-KXapVyDUTtdgEMuWe_dya1BN7ixEg> <xmx:1OHQYg9ttvnS3e8kYAZ0j7seK_qSLQ9nR6mmsQVLjSGdycgPE7T4hQ>"], "X-Received": ["by 2002:a05:6122:1241:b0:374:a56a:83a8 with SMTP id b1-20020a056122124100b00374a56a83a8mr4870773vkp.11.1657856478744; Thu, 14 Jul 2022 20:41:18 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtDhz3ub0CFfgJlr%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411072@lists.postgresql.org>"], "X-Me-Sender": ["<xms:1OHQYplMXI0L_Vh1eKCbmr5bD9FrXYrhSfEco4wBwdnnBJoXuFnytA> <xme:1OHQYk0vILBbyDvGE7Tv46YJp7eaUnXMS3l4UCBn6gMN56P4cHEvSTCKiLzSR0n5y qvjvJaJfPrGpg4Wrw>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"FU+bBzCrtGtgnqAW\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411072@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:1OHQYvqpj0BorU4u5cp7686AbcW3uBE48t4qRNgXTVIiE-v31J0MDDZSqs2YH_l6tmnlLxYIC647leSx-7TIHMm0q-U>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657856468; x=1657942868; bh=rI7Pk/BKdx fvAs816M5VAGpD5CvGvEubAgrZZiJrrn4=; b=nxSjqXLQze1YiVrDYuzcevhtWG +/G0KIEkhNdnnxxUd1JcuFceUPogO6r0XgydRNOw+oYymE/s76yG2ZK0Q2FTATlv SsRO1G9BeskNu2tEk8XzJMJokMs/9QoOr+PLVvzpiWw9x7OQaApvm+8pG1ejA2QJ 7nNZg2/mcYspfLHM1ILHa6DOMTvhdNPRGcpjZnoN4+kpQZMHRohRjgyTc+zB6fKl Re1wgqZZVfOs9hijs6x0tx+lX51OM26uimLh3KzaXTvYE3SPDgCTFC2xU75UB2SF uuwBuW4qZxEsnErj8xyD6zyWq6KDaxzuffOCAAk+SzxNwjmgB2VVGri9SOow==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657856468; x=1657942868; bh=rI7Pk/BKdxfvAs816M5VAGpD5CvG vEubAgrZZiJrrn4=; b=ggoOkfOF6qQwRucaw4m8a1NlzGnTJ++bnVnzeMQYGysV hVb/TQO3ETdGp7CgBytPD3I+VXbGjyWHyVdGIM+8XtB7uzBP/bOMTo9UYumHE/dH pOaFJLoVBoRcXOFReMxLBn9rGnHKMcpecJrUVb5CuSknb6fctOAm5rdMaK8Ite0N sqVXFGdZxkFHkPYnT0GEr9ThrTIcaEcnFf6tR5UGn7R+VDoX9g1FArRu5UYn3UfJ kF7fqGN8+M+LBHnaub7zLmKHX3a2867ML2fDiFNS7KKFVasbXhGAcfulExzy5Imc EC0wf8PG2mGkAj6VBeZ7h9v5lgWBaAYI4rQvbw17Pg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddgjedvucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdlfeehmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tddvnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepteelieefudffhffhtdetleeg geegfffhkeeuveetiefgudduvedutefggeeivdejnecuvehluhhsthgvrhfuihiivgeptd enucfrrghrrghmpehmrghilhhfrhhomhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiih ii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sFcTpoY7+Jm1aQDgJhfhEwcSO8KUd/xOIVZrqtKyfJedxwCXKS+P13dH5rDJQJpFGC8M/C"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=rI7Pk/BKdxfvAs816M5VAGpD5CvGvEubAgrZZiJrrn4=; b=dS+WnxUpSXGHygZ35BpRRRxrQ0XbsZBW2O4FOJO/Bvf0FwdBbuQr8MA0BOvQzITWg4 rHjo7bpA3LmsZxP8U6HtFg2UzQqeubNLitQSzIGtkDniKHgdnU/xAFKccJGrgOW1bxdI D36MC3qCMu5fcXzcu7uxeeX77YG6eha5kNkr0DuOuZCpLvUlejHzEXmx7zObPw1cJaDc gxOggMI5tmGciA5IrLP7ZEcsqoRIP0kx4XszeynSO1Gx1ZEa534+J5Ytwvyx+4FvmKmM UlOB1B/403FkAkS38sL2i0I1LRG+lH/E3RJUP+AljteYzaM3Cgxzoj491CFyWYXG5TGa F/Wg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=nxSjqXLQ; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=ggoOkfOF; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411072@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411072@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=nxSjqXLQ; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=ggoOkfOF; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411072@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411072@lists.postgresql.org"]}	["<TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 03:44:16+00	michael@paquier.xyz	Re: Allowing REINDEX to have an optional name	<YtDikC1Ov/jM0Nzc@paquier.xyz>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	126	10367	[]		On Mon, Jul 04, 2022 at 03:59:55PM +0900, Michael Paquier wrote:\r\n> Please note that patch authors should not switch a patch as RfC by\r\n> themselves.  This is something that a reviewer should do.\r\n\r\nThis patch has been marked as waiting for a review, however the CF bot\r\nis completely red:\r\nhttp://commitfest.cputube.org/simon-riggs.html\r\n\r\nCould you take care of those issues first?\r\n--\r\nMichael\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	{"Cc": ["Simon Riggs <simon.riggs@enterprisedb.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 12:44:16 +0900"], "From": ["Michael Paquier <michael@paquier.xyz>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657856671; cv=none; d=google.com; s=arc-20160816; b=imaJP0ii347QhIhmUPYBVLMn88hyl8wVbDKs+7EMoD2WHZvCwaDMC+nED+xLbxnKMN ZfMrUHMvzL8cSpNT3ZYv1AqUb4D5uyAq+C9lr/QACxdSQxOFA0cg/QerTJ6eJk1A2Lqg L0xpPuGWZ+TbESHS7/+9Dur2JLCUueqistN2SpCWWRu1ZXHH9eOw4+8JC2c2bdLWq2SU ZWXfZsa/RR2SpZ7Ej5KoItkeWrI0XJ+VHZmugVG52j9WuURXiSiamsXsQ/hehH+p9cUm 32Cboayxdl1aSi7lnfBBiIHh/fFlC2D/C/b1QIqiMVuXo/Y4LyHW6IuCA0zA0NI4+yNl BBfQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp41189jai; Thu, 14 Jul 2022 20:44:31 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id k24-20020a67c298000000b0034b948eb5ccsi640214vsj.567.2022.07.14.20.44.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 20:44:31 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411075@lists.postgresql.org>) id 1oCCFi-0004Pu-43 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 03:44:30 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oCCFd-0002fY-KK for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 03:44:25 +0000", "from out4-smtp.messagingengine.com ([66.111.4.28]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <michael@paquier.xyz>) id 1oCCFb-0002K4-3o for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 03:44:25 +0000", "from compute4.internal (compute4.nyi.internal [10.202.2.44]) by mailout.nyi.internal (Postfix) with ESMTP id CE96E5C0079; Thu, 14 Jul 2022 23:44:21 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute4.internal (MEProxy); Thu, 14 Jul 2022 23:44:21 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Thu, 14 Jul 2022 23:44:19 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<YtDikC1Ov/jM0Nzc@paquier.xyz>"], "Precedence": ["bulk"], "References": ["<YpYFeT4BYZowbFUM@paquier.xyz> <202205311230.5dc4ztvncsck@alvherre.pgsql> <Ypf+GU4zhvRTirJ1@paquier.xyz> <CANbhV-E_qSxF4JHdswaKcaG_Mo25h5WyXBPYWyZ0+=Mc-QxczQ@mail.gmail.com> <CANbhV-EmOh-XTssH5TwannC2S1VDN5zK-b+oZKs8UdyUtc2oUw@mail.gmail.com> <YrvWoAsaX/gUG2re@paquier.xyz> <CANbhV-EL4+RK49Qmk66zFmTiEEhT6TKia0ow_t5zogV1-FfAEw@mail.gmail.com> <1386216.1656884491@sss.pgh.pa.us> <YsKP6wJ0+XvF+6/8@paquier.xyz>"], "X-Me-Proxy": ["<xmx:leLQYrpC7kMygNDSVzrNoF1gbJNkexiBI4VHEnWjgNJv9OVpwvlNyA> <xmx:leLQYopJIQhNvS1PmfEFEVXgp9EeOs8WCEY9wpsEd1p3SnAjBv5OGA> <xmx:leLQYhToXFaWER3WnqgVEnUXOeeAVf7PKH6Dsifz402V3hubXcBZ0Q> <xmx:leLQYtBWGdnTtVrQKGSypCFcTnjMT2_PwKsJ0Ag6n8fyKNxEyKNUmg>"], "X-Received": ["by 2002:a1f:7247:0:b0:375:28f7:9afc with SMTP id n68-20020a1f7247000000b0037528f79afcmr2540725vkc.28.1657856671063; Thu, 14 Jul 2022 20:44:31 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/YtDikC1Ov/jM0Nzc%40paquier.xyz>"], "Feedback-Id": ["i0fe9450f:Fastmail"], "In-Reply-To": ["<YsKP6wJ0+XvF+6/8@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411075@lists.postgresql.org>"], "X-Me-Sender": ["<xms:leLQYtbY1XUx8Ex995sFioIA5hcYugMh2GyklcMQ89dt8kmO83sWZg> <xme:leLQYkazGw6KLLwvSeNBo4kW6aYjNWW97jmYsYXGA0yfP5okRJCbFDzMdPS4UJ4Cn fr0UaBD9h6LKwuDfA>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"ZWQVnksCalhIicV5\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411075@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:leLQYv-QxNRInOTJbO0hnWv4j1qAwajzY-uV90V_H9C0Z03-wW6kaYCZwsOifq7GLM7yqGdEPqBU-g2gf2_29Yc1E20>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=paquier.xyz; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657856661; x=1657943061; bh=N4C5PJlswK Els7NS1xbnwWz6aohLue2OZ+hlyY0zCpE=; b=NLewumrRPZLxGJ2WOWQha/6n3p 9nH38LHODJhPHTX8iLA1leJy3a9RyC8V4gBcKD+CNJQfiMfG+VVnuCOf99xAYCQ0 s7BKc6F0KSSARxyESJHjyBeQXg927Ym2KLxs5JP0kFZVMP761ZNheNw9hjVR45kO kiHyfslbp1u0oS6OiMIUFx+di6q2xYXGTBlgjSmD8Pc4EvNR4kC+kQ0da8d5Ur70 PvBKFprerGUOQK0bdd0HGfQpiJfcQgPEDqy35HzMSnf4+1Bf5JjEvRHCtWIn7bI2 EyaYafBcBuDbeLxaDqw1wpxYVc1vV9bBodkLip3fYsBqTtrGSoH5e90nymGA==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657856661; x=1657943061; bh=N4C5PJlswKEls7NS1xbnwWz6aohL ue2OZ+hlyY0zCpE=; b=w9aOFMD296NTJVo8VK5bPTWpKvVQXbF2Kz3AH/hLMY/7 PjW0b6iC33jPi6wGh4Hvb63arF92aMJZ4EmRAyOOsgu8uvTLGXKV2sygpD5dK+sV TEM/QNTMFxYAj+T7IqNCgwnS1Vm7qxldi9eEwJLpuCEz9XH6rHOvBf9lbRZmoKbd L+CKDSDkuzlzvaS1urnXfQWnKfR8tvFO/lnIOpdDuv16cTcPV/7oG8jF0BY0zfw6 h7Ds4qI5nzFP1UBI1gyUdjotAzNPrctDH0BN+0S2XY5TLXpw2QzfU4GTskYr/A19 oJpTu87D7m6xFzkmD+oLhaZeDv/VIX6reoK2W0p2mQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddgjeefucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdlfeehmdenucfjughrpeffhffvvefukfhfgggtuggjsehgtderredt tddvnecuhfhrohhmpefoihgthhgrvghlucfrrghquhhivghruceomhhitghhrggvlhesph grqhhuihgvrhdrgiihiieqnecuggftrfgrthhtvghrnhepjeffueeiffelgfevieekieef jefgleejgedtgffftefgieejjedtjefffefhkeehnecuffhomhgrihhnpegtphhuthhusg gvrdhorhhgnecuvehluhhsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhho mhepmhhitghhrggvlhesphgrqhhuihgvrhdrgiihii"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1toql1gI3taQKoTOhgNfwm/A+an+cWZfKTMiD4DQhEBPS7VChfW54m6VYypLjl34Fq3DPie"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=N4C5PJlswKEls7NS1xbnwWz6aohLue2OZ+hlyY0zCpE=; b=z4bGLu64wfCS7xI1cRXOcNSNr9f/U1gjIXNUe3SlhOA9o6ntliqE2lhvmhkZShCcEM p2Z20nxtWVgf/r4hwfytDG2FCiv9YyXsymI6itIcmAUh8Nbvdqs5U3czEdrbzV7glFCs l/N/uKAXbUumgwy7Cy/2zYvd8cf0bRuQYRU7KB10w+0i+8MtJPB2sBOilQiZrrH7e00k tR7WY4ln1w5TF7zs/qUP0ZTlQwb17Sd9ScvqGfajxCC3h7N1XGNI5hREf3Z0ZH7wi323 gezdaIpE4x786BSt4e63tbT7PwY1VrRQ6hHTyQQTn6Fz+AjCRMu7G8bH+X4EzE+9zS/U kDAg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=NLewumrR; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=w9aOFMD2; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411075@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411075@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@paquier.xyz header.s=fm3 header.b=NLewumrR; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=w9aOFMD2; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411075@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411075@lists.postgresql.org"]}	["<YsKP6wJ0+XvF+6/8@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 04:19:10+00	thomas.munro@gmail.com	Re: EINTR in ftruncate()	<CA+hUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	127	12168	[{"charset": "US-ASCII", "part_id": "2", "file_name": "0001-Emulate-sigprocmask-not-sigsetmask-on-Windows.patch", "content_id": "f_l5lya4t70", "disposition": "attachment", "content_type": "text/x-patch"}]		On Fri, Jul 15, 2022 at 9:34 AM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n> (Someday we oughta go ahead and make our Windows signal API look more\r\n> like POSIX, as I suggested back in 2015.  I'm still not taking\r\n> point on that, though.)\r\n\r\nFor the sigprocmask() part, here's a patch that passes CI.  Only the\r\nSIG_SETMASK case is actually exercised by our current code, though.\r\n\r\nOne weird thing about our PG_SETMASK() macro is that you couldn't have\r\nused its return value portably: on Windows we were returning the old\r\nmask (like sigsetmask(), which has no way to report errors), and on\r\nUnix we were returning 0/-1 (from setprocmask(), ie the error we never\r\nchecked).\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 16:19:10 +1200"], "From": ["Thomas Munro <thomas.munro@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657858797; cv=none; d=google.com; s=arc-20160816; b=zoxC+MqSce8NGeK6qmXc4QLDR0u0DNW8MCNpbHj3mSHI9uhcnGPJnoV9A03qDyGfWz 4zSIdkPpkd1WQZUBSG9OWsfda5UdqgGxu5oXlqNkFWSO7qxaRnO3XHaDyCmx4DupghI1 qcv4nZNj8J9s6WpKjP/SV4oEX+Fr8o0AG7Q881Bc1BzHG6mI6WoD8cCzyHaoxbKLbZF+ OetMObUbndURc6PIClVwH45ea/N0tXBxX6gwk5+rxamdnKVoq2UM4Tz6Q+pqv+vk3IJb ORk6qA/ym36yOh6i/LCM5WKbXrNuT0Js2oUdEwU61nY9Azcf1y2215dZ1WTZrZ+ApMTZ M88w=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp45333jai; Thu, 14 Jul 2022 21:19:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o3-20020a05600c510300b003a30e0e93cbsi500701wms.196.2022.07.14.21.19.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 21:19:57 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411078@lists.postgresql.org>) id 1oCCo1-0000SM-Dl for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 04:19:57 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oCCnw-0007Jv-SA for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 04:19:52 +0000", "from mail-il1-x134.google.com ([2607:f8b0:4864:20::134]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <thomas.munro@gmail.com>) id 1oCCns-0008NC-VJ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 04:19:51 +0000", "by mail-il1-x134.google.com with SMTP id k1so2006187ilu.1 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 21:19:48 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CA+hUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql> <2835511.1657812444@sss.pgh.pa.us> <CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com> <3153247.1657834482@sss.pgh.pa.us>"], "X-Received": ["by 2002:a1c:7310:0:b0:3a0:5580:fbf with SMTP id d16-20020a1c7310000000b003a055800fbfmr17493703wmb.109.1657858797857; Thu, 14 Jul 2022 21:19:57 -0700 (PDT)", "by 2002:a05:6e02:148d:b0:2dc:9a63:aab9 with SMTP id n13-20020a056e02148d00b002dc9a63aab9mr6437213ilk.6.1657858788122; Thu, 14 Jul 2022 21:19:48 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CA%2BhUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA%40mail.gmail.com>"], "In-Reply-To": ["<3153247.1657834482@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411078@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000277f0605e3d05452\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411078@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=tKEdNgYnrBnwfutVzgsJvOprH1eDNVy0MrPxdYA+emM=; b=gRuCHrEpm1Jcfbcov4GoYrcOS/tcuL6g0oQulPNR3kn1q/YYjcYLKQl0ZMvNFZdvLa G1DJHyiZiNO3AZSpDKf+G9D9v4UvPoblMJcVbbDQb0PoF5VZFgqonpFElvd90CeQSg9j k8w5NDnScLPIKXt8iyUVLWOpBnxOIBZP0miM034fUafZ/GVQKC+tn7YWQrIzGcr+JByc MmTiZOITOL8K0Byq520LnSI45fxhhANJI2VvFN2OgZHhY/NgMLRUFMARXKfeGOM248nf YM07CTIM95wZu0jW6C3qhFNOPsT+t8RDq/O/a6J7CxtaSd0hJQ1oo/dVAkWryh5hAR7w FQNQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+gTFvlOvdLepVBF0PEp+W41B7tz25iqKa9puzE3QTzrnZ308zZ EuRpry5rStHTBqfaQEWGKC378chPsTcKmRlakYA="], "X-Google-Smtp-Source": ["AGRyM1sXC9bCm+fChhQ7iT2/ojmlgkZEP/AHwKqKGh6rwSes/zOrMEgxfAuzD0nF8Y729KLR9U/B"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=tKEdNgYnrBnwfutVzgsJvOprH1eDNVy0MrPxdYA+emM=; b=tSB1xzV5ARAuWH9km9twQP9zkrB/4pyUaXkPB+sKlElxyFujli4dqTUkZ5rLeHu++n MI3i5HQGRz6xi4eeE0UKgkhQywacCy9Wivirnvjwt2SZXk8rYQwg8o/ZVsMwEcSw9MrB 8gnUp7sHA07dpPDaN1KbjFAUntAb3nCL1mf3CpeBec0Pr9gZEPA+Pf6j3POStx3MW2Ok JdQvyWxZdrtRGwTbI9lJglRywropFH5qvOEYEEdzH0r+X7PlSieYTXh30dUBG7glpoey lrs/KDxOnYYCcD2uZbJAsi7EXYEf2nxQ0dkGpSb9WiSBwNmuocW2BY7GMzgFxYPxRpbo 71dw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=gRuCHrEp; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411078@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411078@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=tKEdNgYnrBnwfutVzgsJvOprH1eDNVy0MrPxdYA+emM=; b=8LpmMqwa3Ha3Bz4zrZAfmStlMAmsMUE+WrNwb5qOp1NAooBSKTYj/A/ICC218SmQZF LhCvInM7fgKaRVrke8ySORdqMUJUN0/RGuIBchhLmflI5Y8HpRVocw+3oF6YVASoj+Qq rB7D+hninAV6KCAQSXaXYLecL3H5JVQTCmsGV8CG/McyfaXP9mWumlnFy0tf0gaWXBtH HaPBMo5ynBbA6tY76QQGjo3ZFvkaVSVdlkTXrI346RYiEc9FsuNpdeNDXD7tWVRQChQT bZWj+oOH/bMxMftQhsizq71H/d7PGhi9OlWKV6nagezod/gDduKrIyrda7Q3Iyi6ddGZ osBw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=gRuCHrEp; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411078@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411078@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<3153247.1657834482@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 04:56:45+00	kuroda.hayato@fujitsu.com	RE: Support load balancing in libpq	<TYCPR01MB587039601D7796383CDA56C4F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>	[{"Name": "'Jelte Fennema'", "Address": "Jelte.Fennema@microsoft.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	128	17089	[]		Dear Jelte,\r\n\r\nI like your idea. But do we have to sort randomly even if target_session_attr is set to 'primary' or 'read-write'?\r\n\r\nI think this parameter can be used when all listed servers have same data,\r\nand we can assume that one of members is a primary and others are secondary.\r\n\r\nIn this case user maybe add a primary host to top of the list,\r\nso sorting may increase time durations for establishing connection.\r\n\r\nBest Regards,\r\nHayato Kuroda\r\nFUJITSU LIMITED\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["'Jelte Fennema' <Jelte.Fennema@microsoft.com>"], "Date": ["Fri, 15 Jul 2022 04:56:45 +0000"], "From": ["\\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: Support load balancing in libpq"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657861021; cv=pass; d=google.com; s=arc-20160816; b=KMb81m3bWuWLRRWSC8DPikTURrj0DRUk4Jf4DSvZZCLqJ0CVDN4LgfJJbzmrJq6pvk m2Pin+xbyqiLc29kIGgAoKR6aHOwPmfuzbcwEALHL0s8SIbea8/GyrAbsYfjbNwWLMjk pn9H9ThzkbbZOP0abV/vVaC7gaT0fxxNKE1YnH/T6jz061jTOB2uRzvmN3ziboOvmM7L GqORO/MDt7RNmRllzwXX7fzLmUINANbPHS4uy5pFgPDC+4hVXdE/yHCCOHdaKnrmb3Bt YMn3mtMLtFfXcAvL8LNvSYSoOyQJKLUvdGYMjaDrJwXEjV2EguTENy96vX29GnsqFtgu R9qA==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=OFf/ElySpoy85i+syoanYKBXPAvM5j/rM58njx1UIr9UmqzOgOLM7y1tvVQQwr70zTF8WxcF4tlYt/Df3WVSvO9lJqk9cYMhE2NHwBgcy1s0W0zW9rDILpvlJ7OaVGEiE40koLMPLgI9Dpk0h8ZpRG43qrLxjsNDRFq0cflHA8nzbTd2caKqM/ff1aHw9qUGd7LCGBS+K3KNGqn0h9BywN8TWFE9NMdVAQPFl2/nJkcwX5vAFAHclKFg84r03yS8Um9ILUgHyarDWuclIn0Hu+wS2gOBAeK9WRspNfuGKmI62ySpQJMaNTlil9boRz+g/Md0ka9ejtdgIWfBcGR2ow=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp49362jai; Thu, 14 Jul 2022 21:57:01 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p126-20020a674284000000b003571c8410dbsi651007vsa.242.2022.07.14.21.57.01 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 21:57:01 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411081@lists.postgresql.org>) id 1oCDNs-0000TF-Nr for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 04:57:00 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCDNn-0007Hq-Pv for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 04:56:56 +0000", "from esa11.fujitsucc.c3s2.iphmx.com ([216.71.156.121]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCDNi-00038q-Se for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 04:56:55 +0000", "from mail-tycjpn01lp2174.outbound.protection.outlook.com (HELO JPN01-TYC-obe.outbound.protection.outlook.com) ([104.47.23.174]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 13:56:48 +0900", "from TYCPR01MB5870.jpnprd01.prod.outlook.com (2603:1096:400:42::9) by OS3PR01MB9499.jpnprd01.prod.outlook.com (2603:1096:604:1c8::5) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5417.21; Fri, 15 Jul 2022 04:56:46 +0000", "from TYCPR01MB5870.jpnprd01.prod.outlook.com ([fe80::7981:3fec:52a5:1d6f]) by TYCPR01MB5870.jpnprd01.prod.outlook.com ([fe80::7981:3fec:52a5:1d6f%4]) with mapi id 15.20.5438.014; Fri, 15 Jul 2022 04:56:45 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<TYCPR01MB587039601D7796383CDA56C4F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<PR3PR83MB04768E2FF04818EEB2179949F7A69@PR3PR83MB0476.EURPRD83.prod.outlook.com>"], "X-Received": ["by 2002:a1f:a4d2:0:b0:374:2778:9f88 with SMTP id n201-20020a1fa4d2000000b0037427789f88mr4896473vke.18.1657861021812; Thu, 14 Jul 2022 21:57:01 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/TYCPR01MB587039601D7796383CDA56C4F58B9%40TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<PR3PR83MB04768E2FF04818EEB2179949F7A69@PR3PR83MB0476.EURPRD83.prod.outlook.com>"], "Msip_labels": ["=?utf-8?B?TVNJUF9MYWJlbF9mNDJhYTM0Mi04NzA2LTQyODgtYmQxMS1lYmI4NTk5NTAy?= =?utf-8?B?OGNfRW5hYmxlZD10cnVlOyBNU0lQX0xhYmVsX2Y0MmFhMzQyLTg3MDYtNDI4?= =?utf-8?B?OC1iZDExLWViYjg1OTk1MDI4Y19TZXREYXRlPTIwMjItMDYtMTBUMTY6MzE6?= =?utf-8?B?MjYuNjU0WjsgTVNJUF9MYWJlbF9mNDJhYTM0Mi04NzA2LTQyODgtYmQxMS1l?= =?utf-8?B?YmI4NTk5NTAyOGNfTWV0aG9kPVN0YW5kYXJkOyBNU0lQX0xhYmVsX2Y0MmFh?= =?utf-8?B?MzQyLTg3MDYtNDI4OC1iZDExLWViYjg1OTk1MDI4Y19OYW1lPUdlbmVyYWw7?= =?utf-8?B?IE1TSVBfTGFiZWxfZjQyYWEzNDItODcwNi00Mjg4LWJkMTEtZWJiODU5OTUw?= =?utf-8?B?MjhjX1NpdGVJZD03MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRi?= =?utf-8?B?NDc7IE1TSVBfTGFiZWxfZjQyYWEzNDItODcwNi00Mjg4LWJkMTEtZWJiODU5?= =?utf-8?B?OTUwMjhjX0NvbnRlbnRCaXRzPTA7IE1TSVBfTGFiZWxfYTcyOTVjYzEtZDI3?= =?utf-8?B?OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX0VuYWJsZWQ9dHJ1ZTsgTVNJUF9M?= =?utf-8?B?YWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfU2V0?= =?utf-8?B?RGF0ZT0yMDIyLTA3LTE1VDA0OjMxOjI2WjsgTVNJUF9MYWJlbF9hNzI5NWNj?= =?utf-8?B?MS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfTWV0aG9kPVN0YW5kYXJk?= =?utf-8?B?OyBNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVj?= =?utf-8?B?ZTA1MF9OYW1lPUZVSklUU1UtUkVTVFJJQ1RFROKAizsgTVNJUF9MYWJlbF9h?= =?utf-8?B?NzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfU2l0ZUlkPWEx?= =?utf-8?B?OWYxMjFkLTgxZTEtNDg1OC1hOWQ4LTczNmUyNjdmZDRjNzsgTVNJUF9MYWJl?= =?utf-8?B?bF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfQWN0aW9u?= =?utf-8?B?SWQ9ODA0MDBhNjItMTcwMi00NzJmLWFlODEtOWE1YWQ0OTIzNWRmOyBNU0lQ?= =?utf-8?B?X0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9D?= =?utf-8?Q?ontentBits=3D0?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411081@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"utf-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411081@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHYfODBRHgzyVNc+k6f9T2PtZMn861/Dabw"], "Thread-Topic": ["Support load balancing in libpq"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60809520\\"", "E=Sophos;i=\\"5.92,272,1650898800\\"; d=\\"scan'208\\";a=\\"60809520\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657861010; x=1689397010; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=0Fg66PZsvjZSMyp+MsIyR5z7PAclNVy1/lEJRpQnvMs=; b=R41s84CQkyyMie3goV1yZeD8I0+AAtVT/5sPu0E5v6to91sCeYG8OSOz ZqJntqSuINqEuBiJyZbXmAhjGmBDZ5wumBiA27TLAa00/B3NJQ80CDNoQ 4QeszUeMB/Intgd/EZERwTJrsY/3P1R0j1m/Rue/7fJoeJoeu1GQGG+hW v9PE5uBd4NPrajywhi1I3xd/Eu6T4ogWl1dy7ZVU6FLL2R3yvoadI0J1X 0ftGjSfAX99RM0qxx6dApqIXirAsSEAS9ub1NWeI6fUdPrONmbNxeT2dF FyizcJGXPXPx82JNQCPlowLDjonfTZz8IgmZ8PW9DMAIsIffE34sHQpcH A==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=0Fg66PZsvjZSMyp+MsIyR5z7PAclNVy1/lEJRpQnvMs=; b=STZjObO2C9RS93ra3f4aZmbDL96jEzDyDaX+fgech6SowqM72M0Cr2XRzvvvwX3HrYyBE2tfxBRLSOWw2oIPl9NutIeDiJIi8+OP4fv6gMWsGXkWV4WXh5GoesaoXk3QTrQhi6640g4XNjeTa6K6UfzknOtSm9RfJkzLOisy2Nw="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vR5sILxcpTR8zDcCJyS147f+Q+m9ltPBiDc+6bkOtCM+euJ07kPZkmV4N9Sx3/eJoolT7P"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=0Fg66PZsvjZSMyp+MsIyR5z7PAclNVy1/lEJRpQnvMs=; b=YqkK8XO+bQWf52JgrSNj5hM4p1ue+JKQdxgaCya4z2Z/2xdRFgIX58beana02KFMtc suKup369AwjBjYRwfKonWExBBtMrLJ3qf4FLSuijSSCSoAcWcygYW+kNF1miadjeKnGM 7uqtrJI/2xEbFmzQFQEr43SYnjSkMSwmc50uLqRb2ekrLOhT+D+K0gHxZ5Dr0VMnEohA B0kG+2Eb4+yx1V+tgRKJsjjzhnaQx7u5KmbGoHDccUWhC8mhcJweiZBIVQLX/wmIj0Ha aIHX7Ch4enGvw5pacoGBXCI34R6rL3ntud4XVxwRsby+4PJXlsb4rM4Ae1I1FQf//YLr 1Vvw==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=0Fg66PZsvjZSMyp+MsIyR5z7PAclNVy1/lEJRpQnvMs=; b=KVQD4YvH8CIgcLvj1dlCulKL6p77Wz2etjfnaN73ghZE5C+ckzMu/Qufs8jexJDHjwgDyOdbL1mCnKi3/FrnRBr96FGCj65yltY1snI+zKZfiVIYQZ1XbaIesIOz0pWGIp5Caily1+EbhlBSR2ud/MIlhyenGqLda8xRcAW2L+97BVibn/Xn6HmhBMq3S+tiY8cTUj19scdQNedMhUXakQ9JqgXwkhwv/3n1a5A7kQyWNlqdWVNYKnUR7zGlyogquZR+MfZBEfbsi5ALF4IU6ilM8nph8dolpA5cTpSckVBYkkvJeunWzZ6IKsDa7OLE7OoPAdLHbD7HGZW40PK+TA=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=R41s84CQ; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=STZjObO2; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411081@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411081@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["base64"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=R41s84CQ; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=STZjObO2; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411081@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411081@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["OS3PR01MB9499:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:TYCPR01MB5870.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(346002)(136003)(39860400002)(366004)(396003)(376002)(66556008)(66946007)(66446008)(41300700001)(64756008)(86362001)(76116006)(7696005)(6506007)(66476007)(71200400001)(478600001)(26005)(6916009)(9686003)(38070700005)(8676002)(82960400001)(83380400001)(316002)(38100700002)(186003)(4744005)(2906002)(85182001)(4326008)(8936002)(122000001)(55016003)(33656002)(52536014)(5660300002);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["ssx/xcbwOgR04cyFA1GEVDIUeaMUJ8vhzInZVsYGAG5bdZKEKCvLXe458ION1Y+qGbsCAVWQeDNfjlSF2KlX7llZVW2F10I8EPt7thdPog3OleZIoC9kFc40jVHgIeoXdTHnrPG0l+Dm0XJjH/taDCwNRe5LrI+FVHAC+g6c3FWTv0CLIB/bSM5kvi9u0y9b2qD/7vyUS49soqiXr3leBgjZ8/7crA9wg82BplO57hT9IvGGN/y97CZyYG6NwQRSE0toHtkNs782O6EG9/SYajt3lNJMPiSCiTkgEBopH8hHIqtNvEhN0v4cdsWWD9SKNJo55sE0ZrTOsNoEgAkKXZxkDq26QNjqHF1c3MI5VvxfbTFtw6CJQ/JhSQlNqecQ/7CKVnpaXUzuX2iyGZrRJRgnukWw6hKX+IyTlYUB5R5sKyarMrklBt04p8Fw2XNsKEKVkHXWPI+dE2ehEAGMSYaRNDlV6x9YwoH5N8BJlLpZDVEYboTwsj271onUI+G/b6W6SsuGrua3XtglajN3Wkc8p1XT/q4UEGMLUPPzJKjidI+yZJo9NqFyojcEoEzuxDrmYFUrarHxujOXenX1hOmWY5MO9XCQnvptb/jsxrW/Bk4EJNT62ev+sv7ZlYqJRCjdoadUpJ4KgJe/r+J1gYueJR54nwMLc2KRl8FyWIfUKJBJFJoL0Ly2VHabKga6hWmRACdY+Y/L1JOorAHeDIeanoQh8J9B0ZQwq4oi9EMv745UkLzaPryUPbOAW/4aLy7Cxn5YC7iv4vkCWZKCKCn65SV8qF+pNrMYVNM55n2M5YI3GVaZxqZHxgaUYZiySWWuwULqlbTAYfnb2K5+Rj9kW1ouT2fGLG/B6YjhTXw="], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?utf-8?B?N1c1V1EzWU9mVmRwQ2YvRFAxYWFxaDZnMkJtZDRjZ2tIVktXZkpxbU8rQ3Ux?= =?utf-8?B?UjdIc2tUQkM0NmxONVFrNmRmY1ovV2ZhUXBtQXhFelM5RDJWdjhLVERMZDJo?= =?utf-8?B?Y2RBK0ZLSGhqSkxMMU9UUGhZVGYrbHAxbUZnWkFTVEg5TWVTUllTV29jZXJp?= =?utf-8?B?RTlDOUtQb3NmVkFWRUduc29WdDVVa0VLeTBXb29JZ1pzK0ZiNW9Xc2JHUWpr?= =?utf-8?B?RTAxVk5OclFid1MxWWNGekdVcjN4UWRpTUx6V01hNVVDTFgvMUl6dEtZSEVH?= =?utf-8?B?cUhmQWZjYk9Ja3pGZzlhbk9lS1pUWG9oNzFtbjF4TVB3cTloV1VMa3hqa3lO?= =?utf-8?B?eVE3UUwvRVUzNE42cUlUVGpZQ0lDdThaUkZ5UFJwYXBWY2p4S0JZWnV3dnBH?= =?utf-8?B?VU92MHE3N1lCdjh3RVdHbTFOZndCUktkMEtVbi9kU0tuN3craEltYmpkU2N1?= =?utf-8?B?RklZK0hqNE5waHVvMjdVeDQvQW1DanBMaTZkR2E0VjJYdTFqUmczZUdBZGNs?= =?utf-8?B?T3FjdFgxRCs1SmdQUnhzVkFTck95WXM1QkdTeDZYN1lwdTZvK1p1WTJCczNi?= =?utf-8?B?emlhU3VHUW5LbHljQkZQRnF5cHlDdFZwdkM0Z0pPWFFYQVZZUmo0QXJWdDVp?= =?utf-8?B?NEdQdGdmbTU5ai8wbzlqTEdDb3QwbHg1VjdnSW5NaHZoYkczWWVLNTBxUzNG?= =?utf-8?B?YTVGODZhQXNaRVZ4dno2eU5lTVVaQmN0NnFmUmk4QTV0Sk9PTWgxS09zVGhX?= =?utf-8?B?L1BWYVVNTUlCeGFJQlZLYVUyWkJSeE9QMm81enB4VVY3S2tucG9lRzcxVGYx?= =?utf-8?B?bld5ZFc5aVUwak0zRHhBcnZqdUVPSXhCWGd4TzJYTitTWWdrT3REeGYxTXcw?= =?utf-8?B?SVl4ZVlsQXJvTUxMRlc2ZGlYejVKL0UybXhIUmpxQ1orU2tNTnFraHExVkxC?= =?utf-8?B?RzA0U1Zwb1YxV1ozdkRiVDg5VGpVRURreXZxRHFUUk4vRWtJbyt1M0RVWEdG?= =?utf-8?B?VUppZkd6S1FEejhBSjZ6T0tyd050OXozcUwyQ2huMzN6ZVk1Nm1QWWdjQnlI?= =?utf-8?B?WmhEQTB6OG05dFppWlhOdmhsSjlyZC9rc2J4RU5vU1k4eDFlQXVJczVSWGl4?= =?utf-8?B?K2lUY1llZ3duSlJmeUEyNU81RVZ5U3ByTEYyYWxpQjNRU2RiK2IyemhkSEMv?= =?utf-8?B?aGN4TW1aaGY5MTgwaW5ZVTFseEtIYTZPU0w3M0lkTVVDdkI5d215dm1hV2hK?= =?utf-8?B?Qm1abmt2ckZnajQzMUpENXN3YnlORTQxRnlKVCsxUGFHY0F1b3BHYkxKZWhX?= =?utf-8?B?eEtmTDVZcUFELzlVR2l4bjlOdGFHOEdiNTMvNGw5eGxYbDQyR0JtSVNwbi9p?= =?utf-8?B?eVJpWGppU1ZCT3JocDdJcEFoM0dOSEkxS0dQdUlvNEIyaUF3SW1PY09hamFI?= =?utf-8?B?RXRrZlBWMm1sTkJIbjJMai90bFRHRWMzcjI4TTdNMGpKK3puY21BcnFaajBj?= =?utf-8?B?MUFPVGhhUjRGQjNxMEVtdVo5RTA0elhDdnZrWFJjeHMvb3Rtb2dMdmVPWVpK?= =?utf-8?B?N1FRb012WVBsRENSSzdibVFBTlVTVjNIY3dYWFR3RXYwZWFDNjIzMmJ0WmRi?= =?utf-8?B?d2MyY3pvSGhTTE5ZR00yaG1Wdm11bnVMc3pVWU8xUFRydkZ5cVM5WVlsR1Iz?= =?utf-8?B?cWFyMHc1VDJFVm9zRURBdysvVDR2bEhWZnRpNWFyamZFQ2k1QWcxdVVaU0R0?= =?utf-8?B?cWhqNlQ0REx5Ui9WaXlEK2Npckk0V214WlBMcXhPR3BsUVNIS1R6TnJzYUlC?= =?utf-8?B?QVBuQkViaXlRNFNWNUNFdzlERjkzQ0lJVit0aFBxYlluOC9YTndqUlhkV0FN?= =?utf-8?B?TVovVWZWaU1nb1FkY0tQa1FJVERpZjdiZ1hoc1NRSFdtd3NzTmkyck5WZkxn?= =?utf-8?B?Zi8rUkc0d0crWUNFTDlKUFFRNHBkSCtUUTJIZVp2M0pqamFGM3h0N1JTV3ZN?= =?utf-8?B?ak5aWkhNOFloamlvK3FIYnhQWmhVMnNGRVgxZERhUGpDOVo0K3UwTThPZDdl?= =?utf-8?B?ZlZ6SXpoQTQwdlJTM1orTGYvWEJTQ29RU1FYakxjUXBhd1lJOTY0Qkk3UDdF?= =?utf-8?B?dVp6N3VUdkV6dy9uNkQ2OUwrcGFETkg0d1ZJU3htcEszRTFXendTWEI2SUZI?= =?utf-8?B?a1E9PQ==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["TYCPR01MB5870.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["fe20722a-a484-4e09-c9d7-08da661e6b30"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["FWGK6LxJahiV0LJA5NgJeMGpyOo+iK3E116MOSnEcPSdQtCjvEl9Bo9bCMJ1x2HfzRk1T+V96K0RhT03Ar2KI/sn7wJiNfGsZ0sy9NRtVXg="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["fe20722a-a484-4e09-c9d7-08da661e6b30"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 04:56:45.9289 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["OS3PR01MB9499"]}	["<PR3PR83MB04768E2FF04818EEB2179949F7A69@PR3PR83MB0476.EURPRD83.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 05:18:09+00	dgrowleyml@gmail.com	Re: POC: GROUP BY optimization	<CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_=ftgS79KeAZ92tnHKQ@mail.gmail.com>	[{"Name": "Tomas Vondra", "Address": "tomas.vondra@enterprisedb.com"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "Andrey V. Lepikhov", "Address": "a.lepikhov@postgrespro.ru"}, {"Name": "Teodor Sigaev", "Address": "teodor@sigaev.ru"}, {"Name": "Tomas Vondra", "Address": "tomas.vondra@2ndquadrant.com"}, {"Name": "PostgreSQL Developers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	130	9124	[]		On Thu, 31 Mar 2022 at 12:19, Tomas Vondra\r\n<tomas.vondra@enterprisedb.com> wrote:\r\n> Pushed, after going through the patch once more, running check-world\r\n> under valgrind, and updating the commit message.\r\n\r\nI'm still working in this area and I noticed that db0d67db2 updated\r\nsome regression tests in partition_aggregate.out without any care as\r\nto what the test was testing.\r\n\r\nThe comment above the test reads:\r\n\r\n-- Without ORDER BY clause, to test Gather at top-most path\r\n\r\nand you've changed the expected plan from being a parallel plan with a\r\nGather to being a serial plan. So it looks like the test might have\r\nbecome useless.\r\n\r\nI see that the original plan appears to come back with some\r\nadjustments to parallel_setup_cost and parallel_tuple_cost. It seems a\r\nbit strange to me that the changes with this patch would cause a\r\nchange of plan for this. There is only 1 GROUP BY column in the query\r\nin question. There's no rearrangement to do with a single column GROUP\r\nBY.\r\n\r\nDavid\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, \\"Andrey V. Lepikhov\\" <a.lepikhov@postgrespro.ru>, Teodor Sigaev <teodor@sigaev.ru>, Tomas Vondra <tomas.vondra@2ndquadrant.com>, PostgreSQL Developers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tomas Vondra <tomas.vondra@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 17:18:09 +1200"], "From": ["David Rowley <dgrowleyml@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: POC: GROUP BY optimization"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657862316; cv=none; d=google.com; s=arc-20160816; b=ScmvK6SoVGQjYjEguPC+23d4O2MEvCa9h6qt6DTho3G6v8Ivt+dAwe+li5OrKdZ6Qw WnWWssEOAkcZm6NOol/g/9QF4agXrZ0KmpyaArAIUs+5Jcfgpqhbtp+9MpI5iUG3kn1I dsKmiuD5lko3ZWplCeGGoN6BZcf1qAA9LR3Nxpxrb04NmtEDX60JYqSt2Zgv5KVTYuNt 78zxVyLlZImSfgicVwPcs/LjOBetihaIfqJzx5EW6BXj5asYIhlMLvLTk+UNjz76pZya kke7tIU3rzChGC2XZBXuJNrf+axC2RTD/xAhPb7CXUyfWtJncKXL5mf070xRqFVm7LCm NpiQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp52277jai; Thu, 14 Jul 2022 22:18:36 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i9-20020a1c3b09000000b003a2fede1527si5633097wma.75.2022.07.14.22.18.36 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 22:18:36 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411083@lists.postgresql.org>) id 1oCDil-0006C6-RI for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 05:18:35 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oCDig-0004Py-Uc for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 05:18:31 +0000", "from mail-oa1-x36.google.com ([2001:4860:4864:20::36]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <dgrowleyml@gmail.com>) id 1oCDie-0003Jd-Fs for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 05:18:30 +0000", "by mail-oa1-x36.google.com with SMTP id 586e51a60fabf-10bffc214ffso5090788fac.1 for <pgsql-hackers@lists.postgresql.org>; Thu, 14 Jul 2022 22:18:27 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_=ftgS79KeAZ92tnHKQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CA+q6zcVRrd-z4YZ4M43ccst7aGL9==w5r1fionRWhP9ot6mybQ@mail.gmail.com> <CALT9ZEFwfCQAzUVfUxak=fzhgwez3jn=5XcpsU9HbKQ_VjrZ-A@mail.gmail.com> <22c44f98-bfa8-8630-62b5-5155e11eb284@enterprisedb.com> <CALtqXTe4rKXHXxNNGVy0wHVwGYYJpy2QNPTN29qq+ErBJJakrA@mail.gmail.com> <b1d468ba-2961-044c-deab-817b9a900e9c@enterprisedb.com> <ba2eccf2-d623-c12c-f7c2-a58ac4917c83@enterprisedb.com> <006667af-fc50-0627-4be7-5d9cf665219f@enterprisedb.com> <dc933c66-41b9-8907-327e-f6361a690654@postgrespro.ru> <4ee5b15c-1ce0-59c7-8d4a-a1fd68ee0d12@postgrespro.ru> <721b3ff9-f214-f5d4-86c7-bae515bbec18@enterprisedb.com> <7bea462e-8c3e-0f8c-c7d5-f4daa12f3baf@postgrespro.ru> <9af89543-3d17-4c98-59de-1daa5bceeb06@enterprisedb.com> <9408e450-60c6-6fbc-d5c4-467bb0abfe67@postgrespro.ru> <44472925-f6c6-e8de-6f72-0451458532c4@enterprisedb.com> <CALNJ-vQp3WNV-kKuGsjSOhjRfdECA1Dbxa-vjAgOmQ4f4Qaw-Q@mail.gmail.com> <7a80a207-5e8e-b80c-476c-2d290b0526e9@enterprisedb.com> <65941e87-86c1-c09c-8ad5-8e102aebe8ee@enterprisedb.com>"], "X-Received": ["by 2002:a05:6000:81e:b0:21d:8811:777b with SMTP id bt30-20020a056000081e00b0021d8811777bmr11287741wrb.647.1657862316188; Thu, 14 Jul 2022 22:18:36 -0700 (PDT)", "by 2002:a05:6870:210b:b0:10b:ed11:4e2d with SMTP id f11-20020a056870210b00b0010bed114e2dmr6641083oae.265.1657862306326; Thu, 14 Jul 2022 22:18:26 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_%3DftgS79KeAZ92tnHKQ%40mail.gmail.com>"], "In-Reply-To": ["<65941e87-86c1-c09c-8ad5-8e102aebe8ee@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411083@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411083@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=WMX1KEV/4nKswZ4/KZO2F2j3+IpjGwZ1uxe03XBUATU=; b=qsXZK6OW6NW+zxzXMgFX3jfMu2U8VkROVRmIm+CdGIQIEvS46Rhw60TN96mbqOndX8 KiSYhmNd2mKI/Ia/zVnKcEGnxb9BTusrWFy+MNgpM7y88IRtRzZDy85ZjM2ZW1gPTLeN eYJGmJUPUXf6Zi6arkvUaeMgsn1yymGczer3hg/RVsMGSolrOkUqqRegWXAz7vMb1uH/ qemeFMYBYZ+bgRDG9W7le6RG4hX8TuXb4JCsl8SdF8VgTQ33nPgZtcjf0RsP57yjQ2wm UlTgORwwulFnzTIUwBeP4Ra7Rce9Gcf8ZRU2EgHm5+JRPHJGUkOEVHMKUhVVLchzVPL0 JDeg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9/7Tg7W7dhKkWHHUVWzTwDtxv8UVf1lEfeYEv1QvR1stV9pKZc 0tDFXvSHD5RNddv1gtNIChRZ29FmrYPmfJwO4UQJ2fcMhyg="], "X-Google-Smtp-Source": ["AGRyM1shoe+GZkVEhG7q1cuvCfpN1H80dxK21xCq+TjcdQJMJi8m1oCHlVT7OUVvMAFqSOS+5FP2"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=WMX1KEV/4nKswZ4/KZO2F2j3+IpjGwZ1uxe03XBUATU=; b=eaYb31DWA6yvzwhnAaT44/Z98d6dALNeRVxKo56o4pqrck8kNUiaDzejwzwUdwHo4/ 3RitW/usfMjn3tV3sj3KjjrcpBPmcOgGXfCVdf7wl8qsuvo8t+yjLIsGmXsZuIPPPtle +B9DN8My7PXoms4omC6q/yg6OZmzRzI0RVvKPJIlHdM7iYU4C/UZV7kouVMeamdgQWrP aKyIZZSiOPMz00zD2p05YuRSTpHG8kRZbLpA0bUMuy5rmUWg5fsVVy9qKbj/PlUTj55h AjnKPOO/Yn0qFkSTGTuBYcnBv/2VcnU187g8b7dQJGx3ST21H6s5uiEc7ro79AZ7qvCO u4Mg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qsXZK6OW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411083@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411083@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=WMX1KEV/4nKswZ4/KZO2F2j3+IpjGwZ1uxe03XBUATU=; b=PtTnnSASXY4nMMEmIlenreEEPvIdn62W6OKA72HT2bx3RtlR+TDfLKge/r8aOLpW9a mp8JvDC/OmeBGwEHGBzm9tTq732ZPkQLhHWKjNGdq7/zhlHOlLyoFb0JoqHbh/dwcH+R bqSw9AAJjj/IqJDSgnQhtaqt2C+2hoWOWGU3nFuVs++OCxMpCZGokPQ0i5+QkJW/bq/g YtGuZMZqjI6i9B8xXBLPXQn7HmZ/VpAJ234x39tqvZ32jqjezLca3Fer1Ybssl+rvxfT 65plzysgi0SZTY0jvtjssWTeT8AL+vJ1CNk/BfQcmkjQBAsEGw+G2/IdhHprw9qygprY 8Orw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qsXZK6OW; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411083@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411083@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<65941e87-86c1-c09c-8ad5-8e102aebe8ee@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 06:32:10+00	shiy.fnst@fujitsu.com	RE: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<OSZPR01MB63106E9CE179D80F46CB3154FD8B9@OSZPR01MB6310.jpnprd01.prod.outlook.com>	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}, {"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	133	18553	[]		On Mon, Jul 11, 2022 9:54 PM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> \r\n> I've attached an updated patch, please review it.\r\n> \r\n\r\nThanks for your patch. Here are some comments for the REL14-v1 patch.\r\n\r\n1.\r\n+\t\tSize\t\tsz = sizeof(TransactionId) * nxacts;;\r\n\r\nThere is a redundant semicolon at the end.\r\n\r\n2.\r\n+\tworkspace = MemoryContextAlloc(rb->context, rb->n_initial_running_xacts);\r\n\r\nShould it be:\r\n+\tworkspace = MemoryContextAlloc(rb->context, sizeof(TransactionId) * rb->n_initial_running_xacts);\r\n\r\n3.\r\n+\t/* bound check if there is at least one transaction to be removed */\r\n+\tif (NormalTransactionIdPrecedes(rb->initial_running_xacts[0],\r\n+\t\t\t\t\t\t\t\t\trunning->oldestRunningXid))\r\n+\t\treturn;\r\n+\r\n\r\nHere, I think it should return if rb->initial_running_xacts[0] is older than\r\noldestRunningXid, right? Should it be changed to:\r\n\r\n+\tif (!NormalTransactionIdPrecedes(rb->initial_running_xacts[0],\r\n+\t\t\t\t\t\t\t\t\trunning->oldestRunningXid))\r\n+\t\treturn;\r\n\r\n4.\r\n+\tif ((parsed->xinfo & XACT_XINFO_HAS_INVALS) != 0)\r\n\r\nMaybe we can change it like the following, to be consistent with other places in\r\nthis file. It's also fine if you don't change it.\r\n\r\n+\tif (parsed->xinfo & XACT_XINFO_HAS_INVALS)\r\n\r\n\r\nRegards,\r\nShi yu\r\n	[]	\N	["\\\\Seen"]	[{"Name": "shiy.fnst@fujitsu.com", "Address": "shiy.fnst@fujitsu.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["Masahiko Sawada <sawada.mshk@gmail.com>, Amit Kapila <amit.kapila16@gmail.com>"], "Date": ["Fri, 15 Jul 2022 06:32:10 +0000"], "From": ["\\"shiy.fnst@fujitsu.com\\" <shiy.fnst@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657866747; cv=pass; d=google.com; s=arc-20160816; b=1C4DcqnzXbXQFlG7JiCEaEMriNB1ipq9bPp5XHwv0L4KtJ6SDsSZhJeBNmQHxpSxW8 3smBtMqRHN7DBYs15+/wdIY+X4p55Q1D8Yhw91OB5XvoEyZxxJbcPpDMS2dk+weL/O2E mf9f+JOmulmn65YeCR4So6oxTRiAJGJlc7S8xv6ULCzLJlak1oBjYgd95+coNXbppPTn 7ViQWXE/lsHfsLXM79k0gOmTHZJFmBKldY9XptKQqFLwwmZ2FigBqa0mTp/Ixl2+P3ny 5PZSlNJcbH7Oi8tixcRv7hLhGz+1KdgPMHrTW7BWh6KtgTGmvDHrFA86WuhB8w1NRJFK 2MAQ==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=XzyffOKk8ckV8M9+EK2/ZeK4VjUTT/3WtH8tRwS6iYTI9ZAEFD8M9R/DCQ0Vcn3L97Jx0/kKg3/qJ5JK50QOi787/BICmdkaZh2bDFKKG1+9vU09Dqt54X43AAFS7R+u4lmBEBjoPZbxp07sxzaM5ZzjzQlvCibjQZMXsNOM76XikEq/9FjzJhGKVgDW2asB5lYasmHcj44SWCLB5Wh70goCgbTSGZGPKzRF5dz6uHoJ4H/HpE1sQHw45cbSjAimR77MvBIJ1o4tyLQMV2T14Q0LUXXOoMdYEyZ+Kqlb6wWlsQZs1DPCdm1c5WlwmzgRiUE3phjbtMI2APDYRmgjwQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp61583jai; Thu, 14 Jul 2022 23:32:27 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e13-20020adf9bcd000000b00217c3049f96si3983015wrc.67.2022.07.14.23.32.27 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 23:32:27 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411088@lists.postgresql.org>) id 1oCEsF-0006Kb-2C for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 06:32:27 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <shiy.fnst@fujitsu.com>) id 1oCEsA-0004d7-9x for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:32:22 +0000", "from esa20.fujitsucc.c3s2.iphmx.com ([216.71.158.65]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <shiy.fnst@fujitsu.com>) id 1oCEs4-00010G-RJ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:32:20 +0000", "from mail-os0jpn01lp2104.outbound.protection.outlook.com (HELO JPN01-OS0-obe.outbound.protection.outlook.com) ([104.47.23.104]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 15:32:13 +0900", "from OSZPR01MB6310.jpnprd01.prod.outlook.com (2603:1096:604:f7::9) by TY2PR01MB1980.jpnprd01.prod.outlook.com (2603:1096:404:11::17) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5417.26; Fri, 15 Jul 2022 06:32:10 +0000", "from OSZPR01MB6310.jpnprd01.prod.outlook.com ([fe80::4fa:7ee6:99ad:f385]) by OSZPR01MB6310.jpnprd01.prod.outlook.com ([fe80::4fa:7ee6:99ad:f385%6]) with mapi id 15.20.5438.015; Fri, 15 Jul 2022 06:32:10 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<OSZPR01MB63106E9CE179D80F46CB3154FD8B9@OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAD21AoBeMVfY6dvg5J8XmSHGbc3+yTA8k_GVRzwZR24zc4TfSw@mail.gmail.com> <CAA4eK1Jg+u=ouXbC5EVLVnQ4sUhrR1P+p0LQSjPFmMP4jNYmuw@mail.gmail.com> <CAD21AoCEF6FAvRRP6LKzq2-2oVvpdQbmZDwzRAdseA9AA2mE-Q@mail.gmail.com>"], "X-Received": ["by 2002:a7b:c31a:0:b0:39c:4783:385e with SMTP id k26-20020a7bc31a000000b0039c4783385emr18540634wmj.185.1657866747453; Thu, 14 Jul 2022 23:32:27 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/OSZPR01MB63106E9CE179D80F46CB3154FD8B9%40OSZPR01MB6310.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<CAD21AoCEF6FAvRRP6LKzq2-2oVvpdQbmZDwzRAdseA9AA2mE-Q@mail.gmail.com>"], "Msip_labels": ["=?utf-8?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2Uw?= =?utf-8?B?NTBfQWN0aW9uSWQ9MTBjYjdhM2EtOWVkMy00MGM3LThhMTUtNDdlODBiODIw?= =?utf-8?B?NzdhO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRm?= =?utf-8?B?ZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5?= =?utf-8?B?LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxlZD10cnVlO01TSVBfTGFi?= =?utf-8?B?ZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX01ldGhv?= =?utf-8?B?ZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRk?= =?utf-8?B?LTNiMGY0ZmVjZTA1MF9OYW1lPUZVSklUU1UtUkVTVFJJQ1RFRO+/ou++gA==?= =?utf-8?B?776LO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQtM2IwZjRm?= =?utf-8?B?ZWNlMDUwX1NldERhdGU9MjAyMi0wNy0xNVQwNjoyMzozM1o7TVNJUF9MYWJl?= =?utf-8?B?bF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfU2l0ZUlk?= =?utf-8?Q?=3Da19f121d-81e1-4858-a9d8-736e267fd4c7;?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411088@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"utf-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411088@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHXGbjuwj9mOYhXQ0usEsUaX8Hh96qEyXkAgNWph4CAWAfvAIAVtt8AgAHNMoCABJ+9gIFdIowAgALHvoCAABKGgIABXKUAgAAvlICAAW79gIAIBgQAgDd24ICAAnM0AIAAQTCAgAhf8YCABctjsA=="], "Thread-Topic": ["[BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60400095\\"", "E=Sophos;i=\\"5.92,273,1650898800\\"; d=\\"scan'208\\";a=\\"60400095\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657866737; x=1689402737; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=06gE7DK5vv0VvrXbd+O0gBSrc5m4hiRbE4teK4U32IE=; b=vLCdmHs/A0RoZwSjF4dO8cwF+18CVL7zsHa6gZTa4r+a6IYqd4ItddRy 6+tAl7Z5hXcmJE4ApzQaWU4+oNSvnzcRdUZBEM7rNRKGgbFjueXtmFvoB zXdH4T7m7YVBqhCvBM7r2oDG+pXp/0O8jYBBjOQSF/1xu23AgkCci7Pkz on8uDBIIlgOqbTszdTBF8UZQD3LwXoGvQWf1M8KRYtTS3KXHl6HsOcdFS lgULXkLqyqt8GlVt6Kla7lA6ATwlDwW4YtNosGa5cyJkshmrbZ8aAM9Bk NmXffa2OTh3+sxgHgSI7miv4C44kumM7i21m5A9xrQfQinSVevLiVm4y9 A==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=06gE7DK5vv0VvrXbd+O0gBSrc5m4hiRbE4teK4U32IE=; b=XMy+8j0DAl65bXrEm2OOXjfnvWnIcOGOGy15tWTyDj4l9k8LFirUCkYNrPdzarcWGNYHBIrNg5bkp1TjBQ/4UaQicUamhVMdkiPqF80ltnKvNNqyagIxE/ICQ1fRXOc5wsSJG/N62oY0PbNmq8P8ZXi0MaCA4LDReSisSY/gDBk="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["zh-CN"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uSEVCBX2AL9xhHZgzDrbHObPjd9kAMDNKSZsQHJ8mko9fT5sE16C9BQzI/eh+pZ0iA1OV9"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=06gE7DK5vv0VvrXbd+O0gBSrc5m4hiRbE4teK4U32IE=; b=N1q5cOylVvgQd7vr4LdVkt7vxtxDcB3nGRI39bWoxI+/gR0wI6DTDL19sDdewdfCCg 8ogexEDYmG2Puhzn2YP6OX3rBVksEJ7mc48qrnuI6eFa/p5bFdlriqodNGeuUgL4ZLGP 5mx/ApPENgK8/vQVMqE13TiqCYApfb/ra4FLfuVm0GIh03yXAViDwHGMKdQ/u79ZPwLJ jlMWF/xYza5e44uQBMvjGnTE2lQMRPdFxgPHESGPaATdPUyZb8fkSLM2BN0IDB53ea+j ZhhEuFyJq3e+sQvq9KhYh1apprflT9quj1FOgLd41PTmJZv9QPu6GKEwiaxulVMShJqE XCzw==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=06gE7DK5vv0VvrXbd+O0gBSrc5m4hiRbE4teK4U32IE=; b=CcNzz/mFjUOnA6owZG8tLYKo9L9+Q9317gfapfxHShzGjvWexsiPRjMHIGUynxrwWlw3mRdr4WZNy08foVf6GPX6uhSNbpVPD0Gl5FjJHSIWGUCg6ygwYk+hOhpcOj3urRnBjCa+1ma0rsOclA3iOq0/Qg8OdIyrbJyVYRBLx8/PWT4hwPQnkt2+IidEMMgcivLJMsJEMxxzA5G7XAoEiAzFVGreCWT0aw2UuzT3OEQkEiZgbI/JyehnJD1xOJxg9eQ7LXJQsE9OfNj8ZOownWwjSNY3bglzYfNqHbc4IWAxcw5H77E28rH3eOXAX8pHEvHwLQOU8AQZNQLPdd2Lpw=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=\\"vLCdmHs/\\"; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=XMy+8j0D; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411088@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411088@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["base64"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=\\"vLCdmHs/\\"; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=XMy+8j0D; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411088@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411088@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["TY2PR01MB1980:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:OSZPR01MB6310.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(136003)(346002)(376002)(39860400002)(366004)(396003)(26005)(64756008)(71200400001)(7696005)(85182001)(4326008)(110136005)(8936002)(55016003)(54906003)(6506007)(52536014)(41300700001)(33656002)(38100700002)(76116006)(66556008)(2906002)(9686003)(38070700005)(53546011)(66446008)(66476007)(83380400001)(316002)(186003)(8676002)(5660300002)(66946007)(82960400001)(478600001)(122000001)(86362001);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["irrbyorsOo0AhVLOuxhVbdCjatkNSxkgkXXxtSCIxuBaoFZdgoWJa3AUVfGuwuxKbsOBQ7LZchbDIfZE90biBGIkHx4hPWVorHFJL1YPTSsuxZ/HtwZ5KMZwZuOAV/PFqK5Il9HhISRFaHUOXsGW+wx5p/kjZ5a12IeMFza7q9i/3CKRx/2CMgfcw0DR5d2cl5uoDuzOG6LijZhJCz5UR0LN8lgxZ9DY6rtQMcNEFmLme3PYSUvQtHgGJCBaLF9TxjhvipcxE45fSOxmUMtrgqvuMhqBnyASLD7V4P9v84+UXelwclXQnkKluwg48wch6fFIqTQLORJeg5qi1u6IArcqoN+wvZsiMw0+IIwExMIDP5QNsGsn0Joty307kyy93xfVnw1PGzGSUE+iX0Yc1LseFxCnjyhObLikoAgVwdvO2V1aX/Pc5SkL2tyP+IvMzBZYsyWrGyUWRSNi6+kXjkkEGVd/j5nRgKSWZPYd5fB11RcUqFg0hk6dqPwipKPY4w88uoYIRkyJhyk29sw71hg1OkvpQ2G46LJ/o6+iaWviErfSEvfxzLTYGn2HStAr/qer2gt44CfXEOZQuBRgaT9Y2b/au3/9j78A9nvQs0jzJnKmmBxi9LuCrRoQHK8JI4waAlCZOIaBxT4tARwPzSLLIYs3Gg6fyazEPYmr46AsBNV0uEu4rlQdW/9XxO5nLPhoJjcoc6Vh5b6DCyZ5MYJ2i2lRdnzr9fIvepDFVHc88u1bGcR+wOyV3m+KafcEeweOUuu/BWBwOuQUWiHO9uaWd6yl7mcP3URDUHRJQRHPGWLQ2Sa1DPBpRjTh5HVD"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?utf-8?B?SFM1cXVvaHBOWWFDMldkS0FRL3FhdnBJeGFmVnhML0pKeXVqclhIYVg2a3Bm?= =?utf-8?B?TlBDN0VTTlZlbkhWWVdvOGNJcTZFMDJKVVh3SG1ub1lsQ1NVZzM1TW0vc05h?= =?utf-8?B?WnNMUS9Vcm1mcW5ENFJIZFV5NG8zSFJnN08ybXByLy84R0lTbXRseHJpYjNE?= =?utf-8?B?eFBnbW04a1lpTDdDUnpXcFdCY3RkVnI2eHM3SUxYNzdPTmwvK0duaDltQmJI?= =?utf-8?B?MWovRmk1RHFOSERLcWpjbWI4Uy9SWGZ2T1cxTGJVLytKTDJCVzZrV1pyZXZo?= =?utf-8?B?T3dXQnU1cmRYOVR4M2h4NVQxUEozZXFqSFM5MmlIQ1o4WGgrQjZ3R0FKcndG?= =?utf-8?B?b2VMZ200QW82cm1MWTFkUUV2elRhLzNaOHV4TjZlRzhOQStQdDhKYzNmcGlP?= =?utf-8?B?K1RkVURaUm9iTXl3eWx6R0o0NHh5amdIdnhpSUV3ZGdKNDNOVVBaOWpxbG92?= =?utf-8?B?YzVFdjRkVnBERHppaUFJUUFxbGFSZXltNmZhOWR6UGdhQ2kySFZvUnc0cXlG?= =?utf-8?B?d0ZBQkdoY3lYaW0walAyZ3F4UUU2RVVpT1djaWlsaXNnMnlyK3AvSUxoZkNG?= =?utf-8?B?cGl2QXNCbzMwNXNTeitKYjBSRzZMRUdhV0JtVjV6Vks4aVkzZzhaeGtxZFlo?= =?utf-8?B?L0FLRllHYmh1dFpYWEczY2xsTFUzZERrdmlSNnIyWXVIWkkyMXhaNy9pTE01?= =?utf-8?B?eUZlU25YeGVBc2lBc0ZZWlhBbkNndUgwOXBlM1hpRlVHNDNaMzIyUk16ZTdD?= =?utf-8?B?VFZHbXhWeFFHcFNXb0NZNm5maTVteE5EVkdLYVB2Z1lXbFdkSE9YOEpCeUYw?= =?utf-8?B?MDExeCtzRkl5Wk1CRWFha3FQRG94VzdBOUhObjFhWHh2aTRQOUcvVnFnc08y?= =?utf-8?B?WXpZWUozeU9BN05KZXYvWGxsWlNzaGdXSHZKK3lGWlVlNWcyb0VaNk1nZFVZ?= =?utf-8?B?ajl4Q1hmRnEyL2VjcTZSV0pHNUg3d1Brdzc5RFkrSjE1bHoxMEEyalpWK3FS?= =?utf-8?B?TUxNWVl6TmN1VHAvbXlzZnVtbm9qcU1BRGxKWk1iMlBUR2YzK1ZMcE1hQ3d4?= =?utf-8?B?UHczd1VZZStqd3hIMnA4SVRkYmFzTW1MS0ErYXEra3JEOHIyN2k2WW05T3hy?= =?utf-8?B?VHdLeExxZElqYkl2UHNBdENzTVd4Q1VoTFpkQ3ErYkhOVkd5WEZhOVNSeUFq?= =?utf-8?B?b0h5QW9teUNoTjhycC9sQUpCZk5Zc1VqeEtQV1hvRzJGT29SOUg0VUVLblFD?= =?utf-8?B?KzFsRzhYWWRTNjJhREdPRUVKYXpQUlFUYmFHZ3VFcFNYaXN5TlhJRjNvbTFZ?= =?utf-8?B?WG5GQ3M1Rk9MUUFqd1dzZnhib2sycEJCVnhTdkpjQ2MwUTQxQjFZdUZ3V3hz?= =?utf-8?B?YmNDbTFBZHZCalhWTFpMMEY2Sk1QZXhTNG9scEhPYWtSYXpSM0NqSWVlMXhZ?= =?utf-8?B?NnAwN3o4WkpQM3VoTzZDbDVIR0hKK3Q0TmJ5TnlPMW9Cbm1EVzB4UU0yclJV?= =?utf-8?B?cVBqZ0VrZjQwTy9WbWsydUJaSnI3Yk5MQldDNkl2cDFtTU5oNnoyUmN6Yng0?= =?utf-8?B?WTVsUTVzRFc1TkRWUmwvSG5Fa1JqQWljVEkxc3pMc1d6cGZYeDJ5cG1XTUow?= =?utf-8?B?S3IwZEJUM1orVHZEMi9JZGhUMjMxQUptbDVSQXY3QzJ1QUN1MVcydG10WjV0?= =?utf-8?B?LytiN3p5aDkwNkdsd3FMeVlKZkpzU2o5STRwNU1Ma0plOVAvcHdxUUtZOVRy?= =?utf-8?B?QzE4L2p2M2VtQkxXMXFrb01FVUthSmNSRU92bFU3b1ZsYndNSGlDNDJwUjNh?= =?utf-8?B?eDZndGdTaXF3YStBUll6cGIyRFpweHJJVXZ2bktKaG95RzRQUkt4Y05qbDlh?= =?utf-8?B?czZ4SFJSbThiQys1YVlrbjI4ZWl0UnpudDExOGdRTzBCY3BuWnQrODhDTmFQ?= =?utf-8?B?L2hJenRSV1JQY2NXclVnVlJUNU5JUyttM3BvWUVESXJ5YUVKeGVINHhjN1JP?= =?utf-8?B?ZzZ5NkxuSWY0RUhiZjJVUTdFOFhIM29FT1NqN29adW8vcHcvR2NJNTl6Sjgx?= =?utf-8?B?eHp1cW52SW9USFltcW1MYjJNTmJCMXhXTnJHNi9HcVgrNHV6RjMvMXpqeHkz?= =?utf-8?Q?USxqmLXdQ8ofIHr5KqigY2Dyp?="], "X-Ms-Exchange-Crosstenant-Authsource": ["OSZPR01MB6310.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["1142bc91-d0d8-46c1-775f-08da662bbf16"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["CCiYWg5Hlua/lkt2b7RvlHNmiX2PQVUf75aVVIKzpi/GvgyQMRfx8CYGXIwE8GvTMFrIqb3upCH9kdF4flx/4Q=="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["1142bc91-d0d8-46c1-775f-08da662bbf16"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 06:32:10.1426 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["TY2PR01MB1980"]}	["<CAD21AoCEF6FAvRRP6LKzq2-2oVvpdQbmZDwzRAdseA9AA2mE-Q@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 06:08:54+00	houzj.fnst@fujitsu.com	RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger	<OS0PR01MB5716D110FDDBD93DFFBFFD58948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	131	17660	[]		On Friday, July 15, 2022 11:41 AM Michael Paquier <michael@paquier.xyz> wrote:\r\n\r\nHi,\r\n> \r\n> On Fri, Jul 15, 2022 at 03:21:30AM +0000, kuroda.hayato@fujitsu.com wrote:\r\n> > Sounds good. I grepped ATExecXXX() functions called in ATExecCmd(),\r\n> > and I confirmed that all returned values have been collected except them.\r\n> >\r\n> > While checking test code test about EVENT TRIGGER, I found there were\r\n> > no tests related with partitions in that.\r\n> > How about adding them?\r\n> \r\n> Agreed.  It would be good to track down what changes once those\r\n> ObjectAddresses are collected.\r\n\r\nThanks for having a look. It was a bit difficult to add a test for this.\r\nBecause we currently don't have a user function which can return these\r\ncollected ObjectAddresses for ALTER TABLE. And It seems we don't have tests for\r\nalready collected ObjectAddresses as well :(\r\n\r\nThe collected ObjectAddresses is in\r\n"currentEventTriggerState->currentCommand->d.alterTable.subcmds.address" while\r\nthe public function pg_event_trigger_ddl_commands doesn't return these\r\ninformation. It can only be used in user defined event trigger function (C\r\ncode).\r\n\r\nIf we want to add some tests for both already existed and newly added\r\nObjectAddresses, we might need to add some test codes in test_ddl_deparse.c.\r\nWhat do you think ?\r\n\r\nBest regards,\r\nHou zhijie\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Michael Paquier <michael@paquier.xyz>, \\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 06:08:54 +0000"], "From": ["\\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657865354; cv=pass; d=google.com; s=arc-20160816; b=gAp+INwQLTC+4PodAq6uD89QI21+fm5MXX7lu44J6V+3ITLDcpoD6A3VxAS6lU0pUF LhMN4VdQH+23vj6hAboIRNq8lEgMlEjoqC1kszfWd9s9DGuSkNCnkCdtzKB9s3OQKDKO yf2qPvb42pS8+pfoPZ99vs/Y0i+1WswA/uvLEVwib48NxLZ9miOpfXFzqwGyr49CB6jQ xR1UW9FFb1mIt3ftiK8E98EN3YdxAYLvyo2eAvxWrJTUYf3gIzNC0/OjLXQyVJxWWxve 9HA/BPJpT8L/p8pkX6LrAQbna+P2FUFq9236orWOidf0cgLSAANDqcfCpvHeqsRdFKHm +4Fg==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=hzQ80jHN/yXVci25dzoSnFNlETpnNnp6A5fLHLJWt6EsAO1p8SCU1485klkHM7kVSTrkNIuSNv0FYQI/vtB6+NGdiWUDt8FZzGJIex8qtg9VP7dl2a0elGx28OMSDGD/8GnCF5PMKMRGPkh51+D60VwKtVQOVUOfX5HG1EKHqKMS0vqH75lEcqVX8zVBSlhFqRjLUhisibRHCEJ9Y5PTdYKDAn8/rGSKQn1VbfgMV4OawYPmZqleyaGaRM+DZ8ZKGFONqVTcHFuRqPVumHTwJU/MmSZkJKzyuXzefMOK7KgABq88D4h9nEjjrzD6Zj1LAAp2f5dnFDZZTsF9Im7W8Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp58495jai; Thu, 14 Jul 2022 23:09:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 125-20020a670383000000b003575e8963aasi705011vsd.200.2022.07.14.23.09.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 23:09:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411086@lists.postgresql.org>) id 1oCEVl-0004uQ-OM for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 06:09:13 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <houzj.fnst@fujitsu.com>) id 1oCEVg-0003JB-Q7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:09:09 +0000", "from esa11.fujitsucc.c3s2.iphmx.com ([216.71.156.121]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <houzj.fnst@fujitsu.com>) id 1oCEVd-0000oH-7V for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:09:07 +0000", "from mail-tycjpn01lp2171.outbound.protection.outlook.com (HELO JPN01-TYC-obe.outbound.protection.outlook.com) ([104.47.23.171]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 15:09:01 +0900", "from OS0PR01MB5716.jpnprd01.prod.outlook.com (2603:1096:604:bb::12) by OSBPR01MB4566.jpnprd01.prod.outlook.com (2603:1096:604:73::21) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5417.20; Fri, 15 Jul 2022 06:08:54 +0000", "from OS0PR01MB5716.jpnprd01.prod.outlook.com ([fe80::c943:3fe1:8fba:a589]) by OS0PR01MB5716.jpnprd01.prod.outlook.com ([fe80::c943:3fe1:8fba:a589%2]) with mapi id 15.20.5438.014; Fri, 15 Jul 2022 06:08:54 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<OS0PR01MB5716D110FDDBD93DFFBFFD58948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com> <YtDhz3ub0CFfgJlr@paquier.xyz>"], "X-Received": ["by 2002:a67:b249:0:b0:357:31a6:1767 with SMTP id s9-20020a67b249000000b0035731a61767mr5064345vsh.29.1657865354733; Thu, 14 Jul 2022 23:09:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/OS0PR01MB5716D110FDDBD93DFFBFFD58948B9%40OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<YtDhz3ub0CFfgJlr@paquier.xyz>"], "Msip_labels": ["=?iso-2022-jp?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZl?= =?iso-2022-jp?B?Y2UwNTBfQWN0aW9uSWQ9MGVkZjI2NzctZDNlMC00YjliLWE3ZjAtYjgy?= =?iso-2022-jp?B?MjdjYWU1NWQ5O01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFi?= =?iso-2022-jp?B?NGQtM2IwZjRmZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9h?= =?iso-2022-jp?B?NzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxl?= =?iso-2022-jp?B?ZD10cnVlO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQt?= =?iso-2022-jp?B?M2IwZjRmZWNlMDUwX01ldGhvZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9OYW1lPUZV?= =?iso-2022-jp?B?SklUU1UtUkVTVFJJQ1RFRBskQiJMJT8lUhsoQjtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9TZXREYXRl?= =?iso-2022-jp?B?PTIwMjItMDctMTVUMDU6NTY6NTBaO01TSVBfTGFiZWxfYTcyOTVjYzEt?= =?iso-2022-jp?B?ZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX1NpdGVJZD1hMTlmMTIx?= =?iso-2022-jp?B?ZC04MWUxLTQ4NTgtYTlkOC03MzZlMjY3ZmQ0Yzc7?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411086@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"iso-2022-jp\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411086@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AdiWno0Tur3qHjPYRiC4S1qOSup9qABU5bsAAAD9UIAAAabpgAAEvhGQ"], "Thread-Topic": ["Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60816506\\"", "E=Sophos;i=\\"5.92,273,1650898800\\"; d=\\"scan'208\\";a=\\"60816506\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657865345; x=1689401345; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=8IN3YJ03j1IYT/4Lmhz+AoOa2nE42VbMUGgrYK7GuwU=; b=vC4pPUSQ/w4zbsWIP5OeATnsk1bb9bXmDpwPRphX5S22ODB9JmeU1q6S YLuss2I3XCWUH1RfunOGLFryocbyfAH9QtjirEZl1+YyYGlPOsb6+qEin DwU0ombOASfZgMrlsS1/7jG/bzg7+r/LBIfHlS7Fhoqvlmjp7DhhWq+QW rO+eLePX080NQhGy4XGpRey/BEgd3aVKyrM/7ef8UsGOcXiW2W3b2wTUt J5Xa7eiSTK40locEg1jGG2+Hi+2Ea6tNGiDdoUF027k5wOqp7ptYZdn5f 4+MOXK+iDoH0CpETMmLLNSV9VLl8ARrhcXgPkpUBUv7gliE0ElOHSSoBs A==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=ng6N8oqp3Rw8A9JLsexWniQaKa1aEjWz+QJKHhpPWF8=; b=i1kWogAnzAqliXOYHo5b6auvEGUtTbrsWLNLhgvIixcOtuF+O44kqhhrrXa9BclPIDCZKGbl5VYidZfjbMN5kgPmkQtKQ4KwysaAF23+XV1j+x59D6RItG/EByanKKrdtICfJe8pJ8ZwTRG5fhd9w8ivLm0U3jWvw4ESNLXbtIQ="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uAKmhDFrBpL7hDBY88B4CWTtMO1ckr3tWBwaIp+6EpqtuZVkrq83pW41wTqcg/zK7xOPN0"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=ng6N8oqp3Rw8A9JLsexWniQaKa1aEjWz+QJKHhpPWF8=; b=X0Kg9/PIq7Ho3424QPP9enQh6qOCvkD7tySDFFKs1bijkiCJ/NcqaZKQiYtOTgtJl0 lnjU5qm1SEhEds3J9ldYt/VM1YHPzHncctjOw3WhFPVqg5MdAlIJcIwrD2SMe0CxmRcH WGnEzI31K/eYCgBI40+Iazf5ilbBDk/AQ6fXpv4LW7aLJbXoCEX5sjDMvvq1Re2UI2MW M6msCXbku+M/YQWPknIZHEjukZxs3BQNrsVvd5aRqTBXjglbWD+NMno6/J4zxcw9i+rB nhX4fjaWqZyCRZLs6wpi8cmTWwQLHwIf8SUtV/5/Z47MlHLI5Imc4TiXe2cfHlxREeYv 8Dng==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=ng6N8oqp3Rw8A9JLsexWniQaKa1aEjWz+QJKHhpPWF8=; b=Aqs7N9/xq29ABnBKLyCIrVr2c/Ke6RQy+8BWM9+x+yETuuKChJ8MGeFhey3u4pHQJFsgcEpaLZnwAG/fveIz+QB5giRUbu7xNH+PWH7JxGs+TTHhhxrIitU5rtFiX+j6Hw+akrJ27F6lUfgtr9l5Ly9CDZc+IV9jYlDSFBbKGX1nL15fUdlrWd7lOj2ex4NpHYIZgj0RYpY4OTQ1dblhP4L4XUa++HC2IDlV1JCHK2I9Au0GmK9cjNPYfVqksXp2hxjmB9f32AXfWP6x3HvBG8KTumsTl5vWPJT/RlmxROIggaSHEw1efiPirfyDKr9JA9MnLnsSIdRJWU8YRk0SCg=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=vC4pPUSQ; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=i1kWogAn; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411086@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411086@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=vC4pPUSQ; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=i1kWogAn; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411086@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411086@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["OSBPR01MB4566:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:OS0PR01MB5716.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(136003)(376002)(39860400002)(396003)(366004)(346002)(316002)(7696005)(71200400001)(52536014)(2906002)(55016003)(5660300002)(6506007)(6636002)(33656002)(41300700001)(26005)(85182001)(53546011)(9686003)(38070700005)(110136005)(66476007)(66556008)(8936002)(66946007)(86362001)(76116006)(66446008)(478600001)(8676002)(38100700002)(83380400001)(64756008)(122000001)(186003)(82960400001)(4326008);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["uFaSsX0gxnc92PeYoH12E6Wgd2+uQamYSzepEy6v2HX8iLIcZugIVQPU9wsNr3dRa0sW+TUN/Cj5u2Ra+01cgeLaiVj4kA06kNsgPOfVTpecV1u0jXwC53F2vTbmjfKikSG5NALxyQXWVvP9S27TI31WinRdLnyXv6BHcjQxrOIZVIdfyrmjeQHoJRbUGy4kyhUNTS1xqXkStyMnXqJlDG6f5jCV1yu4IKFaGaW9QGEW2SUK0wx3OCkRNu/yFzusA7u9um6zty/X9qXHcr5equCwbj9dLYXbJz7Nwtrg+0G+xKPlHS6/UsDwzh/kiBFvh7H3bV8QW8GqsHsuSaHAS//dz3jgUgc2nBgAHJ00mKRFVNnUaYyZ/eDv36xQQEbdOmChVb9lovK3+bU2Z+Ip8ieeYrHdT4IPVGignNmz8Tt4uK/c9K5H7/xfCgWgnnGWzlPfgMAq5t3fivHSPYNj2VF1SRrKIcQ0dlbdnARFFH6FWNCfQvT96oKbO/QB+YmJDiQgvKaxg6CzbDI5hKV5j3LWRyWDuyL1JaiOG9V+AhaD0JN68s+CD2iEdoitHAQuSRq+3du4yR4fjN/wvvFNG/JdQv3pliVFHmFqvFi4/1OVlQwYQlPGRkqEBMJ2/8uQmvisBJcWuJE4ezY0cFnTy1M4VpB2eMIVd4zyrfQaJr31MeuFFU2paibwZ0ugW1yJfkT+ujyGuwsGu6YfTxm9QU+SyjZ2PzyUp2I7cTyZ7jqKO3yy1J+RdsIV6mE8e5rbVGyq4Ks7AbFliuqQmzblPj6dNt4JHUixeS+PTsnyHhFu18VvtgNq00qTEza4vM3w"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-2022-jp?B?NU5qNStEVWVxQWVwZVBYeU80cXQzV2NrR05ZSXF2di9xRURWTmg3RlNh?= =?iso-2022-jp?B?cXM5WXJQYmFLZ3doY0pqUDczajFzMWp1NXNyYm10c09OVlhzL1lXSWNK?= =?iso-2022-jp?B?TWdZelorRjE2WHVubjAvSW80cFk1SHBUZHh6VVBZZ0JKODNGR3VSVTB5?= =?iso-2022-jp?B?RjhTR1lJN0ppSGdWVjFwaHJuV3cydExWY3ZkWVYvSCtZdFpGZFlGdzNz?= =?iso-2022-jp?B?dkZyWjZlVnJ2UmVUclQzVjFSbWhiUzhSWHRVb3gycW10YTA0M29rdy9C?= =?iso-2022-jp?B?YkRZZkRhYkt1ekYrQjUzK2ZBeW13OVpiS1BkTjVtaGIwL3lXSXV1S2pD?= =?iso-2022-jp?B?eVVLNDFMeC9sVzAwR2NESkVrV1IyTWx6aTFEMlpaM0xMbGlod3Zvakx5?= =?iso-2022-jp?B?V3VUbTRlYzY4NFdvVGN5cnZEbmN5THIrUkxrbFJEZU9pMGcyMmxacDVK?= =?iso-2022-jp?B?VDgwd1M2ajBwZlFET3k4OVcxclc2WG42OVlMSEhJZ2tJMXljR00zZnJY?= =?iso-2022-jp?B?OVgyQjA1dU9hcC9rbGU2S2RzYXFqMjFBZUs0VGEwR1pnMkQxL25Mclph?= =?iso-2022-jp?B?b01td3RFZ01XeDV1anBMTFhmeEUvUklxRXE4dXN2aS9xYmtBMll5WE1D?= =?iso-2022-jp?B?MEphRnNvTUtsN2xJWXJ3RXJKaWRTM2VlN01pQVFYaWVabW5hbmpWRjhL?= =?iso-2022-jp?B?RUxmZEJKUGxZdXI4cGs2dVBxbDY1ZW5nV1ZSQ2xQYkprSFlzdWlpVDJS?= =?iso-2022-jp?B?bEVQRzkwbFl6M3NiSGNNOWQyL2U2NHdSZnkycGpOUnhKUVJucUpwYk01?= =?iso-2022-jp?B?MmFldHZoby9tOFNjSUw5aXpuVjNyMUhsY0JLOU91bFJyTzVZNlMyM21n?= =?iso-2022-jp?B?ZHdWTVhiZ1pqdlEzMXlUZlEzVHRZMDMyM3dlNWE1cGJtT1BLWE9zcUYw?= =?iso-2022-jp?B?ZnR4aGRXdWlhV1JqU25LRGFlcmtFeVFGbVByUEVSSFZ0dGxqNUMrK21H?= =?iso-2022-jp?B?MXV2KzFFVlc0alYxOS90NWJPWXB1MlFIMkVJY1RnOTY3SWdZVFN2cnVz?= =?iso-2022-jp?B?aUNRWTVjUmZUL0o4YW9YLzZJcUlQdDQ0TitXM21rR0dHOVZ6bFVJVHJ5?= =?iso-2022-jp?B?bXdoRzJCeENZTC9GL0N5VU90TVlGNlVmN05MQ0ZxYXRlaVBvZlVUeHcv?= =?iso-2022-jp?B?ellyemk0QzBGOFllVU5kWEpXVWkvWDlUSTFWZFlUWHJJR3dtZGRkZTd1?= =?iso-2022-jp?B?WGcrYUtHUlB5UjdOdmdXT09idVpkNnlwNGw4ck41OE04MThMMkg0bHpT?= =?iso-2022-jp?B?bUhaSjhUOVA2NUlVR09vc0RXSXNSMjlZSjduWVM0OW9UdEhwM055djhX?= =?iso-2022-jp?B?aXNUMkM1SjhPRkVpMVVrUHJKZGtiMU11Y0t3ejdHVllKMmNvWU9LMXFa?= =?iso-2022-jp?B?eENFa3RXbnFCOW5LTTFkQmNTZ1FJTlF1YlQxTUVUS1N6a3NmdVNuVTNN?= =?iso-2022-jp?B?azZBN2lSVGNlQStaMXU0enB3T0R2QVpHelU3WjJCU0hzeUhSbTRWdm16?= =?iso-2022-jp?B?TGRLQ25KM201VE9RTysyeEs1b2MyTFdnN1hLZlhUN1Y3ZTJSRUNHVENz?= =?iso-2022-jp?B?d3o4a01tN3NFZWJmeGxDT1V3MytFQ0Y1SmttK2FmWVhIa05GdzNTalgy?= =?iso-2022-jp?B?c3lxcW5qcHNoOWJhUi9DNW1EZ0VONldaSDlaNFFUc29MK2V5QXdHbHZx?= =?iso-2022-jp?B?Z2VKUDlLN2J2Qmh6R1I0SlNzeVRKekFhNUhDZUZFUjQ5ODBhTzlhaXJ3?= =?iso-2022-jp?B?SG1ta1VJbEFFUFBheTBZVUFEZjZiY2VzV1FPalZWRVpFMnI0RzZOb2dt?= =?iso-2022-jp?B?VHM3cS9wcFpUK0lObk5pOWJVbitmbnpScFgvY0srbFVTMFp1NXBHMWla?= =?iso-2022-jp?B?MlZGT1QzNGt1SkhpYXZHZ1JnSy8vb2lGWjZjdkxqaEpEaEV4czRvd2xi?= =?iso-2022-jp?B?MXYzaTZaS24xQk9sL0RucXNUbUttb2VVVWIxb2l5bDNRU2xScmxqSDhM?= =?iso-2022-jp?B?Tnk0dGtLK1ZBVm01UHh5K1l6dS9nS0FpcVZyZDRYVmM3TWVHYStyVEpj?= =?iso-2022-jp?B?QmxSYmlKcEdWUFBKeG5oVXprVUpMbXBtOEtNTkdIZGFtdXBONlprM3Rs?= =?iso-2022-jp?B?R3JLM01kdEhyYWcrNWtMVXhFc0tPR2dhdDUvWDVtYkQwTm96ZVlhY2Q0?= =?iso-2022-jp?B?eGl0bkt0VkFzZGJNb1BjZHBudFQzdC9ORmZKU0N3MWRWdkhWaC95anYz?= =?iso-2022-jp?B?WGx1Lw==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["OS0PR01MB5716.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["364973df-594e-4ce6-e4ea-08da66287f68"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["DdHor2MxMVRiv33T6qZGx7TVusdyJg/8BHdbqX4U0qp7T2AQJxpatws1u9J5srI+VfP2HyWzSaj23xOmprC71Q=="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["364973df-594e-4ce6-e4ea-08da66287f68"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 06:08:54.8183 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["OSBPR01MB4566"]}	["<YtDhz3ub0CFfgJlr@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 06:20:59+00	er@xs4all.nl	Re: SQL/JSON documentation JSON_TABLE	<6b4e3550-8051-77e0-695d-f5144d699e3a@xs4all.nl>	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	132	11405	[]		On 7/14/22 17:45, Andrew Dunstan wrote:\r\n> \r\n> On 2022-07-08 Fr 16:20, Andrew Dunstan wrote:\r\n>> On 2022-07-08 Fr 16:03, Erik Rijkers wrote:\r\n>>> Hi,\r\n>>>\r\n>>> Attached are a few small changes to the JSON_TABLE section in func.sgml.\r\n>>>\r\n>>> The first two changes are simple typos.\r\n>>>\r\n>>> Then there was this line:\r\n>>>\r\n>>> ----\r\n>>> context_item, path_expression [ AS json_path_name ] [ PASSING { value\r\n>>> AS varname } [, ...]]\r\n>>> ----\r\n>>>\r\n>>> those are the parameters to JSON_TABLE() so I changed that line to:\r\n>>>\r\n>>> ----\r\n>>> JSON_TABLE(context_item, path_expression [ AS json_path_name ] [\r\n>>> PASSING { value AS varname } [, ...]])\r\n>>> ----\r\n>>>\r\n>>> Some parts of the JSON_TABLE text strike me as opaque.¬† For instance,\r\n>>> there are paragraphs that more than once use the term:\r\n>>>  ¬†¬† json_api_common_syntax\r\n>>>\r\n>>> 'json_api_common_syntax' is not explained.¬† It turns out it's a relic\r\n>>> from Nikita's original docs. I dug up a 2018 patch where the term is\r\n>>> used as:\r\n>>>\r\n>>> ---- 2018:\r\n>>> JSON_TABLE (\r\n>>>  ¬†json_api_common_syntax [ AS path_name ]\r\n>>>  ¬†COLUMNS ( json_table_column [, ...] )\r\n>>>  ¬†¬†¬†¬† (etc...)\r\n>>> ----\r\n>>>\r\n>>> with explanation:\r\n>>>\r\n>>> ---- 2018:\r\n>>> json_api_common_syntax:\r\n>>>  ¬†¬† The input data to query, the JSON path expression defining the\r\n>>> query, and an optional PASSING clause.\r\n>>> ----\r\n>>>\r\n>>> So that made sense then (input+jsonpath+params=api), but it doesn't\r\n>>> now fit as such in the current docs.\r\n>>>\r\n>>> I think it would be best to remove all uses of that compound term, and\r\n>>> rewrite the explanations using only the current parameter names\r\n>>> (context_item, path_expression, etc).\r\n>>\r\n>> Thanks for this. If you want to follow up that last sentence I will try\r\n>> to commit a single fix early next week.\r\n> \r\n> Here's a patch that deals with most of this. There's one change you\r\n> wanted that I don't think is correct, which I omitted.\r\n> \r\n> [json-docs-fix.patch]\r\n\r\nThanks, much better. I also agree that the change I proposed (and you \r\nomitted) wasn't great (although it leaves the paragraph somewhat \r\norphaned - but maybe it isn't too bad.).\r\n\r\nI've now compared our present document not only with the original doc as \r\nproduced by Nikita Glukhov et al in 2018,  but also with the ISO draft \r\nfrom 2017 (ISO/IEC TR 19075-6 (JSON) for JavaScript Object).\r\n\r\nI think we can learn a few things from that ISO draft's JSON_TABLE text. \r\nLet me copy-paste its first explicatory paragraph on JSON_TABLE:\r\n\r\n-------------- [ ISO SQL/JSON draft 2017 ] ---------\r\nLike the other JSON querying operators, JSON_TABLE begins with <JSON API \r\ncommon syntax> to specify the context item, path expression and PASSING \r\nclause. The path expression in this case is more accurately called the \r\nrow pattern path expression. This path expression is intended to produce \r\nan SQL/JSON sequence, with one SQL/JSON item for each row of the output \r\ntable.\r\n\r\nThe COLUMNS clause can define two kinds of columns: ordinality columns \r\nand regular columns.\r\n\r\nAn ordinality column provides a sequential numbering of rows. Row \r\nnumbering is 1-based.\r\n\r\nA regular column supports columns of scalar type. The column is produced \r\nusing the semantics of JSON_VALUE. The column has an optional path \r\nexpression, called the column pattern, which can be defaulted from the \r\ncolumn name. The column pattern is used to search for the column within \r\nthe current SQL/JSON item produced by the row pattern. The column also \r\nhas optional ON EMPTY and ON ERROR clauses, with the same choices and \r\nsemantics as JSON_VALUE.\r\n--------------\r\n\r\n\r\nSo, where the ISO draft introduces the term 'row pattern' it /also/ \r\nintroduces the term 'column pattern' close by, in the next paragraph.\r\n\r\nI think our docs too should have both terms.  The presence of both 'row \r\npattern' and 'column pattern' immediately makes their meanings obvious. \r\n  At the moment our docs only use the term 'row pattern', for all the \r\nJSON_TABLE json path expressions (also those in the COLUMN clause, it \r\nseems).\r\n\r\n\r\nAt the moment, we say, in the JSON_TABLE doc:\r\n----\r\nTo split the row pattern into columns, json_table provides the COLUMNS \r\nclause that defines the schema of the created view.\r\n----\r\n\r\nI think that to use 'row pattern' here is just wrong, or at least \r\nconfusing.  The 'row pattern' is /not/ the data as produced from the \r\njson expression; the 'row pattern' /is/ the json path expression.  (ISO \r\ndraft: 'The path expression in this case is more accurately called the \r\nrow pattern path expression.' )\r\n\r\nIf you agree with my reasoning I can try to rewrite these bits in our \r\ndocs accordingly.\r\n\r\n\r\nErik Rijkers\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Erik Rijkers", "Address": "er@xs4all.nl"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Andrew Dunstan <andrew@dunslane.net>"], "Date": ["Fri, 15 Jul 2022 08:20:59 +0200"], "From": ["Erik Rijkers <er@xs4all.nl>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: SQL/JSON documentation JSON_TABLE"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657866077; cv=none; d=google.com; s=arc-20160816; b=QYmQ/aNnmORhNMnXBXn4wdJUtUzWWAdWcyEYJ8P3hY8w90B5/iUyHAh18Kp6KVBANF 9Qmna1CwYW06ajUFhquUSdpSQOjgUS5jeFgseYFIVhhVHZe32UIjZYp3oRrqkpP2FEIT hJPI3Vb4b/dYuoyz5v3nKzPDZ7frxhg87s123BbnODocmVH/XyDJywAHeth084SZW9sz y5Gza8ZWsriZhS36CYxcLywCEoW09T659IAjhkxWfIXXW4UeURjDx2DjUkVnwZ++qIvm ABMQBL6jLmgid/3BGKzYio31xr5YVqYBfpkTWJTM9piIfZl1HsukwOKrcaxLLJpFk1nB m79g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp60155jai; Thu, 14 Jul 2022 23:21:17 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p1-20020adff201000000b0021dab2c194bsi3436179wro.901.2022.07.14.23.21.17 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 23:21:17 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411087@lists.postgresql.org>) id 1oCEhR-0005s3-0z for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 06:21:17 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <er@xs4all.nl>) id 1oCEhM-00041J-6Z for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:21:12 +0000", "from ewsoutbound.kpnmail.nl ([195.121.94.168]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <er@xs4all.nl>) id 1oCEhH-0000tl-VT for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 06:21:11 +0000", "from smtp.kpnmail.nl (unknown [10.31.155.38]) by ewsoutbound.so.kpn.org (Halon) with ESMTPS id 42c1555e-0406-11ed-a80d-005056aba152; Fri, 15 Jul 2022 08:20:45 +0200 (CEST)", "from [192.168.178.25] (unknown [82.151.32.184]) by smtp.xs4all.nl (Halon) with ESMTPSA id 4b70076e-0406-11ed-b5e7-005056abf0db; Fri, 15 Jul 2022 08:21:04 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Cmassun": ["33|Tu+agSc8cQZnpnkFwWiiKc1rFeqoh75YYQf/fnpEeS1eXFNYKAtZteEMkeMTHck WPejKUr3iG8oeVIQbQBk6eA=="], "X-Kpn-Mid": ["33|oo5ydjI348sL00ft4OCXAj0XTFWB4kHZwdY+ugKPRYxouP8UYSLQLpcAzVuMrpv qlX63H2JmqkgoTyor0Ld7dDquEmFZBiVbHcbeDzwtuMk="], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<6b4e3550-8051-77e0-695d-f5144d699e3a@xs4all.nl>"], "Precedence": ["bulk"], "References": ["<7bb38ff6-c4ef-5c5d-4645-185b4ad3d094@xs4all.nl> <b2c5da4d-5ca0-f111-3460-f98851975434@dunslane.net> <10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:600c:4fd0:b0:3a2:b57b:2200 with SMTP id o16-20020a05600c4fd000b003a2b57b2200mr18812212wmq.197.1657866077396; Thu, 14 Jul 2022 23:21:17 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/6b4e3550-8051-77e0-695d-f5144d699e3a%40xs4all.nl>"], "In-Reply-To": ["<10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411087@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411087@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=xs4all.nl; s=xs4all01; h=content-type:from:to:subject:mime-version:date:message-id; bh=KlD+mgmg1/jU6Kp8MDjjo2jm/n7XbzAxIx2avpspueA=; b=kyL3Pe8Ua015V6gTFsH931UR/wYt0ArcATxP4fphfMWtMU7a01rS2lcqvQCDYDoKEp1x+Kc6+4mbK OFmIdB3ZdoLBqEKxl+ylZpUqGHrElXyDSKEnYbBj9g8xa4a/ezSO/Zua2FdvEQXdgXMiF2HAky5mmY LzLAqGfevjbMgaOBh3jMQxmteo2pYwuaixbn3NCLbB1ziPgRHi9lu/d0e9F2ZpMkaSj/JFLkrhMM3o oDq2IxryDXQGyIbFfcUKWydiLCMzcees7wZV1frd4vzA4JKLK7oViGZm75THx5D5GUutiuZSAOoH5D gcfcL0OhVLi/uaBBQhy5dYxOkAcjImQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Kpn-Messageid": ["42c1555e-0406-11ed-a80d-005056aba152"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Originating-Ip": ["82.151.32.184"], "X-Google-Smtp-Source": ["AGRyM1uURRTaIK9NhH0w8FMJOalIGYlBNTYQsVXiMJXanwXC4l76PysvUb/EzovAOti6lNLhSs8Q"], "X-Kpn-Verifiedsender": ["Yes"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=KlD+mgmg1/jU6Kp8MDjjo2jm/n7XbzAxIx2avpspueA=; b=Ld5UlzW09gFVq4xteCHvBoL/eZNm+IVckUoFzVTl1BDHOXnOalNR05Yr/2XzxxIoAJ uF7m+TpVHsOYO0oIwNd8PnUJCSneMLrhtE+Qx3J9e+fhT9IwVYk2QJuMOWgdj5Vsf+cr 61/2VMYODBqtqyXwlgIykBeJ1g2XtyIFLMK6GZqekIg7Q5c0uX67luNNyP+bjiV0SZgm bmHrnuNIoQw+oHllCwvb3wDn0x3D+cv+yBzw7hjc3ywYDJknjAFsNOdfJ9FQ4nXFIKQV 61EJ62qIa/eX6KYnjSk0FGElhv0F6SY+g/3Sgd/5MvkeWudPz53CXoGX7P4MDXMZZmJy bg6Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@xs4all.nl header.s=xs4all01 header.b=kyL3Pe8U; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411087@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411087@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=xs4all.nl"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@xs4all.nl header.s=xs4all01 header.b=kyL3Pe8U; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411087@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411087@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=xs4all.nl"]}	["<10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 05:08:37+00	andres@anarazel.de	Re: [RFC] building postgres with meson - v10	<20220715050837.ls3foqmihvbeqrz3@awork3.anarazel.de>	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	\N	129	490351	[{"charset": "us-ascii", "part_id": "2", "file_name": "v10-0001-prereq-Deal-with-paths-containing-and-spaces-in-.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "3", "file_name": "v10-0002-meson-prereq-psql-Output-dir-and-dependency-gene.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "4", "file_name": "v10-0003-meson-prereq-ecpg-Add-and-use-output-directory-a.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "5", "file_name": "v10-0004-meson-prereq-Move-snowball_create.sql-creation-i.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "6", "file_name": "v10-0005-meson-prereq-Add-output-path-arg-in-generate-lwl.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "7", "file_name": "v10-0006-meson-prereq-generate-errcodes.pl-Accept-output-.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "8", "file_name": "v10-0007-meson-prereq-unicode-Allow-to-specify-output-dir.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "9", "file_name": "v10-0008-meson-prereq-Refactor-dtrace-postprocessing-make.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "10", "file_name": "v10-0009-meson-prereq-Add-outdir-option-to-gen_node_suppo.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "11", "file_name": "v10-0010-meson-prereq-Add-src-tools-gen_versioning_script.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "12", "file_name": "v10-0011-meson-prereq-Refactor-PG_TEST_EXTRA-logic-in-aut.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "13", "file_name": "v10-0012-meson-prereq-Can-we-get-away-with-not-export-all.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "14", "file_name": "v10-0013-meson-prereq-regress-allow-to-specify-director-c.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "15", "file_name": "v10-0014-wip-split-TESTDIR-into-two.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "utf-8", "part_id": "16", "file_name": "v10-0015-meson-Add-meson-based-buildsystem.patch", "disposition": "attachment", "content_type": "text/x-diff"}, {"charset": "us-ascii", "part_id": "17", "file_name": "v10-0016-meson-ci-Build-both-with-meson-and-as-before.patch", "disposition": "attachment", "content_type": "text/x-diff"}]		Hi,\r\n\r\nAttached is v10 of the meson patchset. Lots of small changes, I don't think\r\nanything major. I tried to address most of Peter's feedback for the earlier\r\npatches.\r\n\r\nAfter this I plan to clean up the "export" patch, since that's I think the\r\nnext bigger step, and an improvement on its own. The step after will be to\r\ndiscuss where we want the output of tests to reside, whether the naming scheme\r\nfor tests is good etc.\r\n\r\nI did try to address Peter's criticism around inconsistency of the added\r\nparameters to perl scripts. I hope it's more consistent now. I used the\r\nopportunity to make src/tools/msvc use the "output directory" parameters,\r\nproviding coverage for those paths (and removing a few unnecessary chdirs, but\r\n...).\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"To": ["pgsql-hackers@postgresql.org"], "Date": ["Thu, 14 Jul 2022 22:08:37 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [RFC] building postgres with meson - v10"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657861754; cv=none; d=google.com; s=arc-20160816; b=fBU7DkQzs6+FHwP0+nhzQIO0BkuikNQdxWBKSfq/DEJ64fyY2ou0GGD+uH74RmJgJ8 Z8bCC/i+mFH2gEuV8eXusrlFrKvKGjaYocgUfR1HYEPT4BH/XBaPaqAWcbiVmoS8JjoA j/7gsMl7vCv1rpV9hs+beSLxSq6gy/x+KxsS/gd+3assKRKY8cdjC9M3Xhm7hMpV/je7 8oMn0bKSvt90kjUkfhkly2RX3P8db8mfn7N07w1tHf/qXUmid0hmyCKkjQXSodPNtrK0 Ryg/3DAQbdmr/4wOuqa17gmfp+1L5ZZpJfK/JAXOKINVHh7d9hBz9JlFynkWi+Sr4OKA ZDvg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp51020jai; Thu, 14 Jul 2022 22:09:15 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e1-20020a05600c4e4100b003a2d414fbebsi8361933wmq.162.2022.07.14.22.09.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Thu, 14 Jul 2022 22:09:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411082@lists.postgresql.org>) id 1oCDZi-00025u-7m for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 05:09:14 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCDZU-0008Hc-Th for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 05:09:03 +0000", "from out4-smtp.messagingengine.com ([66.111.4.28]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCDZA-0000I1-SR for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 05:08:59 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id 4EFC35C006E for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 01:08:39 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 01:08:39 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 01:08:38 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715050837.ls3foqmihvbeqrz3@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<20211012083721.hvixq4pnh2pixr3j@alap3.anarazel.de>"], "X-Me-Proxy": ["<xmx:VvbQYsDpMuIo_XdXmv_6QM674MjbxE4cUq5Z-69Z6sS8VjvhfPCQpQ> <xmx:VvbQYhjL80ad0GwOtCSXcK09VyOqdQbjd2grXPrsbWe49ldZ2X1g3w> <xmx:VvbQYoqlS8nXvJXVgREDw3zfQ3MQJpbPchceA5h8K8zY7oDkC_Sy7A> <xmx:V_bQYrcnPn0YLaZ45vXplNeS7zPcnCEDaWmPf0sBlcPd95dc3ctnTQ>"], "X-Received": ["by 2002:a5d:59a8:0:b0:21d:8a9d:732b with SMTP id p8-20020a5d59a8000000b0021d8a9d732bmr10571902wrr.28.1657861754659; Thu, 14 Jul 2022 22:09:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715050837.ls3foqmihvbeqrz3%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<20211012083721.hvixq4pnh2pixr3j@alap3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411082@lists.postgresql.org>"], "X-Me-Sender": ["<xms:VvbQYoR9aQFpGyU1OfdG_Arf3GvTGE929rT99j5zsH8fhtduI_b2mw> <xme:VvbQYlwlVdazlMnssOziV5sQ7v6drycOoUNiWHKgeryhZB2P4fd5CLL09cg2dHURr buOrJ_jTRc43gtqVA>"], "Content-Type": ["multipart/mixed; boundary=\\"mqd6wwweo5bfrq2e\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411082@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:VvbQYl3oAfILZ1ORc0pPHqPsZneDlr9aS1nyxayEBc1f-3A_-SB7XeChj3U-f7i1PTYo3P4HucYpySW5-oMi--tRLObaRce7csVHHd4DFITYGjG670TkdU0hrYpj>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:content-transfer-encoding:content-type:date:date:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to; s=fm3; t=1657861719; x= 1657948119; bh=ax+j5kFqEBs6kF2bePFrdN9qwuH+Hnhz0jgOL1hTxNw=; b=a hNPsWS/Oa/rEfT8NZMB6uFJT4+3EVpVtCpiIW3t9lEfmVT7qqW5rx5KuUa1qlvtI jFl8gL1x+vaqrSAFyqagW0tVEpjlid/tmFdajwNSfAgbRjQk/6nxxTmRczpPBhrQ ORfrRBxSUcxDUYF/1mxM9mtfry81I3gw0IpWKpxCtIK+jC8whg3AMTjtAhLHUNct 6QtYlnxKNk65mIKMdgYdq3BMICKF7G0VguE7GckRzCGlEdBOhbY5RoXfTjcNlYRS p82CcnAKHPqHdU1VH2mgQyaBJBDN01IokXIzki1By/RVm9FO3RU+5Zrq8O7b9n42 XSXud5wypVU8Q7FRS08iQ==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:content-transfer-encoding:content-type :date:date:feedback-id:feedback-id:from:from:in-reply-to :in-reply-to:message-id:mime-version:references:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657861719; x=1657948119; bh=a x+j5kFqEBs6kF2bePFrdN9qwuH+Hnhz0jgOL1hTxNw=; b=yWbsqSnD14niVu+9r I7DEzjKAT98hCHRhOAwVxOvXupSdjSguWlUpzxJ065WCp5wKAXW/+BTQyiwWghiJ xy5ZbDX1F57cNLGnOQlViHCr7nYabk1Fh+lqchwwDfA2QZri0AaOuw+SXkpKZHK3 t3M17UlMqNgBMdxfNc9GfTeyvqcL98WgECkrySluQuneIOH7dnyiYixPDfHjZRbF 1hrfDC4w6uAeNMFOHKXa75aQXe+4mZgCGjG5bknkkm0veymc3eMvKC1hs7gN7QBZ Bfe/6CtWUCjIYS/fsTiamOE0542AH9sFpQEoKWrh4fSAl+wfsY0oMO13tEQl0c8O RnC8A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddgledtucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucenucfjughrpeffhffvuffkfhggtggugfgjsehmke erredttddvnecuhfhrohhmpeetnhgurhgvshcuhfhrvghunhguuceorghnughrvghssegr nhgrrhgriigvlhdruggvqeenucggtffrrghtthgvrhhnpeekieeitdeifffhgeffgfeggf ettdeigfejfedvudeihfelkeekffekfedtvdekffenucevlhhushhtvghrufhiiigvpedt necurfgrrhgrmhepmhgrihhlfhhrohhmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1t/S29T90NaTDU+U5Lwp2pa0d2TcIBZ3Z8D5Mk3uZ1b80KQgA0/pEDjhfnLEaKT+Ycfw2No"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :references:message-id:subject:to:from:date:feedback-id :dkim-signature:dkim-signature; bh=ax+j5kFqEBs6kF2bePFrdN9qwuH+Hnhz0jgOL1hTxNw=; b=PizyxQEoVrwaapwBuwODhXyiLKsFRokAgyR8mWedOzIj0LOldyl8b2YSZHHxfEEzjY /OSpfJB3jdWEagkL2f6Vs0iow7Fo1J1+9zDb+XV8xBiCBtatsb/ryZeA+mSMM6xIa0Lo fTjOlYq+NT/dvtikeQiyzerrpnICBKsdbgIs/qBpQ0Qpbx35+FXjvPmZi6uRGFvWisaL rBWnRVaj02BdFAIomwT7NYSzkKtNi1WtUh9O0wh+L7HA3Eokrh7xfyxlBrWLZk9gNc0m 5/lmgV2SJPqNRmsa/yuavgPR/l/Aw3ywbs/EpS7s0LYWfaBD01QcDe4w7mRFW1tcn2/z vGcQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=\\"ahNPsWS/\\"; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=yWbsqSnD; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411082@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411082@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=\\"ahNPsWS/\\"; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=yWbsqSnD; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411082@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411082@lists.postgresql.org"]}	["<20211012083721.hvixq4pnh2pixr3j@alap3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 07:30:59+00	horikyota.ntt@gmail.com	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>	[{"Name": "", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	134	11012	[]		At Thu, 14 Jul 2022 23:47:40 +0200, Alvaro Herrera <alvherre@alvh.no-ip.org> wrote in \r\n> Here's a couple of fixups.  0001 is the same as before.  In 0002 I think\r\n\r\nThanks!\r\n\r\n+ \t\tif (!S_ISLNK(st.st_mode))\r\n+ #else\r\n+ \t\tif (!pgwin32_is_junction(path))\r\n+ #endif\r\n+ \t\t\telog(ignore_invalid_pages ? WARNING : PANIC,\r\n+ \t\t\t\t "real directory found in pg_tblspc directory: %s", de->d_name);\r\n\r\nA regular file with an oid-name also causes this error. Doesn't\r\nsomething like "unexpected non-(sym)link entry..." work?\r\n\r\n> CheckTablespaceDirectory ends up easier to read if we split out the test\r\n> for validity of the link.  Looking at that again, I think we don't need\r\n> to piggyback on ignore_invalid_pages, which is already a stretch, so\r\n> let's not -- instead we can use allow_in_place_tablespaces if users need\r\n> a workaround.  So that's 0003 (this bit needs more than zero docs,\r\n> however.)\r\n\r\nThe result of 0003 looks good.\r\n\r\n0002:\r\n+is_path_tslink(const char *path)\r\n\r\nWhat the "ts" of tslink stands for? If it stands for tablespace, the\r\nfunction is not specific for table spaces. We already have \r\n\r\n+\t\t\t\t\terrmsg("could not stat file \\"%s\\": %m", path));\r\n\r\nI'm not sure we need such correctness, but what is failing there is\r\nlstat.  I found similar codes in two places in backend and one place\r\nin frontend. So couldn't it be moved to /common and have a more\r\ngeneric name?\r\n\r\n-\tdir = AllocateDir(tblspc_path);\r\n-\twhile ((de = ReadDir(dir, tblspc_path)) != NULL)\r\n+\tdir = AllocateDir("pg_tblspc");\r\n+\twhile ((de = ReadDir(dir, "pg_tblspc")) != NULL)\r\n\r\nxlog.c uses the macro XLOGDIR. Why don't we define TBLSPCDIR?\r\n\r\n-\t\tfor (p = de->d_name; *p && isdigit(*p); p++);\r\n-\t\tif (*p)\r\n+\t\tif (strspn(de->d_name, "0123456789") != strlen(de->d_name))\r\n \t\t\tcontinue;\r\n\r\nThe pattern "strspn != strlen" looks kind of remote, or somewhat\r\npedantic..\r\n\r\n+\t\tchar\tpath[MAXPGPATH + 10];\r\n..\r\n-\t\tsnprintf(path, MAXPGPATH, "%s/%s", tblspc_path, de->d_name);\r\n+\t\tsnprintf(path, sizeof(path), "pg_tblspc/%s", de->d_name);\r\n\r\nI don't think we need the extra 10 bytes. A bit paranoic, but we can\r\ncheck the return value to confirm the d_name is fully stored in the\r\nbuffer.\r\n\r\n> 0004 is straightforward: let's check for bad directories before logging\r\n> about consistent state.\r\n\r\nI was about to write a comment to do this when looking 0001.\r\n\r\n> After all this, I'm not sure what to think of dbase_redo.  At line 3102,\r\n> is the directory supposed to exist or not?  I'm confused as to what is\r\n> the expected state at that point.  I rewrote this, but now I think my\r\n> rewrite continues to be confusing, so I'll have to think more about it.\r\n\r\nI'm not sure l3102 exactly points, but haven't we chosen to create\r\neverything required to keep recovery going, whether it is supposed to\r\nexist or not?\r\n\r\n> Another aspect are the tests.  Robert described a scenario where the\r\n> previously committed version of this patch created trouble.  Do we have\r\n> a test case to cover that problematic case?  I think we should strive to\r\n> cover it, if possible.\r\n\r\nI counldn't recall that clearly and failed to dig out from the thread,\r\nbut doesn't the "creating everything needed" strategy naturally save\r\nthat case?  We could add that test, but it seems to me a little\r\ncumbersome to confirm the test correctly detect that case..\r\n\r\nregards.\r\n\r\n-- \r\nKyotaro Horiguchi\r\nNTT Open Source Software Center\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["alvherre@alvh.no-ip.org"], "Date": ["Fri, 15 Jul 2022 16:30:59 +0900 (JST)"], "From": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657870274; cv=none; d=google.com; s=arc-20160816; b=algxez47TCAq7PPHWENGIgZIZdOZMicTKB7oGg4i7VxiJka1nFLSzd7zbFYH3dGovC mNj16gZbss0WkeV7mLti7PGWrsuUEw1yblpqVoCTQBBPxSJuaAtCL8nenyoB00MAoqwR kXfqdAD3xABvvpaKTbYC2yQQ7vdn71OQA+si3VtAjezfcF+hFD3IRE9o7JhsxE7cxOto fI2VDH++CT9b9PagazRp0HsmpnrrIbJxMeVlF4vZyDoL/k9lFJ7QrCajg1GUbHpGBGDO EctcxpmyWBcygGJASj0F7jGvlQSI/qTeaKQUKWe0mOONRim7Jp2BYKst45wJ2L3afAX9 dN6Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp69574jai; Fri, 15 Jul 2022 00:31:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p9-20020a05600c23c900b003a2e2de0e04si4181019wmb.107.2022.07.15.00.31.13 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 00:31:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411096@lists.postgresql.org>) id 1oCFn7-0000fO-Nm for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 07:31:13 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oCFn2-0007C6-SE for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:31:08 +0000", "from mail-pj1-x102f.google.com ([2607:f8b0:4864:20::102f]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <horikyota.ntt@gmail.com>) id 1oCFmz-0001Sq-0s for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 07:31:07 +0000", "by mail-pj1-x102f.google.com with SMTP id o5-20020a17090a3d4500b001ef76490983so5339830pjf.2 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 00:31:04 -0700 (PDT)", "from localhost (KD036014041111.ppp-bb.dion.ne.jp. [36.14.41.111]) by smtp.gmail.com with ESMTPSA id w9-20020aa79a09000000b0052b36de51cdsm993443pfj.111.2022.07.15.00.31.00 (version=TLS1_3 cipher=TLS_CHACHA20_POLY1305_SHA256 bits=256/256); Fri, 15 Jul 2022 00:31:02 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>"], "Precedence": ["bulk"], "References": ["<20220713164345.j3n67rc45rpa4vop@alvherre.pgsql> <20220714214740.drhmvdx2aseqgvvb@alvherre.pgsql>"], "User-Agent": ["Mew version 6.8 on Emacs 26.1"], "X-Received": ["by 2002:adf:f88c:0:b0:21d:bac6:949f with SMTP id u12-20020adff88c000000b0021dbac6949fmr11558646wrp.551.1657870274109; Fri, 15 Jul 2022 00:31:14 -0700 (PDT)", "by 2002:a17:902:cf4a:b0:16c:1b21:a3ae with SMTP id e10-20020a170902cf4a00b0016c1b21a3aemr12642728plg.38.1657870263442; Fri, 15 Jul 2022 00:31:03 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715.163059.337322153376727951.horikyota.ntt%40gmail.com>"], "In-Reply-To": ["<20220714214740.drhmvdx2aseqgvvb@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411096@lists.postgresql.org>"], "Content-Type": ["Text/Plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411096@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=date:message-id:to:cc:subject:from:in-reply-to:references :user-agent:mime-version:content-transfer-encoding; bh=UbMZtqunbW9omTRrT469NRwTdddzDO87CYbLlL3dHO4=; b=bPNrNvm6/3Cp/hdGZn+M0fXRlBJH4sVT75HOeAfMXiKtDxW0g8bhOBLth9pkXTcie4 c05Yww/7m0i4A0XVPFcyuinw5Byt/+WkcLB2W6oEBNGGoea8nXW9Z7hCaV1f+NE/noRn D3FAB+EquCx4je02nQvubWx08UZk3hU1NOakp0ZQNpehDiynyWsTSZN86d0AMEJLd88Z L+CqFysumAqnpjrVdSgnXUp/zZ/5upb3cFkwErMq6d+OFyXh40FiVEw3PBP2zw34iA9z zLFuhZPYBcgKKs2f7nVgiYZB077VyigqmtrfJgIH1Z8FIxcl6lh1ZDApIzpUWcWKGmCM UC3Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+Y8tzi5fWSAJo23d/COuRgI5vsIeeg1r+CP2m9vBPti3FUvpMy v7cKBaCBmrTrG+fOMLiZEEAIfWCZaog="], "X-Google-Smtp-Source": ["AGRyM1u0z3s1ZuiBgXDk+h7LJULwCz07pgYqh+nWAluPqQp6nlc1TPPuM3uX8C4j9q0qp6pdnMdU"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:mime-version:user-agent:references :in-reply-to:from:subject:cc:to:message-id:date:dkim-signature; bh=UbMZtqunbW9omTRrT469NRwTdddzDO87CYbLlL3dHO4=; b=Efph4D9lMWvK8vKaxYJhjzf6WM3KBny/189sihKRtfrl8IFEM/71kviXFDb5yfsuQM WKa2srTxiwm4kcIWX4Fk3sbBw1U2z++Rg5Ws9aa3U3Zz04PEY4rMsSrYKwShrBLZPEaP ta+sK20P0uGGgs1QyaHAsUxmE0UJHmdHkDH6uiUjgDeaRUdbfy0ApKRDfkAVW/yIP19L vS1HjCGtB6BmnkEeBMKLq66LHov6UoRHtIVO64kJznLe5HdlvuaQ8pYGZeLbnDtjfioy Kqj1LONydDcQriWYdVuZ4AwQJLsLpNeG4tKCm+1fbPGJLTvHOcP39lEoZn3WC8eWZRbE Uiig=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=bPNrNvm6; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411096@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411096@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:message-id:to:cc:subject:from:in-reply-to :references:user-agent:mime-version:content-transfer-encoding; bh=UbMZtqunbW9omTRrT469NRwTdddzDO87CYbLlL3dHO4=; b=2lJOujIFFaXWDJNlDoyx9IqogaDnzRSoGJFE9/mUu1nCxxXjHcVtyep+IlMBXMtfPI b3s9ugQcssDI/X+eT3XxrEXN5YkjuOYfxij/Uf08vlMMPIZkbyGrxH//InbgaWKoDOzm EIXvfnLBjqfa7vgyqwwcGRrHX1aKW3VfAvxQHdxdzBsL7Zg/pqnv8EcI1pfWC1JPAeH8 4m4oGz76ypPxEXxIzWyghz/fu6Yt3Hx/S8Qb48vOut8cpS8joqoIPFB76MPadyqDSKzb Jg3IEwShl8wdxC0P8kh3Dn6BF5zSRjzGn79EuItUi3DVBTZaJU6efYMnoT2JNduguaH4 KnZg=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=bPNrNvm6; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411096@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411096@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220714214740.drhmvdx2aseqgvvb@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 07:46:32+00	masao.fujii@oss.nttdata.com	Re: Backup command and functions can cause assertion failure and segmentation fault	<02347f81-304f-3a14-1a33-5f40dfd7da48@oss.nttdata.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Robert Haas", "Address": "robertmhaas@gmail.com"}]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	135	18114	[{"charset": "UTF-8", "part_id": "2", "file_name": "0001-Prevent-BASE_BACKUP-in-the-middle-of-another-backup-_master_v15.patch", "disposition": "attachment", "content_type": "text/plain"}, {"charset": "UTF-8", "part_id": "3", "file_name": "0001-Prevent-BASE_BACKUP-in-the-middle-of-another-backup-_v14_v10.patch", "disposition": "attachment", "content_type": "text/plain"}, {"charset": "UTF-8", "part_id": "4", "file_name": "0002-Fix-assertion-failure-and-segmentation-fault-in-back.patch", "disposition": "attachment", "content_type": "text/plain"}]		\r\n\r\nOn 2022/07/14 17:00, Michael Paquier wrote:\r\n> On Fri, Jul 08, 2022 at 08:56:14AM -0400, Robert Haas wrote:\r\n>> On Thu, Jul 7, 2022 at 10:58 AM Fujii Masao <masao.fujii@oss.nttdata.com> wrote:\r\n>>> But if many think that it's worth adding the test, I will give a\r\n>>> try. But even in that case, I think it's better to commit the\r\n>>> proposed patch at first to fix the bug, and then to write the patch\r\n>>> adding the test.\r\n> \r\n> I have looked at that in details,\r\n\r\nThanks!\r\n\r\n\r\n  and it is possible to rely on\r\n> pg_stat_activity.wait_event to be BaseBackupThrottle, which would make\r\n\r\nISTM that you can also use pg_stat_progress_basebackup.phase.\r\n\r\n\r\n> sure that the checkpoint triggered at the beginning of the backup\r\n> finishes and that we are in the middle of the base backup.  The\r\n> command for the test should be a psql command with two -c switches\r\n> without ON_ERROR_STOP, so as the second pg_backup_stop() starts after\r\n> BASE_BACKUP is cancelled using the same connection, for something like\r\n> that:\r\n> psql -c "BASE_BACKUP (CHECKPOINT 'fast', MAX_RATE 32);" \\\r\n>       -c "select pg_backup_stop()" "replication=database"\r\n> \r\n> The last part of the test should do a pump_until() and capture "backup\r\n> is not in progress" from the stderr output of the command run.\r\n> \r\n> This is leading me to the attached, that crashes quickly without the\r\n> fix and passes with the fix.\r\n\r\nThanks for the patch! But I'm still not sure if it's worth adding only this test for the corner case while we don't have basic tests for BASE_BACKUP, pg_backup_start and pg_backup_stop.\r\n\r\nBTW, if we decide to add that test, are you planning to back-patch it?\r\n\r\n\r\n> \r\n>> It's true that we don't really have good test coverage of write-ahead\r\n>> logging and recovery, but this doesn't seem like the most important\r\n>> thing to be testing in that area, either, and developing stable tests\r\n>> for stuff like this can be a lot of work.\r\n> \r\n> Well, stability does not seem like a problem to me here.\r\n> \r\n>> I do kind of feel like the patch is fixing two separate bugs. The\r\n>> change to SendBaseBackup() is fixing the problem that, because there's\r\n>> SQL access on replication connections, we could try to start a backup\r\n>> in the middle of another backup by mixing and matching the two\r\n>> different methods of doing backups. The change to do_pg_abort_backup()\r\n>> is fixing the fact that, after aborting a base backup, we don't reset\r\n>> the session state properly so that another backup can be tried\r\n>> afterwards.\r\n>>\r\n>> I don't know if it's worth committing them separately - they are very\r\n>> small fixes. But it would probably at least be good to highlight in\r\n>> the commit message that there are two different issues.\r\n> \r\n> Grouping both fixes in the same commit sounds fine by me.  No\r\n> objections from here.\r\n\r\nThis sounds fine to me, too. On the other hand, it's also fine for me to push the changes separately so that we can easily identify each change later. So I separated the patch into two ones.\r\n\r\nSince one of them failed to be applied to v14 or before cleanly, I also created the patch for those back branches. So I attached three patches.\r\n\r\nRegards,\r\n\r\n-- \r\nFujii Masao\r\nAdvanced Computing Technology Center\r\nResearch and Development Headquarters\r\nNTT DATA CORPORATION	[]	\N	["\\\\Seen"]	[{"Name": "Fujii Masao", "Address": "masao.fujii@oss.nttdata.com"}]	{"Cc": ["Masahiko Sawada <sawada.mshk@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Michael Paquier <michael@paquier.xyz>, Robert Haas <robertmhaas@gmail.com>"], "Date": ["Fri, 15 Jul 2022 16:46:32 +0900"], "From": ["Fujii Masao <masao.fujii@oss.nttdata.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Backup command and functions can cause assertion failure and segmentation fault"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657871205; cv=none; d=google.com; s=arc-20160816; b=J9ZcK9He047glFgb85dh6aEAKotS9ap4sv7MOpMVVTzYSDTJ7c/T9xo/Qn1SL1qG2Q VxMg14WuJsGudXi/PD7A3VEn3rGNzEcIilzaXV+wRoIPD/l/bYhRpJsSUD4ogMJoRj5+ l2qqml3KJbXhzdV9wCIednOVgerZrRfnklgFtwRwiUN9/btoGrOi/nB5t5f8VurOvz8H 03L1srbcktr1yaDtH5OXqD9ZIM7UUkprxe49dpmSckv+tXifa4USKXiTFp3fz6mKb2Cn hwS5yyAYKvDonJWJlwAPLmCNZDCgfxD41kRoz2KFILpLF8j2IIdYwTTaaeTLjacAqHrf WqgQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp71745jai; Fri, 15 Jul 2022 00:46:46 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n8-20020adfe788000000b0021bc4393332si3352461wrm.1043.2022.07.15.00.46.45 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 00:46:45 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411100@lists.postgresql.org>) id 1oCG29-00022I-LJ for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 07:46:45 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCG24-00007m-Od for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:46:40 +0000", "from oss.nttdata.com ([49.212.34.109]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCG21-0001bI-7e for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:46:39 +0000", "from [10.6.216.52] (unknown [203.180.48.65]) by oss.nttdata.com (Postfix) with ESMTPSA id BC9E860830; Fri, 15 Jul 2022 16:46:32 +0900 (JST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<02347f81-304f-3a14-1a33-5f40dfd7da48@oss.nttdata.com>"], "Precedence": ["bulk"], "References": ["<3374718f-9fbf-a950-6d66-d973e027f44c@oss.nttdata.com> <CAD21AoBkR611M6K+6i-xNDjmCd-=hFN_svNgRtvuezyjviw1sA@mail.gmail.com> <6a759108-a02c-34fd-856c-d7c09d29d2ba@oss.nttdata.com> <Yr6XJg2QDT1aHYyJ@paquier.xyz> <fa0f1057-923e-ad61-e6f4-ba5fc29135ec@oss.nttdata.com> <YsYkPzSpnr5Yt3uA@paquier.xyz> <bef8abcd-8cb8-1320-9f2b-bc9677413625@oss.nttdata.com> <CA+TgmoYSp060HUuGWbKrZjP+X6kb7dgRiwZZz-hzVEDLkDhZDQ@mail.gmail.com> <Ys/NCI4Eo9300GnQ@paquier.xyz>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:600c:3512:b0:3a3:f39:5735 with SMTP id h18-20020a05600c351200b003a30f395735mr595191wmq.165.1657871206002; Fri, 15 Jul 2022 00:46:46 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/02347f81-304f-3a14-1a33-5f40dfd7da48%40oss.nttdata.com>"], "In-Reply-To": ["<Ys/NCI4Eo9300GnQ@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411100@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"------------kwt4Yiyo9CE3OI0R4zuFrEFk\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411100@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Virus-Status": ["Clean"], "X-Virus-Scanned": ["clamav-milter 0.103.6 at oss.nttdata.com"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1sKuxh2wrQ8WYts34aTvk9Q6FYj18x1WtScqAVAUddc0cfD1PmvRxdlJ82/DhQ0pr/eVckn"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to:from :references:cc:to:content-language:subject:user-agent:mime-version :date:message-id; bh=7kLvui0Z+4+FTwTNcJ5GMgSJhO4fDw7CfrvHy3nzouU=; b=km4fUMRqzHdhSpjVP8Yi3rbbCKKZCSBc9N5aFFO1fT7qnl83FznIYIll9Qs8Jfej/Y Lamj/A3yDBJMVelraXM1SlL4VjVGseuAx77cMCI6g62QhA/r2/BziDCvXmnvbgqsW4Yi hHhvMRalcfYEjzc/CYYrOlJ4L0MRSv8ZRu26qayy16iHukQH6xOOlHXmPUsFQGadGH5U rMSdwLmswj3p4fABDf2fvGn3DUdmYcFw1eU8pDWBUbCpOylRr23M3eslGrcndwNZ1GWO S7ZFOfGB6reUc30js68lovjyW/xCMHp8vLgb8EzjoUiSC6RuhLl2Kmtja6QucfUsIQNt 1s2Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411100@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411100@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411100@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411100@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"]}	["<Ys/NCI4Eo9300GnQ@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 07:52:13+00	masao.fujii@oss.nttdata.com	Re: Add a test for "cannot truncate foreign table"	<6c24b79b-2cf7-8137-1c44-e52e7c6facdb@oss.nttdata.com>	[{"Name": "Etsuro Fujita", "Address": "etsuro.fujita@gmail.com"}, {"Name": "Yugo NAGATA", "Address": "nagata@sraoss.co.jp"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	137	6350	[]		\r\n\r\nOn 2022/07/08 17:03, Etsuro Fujita wrote:\r\n> Rather than doing so, I'd vote for adding a test case to file_fdw, as\r\n> proposed in the patch, because that would be much simpler and much\r\n> less expensive.\r\n\r\nSo ISTM that most agreed to push Nagata-san's patch adding the test for TRUNCATE on foreign table with file_fdw. So barring any objection, I will commit the patch.\r\n\r\nRegards,\r\n\r\n-- \r\nFujii Masao\r\nAdvanced Computing Technology Center\r\nResearch and Development Headquarters\r\nNTT DATA CORPORATION\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Fujii Masao", "Address": "masao.fujii@oss.nttdata.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, tgl@sss.pgh.pa.us, pgsql-hackers@postgresql.org"], "To": ["Etsuro Fujita <etsuro.fujita@gmail.com>, Yugo NAGATA <nagata@sraoss.co.jp>"], "Date": ["Fri, 15 Jul 2022 16:52:13 +0900"], "From": ["Fujii Masao <masao.fujii@oss.nttdata.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add a test for \\"cannot truncate foreign table\\""], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657871545; cv=none; d=google.com; s=arc-20160816; b=c2PFLH9lfH8dABs8V4iH5fCDKtjgU3vSHCRkcA/2pBbNAkUEiT9XhD6nnb8BNv6LVF g03hr3bw5Ot7idXMZqOWzm8fl7K0kawgTFlW/BA2S4qKKC+yiziis4OCrIp1ca4mucfu eFEwA8pc3pxXrutplWipENXg7E6ZwaWWbx4sU9JWoqy3RQsmL+dO3g8WGy4+UgdW3fux jlGEd4sOge+8vzV6SFW8a3dQDFdM28kcBefBvx/7YUGLrVRknB/mGicrIphaks/HWuKW obAj17PrFIbe8gdWdlIwfuAOlOLFOOElccg2d624YNqlOoiPhkYJIXbt4J3n+MbrcYm8 /zeQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp72539jai; Fri, 15 Jul 2022 00:52:25 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u11-20020a05600c19cb00b003a0583b2483si9387488wmq.11.2022.07.15.00.52.25 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 00:52:25 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411102@lists.postgresql.org>) id 1oCG7d-0000vg-7U for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 07:52:25 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCG7Y-0007iv-Jh for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:52:20 +0000", "from oss.nttdata.com ([49.212.34.109]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCG7W-00050E-W8 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 07:52:20 +0000", "from [10.6.216.52] (unknown [203.180.48.65]) by oss.nttdata.com (Postfix) with ESMTPSA id 67A7960830; Fri, 15 Jul 2022 16:52:14 +0900 (JST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<6c24b79b-2cf7-8137-1c44-e52e7c6facdb@oss.nttdata.com>"], "Precedence": ["bulk"], "References": ["<ebfc16eb-10b5-30b3-152f-f58bedbf5a94@oss.nttdata.com> <2983289.1657207980@sss.pgh.pa.us> <e57cad1e-82f0-aca7-7881-d27914e3f806@oss.nttdata.com> <20220708.094410.312409562002975692.horikyota.ntt@gmail.com> <20220708110744.627fe4b8c52d05689ee9d34b@sraoss.co.jp> <CAPmGK1693C32y3GxrwgFKuxujYZ9UTEn5UbUWr2gSkY7LnXT_g@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:6000:144f:b0:21d:a3cc:a6fa with SMTP id v15-20020a056000144f00b0021da3cca6famr11485973wrx.191.1657871545637; Fri, 15 Jul 2022 00:52:25 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/6c24b79b-2cf7-8137-1c44-e52e7c6facdb%40oss.nttdata.com>"], "In-Reply-To": ["<CAPmGK1693C32y3GxrwgFKuxujYZ9UTEn5UbUWr2gSkY7LnXT_g@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411102@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411102@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Virus-Status": ["Clean"], "X-Virus-Scanned": ["clamav-milter 0.103.6 at oss.nttdata.com"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tvIKkDOPAr4NYd6xFmA8pIr8lRKvJ1fyf3FzGstTE6kATTq+QrMdupv9vdEYFqP9ylCcbN"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=id6zaBFHEblGjG+/hXp8TIFJtZDI6Jjsyb1VpNCOenE=; b=Jkf5QPWphj5ZlsKC/qbyTG21OYWLQZs+xdTHKEl5zD+XZ7I7hxLukKQPygZm7bDBt1 IKEH7YZDYIUrYBGj81A02pKxAL6K7Wbm2uQrX5KdtEEQF1CbpkpG+yIZMyQGTapy8j0G RZWjkli0H8hhI28EVOnv3aBt1Y1B/F507vFQIoYd1jfwqex6V52kOJze30s7NKTcmmF3 Ke2R3PVHyCn6CeXyX3dv02+09zbN9xeRHS/lUx+J7xodOD5Hu/xrjELfdz00fGMGWQQJ IjRchcohI5yYwqaeqloPGHd50sRbTXaNoKI5xWhP3Za7n0VGEfZCZxQyucC0VMWFWU1u RstQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411102@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411102@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411102@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411102@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"]}	["<CAPmGK1693C32y3GxrwgFKuxujYZ9UTEn5UbUWr2gSkY7LnXT_g@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 07:47:58+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	136	8502	[]		On Fri, 15 Jul 2022 at 04:44, Michael Paquier <michael@paquier.xyz> wrote:\r\n>\r\n> On Mon, Jul 04, 2022 at 03:59:55PM +0900, Michael Paquier wrote:\r\n> > Please note that patch authors should not switch a patch as RfC by\r\n> > themselves.  This is something that a reviewer should do.\r\n>\r\n> http://commitfest.cputube.org/simon-riggs.html\r\n\r\nThanks for showing me that, it is very helpful.\r\n\r\n> This patch has been marked as waiting for a review, however the CF bot\r\n> is completely red:\r\n\r\nYes, it is failing, but so is current HEAD, with some kind of libpq\r\npipelining error.\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Fri, 15 Jul 2022 08:47:58 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657871303; cv=none; d=google.com; s=arc-20160816; b=lqbVKuh332tIrW1OEDOxlzRdpCN6V1RVRWHTdrJblokQq9O/4RBt+S4NfXJ5b6Zin2 bFHdcJi0aLd2HQB3dfvFCPyMAB43vlYXtLRN9kAjX6yaFULGzEzAHnAIA5rh1jLLkIN+ lbSEzgyjZZnj2xzyPcNG3lJXYCOi5HUE0nrZD087CjYOAy9OznaKG8mZOM9r48Ofev1K Qe9Q4i/UseMXWJZTs4TP+jgOYgDuddmFaJrboIuc04oIuh9zf/YTd4joA3np7mnvw+z9 PsqKYZWI4DlRMe05bySdAUE2w5isX0gPvvO7cFNdzjjBW6CUUaADHGSZdswepBgMUzxu Ewfw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp72055jai; Fri, 15 Jul 2022 00:48:23 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l15-20020a05600002af00b0021d68e51d77si5736013wry.588.2022.07.15.00.48.23 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 00:48:23 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411101@lists.postgresql.org>) id 1oCG3i-0007Cw-VN for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 07:48:22 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCG3d-0005W8-QC for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:48:18 +0000", "from mail-oi1-x230.google.com ([2607:f8b0:4864:20::230]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCG3Y-0004yC-DR for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 07:48:17 +0000", "by mail-oi1-x230.google.com with SMTP id s204so5229709oif.5 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 00:48:11 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<YpYFeT4BYZowbFUM@paquier.xyz> <202205311230.5dc4ztvncsck@alvherre.pgsql> <Ypf+GU4zhvRTirJ1@paquier.xyz> <CANbhV-E_qSxF4JHdswaKcaG_Mo25h5WyXBPYWyZ0+=Mc-QxczQ@mail.gmail.com> <CANbhV-EmOh-XTssH5TwannC2S1VDN5zK-b+oZKs8UdyUtc2oUw@mail.gmail.com> <YrvWoAsaX/gUG2re@paquier.xyz> <CANbhV-EL4+RK49Qmk66zFmTiEEhT6TKia0ow_t5zogV1-FfAEw@mail.gmail.com> <1386216.1656884491@sss.pgh.pa.us> <YsKP6wJ0+XvF+6/8@paquier.xyz> <YtDikC1Ov/jM0Nzc@paquier.xyz>"], "X-Received": ["by 2002:a5d:4aca:0:b0:21d:6793:1c11 with SMTP id y10-20020a5d4aca000000b0021d67931c11mr11021305wrs.202.1657871303302; Fri, 15 Jul 2022 00:48:23 -0700 (PDT)", "by 2002:a05:6808:2126:b0:33a:3c4a:7ce9 with SMTP id r38-20020a056808212600b0033a3c4a7ce9mr3426395oiw.224.1657871289443; Fri, 15 Jul 2022 00:48:09 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw%40mail.gmail.com>"], "In-Reply-To": ["<YtDikC1Ov/jM0Nzc@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411101@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411101@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=7Yq/eRHbgZJmjpctVCgG8322GYQuf+yB24jAm/HqgBk=; b=mbs1NCmXqWqeVy6R/0fEA3KsVcCXroCuLKnAbc+X/v49nRAi3eBnb3XQAZUZot7oCF ko2ftCPrm+L2i9zT/8y9xuzS+yhR1JPpAKGyWg9Hf7cdtWnnPFZHHkzX0zlntX3uZOql YtHMfUEt7hahgISYtW7EvCLYMllzlY01sfo6uIUHFhldOw1FYO7zT6mQgm/Nc34zbJeR h4Vm5FPA6bbPzdZwt3maTJsqd8vjd4hx8MuWg/53fj55AwblfSRwAte20f7OFATDKleM h7kR9PPAOytJla2AoGPou+Z7AG0ZNydez9XhpAytuclLDbfJId/EzAH6iKN0dGb2JnhZ hi0A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8SlEw8PXOzrgeIeb+zZgG3RiUFn6LNKObrs6YGauHAmbLk0KXp FPw4iVqauH9zIxoMouM9bK7lv0ipKIwV1ZYpdUyGeLfPmUypGg24nYzmIeVGnUBTLzM5YrPXrRy FagZT5A41jU1VyEV/hIVD3jxuXsuPgbRJyJsQtcXPkdCpAS09ciAWzCdIi6m+PkkilJ8/DwmSZM DEGptLnQWkrugjFXl3JzPQ5VgpEEr1IOcKViiDcoXI5D8925cOyHMz"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1u/hkgMobYT7iNJwTe1P3I1Zzey/oSGhXhV4jBJqRdflo9Pz2byz40vIt3cHgl4JXUbs1DM"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=7Yq/eRHbgZJmjpctVCgG8322GYQuf+yB24jAm/HqgBk=; b=XBgvo/xBBwHDXIxPWUivQg3I944I9jIJGrEhsqykhm/H8YC3biSbMHrhlbb+WcPzml gxlhCI9REkNpUncgJvZyeeoJd5w/xkXfaRr8BXFUeKhKrABFuTIuPQd9gTIA1rL68/fq IyUuUaOxF/AKn/qJJ6s8Ks5YIz2adDn++VjxDt0ys6DHhbZTqpoLRbczmV726QRCULnT fZUc5CehBKT8r1oXVYBpdsOF62PPl8O32wabtl7E0tC/CEtJi54skw7H4pSTA4VY+4Tn vaf1mw0ySTtKSX9diEnt3JotYEohKMmJPqbrKs/kRvGm8UaGfc0lIUwqzKFbK0N34l78 vFIw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=mbs1NCmX; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411101@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411101@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=7Yq/eRHbgZJmjpctVCgG8322GYQuf+yB24jAm/HqgBk=; b=rGcevbAkWhxW+j43DVUHzLr8RIUMywW4d549+QlYTx5pcVYRZm6uz9yKXXylwTubtd NNLJHJsnR8+jquvPgzxgtlalV9mVNuAlsVxb03uFlqrjRm0A5qPrzuGkPz8QHCDJ+rfY QeWBqNAs05cJHH6bIG3GunrAEyBHHyTpu5hsvSg8joegsQzQWEVre6dZFKqcR9HSp8fU i0tLK3RHHUsIJE3WW3TvEaiezjDERF+ExsFlvGZUQbjCIKkJ8WqwLYurw1rOQRIDNSgW FMf6ymuWfS8t6K9MJ6gOkPJSEGk4zuUwRXms6OtSJjiZ+jWfJTSk1lbLDw6XVk9TZEZs pQvg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=mbs1NCmX; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411101@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411101@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<YtDikC1Ov/jM0Nzc@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 07:56:10+00	alvherre@alvh.no-ip.org	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220715075610.eqem3nyhphwxzjpa@alvherre.pgsql>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	138	12561	[]		On 2022-Jul-15, Kyotaro Horiguchi wrote:\r\n\r\n> At Thu, 14 Jul 2022 23:47:40 +0200, Alvaro Herrera <alvherre@alvh.no-ip.org> wrote in \r\n> > Here's a couple of fixups.  0001 is the same as before.  In 0002 I think\r\n> \r\n> Thanks!\r\n> \r\n> + \t\tif (!S_ISLNK(st.st_mode))\r\n> + #else\r\n> + \t\tif (!pgwin32_is_junction(path))\r\n> + #endif\r\n> + \t\t\telog(ignore_invalid_pages ? WARNING : PANIC,\r\n> + \t\t\t\t "real directory found in pg_tblspc directory: %s", de->d_name);\r\n> \r\n> A regular file with an oid-name also causes this error. Doesn't\r\n> something like "unexpected non-(sym)link entry..." work?\r\n\r\nHmm, good point.  I also wonder if we need to cater for using the term\r\n"junction point" rather than "symlink" when under Windows.\r\n\r\n> > CheckTablespaceDirectory ends up easier to read if we split out the test\r\n> > for validity of the link.  Looking at that again, I think we don't need\r\n> > to piggyback on ignore_invalid_pages, which is already a stretch, so\r\n> > let's not -- instead we can use allow_in_place_tablespaces if users need\r\n> > a workaround.  So that's 0003 (this bit needs more than zero docs,\r\n> > however.)\r\n> \r\n> The result of 0003 looks good.\r\n\r\nGreat, will merge.\r\n\r\n> 0002:\r\n> +is_path_tslink(const char *path)\r\n> \r\n> What the "ts" of tslink stands for? If it stands for tablespace, the\r\n> function is not specific for table spaces.\r\n\r\nOh, of course. \r\n\r\n> We already have \r\n> \r\n> +\t\t\t\t\terrmsg("could not stat file \\"%s\\": %m", path));\r\n> \r\n> I'm not sure we need such correctness, but what is failing there is\r\n> lstat.\r\n\r\nI'll have a look at what we use for lstat failures in other places.\r\n\r\n> I found similar codes in two places in backend and one place\r\n> in frontend. So couldn't it be moved to /common and have a more\r\n> generic name?\r\n\r\nI'll have a look at those.  I had the same instinct initially ...\r\n\r\n> -\tdir = AllocateDir(tblspc_path);\r\n> -\twhile ((de = ReadDir(dir, tblspc_path)) != NULL)\r\n> +\tdir = AllocateDir("pg_tblspc");\r\n> +\twhile ((de = ReadDir(dir, "pg_tblspc")) != NULL)\r\n> \r\n> xlog.c uses the macro XLOGDIR. Why don't we define TBLSPCDIR?\r\n\r\nOh yes, let's do that.  I'd even backpatch that, to avoid a future\r\nbackpatching gotcha.\r\n\r\n> -\t\tfor (p = de->d_name; *p && isdigit(*p); p++);\r\n> -\t\tif (*p)\r\n> +\t\tif (strspn(de->d_name, "0123456789") != strlen(de->d_name))\r\n>  \t\t\tcontinue;\r\n> \r\n> The pattern "strspn != strlen" looks kind of remote, or somewhat\r\n> pedantic..\r\n> \r\n> +\t\tchar\tpath[MAXPGPATH + 10];\r\n> ..\r\n> -\t\tsnprintf(path, MAXPGPATH, "%s/%s", tblspc_path, de->d_name);\r\n> +\t\tsnprintf(path, sizeof(path), "pg_tblspc/%s", de->d_name);\r\n> \r\n> I don't think we need the extra 10 bytes.\r\n\r\nI forgot to mention this, but I just copied these bits from some other\r\nplace that processes pg_tblspc entries.  It seemed to me that the\r\nbodiless for loop was a bit too suspicious-looking.\r\n\r\n> A bit paranoic, but we can check the return value to confirm the\r\n> d_name is fully stored in the buffer.\r\n\r\nHmm ... I don't think we need to care about that in this patch.  This\r\ncoding pattern is already being used in other places.  If we want to\r\nchange that, let's do it everywhere, and not in an unrelated\r\nbackpatchable bug fix.\r\n\r\n> > After all this, I'm not sure what to think of dbase_redo.  At line 3102,\r\n> > is the directory supposed to exist or not?  I'm confused as to what is\r\n> > the expected state at that point.  I rewrote this, but now I think my\r\n> > rewrite continues to be confusing, so I'll have to think more about it.\r\n> \r\n> I'm not sure l3102 exactly points, but haven't we chosen to create\r\n> everything required to keep recovery going, whether it is supposed to\r\n> exist or not?\r\n\r\nI mean just after the two stat() calls for the target directory.\r\n\r\n> > Another aspect are the tests.  Robert described a scenario where the\r\n> > previously committed version of this patch created trouble.  Do we have\r\n> > a test case to cover that problematic case?  I think we should strive to\r\n> > cover it, if possible.\r\n> \r\n> I counldn't recall that clearly and failed to dig out from the thread,\r\n> but doesn't the "creating everything needed" strategy naturally save\r\n> that case?  We could add that test, but it seems to me a little\r\n> cumbersome to confirm the test correctly detect that case..\r\n\r\nWell, I *hope* it does ... but hope is no strategy, and I've frequently\r\nbeen on the wrong side when trusting that untested code does what I\r\nthink it does.\r\n\r\n\r\nThanks for reviewing,\r\n\r\n-- \r\n√Ålvaro Herrera         PostgreSQL Developer  ‚Äî  https://www.EnterpriseDB.com/\r\n"It takes less than 2 seconds to get to 78% complete; that's a good sign.\r\nA few seconds later it's at 90%, but it seems to have stuck there.  Did\r\nsomebody make percentages logarithmic while I wasn't looking?"\r\n                http://smylers.hates-software.com/2005/09/08/1995c749.html\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Fri, 15 Jul 2022 09:56:10 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657871784; cv=none; d=google.com; s=arc-20160816; b=K3g4moSWecMn2eZdqg6ojxQB1U7Zg5uyxNuvL9WOV7xVdgrC0Q0OhPDcDaZaLAtZhQ b1bDuhsIVhpW5yyKdiWZCEBbFpTF6WR/B6Mb+3Kl4MoVDKHsu6IdUTz8EQGhglDveCNp C+XlYHqS7lt70+K27a4HnB6JVrGUsfcLPje8V8NT3L19gXVAYjpVfaQkvljC8U0bG7fC jum5DMDAP82Q+ZkNDhhhnuK9FPPpFNv6IMDaAOhh1BVljYBT/RX7HlFvaDXgAa8KsoRt 9tNLy8TLDnFvkfQ+ux9RR7j/MYyEyAmZoNMXRFCv2AMGTrr0zHOt8NIESpEW8yA1WQ3t h79w=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp73014jai; Fri, 15 Jul 2022 00:56:24 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r145-20020a1fa897000000b00370789e376fsi713703vke.14.2022.07.15.00.56.24 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 00:56:24 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411103@lists.postgresql.org>) id 1oCGBT-0003jB-Lv for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 07:56:23 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCGBP-0002C6-3T for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 07:56:19 +0000", "from out1-smtp.messagingengine.com ([66.111.4.25]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCGBL-0001gE-6U for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 07:56:18 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.nyi.internal (Postfix) with ESMTP id 34E915C01D6; Fri, 15 Jul 2022 03:56:14 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute3.internal (MEProxy); Fri, 15 Jul 2022 03:56:14 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 03:56:13 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id 3775036E; Fri, 15 Jul 2022 09:56:10 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715075610.eqem3nyhphwxzjpa@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:nR3RYusgbThUENviR-EjmaHSxaEKq81TfPzYsQD1pkWkglN16iQWtw> <xmx:nR3RYmfq8XAZl0Mu0831nC4pfmUSVcieMkG5HPiL6mlB0JawvpncDA> <xmx:nR3RYi30c1kRxHyF6VdseF5SU7N1P-TjVIIhOtDf7KRdGJEHPm6M4g> <xmx:nh3RYl4Ma__v1hGdc02QhsUarMlwulNglCyzwr2jLwW996RK4F7JPw>"], "X-Received": ["by 2002:a1f:c806:0:b0:374:2b74:47d5 with SMTP id y6-20020a1fc806000000b003742b7447d5mr5126602vkf.31.1657871784677; Fri, 15 Jul 2022 00:56:24 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715075610.eqem3nyhphwxzjpa%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411103@lists.postgresql.org>"], "X-Me-Sender": ["<xms:nR3RYuPVslXCuxYKTuP6rY1G-LsSC1k8kTpf5uX1X1-9BZVifygozw> <xme:nR3RYs8fiXggqeUSqvuBl0swhik6oH8NxH1gqYVV6PzDWCS4tsaa0KRFv0eMrL2ni 0siYKQIUaDMQh1wOg>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411103@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:nR3RYlTdKlGqTj3xBnyvN74K-B65CV8I8Qm7ricZxURKQQmDXBwEeF_OxBMvo3sD6HUsx8yBJ9adS-0X3AYwK5-TvgBjKJB7rSLYIFrjDGjEYpVj_-8p4wCYoBpSQRfID38>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657871774; x=1657958174; bh=F uV5dqUjv9rXIXKDbkbFvOjgEqztuyFp+4jRQTuxm80=; b=2iJ7DkRA3iMrVwNjc 1hZ6mEp8OeW278Myp78eZdM10/MC3IfZ8YincFenKwopKgMyQoQ0MVOsAnm4El0b bFSnmEmaOlndMRJYmfOZUlDdzbFVinN05fgiTTjccBT9hVDl1JA9fzMSZQR8ZeB0 CnWR3Oc97cQZAf3BhLq3JhHtt3Dldw42C/yuJojv+AHNvn5/JWHUg0W1K3pBd8Yp p6mk2WMcka9ZcuBfyUAdlvnTdUYsQQLizhZ2OHAPUp3spFjGR85YaMopam+r8LHy 0K5Au+k/eG5+G57/xCTC8yFsDcnHu+NLlqXNzUxbngrA8yF48vdITfBSdiT1+y3d mdojQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudektddguddvhecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecunecujfgurhepfffhvfevuffkgggtugfgjgesth ekredttddtjeenucfhrhhomheptehlvhgrrhhoucfjvghrrhgvrhgruceorghlvhhhvghr rhgvsegrlhhvhhdrnhhoqdhiphdrohhrgheqnecuggftrfgrthhtvghrnheptddukedute eufeevvdeufeelteeifeeijeekteetkeekvedtudduieetjefggfetnecuffhomhgrihhn pegvnhhtvghrphhrihhsvggusgdrtghomhdphhgrthgvshdqshhofhhtfigrrhgvrdgtoh hmnecuvehluhhsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhhomheprghl vhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1u0kZiMJyHEBJzvOjff0IdGQYnOE7kYJVnc9zoo82gGCYR+5T9C/uqLoInKmsWWNvXjbHMN"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=FuV5dqUjv9rXIXKDbkbFvOjgEqztuyFp+4jRQTuxm80=; b=KdmGrCpJdFmokIBbWbJI4WO9eSU1rTzE9LuvcEDJBEAvN2VxfShJot5vjXZcWNzDEO c4L83MxNeLCDEwOHbySUkh/H/DUURi/hG2FiqaBTGowXEVC7TNOi9ZIphDTWqRHVSbrL dV42qLo6W2wY08NeBIPpZnLf7t1gp68REdK/7d9+CoD8yqqfH5yJEgdtQJbqtD1oRuOh 3Pdcl2T1UUiznDW20qfs7CQ5qbs7vXESpcA5m0hkoNKDtY5N02DOKY8ngQ8IykoAU+LO JJ4PnkUBD+62It5k40ZAq1ziFqEDhHAY8XU1qzA0JJTooICdOUedD5BVZsPfPmIqwq74 e10A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=2iJ7DkRA; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411103@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411103@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=2iJ7DkRA; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411103@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411103@lists.postgresql.org"]}	["<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 08:11:01+00	masao.fujii@oss.nttdata.com	Re: Add function to return backup_label and tablespace_map	<11b9701b-84a3-94d1-5d1c-33931e845812@oss.nttdata.com>	[{"Name": "David Steele", "Address": "david@pgmasters.net"}, {"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}]	[{"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}]	\N	140	6256	[]		\r\n\r\nOn 2022/07/08 23:11, David Steele wrote:\r\n> Looks like I made that more complicated than it needed to be:\r\n> \r\n> select * from pg_backup_stop(...) \\gset\r\n> \\pset tuples_only on\r\n> \\pset format unaligned\r\n> \\o /backup_path/backup_label\r\n> select :'labelfile';\r\n\r\nThanks! I had completely forgotten \\gset command.\r\n\r\nRegards,\r\n\r\n-- \r\nFujii Masao\r\nAdvanced Computing Technology Center\r\nResearch and Development Headquarters\r\nNTT DATA CORPORATION\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Fujii Masao", "Address": "masao.fujii@oss.nttdata.com"}]	{"Cc": ["pgsql-hackers <pgsql-hackers@postgresql.org>, Nathan Bossart <nathandbossart@gmail.com>, Stephen Frost <sfrost@snowman.net>"], "To": ["David Steele <david@pgmasters.net>, Julien Rouhaud <rjuju123@gmail.com>"], "Date": ["Fri, 15 Jul 2022 17:11:01 +0900"], "From": ["Fujii Masao <masao.fujii@oss.nttdata.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add function to return backup_label and tablespace_map"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657872675; cv=none; d=google.com; s=arc-20160816; b=0ARdfANHsg79iVoTgynCACfKOKmDaeWNZSL7+288bEbD/hM2wt0fjOrg9+cgLY+Xyh mK+t6N68bsKnSS4BAIsCqe0OQbwLJy4v+FRjfQI7b9o94ZA+L3wqo0x9EPdHzpxfBDOc 95b1zWQCEPyr4dPA4EC8S30J+eR7pvqo1BvUQvYdHXxCuM8B2VAi9sH4ZM6pM48klYkM mDX4gDIkC/5LHY9OWTYDyWWbp8GMIhZS97Yf8gF/r+ygTNSO4JBpFvtRZHu1fWzPc4qS HKmo+SKpv27p26wH7NnShdCTW10JwH3Zaf9KWV/VNOJgWd2+BGZyNtOTQq35vR3t8Ni8 /e+g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp75536jai; Fri, 15 Jul 2022 01:11:15 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g9-20020adff3c9000000b0021bc8f83c5bsi4420309wrp.50.2022.07.15.01.11.15 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 01:11:15 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411106@lists.postgresql.org>) id 1oCGPr-0005Ss-4P for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 08:11:15 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCGPm-0003ju-Dn for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:11:10 +0000", "from oss.nttdata.com ([49.212.34.109]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <masao.fujii@oss.nttdata.com>) id 1oCGPg-0001me-4g for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 08:11:09 +0000", "from [10.6.216.52] (unknown [203.180.48.65]) by oss.nttdata.com (Postfix) with ESMTPSA id F157B604CB; Fri, 15 Jul 2022 17:11:01 +0900 (JST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<11b9701b-84a3-94d1-5d1c-33931e845812@oss.nttdata.com>"], "Precedence": ["bulk"], "References": ["<38bd5ea4-0b06-5404-cccf-250a7649ddfb@oss.nttdata.com> <9f656d95-9fc7-3f33-bec7-1048cf780a32@pgmasters.net> <CAOBaU_Ztdn+bsB_OSx42HW_sDNxP4_2nCq0FU0Vb8ZJpN=dsvw@mail.gmail.com> <3fdc52de-7dd1-5683-de0e-34c40a8a794e@pgmasters.net> <69d88df8-8405-d3e7-d65c-bb260d6196ed@pgmasters.net>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a5d:69ca:0:b0:21d:640c:79f6 with SMTP id s10-20020a5d69ca000000b0021d640c79f6mr11598354wrw.309.1657872675531; Fri, 15 Jul 2022 01:11:15 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/11b9701b-84a3-94d1-5d1c-33931e845812%40oss.nttdata.com>"], "In-Reply-To": ["<69d88df8-8405-d3e7-d65c-bb260d6196ed@pgmasters.net>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411106@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411106@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Virus-Status": ["Clean"], "X-Virus-Scanned": ["clamav-milter 0.103.6 at oss.nttdata.com"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1t2h5k3MGxx9bOzG6p1qcheDzSdW8ngRQQ/ORy6Zh5b+dgEPmOA/+7ibP/nnZhviJKO1i1o"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=bRWJkNApIkXEuhjX0niwmiEzDzTxDWuGQT4uvNSuLVg=; b=0OJd3eJAWMOGPXxOQVrgB+JfWvazH1A/MxhIMJQY+0XmCbv0oZw70ZO8CZ5NZKpybZ B3uMRKKH/8+tLVC9B7nm4FDzVpTTotZqDYCj7pLq5A8pshDBrFoDaPm6100HZO1OWXOb T93Z53MoO0KyxwWzapYQDDpy862obSeQkT/qRYYhfY2IEIqKNHvppwacv4xPMS1+YTma TvFNpRAoXOKsTrT/LU2OfeaREdabr5W9ebeCFKPP16QVDv+LSNpGHoH43l7K2UKB6+Xb rna4EfqEjZmjpER6tY+SF8BHl/3R0umvHWSY/LdUzVymA5uGP2ukExPOmobHZ0UMAHKI v4KQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411106@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411106@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411106@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411106@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"]}	["<69d88df8-8405-d3e7-d65c-bb260d6196ed@pgmasters.net>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 08:03:56+00	guofenglinux@gmail.com	Re: Problem about postponing gathering partial paths for topmost scan/join rel	<CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q@mail.gmail.com>	[{"Name": "Antonin Houska", "Address": "ah@cybertec.at"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	139	12962	[]	<div dir="ltr"><div dir="ltr"><br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Jul 14, 2022 at 10:02 PM Antonin Houska &lt;<a href="mailto:ah@cybertec.at">ah@cybertec.at</a>&gt; wrote:</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\nI&#39;d prefer a test that demonstrates that the Gather node at the top of the<br>\r\n&quot;subproblem plan&quot; is useful purely from the *cost* perspective, rather than<br>\r\ndue to executor limitation.</blockquote><div><br></div>This patch provides an additional path (Gather atop of subproblem) which<br>was not available before. But your concern makes sense that we need to<br>show this new path is valuable from competing on cost with other paths.<br><br>How about we change to Nested Loop at the topmost? Something like:<br><br>set join_collapse_limit to 2;<br><br># explain (costs off) select * from foo a join foo b on a.i = b.i join foo c on b.i &gt; c.i;<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†QUERY PLAN<br>----------------------------------------------------<br>¬†Nested Loop<br>¬† ¬†Join Filter: (b.i &gt; c.i)<br>¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Hash Join<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Hash Cond: (a.i = b.i)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo a<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Hash<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo b<br>¬† ¬†-&gt; ¬†Materialize<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo c<br>(13 rows)<br><br>Without the patch, the path which is Gather atop of subproblem is not<br>available, and we would get:<br><br># explain (costs off) select * from foo a join foo b on a.i = b.i join foo c on b.i &gt; c.i;<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†QUERY PLAN<br>----------------------------------------------------<br>¬†Nested Loop<br>¬† ¬†Join Filter: (b.i &gt; c.i)<br>¬† ¬†-&gt; ¬†Hash Join<br>¬† ¬† ¬† ¬† ¬†Hash Cond: (a.i = b.i)<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo a<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Hash<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo b<br>¬† ¬†-&gt; ¬†Materialize<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on foo c<br>(15 rows)<br><br>Thanks<br><div>Richard¬†</div></div></div>\r\n	On Thu, Jul 14, 2022 at 10:02 PM Antonin Houska <ah@cybertec.at> wrote:\r\n\r\n> I'd prefer a test that demonstrates that the Gather node at the top of the\r\n> "subproblem plan" is useful purely from the *cost* perspective, rather than\r\n> due to executor limitation.\r\n\r\n\r\nThis patch provides an additional path (Gather atop of subproblem) which\r\nwas not available before. But your concern makes sense that we need to\r\nshow this new path is valuable from competing on cost with other paths.\r\n\r\nHow about we change to Nested Loop at the topmost? Something like:\r\n\r\nset join_collapse_limit to 2;\r\n\r\n# explain (costs off) select * from foo a join foo b on a.i = b.i join foo\r\nc on b.i > c.i;\r\n                     QUERY PLAN\r\n----------------------------------------------------\r\n Nested Loop\r\n   Join Filter: (b.i > c.i)\r\n   ->  Gather\r\n         Workers Planned: 4\r\n         ->  Parallel Hash Join\r\n               Hash Cond: (a.i = b.i)\r\n               ->  Parallel Seq Scan on foo a\r\n               ->  Parallel Hash\r\n                     ->  Parallel Seq Scan on foo b\r\n   ->  Materialize\r\n         ->  Gather\r\n               Workers Planned: 4\r\n               ->  Parallel Seq Scan on foo c\r\n(13 rows)\r\n\r\nWithout the patch, the path which is Gather atop of subproblem is not\r\navailable, and we would get:\r\n\r\n# explain (costs off) select * from foo a join foo b on a.i = b.i join foo\r\nc on b.i > c.i;\r\n                     QUERY PLAN\r\n----------------------------------------------------\r\n Nested Loop\r\n   Join Filter: (b.i > c.i)\r\n   ->  Hash Join\r\n         Hash Cond: (a.i = b.i)\r\n         ->  Gather\r\n               Workers Planned: 4\r\n               ->  Parallel Seq Scan on foo a\r\n         ->  Hash\r\n               ->  Gather\r\n                     Workers Planned: 4\r\n                     ->  Parallel Seq Scan on foo b\r\n   ->  Materialize\r\n         ->  Gather\r\n               Workers Planned: 4\r\n               ->  Parallel Seq Scan on foo c\r\n(15 rows)\r\n\r\nThanks\r\nRichard\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Richard Guo", "Address": "guofenglinux@gmail.com"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Antonin Houska <ah@cybertec.at>"], "Date": ["Fri, 15 Jul 2022 16:03:56 +0800"], "From": ["Richard Guo <guofenglinux@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Problem about postponing gathering partial paths for topmost scan/join rel"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657872261; cv=none; d=google.com; s=arc-20160816; b=YZn5eTHiCroJ5MucSh8ZB0td2r91tV7E2Oz2PKxE9mSCIV8DI4ez7ZkPu3T4JTEbU+ PceJfkyraJ67xDyoNu1TVEG4ah0ac0KlmlFgj0LacHCloIWMzc6td4rYqmtlrMP4t0kZ UZR6oVfLvQwWS68VHCMlpzfL9oZr4GEyHRJuwP1aCc8gweBXZN1jSl2sVU+X7KB3o2OF JyKVAQEBExAYL5lnMZDpYMjh0bq6IEgPV3o9Ah6WGjZ4e+HpDv3Qy05N9VtYQEtwWati 9cNAGE2Wb/4ZwzEiXF+Z3SudSUqD1LGE6jlKC3CGMKlMHLfCkmq91wytO/6ULnDZesnI 4oEw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp74393jai; Fri, 15 Jul 2022 01:04:21 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id i19-20020a056122209300b003685912fb08si790531vkd.222.2022.07.15.01.04.20 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 01:04:21 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411105@lists.postgresql.org>) id 1oCGJA-0005sq-4h for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 08:04:20 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oCGJ5-0004Gc-Cq for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:04:15 +0000", "from mail-il1-x12d.google.com ([2607:f8b0:4864:20::12d]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oCGIz-000552-N9 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 08:04:15 +0000", "by mail-il1-x12d.google.com with SMTP id c16so944557ils.7 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 01:04:09 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAMbWs4-mH8Zf87-w+3P2J=nJB+5OyicO28ia9q_9o=Lamf_VHg@mail.gmail.com> <CAMbWs4-bbPocLuRb2+tL-BRz_fEZAuj7ZS=QdcM7uCe_qtw2uA@mail.gmail.com> <2752.1657807378@antos.home>"], "X-Received": ["by 2002:a05:6102:3d29:b0:357:64aa:811f with SMTP id i41-20020a0561023d2900b0035764aa811fmr4790702vsv.58.1657872261160; Fri, 15 Jul 2022 01:04:21 -0700 (PDT)", "by 2002:a92:c811:0:b0:2dc:14bf:e15d with SMTP id v17-20020a92c811000000b002dc14bfe15dmr6388172iln.305.1657872247471; Fri, 15 Jul 2022 01:04:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q%40mail.gmail.com>"], "In-Reply-To": ["<2752.1657807378@antos.home>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411105@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000064c22905e3d37600\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411105@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=LOPEDPBB5NeRH/dONP5tl5imtNCwBTnIpfuqbobgOzc=; b=U2SgxvMkbZTKoVIOuIWt7yiusCUvKnkLGB4hqAeFmBDl1utQcgSPV5G4UHbn7QtZu7 d6EDTYCA8TqTR6ya+8HkMloDttnq9e+2sryuvQOp7T6PvhSCcm2nwn0pXR8PrlgzvTfP wSr/E3cX64s3G0Lsi3iaSC3dlSDIbWABqka90yjolNVT8CoECZsxtS4MV4QKQz/ceGdY c84gNWUaMK9/A7v6xyCZ/vEHMb2SzfPeQZYyqsP5pi/mmawuv+nymP1PEBdCCzEMJCE/ 2nIsfzh/l7eFq3Ee8H1ELG5nqPR9TbHJKfvz9rNTmfYyPUjexaPy1zpskt+eGDoGeBxT QxhA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8JbBicZubPgyj1OJDwUQ703WdNQFVZtRtjCWpib1tf/ypmeFXj hm+uMswKQg1arr8t5eiixD8TpR4jPrauxXUErn6vkuukYC0="], "X-Google-Smtp-Source": ["AGRyM1sdDFCExRL/0Pzyn+cVJO22zFE2nN5UJxFgpp8k87mz68+3MOrPZYVd8j/pEusA07SzmjeE"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=LOPEDPBB5NeRH/dONP5tl5imtNCwBTnIpfuqbobgOzc=; b=llgm10sITVkKkEhkax3FOWPhIonBWdEgNHm0zBJTCGo43g3NNTZBAi0/8QiTgbXzf+ Jrl/w1e7C7o8DPZCRgcED8mxa4qEqn5wYsmseYbhYBothhOs0ZLwTCa6I5WXGWxJcUK6 QtVUwdoelemCrjeFDHJomdAmLa7Yj4DClveI/u1pVLKtyx/t+pMbIC+AVrHv767JFn5a EMuXH3ZCt/rVogPTVeUrsnRM2O3Hi9RgbiPA4kDAyoxRSU0phWt9mpBErO/462EsRqn1 I/9ZNbmRFzCxYgEMEFfjHocqGv5udY1414nkJcqaFZI0nFj1adoiX7ZKqPqfh+DWFARr 4WQg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=U2SgxvMk; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411105@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411105@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=LOPEDPBB5NeRH/dONP5tl5imtNCwBTnIpfuqbobgOzc=; b=jfIy9lzWHqEP5/sCyn1NAmmNJKSfPeKCl3LItMhAlpPAQ+EhSeZGyZw7X+ucM6DPvx mmUljbPdJ1HmZv3M7FStN7A8lj8ABNYQYjJYxfWXfKoLKKs2guNW7adQTZHEuFNd9y5N YRDVlb6pm+3GhXN8eelMjxj+qmM+1fgPI6UaxOg6CUnmZCTsdW+pkd0gEXjY90sAbqXR ZMRSrA6v1H8mCQClWl2ENrXZpQ1s/TYpKO3KQMIzqRkxX7pcBw/870jwSCBy35qQ/Uxp P9jFwXWLnrc9rFXNvvU4yiwE3soPbn/5L6cS2xeK40Q/v1qswyMtDqze18NJ18890xPh Wqdw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=U2SgxvMk; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411105@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411105@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<2752.1657807378@antos.home>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 08:12:12+00	alvherre@alvh.no-ip.org	Re: Allowing REINDEX to have an optional name	<20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql>	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	141	8608	[]		On 2022-Jul-15, Simon Riggs wrote:\r\n\r\n> On Fri, 15 Jul 2022 at 04:44, Michael Paquier <michael@paquier.xyz> wrote:\r\n\r\n> > This patch has been marked as waiting for a review, however the CF bot\r\n> > is completely red:\r\n> \r\n> Yes, it is failing, but so is current HEAD, with some kind of libpq\r\n> pipelining error.\r\n\r\nHmm, is it?  Where can I see that?  The buildfarm looks OK ...\r\n\r\n-- \r\n√Ålvaro Herrera               48¬∞01'N 7¬∞57'E  ‚Äî  https://www.EnterpriseDB.com/\r\n"Before you were born your parents weren't as boring as they are now. They\r\ngot that way paying your bills, cleaning up your room and listening to you\r\ntell them how idealistic you are."  -- Charles J. Sykes' advice to teenagers\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 10:12:12 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657872743; cv=none; d=google.com; s=arc-20160816; b=PQxY8Wr0wUtuczUQrsGH6SCBiBuhqyDoRrvJb9oWehrgPmXdhUZtrvV1z9A0mY3T7r wcfxV0PEv+bpqll+4Jz7w6y7CRFfmriLy0CuZopdtBtfVbrlvQ0kMBMyrn5QFfbE6WXA chnKUmVI8/sxUiZ+hYG5wZzESqL+Bae7aJf/9sgdZwXnHwBqmbosSNZQ4EIdmHsWTW2N 7w1aFYk1D5i09k/MSrJrU1rxJ3iGoo81+nuLt6Fa1T59xufk0cDk+8exkGSCIWk3of/b hibHoCKcJgXl6vv24yJ9AUN86sEntvQnIxzzwa3OHVXHu2K/7UZw/WrKriqnlLa71sXz 0FSw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp75703jai; Fri, 15 Jul 2022 01:12:24 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b11-20020a05600018ab00b0021d974a276bsi5869286wri.735.2022.07.15.01.12.23 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 01:12:23 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411107@lists.postgresql.org>) id 1oCGQx-0002Mx-Fn for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 08:12:23 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCGQs-0000k1-Q7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:12:18 +0000", "from out1-smtp.messagingengine.com ([66.111.4.25]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCGQq-00059Y-55 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 08:12:18 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id D78FF5C02AE; Fri, 15 Jul 2022 04:12:14 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 04:12:14 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 04:12:14 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id E348936E; Fri, 15 Jul 2022 10:12:12 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:XiHRYgD_P3GvpcWoShnEr6SsMyWElAn1T-zisjWfPv4wxQvI5k622w> <xmx:XiHRYlhXnQeegnUB_No3lOFsKPY6wujl71PPTPD5R_i0A-Ni5LgQdA> <xmx:XiHRYsrcffBRVLpoYyRtuJdCJYfOVaE3bE5n1HdxheIa1Y3wM5d8QA> <xmx:XiHRYjZAB256PuI2yusqKEGNrmUYgn4TDF-cYYUxDkCAV6JMG_IPfA>"], "X-Received": ["by 2002:a05:600c:348d:b0:3a2:d019:2366 with SMTP id a13-20020a05600c348d00b003a2d0192366mr19061395wmq.187.1657872743826; Fri, 15 Jul 2022 01:12:23 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715081212.5b2cbn7borzg2bvs%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411107@lists.postgresql.org>"], "X-Me-Sender": ["<xms:XiHRYsTF7qim8HsGoOBsXnIZ9a6Rxo7wLilF4bzLa0lBnIlPe1syVQ> <xme:XiHRYpxo_gOyckpBQ1_nC3p_E-v4gVBPEtqe-z1iZQiQ8fem1mirj2iAx3l3DWE6A Yvw2nsFkR26Tic2hw>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411107@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:XiHRYp0Kf_REwZcRNVZ1_yhJvxRTfpzNJIcaTQaiDhYG5nMdHIlVNE1CVt9zSFftO0UHRYgj71B8p-EJ6M3TnoI04PPULbm3DAzJtibSn0UyNZPTg4f0GHggFDNxW5wK3UQ>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657872734; x=1657959134; bh=b iXHtphZ6AS956ieP6vAOWmYVFtJLYFWIUHRW0PPMbA=; b=lA/rcKd8Bj6gBIFSL 6SCtSmDGIzC1d/LblMS6Di2gXH0WTn8eK3gyr5bUvntb2PZYbHeLF6Dnm+uUg2HX z54Hp+RS1JFAFwVEMk9Z3+cmqdpvav5pPPy19bt+p2ryePzUaaNauoR/mK6tL8nW P7tVb+KBBUrzI3yY573vmFX62ufC7iXsuGDCp+qsLssQyCeG1bkRex4BXRPxt9XN 4p4HfqLLeBkARdDA/8ayxVFIXqxVdIdrib1V2Ux1IOzx8oZY2NjUvUbwNFsyXM0O d5PBm53gR4brUoGWm22j6ga5pfY7Jz+UABz0NbLAPU7nGgRlgZXLn8PGjUAhshhm 8xJzQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgtdduucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne gfrhhlucfvnfffucdlvdefmdenucfjughrpeffhffvvefukfggtggugfgjsehtkeertddt tdejnecuhfhrohhmpeetlhhvrghrohcujfgvrhhrvghrrgcuoegrlhhvhhgvrhhrvgesrg hlvhhhrdhnohdqihhprdhorhhgqeenucggtffrrghtthgvrhhnpedvkedtffduffdtffff heffhfejjefhgfeiueeukeejkeffgfdufffhudffffeuveenucffohhmrghinhepvghnth gvrhhprhhishgvuggsrdgtohhmnecuvehluhhsthgvrhfuihiivgeptdenucfrrghrrghm pehmrghilhhfrhhomheprghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1seXUgW4npWO3E1Tf6LBpcqmOUyzGE3q+2QlgbPHw2OQ8LgO5aCpWfOKtFGXM8b2JNzH3rb"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=biXHtphZ6AS956ieP6vAOWmYVFtJLYFWIUHRW0PPMbA=; b=IEbitRF74DHLcZVZ3CoNrUnQ1A0e2Q+1c9t2c1IRJKOE3OmKVZNYYXbN+uq/PF29Xm jAiZKW4ecuV8UwAKQQ9SAD8iILBSLAfmWecRb3maXaT1/P5/rsOtrTKR3kF7U9sVslox 7QN/pLYJ2QKmJoFZjbXcG6UEV41/tWO9GvmecfvhCX1Zk0yifXUlZ0VHJEMlyA+WzHqW pZgBrU4cU9+vXr/AIgogj2rIplebrZQN4TIrcSptFeRxXvYWJwYpG002CVooaIpwDfpG z8qAI3mKCEMsPIwWobJ4EUlKK8gND4Nl6NNfFedBYeGMTLI1C+TylyNyVfJO9H7rUi44 3rCg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"lA/rcKd8\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411107@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411107@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"lA/rcKd8\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411107@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411107@lists.postgresql.org"]}	["<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 09:25:54+00	boekewurm+postgres@gmail.com	Re: Non-replayable WAL records through overflows and >MaxAllocSize lengths	<CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Heikki Linnakangas", "Address": "hlinnaka@iki.fi"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	146	7994	[]		On Mon, 14 Mar 2022 at 18:14, Andres Freund <andres@anarazel.de> wrote:\r\n>\r\n> A random thought I had while thinking about the size limits: We could use the\r\n> low bits of the length and xl_prev to store XLR_SPECIAL_REL_UPDATE |\r\n> XLR_CHECK_CONSISTENCY and give rmgrs the full 8 bit of xl_info. Which would\r\n> allow us to e.g. get away from needing Heap2. Which would aestethically be\r\n> pleasing.\r\n\r\nI just remembered your comment while going through the xlog code and\r\nthought this about the same issue: We still have 2 bytes of padding in\r\nXLogRecord, between xl_rmid and xl_crc. Can't we instead use that\r\nspace for rmgr-specific flags, as opposed to stealing bits from\r\nxl_info?\r\n\r\n\r\nKind regards,\r\n\r\nMatthias van de Meent\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}]	{"Cc": ["Heikki Linnakangas <hlinnaka@iki.fi>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 11:25:54 +0200"], "From": ["Matthias van de Meent <boekewurm+postgres@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Non-replayable WAL records through overflows and >MaxAllocSize lengths"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657877177; cv=none; d=google.com; s=arc-20160816; b=agCk3Jg05g8YiVuBnBTjxNcSzwmCpngZtO/5mvoD5LStYX2qUQU/6sYjak2Jixo5zh FfQ5Nzgnbl9D8XzDF6OShMCQF8EElibyoPyXGkDAQbFshCfyddnHmCTOfqxwev78pqRl 9VLVGrThP/ap4CKiBZ34MmqFlHRtL0A3BR4L/pYeAGtBdCRyt43SObqBDKyCu6k6QFUq IWZfi86/m+61r/DCmv6TtS5oCp8eStxkIkl5CSDyu0T3FslNxuIzZve+zr6DAI/A7uXY jHwzApKUz/V3XlRn6oGOLParJXD6uXOW7ys2rhWwLRwuvP+RWbhZNfaSNtkJl7ZHdho2 38zw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp87774jai; Fri, 15 Jul 2022 02:26:17 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b24-20020ab026d8000000b00368ea8805e6si748820uap.173.2022.07.15.02.26.17 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 02:26:17 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411122@lists.postgresql.org>) id 1oCHaS-0000oa-PU for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 09:26:16 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <boekewurm@gmail.com>) id 1oCHaO-0007bg-3v for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 09:26:12 +0000", "from mail-pg1-x52b.google.com ([2607:f8b0:4864:20::52b]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <boekewurm@gmail.com>) id 1oCHaK-0002Qk-4y for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 09:26:11 +0000", "by mail-pg1-x52b.google.com with SMTP id s27so3902743pga.13 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 02:26:08 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAEze2WgGiw+LZt+vHf8tWqB_6VxeLsMeoAuod0N=ij1q17n5pw@mail.gmail.com> <7e44dc64-c6e3-fd4e-4c05-ad36555f57f5@iki.fi> <20220312010315.eqhwbi3j7x4xchor@alap3.anarazel.de> <CAEze2Wj3=PwJzo8ux_4W_eEpMvd7ZMYSBQO4r7iJT01geCabaA@mail.gmail.com> <20220314171445.wyh73j4sfmodtfsy@alap3.anarazel.de>"], "X-Received": ["by 2002:a05:6102:2d6:b0:357:6647:851c with SMTP id h22-20020a05610202d600b003576647851cmr5439059vsh.67.1657877177578; Fri, 15 Jul 2022 02:26:17 -0700 (PDT)", "by 2002:a63:ef4f:0:b0:419:c8f2:8f7a with SMTP id c15-20020a63ef4f000000b00419c8f28f7amr4688500pgk.477.1657877167263; Fri, 15 Jul 2022 02:26:07 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA%40mail.gmail.com>"], "In-Reply-To": ["<20220314171445.wyh73j4sfmodtfsy@alap3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411122@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411122@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=KpKrBgRLd+vxkqWbL1lOCVMVlH+pemWC0NPUyJqIfhM=; b=I9FqKqhaeXVcoalOs8Z2CZtuQn8wk4QU744gNwa0gP5W9wgDxupeKiPx0Ijn3ZGUHk ulYnx+pptinqkQ7swvyvV8vWZMLvh1+rpP6zsg5o0NgbX227+1xHkkj/i0pVhXxXsLsl JFkXsGQAA2htwD/wYFFzMW+Ayno+/eux3EaHsAagOsLkRW31RCIvhTx76sohmtGXr0Ke Azv63Y0WO8+7EAGvarD7XJPqzelzbfc3VlL+cVVxJLh0idg9KXD5HA7+wtCSlrdoCMDN fpLONKN69XhODM71j/jbhTcss/z4x/DMTf8IpPf7WGxEMTNm97YnnhdZk+4BDBgujB4F 5kqw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+7PlHU9eyq2ABnJN13vq/sJbyv5rbDV3XdxVXJfHIFqFG42Hw7 /ajnTaT1e16HTQqPo16bUV6WpYlcp2hTW0RRkHM="], "X-Google-Smtp-Source": ["AGRyM1uWyeLDRF5CctK6uDFm+FGuUOa5BVlcubSX70JqnkkPSQJd6puCFUqzw25qWWHmz22aQVqH"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=KpKrBgRLd+vxkqWbL1lOCVMVlH+pemWC0NPUyJqIfhM=; b=NieUkHkX/3ssJo2kSzYvdjtqxcjpWNtiRE/5aqBPmhiDiU4CFXvzzOrgdQaxBM2Fkt WQUtXp49hqdFi1JSG0mexL1GoCYmDJ8M+/4B6LRumuL6b08T800B00hHKfC7ms83+m6F LiFvZw1eJAeJ16izWxl84WZCoUrkka3pooLWcvAmBYY1/zvFlaBP7hr+4clrL/4fbOIG PIH3IJssT+Uqi7tMR0lswlEn4cso+6XpSOfHLqr9/00aSFvt8uJjoN8Qtx0u7S0rpo3t 97t5VVZ+BB5RaIQM8lJAwzimSj0YYd3pO5IGnt6ozKOGQGkFlFN7TqjL98NVkOH7rdEi bKtg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=I9FqKqha; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411122@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411122@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=KpKrBgRLd+vxkqWbL1lOCVMVlH+pemWC0NPUyJqIfhM=; b=DAf0Csju8LyqeOh9fQ9CrO58yAessNWXPn2QixwB76k0wZ1KW48ErjD9Mc2Cu3/msx vpyM+Z2gyoUbBTaRmdecqXNwMeyLmNDkkjSLkCoypNjIukR/Nzome+bBWBomBugbGIFV 4tiJI6ytF04mrEb+LXS53wOjU/DiHWWXAq0/HDgM2fpZ5v86WNe2DlOfA0TD8xTOytxe BCZ7ny0T5FqZb6vIy/6F2abbRWI1qZMSOltk9Fe34uFxUUnIp65MEQ8rWEjNvdDrUeVU aYG5BDWT9ptPAMAcLW+NiiW1Ik0dy7FaZEqRANHPdxvCkmsqtIlm+2ZzzZcr0hO+e33J NRxQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=I9FqKqha; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411122@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411122@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220314171445.wyh73j4sfmodtfsy@alap3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 09:25:35+00	boekewurm+postgres@gmail.com	Re: MERGE and parsing with prepared statements	<CAEze2WgUBfXK+VJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE=Ow@mail.gmail.com>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	145	8550	[]		On Thu, 14 Jul 2022, 18:26 Justin Pryzby, <pryzby@telsasoft.com> wrote:\r\n>\r\n> We've used INSERT ON CONFLICT for a few years (with partitions as the target).\r\n> That's also combined with prepared statements, for bulk loading.\r\n>\r\n> I was looking to see if we should use MERGE (probably not, but looking anyway).\r\n> And came across this behavior.  I'm not sure if it's any issue.\r\n>\r\n> CREATE TABLE CustomerAccount (CustomerId int, Balance float);\r\n>\r\n> PREPARE p AS\r\n> MERGE INTO CustomerAccount CA\r\n> USING (SELECT $1 AS CustomerId, $2 AS TransactionValue) AS T\r\n> ON CA.CustomerId = T.CustomerId\r\n> WHEN NOT MATCHED THEN\r\n>   INSERT (CustomerId, Balance)\r\n>   VALUES (T.CustomerId, T.TransactionValue)\r\n> WHEN MATCHED THEN\r\n>   UPDATE SET Balance = Balance + TransactionValue;\r\n>\r\n> ERROR:  operator does not exist: integer = text\r\n> LINE 3: ON CA.CustomerId = T.CustomerId\r\n>\r\n> Why is $1 construed to be of type text ?\r\n\r\nThe select statement that generates the row type of T `(select $1 CID,\r\n$2 TxV) AS T` does not put type bounds on the input parameters, so it\r\nremains `unknown` for the scope of that subselect. Once stored into\r\nthe row type, the type of that column defaults to text, as a row type\r\nshould not have 'unknown'-typed columns.\r\n\r\nYou'll see the same issue with other subselects that select input\r\nparameters without casts, such as `select a from (select $1 a) A where\r\nA.a = 1;`. It's a pre-existing issue that has popped up earlier, and I\r\nthink it's not something we've planned to fix in backbranches.\r\n\r\nKind regards,\r\n\r\nMatthias van de Meent\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Fri, 15 Jul 2022 11:25:35 +0200"], "From": ["Matthias van de Meent <boekewurm+postgres@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657877160; cv=none; d=google.com; s=arc-20160816; b=ml0tjE1jOaYBSxje8IvPNqLd271E3m3tG8L2UzBEf65Z1+t0R/d01Y1NLWjGttsfIR vko+sSOr2chGGZcKZ/+39ytNBdXVhD3HKgLZjBpsWFaiGUDPZNy4wnfkGeCJV6tNdAYC sACzC2DJhW2zs+b4omznF3sqjjtxY8ICtBTiqBAhg+PMOcgneyzRxrafh1n4N409d0Wj 1iFZnvP/nMrB725fVsauX+fkoeA3IB83KHNMLQTiYZuZSTRkG7sLgqgO3tj5nvFRw0zy aAcXlYV10nSyz8V4Qo8zpEFR0Tnj2r8HVwwHyWwQp+ZkE3kS7oIlmO94an4Ez13Ej+iy l0/A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp87730jai; Fri, 15 Jul 2022 02:26:00 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n3-20020ac5cd43000000b00374798d0afbsi742642vkm.221.2022.07.15.02.26.00 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 02:26:00 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411121@lists.postgresql.org>) id 1oCHaB-0006KN-EL for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 09:25:59 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <boekewurm@gmail.com>) id 1oCHa6-0004l7-Jy for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 09:25:54 +0000", "from mail-pf1-x42d.google.com ([2607:f8b0:4864:20::42d]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <boekewurm@gmail.com>) id 1oCHa2-0005nW-V9 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 09:25:53 +0000", "by mail-pf1-x42d.google.com with SMTP id x184so4205247pfx.2 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 02:25:50 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAEze2WgUBfXK+VJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE=Ow@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220714162618.GH18011@telsasoft.com>"], "X-Received": ["by 2002:ab0:798:0:b0:383:895:cc9c with SMTP id c24-20020ab00798000000b003830895cc9cmr5520514uaf.64.1657877160312; Fri, 15 Jul 2022 02:26:00 -0700 (PDT)", "by 2002:a63:4c61:0:b0:416:1e62:953c with SMTP id m33-20020a634c61000000b004161e62953cmr11141293pgl.24.1657877148331; Fri, 15 Jul 2022 02:25:48 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAEze2WgUBfXK%2BVJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE%3DOw%40mail.gmail.com>"], "In-Reply-To": ["<20220714162618.GH18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411121@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411121@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=gyZnbGN1W/Eq5XTCtXp9/f7zo8rwdLyXiJMsQF3Xd3s=; b=aj3YdoOLZmXsVLFnzyhc1NSyxv73yp1VaLRwNkok8RXKSqAAzBvo9a1EvRu8cxurvw p+PF9lbEA5aHSljA33/tXKAaCZpmp+yIOw4GzCYIgGpzlZL8fbJErGMMKkNAAnjVVH2l OD8efIwKNyCm8LD9lXaMBEXy6tTHwqGshos6ZHUiS8T0Pcjsd1iwTtW3WFtnqF1MB00u yYLRy9yRecU/LqyKyliDgm25Vq+lJX9QoKEAQNEzbLVl+HClkLDvz/H2YYB2KN+sW7jP pId3VHhsBJFKRAMm8gz2vAqGnaM8v6ZHzkx89kbDP7MtY8uhgcmVQv4soOPlsfYcuZJB tX4w=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+3SMjmVyf9OpjrjAtMM6GLBsPg+zrpeGM//wMW+F8NGl1Ii2I7 mciDoaI0Pbg0YoLwGmE5R+OoYu5Rhf1KhB8xwr8="], "X-Google-Smtp-Source": ["AGRyM1tPaGqIf80FkXRhBKiQFQQGGBcStQNWG4YXTnFm/m+eYkPVOVEc+Jac7ukiMNnV/REkVjFX"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=gyZnbGN1W/Eq5XTCtXp9/f7zo8rwdLyXiJMsQF3Xd3s=; b=LBNCYzo7aPIU/Dc1yLgvC5+tTcSzKbSrAks8KG/ChGs88U9ypoHbEvNnq9mgA//kut TMnRnyQjr9gcXzZdigP4nhdQu+s43EdeoviVpNk+9wg63J8i+k5w5Nz3RKISH1EESzSd +Q3R2x5jYquDyU3ynFkzhhZFdq1hkNyFSX/7727xdFbdH3Ad/miCyEDLpVLFZNICM+At aUxX28TBQit4Nc1LDgEMHuL7UbOwjiG817O8HMF7h4P09xsKbH9OAAhPPdsgkGTdT2PS /vgB+OCPqAYP9lO+n1Ny75eOL0fhjLEE5+AP5A8yz42gOcuRZSBrbUHqnnYDNSU6dbO7 0bZA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=aj3YdoOL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411121@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411121@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=gyZnbGN1W/Eq5XTCtXp9/f7zo8rwdLyXiJMsQF3Xd3s=; b=jMUDaq8U9KdzQDmZapDqgZ5bsIgIF4CapLVLXB80nWHof9VdMqOP8JGf28Dip7uNes K8Q+Yj3OSuJgz80sYLeqTLaVj9vKpl03uLKijLAOsw5h1Lo4oNJ8fmdE1OLHenh8DpAE fAI8beCtcE3PFlQh4CO+Tvhk/SbfDqqz9pS5UK/AIm3n/AmKL+3Ynh/H6Iu3nZZSPq78 qlPcmDuhTcHCGUGVDXuF3D0J5wcpB//d0VT2c6/TzKndx7GMPkUbBPlTMuR+eka3qgte MdUbALsdouk/VnCrCIjCMdNr4u/BNwzLR8uzBtlJjoVp8bE+eX6HNnQAn/nNHPERBaB7 1uow=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=aj3YdoOL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411121@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411121@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220714162618.GH18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 08:49:44+00	katouknl@oss.nttdata.com	Re: Add last_vacuum_index_scans in pg_stat_all_tables	<c4527bc8a1881cd904f7239af64d45a5@oss.nttdata.com>	[{"Name": "Peter Geoghegan", "Address": "pg@bowt.ie"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	143	6337	[]		On 2022-07-09 03:18, Peter Geoghegan wrote:\r\n> On Fri, Jul 8, 2022 at 10:47 AM Alvaro Herrera \r\n> <alvherre@alvh.no-ip.org> wrote:\r\n>> Saving some sort of history would be much more useful, but of course a\r\n>> lot more work.\r\n\r\nThank you for the comments!\r\nYes, having some sort of history would be ideal in this case.\r\nHowever, I am not sure how to implement those features at this moment, \r\nso I will take some time to consider.\r\n\r\nAt the same time, I think having this metrics exposed in the \r\npg_stat_all_tables comes in handy when tuning the \r\nmaintenance_work_mem/autovacuume_work_mem even though it shows the value \r\nof only last vacuum/autovacuum.\r\n\r\nRegards,\r\n\r\n-- \r\nKen Kato\r\nAdvanced Computing Technology Center\r\nResearch and Development Headquarters\r\nNTT DATA CORPORATION\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Ken Kato", "Address": "katouknl@oss.nttdata.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Peter Geoghegan <pg@bowt.ie>"], "Date": ["Fri, 15 Jul 2022 17:49:44 +0900"], "From": ["Ken Kato <katouknl@oss.nttdata.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add last_vacuum_index_scans in pg_stat_all_tables"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657874996; cv=none; d=google.com; s=arc-20160816; b=BTQ/X/hDj+0oKiq6/tF+QYDGivMXiFuD2nX6ifvgFB8j/wEJ9/VwUkGdOJ9agpnI8u 4SrhgYnipjMWP4mpWZH0PPRJPxgHw1lSsV6heQ8XIc477gun9NwTMoLtWql6uzkKxkbX 0GGilh441Xpk7WwA3r4lawFF/uXCwGN+v11o6tl43su4mwghodtKdXngTLa+gLGWTBRv qnYG8s3f9jOAui8eFEX/rnZ71xdWzZvA7ope/cNOIZUCBWG7dy+HGGi3X07U7LJeEUnV 4Wfmkh09p08EM4CgrihXbooSpqPNGpfeuZyRNfGvyJmt9/pNdEundsyfE/laK6PreoUC TdmQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp81168jai; Fri, 15 Jul 2022 01:49:56 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p72-20020a1fa64b000000b003744364b79bsi686830vke.61.2022.07.15.01.49.56 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 01:49:56 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411112@lists.postgresql.org>) id 1oCH1H-0003IS-If for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 08:49:55 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <katouknl@oss.nttdata.com>) id 1oCH1D-0001jK-3r for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:49:51 +0000", "from oss.nttdata.com ([49.212.34.109]) by magus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <katouknl@oss.nttdata.com>) id 1oCH1A-0005UA-Mc for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:49:50 +0000", "from oss.nttdata.com (localhost [127.0.0.1]) by oss.nttdata.com (Postfix) with ESMTPA id 62D51604CB; Fri, 15 Jul 2022 17:49:44 +0900 (JST)"], "X-Sender": ["katouknl@oss.nttdata.com"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<c4527bc8a1881cd904f7239af64d45a5@oss.nttdata.com>"], "Precedence": ["bulk"], "References": ["<ce4a6ee93d78e2c4dafe4c1e515b342b@oss.nttdata.com> <20220708164052.bp62uhma56v7u7n5@alvherre.pgsql> <CAH2-WzkFXZoEEfLrmeUKLHt=0GZGwmuyiY0rkQfer3wUNLrGDA@mail.gmail.com>"], "User-Agent": ["Roundcube Webmail/1.4.11"], "X-Received": ["by 2002:a05:6102:3d29:b0:357:64aa:811f with SMTP id i41-20020a0561023d2900b0035764aa811fmr4831674vsv.58.1657874996609; Fri, 15 Jul 2022 01:49:56 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/c4527bc8a1881cd904f7239af64d45a5%40oss.nttdata.com>"], "In-Reply-To": ["<CAH2-WzkFXZoEEfLrmeUKLHt=0GZGwmuyiY0rkQfer3wUNLrGDA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411112@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=US-ASCII; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411112@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Virus-Status": ["Clean"], "X-Virus-Scanned": ["clamav-milter 0.103.6 at oss.nttdata.com"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1sANymGYLozuaflPb1/G4KxS+/0U2fMONeVN2a0YZbauXywyJFDebqA5bMiNChdp4SY9/bN"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:user-agent :references:in-reply-to:subject:cc:to:from:date :content-transfer-encoding:mime-version; bh=AYdY1YK8wajG1yAd1yqYiSoLIsV1utjP+xKWPTiH8Kc=; b=pUHDJRL5Lo8tKCW+WKIHTXX0AaYSyqdMkLLIgIjL14REKiXQPrkljKyA6aQWk+uXjT 9pkLCLrDULgbJBwvQgQ4fJDRcWwm+x7fnLZeqXBdH3C+B1EN+9grlQG0DBuSxMycnhNL wIEfSCWaBVKPLPPr3IL0rNme5BnXG16Zo4pu+DCXeaKS08v+6a2AXeeCHrhn3QJwROGE ZAbFK5NmpTPugqtxkN20ThV3y7vohAr3r2/5hK+KDZS6unmGOqLaSM2lT4MMAs3qsquJ eJz4i9PRr9j2hUE8U/yln/xSNGqZ1sVz62uFyZBCSyosR+MDgLWHrDN/mPCIcCMBDUuD r8tQ=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411112@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411112@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411112@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411112@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=nttdata.com"]}	["<CAH2-WzkFXZoEEfLrmeUKLHt=0GZGwmuyiY0rkQfer3wUNLrGDA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 09:53:24+00	kuroda.hayato@fujitsu.com	RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger	<TYAPR01MB5866683E55284C28BEFA5D7BF58B9@TYAPR01MB5866.jpnprd01.prod.outlook.com>	[{"Name": "houzj.fnst@fujitsu.com", "Address": "houzj.fnst@fujitsu.com"}, {"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	147	17633	[]		Dear Hou-san,\r\n\r\n> Thanks for having a look. It was a bit difficult to add a test for this.\r\n> Because we currently don't have a user function which can return these\r\n> collected ObjectAddresses for ALTER TABLE. And It seems we don't have tests for\r\n> already collected ObjectAddresses as well :(\r\n> The collected ObjectAddresses is in\r\n> "currentEventTriggerState->currentCommand->d.alterTable.subcmds.address" while\r\n> the public function pg_event_trigger_ddl_commands doesn't return these\r\n> information. It can only be used in user defined event trigger function (C\r\n> code).\r\n\r\nThanks for explaining. I did not know the reason why the test is not in event_trigger.sql.\r\n\r\n> If we want to add some tests for both already existed and newly added\r\n> ObjectAddresses, we might need to add some test codes in test_ddl_deparse.c.\r\n> What do you think ?\r\n\r\nI thought tests for ObjectAddresses should be added to test_ddl_deparse.c, but\r\nit might be bigger because there were many ATExecXXX() functions.\r\nI thought they could be added separately in another thread or patch.\r\n\r\nBest Regards,\r\nHayato Kuroda\r\nFUJITSU LIMITED\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["\\"houzj.fnst@fujitsu.com\\" <houzj.fnst@fujitsu.com>, Michael Paquier <michael@paquier.xyz>"], "Date": ["Fri, 15 Jul 2022 09:53:24 +0000"], "From": ["\\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657878823; cv=pass; d=google.com; s=arc-20160816; b=u1pPGp25uEjm6/930etsEyR719tgu2AdBdPfQwNGj9MxD1DAE4pPrTN8RuBPUqWygN Gohj9HUPEbkB8g5CQQ6PEy1ybggih/QFirGzJHDvtCpwJHr5eYqqn3DLnsRWb161Wa6H 7GSLnjtqftn5L8K8uXwWxZ06joAB3BbYRun0aRUDv28y7g4EkzUPwEwFO9TfWhsP9kIS TS+tqX7m1tkx9JoHrSD7P6uWJ7MQq3DQxymRgdH+35+FmLyuVHINaNvQeXdYk31hRi1s QNEt13guvMTk9Dte/jsRh1BWWvEvkAnEthyxQv4dwfRDIwC0+PEoRBsqeaglqVJCUSHO 51qA==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=OgcS162lhkP7GuFh4/D5LEU7IDbBAaFkkcvZ6xSrhQBduCzmBuDhp1qV5v7d5gXhJuV48JzBwwIvAYoVhb26dr/JL4uq76DXQpsQlcTf02PuyTPpdCjZdPAW+yfw2cjAw0HlPsWQrV8EffV8NN4ShH5kw9cUjzRs+vAiifRiut8Oi8IfWc40Q/m0iPbLRXR8j+hDnc99oulbfyOtNXkR+icdovj2Qxk960JR07gydda02RFaOcU4GNb4WzejVcWwt3AvcZ/28vbHYXnxFm73TOOcofh5p9r1g0FD7ghT9pP2lPQaPADq471K83MrFLI9NEpe0VE/zcRETl5vWfTADA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp92650jai; Fri, 15 Jul 2022 02:53:43 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l12-20020a67b74c000000b003560ef6074esi659040vsh.64.2022.07.15.02.53.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 02:53:43 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411123@lists.postgresql.org>) id 1oCI10-0002E3-M1 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 09:53:42 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCI0v-0000cT-ST for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 09:53:38 +0000", "from esa17.fujitsucc.c3s2.iphmx.com ([216.71.158.34]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <kuroda.hayato@fujitsu.com>) id 1oCI0o-0002cb-Iq for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 09:53:36 +0000", "from mail-os0jpn01lp2108.outbound.protection.outlook.com (HELO JPN01-OS0-obe.outbound.protection.outlook.com) ([104.47.23.108]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 18:53:28 +0900", "from TYAPR01MB5866.jpnprd01.prod.outlook.com (2603:1096:404:8056::13) by OSBPR01MB1845.jpnprd01.prod.outlook.com (2603:1096:603:5::13) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5417.23; Fri, 15 Jul 2022 09:53:25 +0000", "from TYAPR01MB5866.jpnprd01.prod.outlook.com ([fe80::4cbb:6d7c:17f6:19cc]) by TYAPR01MB5866.jpnprd01.prod.outlook.com ([fe80::4cbb:6d7c:17f6:19cc%7]) with mapi id 15.20.5438.015; Fri, 15 Jul 2022 09:53:24 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<TYAPR01MB5866683E55284C28BEFA5D7BF58B9@TYAPR01MB5866.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<OS0PR01MB571626984BD099DADF53F38394899@OS0PR01MB5716.jpnprd01.prod.outlook.com> <OS0PR01MB57163974C18461685AF55E9A948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com> <TYCPR01MB587008E7121BBDDE98482484F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com> <YtDhz3ub0CFfgJlr@paquier.xyz> <OS0PR01MB5716D110FDDBD93DFFBFFD58948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:ab0:698c:0:b0:382:c84e:60fa with SMTP id t12-20020ab0698c000000b00382c84e60famr5324197uaq.99.1657878823760; Fri, 15 Jul 2022 02:53:43 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/TYAPR01MB5866683E55284C28BEFA5D7BF58B9%40TYAPR01MB5866.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<OS0PR01MB5716D110FDDBD93DFFBFFD58948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"], "Msip_labels": ["=?iso-2022-jp?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZl?= =?iso-2022-jp?B?Y2UwNTBfQWN0aW9uSWQ9MGVkZjI2NzctZDNlMC00YjliLWE3ZjAtYjgy?= =?iso-2022-jp?B?MjdjYWU1NWQ5O01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFi?= =?iso-2022-jp?B?NGQtM2IwZjRmZWNlMDUwX0NvbnRlbnRCaXRzPTA7TVNJUF9MYWJlbF9h?= =?iso-2022-jp?B?NzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2UwNTBfRW5hYmxl?= =?iso-2022-jp?B?ZD10cnVlO01TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00MmFjLWFiNGQt?= =?iso-2022-jp?B?M2IwZjRmZWNlMDUwX01ldGhvZD1TdGFuZGFyZDtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9OYW1lPUZV?= =?iso-2022-jp?B?SklUU1UtUkVTVFJJQ1RFRBskQiJMJT8lUhsoQjtNU0lQX0xhYmVsX2E3?= =?iso-2022-jp?B?Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0ZmVjZTA1MF9TZXREYXRl?= =?iso-2022-jp?B?PTIwMjItMDctMTVUMDU6NTY6NTBaO01TSVBfTGFiZWxfYTcyOTVjYzEt?= =?iso-2022-jp?B?ZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX1NpdGVJZD1hMTlmMTIx?= =?iso-2022-jp?B?ZC04MWUxLTQ4NTgtYTlkOC03MzZlMjY3ZmQ0Yzc7?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411123@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"iso-2022-jp\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411123@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AdiWno0Tur3qHjPYRiC4S1qOSup9qABU5bsAAAD9UIAAAabpgAAEvhGQAAfpTFA="], "Thread-Topic": ["Collect ObjectAddress for ATTACH DETACH PARTITION to use in event trigger"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60404302\\"", "E=Sophos;i=\\"5.92,273,1650898800\\"; d=\\"scan'208\\";a=\\"60404302\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657878811; x=1689414811; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=xIudTInOinsmw1oQIASd2qz9Bi15h9l2gdo1CeUOuTY=; b=lYhGVeCj2V5PQiH6Xs4SfJolbTyvTKt3dHjrHR89A4Dyy4oxe+9MX7Fx DD1uycvDQdkzf4Sg6L+dL7iZLGmqapD42CldgoEwBpKbukclEtgVWsLKW ZIjRAfDOp6Uj/0xDlG+hgSkWGPrRjZyKYdwvE+GsAuC9shqCj3h3faYz1 j1WZfs7YErlvJAF2SCZgSDyTEjTGsUW8K3FSc+nPF1hktETSVm+0+DxVt KKxaB0bOjiPqRq7DCvjjYK83G0PRREZayTNxWSJQxmbALCSS45uFV2fTD h6aIA54AzHM6iD2flfaDEmhch8NFLFeId8/ZJFpmzFJJXfPKoZRJhSnmp g==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=xIudTInOinsmw1oQIASd2qz9Bi15h9l2gdo1CeUOuTY=; b=HYavmR/kEn5W+MWIoSVd6fbCZEB8lP9FnuglkGDHoLuJOctsrrFvW9sd+K9UshZjMjOUtN8Wv9EQZkr11ZbDJibDxqLhSTg58Sair8zC3qEqxbOGWhHoQ3bpnWqyh7RS/wwJBCzjrahupeWGKemwVFL+Aur63P/WJRlXHoT4v78="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1s0H4S/fR1PPP8Gaot2qik7V8XS3uCdtcXBVf92cksmLOPeq8yTb3UkoSt5HX4atvcMDgVi"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=xIudTInOinsmw1oQIASd2qz9Bi15h9l2gdo1CeUOuTY=; b=yyqTt8wbLQkKSUCnY+mt81MidpYXhs/3sFQHl0s8SXMLOJedfwjbyCsL2Jhr9BkFn7 S4qSQLA3pWYainbFiZr580+heQSRuMz41R76fx3lnBRt4BPhU3PyGXEumJxVvM6xBd0K MyxdbVXi6l6aplR+H33xPj0jH+8HFIkBuC1XX48kISyTX7nPv/0xD0R42YR7uaO5/YUX Ofp4GOj4b+k89pOldl8onZ/8UcxgDqg0jm7OImK9R7nXTTJxP3oTgv7cg5gEMe0m514u E+Bp9p918PyGho3Ax4zkzNUXotmjouqfXJ95epHJjvCAv0f8tyeZiUsSqxGZZTc4Dv10 LoRw==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=xIudTInOinsmw1oQIASd2qz9Bi15h9l2gdo1CeUOuTY=; b=leEDmrzKuLLuk01GiIlHUrV5ZkTSCMZBCynpZegYxsyu08REqHi3cE+tEvL2lrmpCEe5OhxSRRNu224ghySgRfyXACooDHBhKGXuInZsMtUUhoIXxvH62Fz/c26XfRYstGcp/Q4+rkBPkluhGH39kdzZDY8dsP9pL8G2M0yf4cnuCtNXkocJ8HTVkoY6+vDoSPrk1owrN4swe1YCM/aoQUNTW/m1Ur5Bh+rRZ8zAccFixlKnhUz9j764x6RaFX1r/Hbaip7AOPx3GYSgvZ7wkvHuig2OSSnlvuCGhY1XPVOAohe+yQzC1Ke4Djo2+tmQ9Ms4+u/kyWEVQG1/LXnFxQ=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=lYhGVeCj; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"HYavmR/k\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411123@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411123@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=lYhGVeCj; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"HYavmR/k\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411123@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411123@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["OSBPR01MB1845:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:TYAPR01MB5866.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(136003)(376002)(39860400002)(366004)(396003)(346002)(55016003)(186003)(83380400001)(4326008)(8676002)(66446008)(71200400001)(5660300002)(66476007)(76116006)(66556008)(122000001)(110136005)(64756008)(82960400001)(86362001)(38070700005)(6506007)(316002)(7696005)(8936002)(9686003)(38100700002)(41300700001)(26005)(33656002)(85182001)(478600001)(52536014)(66946007)(2906002);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["NtF7FWUG5v6Y0ezWx5fat/hBhNAPaObMcg5swmm6/znVxtF7lnZnvxbWZT+vyCiUHumACN+u3v+hcTsc810SP5VKmcxEwPMtk9hQdgc4qSUsHPa2xqyBzMuFqQ6w5lKCpAIYRioH6gl6sPObAqXzdVq/6rXn8MNTc5PARA2m0nLgVpXH8gdhuy1EazOACU8iP2zog7e9ugp/qZ41U8DQmuF6RKddmCZQDPrQHlZQ1jQGD+zNv/El35BoaeYTRij9Nd0ViykxZNo/SrTi9hxB/QUxrgNY0wsIhDR72Qw9b4Yd+QOHUZFmQQqHbZS3NZ1iMlRL1L2xlSNEZ0l7l6QzqLWc8LqXLUCt0Iq3LKKVlK03JXDIyClgjOuHgl3kR/+/9P1P6/A0ZF/0NBjIHb+quM9nArFnlzsl/rzFQSeBzLV4uBJm8qjJmJ3ndMnhXrHhPLLYX540KnZDnK+o522IXNb1zCgqE9L4vbZSYoxgd+q4hLF7GlQ4TOre5pAa1kz/7SX3WU514QPIAs2LlERKZqLxwGHyDpnbURov5HLUcWy35zz4zbIzcFcRyBwi/OxurtmD4q1DGPaGNiATdYJFubT9cHuEyvBi1tE28LAmrGpm/5/29SButA8Od1Zfs12/CKh66zxwAoEbcHi7GDO6+nj0gIKQ8++yEm0W3WXgwxRaIgZAbN2JDvPUkepvhB4yXJhBpZsr5LxcFY7rXeaXM2fypkvJ1NbxAPIHY3b1lzv0cy3bqcX0jcLINCvAF+7MTDu74V1xGG5RzIx+mZbXM6gGisVRXw+zhuxIIcRg4Toa6yDqT3Kr3GppYUr0c9zP"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-2022-jp?B?ZmYrZlNRQTFyZng4YWlHdjdPWGZYaWJXeldLZ0lzcVVYQUlRanBxVWd4?= =?iso-2022-jp?B?NisyMzg4Mm8zNk45YjFyNXk5b0txLzBDNEp5QkFiM1ZTSEpwZWNCUEJ5?= =?iso-2022-jp?B?T1hPendBQ2VUOXlaVTJkWlJaSVFqOWtKNU03WEZsUEJZdVlqYlN1ekVE?= =?iso-2022-jp?B?WDhHTFNQOTc1ZkRDSGM3SnBDcFIwQzhjUnBiTUNhWk5uZFgzNkxDVnNo?= =?iso-2022-jp?B?Mlp6REQzb3QySFhRSVRMc2p0RU9DcUNBUk1qVi9PVkZ2VzRKMGxRZDRv?= =?iso-2022-jp?B?cStrME5lK2MxaDc3S05DYk9xL1ZybjVNcS8rWDY2Wnl4ZFl6aUsrRnRE?= =?iso-2022-jp?B?NTkxWWUydzRFQWZKZUV3M1I2NzF4MlZWeHJSVXc1cnNMY0NUMlJnTWFa?= =?iso-2022-jp?B?elFxMXd2cE1wbllFZVFPMlU4cEhlZ0RreXEwYmwwcGZQQ0grRC8vdWVY?= =?iso-2022-jp?B?ODBEYWhIZ2xRUmNFT1lyQTlmSGJYSmNFMWN3YXVJRG1ybXFyalo2eHVP?= =?iso-2022-jp?B?VzBwc1NHZXhlVTFqMWFyeW1sNm1UT3hRZlFKZWZuUE56L0M5cjU1OTFN?= =?iso-2022-jp?B?eXg4ZVBNVTFGUUdpK1BhYytWQW84MGpjTHU3YVhDakFRZ0RieG9EMEUy?= =?iso-2022-jp?B?OW8yMlZ3N1YxZFQvT2FNT1lXOFZLc3Rqbk9USTZCR0F6Tm1wcS9nVzVa?= =?iso-2022-jp?B?Q0JUdjhDNC9ZdGwzK3cvUkZ5R0RoTmFHVW9rODl3R3duTmV4OTgzaVFP?= =?iso-2022-jp?B?cW9qUkZoYWE2cER2Z21XczFWbjN1dnRaZlRRVzMwTjlDK1JKTEtmZlVp?= =?iso-2022-jp?B?QVVQRzQwZ1FMOWpnYlUxZU1TaUQvZXVoek01MUVwUUsreGZtUCtnZVV6?= =?iso-2022-jp?B?L3ViQzdkaVNUTVhCcWxzTEZnVjFFeFZhWU9adnplU2kxU3ludS9SVCtH?= =?iso-2022-jp?B?RFRuT1dqdzF2S3Y4eU5HbitmSHNSdGFoditPV0o2WWtDTG82SkNLTTRW?= =?iso-2022-jp?B?a2RieXUwQlptWG8zRGNrUUI2ZExhSVFvRzZHZ2htOFVsMDRYcThMMGpk?= =?iso-2022-jp?B?b3Z3UDZPWUhqQmsyc2FRNTl5RHNacGtuS1dqMFFKOURhTlBSYnM1TTV6?= =?iso-2022-jp?B?T2pBblRqVmZITDU2ZGFtK2dWSnVZQzlLQTFjdldBMjlnSE5EV3NVbEw0?= =?iso-2022-jp?B?K1J3dHlET2RQM3VaclhLREswbGExN0hDUCtZMFcvNUtVR0xJeURXWmJ3?= =?iso-2022-jp?B?UEQveWNSR29TODBhNXlETldwdElHMUtMTFJKNGVJMWZNeE1zaytTK1hI?= =?iso-2022-jp?B?UUpoSXdzTkJjTVZVU0RuSXpqRGlYSk4raHo4WCtIUHBKOS9tT0xGaFBF?= =?iso-2022-jp?B?MVczMnY2SUM0bXBpM1QxWGY4eDhVQ2x0ak52cjFJMzNtQ2FjeEorMTh4?= =?iso-2022-jp?B?Mzdxc0RJSmltQ3d6U29SMlJpU3FHTEZuWUxVRmRXdyswWTVlVm4yQkxa?= =?iso-2022-jp?B?WXpOV2tjaklVRmFUWUNyVldKZWpTTERIRDNEMnJ3Um5iR01GYW0zQXp4?= =?iso-2022-jp?B?VmVsNHArNExLQTE2dW5oMUZXZ3Z0ZGExVkVnTHUyTllHdjFtc2lTK29h?= =?iso-2022-jp?B?N00wTTYrcmppWWtJVVJvRVdIckMwQkVYS0x6K0pVcVc1MWxjcWNOM1Av?= =?iso-2022-jp?B?YVhtcFpPYll6K2VuTkVBZVYwU1NiWlQ4aUErVjZtYTdqRGhJbVY2R3pD?= =?iso-2022-jp?B?b3ppd2tCazhySk5wMDd3U3UrVkFhV3lMTFZ1TnRWemw4aEEzczJrT0lk?= =?iso-2022-jp?B?WE5tRmpyMTRPSTlZdjNOUFFxNnNSQVdMMXdEc1dGcUtYa1RDUk1MczIz?= =?iso-2022-jp?B?RXBUT0xPMGFWeFhlRUpUTFFDVTRzRXhmb3J0elF0YXk4TVQvMUpLOWkr?= =?iso-2022-jp?B?SHBjU3dhc25DeVc4Vk9Wd1prYjdiL29sMFl5eWJRb1VoM1dkZEx1Zmh0?= =?iso-2022-jp?B?Z3FzSFZyTCtlRmlLSk9zY2xhZ1pma1hKb09wZ1BpeGFVK2pNSnVYZktZ?= =?iso-2022-jp?B?MUpFMmNiMG44S2pkSmNteGc1RkYzbnRBbVl4TENueFlkUzVaMnAxaFJQ?= =?iso-2022-jp?B?bExiWURWZTRFajk1bzZoTWRWNjkzU2xFK1VjTWcxSmxWOEk2K0ZuZDNp?= =?iso-2022-jp?B?RnRQSXBJSWVaYlZFbG50a0VFdU44SExjSUdLV1pPS0xoZFgvVFhJdUR4?= =?iso-2022-jp?B?OGNJM2d5bEV6LzdqeUw2VUZtRGE1d2Q3V1Noakc0L0I0NklVQXZ1YmZD?= =?iso-2022-jp?B?OUJraUhQVzhvODNhVjkzSmxCOUlyUGZtdEE9PQ==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["TYAPR01MB5866.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["6f9d83ad-936c-42d8-2eb7-08da6647dc33"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["ks+gkur96BbYBH/0i00tKkl8zhfjgO2fjgHMmjVy2UdrTWXMTZzG2TnL2rHfhyyXY/wv8Y7SqWCAvMIpLYHLzJGBQOPl1ybhdnAbDOPopvI="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["6f9d83ad-936c-42d8-2eb7-08da6647dc33"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 09:53:24.9242 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["OSBPR01MB1845"]}	["<OS0PR01MB5716D110FDDBD93DFFBFFD58948B9@OS0PR01MB5716.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 09:00:13+00	guofenglinux@gmail.com	Re: Problem about postponing gathering partial paths for topmost scan/join rel	<CAMbWs49bnXzik4ugysngSY+rZ5xVtXUOh9tSgYixu3z0VUJzrQ@mail.gmail.com>	[{"Name": "Antonin Houska", "Address": "ah@cybertec.at"}]	[{"Name": "PostgreSQL-development", "Address": "pgsql-hackers@postgresql.org"}]	\N	144	11400	[]	<div dir="ltr"><div dir="ltr"><br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, Jul 15, 2022 at 4:03 PM Richard Guo &lt;<a href="mailto:guofenglinux@gmail.com">guofenglinux@gmail.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr"><br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Jul 14, 2022 at 10:02 PM Antonin Houska &lt;<a href="mailto:ah@cybertec.at" target="_blank">ah@cybertec.at</a>&gt; wrote:</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\nI&#39;d prefer a test that demonstrates that the Gather node at the top of the<br>\r\n&quot;subproblem plan&quot; is useful purely from the *cost* perspective, rather than<br>\r\ndue to executor limitation.</blockquote><div><br></div>This patch provides an additional path (Gather atop of subproblem) which<br>was not available before. But your concern makes sense that we need to<br>show this new path is valuable from competing on cost with other paths.<br><br>How about we change to Nested Loop at the topmost? Something like:</div></div></blockquote><div><br></div><div>Maybe a better example is that we use a small table &#39;c&#39; to avoid the<br>Gather node above scanning &#39;c&#39;, so that the path of parallel nestloop is<br>possible to be generated.<br><br>set join_collapse_limit to 2;<br><br># explain (costs off) select * from a join b on a.i = b.i join c on b.i &gt; c.i;<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†QUERY PLAN<br>------------------------------------------------<br>¬†Nested Loop<br>¬† ¬†Join Filter: (b.i &gt; c.i)<br>¬† ¬†-&gt; ¬†Seq Scan on c<br>¬† ¬†-&gt; ¬†Gather<br>¬† ¬† ¬† ¬† ¬†Workers Planned: 4<br>¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Hash Join<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†Hash Cond: (a.i = b.i)<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on a<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Hash<br>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†-&gt; ¬†Parallel Seq Scan on b<br>(10 rows)<br><br>Thanks<br>Richard<br></div></div></div>\r\n	On Fri, Jul 15, 2022 at 4:03 PM Richard Guo <guofenglinux@gmail.com> wrote:\r\n\r\n>\r\n> On Thu, Jul 14, 2022 at 10:02 PM Antonin Houska <ah@cybertec.at> wrote:\r\n>\r\n>> I'd prefer a test that demonstrates that the Gather node at the top of the\r\n>> "subproblem plan" is useful purely from the *cost* perspective, rather\r\n>> than\r\n>> due to executor limitation.\r\n>\r\n>\r\n> This patch provides an additional path (Gather atop of subproblem) which\r\n> was not available before. But your concern makes sense that we need to\r\n> show this new path is valuable from competing on cost with other paths.\r\n>\r\n> How about we change to Nested Loop at the topmost? Something like:\r\n>\r\n\r\nMaybe a better example is that we use a small table 'c' to avoid the\r\nGather node above scanning 'c', so that the path of parallel nestloop is\r\npossible to be generated.\r\n\r\nset join_collapse_limit to 2;\r\n\r\n# explain (costs off) select * from a join b on a.i = b.i join c on b.i >\r\nc.i;\r\n                   QUERY PLAN\r\n------------------------------------------------\r\n Nested Loop\r\n   Join Filter: (b.i > c.i)\r\n   ->  Seq Scan on c\r\n   ->  Gather\r\n         Workers Planned: 4\r\n         ->  Parallel Hash Join\r\n               Hash Cond: (a.i = b.i)\r\n               ->  Parallel Seq Scan on a\r\n               ->  Parallel Hash\r\n                     ->  Parallel Seq Scan on b\r\n(10 rows)\r\n\r\nThanks\r\nRichard\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Richard Guo", "Address": "guofenglinux@gmail.com"}]	{"Cc": ["PostgreSQL-development <pgsql-hackers@postgresql.org>"], "To": ["Antonin Houska <ah@cybertec.at>"], "Date": ["Fri, 15 Jul 2022 17:00:13 +0800"], "From": ["Richard Guo <guofenglinux@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Problem about postponing gathering partial paths for topmost scan/join rel"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657875637; cv=none; d=google.com; s=arc-20160816; b=vS0SGST6GG0nh0G3y+UJo4Ld7PVgfWK8ZP0SkTPgQEubymnhSXapcxWK02hiUqjv2c zp6MjMmCheqOlQ9UBOqWAYKmL9knh7xCPzTSR6VGNA/GwFiN1eyoP6xOweaqXuq/Cb0D VZowtpmvc/oxGG1utnbzvDnvRI8cuVoZlt3xqinIPWlKnOEXhbemZIxvOjs5+D6/X5dD F6GNXknsaxMygPik47m3QohliO85UYvsDeqV8CiVJwqn6mXE4mvu1OXozvTBE5TO/zuC WSkvmIh0YW0xYj/HtmS23VB5iZ1zfzTchlmH7RmShn7IzDp6sXibiJrX2Gm6twj1rgwJ ss9A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp82934jai; Fri, 15 Jul 2022 02:00:37 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d4-20020ab02104000000b0038293f1a50csi711487ual.164.2022.07.15.02.00.37 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 02:00:37 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411113@lists.postgresql.org>) id 1oCHBc-0002t3-Kh for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 09:00:36 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oCHBY-0001Q6-1Z for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 09:00:32 +0000", "from mail-io1-xd2a.google.com ([2607:f8b0:4864:20::d2a]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <guofenglinux@gmail.com>) id 1oCHBR-0002FG-Vo for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 09:00:31 +0000", "by mail-io1-xd2a.google.com with SMTP id z132so3449352iof.0 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 02:00:25 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAMbWs49bnXzik4ugysngSY+rZ5xVtXUOh9tSgYixu3z0VUJzrQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAMbWs4-mH8Zf87-w+3P2J=nJB+5OyicO28ia9q_9o=Lamf_VHg@mail.gmail.com> <CAMbWs4-bbPocLuRb2+tL-BRz_fEZAuj7ZS=QdcM7uCe_qtw2uA@mail.gmail.com> <2752.1657807378@antos.home> <CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q@mail.gmail.com>"], "X-Received": ["by 2002:a67:f153:0:b0:357:5e89:6395 with SMTP id t19-20020a67f153000000b003575e896395mr5597140vsm.80.1657875637674; Fri, 15 Jul 2022 02:00:37 -0700 (PDT)", "by 2002:a05:6638:624:b0:33f:18a7:6762 with SMTP id h4-20020a056638062400b0033f18a76762mr7074922jar.233.1657875624890; Fri, 15 Jul 2022 02:00:24 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAMbWs49bnXzik4ugysngSY%2BrZ5xVtXUOh9tSgYixu3z0VUJzrQ%40mail.gmail.com>"], "In-Reply-To": ["<CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411113@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000b41c6c05e3d43f46\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411113@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=2tMSrTqY5cz2xLl5OHOrqwFRZOtEE8GcYN1Gx5lKhpM=; b=fiYcUnZvsRIahNOUkj28QW1Jmf2TaXRsZ0GXrkYZ5fWKMLS+Y0gyDYL3U2/e1or76Z YDZpRwoTPTvo0SmCK5psPhseoeM9F2wmoDQc9p0bmYmWD8cQSIj7ISKvJrcQWvIWJl6Z z1Sh/KoximArk6szBx098AB9rALeUE7V5xKHlGxcNY2p5Ryq80Vz9iar4w72k3w8ibXK rfm7lPzG0XoDy2Ki+iBeHDbg/fFSjZoH7xXMddjlSnfi+0/BotZFScyiJJAa3em4lZnh Bnw6JvPhyeXvB2F69hcDc8TVVhDZHXpb0wMlXebAwpObDvzDSjChvOSesZSF0nBGf69N 95hg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/2yL0Uw387apolYnhdff5fZfpPDcfK+UVfzJRlbqdotSOfdWm5 F+GvG9gDAsnJCrQSyY5zUSCSPyk3s5jrPallWccXH0ondAs="], "X-Google-Smtp-Source": ["AGRyM1tw5xDwxYGG/u0fL845PhB39gFe/lK0I4uNOnKx/NN2BZ1cCe6ADsGjlGM760z+R7T6+OaV"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=2tMSrTqY5cz2xLl5OHOrqwFRZOtEE8GcYN1Gx5lKhpM=; b=Zu9zfiVwq3rhtA7p2Eam/1WEwU9UIRAy3VpuupA/Z/YCUtX5zBQ6DIqObkQempfhjJ 7pD4GfnAhechS4m5mu7+oS/AZ/Bk7XV353cHXXb4TtNNvj3wgaY61OO7fkD3MxpU1ABA a/z6jMgfwVqLsFmS7ty2J+e6l/1Ap4nB7VSMt1jI24ho8YCsi1WeL75mQxdAqkdzHrYz aeokD5eu7USr5HCdpLbDDRH8H1Dsv3LP3DPWX5SoxKDr6BzTCuh7kR7TccnU5DvmYLPJ tpf0f85NnXVcQj5CVavP90Eqh23ma1P81X0I8rPDctwx8Y81msLb6YSyv1bMUJOnHFep QQUg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=fiYcUnZv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411113@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411113@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=2tMSrTqY5cz2xLl5OHOrqwFRZOtEE8GcYN1Gx5lKhpM=; b=injw+ZuhxbReWIVJq4gvhkDypvaEj3sYaCwSBpqhlTzzS7USLTGaHlNRY2ORZYCEl+ wouqv2fdjVQtpHSOcXj3R2QFUTidVh+iK2SBC+//IUyBOrhy8MhuSNJza1qGlw9kd5gn toK9WK9kXaO/SwOoeY/t19kdHxrdtb7OIK8ppagbyOx1vOkdf+wyQCyfvE3uH77Vz1uj JG2xvtJ6OjsQBAuy/jQ0dx/oSvPQhMIQCVSLKR8yxXIDc4J9efVFdLiACUZjWYTTTe0U 0cyH9mE4mo3dC+jiz73FI24+Ehwl717TGiT0yqor5QCrJgTgcvrNa4JumRuHAcZT/9FG GU9g=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=fiYcUnZv; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411113@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411113@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAMbWs49pyveUf81b4prmobCrjL5yoCHJTYf1ey88PkruzRzL7Q@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 08:37:16+00	wjzeng2012@gmail.com	Re: [Commitfest 2022-07] Begins Now	<10812647-A008-498A-8045-FCC5A906418A@gmail.com>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	142	13320	[]	<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: after-white-space;" class=""><div class="">Hi&nbsp;Jacob</div><div class=""><br class=""></div>Abort&nbsp;Global temporary table<div class=""><a href="https://commitfest.postgresql.org/36/2349/#" class="">https://commitfest.postgresql.org/36/2349/#</a></div><div class="">Please move the Global Temporary table to check next month, that is at 202208.</div><div class="">I need more time to process the existing issue.</div><div class=""><br class=""></div><div class="">Thanks</div><div class="">Wenjing</div><div class=""><br class=""><div><br class=""><blockquote type="cite" class=""><div class="">2022Âπ¥7Êúà9Êó• 07:42ÔºåJacob Champion &lt;<a href="mailto:jchampion@timescale.com" class="">jchampion@timescale.com</a>&gt; ÂÜôÈÅìÔºö</div><br class="Apple-interchange-newline"><div class=""><div class="">On 7/1/22 08:08, Jacob Champion wrote:<br class=""><blockquote type="cite" class="">It's been July everywhere on Earth for a few hours, so the July<br class="">commitfest is now in progress:<br class=""><br class=""> &nbsp;&nbsp;&nbsp;<a href="https://commitfest.postgresql.org/38/" class="">https://commitfest.postgresql.org/38/</a><br class=""></blockquote>One week down, three to go.<br class=""><br class="">I forgot to put the overall status in the last email. We started the<br class="">month with the following stats:<br class=""><br class=""> &nbsp;&nbsp;&nbsp;Needs review: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;214<br class=""> &nbsp;&nbsp;&nbsp;Waiting on Author: &nbsp;&nbsp;&nbsp;&nbsp;36<br class=""> &nbsp;&nbsp;&nbsp;Ready for Committer: &nbsp;&nbsp;23<br class=""> &nbsp;&nbsp;&nbsp;Committed: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21<br class=""> &nbsp;&nbsp;&nbsp;Moved to next CF: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br class=""> &nbsp;&nbsp;&nbsp;Withdrawn: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5<br class=""> &nbsp;&nbsp;&nbsp;Rejected: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<br class=""> &nbsp;&nbsp;&nbsp;Returned with Feedback: 3<br class=""> &nbsp;&nbsp;&nbsp;--<br class=""> &nbsp;&nbsp;&nbsp;Total: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;305<br class=""><br class="">And as of this email, we're now at<br class=""><br class=""> &nbsp;&nbsp;&nbsp;Needs review: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;193<br class=""> &nbsp;&nbsp;&nbsp;Waiting on Author: &nbsp;&nbsp;&nbsp;&nbsp;38<br class=""> &nbsp;&nbsp;&nbsp;Ready for Committer: &nbsp;&nbsp;24<br class=""> &nbsp;&nbsp;&nbsp;Committed: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;37<br class=""> &nbsp;&nbsp;&nbsp;Moved to next CF: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<br class=""> &nbsp;&nbsp;&nbsp;Withdrawn: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6<br class=""> &nbsp;&nbsp;&nbsp;Rejected: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<br class=""> &nbsp;&nbsp;&nbsp;Returned with Feedback: 3<br class=""> &nbsp;&nbsp;&nbsp;--<br class=""> &nbsp;&nbsp;&nbsp;Total: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;305<br class=""><br class="">That's sixteen patchsets committed in the first week.<br class=""><br class="">Have a good weekend,<br class="">--Jacob<br class=""><br class=""><br class=""></div></div></blockquote></div><br class=""></div></body></html>	Hi Jacob\r\n\r\nAbort Global temporary table\r\nhttps://commitfest.postgresql.org/36/2349/# <https://commitfest.postgresql.org/36/2349/#>\r\nPlease move the Global Temporary table to check next month, that is at 202208.\r\nI need more time to process the existing issue.\r\n\r\nThanks\r\nWenjing\r\n\r\n\r\n> 2022Âπ¥7Êúà9Êó• 07:42ÔºåJacob Champion <jchampion@timescale.com> ÂÜôÈÅìÔºö\r\n> \r\n> On 7/1/22 08:08, Jacob Champion wrote:\r\n>> It's been July everywhere on Earth for a few hours, so the July\r\n>> commitfest is now in progress:\r\n>> \r\n>>    https://commitfest.postgresql.org/38/\r\n> One week down, three to go.\r\n> \r\n> I forgot to put the overall status in the last email. We started the\r\n> month with the following stats:\r\n> \r\n>    Needs review:         214\r\n>    Waiting on Author:     36\r\n>    Ready for Committer:   23\r\n>    Committed:             21\r\n>    Moved to next CF:       1\r\n>    Withdrawn:              5\r\n>    Rejected:               2\r\n>    Returned with Feedback: 3\r\n>    --\r\n>    Total:                305\r\n> \r\n> And as of this email, we're now at\r\n> \r\n>    Needs review:         193\r\n>    Waiting on Author:     38\r\n>    Ready for Committer:   24\r\n>    Committed:             37\r\n>    Moved to next CF:       2\r\n>    Withdrawn:              6\r\n>    Rejected:               2\r\n>    Returned with Feedback: 3\r\n>    --\r\n>    Total:                305\r\n> \r\n> That's sixteen patchsets committed in the first week.\r\n> \r\n> Have a good weekend,\r\n> --Jacob\r\n> \r\n> \r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Wenjing Zeng", "Address": "wjzeng2012@gmail.com"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Fri, 15 Jul 2022 16:37:16 +0800"], "From": ["Wenjing Zeng <wjzeng2012@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [Commitfest 2022-07] Begins Now"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657874249; cv=none; d=google.com; s=arc-20160816; b=ZmPTa2A/zpZDZoQjXGIufxUCx2hqyOucFRcLc0xgGEZae86Xdluw11uxVRIV3iqVyy VAjM9R55TC6GtM0OdjM6zyLr5IJVBnmVTL+O69VOarSkd38+IJ3BpLOGZ2PrBPg0FCNc A2ILHp5UOTVn0gA1ZcBrTpMeBdyvkr75/x6ESQJqKj/RiitOgMigDlrvqIdAiNZ88Saf annUE2CP3rjL4539IWb1JIqjtLhcEiVqxD4BWaU6FGYCdQsTl6+IHBd6D/wgfdNfGfps at3ahAeffiPqj2b22lWXGg+6kXHZlTCm0u0pQYlLPJR1xIId7i1AT7C7zgyoowZPt0PW P9/A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp79355jai; Fri, 15 Jul 2022 01:37:29 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o27-20020a67e15b000000b003572f9c9492si676446vsl.697.2022.07.15.01.37.29 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 01:37:29 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411110@lists.postgresql.org>) id 1oCGpE-00081r-Er for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 08:37:28 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <wjzeng2012@gmail.com>) id 1oCGp9-0006MN-Oz for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:37:23 +0000", "from mail-pl1-x634.google.com ([2607:f8b0:4864:20::634]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <wjzeng2012@gmail.com>) id 1oCGp7-0001yH-AU for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 08:37:22 +0000", "by mail-pl1-x634.google.com with SMTP id r1so2663576plo.10 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 01:37:21 -0700 (PDT)", "from smtpclient.apple ([47.88.60.64]) by smtp.gmail.com with ESMTPSA id q19-20020aa79833000000b00527af57598fsm3121088pfl.43.2022.07.15.01.37.18 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Fri, 15 Jul 2022 01:37:19 -0700 (PDT)"], "X-Mailer": ["Apple Mail (2.3696.100.31)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<10812647-A008-498A-8045-FCC5A906418A@gmail.com>"], "Precedence": ["bulk"], "References": ["<CAAWbhmg0qMhoLYJLZZM=kRaXHOKrNJZxU+fVE-HcrLG1mHGH6w@mail.gmail.com> <7d046fe9-65d9-9e6e-af87-9c0a266f4369@timescale.com>"], "X-Received": ["by 2002:a05:6102:3591:b0:357:8a66:e012 with SMTP id h17-20020a056102359100b003578a66e012mr5222900vsu.22.1657874249473; Fri, 15 Jul 2022 01:37:29 -0700 (PDT)", "by 2002:a17:902:d4c3:b0:16c:4294:9da9 with SMTP id o3-20020a170902d4c300b0016c42949da9mr12371934plg.142.1657874240134; Fri, 15 Jul 2022 01:37:20 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/10812647-A008-498A-8045-FCC5A906418A%40gmail.com>"], "In-Reply-To": ["<7d046fe9-65d9-9e6e-af87-9c0a266f4369@timescale.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411110@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"Apple-Mail=_9C5EC7BD-63EA-488E-AAC0-1034A4598ECE\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0 (Mac OS X Mail 16.0 \\\\(3696.100.31\\\\))"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411110@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=from:message-id:mime-version:subject:date:in-reply-to:cc:to :references; bh=hPZirxsQvRF6B76PQ67WPeOnrc45eDezftTPTJWXCLc=; b=dd9UotIn5LTou8esCtDJGC5ZSNrXdLkYzKLllovZz4s/zN7taqyIuFJM2+XQlhfc4x bVqTNfn8i6GPKD8/bq6cvVCAWNe0jnKtGulFKdvEHU8Gd1Ya2dNZOHXfuNf3893G8OFE U/Jk3adbKg6OfdM28bDRTpMJH6HcilVStqa/TMtQeF/I4dGEpMz9L6zQG+IYP3CzV0nY oObnO65NTt7/XG/c/Ee4p/lhhH3/DV/W3AyHPLJYgYxUbv9dS1RaaM+nj/46dFNW1iPg /kZw83/FjsEYU+ssDI2B0eYxR4w+JDQ05yYm3Ku8WPecimafg+eQPkN1uBy8KzckGbp7 o9jg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/v/V9NkV9VG+AjpDxCSIu42E/yv1XfkCbVs/oCUkrbIilavpV5 AJ1+nvajio3tHZ6H6yD3mDY="], "X-Google-Smtp-Source": ["AGRyM1somO9bU++E4tvKS5oCmnK7h2ddu87aueZmeobjhPZ92OC/dtkE05jVwhD2pOd92MiLgGzZ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:references:to:cc :in-reply-to:date:subject:mime-version:message-id:from :dkim-signature; bh=hPZirxsQvRF6B76PQ67WPeOnrc45eDezftTPTJWXCLc=; b=NIVlPRZ/JHxPMK0pap9KckLBcJAUKCHnWdIpLQ6wjHeXeNdGw0JiwgJzGAS9k0urk2 i3o8sP0tjh2FWnOByZt24bTc1zKzaM/PtAiJpf7f3nBbRfgiLVTp3LTiKTpeHb2Ar1Z0 unFxNqWQfTLuE2Uefw1aH451BFSOtWehr+CCO7bcH8DjBqisqlzSRxKaR3ufrFfMTFGW 0SGsvTf+vENZZMDFaHSMrth6InSfF3kvl51YgH7D9dudmymnie3bA+UW+W2v8hLaxQzY 8kXlNlrccCCVE6tzVPz9t97cP2U90otVO/iEb577CEB/4nQUJTusZFKKp1Ei8iUR0PHj DzJQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dd9UotIn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411110@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411110@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:from:message-id:mime-version:subject:date :in-reply-to:cc:to:references; bh=hPZirxsQvRF6B76PQ67WPeOnrc45eDezftTPTJWXCLc=; b=VhRKvlTyCWI9nlPXbMN5ftWzyulVKAi3NA1hNdutlONjqPJScQNULUo+UHgFKtyzK1 nNwOLDxxaodVkQMPEhiSlKO9ILDkTDC54Cr//Xor5Ns4siiMvmNuEAaiptIG328GSKg2 VGCvyXvhTa1EemyT9nu2ZJcsyTzEvP6ZfWhuyyphAG5ff5RVueiUNk6Q+aMDAzqwux0z d49jH0dl7Rb5VCO7yPl5NvPqlTfCtwzFDtiiRzLR0umfeb62Gl8B+Nq7ECSv1LYt3hRS MdbMf4XcHQztAU1mZ3Mgp9Bqyo0HHtBE7WIW0KTWbbUh6DwgphjdkkGoQsJ0fpPshRoV HMEw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=dd9UotIn; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411110@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411110@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<7d046fe9-65d9-9e6e-af87-9c0a266f4369@timescale.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:00:48+00	d.koval@postgrespro.ru	Re: Add SPLIT PARTITION/MERGE PARTITIONS commands	<5baa51c4-ee85-337a-6932-9fe8a85a1fed@postgrespro.ru>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	149	6222	[]		> This is not a review, but I think the isolation tests should be\r\n> expanded.  At least, include the case of serializable transactions being\r\n> involved.\r\n\r\nThanks!\r\nI will expand the tests for the next commitfest.\r\n\r\n-- \r\nWith best regards,\r\nDmitry Koval\r\n\r\nPostgres Professional: http://postgrespro.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Dmitry Koval", "Address": "d.koval@postgrespro.ru"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 14:00:48 +0300"], "From": ["Dmitry Koval <d.koval@postgrespro.ru>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add SPLIT PARTITION/MERGE PARTITIONS commands"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657882861; cv=none; d=google.com; s=arc-20160816; b=Zz5TsRHpQwPEs4luYX1Z9VDRm275zWuDyC0Oc1Mx0KMBbon35STUZHglTuJo9OTaGu CY9eWpHDJN7caCPAeX4eUKOpdH3FmA8Ooivdx3PD14niO493YFJEkfBNBRmmU37uHXny L1W9zRY4q+7MKWgiRb9WBzz+dVJIaBkAWG8KBG78prShiCflX21oZLnbqeJyEsDsefG5 jVu4Tuzyv16mIwAqETCHskALeullfYzqBsrJ4oLDaB/QABm1Cz0uDuT1mYsd+MkiBpQz kwKKgJSwIeoBglNxvdgjDPJpmvLiCaNMS1dTlgadzLMha/ahFNrVLdZfwDSyaJAwpoGi 94yg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp105399jai; Fri, 15 Jul 2022 04:01:01 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c16-20020adfed90000000b0021d8b0a841csi4518430wro.400.2022.07.15.04.01.01 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:01:01 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411151@lists.postgresql.org>) id 1oCJ49-0005sq-DO for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:01:01 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oCJ44-00045R-GU for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:00:56 +0000", "from mail.postgrespro.ru ([93.174.131.139]) by magus.postgresql.org with esmtp (Exim 4.92) (envelope-from <d.koval@postgrespro.ru>) id 1oCJ3y-0006mZ-IN for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:00:55 +0000", "from [192.168.28.32] (cyclops.postgrespro.ru [93.174.131.138]) (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits)) (Client did not present a certificate) by mail.postgrespro.ru (Postfix) with ESMTPSA id 1409521C0360; Fri, 15 Jul 2022 14:00:49 +0300 (MSK)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<5baa51c4-ee85-337a-6932-9fe8a85a1fed@postgrespro.ru>"], "Precedence": ["bulk"], "References": ["<20220714081214.s7cie3vbtyyshzuz@alvherre.pgsql>"], "User-Agent": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:adf:e18e:0:b0:21d:8d22:bb24 with SMTP id az14-20020adfe18e000000b0021d8d22bb24mr12248916wrb.397.1657882861805; Fri, 15 Jul 2022 04:01:01 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/5baa51c4-ee85-337a-6932-9fe8a85a1fed%40postgrespro.ru>"], "In-Reply-To": ["<20220714081214.s7cie3vbtyyshzuz@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411151@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411151@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/simple; d=postgrespro.ru; s=mail; t=1657882849; bh=rGl+VGPwNFeztV8PnurpfjR6qB7jMUQkxb0leTynDXw=; h=Date:Subject:To:Cc:References:From:In-Reply-To; b=MW7b38uZ7c9c2y98lX+wGFEU8bwyIeAsiL/Pte5/UbHBkrA4Psl2jiibXg3+TpAkf JTMLyKk1yvAbGEMfROaeJJjTxs6B+H1gKixXFf2SVakYr/ZBSSi27j6Hmf90QaD3ft I6gD1XNV1VEQiubsYRixo1OgrTq9XHJQ9s051mhA="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vi0LRTFnKYQ42tehDvdHSN/8QfXOXYJU0QzBAEs3Mc1zVL2fUZLyjGJnp9sXzE0Czz1pDy"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=Beu3Y2o96Y2tdEwFndpOMekKioXg6SyFRJaBC4A54r8=; b=x5dz4dR+/Gd7QfI9i/d1nuBvGtVP+ivoGQNwpxYiuwVC9xakbOpR4S5x71MVr26z+U 99fwhIyPqwDw9eG7H539GnviVXsQaBQV+1ZFhuw4v0tq3KHRzUK2cfkIYxmNbkUCBd+8 fQGydFYF5gcFa0pteaI8ceXUl18naB4xoPeVfiUomue7N4Z1XzicFK8hSDRnOMTse/ao rorWmbYzeH5v/qeuQgfG3nRxmVF/YzRmhSEfSwv0sKTGpXpJL0LX0/bcFW6tfo7p4GMC iRVOeUGUgT5EdOcXDcGZk/xbrfN1p0XQOQTs13RXU7nu4JV7mha1xlOkJo9KtFeAsZQ2 aZjg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=MW7b38uZ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411151@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411151@lists.postgresql.org"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@postgrespro.ru header.s=mail header.b=MW7b38uZ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411151@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411151@lists.postgresql.org"]}	["<20220714081214.s7cie3vbtyyshzuz@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 10:58:44+00	alvherre@alvh.no-ip.org	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220715105844.e5iuer7bav4chdnl@alvherre.pgsql>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	148	9748	[]		On 2022-Jul-15, Kyotaro Horiguchi wrote:\r\n\r\n> 0002:\r\n> +is_path_tslink(const char *path)\r\n> \r\n> What the "ts" of tslink stands for? If it stands for tablespace, the\r\n> function is not specific for table spaces. We already have \r\n> \r\n> +\t\t\t\t\terrmsg("could not stat file \\"%s\\": %m", path));\r\n> \r\n> I'm not sure we need such correctness, but what is failing there is\r\n> lstat.  I found similar codes in two places in backend and one place\r\n> in frontend. So couldn't it be moved to /common and have a more\r\n> generic name?\r\n\r\nI wondered whether it'd be better to check whether get_dirent_type\r\nreturns PGFILETYPE_LNK.  However, that doesn't deal with junction points\r\nat all, which seems pretty odd ... I mean, isn't it rather useful as an\r\nabstraction if it doesn't abstract away the one platform-dependent point\r\nwe have in the area?\r\n\r\nHowever, looking closer I noticed that on Windows we use our own\r\nreaddir() implementation, which AFAICT includes everything to handle\r\nreparse points as symlinks correctly in get_dirent_type.  Which means\r\nthat do_pg_start_backup is wasting its time with the "#ifdef WIN32" bits\r\nto handle junction points separately.  We could just do this\r\n\r\ndiff --git a/src/backend/access/transam/xlog.c b/src/backend/access/transam/xlog.c\r\nindex b809a2152c..4966213fde 100644\r\n--- a/src/backend/access/transam/xlog.c\r\n+++ b/src/backend/access/transam/xlog.c\r\n@@ -8302,13 +8302,8 @@ do_pg_backup_start(const char *backupidstr, bool fast, TimeLineID *starttli_p,\r\n \t\t\t * we sometimes use allow_in_place_tablespaces to create\r\n \t\t\t * directories directly under pg_tblspc, which would fail below.\r\n \t\t\t */\r\n-#ifdef WIN32\r\n-\t\t\tif (!pgwin32_is_junction(fullpath))\r\n-\t\t\t\tcontinue;\r\n-#else\r\n \t\t\tif (get_dirent_type(fullpath, de, false, ERROR) != PGFILETYPE_LNK)\r\n \t\t\t\tcontinue;\r\n-#endif\r\n \r\n #if defined(HAVE_READLINK) || defined(WIN32)\r\n \t\t\trllen = readlink(fullpath, linkpath, sizeof(linkpath));\r\n\r\n\r\nAnd everything should continue to work.\r\n\r\n-- \r\n√Ålvaro Herrera         PostgreSQL Developer  ‚Äî  https://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Fri, 15 Jul 2022 12:58:44 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657882745; cv=none; d=google.com; s=arc-20160816; b=Knd7A5+7Cl7Y7YBsKfL3+y/pvoPP+yawP5oOUpiX9sFjTHu+jIZSpL53C3J3tkOy/7 ZtkJ+/JjeGoQCw190V6KkQ94qi2QtRsIsqaRpt0IrcEsFdTNoDEKclXY3IPtaoHze98P /PdZvswZtRy8iWHy+OShNx/yu4fccCGFSTrvuyQresfKPJPa+oiN9+0hloUj9UIrLAEU LsfHRTR0qjGAU+GkP69cHHdjOy8LXI/d8k+BNO/RZlo0qpJpeUDuIJC1aBsoZZi+uwqp osv4/4WgrbTnLgwMXRSrPaERX4s34x0JVIlTyV+kHdpQtBsn9uOCv0eNkJOceoWFDFEE MmFQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp105005jai; Fri, 15 Jul 2022 03:59:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m7-20020a5d64a7000000b0021db9a6a87asi7722832wrp.760.2022.07.15.03.59.05 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 03:59:05 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411150@lists.postgresql.org>) id 1oCJ2G-0006sc-S1 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 10:59:04 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJ2B-0005G8-J5 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 10:59:00 +0000", "from out2-smtp.messagingengine.com ([66.111.4.26]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJ24-000365-CQ for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 10:58:58 +0000", "from compute4.internal (compute4.nyi.internal [10.202.2.44]) by mailout.nyi.internal (Postfix) with ESMTP id 4B6455C0132; Fri, 15 Jul 2022 06:58:50 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute4.internal (MEProxy); Fri, 15 Jul 2022 06:58:50 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 06:58:49 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id DD1B536E; Fri, 15 Jul 2022 12:58:44 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715105844.e5iuer7bav4chdnl@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:aUjRYhyTBbbIVe0uFnh0cMhknRQe47mo7_z3YzpoYmQ0YBiLmRFY1w> <xmx:aUjRYkSPnqTeo1-sWVcTGAMwfVh1_y1eEUJYw1tNvmvdwK9zORbU2Q> <xmx:aUjRYka00BdBkvr7MwYDN80X-qV8N2AeNwc2NB_C9aClvRgAHK0niQ> <xmx:akjRYqPckuXi3kwoelzPqYPRHoxQpOC6nEKHU69fJ6JS2OEcz06xIA>"], "X-Received": ["by 2002:a05:600c:3546:b0:3a1:861d:e75a with SMTP id i6-20020a05600c354600b003a1861de75amr19937810wmq.58.1657882745260; Fri, 15 Jul 2022 03:59:05 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715105844.e5iuer7bav4chdnl%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411150@lists.postgresql.org>"], "X-Me-Sender": ["<xms:aUjRYvCWc1x3fuYZ6wiDM4HiPTtYwhpfcFBeQVRB1YYMjqx00igyAA> <xme:aUjRYlgACcTkuovVXCT-F4mAMB_1FpsGc9--3zEz-iWFPjK1F5T-4H3m5YxVUbIwK bGBznBH5CFkRilZxA>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411150@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:aUjRYqmNpCb66jMSRIzr_zAdWKyVA3_WYGuojKH-t2POTfOxTE8Us8alTOsbCgdnYq2Gbfxz-wAVQVSzAR48U5FaglfaO8wyWihHlO6JfQ>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657882730; x=1657969130; bh=m 0cOZfg/19lI57tIFrd+deop30/KJejW50GlClC+I6I=; b=PjMS5M15psbWEkuBJ T4RmIRidJXghaMiRf8P2VCLSkrloPF2zxWcXdKQeHFgjrhvPm12k8YZVrC7eJoBJ C0auzLP++PUZPvoPrn2JYzsHKvLLjwEPqrVqycWEqspD9/Ie0ald5nY+1ymNLLOl 5p/cieiBsqlYEWydSNrilX8OqLBe6eWO+hz1WVQ1Wd82zIdc/WuR6Cgg2zVEZsWl 3R8d38f6HVr+NTJZjyYgG/u8qqfzZYNWuywUPCnxKNyZkUmLULJTnmNKsUoaSeNU //GAZOlCVZxbKf8u9iTxn1cdFxoGhi5FhrmnUVO3ymE3uw0XrMRjHIeyJdHC28TM j4CMw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgfeehucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucenucfjughrpeffhffvvefukfggtggugfgjsehtke ertddttdejnecuhfhrohhmpeetlhhvrghrohcujfgvrhhrvghrrgcuoegrlhhvhhgvrhhr vgesrghlvhhhrdhnohdqihhprdhorhhgqeenucggtffrrghtthgvrhhnpedvkedtffduff dtffffheffhfejjefhgfeiueeukeejkeffgfdufffhudffffeuveenucffohhmrghinhep vghnthgvrhhprhhishgvuggsrdgtohhmnecuvehluhhsthgvrhfuihiivgeptdenucfrrg hrrghmpehmrghilhhfrhhomheprghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhr gh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sA5DLIX/4BESe5BOtZpI77e5Eax7HUIvjnyfV4/93/nJbtUlaUYikcg8dGe0OqhPgYXlPw"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=m0cOZfg/19lI57tIFrd+deop30/KJejW50GlClC+I6I=; b=J63BkiinfvqvF2RVz4Olwb/OHGOoCGRL8dPmO14JFtDA+L4yQZoLGRv8UoXEUJ8rmm +0nWtm1zM7R1yl+0lAG7MSRnpDMPlhHup9iAw/19AhtYgudcgEU4XQNaMxCX7Eq2E6rI 25HbprvjyHk/UwKf4hjzlkyI3SPE0aMrbhp/lnWb/1MHu5rA3pGI1iXf4s4Uv0bw2QR6 7KFQhgMa8rC35xnDLxT3YwAABbHl+tSgmY4KrCWRAMD+Zc2ADLP0faQdaG/pGE9RNvFP SP/hGwOwNMUDiyW1RGamivUwtkSnfdXjlBo1vitPq+n6lGbsfdsvTbP83z07VrYnPMc2 bjSg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=PjMS5M15; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411150@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411150@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=PjMS5M15; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411150@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411150@lists.postgresql.org"]}	["<20220715.163059.337322153376727951.horikyota.ntt@gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:15:32+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-E4tEG=pBnMw1UaRwFVMFEtRdzptpoxd-tDbb+_433vLw@mail.gmail.com>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	150	8563	[]		On Fri, 15 Jul 2022 at 09:12, Alvaro Herrera <alvherre@alvh.no-ip.org> wrote:\r\n>\r\n> On 2022-Jul-15, Simon Riggs wrote:\r\n>\r\n> > On Fri, 15 Jul 2022 at 04:44, Michael Paquier <michael@paquier.xyz> wrote:\r\n>\r\n> > > This patch has been marked as waiting for a review, however the CF bot\r\n> > > is completely red:\r\n> >\r\n> > Yes, it is failing, but so is current HEAD, with some kind of libpq\r\n> > pipelining error.\r\n>\r\n> Hmm, is it?  Where can I see that?  The buildfarm looks OK ...\r\n\r\nI got this... so cleaning up and retesting.\r\n\r\n# Looks like you failed 2 tests of 20.\r\nt/001_libpq_pipeline.pl .. Dubious, test returned 2 (wstat 512, 0x200)\r\n\r\nFailed 2/20 subtests\r\n\r\nTest Summary Report\r\n-------------------\r\nt/001_libpq_pipeline.pl (Wstat: 512 Tests: 20 Failed: 2)\r\n  Failed tests:  9-10\r\n  Non-zero exit status: 2\r\nFiles=1, Tests=20,  4 wallclock secs ( 0.02 usr  0.00 sys +  0.66 cusr\r\n 0.64 csys =  1.32 CPU)\r\nResult: FAIL\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 12:15:32 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657883755; cv=none; d=google.com; s=arc-20160816; b=BQh704C5yoz2mS1TdrMbQPPUubRaQ+ilm3pQwcyEgLHy/5pw0++sTVXU5WTUTTl3Xp jNMjTadVIfbSuW5cff5+8AjdxEMBylpUOH/20TOoIWn5UY4n+P3yLAIsm4aGRMDqHowZ IATUusDk55o3YIQlWwVQw1fCG3ahppRwOg/a/q0Jasc83iVL8Ne0guzR+gk5BHXq5ygX XGGUln2QQgUtna1PzhS8qYdka8Jq2fEB/GDOPdU9VcZk1El8N4uqeEIuM0EPYAuAdoLZ 5RXApkY9p722nmEthsiBHMCeHWMemmie1ajCZz9zrP8ZgtHrGpJE62US6UabaFXoyE9Z ZM/A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp108690jai; Fri, 15 Jul 2022 04:15:55 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p27-20020a05610223fb00b00356d01e9881si756700vsc.642.2022.07.15.04.15.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:15:55 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411154@lists.postgresql.org>) id 1oCJIY-0004yL-JW for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:15:54 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJIT-0003Si-KX for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:15:50 +0000", "from mail-oa1-x32.google.com ([2001:4860:4864:20::32]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJIP-0006vF-SA for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 11:15:49 +0000", "by mail-oa1-x32.google.com with SMTP id 586e51a60fabf-10bf634bc50so5845950fac.3 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 04:15:45 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-E4tEG=pBnMw1UaRwFVMFEtRdzptpoxd-tDbb+_433vLw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com> <20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql>"], "X-Received": ["by 2002:a67:c307:0:b0:357:3d7b:c0b with SMTP id r7-20020a67c307000000b003573d7b0c0bmr5527957vsj.70.1657883755555; Fri, 15 Jul 2022 04:15:55 -0700 (PDT)", "by 2002:a05:6870:40c3:b0:10c:ca90:b13c with SMTP id l3-20020a05687040c300b0010cca90b13cmr7598937oal.253.1657883743424; Fri, 15 Jul 2022 04:15:43 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-E4tEG%3DpBnMw1UaRwFVMFEtRdzptpoxd-tDbb%2B_433vLw%40mail.gmail.com>"], "In-Reply-To": ["<20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411154@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411154@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=e6ZxcZwqoaqF8/hqkLWRjsKcplQmgqe60wwJsf1qoI0=; b=Yq+EHWRZ3KkISv0WHvnUX0jXUIZ1XkHGVM/yNSPjWC79YDyyIBfzKWmgjiVTcQyRac gGwsGrW38cUM/G8LuAC5tpXlgTQfkA1JQuVP3CoCjdT5ULIykIWdelz9yw/e4zfUj8G1 wpdpt/ptan62bjrelW8XJGCKNsw+f6KSV40MBIZ4aRBSO4gmbirvsdJPs1vK9M0beGsf KASkCz9nhhrbJUQ8fFBJNjcaCuPU5YEnMGN5k1aDz2YGNlqwd+ywqXwOFSCdiF61kIRR Qq9YhkKC2UpY2JKRjMfG1OSLTLk1Mt9UW+RCAad590GMlt4l4bmtT2WKjm9FlaNOmdIu 3wag=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8HE73Yg4YifA/qWnWw79E27CslQh5lg+dYDjTpY26FcdQnqp6q LxdxKUFUe97tDSoCR5g8OzaAqYOER+yF3Nis/IqMnjdu32LLZRZSq5cwZM2srP9tvOCNiSmY1yl c9kSO5k0FVKSZipklA/wSTgArQ02gwznLbHfIKOBfUO8R0G3IawomjP8sboanhcykBy8nPdVPZ+ rdK7K/q6sqLguYOfTm+YFdnDlK0KYO+naGPjtZC8sCMTAI6SbwaysN"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1vOa/C0MRwXhoCb73SRClBninmPZMDFiSVLlvAnS53+xj1WAuuhdwQ4n9SzyakWoY6Xqwnz"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=e6ZxcZwqoaqF8/hqkLWRjsKcplQmgqe60wwJsf1qoI0=; b=kYMSxqwkPRsTT41nusLMzjmN4HyuoXFvTuGIx6yf38rUXV9tzpAKyRE6jnB6f4ugsV giLBa+x+vpc+W4OHSMPIfTBOrInSKt7Mdpwib/6I/QD65LghCv7rnURWNLIVdPrwX4zO OMP5dt7rjFPBvskknCcnNPFr79uIvS/8oILYNbjmK25DNWXyMdPVNTpTgYwwPBycCa2x ZGohVgS6kA2Rw82/kAAAWE/nPWwEMx3hnqTnhDCKx7nMIMNAREufxzpV4PZGcdNmME3E xdqYGHHlvYM5sExoWMD26AmL02Fc307ewtmoYXb1MrXSEPN0v6fLI9e+glwlLp+9fIgT kDXA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=Yq+EHWRZ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411154@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411154@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=e6ZxcZwqoaqF8/hqkLWRjsKcplQmgqe60wwJsf1qoI0=; b=2WFL6dkRAvCk3wAL6RPOVyGhBDLWjiKhLsZtxmRfKoNWr8Q6fGBeQLyOu9ymSDzaIZ EToRPZuEwbHdRvnLktEb9RhZhVg+dM3GI8vxsq6yr/RJ5a0FPDFK/j2e/m4kmYRxt+oG 9ZnsD3XMp3Q7sUIa31bGic4U+u1kxtUVbjb58maJLiV5yIWCypzwyGASSvBka9gLgK2L tImSntJowUEHcawzmZ2LmdY5PXt8SkfM7c8iQz2aTe6oJBhzfThRIMEHSZmOXyIGEBb3 VKAT/7SwF1FjgHo2sEDOorzdN+6HcJlfd7T7UdxkcxpHEWpFZ7zsbtOzsdLyGXB99cEV TbqA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=Yq+EHWRZ; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411154@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411154@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:19:37+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-HuWHuxFFZMJkEKOqW_ab6nQXYX4T4_+nbG1N=JEG7dcQ@mail.gmail.com>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	151	8824	[]		On Fri, 15 Jul 2022 at 12:15, Simon Riggs <simon.riggs@enterprisedb.com> wrote:\r\n>\r\n> On Fri, 15 Jul 2022 at 09:12, Alvaro Herrera <alvherre@alvh.no-ip.org> wrote:\r\n> >\r\n> > On 2022-Jul-15, Simon Riggs wrote:\r\n> >\r\n> > > On Fri, 15 Jul 2022 at 04:44, Michael Paquier <michael@paquier.xyz> wrote:\r\n> >\r\n> > > > This patch has been marked as waiting for a review, however the CF bot\r\n> > > > is completely red:\r\n> > >\r\n> > > Yes, it is failing, but so is current HEAD, with some kind of libpq\r\n> > > pipelining error.\r\n> >\r\n> > Hmm, is it?  Where can I see that?  The buildfarm looks OK ...\r\n>\r\n> I got this... so cleaning up and retesting.\r\n>\r\n> # Looks like you failed 2 tests of 20.\r\n> t/001_libpq_pipeline.pl .. Dubious, test returned 2 (wstat 512, 0x200)\r\n>\r\n> Failed 2/20 subtests\r\n>\r\n> Test Summary Report\r\n> -------------------\r\n> t/001_libpq_pipeline.pl (Wstat: 512 Tests: 20 Failed: 2)\r\n>   Failed tests:  9-10\r\n>   Non-zero exit status: 2\r\n> Files=1, Tests=20,  4 wallclock secs ( 0.02 usr  0.00 sys +  0.66 cusr\r\n>  0.64 csys =  1.32 CPU)\r\n> Result: FAIL\r\n\r\nYeh, repeated failures on MacOS Catalina with HEAD.\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 12:19:37 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657883997; cv=none; d=google.com; s=arc-20160816; b=es/A1sOWW8qcNTHKidv59y3UKkWiSZ4ZpjvgdM9nQtPgwvEZNjUtkLsKZVHi5PZogS Q4AWymm3lHsSwl4OaGScLIZ7bZ4FB+/LBytNMzQG6nJHvJoifcb6GUofHTwJfvl08a+s ZAwDsLweJm1E6FYcQ95iEZlYO6ATrECeF0nrFspbsyVCOpfMgQoHqWqTW0pfa+61d0Nb +A0gUVVS8V9uTdKDanKRQtOAuvnMAemMGeJOwSO51iPm/Re5+BJb7Hep2qsyCqQJ6fMC 373lLcxetAyLsi/UU39lxXkGx8tH6aZ612cfrk0nJAXxLnj7bTC+LeV1VVH4w50s7dl5 /UEg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp109412jai; Fri, 15 Jul 2022 04:19:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id p74-20020a1fbf4d000000b0036bfac1a83esi768793vkf.158.2022.07.15.04.19.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:19:57 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411155@lists.postgresql.org>) id 1oCJMS-0008Qm-UY for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:19:56 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJMO-0006sb-Bd for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:19:52 +0000", "from mail-oi1-x22c.google.com ([2607:f8b0:4864:20::22c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJML-0006xB-Ss for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 11:19:51 +0000", "by mail-oi1-x22c.google.com with SMTP id w81so5771534oiw.0 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 04:19:49 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-HuWHuxFFZMJkEKOqW_ab6nQXYX4T4_+nbG1N=JEG7dcQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CANbhV-GDU9m5C48Xxhkng3oGriZUPhZ1me_y6-CJjBGSvUAvMw@mail.gmail.com> <20220715081212.5b2cbn7borzg2bvs@alvherre.pgsql> <CANbhV-E4tEG=pBnMw1UaRwFVMFEtRdzptpoxd-tDbb+_433vLw@mail.gmail.com>"], "X-Received": ["by 2002:a67:f5c9:0:b0:357:515d:a6ea with SMTP id t9-20020a67f5c9000000b00357515da6eamr5248933vso.51.1657883997854; Fri, 15 Jul 2022 04:19:57 -0700 (PDT)", "by 2002:a54:4f01:0:b0:32e:726c:bced with SMTP id e1-20020a544f01000000b0032e726cbcedmr7121781oiy.253.1657883988012; Fri, 15 Jul 2022 04:19:48 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-HuWHuxFFZMJkEKOqW_ab6nQXYX4T4_%2BnbG1N%3DJEG7dcQ%40mail.gmail.com>"], "In-Reply-To": ["<CANbhV-E4tEG=pBnMw1UaRwFVMFEtRdzptpoxd-tDbb+_433vLw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411155@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411155@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=7T10qGByh9wNg2N6tiLJdLLyLSmmbN6upjY0KOACGa4=; b=JoWAU8Ldet1HGyQTxSXh0FHoiX3QqGGlT/y7KWEoNomKWXch1toiNi8WDb/YmvEQox VltjymTDWkXHwQB1RGIuJjNk4FJvCzN4yXGvo54+hbR4GuMTgcDKJXnOiEm05I26KbCl 4nBF2hLxa2PWOeQKvAfCmkd04YhdgCMErpUqWH5/Jfuylx8ye20opSy6NxlBK1YEi7vM 4ACBYTVOkmHnPWmPZt+n+cWGV38BUpmak4EIQCktjnd/2+a51gDQ5q4RPypZxyBBMNSV 0fI+0Z3GEWJfWpgAskuruUwajH1Kyv/oe/a02nIG4zsai9VxyN+JaV/evY6YxPj04Vwe hLOw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+uhKN+3hG+iE2iF2sf4NiMExuurVcvs3ipEcHKHaVUDmdcm/cc LixSAOELmwuKpl5r+Rzm37WmD5Qo2Ue/Ew4iEhNYJu/B+1ZwZQQ6NnTUBkfUvMup5hIS7aktYNG CM0rZSKMAbF5POpJgY97WbwbTnd6f7F3MDfKRtvggPfGUxaTI/89qol0Xr/AD9lSogoavLdKWy1 ApBYmCQAh5bCYOcFBwWCrkpRwd6CzxwJsUfNJ9iidpUTUSb7VpWtTH"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1vgjJMN3YR53gfG8z6LsgYPZwOKdpifD7hNPRHCVAIgn3M1uArdxcxxLzE0JDGaCDdFzA8b"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=7T10qGByh9wNg2N6tiLJdLLyLSmmbN6upjY0KOACGa4=; b=FxaZfRl9hjG7YLyM7jl2bEV1ozDE1iJt3IV54pk0D2I4ksdXh34LGpoMjPwtCp0yqn QTMax+IWa8plfcFyfqGRKDicq3ajorEN7WgKHLWhV8sGPrrbSzGPi0jyR0hf0HyPdefA mib1TvbKb3IvShpQVugObTYFrcLbwB59eODjdQIIdpgY9wTEeFIFrsPzMW7oajICcECx mN9/hl5IubpF+8ed9igxjicuLomtrH5YpRMCFxVX+iqDWxrflqjkhmz6d3hgdxZZqg5k G6Eff5TmAVtjlzvjpIWgjTIu3Iz/XVjZHa9aFzNGYzGYI6AHAWqT98mhCEwvoZ2yRVTb t17Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=JoWAU8Ld; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411155@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411155@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=7T10qGByh9wNg2N6tiLJdLLyLSmmbN6upjY0KOACGa4=; b=wiYz7DuEp6LirgxEgXUEXxM1XOWCe9QyT2/XUxApuxWyytxkVr+ax6ozy82do7miXM 3qbQ0rGxAejhwkrblZUSvwoluXpW6p8BpO3ecJeVagjun4Wt/WT6K+uD/S8Dpvu+W9Vu l7JkL0RDOXqPuUkCV/x377Hvxv283XIUK46M+/jw/VJSi6I67lKWWh/bPTZaVCWrKLvW l+T19xwaSqrYLktlN/BhIX3X/Szslcu/qnsTBa1iK3dvuOt6yF7ZTSYJqFQEJq1JWsZU LX6g2W1VrD8TXHO30MqgYTK9JaJD4fMMJkqAEt9ScYgiDKJlVnmqgq3h78Nj1k6RCQ7U u2yQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=JoWAU8Ld; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411155@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411155@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CANbhV-E4tEG=pBnMw1UaRwFVMFEtRdzptpoxd-tDbb+_433vLw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:20:58+00	pashkin.elfe@gmail.com	Re: Add 64-bit XIDs into PostgreSQL 15	<CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com>	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "Postgres hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	152	9228	[]	<div dir="ltr"><div dir="ltr"><div>Hi, hackers!<br></div></div><div>v42 stopped applying, so we rebased it to v43. Attached is a GitHub link, but I see Cfbot hasn&#39;t become green. Apparently,¬†it hasn&#39;t seen changes in GitHub link relative to v42 attached as a patch.</div><div></div><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div>Best regards,<br>Pavel Borisov<br></div></div></div></div>\r\n	Hi, hackers!\r\nv42 stopped applying, so we rebased it to v43. Attached is a GitHub link,\r\nbut I see Cfbot hasn't become green. Apparently, it hasn't seen changes in\r\nGitHub link relative to v42 attached as a patch.\r\n\r\n-- \r\nBest regards,\r\nPavel Borisov\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Aleksander Alekseev <aleksander@timescale.com>, Postgres hackers <pgsql-hackers@lists.postgresql.org>, Stephen Frost <sfrost@snowman.net>, Alexander Korotkov <aekorotkov@gmail.com>, Andres Freund <andres@anarazel.de>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Maxim Orlov <orlovmg@gmail.com>"], "Date": ["Fri, 15 Jul 2022 15:20:58 +0400"], "From": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add 64-bit XIDs into PostgreSQL 15"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657884112; cv=none; d=google.com; s=arc-20160816; b=NWbjBu16B6uAEnurBLTi3jiGhQbDtZV+JW8qjGKEkH3QL9AB9k3re3EPoeY0CHrwHh PGbqN0+QmDwm2lDdZd8nLII1L06MuTmk3hdl0LhSk9lX1VwyCJBxDasAOQH9ZFZCp7vm OZ6XMuMgP9iYMTaHOB+9FZKwzmgJJFmvpN7JpLPEV/cfkilE8Xupuj4Pm4cCLiUaSbFd ZmjyE1VqogMELxWlJgz4rWk/zrnRJAJFtLk1+oVIe3fQqD6q7nIADST2MQWP8qIkgQvN EkWADDTkSSpVCICxXC/fQm5O/JNyeHzKeE6iT9M3IS0H4OatsCWKRO2aueJDiJ/XIIJs CyBw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp109775jai; Fri, 15 Jul 2022 04:21:52 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x128-20020a1f3186000000b0036feb7d8e01si784318vkx.174.2022.07.15.04.21.51 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:21:52 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411156@lists.postgresql.org>) id 1oCJOJ-0005rf-2W for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:21:51 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCJOE-00040Z-9O for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:21:46 +0000", "from mail-yb1-xb32.google.com ([2607:f8b0:4864:20::b32]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCJOC-0006y9-3U for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:21:45 +0000", "by mail-yb1-xb32.google.com with SMTP id l11so7890234ybu.13 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 04:21:43 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220319174058.GS28503@telsasoft.com> <CALT9ZEHHs1eXHGAjUViEQRyC6_+Dki8Ss9y2ZLGXiEHhJaATmQ@mail.gmail.com> <CACG=ezaxzvZwfF4tXC=CvFv8_7zeh-AyO4CNh4_W4pUKanUxpA@mail.gmail.com> <CACG=ezaoJTH_1f8HATzgU+2LNSVxBggZ5DjbBzKyRZyXHSn0Ug@mail.gmail.com> <CACG=ezYVCyn9-LrH05XdgEAg9PVO+8ieUpjerFd7He9CwStovw@mail.gmail.com> <CACG=ezZ96DAnVOC6DkbQVPJE+Q2s-JoaFERXWL0SsDcaRg8Wsg@mail.gmail.com> <CACG=ezZD9p_qrxCiB=nUHYiQ-idSUQqk3j0xAotkrF9_s20gsA@mail.gmail.com> <CACG=ezb=y_N1yL_r2idtf-hTuu6AHpgFH-s4a9HMCm-AbykAMQ@mail.gmail.com> <CALT9ZEGpr3WEPFJL_EHtzE-vF09SPYeAVyoPYZUuG1=yX5oi+w@mail.gmail.com> <CALT9ZEE3aMAT+sATzPEzrti+DZwBse+9+XoiuKkGJV5k=5TrFw@mail.gmail.com> <20220701025335.GA13040@telsasoft.com> <CALT9ZEEg+efQ8nzt3Fn+vHdH19WOAzdACAZtxe9_8_96n+kXNw@mail.gmail.com> <CACG=eza0tv5H4mA+UF_Vk7_cPSQ6kFbzSxKFTuR1o=jmLoo9UQ@mail.gmail.com> <CACG=ezYfMkhEZOAV8b2Cmr16hsb9U3mZv+=8NT1Ox6A0u5L_Sg@mail.gmail.com> <CACG=ezb_YRCg94BUVqAGWjk-4M-LZOHVvFfcXSt3-acRr2xhyg@mail.gmail.com> <CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com>"], "X-Received": ["by 2002:a05:6102:3cf:b0:357:6715:9531 with SMTP id n15-20020a05610203cf00b0035767159531mr4950490vsq.61.1657884112015; Fri, 15 Jul 2022 04:21:52 -0700 (PDT)", "by 2002:a25:7754:0:b0:66e:468c:72b5 with SMTP id s81-20020a257754000000b0066e468c72b5mr13057863ybc.576.1657884102229; Fri, 15 Jul 2022 04:21:42 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALT9ZEE9%2Bn_SE4_%3Djtmisah4wfB990DgVDzf2PwVOce-6kQ8QA%40mail.gmail.com>"], "In-Reply-To": ["<CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411156@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000fe024c05e3d63879\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411156@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=E8Wasjb3YoHJujIRFZcs7UarvLgOw1Hn1t9bZAxofog=; b=OIU+SEVsyL2kpNSlQTbxZzKZsYgPhrzZQ/dgegfymQEBn74UK2raD1LVEy01WVxg5Y RIoUWL59hlzJ/vs5g6Axtyrzl4kcHUWgTUnnd0tuGJIOBMmc03RzzPpK3KK+fwxTYG7B qCnCtgNb47jZ5nHC8ZHDUEeJ0LJWlnpQ9XpVgs3kLkyH47N0PFW64dG2kPkH4MovY0LV 1WgxT5fkjSRRawllHBouSShZ8Xx4F4jXQi881mCe6bBsPQw0ucaTqy4nfn1kTdrQTyjD qex+lTRgMC2zTZhGNWXDcTedec+1OtJhIMNmAt6Ueqrs42TpXNreONUdDTAiZ5E6Qn3A lczw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+dWAoXPWKlwcrMKC2WiJYsVA6hxvFzxyV5PiCRgZZ95Dn9wivd EnveKzmaK1ToHzmPFjHOCoaiuUI0nnke289ltzU="], "X-Google-Smtp-Source": ["AGRyM1vbFu8W7nQcT3SkcTidexqO2J1yxx1/iaFlXdixR0yaxs2uUc4Ic8bV1dF1nh8mFwZbwRa1"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=E8Wasjb3YoHJujIRFZcs7UarvLgOw1Hn1t9bZAxofog=; b=f43BXiTAI2rzSF5hPzjG5382Ctz3lkXejlwOovLKd4GvM+ud7HBbpHOL2PowUFZC/N CE8O7yg6AaUkfwF+r+7wgNmEJHu4Vg6Mqy7vMDjF6wBnX1gyyCwXswaX6jVZPiN+qPIQ jN3YXnxCsSqoySTocrqwMdmEsDJb1tYYnb1KEX28cTNe9I4VdCpBnpUQ+j7PjHOKKSae oZbgOcinVR2jvi1tVoK66HAMaggKUMtFvch0AdMIJXVqRaDUokYlya2EKG+VKgmmBiYP lUEz9dRgBGZ/tF/wjPmIgY/HXDVwFWyEDtsD49buzd8rl3+4Cutz/Um2aQucla4TzoaP 8P6g=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=OIU+SEVs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411156@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411156@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=E8Wasjb3YoHJujIRFZcs7UarvLgOw1Hn1t9bZAxofog=; b=RLFBNrmC9LPDCuUOnZHFy3tNyiAjUjqDBl1JrGTymBqW4Sc6MioLiK9QJFp0+kdj/B 2+orhyQgVxXkCKdNHft+r7lOVDnIcgay2FB0Ay0ks9IYgmNIjRe0y1Z+Gd87pWNs1He6 w5syk5eIYFKEsYo/yqiKFNPam7FmHt1FSQkRgFY5ye8TGvZcR1+7dIbd7xbGIerC+RZa aFAv4baTrD6t/7Hixly/4GW8NBHOpoxvG/G2UlVSLToSpeSOtEe18l5OEfu/hfj31k8g ZftaEuQXZO16TAppaMIgcC96KKED0qInV39wPRFsk6SlcJ9kBP+0LJGd+gntmpEUpoku ZOTA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=OIU+SEVs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411156@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411156@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:58:56+00	alvherre@alvh.no-ip.org	Re: Allowing REINDEX to have an optional name	<20220715115856.3litqg6rxzoijz6u@alvherre.pgsql>	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	157	9132	[]		On 2022-Jul-15, Alvaro Herrera wrote:\r\n\r\n> > Yeh, repeated failures on MacOS Catalina with HEAD.\r\n> \r\n> Can you share the contents of src/test/modules/libpq_pipeline/tmp_check?\r\n> Since these failures are not visible in the buildfarm (where we do have\r\n> 11.0 as well as some 10.X versions of macOS), this is surprising.\r\n\r\nSo I got the log files, and the error is clear:\r\n\r\n: # Running: libpq_pipeline -r 700 -t /Users/sriggs/pg/pg-git/postgresql/src/test/modules/libpq_pipeline/tmp_check/traces/pipeline_idle.trace pipeline_idle port=57444 host=/var/folders/rd/kxv86w7567z9jk5qt7lhxfwr0000gn/T/Od6QFSH7TB dbname='postgres'\r\n: \r\n: pipeline idle...\r\n: NOTICE 1: message type 0x33 arrived from server while idle\r\n: \r\n: libpq_pipeline:1037: got 1 notice(s)\r\n: [12:17:00.181](0.016s) not ok 9 - libpq_pipeline pipeline_idle\r\n\r\nthen the trace test also fails, but only because it is truncated at the\r\npoint where the notice is reported; up to that point, the trace matches\r\ncorrectly.\r\n\r\nNot sure what to make of this.  Maybe the fix in 054325c5eeb3 is not\r\nright, but I don't understand why it doesn't fail in the macOS machines\r\nin the buildfarm.\r\n\r\n-- \r\n√Ålvaro Herrera               48¬∞01'N 7¬∞57'E  ‚Äî  https://www.EnterpriseDB.com/\r\n"Escucha y olvidar√°s; ve y recordar√°s; haz y entender√°s" (Confucio)\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 13:58:56 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657886351; cv=none; d=google.com; s=arc-20160816; b=YuKPwuWScu4PZKEBacv+3QvS8wtk6hRaLGZ/HroBXwkEC78Gc3QuPY5MLLOzSqQJa3 Z4XAvs6Xcb9I9FQ4vkb4HzEG31yLxmgljVik8nsp8kjaMvClczE1QsJ3F5Bz2N5t7u2o SYVoF9/D2Cdh+9kKy5/ESdaSOxHZ0p/SFb3jzn5ER6wdyOLaOOaYeb93TV2FW913sb55 dvg/6bUajdY8wSghMwitkhCq6vndHSOKiTArEeeZBefA/5zdSVwno6ITflxAd6F+pE1Y OeCsfN/rVAiouXv8LRp6up0Ke26rdgUVa/bwdHZ1yH4lJPmXZyO08NhC83wrApbhzR3k begw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp116537jai; Fri, 15 Jul 2022 04:59:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n12-20020a67ac4c000000b003572b8b78d3si735469vsh.60.2022.07.15.04.59.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:59:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411181@lists.postgresql.org>) id 1oCJyQ-0008Tl-3z for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:59:10 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJyL-0006y7-0u for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:59:05 +0000", "from out5-smtp.messagingengine.com ([66.111.4.29]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJyH-0003Yd-DV for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 11:59:03 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id 398B35C0124; Fri, 15 Jul 2022 07:58:58 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 07:58:58 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 07:58:57 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id 143A836E; Fri, 15 Jul 2022 13:58:56 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715115856.3litqg6rxzoijz6u@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:glbRYkH4uoQ3lJ1A2U4D-un3Fx0Sm6u_fSpC93wV4BAmkMH9Fzq-3w> <xmx:glbRYgXe1fQ0N0217so1_FskCu6JCPY9a4ZQQwN5s-niMl-Ny052Pw> <xmx:glbRYnOiCugQv2N-XZ9MN_dnAnCQ-6vS3HN6AxV46OCtnCbYdVfodA> <xmx:glbRYqfFTdGy_ghsVgBw42qI4YydbZHxMW2Q6dU-LcbJKU3KaZWVlQ>"], "X-Received": ["by 2002:a67:f142:0:b0:356:3251:e53d with SMTP id t2-20020a67f142000000b003563251e53dmr5197251vsm.40.1657886351030; Fri, 15 Jul 2022 04:59:11 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715115856.3litqg6rxzoijz6u%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715112933.ziydbksfn4nlirax@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411181@lists.postgresql.org>"], "X-Me-Sender": ["<xms:gVbRYqHrSzJAcPVsS3hvfQRF5wVL8DftzV3jnFSYH9DDRsAqtrXzgw> <xme:gVbRYrUVaL4vrVqfryTJpTjlPYhzvOVx0tYah9FdODAasU5xJ5e8iXIhtpnY1i76t -v4PWGx9NSr1LsDCw>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411181@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:gVbRYkI0DoaNEybEODUmxQ3L6keVO6ZanvXwSg6yOWpLatSgCicnF76_Iu--yyqG_0qnAszC62gZnYrC-WVW2EABT3izNJOTs0TYHaOvnA>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657886338; x=1657972738; bh=+ Bf3E0Pc9+On7DTcE/ZnKYFMVw7/FeYQZjKuZbhlWvw=; b=nSoM43bPNvXqrksK9 HmLwNyi7ntRD42wYqX8ZbCHLhSn847EdZKuBQ/Ta0lshSfjIXjzYLqIgopo0pU66 oYs2qG6q7KTRsl721OPFiHcSX6L5GAkecetitTlIKhzU8k6I8Vqzoul/W8gsegXN fkhNk0dewMbUWwZBQlHX+PRl38Wom8bPTYaCVl+bGF6Pxw/6io+yQjKgh6Hvh32g sPS2dHuYkKGgNN2WQcNgirvpcR4M0SdXQkHyXfdxRn4xdIXEnddYLNVC57rfehM3 MV6e8d0pYptbZ4tvgB2WSGhw6qcIpD83cKho/CBk0oYIICRS/fzzbLVFSWPKULyf pdn1Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddggeekucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkgggtugfgjgesthekredttddtjeenucfhrhhomheptehlvhgr rhhoucfjvghrrhgvrhgruceorghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh eqnecuggftrfgrthhtvghrnhepvdektdffudfftdffffehfffhjeejhffgieeuueekjeek fffgudffhfduffffueevnecuffhomhgrihhnpegvnhhtvghrphhrihhsvggusgdrtghomh enucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegrlhhv hhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vQ2m5VJVQPrVmip2tiGp80g3A2pq7DhC01rrzKC0zDOYm0xaStnswBCKQVN+qyK0nr5WJl"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=+Bf3E0Pc9+On7DTcE/ZnKYFMVw7/FeYQZjKuZbhlWvw=; b=J8GyUorV4DxGa4WOJ0YK6pgYAu4h4fmSWUVh3+hhy9dUraEs9gIO4GG64wpDLJ420C KjkNYjJY6RVMVTmRnfJDnyr3m9m/s0FXfgSbfpjLe/k4hO7snai7m6r5Oh4/sKJV0fwd TvhDYa9jbL6oThHbuDWV4gsfLw3SHfiAASsH1tsxYuSYuu0H11IISgcGQfXCWeXfgrip iJ9JPYnmZ/8rhbZHRPg0PGmje6ohJWiiI4QBWuXOH+U/02h8dEc8rLTegDeLOGpz8DVO l3uUwSGs27Vu44ukZOLITGxABpZ1jk1KJD/fiP7KaUbVy10o9huaVroba3sw6Sl8nRDl a0xA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=nSoM43bP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411181@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411181@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=nSoM43bP; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411181@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411181@lists.postgresql.org"]}	["<20220715112933.ziydbksfn4nlirax@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:23:29+00	pashkin.elfe@gmail.com	Re: Add 64-bit XIDs into PostgreSQL 15	<CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com>	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "Postgres hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	153	10130	[]	<div dir="ltr"><div dir="ltr">On Fri, 15 Jul 2022 at 15:20, Pavel Borisov &lt;<a href="mailto:pashkin.elfe@gmail.com">pashkin.elfe@gmail.com</a>&gt; wrote:<br></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr"><div>Hi, hackers!<br></div></div><div>v42 stopped applying, so we rebased it to v43. Attached is a GitHub link, but I see Cfbot hasn&#39;t become green. Apparently,¬†it hasn&#39;t seen changes in GitHub link relative to v42 attached as a patch.</div></div></blockquote><div><br></div><div>Github link is as follows:</div><div><a href="https://github.com/ziva777/postgres/tree/64xid-cf">https://github.com/ziva777/postgres/tree/64xid-cf</a></div><div>Maybe this will enable CFbot to see it.</div><div><br></div></div>-- <br><div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"><div dir="ltr"><div>Best regards,<br>Pavel Borisov<br></div></div></div></div>\r\n	On Fri, 15 Jul 2022 at 15:20, Pavel Borisov <pashkin.elfe@gmail.com> wrote:\r\n\r\n> Hi, hackers!\r\n> v42 stopped applying, so we rebased it to v43. Attached is a GitHub link,\r\n> but I see Cfbot hasn't become green. Apparently, it hasn't seen changes in\r\n> GitHub link relative to v42 attached as a patch.\r\n>\r\n\r\nGithub link is as follows:\r\nhttps://github.com/ziva777/postgres/tree/64xid-cf\r\nMaybe this will enable CFbot to see it.\r\n\r\n-- \r\nBest regards,\r\nPavel Borisov\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Aleksander Alekseev <aleksander@timescale.com>, Postgres hackers <pgsql-hackers@lists.postgresql.org>, Stephen Frost <sfrost@snowman.net>, Alexander Korotkov <aekorotkov@gmail.com>, Andres Freund <andres@anarazel.de>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Maxim Orlov <orlovmg@gmail.com>"], "Date": ["Fri, 15 Jul 2022 15:23:29 +0400"], "From": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add 64-bit XIDs into PostgreSQL 15"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657884261; cv=none; d=google.com; s=arc-20160816; b=tG8vpaQeVsGN3B5pybFKhG96tSMsJzaqXiLmxcNogVzVNdHd9fEVgfggyUVeGDyiu+ 0n59WzOF33GP8TqGERPYxjSLiDhlA07694Z2gR7msV1px+IRDkl0cc7SIY1aLW3WorKd GZtrWcu+bFkyIhFEKXzFwx7OVZZmQQbViq5kmXOltC8jPozqLa1saRYsHltIRXY50Jlc 25Z2L2ejJGB8JjSiXaSl3azvsvqUiRdpK/53vgCR96dhWRX/WtQB28jspSz8IG+4RISt 7Pw96HwwSC6EkTVDOi+gfbVikrrKYuNWp7U8hsdsZGyoapNo4FXoHIfxbGI8Dw/kDuAR JKiA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp110182jai; Fri, 15 Jul 2022 04:24:21 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 82-20020a1f1855000000b0036fe86510cdsi809133vky.176.2022.07.15.04.24.21 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:24:21 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411159@lists.postgresql.org>) id 1oCJQi-00071R-Iz for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:24:20 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCJQe-0005Nm-1t for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:24:16 +0000", "from mail-yb1-xb2b.google.com ([2607:f8b0:4864:20::b2b]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCJQb-0003Hc-Mr for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:24:15 +0000", "by mail-yb1-xb2b.google.com with SMTP id h62so7906823ybb.11 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 04:24:13 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220319174058.GS28503@telsasoft.com> <CALT9ZEHHs1eXHGAjUViEQRyC6_+Dki8Ss9y2ZLGXiEHhJaATmQ@mail.gmail.com> <CACG=ezaxzvZwfF4tXC=CvFv8_7zeh-AyO4CNh4_W4pUKanUxpA@mail.gmail.com> <CACG=ezaoJTH_1f8HATzgU+2LNSVxBggZ5DjbBzKyRZyXHSn0Ug@mail.gmail.com> <CACG=ezYVCyn9-LrH05XdgEAg9PVO+8ieUpjerFd7He9CwStovw@mail.gmail.com> <CACG=ezZ96DAnVOC6DkbQVPJE+Q2s-JoaFERXWL0SsDcaRg8Wsg@mail.gmail.com> <CACG=ezZD9p_qrxCiB=nUHYiQ-idSUQqk3j0xAotkrF9_s20gsA@mail.gmail.com> <CACG=ezb=y_N1yL_r2idtf-hTuu6AHpgFH-s4a9HMCm-AbykAMQ@mail.gmail.com> <CALT9ZEGpr3WEPFJL_EHtzE-vF09SPYeAVyoPYZUuG1=yX5oi+w@mail.gmail.com> <CALT9ZEE3aMAT+sATzPEzrti+DZwBse+9+XoiuKkGJV5k=5TrFw@mail.gmail.com> <20220701025335.GA13040@telsasoft.com> <CALT9ZEEg+efQ8nzt3Fn+vHdH19WOAzdACAZtxe9_8_96n+kXNw@mail.gmail.com> <CACG=eza0tv5H4mA+UF_Vk7_cPSQ6kFbzSxKFTuR1o=jmLoo9UQ@mail.gmail.com> <CACG=ezYfMkhEZOAV8b2Cmr16hsb9U3mZv+=8NT1Ox6A0u5L_Sg@mail.gmail.com> <CACG=ezb_YRCg94BUVqAGWjk-4M-LZOHVvFfcXSt3-acRr2xhyg@mail.gmail.com> <CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com> <CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com>"], "X-Received": ["by 2002:a67:d20b:0:b0:357:573d:975a with SMTP id y11-20020a67d20b000000b00357573d975amr5594137vsi.35.1657884261557; Fri, 15 Jul 2022 04:24:21 -0700 (PDT)", "by 2002:a25:cfd0:0:b0:66e:b731:7954 with SMTP id f199-20020a25cfd0000000b0066eb7317954mr13756917ybg.396.1657884252977; Fri, 15 Jul 2022 04:24:12 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALT9ZEFmpuCT65vXZVN%3DaxxoKTr6xjj-kDGNa%3DKXvMuCfbOcbQ%40mail.gmail.com>"], "In-Reply-To": ["<CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411159@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000fa3d0805e3d6413e\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411159@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=QENoNZeD5ugk+SIB7+96dxjv7elmB2gPByQ8/7cYAWg=; b=QBc8CFi3Qax5ukw7V8ZmwHujhV2J5POfo7Mc/UDg0opKRijhAGREKEukVJyRl1L9JO RglF84MiSrqJ7BcaaPlGEMZrSn6Sxo9i6K09XtSmnwN83dI4uajqkr6Zj1MATlyvcakL iJ56XwAt9gYzfzepqMZg/LX8S7xpPeQmxWu2KuZPg/A0qO22uKsTQJGO25nmS2ueNwEx 4Xwi0ts0vSYIotjz+59HqIeniSPoma48+JQa7usXKc0LU4S0AnI7xEG8VvXBCgWhPYRl Xoa3yFYyjQFPBimgCbDhZJ0Ps01XR7vCKQ5HaV7YgvlrIMAgpjp+YvGUCkH5j6C4x3oO qICg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9OvS/R1pmzy9QSl9rT8mFOan89w/hYtJCF8SfLmPkHKXaXJflA NXdGEehlpFcxyaTMmW3yN+01D6NGV2DmG6Lnt78="], "X-Google-Smtp-Source": ["AGRyM1uDDq32f4YDyCep/eFjl0U2HWiGbGQNndq+2Vj+GZqMghP0kwjIq3Fmd19xwMT/Sb0CKi0K"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=QENoNZeD5ugk+SIB7+96dxjv7elmB2gPByQ8/7cYAWg=; b=WYSLKZAQN0DGtA5KK6azGv3LuO4pTnfWwgmbQbNs1cLJYnnkvNBqMu3OuGDhgLPmpA lA6t2rD5QvwRw7rZET001AuD///B1yhEHrYFomWh2CVT8rPj6oG1ldVFk6zCgx+Q/OWv v20NIMnl0lkG8iwApDb6+xe1Z0dd/pvDgakW2hm6DZyPsPU/9FiqrpmnV1eOD2zYJ9se oyGdaz24PQ0RUETstSZ7HYIK/JFywsN2yEh5Nn1LnPma1eQxj+0+QA4FF++WuF6EwsrI vLPNzk8ZJG+hImoRQO4lyBI0itKaok2SwWTrV7piHcn0PFbkcFYnZx/5U4qb5dQKt8g0 5WgA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=QBc8CFi3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411159@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411159@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=QENoNZeD5ugk+SIB7+96dxjv7elmB2gPByQ8/7cYAWg=; b=BB61n7iIhSlJYY87v2wxNei32KuzN50tYsZaMJrWEQ7ppmSejaPhDImShzi8kWBsc4 xiwe/0Cf58h4faZlIh08rEQWOFtSCrccOesuuCiCZuES9oj6MfChfRAc/f3OQLjU6OR5 jTa/L5q21jvbeORIh/hFjBmuH7ekPyi2znp1bys5CbaQZwbxTXe8rFcL03mhCbDNuwqR hTDc/xxelIGgVy2JpYu5C9OZ7q9z+TV8NC5TVanW+D/gq+KiArETciUWWNmVne6NKaBU gu1G+R+q9RhWyjYobImnZmII8GPHKIkFYErWO+Tibj1QiBpMfVjCb5vgdS0Ltgtf6a// +W0g=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=QBc8CFi3; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411159@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411159@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:25:33+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-H2Y=jM1QVRkT-OOa2+KPTd3po+=2LmZ35DmTidjRovGg@mail.gmail.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	154	22596	[{"part_id": "2", "file_name": "reindex_not_require_database_name.v5.patch", "content_id": "f_l5mdie2y0", "disposition": "attachment", "content_type": "application/octet-stream"}]		On Mon, 4 Jul 2022 at 08:00, Michael Paquier <michael@paquier.xyz> wrote:\r\n>\r\n> On Sun, Jul 03, 2022 at 05:41:31PM -0400, Tom Lane wrote:\r\n> > This is marked as Ready for Committer, but that seems unduly\r\n> > optimistic.\r\n>\r\n> Please note that patch authors should not switch a patch as RfC by\r\n> themselves.  This is something that a reviewer should do.\r\n>\r\n> > The cfbot shows that it's failing on all platforms ---\r\n> > and not in the same way on each, suggesting there are multiple\r\n> > problems.\r\n>\r\n> A wild guess is that this comes from the patch that manipulates\r\n> get_database_name(), something that there is no need for as long as\r\n> the routine is called once in ReindexMultipleTables().\r\n\r\nOK, let me repost the new patch and see if CFbot likes that better.\r\n\r\nThis includes Michael's other requested changes for reindexdb.\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Fri, 15 Jul 2022 12:25:33 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657884354; cv=none; d=google.com; s=arc-20160816; b=jtAo1AjthoN1QI0hKEqpSreuqAGPAOcmlhYKZyaQKjSUklbHvDkzV58HcdfaYVrdgi HTDEfY59I5YVLlnujDPHajWTFLfVGwgGrIN9QaUUEqeXz5kt2nSrCYifWcBKDNL8t32P 6G2uoeWifbhAUOhWWMsOz+qD0Obn1X1XhrhKgo3t20Sl8Lg+We+mjeIFPmO4lN4uN/uq k9dVsULh5+41Qf2QnI+V/vAh5bbdLG0zmj2O4vzD5H1zg0kuNX9jssjCAChZ9EK6Xo4E MqXs7GMGSEvdrez0Qpf7dr9rMT30RklgG83pgeUXm5jLq999+rtBvavwaoPNx8BJXfOK aiNQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp110436jai; Fri, 15 Jul 2022 04:25:54 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 60-20020a9f23c2000000b0038275b9acf5si845525uao.201.2022.07.15.04.25.53 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:25:54 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411160@lists.postgresql.org>) id 1oCJSC-0002l5-W2 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:25:53 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJS8-0001Cz-JJ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:25:48 +0000", "from mail-oa1-x32.google.com ([2001:4860:4864:20::32]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCJS6-00070g-4O for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 11:25:48 +0000", "by mail-oa1-x32.google.com with SMTP id 586e51a60fabf-10bf634bc50so5870164fac.3 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 04:25:45 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-H2Y=jM1QVRkT-OOa2+KPTd3po+=2LmZ35DmTidjRovGg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<YpYFeT4BYZowbFUM@paquier.xyz> <202205311230.5dc4ztvncsck@alvherre.pgsql> <Ypf+GU4zhvRTirJ1@paquier.xyz> <CANbhV-E_qSxF4JHdswaKcaG_Mo25h5WyXBPYWyZ0+=Mc-QxczQ@mail.gmail.com> <CANbhV-EmOh-XTssH5TwannC2S1VDN5zK-b+oZKs8UdyUtc2oUw@mail.gmail.com> <YrvWoAsaX/gUG2re@paquier.xyz> <CANbhV-EL4+RK49Qmk66zFmTiEEhT6TKia0ow_t5zogV1-FfAEw@mail.gmail.com> <1386216.1656884491@sss.pgh.pa.us> <YsKP6wJ0+XvF+6/8@paquier.xyz>"], "X-Received": ["by 2002:a67:ae42:0:b0:357:4de5:e7d with SMTP id u2-20020a67ae42000000b003574de50e7dmr5604115vsh.18.1657884354167; Fri, 15 Jul 2022 04:25:54 -0700 (PDT)", "by 2002:a05:6870:40c3:b0:10c:ca90:b13c with SMTP id l3-20020a05687040c300b0010cca90b13cmr7622319oal.253.1657884344550; Fri, 15 Jul 2022 04:25:44 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-H2Y%3DjM1QVRkT-OOa2%2BKPTd3po%2B%3D2LmZ35DmTidjRovGg%40mail.gmail.com>"], "In-Reply-To": ["<YsKP6wJ0+XvF+6/8@paquier.xyz>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411160@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["multipart/mixed; boundary=\\"0000000000006fbce305e3d64744\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411160@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=tG+v3rbzdVIey4IV8ufBCLA/OhcV51ggcDl3C7BIVZU=; b=QtVOTHV+HTwr7SR6DEEBtBH22NXI+eNA2X+4F9O0VRoQF51udHVbgBimuXPgcu08yk uoAIyqE+tSXvxi91G8n9kHFdG8WD1ftggJM3T/YD7EvGNW/TwL3T3/1vF2Ijtc5NJilW SsuYa4wcvOZb53afNqySGkIjv9mn7MT7vDU9gS+OOmd1GZNO6oKeNSz0I9gn9+fpYrDn 76nXMrbffIrWKU4hmXXJ7rkyQ4QGPCvtTeFZ9Wi8+oGsT3DMFX9GYXAABAubVmMZXyHD e9lDweWYxg7iog+NaI6sBBfmB28tNhXRKjzSKV07ewqxuN/rBvmQjF1DW9F96gRP/ZwW F/XA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+n2pcsmz//WnQZpCGVsOGHqaDNafwnoo2kT03UOHZgEE7/YWrH zALWwDNQ71wrV50QJCiCPgSgO0xRL5oXUbUqqSlvRDZ70WDt82vf/39x3ynf5wuvpkGZ0zgB5lK rCt7b/thAutxy9hzhpVCrEPsXGFjjVuNRDAUTByOO4ENyXBz6kC6zUiekVNEFzM9DnYUgI2Kksd V+62FNfLTFKgL8QzGXgpWm7MUOONlQnKuuubvcVbqDDuJdtvsWXwJl"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1tiH24Mvcn0mHEWbqPNIh2OyJHPH2otQhOEvPaXLgudKR9r3QvKNTkDD7aP3c5BdpUWffvT"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=tG+v3rbzdVIey4IV8ufBCLA/OhcV51ggcDl3C7BIVZU=; b=sm4SrUxS2EOGtH/l5WUKeUzGkLLew4rAdXgvGnqk0gUKAIePAFwkfzH97knNVF6Vcf FnrrCmvtLph/bAu+9RgVI10RRqRsqmhIU7tCX+SLCbrkWHeUH3COIyxFlNIfMmYLbsvJ 3Fu7iJtqmOURI39ykqKQAXXiDlaJG6c7rfiNqT4SI3WKqpewPTuA408BZyrJLz4bTa7A t5khPVS3QRguY8BEwb9wxcG6KEk1Y5nc7xSceoxcRI6lgnyoZMppvvJh3SJJIksuArcO 886Iiw4S6+Pv4vPNLQydAHBfAB/nZCdF7M6PVhEyjX5Yyq0oeyLcMyUDW289YbNGtZyk v6Cw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=QtVOTHV+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411160@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411160@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=tG+v3rbzdVIey4IV8ufBCLA/OhcV51ggcDl3C7BIVZU=; b=6G2Re1X6J7oDLV6rXVun0bLT5O7sVr1PF9uBmCyKsV9lPktfAqBnTtIk1irOFETQCg 6RvM6Gnoc3AZb5ClzKKCtcnW804/SYT0L7nIj0DqXxturQ8B+oAXWq/OVUPYGQPdWN8P BZpg1KMVjS/bDfW+KVilGQHXVr3DTlXHUfFQDIJmIDYM/p3AcaQLee56pv0vn3et/LV1 ozzCQABOAxxICajN4k0AMcJMAZlixJ9kdq+afNLUXEgRTPb/uEP3U/Ws7IxQDuMG72Zj A79AxLQuxxEPm4RNKgwVNvqjciRSZAUW2jw8TH0e8+QzW0ctK1ffKPELaAhalMAcT3Ss 0ULg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=QtVOTHV+; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411160@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411160@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<YsKP6wJ0+XvF+6/8@paquier.xyz>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:29:33+00	alvherre@alvh.no-ip.org	Re: Allowing REINDEX to have an optional name	<20220715112933.ziydbksfn4nlirax@alvherre.pgsql>	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	156	8808	[]		On 2022-Jul-15, Simon Riggs wrote:\r\n\r\n> > Test Summary Report\r\n> > -------------------\r\n> > t/001_libpq_pipeline.pl (Wstat: 512 Tests: 20 Failed: 2)\r\n> >   Failed tests:  9-10\r\n> >   Non-zero exit status: 2\r\n> > Files=1, Tests=20,  4 wallclock secs ( 0.02 usr  0.00 sys +  0.66 cusr\r\n> >  0.64 csys =  1.32 CPU)\r\n> > Result: FAIL\r\n> \r\n> Yeh, repeated failures on MacOS Catalina with HEAD.\r\n\r\nCan you share the contents of src/test/modules/libpq_pipeline/tmp_check?\r\nSince these failures are not visible in the buildfarm (where we do have\r\n11.0 as well as some 10.X versions of macOS), this is surprising.\r\n\r\nAnyway, the errors shown for your patch in the cfbot are in the\r\npg_upgrade test, so I suggest to have a look at the logs for those\r\nanyway.\r\n\r\n-- \r\n√Ålvaro Herrera        Breisgau, Deutschland  ‚Äî  https://www.EnterpriseDB.com/\r\nY una voz del caos me habl√≥ y me dijo\r\n"Sonr√≠e y s√© feliz, podr√≠a ser peor".\r\nY sonre√≠. Y fui feliz.\r\nY fue peor.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 13:29:33 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657884589; cv=none; d=google.com; s=arc-20160816; b=PgtIIObFN+KxdOazHLoSarbhZQg4oT9X/HWAsNUUp6XV+xGnz/NAZ1cQvkWHsKrLyf ufJ3ylMLB7um8aYjplLJyuJSgz7hU3s7AOzbF6zaOLSZ6C4YKkgfSRJJTcugNc6D6Jka f6n4xuWGwDBaFZT3QTrjmEDOEfIsBM+dfVKuZsssZ0HD5eGw2HOQxVYCxv215/pPzjUY g7YzM9yqBElMMReL1Q4/owpQ9bXvbkK1DgI/3hBrQ+SWn7qmkRAPo2HTqT3qjSREhH5f LmlP2k+xjpgalowB1wTcQl19APbvOHfYPgDubl0P/d6s9HAwOtov1r+m7fptya146Mj8 VzEw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp111100jai; Fri, 15 Jul 2022 04:29:49 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b3-20020a5d45c3000000b0021bb2fb5ea7si4360357wrs.253.2022.07.15.04.29.49 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:29:49 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411164@lists.postgresql.org>) id 1oCJW0-0007J5-QW for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:29:48 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJVr-0003IZ-UA for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:29:39 +0000", "from out2-smtp.messagingengine.com ([66.111.4.26]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCJVp-0003KL-Jj for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 11:29:38 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id CECCA5C020D; Fri, 15 Jul 2022 07:29:36 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 07:29:36 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 07:29:35 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id B4DC836E; Fri, 15 Jul 2022 13:29:33 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715112933.ziydbksfn4nlirax@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:oE_RYtEAU-Wj6U791Pj9VTl-hm65fb7d8PSHvLI8ipThY6T0C6B45g> <xmx:oE_RYlXjAnJlVyFturYCC2yV-G2G9asFrVC7s4pMHgcipiHtFhU_og> <xmx:oE_RYoPFu-zu9GJuZe52N29Z3YIHLVHVhz0OF6Ja0wtj9GYwTf6dGA> <xmx:oE_RYjdp3DT93whfro4-3HYSfagg7zD2yftf2EbHOrGq_G5JMTOlwQ>"], "X-Received": ["by 2002:adf:e503:0:b0:21d:6d98:a92a with SMTP id j3-20020adfe503000000b0021d6d98a92amr12153913wrm.62.1657884589187; Fri, 15 Jul 2022 04:29:49 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715112933.ziydbksfn4nlirax%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<CANbhV-HuWHuxFFZMJkEKOqW_ab6nQXYX4T4_+nbG1N=JEG7dcQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411164@lists.postgresql.org>"], "X-Me-Sender": ["<xms:oE_RYvE7Rg5Zf5eqwNVhdlOB58130GlHl7xCdinVYGW_cdEYxZYDFg> <xme:oE_RYsUn5LXMfc7lNdvv4maLqZyE7ksurETcVJEoBuegy5JzIEFwJKYNbwjxgYpcV rcjU91Kif_s4_qKHg>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411164@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:oE_RYhJF3OQ-jWbIJdwCFNyJqUB4UIOKk_sgIXbTIPlR45IPQVVMb35ylsNmdWuma_bbiel785hD92K_cUZF66Yp-R0H0uQbats0Jh9tpg>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657884576; x=1657970976; bh=y 4KfLNmD8iUk3SpZE0amy4cuQ3z2BerJwXMIcFrYDlY=; b=Wo3mmEQ/58IL5p+j3 OmYceqiP3r++2AkmkcU1JQWZHXDapLh8a/aTVu3mpN9sFm+TF9tocmwPeyLPpVp6 mAwW+7li9AyIh7VHUdq3rIgJAByiM4z4y4Y6d31Kg26VbIbJZ/tvoGiwz53xkhW5 NO8rITY7O5nYYBmTqnVVI0JNQXh3c889q19U6jVWu+xfKg5Nzx+Av8lcHEo+HV0Z rAEhx9wvGAqW+RtIjfz1Kkc/W/DOsPYyILBUiPI7lznj4d9OdRcaprvO5Nfyl7aB yAuByIdAxgGUIHFatwzz18pXlO4HvwjhojGGZESqNk4Nks/S4UpLB5Ka3pPuDX25 u7Dcw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddggedvucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkgggtugfgjgesthekredttddtjeenucfhrhhomheptehlvhgr rhhoucfjvghrrhgvrhgruceorghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh eqnecuggftrfgrthhtvghrnhepvdektdffudfftdffffehfffhjeejhffgieeuueekjeek fffgudffhfduffffueevnecuffhomhgrihhnpegvnhhtvghrphhrihhsvggusgdrtghomh enucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegrlhhv hhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1to9/wUQgRiWySl7v90fWMWFSQLLuuMW+YPz0yj0vFCSA8kLHJ++1APydIw1yuMMbkjWuo1"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=y4KfLNmD8iUk3SpZE0amy4cuQ3z2BerJwXMIcFrYDlY=; b=XhIAatt7g9/FBJczTjXfsE09qZFWJxtzqEWgAZWbH+2zFXA0APqCaK4AUW2hmy0j6e mSSOgNo8fmiPXPxrmMWeT90BkKUE908eRF/obWrNimrya3kJB8IcuAJ0mmDCJDwxcZTX Qz4FpedXnmPFq34lpZ0uXRE1aJV1EY0ktl7pPE84g4zdE4O3DGIdzQ26tE7jokf7eM6g +iX7yP1nvHYpcqwG3dzLm4+GlNECQAWKyPJhHg8Wzm1MHVvCM9efDjk2gTJ/W+vcIXTW Y+E8XiZwT9GFQykZCzKX0tOCu4oy6M1Vn8CYiHCglki60AvMSYzLXn1svZW1iesPSq7L vUxA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"Wo3mmEQ/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411164@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411164@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"Wo3mmEQ/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411164@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411164@lists.postgresql.org"]}	["<CANbhV-HuWHuxFFZMJkEKOqW_ab6nQXYX4T4_+nbG1N=JEG7dcQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 11:29:21+00	aleksander@timescale.com	Re: XID formatting and SLRU refactorings (was: Add 64-bit XIDs into PostgreSQL 15)	<CAJ7c6TOo7D_+HhVf_2oQEwf567XZw-Wx6vacVurEBVQDTbXnbQ@mail.gmail.com>	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}, {"Name": "Postgres hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "Japin Li", "Address": "japinli@hotmail.com"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	155	9526	[]		Pavel, Justin,\r\n\r\n>> Is there any reason to continue with two separate threads and CF entries ?\r\n>> The original reason was to have a smaller patch for considerate late in v15.\r\n\r\n> I see the main goal of this split is to make discussion of this (easier) thread separate to the discussion of a whole patchset which is expected to be more thorough.\r\n\r\n+1. This was done per explicit request in the first thread.\r\n\r\n>> But right now, it just seems to cause every update to imply two email messages\r\n>> rather than one.\r\n>>\r\n>> Also, since this patch series is large, and expects a lot of conflicts, it\r\n>> seems better to update the cfapp with a "git link" [0] where you can maintain a\r\n>> rebased branch.  It avoids the need to mail new patches to the list several\r\n>> times more often than it's being reviewed.\r\n\r\nYep, this is a bit inconvenient. Personally I didn't expect that\r\nmerging patches in this thread would take that long. They are in\r\n"Ready for Committer" state for a long time now and there are no known\r\nissues with them other than unit tests for SLRU [1] should be merged\r\nfirst.\r\n\r\nI suggest we use "git link" for the larger patchset in the other\r\nthread since I'm not contributing to it right now and all in all that\r\nthread is waiting for this one. For this thread we continue using\r\npatches since several people contribute to them.\r\n\r\n[1]: https://commitfest.postgresql.org/38/3608/\r\n\r\n-- \r\nBest regards,\r\nAleksander Alekseev\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Maxim Orlov <orlovmg@gmail.com>, Postgres hackers <pgsql-hackers@lists.postgresql.org>, Peter Eisentraut <peter.eisentraut@enterprisedb.com>, Japin Li <japinli@hotmail.com>, Alexander Korotkov <aekorotkov@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "Date": ["Fri, 15 Jul 2022 14:29:21 +0300"], "From": ["Aleksander Alekseev <aleksander@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: XID formatting and SLRU refactorings (was: Add 64-bit XIDs into PostgreSQL 15)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657884583; cv=none; d=google.com; s=arc-20160816; b=KeqFVa1NMWC0Amku88zPo/DquRgHTDlbWiSO3nG6uV+j0xR/Zi3kJofK73Gy3yZDhw f5vRME0Wj2GQLLtr75gmo6i0ah7Fnc01PJXLedSG8E3kkmPkRivr3jQ3t2W2Hm721mlo T45pTKiZ10CU8V1khq8l0d1M73vG6Dtdvco873V28GLwxK8BwPDx6q3skLvesCEfk+0Z 3Ytf0eL71Zu/OGF0tX8fbv2BjTMGl+dEDKdrtA9wdgB3EE3Os6Qa9Zt9NO4nNmfrFwtX z12KbjWQCU9oKl/RFWuX7LR9gY2pF+slF7t61EeYuXcFbkNb/i+Ux2GRiXeYnz2dnKL5 7eFw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp111082jai; Fri, 15 Jul 2022 04:29:43 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c126-20020a1c3584000000b003a045c98394si8035139wma.107.2022.07.15.04.29.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 04:29:43 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411163@lists.postgresql.org>) id 1oCJVv-0004uK-6a for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 11:29:43 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <aleksander@timescale.com>) id 1oCJVq-0003GQ-M1 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:29:38 +0000", "from mail-qk1-x72a.google.com ([2607:f8b0:4864:20::72a]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <aleksander@timescale.com>) id 1oCJVn-00072b-A7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 11:29:38 +0000", "by mail-qk1-x72a.google.com with SMTP id k7so347493qkj.2 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 04:29:35 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAJ7c6TOo7D_+HhVf_2oQEwf567XZw-Wx6vacVurEBVQDTbXnbQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CACG=ezY10qUtZszJ+sv3cOzrVKZRvFFwbB1hMRBvN4T4BoM9xA@mail.gmail.com> <CAJ7c6TO9+_G6MXsRxoxC2Luo65M3Tp+A860QCvhO6_d-6OBKYQ@mail.gmail.com> <6e24403a-0afb-f053-60b8-3b983266454c@enterprisedb.com> <CAJ7c6TMZWP0K5WJGscL=9R_-zFsGpkUJ_RaPCWB81=R2=x0NFg@mail.gmail.com> <220fab30-dff0-b055-f803-4338219f1021@enterprisedb.com> <CAJ7c6TONjfwZds0DkP0cKZnGc9s+SWRkFkiYjE_O1fXTweuM6Q@mail.gmail.com> <CACG=ezb3uLMQgYR4P07RQrcqj-Lmb6FO0ots6TnG8VKd-tqqnw@mail.gmail.com> <CACG=ezZFHdYhTuSZX5=5+vZvfxgtJawQgzsPhu9cEZnb7vSzGw@mail.gmail.com> <CAJ7c6TONjAzfPy44rOBFc0ydZVmnvHhNeGfeRwZ2t5qcB9D_dQ@mail.gmail.com> <CACG=ezY7vDaveMxwsQokzh+Mk32FmMa1PQJvGxfZA15-da6PNw@mail.gmail.com> <20220713145439.GC18011@telsasoft.com> <CALT9ZEFSAkFqf1fH9dWv5QmbTQc7VBf=f5mCPSbRMT7rCAgMkw@mail.gmail.com>"], "X-Received": ["by 2002:a5d:64c3:0:b0:21d:720c:4ade with SMTP id f3-20020a5d64c3000000b0021d720c4ademr12933288wri.570.1657884583570; Fri, 15 Jul 2022 04:29:43 -0700 (PDT)", "by 2002:a05:620a:3725:b0:6af:4f5e:de00 with SMTP id de37-20020a05620a372500b006af4f5ede00mr9339158qkb.754.1657884573046; Fri, 15 Jul 2022 04:29:33 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAJ7c6TOo7D_%2BHhVf_2oQEwf567XZw-Wx6vacVurEBVQDTbXnbQ%40mail.gmail.com>"], "In-Reply-To": ["<CALT9ZEFSAkFqf1fH9dWv5QmbTQc7VBf=f5mCPSbRMT7rCAgMkw@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411163@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411163@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=B45Vz7J9mS/l/LACGFeJNzMiYpvVs8DVsUZ/vOvqNMU=; b=WMqj9suLaxncc7A4pfWQ8nflCwj6oA5IcIPHln4dC7Li4qNZ3wVlXyttrO5avQWyMv NaIzuNOZaqQwUga5rZEnXs2lZmcUgPCKl2YzZxaOrj5eajNS/8lC1pFXrg35c8Izp6bo Q6/pjIlthiacYgnlrbWyDoWlkIK7/h7lQWoIeLbCWuU99dW4R7qqFEqXr/zxT/Vi4WAC +vQQhCBIC4T4B3XIf60dz2MxaKiIhThjsbhUzWhvDHAFbXVIL+NRTPsL7yBlYmtpwmqZ bzj0rHDQ9MVvBGDIDTA0DW8GWXvnO6o4yOUC4mhoIw7TP/GJeVefmLEuiuN6Czw8KqCb xyMg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/XAUo0Ya2oAjB0pYQUZTXldBOzjvnqneha/SdKztdT9xcgy5wY GElYdtiaHBKg+4liNJz1lb73z+SMF9T46juDYMFdWA=="], "X-Google-Smtp-Source": ["AGRyM1u7K+w9zg/xgnx0duILVZz44hzRoS2EbDL6wSyUGNiZ4GL4HqpX/DwHcnOrHZAGQj2iMNY/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=B45Vz7J9mS/l/LACGFeJNzMiYpvVs8DVsUZ/vOvqNMU=; b=ydiyiZ8BMf3lwT9ZWtCrxR1CETjrxe6AMUDWfsHdbqm9GR+fd9+XPmKARhpm5sl2kP w8liIID0/XKLq6vpjYe3nIevUx0hMVmyVVCK7PsjOuOo3jWfoJQCOIqlysMOTciGKTAD p6CAbREHCm1Hly0KHbIIVkC3ib/Xp3wAzQSrjBGasXxMTU0mrd49Fbp2QGxPo4id0kXA GKX8/d+NA8J/P/x2PmeYud/0eaQpdSRGYyh3VyTqEyhuNT50uLWvnj45/3r5beH4IenZ fyhrW6nnr8OdRe7GIIsuL6Tc90Lmc/MT5KuFgX/l8Bjncz3zE3Cj3qh9AwNLoLBrmaP4 ZhfQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=WMqj9suL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411163@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411163@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=B45Vz7J9mS/l/LACGFeJNzMiYpvVs8DVsUZ/vOvqNMU=; b=wmpTegSz5Lf9PWTxs68HNtcIBr40nZazMcJJfFHHDBX5bRj1wmj8udqdBAuiWHAjkD Sah/0NUevR60GH+z8XRghz+SjGX5GSy6ALHLFL8+4YsMXs+R7Q/lswY9eCwMGovaOp0r nynN9lgAYQoKJo4N3uZ4B+2fq+j8Ji+JmwzLfqs3PtYnlF3vjUYjBzPCO3yjZr7zRu+8 nhthBjtSdOZaHxd6P9WrBES17Fo6ksFmaUf1OCWFPUKGxcs8/fqmlN4yO0GW+hWtpwO0 jbGHh/ehOIvXT0hQS3vKcBRhiPL1h2nffHKZn82lnPI/sMW+ts22E3v3vzGvacMdg+w3 BTIA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=WMqj9suL; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411163@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411163@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<CALT9ZEFSAkFqf1fH9dWv5QmbTQc7VBf=f5mCPSbRMT7rCAgMkw@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 12:16:58+00	pryzby@telsasoft.com	Re: Add 64-bit XIDs into PostgreSQL 15	<20220715121658.GI18011@telsasoft.com>	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	159	9790	[]		On Fri, Jul 15, 2022 at 03:23:29PM +0400, Pavel Borisov wrote:\r\n> On Fri, 15 Jul 2022 at 15:20, Pavel Borisov <pashkin.elfe@gmail.com> wrote:\r\n> > Hi, hackers!\r\n> > v42 stopped applying, so we rebased it to v43. Attached is a GitHub link,\r\n> > but I see Cfbot hasn't become green. Apparently, it hasn't seen changes in\r\n> > GitHub link relative to v42 attached as a patch.\r\n> \r\n> Github link is as follows:\r\n> https://github.com/ziva777/postgres/tree/64xid-cf\r\n> Maybe this will enable CFbot to see it.\r\n\r\nMy suggestion was a bit ambiguous, sorry for the confusion.\r\n\r\nThe "Git link" is just an annotation - cfbot doesn't try to do anything with\r\nit[0] (but cirrusci will run the same checks under your github account).\r\nWhat I meant was that it doesn't seem imporant to send rebases multiple times\r\nper week if there's been no other changes.  Anyone is still able to review the\r\npatch.  It's possible to build it by applying the patch to a checkout of the\r\npostgres tree at the time the patch was sent.  Or by using the git link.  Or by\r\nchecking out cfbot's branch here, from the last time it *did* apply.\r\nhttps://github.com/postgresql-cfbot/postgresql/tree/commitfest/38/3594\r\n\r\n[0] (I think cfbot *could* try to read the git link, and apply patches that it\r\nfinds there, but that's an idea that hasn't been proposed or discussed.  It'd\r\nneed to know which branch to use, and it'd need to know when to use the git\r\nlink and when to use the most-recent email attachments).\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["Maxim Orlov <orlovmg@gmail.com>, Aleksander Alekseev <aleksander@timescale.com>, pgsql-hackers@lists.postgresql.org, Stephen Frost <sfrost@snowman.net>, Alexander Korotkov <aekorotkov@gmail.com>, Andres Freund <andres@anarazel.de>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "Date": ["Fri, 15 Jul 2022 07:16:58 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add 64-bit XIDs into PostgreSQL 15"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657887434; cv=none; d=google.com; s=arc-20160816; b=j3jPmoxzveB6nE4Rt7sWVQ3Nd1YdugCRCZLxJzwujc9eYvBzE5LRHtINEpCK741AYT jPeAnzUMR1M7OAaSRR/98ssedJuCMnbG4XbXf5HFnMCkDxcOrrYU2faTatZunNj5ghWP 4DjGerXJqbRb5rFrjfBWNjlg+tNimN6kCiLaiIEsqtf/yk1cKzMJ/va9SCJRwebLvVb2 sUTf17lbt3WGZOI7rCt155b7ZoQtfQ/1tXyKfvQD1uDGrdhJ+kWHvG1VLPt2Wxj5IxCu 5YRkQwrNEwGSThq4ZuD8/Gv+C+CQCXwbDRlO8VyYkBqPVWUzpH/Z+arq+zDk9MKfcAQk Gupg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp121296jai; Fri, 15 Jul 2022 05:17:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b189-20020a6767c6000000b003544e28d934si745607vsc.665.2022.07.15.05.17.13 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 05:17:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411190@lists.postgresql.org>) id 1oCKFt-0008SY-38 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 12:17:13 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCKFo-0006rb-C7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:17:08 +0000", "from mail-qt1-x832.google.com ([2607:f8b0:4864:20::832]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCKFi-0007Mu-Nx for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:17:07 +0000", "by mail-qt1-x832.google.com with SMTP id h22so3589814qta.3 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 05:17:02 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id bs30-20020a05620a471e00b006b24f49d06csm3832916qkb.6.2022.07.15.05.16.59 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Fri, 15 Jul 2022 05:16:59 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id A77618009D6; Fri, 15 Jul 2022 07:16:58 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715121658.GI18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<CALT9ZEGpr3WEPFJL_EHtzE-vF09SPYeAVyoPYZUuG1=yX5oi+w@mail.gmail.com> <CALT9ZEE3aMAT+sATzPEzrti+DZwBse+9+XoiuKkGJV5k=5TrFw@mail.gmail.com> <20220701025335.GA13040@telsasoft.com> <CALT9ZEEg+efQ8nzt3Fn+vHdH19WOAzdACAZtxe9_8_96n+kXNw@mail.gmail.com> <CACG=eza0tv5H4mA+UF_Vk7_cPSQ6kFbzSxKFTuR1o=jmLoo9UQ@mail.gmail.com> <CACG=ezYfMkhEZOAV8b2Cmr16hsb9U3mZv+=8NT1Ox6A0u5L_Sg@mail.gmail.com> <CACG=ezb_YRCg94BUVqAGWjk-4M-LZOHVvFfcXSt3-acRr2xhyg@mail.gmail.com> <CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com> <CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com> <CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a67:1083:0:b0:34c:61ad:d3e3 with SMTP id 125-20020a671083000000b0034c61add3e3mr5527435vsq.12.1657887434040; Fri, 15 Jul 2022 05:17:14 -0700 (PDT)", "by 2002:a05:622a:490:b0:31d:2a47:c221 with SMTP id p16-20020a05622a049000b0031d2a47c221mr12225078qtx.212.1657887420494; Fri, 15 Jul 2022 05:17:00 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715121658.GI18011%40telsasoft.com>"], "In-Reply-To": ["<CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411190@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411190@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to:user-agent; bh=ectLahWp/NWCcoRfWVD3ctHaOjFuyqzy7oOftokgDT0=; b=y51RSO2WqYhR2Gfsk/jNiWfyNmDS/ihA/MytOaWU4acCBQCRfUqP+v/IWPQqcgat+Y IJaJP1BzyqTq+d4wd+iTXraPlME20RHW9hjCe1NGEkkyThxDhVrCoScfUp1HKz4NgdDx UpIYuBPmxEG3UGszckritN1fCWNxxTXiwjLLqe/zVKxy8qmVerAaL9aQQCsIX0JqyZJv VqUqS8jcF7mpWRhqvzWoPzgl2yEtFqUMoXjEo+6ZB938y/iWmuzEYv+UjlHA2tYDp2JX 0PMAK/0wymvMxwWqWFGDvG4qHwVRTKNKPddRuRD6eSMgEEdMZHuQhisFO74ElD8TeGGU OrKg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora97P3GbS1KQ7cTSNjymC8iYZoTtYbzvwk7dEBxB10/2w3h2IHQ1 t1f9Z9Ut/DOSSgI4uxEJhxalRw=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vuQLvWO1r2yyIAUoUP/AOs+lrT2BsAhmIh0v+ekyFSdTrWW+mHaEsMFdobCS+MFopp72Hy"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=ectLahWp/NWCcoRfWVD3ctHaOjFuyqzy7oOftokgDT0=; b=H9VCmiNfmZHQj3PKvdWu1uA3jzp4DE9cfBskGXDEtYicjgihpBsV/KwTpbadwemwnP x9v6sgDAr9A8u1f9LjTzmL2TXhocSbIewrRpyG98ippKfUQ/XmP20VfQ5sdCWioEUDii SbmX8skdLNPDi8gJc51Jd7BfzJXSmgZPRWaIXxB6TIB3dVG0fmHsqvSgWRIa57BgqqUw iaTRZNUDZuOXB2h722HdMyTpZG/LgQmGU2zydF+2hrCQAF87vzgTlTU2IoTMPfP0jJWi VWP86uOkKIIuMLw+rmAefCJdB26hri2nh3ZVFH8jb4ZyFho3/pHkeFcNuLRmt3PCo+Ze p7PQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=y51RSO2W; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411190@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411190@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to:user-agent; bh=ectLahWp/NWCcoRfWVD3ctHaOjFuyqzy7oOftokgDT0=; b=Kvc7N3Lneft6Fxqrpiaf/aMjX6BnfOazp/CNrZKevDV6gS84WqpACSo/ykhgSb78B5 txtHz6LcznsqWmXc+yQjX3ndLWyuKWYMQ78XCg3+Tj6t77yplJ4mBQBEIRmPzIk2D3kM fQ5zo8OZi1Kjid5KbHswL0LQ207vLnPS1gi0ighXCwxJN46nf655ktky/fVd1M3cuaA8 867eaImkeaXGMU15QnBInPUgWm4Cgfp2//c35vsS83CwRqBMEyVVtuSL9QLi0AzZezWW Xmq87U91qcGRWjTF7//6hIPp/tSczpwy63YINq6Irsek9kddhcz67k6khBh9n/UmmC9q D80Q=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=y51RSO2W; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411190@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411190@lists.postgresql.org"]}	["<CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 12:03:11+00	alvherre@alvh.no-ip.org	Re: standby recovery fails (tablespace related) (tentative patch and discussion)	<20220715120311.3z6g2nqqdtiurlbp@alvherre.pgsql>	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}]	[{"Name": "", "Address": "dilipbalaut@gmail.com"}, {"Name": "", "Address": "robertmhaas@gmail.com"}, {"Name": "", "Address": "michael@paquier.xyz"}, {"Name": "", "Address": "rjuju123@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	158	9086	[]		On 2022-Jul-15, Alvaro Herrera wrote:\r\n\r\n> However, looking closer I noticed that on Windows we use our own\r\n> readdir() implementation, which AFAICT includes everything to handle\r\n> reparse points as symlinks correctly in get_dirent_type.  Which means\r\n> that do_pg_start_backup is wasting its time with the "#ifdef WIN32" bits\r\n> to handle junction points separately.  We could just do this\r\n> \r\n> diff --git a/src/backend/access/transam/xlog.c b/src/backend/access/transam/xlog.c\r\n> index b809a2152c..4966213fde 100644\r\n> --- a/src/backend/access/transam/xlog.c\r\n> +++ b/src/backend/access/transam/xlog.c\r\n> @@ -8302,13 +8302,8 @@ do_pg_backup_start(const char *backupidstr, bool fast, TimeLineID *starttli_p,\r\n>  \t\t\t * we sometimes use allow_in_place_tablespaces to create\r\n>  \t\t\t * directories directly under pg_tblspc, which would fail below.\r\n>  \t\t\t */\r\n> -#ifdef WIN32\r\n> -\t\t\tif (!pgwin32_is_junction(fullpath))\r\n> -\t\t\t\tcontinue;\r\n> -#else\r\n>  \t\t\tif (get_dirent_type(fullpath, de, false, ERROR) != PGFILETYPE_LNK)\r\n>  \t\t\t\tcontinue;\r\n> -#endif\r\n>  \r\n>  #if defined(HAVE_READLINK) || defined(WIN32)\r\n>  \t\t\trllen = readlink(fullpath, linkpath, sizeof(linkpath));\r\n> \r\n> And everything should continue to work.\r\n\r\nHmm, but it does not:\r\nhttps://cirrus-ci.com/build/4824963784900608\r\n\r\n-- \r\n√Ålvaro Herrera         PostgreSQL Developer  ‚Äî  https://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["dilipbalaut@gmail.com, robertmhaas@gmail.com, michael@paquier.xyz, rjuju123@gmail.com, pgsql-hackers@postgresql.org"], "To": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>"], "Date": ["Fri, 15 Jul 2022 14:03:11 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: standby recovery fails (tablespace related) (tentative patch and discussion)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657886605; cv=none; d=google.com; s=arc-20160816; b=G3OXNIIYcScuJvTJRtnN/SPKh+CK8GluMg22HETr5KOS+eVsrxRXMlLhVIukPret0o 5FXUzlmOV3RgGUNLi3E7kyh1HlOyrhZFFP1M3gql/0XEtsb4S9nhGlZ0y4XXO7mPylrU 9/aaRYKorajY6drfH6fKJpjWCXTS/l7+x4DEwi1RjNhGeDMOiRTUkNUgvyJ95oPmPCu9 2vGw8zTW0fDs/pwR7mCbnzTjcM0FwRyquR+kydOwdku4e5ZbQLzLo2bcAGB4I37p3Z6A 292esHlt5fJINhkANZcN0fNpP3KuldVPLmdaRiToiGX80p6qssKmxcNhGPOSP4cn0h2N x+MQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp117706jai; Fri, 15 Jul 2022 05:03:26 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f30-20020ab014e1000000b003824fad99f0si821156uae.185.2022.07.15.05.03.25 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 05:03:25 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411182@lists.postgresql.org>) id 1oCK2X-0003pf-0N for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 12:03:25 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCK2S-0002KE-I7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:03:20 +0000", "from out5-smtp.messagingengine.com ([66.111.4.29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCK2O-0007Hb-3p for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 12:03:19 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id 66DE65C003E; Fri, 15 Jul 2022 08:03:13 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 08:03:13 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 08:03:12 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id D724436E; Fri, 15 Jul 2022 14:03:11 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715120311.3z6g2nqqdtiurlbp@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:gVfRYpaR1N0Ur7CG6rqERzfGHGx7ADBJeDoXhqvBHIeYDv-VC-aK4g> <xmx:gVfRYjaF2vTsdB2VLw3Kv0j7YAbTQy0u3hUNQdPpqxYUHtb4th0Wog> <xmx:gVfRYlDYZ7chpvAkQ266okW9sb9Tibdfd3Gbm3kyywrWczcUTuGB8w> <xmx:gVfRYiW3zzPtn4jYYptVTxucyV4itXZjHj9_Sej1g7hLddecSUdpGQ>"], "X-Received": ["by 2002:a67:fe49:0:b0:357:4cfb:9ec with SMTP id m9-20020a67fe49000000b003574cfb09ecmr5828277vsr.65.1657886605925; Fri, 15 Jul 2022 05:03:25 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715120311.3z6g2nqqdtiurlbp%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715105844.e5iuer7bav4chdnl@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411182@lists.postgresql.org>"], "X-Me-Sender": ["<xms:gFfRYsLxPT7DN_WBbc5J6hREHTEKBe6uXM5GMLAD7MbNHwRr5XcSLA> <xme:gFfRYsJXYornFcuMwhS9PiFyG8cyjpPjiTvJbZg67Q2XAbhSOhG_KpU6J4paeFp09 RTW_xFzuMuGNxuUTg>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411182@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:gFfRYssB8GCwAXsB77eL5FwLzWPneWYIPO3gQoQ3a0UoVJdArETXiIWQk4aNLwVKd4H7hKW5_jW8qDXUTxBlYL3JmPAmvU095A_aFF8v6Q>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657886593; x=1657972993; bh=2 KPA3NEOs49jY+LJR5hFjNkTJJYDU3vi8wUIEvX/nsc=; b=GW6KC13E92ZCGhKsc Cu0itrrheDqSvdKtMStANM0z8tEu7FOkhqDoXX8ksVd31GMdND4puycJjXoEZYll YtpypEeW5M1BhCO0bFJnvDPZWcEZP4tc5qpwPr/iVE1BH1Urwu0c58vO5yC4iyhU bVDwFpXm4jIddC8JZqpG3/b3f7cgp5lixVpzjbRkfuG8uSd3iddod6nuT2bOCgF9 vI5JbzRh/gMzzkJMeIEOGuin7MDFc5RgjtAtPjO4TKyWZyxF4/m9KkHonaALtBqP jwM8cmsxHvRg6vT1RuhjMUmoXdEkNGEDL7/k99447S5RFNvoZprFaroqdNvfBlYK XMyQg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddggeekucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucenucfjughrpeffhffvvefukfggtggugfgjsehtke ertddttdejnecuhfhrohhmpeetlhhvrghrohcujfgvrhhrvghrrgcuoegrlhhvhhgvrhhr vgesrghlvhhhrdhnohdqihhprdhorhhgqeenucggtffrrghtthgvrhhnpeekteeuvddthf euiedtfefgkedvgfdtveduudefiedtkeehfeduvdehgeevhfeffeenucffohhmrghinhep tghirhhruhhsqdgtihdrtghomhdpvghnthgvrhhprhhishgvuggsrdgtohhmnecuvehluh hsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhhomheprghlvhhhvghrrhgv segrlhhvhhdrnhhoqdhiphdrohhrgh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uZUvg4adkz1y56atP1ZTIZFeKzYaxihVz+p/3lBwDM1Ec39ZaVYMcH89NJgzP/qsb0gLXa"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=2KPA3NEOs49jY+LJR5hFjNkTJJYDU3vi8wUIEvX/nsc=; b=pdjcmnhEtpGuFK7YuIfWfWIwK4OfjWlzofXGp1GEw0IJnXp7N/XKCPqe5og44oyGeF nNEB2PguHxMfgEk6sHea2NkUGn4FiXZTliCSxMVMbDtVEA6XzuJwXWQdpEvK55EAifWU 8yS7zJX4/YR1+Q4EbP2jKiQJ1aU25UFlXwBY+ULyme1imz8UYFD8kfw/i+lYuQio+fCA WXr+1A7BTu9IqeAvd8vnRYuHwQQt969qKEL1mFJJUJQoY8Io1gqymF3YkqTyV5Tga9qC GoUGpdAWzZtEccMpu2eBRhOdV8fKVsbIENYsDqXr+dHRI+nrFV2WImvfdSTgPaOQ0MBb O8IQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=GW6KC13E; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411182@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411182@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=GW6KC13E; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411182@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411182@lists.postgresql.org"]}	["<20220715105844.e5iuer7bav4chdnl@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 12:31:39+00	pashkin.elfe@gmail.com	Re: Add 64-bit XIDs into PostgreSQL 15	<CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A@mail.gmail.com>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}, {"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}, {"Name": "Postgres hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	160	13668	[]	<div dir="ltr"><div dir="ltr"><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, 15 Jul 2022 at 16:17, Justin Pryzby &lt;<a href="mailto:pryzby@telsasoft.com">pryzby@telsasoft.com</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On Fri, Jul 15, 2022 at 03:23:29PM +0400, Pavel Borisov wrote:<br>\r\n&gt; On Fri, 15 Jul 2022 at 15:20, Pavel Borisov &lt;<a href="mailto:pashkin.elfe@gmail.com" target="_blank">pashkin.elfe@gmail.com</a>&gt; wrote:<br>\r\n&gt; &gt; Hi, hackers!<br>\r\n&gt; &gt; v42 stopped applying, so we rebased it to v43. Attached is a GitHub link,<br>\r\n&gt; &gt; but I see Cfbot hasn&#39;t become green. Apparently, it hasn&#39;t seen changes in<br>\r\n&gt; &gt; GitHub link relative to v42 attached as a patch.<br>\r\n&gt; <br>\r\n&gt; Github link is as follows:<br>\r\n&gt; <a href="https://github.com/ziva777/postgres/tree/64xid-cf" rel="noreferrer" target="_blank">https://github.com/ziva777/postgres/tree/64xid-cf</a><br>\r\n&gt; Maybe this will enable CFbot to see it.<br>\r\n<br>\r\nMy suggestion was a bit ambiguous, sorry for the confusion.<br>\r\n<br>\r\nThe &quot;Git link&quot; is just an annotation - cfbot doesn&#39;t try to do anything with<br>\r\nit[0] (but cirrusci will run the same checks under your github account).<br>\r\nWhat I meant was that it doesn&#39;t seem imporant to send rebases multiple times<br>\r\nper week if there&#39;s been no other changes.¬† Anyone is still able to review the<br>\r\npatch.¬† It&#39;s possible to build it by applying the patch to a checkout of the<br>\r\npostgres tree at the time the patch was sent.¬† Or by using the git link.¬† Or by<br>\r\nchecking out cfbot&#39;s branch here, from the last time it *did* apply.<br>\r\n<a href="https://github.com/postgresql-cfbot/postgresql/tree/commitfest/38/3594" rel="noreferrer" target="_blank">https://github.com/postgresql-cfbot/postgresql/tree/commitfest/38/3594</a><br>\r\n<br>\r\n[0] (I think cfbot *could* try to read the git link, and apply patches that it<br>\r\nfinds there, but that&#39;s an idea that hasn&#39;t been proposed or discussed.¬† It&#39;d<br>\r\nneed to know which branch to use, and it&#39;d need to know when to use the git<br>\r\nlink and when to use the most-recent email attachments).<br></blockquote><div><br></div><div>Hi, Justin!</div><div><br></div><div>I can agree with you that sending rebased patches too often can be a little annoying. On the other hand, otherwise, it&#39;s just red in Cfbot. I suppose it&#39;s much easier and more comfortable to review the patches that at least apply cleanly and pass all tests. So if Cfbot is red for a long time I feel we need to send a rebased patchset anyway.¬†</div><div><br></div><div>I&#39;ll try to not doing this too often but frankly, I don&#39;t see a better alternative at the moment.</div><div><br></div><div>Anyway, big thanks for your advice and attention to this thread!</div><div><br></div></div>-- <br><div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"><div dir="ltr"><div>Best regards,<br>Pavel Borisov<br></div></div></div></div>\r\n	On Fri, 15 Jul 2022 at 16:17, Justin Pryzby <pryzby@telsasoft.com> wrote:\r\n\r\n> On Fri, Jul 15, 2022 at 03:23:29PM +0400, Pavel Borisov wrote:\r\n> > On Fri, 15 Jul 2022 at 15:20, Pavel Borisov <pashkin.elfe@gmail.com>\r\n> wrote:\r\n> > > Hi, hackers!\r\n> > > v42 stopped applying, so we rebased it to v43. Attached is a GitHub\r\n> link,\r\n> > > but I see Cfbot hasn't become green. Apparently, it hasn't seen\r\n> changes in\r\n> > > GitHub link relative to v42 attached as a patch.\r\n> >\r\n> > Github link is as follows:\r\n> > https://github.com/ziva777/postgres/tree/64xid-cf\r\n> > Maybe this will enable CFbot to see it.\r\n>\r\n> My suggestion was a bit ambiguous, sorry for the confusion.\r\n>\r\n> The "Git link" is just an annotation - cfbot doesn't try to do anything\r\n> with\r\n> it[0] (but cirrusci will run the same checks under your github account).\r\n> What I meant was that it doesn't seem imporant to send rebases multiple\r\n> times\r\n> per week if there's been no other changes.  Anyone is still able to review\r\n> the\r\n> patch.  It's possible to build it by applying the patch to a checkout of\r\n> the\r\n> postgres tree at the time the patch was sent.  Or by using the git link.\r\n> Or by\r\n> checking out cfbot's branch here, from the last time it *did* apply.\r\n> https://github.com/postgresql-cfbot/postgresql/tree/commitfest/38/3594\r\n>\r\n> [0] (I think cfbot *could* try to read the git link, and apply patches\r\n> that it\r\n> finds there, but that's an idea that hasn't been proposed or discussed.\r\n> It'd\r\n> need to know which branch to use, and it'd need to know when to use the git\r\n> link and when to use the most-recent email attachments).\r\n>\r\n\r\nHi, Justin!\r\n\r\nI can agree with you that sending rebased patches too often can be a little\r\nannoying. On the other hand, otherwise, it's just red in Cfbot. I suppose\r\nit's much easier and more comfortable to review the patches that at least\r\napply cleanly and pass all tests. So if Cfbot is red for a long time I feel\r\nwe need to send a rebased patchset anyway.\r\n\r\nI'll try to not doing this too often but frankly, I don't see a better\r\nalternative at the moment.\r\n\r\nAnyway, big thanks for your advice and attention to this thread!\r\n\r\n-- \r\nBest regards,\r\nPavel Borisov\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	{"Cc": ["Maxim Orlov <orlovmg@gmail.com>, Aleksander Alekseev <aleksander@timescale.com>, Postgres hackers <pgsql-hackers@lists.postgresql.org>, Stephen Frost <sfrost@snowman.net>, Alexander Korotkov <aekorotkov@gmail.com>, Andres Freund <andres@anarazel.de>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Fri, 15 Jul 2022 16:31:39 +0400"], "From": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add 64-bit XIDs into PostgreSQL 15"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657888362; cv=none; d=google.com; s=arc-20160816; b=GMegWvbHQOuss+Opdb7f4r4epHm3pQwfPnkvQHgaOuNJ9pqaCC+nTIliV1szBWSys3 cIeVktVKEr2sSNlj031ZyxRv/ncFRfPRkReGVvpmK1rqJkUQ4ANiHlnWWcwY5WbtIIs0 ZpAXIE97Vl5AChMV2RhoW2geFVJkmSALSvHUOc/bQc1u9waXLbm/YdAvFR9lVJMbT7wV 3EaNTgayt4jbfFOT1Q8rvSCXw97gUa+bSgjaysfAh9S1GlHEsVHeAI75XZYbk1p1/kjV zFeIAlYCESf27Tc2ivFVsZk23nNm46LdzmTf2rvlyh4FLny8zbyz9x9UNdSVgfSSzvm5 4LXQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp124264jai; Fri, 15 Jul 2022 05:32:42 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t2-20020adfeb82000000b0021d6436d3b2si4086313wrn.59.2022.07.15.05.32.42 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 05:32:42 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411193@lists.postgresql.org>) id 1oCKUr-0005L1-WA for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 12:32:41 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCKUn-0003l1-4v for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:32:37 +0000", "from mail-yw1-x112c.google.com ([2607:f8b0:4864:20::112c]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCKUf-0007Vn-Vi for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:32:36 +0000", "by mail-yw1-x112c.google.com with SMTP id 00721157ae682-31cf1adbf92so45520627b3.4 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 05:32:29 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALT9ZEGpr3WEPFJL_EHtzE-vF09SPYeAVyoPYZUuG1=yX5oi+w@mail.gmail.com> <CALT9ZEE3aMAT+sATzPEzrti+DZwBse+9+XoiuKkGJV5k=5TrFw@mail.gmail.com> <20220701025335.GA13040@telsasoft.com> <CALT9ZEEg+efQ8nzt3Fn+vHdH19WOAzdACAZtxe9_8_96n+kXNw@mail.gmail.com> <CACG=eza0tv5H4mA+UF_Vk7_cPSQ6kFbzSxKFTuR1o=jmLoo9UQ@mail.gmail.com> <CACG=ezYfMkhEZOAV8b2Cmr16hsb9U3mZv+=8NT1Ox6A0u5L_Sg@mail.gmail.com> <CACG=ezb_YRCg94BUVqAGWjk-4M-LZOHVvFfcXSt3-acRr2xhyg@mail.gmail.com> <CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com> <CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com> <CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com> <20220715121658.GI18011@telsasoft.com>"], "X-Received": ["by 2002:a05:6000:1d98:b0:21b:aead:9b6c with SMTP id bk24-20020a0560001d9800b0021baead9b6cmr12332091wrb.531.1657888362360; Fri, 15 Jul 2022 05:32:42 -0700 (PDT)", "by 2002:a0d:df94:0:b0:31c:afab:1a75 with SMTP id i142-20020a0ddf94000000b0031cafab1a75mr15730552ywe.173.1657888343001; Fri, 15 Jul 2022 05:32:23 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A%40mail.gmail.com>"], "In-Reply-To": ["<20220715121658.GI18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411193@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000c3107b05e3d73535\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411193@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=01qEthPC9T0Ln7eabMDwFt33jmzg6ynwouooeO2+XHQ=; b=jloHlelB0uuCn1YNC8d4/tc4JaDe22GOhlL3jPePvWXG9SVUd8uqUSye4VLyQF5GOm 0GQASs6thzwyi8IATHiU5PORXyt4tenG+3VTVjbK8pMDPN3Q66unHcMRRD0Q+6UQRr6M d1tgLD0lPp4w5x4ykjp6d9/X9BRCV8+fzzEaiUAmc+SkfHnyG8stpfMWhQlYstoYgRgY i4e/x3RnbK71OjBZq+dz1kEZNd7M3jNOACfXaciB79q9QpwvmnHSMOr6KqhlF0lc+TUT 8xdrnNvV4aTBQnV5UY2z3KJxXgAhwk/vycPgZ+iqkf1XOmZElgztQ885E7JBLPayl7to UswQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/8fwsnv4Apk6NfFc/NffPNaKangy8g8pUshXTZNU3akYlwsRoZ vGQIKyjXJVpCa3bWvlQRq7p3594xJTPJVpHV+Bg="], "X-Google-Smtp-Source": ["AGRyM1vvJNRLeJTgzM+vD2mW0FGDhbWbQn7AUgGyheBt0Y8AYVXYB+mm5EZQaNBPNVTE5lZKmONP"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=01qEthPC9T0Ln7eabMDwFt33jmzg6ynwouooeO2+XHQ=; b=wGGKvADFXgmFn419hR65vDq2R1lqLKOqXze2j7SPxDDB6el9HkpG79Je6U1v/Q6jzB qWBiSOjPCZLWt56xCGLW8eAS1ksUp/RuDNB1PgtpXTNLl7pezCa0HYf/NUh/F4+gKRh9 cSdOdeba2GXhfLU+KZoSb7D5E8lvskAUetOAfnrFkpw/LweTbdvyJ/V2bY/o7hq1UL6x 5kWIbYxd3ldLzaIKjRaNa/ShKCTvdyOGVNLGfbJPiwpxuQdGOqp3Ix5/U9oVcVF6bm5+ u3p5zok/+28qN2xNeoArstbBACN3cvsH7PPA3DIbUoXjy55XYdIcMiBaF8+RQQujmUqm EmlQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jloHlelB; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411193@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411193@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=01qEthPC9T0Ln7eabMDwFt33jmzg6ynwouooeO2+XHQ=; b=BXBNV23nlGaH6YWBwWOUDA9wkTwiuAsut+xggvZRcO9H/kDMsHGSaKrLSy8C9nmt9O N2EdGWeCaoyOMSv3sdhVQKglxkvXl/iWVdvaUEJh6ggnQDo6nod8Vu1FT/sc+EdKP2Ww 3bH9Ou/B0dsf5qe1obJJ0qjGqbxUrhlTDr9Ai4iAI4+skkh5R+Gx3oFiUNquIR3/urN8 MZfTpa5idH6GkSyHP7idv0f9+o8O3xLYQxtHnaOc6p7+cR99sHd7F7PloCz6betQ5+kt nQfH6xas0OYb8+mco/vH9Y3GxnaaEGLci2i3D+UmRbY5dVSO+vGNUNo29oYXNZvP84UH kprg=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=jloHlelB; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411193@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411193@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220715121658.GI18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 12:40:47+00	orlovmg@gmail.com	Re: remove reset_shared()	<CACG=ezYS+m1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ@mail.gmail.com>	[{"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}]	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	161	7913	[]	<div dir="ltr"><div>Hi!</div><div><br></div><div>In general I&#39;m for this patch. Some time ago I was working on a patch related to shared memory and noticed¬†</div><div>no reason to have reset_shared() function.</div><div class="gmail_quote"><div dir="ltr" class="gmail_attr"><br></div></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div>Best regards,<br></div><div>Maxim Orlov.</div></div></div></div>\r\n	Hi!\r\n\r\nIn general I'm for this patch. Some time ago I was working on a patch\r\nrelated to shared memory and noticed\r\nno reason to have reset_shared() function.\r\n\r\n-- \r\nBest regards,\r\nMaxim Orlov.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}]	{"Cc": ["Nathan Bossart <nathandbossart@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Julien Rouhaud <rjuju123@gmail.com>"], "Date": ["Fri, 15 Jul 2022 15:40:47 +0300"], "From": ["Maxim Orlov <orlovmg@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: remove reset_shared()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657888873; cv=none; d=google.com; s=arc-20160816; b=cnsKUf1yEk8otEskoZO4XL5XLaBnSpsmZrRNc2TUMXCfma2iKFu4/vYB2B4eRSAviM z1WMK4bWciXp9G4sDMMS+hLAVF+3mL2D83Mmf78cqBi1Epv7o++1/4zWFPSVi0RREAXv vTVNJeg7jWHaqYeDsJJM0u0fuWCS+V5S8VslPBM95epOuoC39Ww/oOgZb5rPcgXSLklP RGz6A5mKHYMISrqGdVzb9yCTdljxX1GqKpHX1vwEOLBRdlk1Y59nc2MYOEwO5JGxjTRl wgCQANqpYA4Cq8e+Uo7RClUEUfwXEjbuwyzM1gT6+cX99earlVoA72YhzF0339V9514C 4kCg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp125769jai; Fri, 15 Jul 2022 05:41:13 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z17-20020a67ca11000000b00356fc1bf8besi848734vsk.480.2022.07.15.05.41.13 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 05:41:13 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411194@lists.postgresql.org>) id 1oCKd6-0001nt-Lx for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 12:41:12 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <orlovmg@gmail.com>) id 1oCKd2-00008p-6d for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:41:08 +0000", "from mail-lj1-x22b.google.com ([2a00:1450:4864:20::22b]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <orlovmg@gmail.com>) id 1oCKcv-0003w6-Dg for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 12:41:07 +0000", "by mail-lj1-x22b.google.com with SMTP id v15so1846308ljc.1 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 05:41:01 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CACG=ezYS+m1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220329221702.GA559657@nathanxps13> <20220330011942.fpouca2laocok7ng@jrouhaud>"], "X-Received": ["by 2002:a67:efcf:0:b0:357:7d53:4f95 with SMTP id s15-20020a67efcf000000b003577d534f95mr5447274vsp.86.1657888873637; Fri, 15 Jul 2022 05:41:13 -0700 (PDT)", "by 2002:a05:651c:510:b0:25c:16c:a223 with SMTP id o16-20020a05651c051000b0025c016ca223mr7028391ljp.31.1657888859270; Fri, 15 Jul 2022 05:40:59 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CACG%3DezYS%2Bm1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ%40mail.gmail.com>"], "In-Reply-To": ["<20220330011942.fpouca2laocok7ng@jrouhaud>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411194@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000088b1f105e3d75425\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411194@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=xJQz56cBVB2bEUh4e1uVpiBQ/bWjZuUxHQGBgYNekOU=; b=LgHa7xOdNnA3viv/QW+s2/ylEgr+yqdQuyko6xnKQ/3xttN1P2Mi/PtAJ2eOdeECnI Ny6Td6KzrgCSbmcINQ5pYsJyM1eIlLdBYGZgkKBQkhcPUwk/oEQwaxoqpOwYWucEw09P cfVNnScFZRgob+FKS3Z01qDQ0JhUI6hCcX+YL7J6m9YMysLygjwLiceH9YjSDNg11Jl+ RL9NB2peZoN+Qn7dQGnaXn15T6XFvtccwwfF7OtwxYRlkHFrB4Ftu5do/mcALDQ/4bv4 iYsLYWpbD6tHmmgEkrWeteW0+xrFlNmyJRbVflqZduW3gC0Tv98yLzLCC8ACgdHXjsz3 K7fQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/jm592RlhNe6WMDFZMawh7MfSr61h4RE2YEqodMbfZLgmCO0+v Y1lsNwHif3h0J/XIFQ4tqes9NzMviSfprkJEKNJTOF6eo6R+aw=="], "X-Google-Smtp-Source": ["AGRyM1v0lcYn2dpm1kg2lLWRWDMz9DQezS9kGojLjpfrez7h7fuzzPTuTyR+zvhsKdRTBH5uPIIQ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=xJQz56cBVB2bEUh4e1uVpiBQ/bWjZuUxHQGBgYNekOU=; b=XWVwxr5fE/ypHRfKEp8QYvMG/lMrZLGVki2yQ0er37AoW8i1ySsc/MpUBysdHGWiPG ngwT1FMU3iMNbm5ly125q+p3OJ/iFx6W5VEvhP6qpRG6Q9BB/38seOity/Q2FR05dh3t 3Yz/40omR52pBN1IuyEVKNvRFKxfh/5gOYYg839hvBdJhnd/vC4BTmSVecI+cbdvA+MP bxuDffxzHL3HO/evbbGl04EYC1hQttsnt2fbo9/9VbARmpJIQCcH9s924xTJBwH8fdMJ +XgTQq/gcd4p27ffsLiH3LlsI9k2t9ifmFqXIriRtcC//A+2ZvzE/wSpAHM2Fev8C/va HGBg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=LgHa7xOd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411194@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411194@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=xJQz56cBVB2bEUh4e1uVpiBQ/bWjZuUxHQGBgYNekOU=; b=tOVZ/6D0LljsEWPSvR6XD62xHO2eJfCigPN8ONsuUqUgXRmoAR6/EQKt6O6qw4+/Vo iRzlko4EfJ1IXkGNKvvuiLTkCj2IifGPPF3V2/1ibGLtWnLg7NiXFJgbEIS/nWfIeQTz cyReHLAPoq83Jx0hMtmOBHEW37ynfmyMmGKMKT66LEBhMIuVeFiW8UwYNfDODzYU70rN FF5qchZ+GTJsd3kZarLnrGlZX6wmxfQLa/HwZeRuBZW2pQfBAZq2yhzsISGbhDUZkszs xb0y8ZqQxGP9uGKOaecEv1SVKAqWSBW22V9+kdmJMDcAh3VDRI7u+kB/ncXvZmMTvnBr G/TQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=LgHa7xOd; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411194@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411194@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220330011942.fpouca2laocok7ng@jrouhaud>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 12:48:54+00	pashkin.elfe@gmail.com	Re: remove reset_shared()	<CALT9ZEH_v33xfJpNjY+BtrYpyvDqPZ8xHCdzjbK21S8XGAUJeQ@mail.gmail.com>	[{"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}]	[{"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	162	13061	[{"part_id": "2", "file_name": "v2-0001-Remove-a-wrapper-for-CreateSharedMemoryAndSemapho.patch", "content_id": "f_l5mgg62x0", "disposition": "attachment", "content_type": "application/octet-stream"}]	<div dir="ltr"><div dir="ltr">On Fri, 15 Jul 2022 at 16:41, Maxim Orlov &lt;<a href="mailto:orlovmg@gmail.com">orlovmg@gmail.com</a>&gt; wrote:<br></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div>Hi!</div><div><br></div><div>In general I&#39;m for this patch. Some time ago I was working on a patch related to shared memory and noticed¬†</div><div>no reason to have reset_shared() function.</div></div></blockquote><div><br></div><div>Hi, hackers!</div><div>I see the proposed patch as uncontroversial and good enough to be committed. It will make the code a little clearer. Personally, I don&#39;t like leaving functions that are just wrappers for another and called only once. But I think that if there&#39;s a question of code readability it&#39;s not bad to restore the comments on the purpose of a call that were originally in the code.¬†</div><div><br></div><div>PFA v2 of a patch (only the comment removed in v1 is restored in v2).</div><div><br></div><div>Overall I&#39;d like to move it to RfC if none have any objections.</div></div></div>\r\n	On Fri, 15 Jul 2022 at 16:41, Maxim Orlov <orlovmg@gmail.com> wrote:\r\n\r\n> Hi!\r\n>\r\n> In general I'm for this patch. Some time ago I was working on a patch\r\n> related to shared memory and noticed\r\n> no reason to have reset_shared() function.\r\n>\r\n\r\nHi, hackers!\r\nI see the proposed patch as uncontroversial and good enough to be\r\ncommitted. It will make the code a little clearer. Personally, I don't like\r\nleaving functions that are just wrappers for another and called only once.\r\nBut I think that if there's a question of code readability it's not bad to\r\nrestore the comments on the purpose of a call that were originally in the\r\ncode.\r\n\r\nPFA v2 of a patch (only the comment removed in v1 is restored in v2).\r\n\r\nOverall I'd like to move it to RfC if none have any objections.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}]	{"Cc": ["Julien Rouhaud <rjuju123@gmail.com>, Nathan Bossart <nathandbossart@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Maxim Orlov <orlovmg@gmail.com>"], "Date": ["Fri, 15 Jul 2022 16:48:54 +0400"], "From": ["Pavel Borisov <pashkin.elfe@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: remove reset_shared()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657889386; cv=none; d=google.com; s=arc-20160816; b=ADvTSsEFNTsW7fB7Q4PYW2kIkd4A8ce9mZPhOoV92aSFm+LeZcUDgPjKTX5RVZ6q+e aapCGHwY6FffjbaGK3xbIQ96tGaF7FoUxmdACvN207VlLqWqQ/08KOEPVABDTyGq2aPB c3QkFBFuJoACafg5Q+CFY+K9aajuCN4y38hXdUEbXGl321fQDEu8A2593ao4LiAXNpwN Jky3cZ4sR8SnskRV75RGdlUQFq37V7uFLXPDfgj0b9QsAheP5yr0ahZM0k9V7igACln3 3nSF+E1A665BSPZoepTxhWZfsml76AFxJmYWtnhsDGH5yXozPx+xDl4gYfC/8AlbDg+7 WZhQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp127232jai; Fri, 15 Jul 2022 05:49:47 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id v14-20020a056000144e00b0021d704038b3si5436212wrx.751.2022.07.15.05.49.46 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 05:49:46 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411196@lists.postgresql.org>) id 1oCKlO-0006Ic-JS for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 12:49:46 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCKlJ-0004hF-MW for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 12:49:41 +0000", "from mail-yb1-xb2d.google.com ([2607:f8b0:4864:20::b2d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pashkin.elfe@gmail.com>) id 1oCKlG-00040m-OY for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 12:49:40 +0000", "by mail-yb1-xb2d.google.com with SMTP id y195so8357653yby.0 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 05:49:38 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CALT9ZEH_v33xfJpNjY+BtrYpyvDqPZ8xHCdzjbK21S8XGAUJeQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220329221702.GA559657@nathanxps13> <20220330011942.fpouca2laocok7ng@jrouhaud> <CACG=ezYS+m1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ@mail.gmail.com>"], "X-Received": ["by 2002:a05:6000:10c1:b0:21d:76e0:c6de with SMTP id b1-20020a05600010c100b0021d76e0c6demr12213460wrx.623.1657889386949; Fri, 15 Jul 2022 05:49:46 -0700 (PDT)", "by 2002:a25:6f02:0:b0:66f:5acc:7866 with SMTP id k2-20020a256f02000000b0066f5acc7866mr14178140ybc.461.1657889377990; Fri, 15 Jul 2022 05:49:37 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CALT9ZEH_v33xfJpNjY%2BBtrYpyvDqPZ8xHCdzjbK21S8XGAUJeQ%40mail.gmail.com>"], "In-Reply-To": ["<CACG=ezYS+m1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411196@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"00000000000074249805e3d77311\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411196@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=6kNb8X3IU0D9o8EhHDe8duISlUXGDgXJHsXhmfA+i+E=; b=SyLhL1LfBZmYXsfDWlZ9tVIg5PMcO+GBneRb1AJ9BUE2/tdkOeW6rmvyiAAgtcb7mf Ve0hQpympkIR+t+EzWec5xTuOKTUUkvQ/gufHpfc9ngYVsimVJexSN9/1GJHTz/iNCKp N2eSwAaj0uH2p7uzaYZNfk1nGAw5i+r1A+7KSwOZrC8Py1BiXFbSolQ6XMwqZ0WefMyO 5tuA4sDbbeGvMXgJwzJZk5GFrmmneRuN/CJqSqFx7/NV36WjOo8iGXYBSo38gVuCjZdI 3MtX/6H4DVYcJBI3rQ19zlERWlhJ29v2ftt7rt+eJsAEUrE22HD5kPIvKbSZzoHiMQzh hxyQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9l9to3jGmVjdlp2O7iCQeouMX+qLqA2BKPa0jdmXvIGdT0dC/N DqqFdUNKJ9cLKXV+RrUGANcnZ658lXYDM0XpvHc="], "X-Google-Smtp-Source": ["AGRyM1ta2e5XpQ94HC/kDz13skN3Am6+EmxpDVRjEgFVdC+CBKz3XMCcvbkqBnYX8hCqe2+xAQJn"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=6kNb8X3IU0D9o8EhHDe8duISlUXGDgXJHsXhmfA+i+E=; b=kKuh5w95LWNy30fwlHBJ0cr35RA61d5C+iT+h5ObA7T9LrMvZYk7abjDVRQIDwUVSY pQ2HubPFJajuF08yJ28lSPe/efv5MtIsK0QJXES2V5es8fXWPuaBLLX0wq9+UTagGwjc ad3m8wT9fbuCRZN43gJccgo19nd0rGEIEvxpiUoHISM/HFSFm+xKjPTdtw3UHvQIkOf2 Om31CxBh6x61vFMF7plgkouKdZHeLdzbHR/YFx9C6aRKc3DiZSiSRgvg5pELDisgmY8s iW/P3omyo37vwYKy8tcSsvPaCC/Ufez63NZncVben60vkP9JRC2TwSh04zS8Q0+Uos8D Ex3A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=SyLhL1Lf; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411196@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411196@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=6kNb8X3IU0D9o8EhHDe8duISlUXGDgXJHsXhmfA+i+E=; b=ohCEt5anOilASIUoEvMCg3li6H4VJSWUVpU6Ufg7tzJD6kgTt+Thu1Heqk87Pc8TQD UkCTI2SmZYZXtuctfD0aaH2hGqHO9NyOWmLEe6LkueDDtpNF9ObWoksxL5uzl2kbD0Ml yccnZ4/tyYWQznIq5iJOV5O9xwPrK+s9hLiBrJFFcxDvwT2ZVL1QwwhQMRTJ1bW563PD KN+/raiGnqc5L3xSQYLtT+IWB4teEHf8YWpjUizG6N/FEv6r79z+1W1of2aKDxfNpk9C sgmj8lZvh1GOgI8R81JdN1zlL7R7MDf+chbZ7DMrKb5QF5SIuYogQB8jqjyd4h1cx0jb m+jw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=SyLhL1Lf; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411196@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411196@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CACG=ezYS+m1LATFiVfKGkgD3AsEW8O9b6NbZPeks6sSr2G73DQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:03:34+00	alvherre@alvh.no-ip.org	Re: Allowing REINDEX to have an optional name	<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql>	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	163	8488	[]		On 2022-Jul-15, Alvaro Herrera wrote:\r\n\r\n> Not sure what to make of this.  Maybe the fix in 054325c5eeb3 is not\r\n> right, but I don't understand why it doesn't fail in the macOS machines\r\n> in the buildfarm.\r\n\r\nAh, one theory is that the libpq_pipeline program is getting linked to\r\nan installed version of libpq that doesn't contain the fixes.  Maybe you\r\ncan do `ldd /path/to/libpq_pipeline` and see which copy of libpq.so it\r\nis picking up?\r\n\r\n-- \r\n√Ålvaro Herrera         PostgreSQL Developer  ‚Äî  https://www.EnterpriseDB.com/\r\n"No deja de ser humillante para una persona de ingenio saber\r\nque no hay tonto que no le pueda ense√±ar algo." (Jean B. Say)\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Michael Paquier <michael@paquier.xyz>, Tom Lane <tgl@sss.pgh.pa.us>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 15:03:34 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657890235; cv=none; d=google.com; s=arc-20160816; b=vC7l1zXBXVFSNc1txH3blkMMyRMOTwQcDZgZccA38BzGEok4AzIMdQNsIPXXhAELIC Gvt55ZAoHuEYh+k16YyeVFlEnP/bAsirhVQ67zFbyz7cozO8HDZZ32tPlY220ZYK1kMy Z10KSlDGVKQgC0naj7D3tC8h6vlqz4E6QriKoLT8jHpGKJRtjlz3cLR9QP+EI3SW+fKZ BZi1pwDZYFbQyAkES2XR0+ohBEZ5bMHoMqQXB4hcHfd0pENjRaoRidyr1OYknGUwj6r3 Q/2bnbL7L6l8irkJ17OuhhnnXx6UzWqL/l4Z8HONUuBh8bMF1MO36umq4ogduFbEgP17 AY1Q=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp130227jai; Fri, 15 Jul 2022 06:03:55 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id k11-20020a5d628b000000b0021d67f80540si4099549wru.624.2022.07.15.06.03.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:03:55 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411199@lists.postgresql.org>) id 1oCKz5-0006o6-E2 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:03:55 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCKz0-0005FN-Ey for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:03:50 +0000", "from out5-smtp.messagingengine.com ([66.111.4.29]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCKyt-0007lQ-08 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 13:03:50 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.nyi.internal (Postfix) with ESMTP id C28425C0042; Fri, 15 Jul 2022 09:03:39 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute5.internal (MEProxy); Fri, 15 Jul 2022 09:03:39 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 09:03:37 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id 8BFBF36E; Fri, 15 Jul 2022 15:03:34 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:qWXRYvalD66vojBUkVKPNVSmSmw0iEzbpQq2_7ABLmSnPiROE-9SDA> <xmx:qWXRYhZy0Lozh1c411OZc-_yPhw64tQUFh62tUTac6OFYKKFYW7s_w> <xmx:qWXRYrDzbpJprcvi5Jy0LAh7vfRvWs0gZklvc1rJPEl0NYGdeHeWRw> <xmx:q2XRYkwVPh96OaTgVYp3W3GmiF03kS5aMxFXSUFKPkW4z70sT_-zug>"], "X-Received": ["by 2002:a05:600c:3227:b0:3a3:be7:2917 with SMTP id r39-20020a05600c322700b003a30be72917mr3458159wmp.83.1657890235794; Fri, 15 Jul 2022 06:03:55 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715130334.p2qe6nefuod7ncex%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715115856.3litqg6rxzoijz6u@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411199@lists.postgresql.org>"], "X-Me-Sender": ["<xms:qWXRYqLQ0Due0dJodN9Q88D0vWToGVHGQ76G5xLgsHycjHAxhvf-nw> <xme:qWXRYiJ9qCwnFTzG1UY9I32To98y-t0V7aD8F9Ao8RJkFR_rtXYzP6WfhwYqnkylo Zo0p3w4oc2n5sUrlQ>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411199@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:qWXRYqsr4jKRjmTvvAphhtLuDHLnWgz3q-GtNkA11lH_vhy4053uUMoD1c0-6VgR-TnaS4DVbSgte_HQg3SRGZB4RJLLBhjVhQAFJw5->"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657890219; x=1657976619; bh=i 0MdC7esI75kKWVLHaEE6seuorRhAMAndq2xYFKib/g=; b=YQb8AcPTm39+dr7tT VzObMz+VVePkxcUymOw7x0l1rjGxqrFsi4gBz1RA3XfSS5dSPLKYS/DSYv+cXx9m 8xwB0Jnz/nYkxNGIKcALgF9Yb3Hv4oh4flGhWZ0MIuucCgOTA0TsVLAL8n7gdBe2 YHgbYdh0LfolU/09UioKFt5jgm5mTF68tMKvaZXf4DxxUOW2A85F+Cy8fEow7QwV x42VTLC3vyIph0opXUk8zczbKd74E8SmyQQeq6dya5iFxi1LivMTYACQbuwRTXzR o/lIzWWhTITh5TW7GaF/+gbMobX6GaXZE9EISIgPRl5EEHBgnf++NGZv4KhqZJ4z V+TcA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgieduucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkgggtugfgjgesthekredttddtjeenucfhrhhomheptehlvhgr rhhoucfjvghrrhgvrhgruceorghlvhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh eqnecuggftrfgrthhtvghrnhepvdektdffudfftdffffehfffhjeejhffgieeuueekjeek fffgudffhfduffffueevnecuffhomhgrihhnpegvnhhtvghrphhrihhsvggusgdrtghomh enucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegrlhhv hhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorhhg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vF1AcoRe39us+HLtbORE4qvN3tmrgQZzkMVZvmTjUTeM9cfAPp5HtZzWg7WjizsMBJ4S2R"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=i0MdC7esI75kKWVLHaEE6seuorRhAMAndq2xYFKib/g=; b=WWHsbroyXpO3ZggxP/GSqiC/DoXyDSN+sNF13lgAO29afrCZ90s6AX/tYfYFgQmOC+ dDwWqfgDGJqax3Ns2RfT3NFqGNe5FGxkvqt4DGui4aWqhLYdyS/BEDM7qU0VDgDqOBs1 vB8zO89MnQMSjkC4d4Iv40NhFHxQzxni3Mt2LNJNdmZ7Ir8cCYDJqlVFoJU7oY5zBevf oCRotyvcmXzUBjAu6CQC1g1vxnh1ZJATqR4At28apHuEp9oHrjb1N6A43DxGWl42RsId QXuURQ5JNdOh4hu2vPdT9pXeZNJTnaW6Il5OHB+u2oU9XB2jKW1n9g3gtT7yDHrSBSvP xTeQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=YQb8AcPT; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411199@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411199@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=YQb8AcPT; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411199@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411199@lists.postgresql.org"]}	["<20220715115856.3litqg6rxzoijz6u@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:29:20+00	japinli@hotmail.com	Re: Doc about how to set max_wal_senders when setting minimal wal_level	<MEYP282MB1669E34DF43FD3A0008FB76EB68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "david.g.johnston@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	166	12865	[]		\r\nOn Fri, 15 Jul 2022 at 08:49, Bruce Momjian <bruce@momjian.us> wrote:\r\n> On Tue, Jul  5, 2022 at 08:02:33PM -0400, Tom Lane wrote:\r\n>> "Precondition" is an overly fancy word that makes things less clear\r\n>> not more so.  Does it mean that setting wal_level = minimal will fail\r\n>> if you don't do these other things, or does it just mean that you\r\n>> won't be getting the absolute minimum WAL volume?  If the former,\r\n>> I think it'd be better to say something like "To set wal_level to minimal,\r\n>> you must also set [these variables], which has the effect of disabling\r\n>> both WAL archiving and streaming replication."\r\n>\r\n> I have created the attached patch to try to improve this text.\r\n\r\nIMO we can add the following sentence for wal_level description, since\r\nif wal_level = minimal and max_wal_senders > 0, we cannot start the database.\r\n\r\nTo set wal_level to minimal, you must also set max_wal_senders to 0,\r\nwhich has the effect of disabling both WAL archiving and streaming\r\nreplication.\r\n\r\n--\r\nRegrads,\r\nJapin Li.\r\nChengDu WenWu Information Technology Co.,Ltd.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Japin Li", "Address": "japinli@hotmail.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, david.g.johnston@gmail.com, pgsql-hackers@lists.postgresql.org"], "To": ["Bruce Momjian <bruce@momjian.us>"], "Date": ["Fri, 15 Jul 2022 21:29:20 +0800"], "From": ["Japin Li <japinli@hotmail.com>"], "X-Tmn": ["[5jBMdKvMlNtWNxxKUM7NIeSunxr+Juma]"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Doc about how to set max_wal_senders when setting minimal wal_level"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657892055; cv=pass; d=google.com; s=arc-20160816; b=XRGzm9xKAtTKsSu4/Kt+JGsjQplZoMzU0ggTP4Ot49lCpndnHlf1Mmj1XjrUQYn2lB xGbCtQy0/p5hZ2GRcxLxeV8R16webQkWyuY/ddo0ZpnvnaOBx6/kMoYC80aTUX4fjK87 ph+28Z/d6lurMZCbQcz33mfbwasvCDA9/3DRtl4QkRxPLhDEL25wK57OcTRx4EKxkO6r hWoIauCd2vY2sAQb//ltGn9NDWL/zpRZdWG6XBVGWke0ZtFBALZ/6kYpkt/JQoen4O8F tAmOBeI+si7sNNvzR9A81efihsqeV4y8ZFaA9o8exygNByJT8J4j0A6OzDUL6s/gQifQ dJ2w==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=GOufw8/y9f3DjIcs33eZn1YLiKF2Ofc8Ndf10WXkm7cDq/NG1Wd92XIQKTIvReduo9fYc3M0o1tZj1x81rTInd1GuxC1gtuXwQpzUUIZDtGdn+fCiUmFSYSsDTyvNdXapULy9sXaZSxm0cGyqdgvmalHk6SYvq0PXuf7VWtFlOJNftjROyJAnhffLxsHdm710+YCN31YXo7/shkztmo/PvAjmF26xx1xSrJx/V6zXJjBFZqx6BkodsIlxI2As4VDTib4hwTZNzhVSEpRFoSw3EJpIBENfLSVXyEIHOzb3B67MLMOhv4HBxvqqKHUu0uDcCU2Hoegu7MGQ8pWNuTvzw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp137815jai; Fri, 15 Jul 2022 06:34:16 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c3-20020a05600c0a4300b003a2b7d72855si13322923wmq.144.2022.07.15.06.34.15 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:34:15 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411205@lists.postgresql.org>) id 1oCLSR-0006lx-K1 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:34:15 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <japinli@hotmail.com>) id 1oCLSM-00051a-DC for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:34:11 +0000", "from mail-sy4aus01olkn2183.outbound.protection.outlook.com ([40.92.62.183] helo=AUS01-SY4-obe.outbound.protection.outlook.com) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <japinli@hotmail.com>) id 1oCLSF-0004Jl-FW for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:34:09 +0000", "from MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM (2603:10c6:220:c3::12) by SYYP282MB2064.AUSP282.PROD.OUTLOOK.COM (2603:10c6:10:78::15) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.19; Fri, 15 Jul 2022 13:33:56 +0000", "from MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM ([fe80::fcea:970c:bf9f:ff70]) by MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM ([fe80::fcea:970c:bf9f:ff70%9]) with mapi id 15.20.5417.026; Fri, 15 Jul 2022 13:33:56 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<MEYP282MB1669E34DF43FD3A0008FB76EB68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "Precedence": ["bulk"], "References": ["<CAKFQuwZ24UcfkoyLLSW3PMGQATomOcw1nuYFRuMev-NoOF+mYw@mail.gmail.com> <m2k0dbsmkh.fsf@hotmail.com> <MEYP282MB16696D67A00860E84B67DE4DB6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <20220304.150535.1261751585521581252.horikyota.ntt@gmail.com> <MEYP282MB1669FD5DB2A59F8104ED3C32B6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <2040586.1657065753@sss.pgh.pa.us> <YtC5oOW7H50vT/L7@momjian.us>"], "User-Agent": ["mu4e 1.4.14; emacs 27.1"], "X-Received": ["by 2002:adf:e112:0:b0:21d:7195:3a8d with SMTP id t18-20020adfe112000000b0021d71953a8dmr13434637wrz.371.1657892055976; Fri, 15 Jul 2022 06:34:15 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/MEYP282MB1669E34DF43FD3A0008FB76EB68B9%40MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "In-Reply-To": ["<YtC5oOW7H50vT/L7@momjian.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411205@lists.postgresql.org>"], "Content-Type": ["text/plain"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411205@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=hotmail.com; s=selector1; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=llQD4CnEL3XOMGEVN2pi2u6387ZBkEE9JH+tBNdYNtk=; b=i+wT/3XBzbmCCTNF4khLUUUihj4HOQ3Eieos/gFjwbOF3XrJlv2h0H8FvXlW4lXJ7olF1cjces+LYvt5WiqUnBUv1aSk1AEZrEIY31kciLoaS4aArUohT3kv8EfI7C2YkLT0wSJ6mJakf8htDxmNTSczv+3vZui1FRYTjVuWAL79DJwkl1n8SzPk2QU8XAX2OifqpEA3OnH3tDL8/H7UwnTragE+ah21hwMIiX6jNIuEXpV+hKI2JeBGQGgtavVe0pPE9RbwtrMYH7DgL6WXkfZ5CkaaQc8vZmvXnpRBJ+s9OzsB/RQDp/EnOJcjduUQHvl1NXh3+U2ZoI1lqSrmJw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Originatororg": ["sct-15-20-4755-11-msonline-outlook-746f3.templateTenant"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Clientproxiedby": ["SI2P153CA0026.APCP153.PROD.OUTLOOK.COM (2603:1096:4:190::18) To MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM (2603:10c6:220:c3::12)"], "X-Google-Smtp-Source": ["AGRyM1uRZH5Fhi8v0Z5rAGzUkI5a8w137NyQnB/1UaTOE2woc/i2ZDNDLu+aJ6nKsIuEDqaipWD/"], "X-Microsoft-Antispam": ["BCL:0;"], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version:message-id :date:in-reply-to:subject:cc:to:from:user-agent:references :dkim-signature; bh=llQD4CnEL3XOMGEVN2pi2u6387ZBkEE9JH+tBNdYNtk=; b=MLBn+kWKUaRigvUwxAMUY5D91/GV7iJdsALi0nWrZFEww2baYeddnSegZN/vMoKIgF 1BHh8DYWQ9lDxLT1MCmOThopJve5l9bYJPpK3204nu/scjJF0vPbhsBGaFvQE3gEheUW JP7L6GZ6dSdADo1vjQCXh7N7SUsAnn2m6osEYcZK1JWa4y3zQACaLWa2Gjyelh7Eq3ne 88bwfpwIcKruAszHc0dChBkf9UywDU7b3u6DTZfOOvRvWVzuMYFI451Y0AkZA8zNPn3W eTOo8dRBsDL+x6QL/EtNkOko33+btgVwl5eZz4wlcE6giZLImgSrWOaBlnxJ5gLjVxWf Rhzg==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=llQD4CnEL3XOMGEVN2pi2u6387ZBkEE9JH+tBNdYNtk=; b=fQxP3hhCCZTiQKKxh/XFjaFe/JdGd4I7/vseVm8xod5PUZo5EaBwxQYOWQAeYim3atvlZf/mGmZ/Wsc9UvuNYZUerK9v/VNvn1GhmwJ73rneElysbUmC68PS74Q7c9/RdARU+Jj8ekZ4XJuwWAnRbudPooPzFmtQErgUj0P6dhth30WkWf+Y068BOy0dkzd/dwYm7JJiSo2M41bLBZMI4FEC6I4lijPvO1SHKGZS6kJuHT+fEGGnzlP/oURFBAXpf3uX86UPa8LQbZZ6c2xISQdn4lzER4KKfeJRY2OmzSKq5F1Xcd5AIYTfNL2DjQNGkEAXlh3nKQ9usfANwka9lw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@hotmail.com header.s=selector1 header.b=\\"i+wT/3XB\\"; arc=pass (i=1); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411205@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411205@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=hotmail.com"], "X-Ms-Publictraffictype": ["Email"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass header.i=@hotmail.com header.s=selector1 header.b=\\"i+wT/3XB\\"; arc=pass (i=1); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411205@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411205@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=hotmail.com", "i=1; mx.microsoft.com 1; spf=none; dmarc=none; dkim=none; arc=none"], "X-Ms-Traffictypediagnostic": ["SYYP282MB2064:EE_"], "X-Ms-Exchange-Crosstenant-Id": ["84df9e7f-e9f6-40af-b435-aaaaaaaaaaaa"], "X-Microsoft-Original-Message-Id": ["<m2y1wu5wsv.fsf@hotmail.com>"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["b1cFAZQV3DlfbCbb5b6u4Jl/MuBRcxK/DwfD/KZ53ZTbX/edd2aRnlZVmSn1L/GsqDzHre5dFM7ZqgrpCeKcF6PLE5AOi/QYxvv7P5gUwk4sI+08Ju7FeAu6e6bCZU5NiI3MOPgQCMzb2NrrA5v/tuK9vkNhH5Ddg9XR8N3BNJm1wCg6gQVt+06PIRrqaZti2Oa37Iw8RqaBVdFNZbi5MzWQgnEEj2Ta1cxx3m45T9K3srRry2IqFTiyrOJjkD+vf28ce7I2Yhll3x6VFkDARBmDw2QJ9FoShTMFq+KLxNelNdPw69bTkcmAatNMhiC62Jh/jiGOFHGIqnNbtmaCkky+G5A2KRSWGNHfaNPRFEi7nLGx8TLlMh8PCh2T6rppmUrIL7lc4/NZzKPnQtzvoz4LSUYT3fyCqq52fxNAu+q4YdQ5QpJshhPBeA4f1Gm3aqYzVzrVHolQW7dvl1CIKVEHoeYWJQhJUNpSQdPh2zdbie+Dmer8NvMQoxsCWCE1auiErzFuhPtdSKhIeFlqL0CvnM9iUxkeDZnRi+aTfz88dRkaOFiDSpfI4o8GeKBMGr4aoHBILLms+S1zU4fLaArCA4cQTXy+WlG3eDnPSl0I+F9kulk8GWHotEIdewcqK1KHIIAllL6yMTPX8Fhcb7GdW15JPjGii9CRBdt+jJ9TD8dUQ4SlxtOdAa4uDewm2Odgf8BaUgSzFfouuNXX1Bt27Yd4DssASLE/tpqeVFs="], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?us-ascii?Q?2mj5qmNA2+lZWuxxEzeq8NndS/2oProDC9E9xfj3f5mr3tLFyvXRbHT738g7?= =?us-ascii?Q?/CD5pd+P0V3UemPnQWgkZ4Jy/TV7m7coAmbpKEMEKEadIB09UJQXDZpzp4vb?= =?us-ascii?Q?eB9c+cV50TRoyh+WuLJHi0w/Tj8vSpYTK4gdyIRhynxukxtgw9CAfdTN0m+V?= =?us-ascii?Q?hID5Us/G+a09A7CN5ikDv/MI1kvJqWX/kocKmAsEKwaVrfLuGjlgyoTDhxT5?= =?us-ascii?Q?lJBcAyBwAftzjx0js50LcH4O3F2etCsqS0pkVViwRJmaJ38PW+xVHuezrGqU?= =?us-ascii?Q?aXyCtO8WOngDTd6SVMUlDRfsUgL5H/M43AXJqdjoHJ1oCCQUhQ64m6Mn0UIT?= =?us-ascii?Q?z/34sD+wsmc9ZTopv1qTeNoCYk/iEDC3siseqlFrDHUxHBYq1BJij4dXtyCK?= =?us-ascii?Q?U01U82ompH2igcD4eqAWzl/d8193mvzr6sNVlBGRZ3uRQPPizEmBQPKsNtD4?= =?us-ascii?Q?L74YKdkKUpSeqpZDBUvuwVRfTs8M8Zag/4BuBZLERdapoUTzINFaizaDbFbZ?= =?us-ascii?Q?TZdVC8t49Y/9yzQUOiKz3Yq7pQVIAU5jTc3VWuSN7+bRGogNWO39++ADNPs1?= =?us-ascii?Q?nLy0qkgpVH9c3ZB/N1xKUtm5M+9++Q/YbZVddfWJKxW+PFCjfSB5aALrYsTR?= =?us-ascii?Q?/7v26gdMxSP2eDe2iKiqPmBYrRy+WvqTJETlgDk7x9Px+/hpEAGshZkV9wax?= =?us-ascii?Q?6RNLGMPbMm3ixVfBxQDsiqV4vQxNtzykU7C8b/ILz//VLhP7/vl1yD2VvgZZ?= =?us-ascii?Q?PXnM5rn4zxgnaTgBv9erYm1+v/i97AAb2VGCymN6MRNC+t+yja7cQlfZuyVp?= =?us-ascii?Q?VNUWJ8+3L9csFJIkgno6aoOZwU3TY/s3viQJfR2/zBmihcjIA6NsBb6piQ04?= =?us-ascii?Q?FkHrBpBiEMsNOotNiyzysyPY+WuwUZJ2FNTSSHsKFBUh33jThu7YLn/NzzFq?= =?us-ascii?Q?rbFkAieSbiA/XANkSg/OftH2m4CJ430O7fEl/xaWJssB9VkQpvCLGzrnw80y?= =?us-ascii?Q?YeWZcyDIOMKfhCFZ4JbTD2lGHKqh2GKce/fW4EnE3FEa7KLyKu6uiC9ViGKV?= =?us-ascii?Q?6bcjvA5J5bXUs/23pYTo/53wUONHba4BTbOVo4x6gCzuDnqjhx90Fgt6NHtU?= =?us-ascii?Q?MoXUJzLqIiLEi+tyTKfcqKTjnJAP1fLngxPjp0g50Gghv8eetymyB8H2UryT?= =?us-ascii?Q?vUMdXSQucqgZto6EwLYlG19xRteJKQVE6NgqE9gTm/i7JO86eEgK8op1SkzJ?= =?us-ascii?Q?plfnLD9auyAq3VAzkPbw8RuM5ByF9nsBI4LHC4/wuA=3D=3D?="], "X-Ms-Exchange-Crosstenant-Authsource": ["MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM"], "X-Ms-Office365-Filtering-Correlation-Id": ["9e319bfc-de3c-4d3a-231c-08da6666aabb"], "X-Ms-Exchange-Messagesentrepresentingtype": ["1"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["9e319bfc-de3c-4d3a-231c-08da6666aabb"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 13:33:56.7664 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["SYYP282MB2064"], "X-Ms-Exchange-Crosstenant-Rms-Persistedconsumerorg": ["00000000-0000-0000-0000-000000000000"]}	["<YtC5oOW7H50vT/L7@momjian.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:28:25+00	tgl@sss.pgh.pa.us	Re: EINTR in ftruncate()	<3353397.1657891705@sss.pgh.pa.us>	[{"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	165	5925	[]		Thomas Munro <thomas.munro@gmail.com> writes:\r\n> On Fri, Jul 15, 2022 at 9:34 AM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n>> (Someday we oughta go ahead and make our Windows signal API look more\r\n>> like POSIX, as I suggested back in 2015.  I'm still not taking\r\n>> point on that, though.)\r\n\r\n> For the sigprocmask() part, here's a patch that passes CI.  Only the\r\n> SIG_SETMASK case is actually exercised by our current code, though.\r\n\r\nPasses an eyeball check, but I can't actually test it.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Andres Freund <andres@anarazel.de>, Pg Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Thomas Munro <thomas.munro@gmail.com>"], "Date": ["Fri, 15 Jul 2022 09:28:25 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: EINTR in ftruncate()"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657891722; cv=none; d=google.com; s=arc-20160816; b=s/W0xPdAj5bRO7EN3Opoh9RkhpKJH+PxYsSuwtFPKzvdVFrhJDu74xDPUKSn+t5Tsc 9HvCt8cyMKBvxbOvDOFXenZQOKx6f9tfcnfaNYe53yE5tSqUXjLbYo36hff/Olab6MwF 2i/CdpnbJmDm9iQi36OLzxHSj6rEI55zFr3XMBgEcZemcw2LhVqRvPMl2PRXRPlP7e51 QYdkYWnpIzzqn1MKSULk0vRn6V8rVoNghC8SDmGAbYCS6Yfbmwm86T1rXZOk2oZrCUjq KRG8ZlV+JQpx8pqR4P046D51qxhWlWJ0ulzguSboVASymE4uDGOnFSvpJsXtKxTEI7jt PRUw=="], "Comments": ["In-reply-to Thomas Munro <thomas.munro@gmail.com> message dated \\"Fri, 15 Jul 2022 16:19:10 +1200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp136400jai; Fri, 15 Jul 2022 06:28:42 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m7-20020a5d64a7000000b0021db9a6a87asi8316232wrp.760.2022.07.15.06.28.42 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:28:42 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411203@lists.postgresql.org>) id 1oCLN4-0000St-10 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:28:42 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCLMz-0006wg-7J for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:28:37 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCLMs-0007ve-ME for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:28:36 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26FDSPvk3353398; Fri, 15 Jul 2022 09:28:25 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3353396.1657891705.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3353397.1657891705@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220714144652.jph7exiywushg4gc@alvherre.pgsql> <2835511.1657812444@sss.pgh.pa.us> <CA+hUKGK2pLvUOM-EoRLQxL-fC5hFzi6Xa9za9hNmAf2DteVDFg@mail.gmail.com> <3153247.1657834482@sss.pgh.pa.us> <CA+hUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA@mail.gmail.com>"], "X-Received": ["by 2002:adf:fe81:0:b0:21b:88ea:6981 with SMTP id l1-20020adffe81000000b0021b88ea6981mr13393891wrr.616.1657891722312; Fri, 15 Jul 2022 06:28:42 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3353397.1657891705%40sss.pgh.pa.us>"], "In-Reply-To": ["<CA+hUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411203@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411203@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1uI8L3ZVCaryQp++R+urfgm66t8m8Rl7xReuDCXboH0wL/d+E7dLkCfcKammpLrXPIBpEP8"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=NHQ2Dka2YDmEWa8thSpEzxrTvI8DKARS6wKwfybrj4U=; b=KjDsIMA1lj267BKgEGK9l+lNrCcdY98gQMAI0+SVodROh3eYl6CV141Hy+wROFjzEP 8O8CMCTYHrpJaMC2E3vTrC0BNuTn90eIWRLr97AGBxi4Ti2+n879s11V0njTuWCi8E5b qrxh1EHoLoBAGgqLthVC6IKCKXMP+4M6PlHdTeg/junL9DMwJaGAt3lc7QrCFwxySSqN TB7wGZZsM7GnXqdlj3aDlC5I1gHYd6BWTIobmLgsXoLW9iIr7RJUjZlAmnGhgP56Zwdw RuMx67Ui8xl5Z/HxTRYQXmteHcMDiJHuyJmGUVvV7kvOJ4E2n+yFuXvBfW/wA+2sTuqU Y++Q=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411203@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411203@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411203@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411203@lists.postgresql.org"]}	["<CA+hUKGKBWH5z04dDWXfofaSCxHBNteDqrOVu8GJQayUybrp1hA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:23:02+00	japinli@hotmail.com	Re: Doc about how to set max_wal_senders when setting minimal wal_level	<MEYP282MB1669D35AEAB838638C97BFF6B68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "", "Address": "david.g.johnston@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	164	13419	[]		\r\nSorry for the late reply.\r\n\r\nOn Wed, 06 Jul 2022 at 08:02, Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n> Japin Li <japinli@hotmail.com> writes:\r\n>> [ v4-wal-level-documentation.patch ]\r\n>\r\n> Hm, I don't care for the wording here:\r\n>\r\n> +        A precondition for using minimal WAL is to disable WAL archiving and\r\n> +        streaming replication by setting <varname>archive_mode</varname> to\r\n> +        <literal>off</literal>, and <xref linkend="guc-max-wal-senders"/> to\r\n> +        <literal>0</literal>.\r\n>\r\n> "Precondition" is an overly fancy word that makes things less clear\r\n> not more so.  Does it mean that setting wal_level = minimal will fail\r\n> if you don't do these other things, or does it just mean that you\r\n> won't be getting the absolute minimum WAL volume?  If the former,\r\n> I think it'd be better to say something like "To set wal_level to minimal,\r\n> you must also set [these variables], which has the effect of disabling\r\n> both WAL archiving and streaming replication."\r\n\r\nYeah, it's the former case.\r\n\r\n>\r\n> +        servers.  If setting <varname>max_wal_senders</varname> to\r\n> +        <literal>0</literal> consider also reducing the amount of WAL produced\r\n> +        by changing <varname>wal_level</varname> to <literal>minimal</literal>.\r\n>\r\n> I don't think this is great advice.  It will encourage people to use\r\n> wal_level = minimal even if they have other requirements that weigh\r\n> against it.  If they feel that their system is producing too much\r\n> WAL, I doubt they'll have a hard time finding the wal_level knob.\r\n>\r\n\r\nAgreed. It isn't good advice.  We can remove the suggestion.\r\n\r\n\r\n--\r\nRegrads,\r\nJapin Li.\r\nChengDu WenWu Information Technology Co.,Ltd.\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Japin Li", "Address": "japinli@hotmail.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, david.g.johnston@gmail.com, pgsql-hackers@lists.postgresql.org"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 21:23:02 +0800"], "From": ["Japin Li <japinli@hotmail.com>"], "X-Tmn": ["[m1HxFAVX49cwJNQVzIqyxN+oPsijjdl7]"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Doc about how to set max_wal_senders when setting minimal wal_level"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657891673; cv=pass; d=google.com; s=arc-20160816; b=g6z4p/xUGGWd6TW60rEUE4XZuwINrgZTcJvRy5v1gL7CMXnTBufLebirGRG14FrqSE l+Ff12qnYIiff7e+L8kY6gGxH+h+Cn12nwlUEOAIL/zDH7haxqbx5Outqt8qbrPOjwwP Hpk7kbNc9UBuNSXq2wHaz2L3vttx46dyT/rEXlXccTtBzzgukjQp7F6BOe3Z4q8U9gtW qn1Q3H/HLGqWDihcn/+EOdKgQ8Mw3byMm7IevkEfTHjPfEMc0crNq87TY5mUMU+1J1Uw zwDm5LVDKu7FSMdVeHFKsdYTDZAM9BSwgZvX1bL/5o7RghTun/ftA9uYp6nUPius19MM arHQ==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=FsA+ZnC5UNvMoFZ1CYiq3lhWz4nLK1xa28K7kNINvE5jfxMLzFDxYqKoNNQIgf+JrgsblUiBTzXhwdf61ERzdfJPy3vAdul0iNLDjFoyZ2pRl2FrlMz0C6yEI5A26LEVA/VxovyeiPIWSeu3AJYpXAhQ6mRP1RPoxzrcK21OqjuW0h9nNmXwYkgRdpsVMrE3OPevLztHp2b7haLfnKTJsZ1DpNIcfKrGE+LGozSuoZ/NXPUOdIwOlSWtScN2WMZjbiR1l0UWlSRawe4HB04zfuY+Ttgf63Qer2KrlBps5Wuh7HxS7GRZ84s0oVJFROQBQqMmzoSJViCzKtZz8ehz7g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp136230jai; Fri, 15 Jul 2022 06:27:53 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e18-20020a056000121200b0021dc50aa055si4172419wrx.605.2022.07.15.06.27.53 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:27:53 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411202@lists.postgresql.org>) id 1oCLMH-0004hW-3U for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:27:53 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <japinli@hotmail.com>) id 1oCLMB-0002de-Lu for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:27:48 +0000", "from mail-me3aus01olkn2186.outbound.protection.outlook.com ([40.92.63.186] helo=AUS01-ME3-obe.outbound.protection.outlook.com) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <japinli@hotmail.com>) id 1oCLM9-0004G1-2A for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:27:46 +0000", "from MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM (2603:10c6:220:c3::12) by SYYP282MB2064.AUSP282.PROD.OUTLOOK.COM (2603:10c6:10:78::15) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.19; Fri, 15 Jul 2022 13:27:37 +0000", "from MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM ([fe80::fcea:970c:bf9f:ff70]) by MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM ([fe80::fcea:970c:bf9f:ff70%9]) with mapi id 15.20.5417.026; Fri, 15 Jul 2022 13:27:37 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<MEYP282MB1669D35AEAB838638C97BFF6B68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "Precedence": ["bulk"], "References": ["<CAKFQuwZ24UcfkoyLLSW3PMGQATomOcw1nuYFRuMev-NoOF+mYw@mail.gmail.com> <m2k0dbsmkh.fsf@hotmail.com> <MEYP282MB16696D67A00860E84B67DE4DB6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <20220304.150535.1261751585521581252.horikyota.ntt@gmail.com> <MEYP282MB1669FD5DB2A59F8104ED3C32B6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <2040586.1657065753@sss.pgh.pa.us>"], "User-Agent": ["mu4e 1.4.14; emacs 27.1"], "X-Received": ["by 2002:a5d:498d:0:b0:21d:97d5:fdf1 with SMTP id r13-20020a5d498d000000b0021d97d5fdf1mr12898383wrq.530.1657891673477; Fri, 15 Jul 2022 06:27:53 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/MEYP282MB1669D35AEAB838638C97BFF6B68B9%40MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "In-Reply-To": ["<2040586.1657065753@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411202@lists.postgresql.org>"], "Content-Type": ["text/plain"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411202@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=hotmail.com; s=selector1; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=HRNWHYRbTXFNAmv8GwRiVR2ahXheM00LAOqnfoAj3Cg=; b=h9yoJHZwxLcFpO1CW8Fqii5TDvhrf/ORkMLLENg5opMwlYK2RcOCrFRsdTWVOzUAgsaPzclwbEFFL0ZHuxBLjS8zOixGOClB2UiOSikGuF+ICWjSMlh1x3Z9H5yuIKi07K8Aeunbw4ifLML+E4RFA67w6Zc7D3QwT6RS4wfCJ0NFloFOf8QHp23zl50RoRmdwJXzRUvEo0UZUEw/f2RsruLIPNuG5tPmQkDfu0REGr4XmxQUSILPHVbaLOQQqLp96SxCCBuX0ODTOtpYlQHGn3q1SEUG4slFqT2f5lvRDWA8D1hGlDPu30anqZdRNpXRjK6ehIbCum3IV7ULjRQt4A=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "X-Originatororg": ["sct-15-20-4755-11-msonline-outlook-746f3.templateTenant"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Clientproxiedby": ["SI2PR06CA0009.apcprd06.prod.outlook.com (2603:1096:4:186::17) To MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM (2603:10c6:220:c3::12)"], "X-Google-Smtp-Source": ["AGRyM1tCFVEWkJ/2dpq50xx83uCkOkxoIysfRs364ATlPaloNWK2V/O9Bl2NX2xaR8MBvxq8lIOU"], "X-Microsoft-Antispam": ["BCL:0;"], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version:message-id :date:in-reply-to:subject:cc:to:from:user-agent:references :dkim-signature; bh=HRNWHYRbTXFNAmv8GwRiVR2ahXheM00LAOqnfoAj3Cg=; b=jlOX+DftPOLK1Begt1swRTlgRWbt33wN/Z6kUIziX0JCCGswWIZdkYt1frhWei2cSf BqwHQJMYAryWBdJHfazhplpZwqpvlVaYMG/49LQAWNea1L1a3iyPg1CmQWXaL51lfC6X WdztoGadrXwoqg1yezrcoszvLVh4ncdSA76WM+pDRict17tV/OGedUZM38lvRTYwy8Mu o0yY8AKDGaPxJTiispbbEhLIaZQTR0w34Ed5E0IGmUD59Jrm1Abwuqmi8xMOkjVOSttW pTjw8IF1Ipg/TqQwqZWGO/W8RAZ46PMxZ4VoyOzDnL4Iie9OD24NxOpC30CSbPP2sHF8 wk6Q==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=HRNWHYRbTXFNAmv8GwRiVR2ahXheM00LAOqnfoAj3Cg=; b=PPuR16pWlOlV+7LeWM3F1Ik2e3vmuzl5pmRkGPKNKqayOfWg+VLvt6qAE0aPw2He2C/gI4BXU+PajC6BkEEAV6yPtqFjv/OlwaZjwxI19J0pkceqJcCe1hTZcusZK0cEvlze03WOvY+N/Z+3WqVuIAVngn4WQkKXyi5SE0zykEEWX2LrRpmEyhI1oQ4h+orHjW44HvsDgGZHt58kZMyWgX5WdBvnN30Q3r8WCxvIqlx6AE3SwY2rqIQNPHi9aRvBXycgdZxIGYy11qu3ApKOWTiLOwlLHObJMuu9+uj1/aM/9DFiyI+E9oyUC4biSoluKmEVH7nMrTTMGfqwciGBVg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@hotmail.com header.s=selector1 header.b=h9yoJHZw; arc=pass (i=1); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411202@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411202@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=hotmail.com"], "X-Ms-Publictraffictype": ["Email"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass header.i=@hotmail.com header.s=selector1 header.b=h9yoJHZw; arc=pass (i=1); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411202@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411202@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=hotmail.com", "i=1; mx.microsoft.com 1; spf=none; dmarc=none; dkim=none; arc=none"], "X-Ms-Traffictypediagnostic": ["SYYP282MB2064:EE_"], "X-Ms-Exchange-Crosstenant-Id": ["84df9e7f-e9f6-40af-b435-aaaaaaaaaaaa"], "X-Microsoft-Original-Message-Id": ["<m21qum7bnt.fsf@hotmail.com>"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["i+hWELkQSHeGL06FQXoQKkJxFCGtNZxyuALdIQWsRWkCxc/kGSv99RgLwherUg4Cn5LqJ+XlhO+F8P8JnjjbcMtN6rSw06kqwQ6il3sQ9V650sg++eUh9BajmLa1XsfmF6Y+wNqIlgi3k16HuHvg0FCdLpxewGDykyrTiWSxaq5g3Kv3KIBtID243xWX8R6HitcT51mt50r8/T0Zren0IR+f83tf1gB03Xro1Ns3u+hlF4QjzI7i1IgVQHYjFGu9QQYwOZHz7F9jmF9I458CO2nTcmFpx5iM7+hX6JHewZkNGOu8MOniZlPTmUHEHZ28GBSdXVlL0lZa9MAuRXa9S3vSc9z6ys3Q+rTyysNr+4RY/pj8rtWiSJirTd1Iv+MxFLPcx83xVL4zyyYWoZVBE5nPj6vm39Vr1U7aPWgl8P1Q5PV7Smt4d0DniTJPcBEUJ5PFPPzp/AheF12DS4XQtygL+fNMhjSLaAmlYLLtXpnmW3gvKOhrs9jcgoYLoa1od4dLJLWDeOnukewMlUeXxIuR7OoLTKriN+xWvtKU/pChUBBSnPnLlVyCuaDGfBbXtRZ3pT/xUBXF6+fUpebzENbhpwrFZxGMbPjSRC8neKPwSzYqdMgmP1TaJHdr+lOZ4JiIoCmXiQIgW3q5kPi43+KGPe+S9CUXpHioQX0xyeX1f8oJsHbt0/oaLETFHOe+NKO75E8h/8FTjxh0lEGhB2AeUcMsv2vikh6YHp7kcL4="], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?us-ascii?Q?zs6mFxuhx1/dXKrxs+XckyZOydI0YJqdWmMz17Y3TtmSSkxe+UWVY4EjgRZH?= =?us-ascii?Q?0aY3o+hO7yUJRf1K2yP34Qbr+rPN9A8/iSR/vFg6rJvOv/hH9hCzhsEL00Og?= =?us-ascii?Q?ZkOZ81z2TQEWaRk3Lh6pbGuxl+WGwG1QdD2qVl7VXFKkGD23PJjCbd5L/Y8S?= =?us-ascii?Q?6FA6a93hPJEx5PHUwizvfv5O2A1MuEl/EzRYk48/CLZkCNgEOsUH6w+GqGU7?= =?us-ascii?Q?kFMRPuxgIpgOvLmGn1Ed5AmRtf6FrWZzd7viCSphiU1HWoPR84GN+SQhmrRi?= =?us-ascii?Q?Sq1vJPppjRb8HzHm8xPPxxhyQI3lqElyxVr3/L8n2hIMMQyMTuctBzgSPYg0?= =?us-ascii?Q?dpubrO5VDHnr/X3G+X4+bDp9vzuQBvWjoBSgovFJZm9LiQu6E9u4TdCbBFgM?= =?us-ascii?Q?dHRl32yS7I20eXaAJ1nD3EsX4DIDcPVCGwc2H2R+aHhmTqfr/nEnVNgovTWt?= =?us-ascii?Q?mO46F1fXaExmtSqXIr9cTwGftJtro373T7hB2LRP/tofkPdMpZtJmwb6lvch?= =?us-ascii?Q?v61/3sV0GHQuG3nKtxrWYorgWR6veon3x0VcNIRvxCmnfDbPueshw24AchU9?= =?us-ascii?Q?qvSTY8MipA3UqzD/1k6OjgjwPmAtr+rs+lrsPrhSwInPAV8z+rOsFqPAbMEY?= =?us-ascii?Q?EN21ZJB6NZ/hnmyQ0yvPzPHca8Aq6e79xw4NeNwzx1bZXBsDBMIvhxpZoT3N?= =?us-ascii?Q?5x5Koj4TacKsuQ70S6JzAte6wl48uEMcJX+DrNiYQXbeMRyuiNbmsZiw0r73?= =?us-ascii?Q?RopVKlzb3MXX10sF9lsXTdh/o/G6fLhBmdbcH5lw2MGtFvSeV/K7FVBxuuDa?= =?us-ascii?Q?3c/vg7/oVS+AjKEEZLt+V3m+AT0VbzsqsKq8HS+M3kkmEEOT6UmwVCCoMxFn?= =?us-ascii?Q?TKB9ji9uYvYBj4avYloM92oR3dzd1Ve1gg6P7d8PcJryceN/Gi8HhUU/XzHM?= =?us-ascii?Q?2Upefm1pGvAe2B3nYTP3JmNXXDAeOuHo6pH75N1nzIrUhz8vOUisMKfDU6iU?= =?us-ascii?Q?fz3vBZH0Jg+lnHSUru66Mg7v/PzGwiJfE1gYITF2Kp1yywA0ffYT4rUy28XS?= =?us-ascii?Q?nckrrVjXWqdhIOnXQXI5IzSt1wgsAuCYzIajkJ+vGkamdKG2PktNAobkUVe0?= =?us-ascii?Q?RD1FxWWo0VOEDVbznZ4Z1BALaaE4MNk8fqY+KOC4ccYe2cByWG6oTqRVoDA9?= =?us-ascii?Q?9tcz56VN84c11WL4q2QmnPRDuGKOc7kp8Gmq0uAN6BKaGaciJsx1Gyncg3Jd?= =?us-ascii?Q?XR7FgomZaAYjKRathkj4Vnnrrwfj5bp0k6Y024763g=3D=3D?="], "X-Ms-Exchange-Crosstenant-Authsource": ["MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM"], "X-Ms-Office365-Filtering-Correlation-Id": ["1757bd2e-b0ec-46da-5e35-08da6665c841"], "X-Ms-Exchange-Messagesentrepresentingtype": ["1"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["1757bd2e-b0ec-46da-5e35-08da6665c841"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 13:27:37.0677 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["SYYP282MB2064"], "X-Ms-Exchange-Crosstenant-Rms-Persistedconsumerorg": ["00000000-0000-0000-0000-000000000000"]}	["<2040586.1657065753@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:43:14+00	osumi.takamichi@fujitsu.com	RE: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<TYCPR01MB8373EFE369CD515805C16292ED8B9@TYCPR01MB8373.jpnprd01.prod.outlook.com>	[{"Name": "'Masahiko Sawada'", "Address": "sawada.mshk@gmail.com"}, {"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}]	[{"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	167	20069	[]		On Thursday, July 14, 2022 10:31 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> I've attached an updated patch that incorporated comments from Amit and Shi.\r\nHi,\r\n\r\n\r\nMinor comments for v4.\r\n\r\n(1) typo in the commit message\r\n\r\n"When decoding a COMMIT record, we check both the list and the ReorderBuffer to see if\r\nif the transaction has modified catalogs."\r\n\r\nThere are two 'if's in succession in the last sentence of the second paragraph.\r\n\r\n(2) The header comment for the spec test\r\n\r\n+# Test that decoding only the commit record of the transaction that have\r\n+# catalog-changed.\r\n\r\nRewording of this part looks required, because "test that ... " requires a complete sentence\r\nafter that, right ?\r\n\r\n\r\n(3) SnapBuildRestore\r\n\r\nsnapshot_not_interesting:\r\n    if (ondisk.builder.committed.xip != NULL)\r\n        pfree(ondisk.builder.committed.xip);\r\n    return false;\r\n}\r\n\r\nDo we need to add pfree for ondisk.builder.catchange.xip after the 'snapshot_not_interesting' label ?\r\n\r\n\r\n(4) SnapBuildPurgeOlderTxn\r\n\r\n+               elog(DEBUG3, "purged catalog modifying transactions from %d to %d",\r\n+                        (uint32) builder->catchange.xcnt, surviving_xids);\r\n\r\nTo make this part more aligned with existing codes,\r\nprobably we can have a look at another elog for debug in the same function.\r\n\r\nWe should use %u for casted xcnt & surviving_xids,\r\nwhile adding a format for xmin if necessary ?\r\n\r\n\r\nBest Regards,\r\n\tTakamichi Osumi\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "osumi.takamichi@fujitsu.com", "Address": "osumi.takamichi@fujitsu.com"}]	{"Cc": ["Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["'Masahiko Sawada' <sawada.mshk@gmail.com>, Amit Kapila <amit.kapila16@gmail.com>"], "Date": ["Fri, 15 Jul 2022 13:43:14 +0000"], "From": ["\\"osumi.takamichi@fujitsu.com\\" <osumi.takamichi@fujitsu.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["RE: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657892610; cv=pass; d=google.com; s=arc-20160816; b=Op1gNcAYUYx9DBN4oYGunnxcKcKZ5zgMd//1cEw8iyEgBmVlZ842RAn7d1XZxfhJXh q/NRvUwKhaeDRWWp9pqtvuZ8A+vKMRC3FpG2isPh5bj2337kYRwSS+20JrR/EofPsYbi sR5FE2dXH+BR3C8GCwC/6m3QVnxh3XU/1Hp0359bjZGXeYujgorElsdhO8H9TOny9YPG 2fhxK7j5xq8fsm5NnCFiyNh5OqNI7NxIfsjqWGtxyCMWvsWzt4rN0TBdFO4DfVCjvPvd 01YGTE07Vv39akYnoznIoZ3saaQGnvm7D2tgv+0sieTOOJgUA+IOn4vMEO2Z1jrXxAw5 g8Xw==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=dUcl1hcJlMjil+LZY9u9p9IzMXQuUi7wSC68vkyyfKMH8NNwPNeJAA1rOTAKfMMZzYmaF1/ZI4BYhUCsRcZxS7AYcdrWpZndwEI1I7/qGIL/V9vn6FnNkyGbTZMbpAscS6g9x5CdyFvVST0dkChuiTw36jce4THTIFkVythZIpVOuUSGgJBaRVlifVIFhYm+3OB2l58Th2bak4SM7YFGBA5fmhxSmoiD/QT9eycT9GvqGwtNpPqhUSGRYVwnE5E3BUuNo+dIrTJAzX3Ito0AJ284D1KHR19LgIO2ZciW3VQC8f0Wb2Q2JbI6aGTOJbumK7OPtO1hSn+oQOCFryDKDw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp139679jai; Fri, 15 Jul 2022 06:43:30 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r186-20020a1c44c3000000b003a2e85f6a48si5879427wma.55.2022.07.15.06.43.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:43:30 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411207@lists.postgresql.org>) id 1oCLbO-0005o8-4f for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:43:30 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <osumi.takamichi@fujitsu.com>) id 1oCLbI-000405-Ps for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:43:25 +0000", "from esa9.fujitsucc.c3s2.iphmx.com ([68.232.159.90]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <osumi.takamichi@fujitsu.com>) id 1oCLbF-0004No-71 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:43:23 +0000", "from mail-tycjpn01lp2172.outbound.protection.outlook.com (HELO JPN01-TYC-obe.outbound.protection.outlook.com) ([104.47.23.172]) by ob1.fujitsucc.c3s2.iphmx.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 15 Jul 2022 22:43:17 +0900", "from TYCPR01MB8373.jpnprd01.prod.outlook.com (2603:1096:400:15f::9) by OSAPR01MB4835.jpnprd01.prod.outlook.com (2603:1096:604:68::12) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.12; Fri, 15 Jul 2022 13:43:14 +0000", "from TYCPR01MB8373.jpnprd01.prod.outlook.com ([fe80::f062:e277:58ed:f372]) by TYCPR01MB8373.jpnprd01.prod.outlook.com ([fe80::f062:e277:58ed:f372%7]) with mapi id 15.20.5438.014; Fri, 15 Jul 2022 13:43:14 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<TYCPR01MB8373EFE369CD515805C16292ED8B9@TYCPR01MB8373.jpnprd01.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <CAD21AoA7WM=ptACtu0cg5XdQ86c5RJDg9efsdPRCxQnUqZ+omg@mail.gmail.com> <CAD21AoDFC5btYbcGOLMWimotg+N45pXJqyEOhbfsOHdz8XUKpg@mail.gmail.com> <CAA4eK1KZHnHhZdL1-Fa-6+sw4JHEPjLjZ=+wTwRHnkooXoxp2A@mail.gmail.com> <CAD21AoDJiAiyp3AHbaPJ1w=twWs2sThUiNDxvpJ+k98voV2PSg@mail.gmail.com> <CAA4eK1KxnYuhU5AyusDAP1SKtVmwAS1wYJ+VNL155x=swbx+gA@mail.gmail.com> <CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com>"], "X-Received": ["by 2002:a05:6000:168e:b0:21d:b9bf:5e39 with SMTP id y14-20020a056000168e00b0021db9bf5e39mr13548370wrd.71.1657892610487; Fri, 15 Jul 2022 06:43:30 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/TYCPR01MB8373EFE369CD515805C16292ED8B9%40TYCPR01MB8373.jpnprd01.prod.outlook.com>"], "In-Reply-To": ["<CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com>"], "Msip_labels": ["=?utf-8?B?TVNJUF9MYWJlbF9hNzI5NWNjMS1kMjc5LTQyYWMtYWI0ZC0zYjBmNGZlY2Uw?= =?utf-8?B?NTBfRW5hYmxlZD10cnVlOyBNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJh?= =?utf-8?B?Yy1hYjRkLTNiMGY0ZmVjZTA1MF9TZXREYXRlPTIwMjItMDctMTVUMTM6NDA6?= =?utf-8?B?NDNaOyBNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRkLTNiMGY0?= =?utf-8?B?ZmVjZTA1MF9NZXRob2Q9U3RhbmRhcmQ7IE1TSVBfTGFiZWxfYTcyOTVjYzEt?= =?utf-8?B?ZDI3OS00MmFjLWFiNGQtM2IwZjRmZWNlMDUwX05hbWU9RlVKSVRTVS1SRVNU?= =?utf-8?B?UklDVEVE4oCLOyBNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1hYjRk?= =?utf-8?B?LTNiMGY0ZmVjZTA1MF9TaXRlSWQ9YTE5ZjEyMWQtODFlMS00ODU4LWE5ZDgt?= =?utf-8?B?NzM2ZTI2N2ZkNGM3OyBNU0lQX0xhYmVsX2E3Mjk1Y2MxLWQyNzktNDJhYy1h?= =?utf-8?B?YjRkLTNiMGY0ZmVjZTA1MF9BY3Rpb25JZD1mZDA3YzVjOS1iZDc2LTRjNWEt?= =?utf-8?B?YjNhOS1kMDljMGQyZTk0MGU7IE1TSVBfTGFiZWxfYTcyOTVjYzEtZDI3OS00?= =?utf-8?B?MmFjLWFiNGQtM2IwZjRmZWNlMDUwX0NvbnRlbnRCaXRzPTA=?="], "Return-Path": ["<pgsql-hackers-owner+M79098-411207@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"utf-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411207@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHXGbjuwj9mOYhXQ0usEsUaX8Hh96qEyXkAgNWph4CAWAfvAIAVtt8AgAHNMoCABJ+9gIFdIowAgALHvoCAABKGgIABXKUAgAAvlICAAW79gIAIBgQAgDd24ICAAXWrAIABTBUAgAAje4CAASxWAIAAQB8AgAE3V4CAAFdqgIAADXYAgAAc/ACAACeTgIAFmMAAgAALBICAAE39gIAABSKAgAAVaACAABNzgIACqU+AgAJeQuA="], "Thread-Topic": ["[BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "X-Ironport-Av": ["E=McAfee;i=\\"6400,9594,10408\\"; a=\\"60639320\\"", "E=Sophos;i=\\"5.92,274,1650898800\\"; d=\\"scan'208\\";a=\\"60639320\\""], "Dkim-Signature": ["v=1; a=rsa-sha256; c=simple/simple; d=fujitsu.com; i=@fujitsu.com; q=dns/txt; s=fj1; t=1657892601; x=1689428601; h=from:to:cc:subject:date:message-id:references: in-reply-to:content-transfer-encoding:mime-version; bh=x+R8f3ocL1lnNb0DjCZI3fXFJVwNvbkJyRN9RNi15G0=; b=qQxD1ALegdx+nIRf3rP8vV8aAkrD5TJZ97ACm84PfUxz1ml3NzkulOw+ 5c60xh3kSS+h1jvR4rHuRv++yDdGT+6Okej0ovGgfp4R1EQxSXRIIBPgr /239LeQbfH+dtBfY3bok8C3URD+brHH2l1BY7jVM911yLAFeEu3G7goSb 0JEnWOuZHYDSzFfGXVPValQ/aL1644WC6R9ajXEmTGvDPlQwTVH/IU4t9 PSB0mZtq4jomkEEXyXWy0r5pKLH3+E5CjKAe2qqjOpGeBZGzdqeO5M+qP A0PK0KSN0qMagKUqD5a92EfLSZlIv7OlkrUlYr7IL0MohzyEILZfzYavq w==;", "v=1; a=rsa-sha256; c=relaxed/relaxed; d=fujitsu.onmicrosoft.com; s=selector2-fujitsu-onmicrosoft-com; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=x+R8f3ocL1lnNb0DjCZI3fXFJVwNvbkJyRN9RNi15G0=; b=KYdswX/v1bCCc5alzCp48rctGJd8b3FoOWzUd/UjL3XTxekxhoEJ8fOL9VkzBZ9OGhEDWLR53YJKVH6Dn7sg1khPiZANA2v0cYs8FkAboxOnhrk78sDmRAXLtAGM4uHz3AsElFwpCljkOD5JKLSA5tB0GEcWxgsfmVxCQ684EGo="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["ja-JP, en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["fujitsu.com"], "Content-Language": ["ja-JP"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1seUjEDOwmNnT0EKLFR/hXSYRHi37vE4CnqKj2IWIoTmbUO0k3b2VpgpwdIEDtPgr31KKzP"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version :content-transfer-encoding:msip_labels:content-language :accept-language:in-reply-to:references:message-id:date:thread-index :thread-topic:subject:cc:to:from:dkim-signature:dkim-signature; bh=x+R8f3ocL1lnNb0DjCZI3fXFJVwNvbkJyRN9RNi15G0=; b=o5cM/N1bQ/DLB9YFQqDWojNUriaTEuT31kawiRd5jB5Q1cdjIquRgjD4JplNruqBIG Tk8/k1fkZJb4AZ5N26NK/p8fU3OEUPRMmHdnPykt5jC7F80+7JvI/Y9KwxHOT5e/9TH4 Hhvg6BUgNo4Z2hxmj5TymLmfKI/QbXK39ekfWbF+KJWzcZvIo0bgIBTaq5HzsfNE7jF3 Y7YyQfxMm93ldTN/rvO70n7J2zlfznNxf5PD+p0dp+21fzll3jNdB9LnzNIMp/kgyDPv 8+i0b1aSu1x3ayqLRa8tzl9V3YEZ0FlR4Q3PNu5deQZb4ij+tYQFsIoGdZUbSvFS6Nik u+3A==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=x+R8f3ocL1lnNb0DjCZI3fXFJVwNvbkJyRN9RNi15G0=; b=Z1s0VYktzavKqDJvKHoGV+IoI2EtDp3HeeFcxwd4pV6jEtBPVCLi/jbXjxYKnMkhZYpIZQ6f/cwzm6p8ny+VuhWXl7fJR9BQnapEvbMNf1zcRD+UVH1S5VX5Z/tr20eNpwdM25Qv//R+st/3iF3qAc8HA1ZBRrZ1sCNuHmYBhhr05ekPsDRpVM8Qvq7mSIU8f8Eh7vWEu9u78uEx8spcJ5JyLMo5GuizMWKWuga1C8zQHIyQOfuQ4q6XaaS5VhvingolWuELKFPLClgeXA08EIsuq9euqLbcS04C9StMnLsKm+QKKCmkVveNRC4NAQtuGAAzWHDU/a1xramTQGll0Q=="], "Authentication-Results": ["mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=qQxD1ALe; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"KYdswX/v\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411207@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411207@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=fujitsu.com;"], "X-Ms-Publictraffictype": ["Email"], "Content-Transfer-Encoding": ["base64"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass (test mode) header.i=@fujitsu.com header.s=fj1 header.b=qQxD1ALe; dkim=pass header.i=@fujitsu.onmicrosoft.com header.s=selector2-fujitsu-onmicrosoft-com header.b=\\"KYdswX/v\\"; arc=pass (i=1 spf=pass spfdomain=fujitsu.com dkim=pass dkdomain=fujitsu.com dmarc=pass fromdomain=fujitsu.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411207@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411207@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=fujitsu.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=fujitsu.com; dmarc=pass action=none header.from=fujitsu.com; dkim=pass header.d=fujitsu.com; arc=none"], "X-Ms-Traffictypediagnostic": ["OSAPR01MB4835:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:TYCPR01MB8373.jpnprd01.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(376002)(39860400002)(396003)(136003)(346002)(366004)(86362001)(82960400001)(2906002)(186003)(38070700005)(478600001)(52536014)(8936002)(41300700001)(71200400001)(110136005)(5660300002)(54906003)(38100700002)(316002)(55016003)(33656002)(66556008)(66446008)(64756008)(4326008)(8676002)(66476007)(66946007)(76116006)(26005)(83380400001)(122000001)(85182001)(53546011)(7696005)(9686003)(6506007);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["a19f121d-81e1-4858-a9d8-736e267fd4c7"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["QZAy8VgvKgUtk64L6FM4N/CFc9SHoVDt4bz/982YiaLIO+1BDbnU7qp5V5jU4Try3nTilJ+gwz16fx4wAuXiwEOX1B61TtNi/AIrIFMs/DQM+n3EHsdswsW0GLeu8zbKW4VNksLKKDUU5BnEJUXkHby/sLfO0WtJT0mpCewOQUStaG7e2PEL/+qWpcVP2pYJ2UN05E+PII9ff9xc4oUTyP9beqM+AJuHq1uby6ZVfMuEQvf+2LBnBXyVfph4dXC3mYh5SechF/cQfdPX7QEHYYXuU8AqYunBUGRm55j/bDijptyji7WF2yWbqrN5H0piAxwKJsx6uI2ByTMj07MV+vz7Nn8Ki1D9gMd0aBl4HThPk5/dBuJciEtlFhhUD/5YOXeSpzuGVY685QpOYe/VoXe7YKWgoolmpNmEX8X20zIvZ1kwn0vqApRU7je3RTfVP482H1YLvMCJBvvE9VkhQ6jzcmqibIGQf4HE9SguyD9ezFHx4diaB/fmYWmrj8vis/UV0aSHcdr1/RLI8e2Zf6JSEUpbfKILmD0JXtMKU0Ed9LBiOUv7rIT3fiLoSIk0stTJ6YdHjrEgHcAkXaHk7u57zFTVx2BzhCxrUVFmz3+Kg21JOhBMaHP4loZ5IDg/qgyNTRM1YUkJt23m4EYwBQR2TgKdETSPFqfe79FjLEiN7/Kz1xbmgkfLHl0KppLGbgK7CyWmVN/h+QvqOSCiw1RapEWy7lKQxdmJag32gpzysiEHV/m3Eu7yAA8JqbQT9jCGXOzV659H+tEJouNvzrP22JbYNUM10w/O9qSpmRlRT2gq5NY58pUWldGejY0X"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?utf-8?B?SzMzTC9JcWQxWHdOWUZlTUZIRDNrbjdLSTNPVURkT0hXV29hTUlpbE1rNkE4?= =?utf-8?B?MTNSYjFWalFjQkdZL2Q2aUxvMkN5WVlmOTkrSnRFSWpzcE8wczFwZFhMWHVS?= =?utf-8?B?QUpJUFJUazNJcU5EeVhteER6c2tUbzl5dkE4d2VFWXJCeVkrNDN5UWJVUUlk?= =?utf-8?B?MkpWd2xvWEJhVVZTSnVobEtzN2xkUXRNN2FHNnJJVFhOYzVwQUtxNngxQ0E1?= =?utf-8?B?NjFMUWJTbWJXckNUMlRsZW5rOWpxMUpKUmhPQ3d3aWZxTDN6Q05HdmpqSlQz?= =?utf-8?B?YVA5eitjay8xZ3Eya2VZWDJITXQ0akNYdmZjR3pMaTUxTExxcmhUZFhKMFJJ?= =?utf-8?B?cVhEdFFOVTdWWTFCZy9FSkZQcjAzRzZNVGVtbHNhV3BzQ2RPVDFBa3BXNmFu?= =?utf-8?B?U3FUOXhRZ09WZVlaWUJFOE4xK1AzQU93RTcwRHI5UHljQURxSk5COURtMFRY?= =?utf-8?B?eUtHMlNOOXIxNHpjeUFvSUIzNXpDZ0RyOXRvSExORndQMHZjbmoyZSs3VnpW?= =?utf-8?B?NG81dm5UQ2RYdW9VWVhnaUhTYmJyY3NSQlo5V0hjMGpPQlFrZWNUaW95cGxH?= =?utf-8?B?eG1KS2JEUFVMRUpVREJGcEkxODZ6a1pnSk04eWsrckJmYklzdzErZHJIdmNF?= =?utf-8?B?TXcwWFZIM1U0SzlSamhVdEwrMmJKMHVvWElIZXloODAwT2NKK3c1MTZZME9m?= =?utf-8?B?VGZXamZOWmQrTVpyOW1hM3FjQldweGpHY2xnZVNmZVllZTdvd3NPMVNTQ2Vy?= =?utf-8?B?aEFUY1RUeFduSHVYc0pKbXJNVjdTYjRVOG9USGN0ODQzdWNyb2RrUUMyaFZM?= =?utf-8?B?L3Z4WDFydjkxUnhPdUdpTVUrMWIreXVId0U4cDAxMm1sTUhTaEM4eHJEUTRN?= =?utf-8?B?c0VqSFZkM0NvekNseVFCKytaYXlEdE1qRmordUZQTmlPNDMxMTM1R20wVnZ1?= =?utf-8?B?WnFnQkFnQlJIWjRPZGpDRUd4bUo2V1lsTVl2Z25PN3ZySzJydG00U3FjTGhM?= =?utf-8?B?MEtNU0R6TVBuaFlQWkNTZUxzUm5BVC9XQ2JwZmV1Mk1oMERxNDhmeGNId1Iv?= =?utf-8?B?MVFRbW5BWTEvemErbHh0SUFSdGpFL1JjWUcwbm9ST0REOUhzVWVnbXl1Zko0?= =?utf-8?B?Z0sxYWF0VmRrZHQ4YmI0QkZmdksraGFYRXZJeFJUMUxKVXg1UjFaVDZTMVUz?= =?utf-8?B?UmU3dnlkRy94VXRXcUVNdnZDVkhWYlc3LzV5MXNvaURyZkdNS2xuWnFaUHNR?= =?utf-8?B?K1VaUkF0ZlVDL1hGc3BVbDFDSTMweW9zNldFdkMrc2ZiVDhXdWVhZ0IwMmRp?= =?utf-8?B?UTJHVjNuTEJ4U284aDI1Unk0Yk1pYXkwU3lVdXFBbW5LZmZsN0dIZjZ1RTNF?= =?utf-8?B?K2ZOdlFOMitvbHQybmI4dEZuRm1ubUkvQXhyUzhpM3JRVGFVVWY1VGlTMndl?= =?utf-8?B?RXhVTGMrS0FZclUrRTlwSXB6SnJ2d0E3S3NxYzYzN1BQM1MrNEV4QUpxbUNS?= =?utf-8?B?OTlRV1RaNWtrSytiU0lXSlJsWFJUSVVQYk1JMng5TFBJS01FaEJhczkvYUtG?= =?utf-8?B?c1ArQ0ZtNTJqTjZ6MXNPcGZIa3JHeDBGQjV1YytxTWRPSG1UY0d3S0pYalFC?= =?utf-8?B?ay9UZ0RiVi9JQmlRNEpjZUdVNFlHcHNXZVFGS2krdjhUNkJvNGdqaDRUZVc1?= =?utf-8?B?d2ZIU0xVbjZaYUNCWnI1TGIvMW9xMktqYUErTGZJaEIvbHFWUHQ2K0xHa1VX?= =?utf-8?B?VEdxSEY5SmpOdTBEOFpCZ1JvU09obHNBL2VFSktJZjBmOFVPOTNHbmI5bmo2?= =?utf-8?B?ZWkxUHNCdVZMSDM2OVMrWnc5OXI1d3hycDZtb2NJYzA3KytieGNvMmphZW5z?= =?utf-8?B?UG9EMEpaL0JqQ2ZVWnJJM2JUaEIxa21qV2Q3VE1UKzZzcFNhcmIzOWJOZWpw?= =?utf-8?B?TUZNYWk2MkZ4QzBUdjFoRjB0T0dvelp4VnNGcWJLOFc0cCtoVnE0ejZqWlFI?= =?utf-8?B?aUR0SldVNklCNkUzZXNvSzlMdlNXWVNFUnJiNTdvQm5jQm11TUZkVzhMemF2?= =?utf-8?B?emhJdUptNmtnWXdyM1B1ZVIwUW9adjVUN1B0SWdKWnNuSFdJbmQ1MjIzYVhh?= =?utf-8?B?K0dhak0rVENZOXc5TjgrWklBYXczQkRuUEFDZk1hV0pHZVBNRHhJd1lyTjFG?= =?utf-8?B?Unc9PQ==?="], "X-Ms-Exchange-Crosstenant-Authsource": ["TYCPR01MB8373.jpnprd01.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["3d0ebd67-9381-4904-a27a-08da6667f741"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["wQMzBZmqJUqVJ0DK8xpkwc2ZcxK8pSuNcDO0vTzuiuZ7kfgMSRxaKhHw2LoeLoVO3GRQdLyJHYTSsKZjXD/9HXPXmg0wYmA6iPM0TS803LY="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["3d0ebd67-9381-4904-a27a-08da6667f741"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 13:43:14.1816 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["OSAPR01MB4835"]}	["<CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:03:24+00	tgl@sss.pgh.pa.us	Re: Allowing REINDEX to have an optional name	<3370903.1657893804@sss.pgh.pa.us>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}, {"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	169	6239	[]		Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> Ah, one theory is that the libpq_pipeline program is getting linked to\r\n> an installed version of libpq that doesn't contain the fixes.  Maybe you\r\n> can do `ldd /path/to/libpq_pipeline` and see which copy of libpq.so it\r\n> is picking up?\r\n\r\nThat's pronounced "otool -L" on macOS.  But in any case, it's going\r\nto point at the installation directory.  One of the moving parts here\r\nis that "make check" will try to override the rpath that otool tells\r\nyou about to make test programs use the libpq.dylib from the build tree.\r\nI say "try" because if you've got SIP enabled (see what "csrutil status"\r\ntells you), it will fail to do so and the installed libpq will be used.\r\nMaybe that's old.\r\n\r\nStandard recommendation on macOS with SIP on is to always do "make\r\ninstall" before "make check".\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Simon Riggs <simon.riggs@enterprisedb.com>, Michael Paquier <michael@paquier.xyz>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 10:03:24 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657893830; cv=none; d=google.com; s=arc-20160816; b=DMQMVIAh6fOKE1Fke+Nw/oZN6s3BrY2hqXFCbd4jxKS7lJWhruilZ9BgIU6PIkGGoQ wpJutnnVQIdS7AqKESHoqsNrYJpled22M56gYTvJVv1OrqYa7k88CVw1tenu3DSVgx42 dELp9MMHwi2wuyVQVqLJ5WCULndTzIYASxiOpJkF5PElJkmjjiDlhlxtuNrRGixvwvMs Qkg8us7Wchi8HwY83N68jDZfpmlaPz7Hg/ixXAqZEgQtUyz3RwQPrC174uivTxJ5pdOe jS7oGjjZ+6A3qrf2mN5/EFQkPtHiBX99/k2Ji3nJ3NZQI9KzCsLhZ00zWKZJa9yEFgRY W6aw=="], "Comments": ["In-reply-to Alvaro Herrera <alvherre@alvh.no-ip.org> message dated \\"Fri, 15 Jul 2022 15:03:34 +0200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp144465jai; Fri, 15 Jul 2022 07:03:50 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id t6-20020a5d42c6000000b0021d7de7bccdsi4117863wrr.718.2022.07.15.07.03.50 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 07:03:50 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411213@lists.postgresql.org>) id 1oCLv4-0006mh-BH for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 14:03:50 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCLuz-0004jA-NA for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:03:45 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCLus-0004Xw-Hq for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 14:03:41 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26FE3OV03370904; Fri, 15 Jul 2022 10:03:24 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3370902.1657893804.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3370903.1657893804@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql>"], "X-Received": ["by 2002:a05:600c:3399:b0:3a3:f1e:ebd8 with SMTP id o25-20020a05600c339900b003a30f1eebd8mr2233352wmp.6.1657893830714; Fri, 15 Jul 2022 07:03:50 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3370903.1657893804%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411213@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411213@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vznBWMCSUSqzO1uacu8ufnHwgJReFo4UXKRAv94rFgK6kRRDUfFbS0FFR76tVdqr3niJOa"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=fn7QyIG/7NDaP9nHoTkpcQCKXXt1XhszFqfJkUxMNWo=; b=GLq5nEbBGBfcnCJKbmeJCla+Hfek0k4Uw+djsehCaSwvd2tQqRc35Vq1Pt9V4vDcfm gGiirpgO8UPaf2edbFdbyDEiZPIa/O6GxPrdPzYczgQq4bG0cViHvCodd5goicb9eh+M rEYECxciFhju0qGFT5MSIQE0wMwKhrTLtHqmCGzG5sXKqWiM03MiYWKF6prwZ76Yns98 a84hrlmGrkBekyRuslPWsz6s4w+GOKHLreF9K3fuH9uwCN55t6G+i/0bUTax3FJh1pja hfjmI+mxdsIdrAOXhAx/amv3MePfxQgXSRoqEnvWnHmxFPjr0eexMHXc3SvkUdGNiCpd QWRA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411213@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411213@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411213@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411213@lists.postgresql.org"]}	["<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 13:51:29+00	andrew@dunslane.net	Re: SQL/JSON documentation JSON_TABLE	<99bbae89-8927-c77c-094f-90185f59ab63@dunslane.net>	[{"Name": "Erik Rijkers", "Address": "er@xs4all.nl"}]	[{"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	168	8477	[]		\r\nOn 2022-07-15 Fr 02:20, Erik Rijkers wrote:\r\n> On 7/14/22 17:45, Andrew Dunstan wrote:\r\n>>\r\n>>\r\n>> Here's a patch that deals with most of this. There's one change you\r\n>> wanted that I don't think is correct, which I omitted.\r\n>>\r\n>> [json-docs-fix.patch]\r\n>\r\n> Thanks, much better. I also agree that the change I proposed (and you\r\n> omitted) wasn't great (although it leaves the paragraph somewhat\r\n> orphaned - but maybe it isn't too bad.).\r\n>\r\n> I've now compared our present document not only with the original doc\r\n> as produced by Nikita Glukhov et al in 2018,¬† but also with the ISO\r\n> draft from 2017 (ISO/IEC TR 19075-6 (JSON) for JavaScript Object).\r\n>\r\n> I think we can learn a few things from that ISO draft's JSON_TABLE\r\n> text. Let me copy-paste its first explicatory paragraph on JSON_TABLE:\r\n>\r\n> -------------- [ ISO SQL/JSON draft 2017 ] ---------\r\n> Like the other JSON querying operators, JSON_TABLE begins with <JSON\r\n> API common syntax> to specify the context item, path expression and\r\n> PASSING clause. The path expression in this case is more accurately\r\n> called the row pattern path expression. This path expression is\r\n> intended to produce an SQL/JSON sequence, with one SQL/JSON item for\r\n> each row of the output table.\r\n>\r\n> The COLUMNS clause can define two kinds of columns: ordinality columns\r\n> and regular columns.\r\n>\r\n> An ordinality column provides a sequential numbering of rows. Row\r\n> numbering is 1-based.\r\n>\r\n> A regular column supports columns of scalar type. The column is\r\n> produced using the semantics of JSON_VALUE. The column has an optional\r\n> path expression, called the column pattern, which can be defaulted\r\n> from the column name. The column pattern is used to search for the\r\n> column within the current SQL/JSON item produced by the row pattern.\r\n> The column also has optional ON EMPTY and ON ERROR clauses, with the\r\n> same choices and semantics as JSON_VALUE.\r\n> --------------\r\n>\r\n>\r\n> So, where the ISO draft introduces the term 'row pattern' it /also/\r\n> introduces the term 'column pattern' close by, in the next paragraph.\r\n>\r\n> I think our docs too should have both terms.¬† The presence of both\r\n> 'row pattern' and 'column pattern' immediately makes their meanings\r\n> obvious. ¬†At the moment our docs only use the term 'row pattern', for\r\n> all the JSON_TABLE json path expressions (also those in the COLUMN\r\n> clause, it seems).\r\n>\r\n>\r\n> At the moment, we say, in the JSON_TABLE doc:\r\n> ----\r\n> To split the row pattern into columns, json_table provides the COLUMNS\r\n> clause that defines the schema of the created view.\r\n> ----\r\n>\r\n> I think that to use 'row pattern' here is just wrong, or at least\r\n> confusing.¬† The 'row pattern' is /not/ the data as produced from the\r\n> json expression; the 'row pattern' /is/ the json path expression.¬†\r\n> (ISO draft: 'The path expression in this case is more accurately\r\n> called the row pattern path expression.' )\r\n>\r\n> If you agree with my reasoning I can try to rewrite these bits in our\r\n> docs accordingly.\r\n>\r\n>\r\n>\r\n\r\nYes, please do.\r\n\r\n\r\ncheers\r\n\r\n\r\nandrew\r\n\r\n--\r\nAndrew Dunstan\r\nEDB: https://www.enterprisedb.com\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andrew Dunstan", "Address": "andrew@dunslane.net"}]	{"Cc": ["PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Erik Rijkers <er@xs4all.nl>"], "Date": ["Fri, 15 Jul 2022 09:51:29 -0400"], "From": ["Andrew Dunstan <andrew@dunslane.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: SQL/JSON documentation JSON_TABLE"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657893104; cv=none; d=google.com; s=arc-20160816; b=dQdf1/STkyX07ocl0/INxyWXTCQ0Iv95+gK+5NraZY263fm1dLQicZ1gr5LSmcdK++ P+2bJW/snZRYL+pUXc2QAJ0W+Ntu4N5h3GqjcwZQBvy/z6ZwnMSUdC4/RQnp8cWUBmrG Er9ncbEmgKnHiYzUOTrsk6m5W9yUkbCFURIukaVqUmA+415N3fHlusPykBkb7nM4VmSe DSuxl417V6w93RcXaRcw6IKBzPMLn4Aqxpxk/zyNQO9vJJm13bmLqVt1BANLs0km/g4U CKjm1wXAwFwmGwRFQFR2ZcAJkGNjhu0FGXexyesevyRYZ+WAFgTufUsJg/e/gXaQc0dK JMVA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp141446jai; Fri, 15 Jul 2022 06:51:44 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n8-20020a5d5888000000b0021dcad16210si4393273wrf.324.2022.07.15.06.51.44 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 06:51:44 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411210@lists.postgresql.org>) id 1oCLjM-000138-4U for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 13:51:44 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oCLjH-0007g4-Ho for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:51:39 +0000", "from relay8-d.mail.gandi.net ([2001:4b98:dc4:8::228]) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andrew@dunslane.net>) id 1oCLjE-0004SG-K3 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 13:51:38 +0000", "(Authenticated sender: adsend@dunslane.net) by mail.gandi.net (Postfix) with ESMTPSA id 4BA0C1BF205; Fri, 15 Jul 2022 13:51:30 +0000 (UTC)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<99bbae89-8927-c77c-094f-90185f59ab63@dunslane.net>"], "Precedence": ["bulk"], "References": ["<7bb38ff6-c4ef-5c5d-4645-185b4ad3d094@xs4all.nl> <b2c5da4d-5ca0-f111-3460-f98851975434@dunslane.net> <10c997db-9270-bdd5-04d5-0ffc1eefcdb7@dunslane.net> <6b4e3550-8051-77e0-695d-f5144d699e3a@xs4all.nl>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.5.0"], "X-Received": ["by 2002:a05:600c:a144:b0:3a2:ec6c:4bcc with SMTP id ib4-20020a05600ca14400b003a2ec6c4bccmr14424806wmb.197.1657893104520; Fri, 15 Jul 2022 06:51:44 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/99bbae89-8927-c77c-094f-90185f59ab63%40dunslane.net>"], "In-Reply-To": ["<6b4e3550-8051-77e0-695d-f5144d699e3a@xs4all.nl>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411210@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411210@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tXrSeua9Ngvjx06PH/PyXD/9URgvUN9oh/o/rlFrqrM0YjlMWUvhIMBWp1iXLK5+nqf0uk"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id; bh=s9SubqzzuK+xi75yCuiFYwSgaRtapUQaNtfmgtFHa1k=; b=SlCYQPcoPs/uhyxrMe+KaJHpNC1WfQcUdeSZCPudesrrTiNYHNtNuUaFzzJcYpvAry yWQNkPee5kNM+eEke2mQaJkHPMj92CDINLuqoAKoCZyTW/uAgTAiiw3zDXUU10ngazo8 dJ5NgvWNk3sQZRzsPw3AnPRCHOBeDdCf104kHIajtlJ3WkLETReOEre9RT1or7pmDFNP S3TbMyH1qmhLrmCTH3qJFAAjiA5sf4HzAN/zsT0FsDWhRCbVSwizEzUaC90ZSbYWxMq3 FPU9ZxrctQ4FUzGpE2D3Ipgqs0icKutdt7JvBSG5i0ctZnQV6hJOczAaN96uy8Jkh14j WE6g=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411210@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411210@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411210@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411210@lists.postgresql.org"]}	["<6b4e3550-8051-77e0-695d-f5144d699e3a@xs4all.nl>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:06:54+00	zlyu@vmware.com	Adjust ndistinct for eqjoinsel	<CO6PR05MB750605D9F88AAFFB95658BABB58B9@CO6PR05MB7506.namprd05.prod.outlook.com>	[{"Name": "pgsql-hackers@lists.postgresql.org", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	\N	170	18996	[{"part_id": "2", "file_name": "0001-Adjust-ndistinct-with-nrows-in-the-rel-when-estimati.patch", "disposition": "attachment", "content_type": "application/octet-stream"}]	<html>\r\n<head>\r\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\r\n<style type="text/css" style="display:none;"> P {margin-top:0;margin-bottom:0;} </style>\r\n</head>\r\n<body dir="ltr">\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\nHi,</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; I run TPC-DS benchmark for Postgres and find the join size estimation has several problems.</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; For example, Ndistinct is key to join selectivity's estimation, this value does not take restrictions</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; of the rel, I hit some cases in the function eqjoinsel, nd is much larger than vardata.rel-&gt;rows.</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp;</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; Accurate estimation need good math model that considering dependency of join var and vars in restriction.</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; But at least, indistinct should not be greater than the number of rows.&nbsp;</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<br>\r\n</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&nbsp; &nbsp; See the attached patch to adjust nd in eqjoinsel.</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<br>\r\n</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\nBest,</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\nZhenghua Lyu</div>\r\n</body>\r\n</html>\r\n	Hi,\r\n    I run TPC-DS benchmark for Postgres and find the join size estimation has several problems.\r\n    For example, Ndistinct is key to join selectivity's estimation, this value does not take restrictions\r\n    of the rel, I hit some cases in the function eqjoinsel, nd is much larger than vardata.rel->rows.\r\n\r\n    Accurate estimation need good math model that considering dependency of join var and vars in restriction.\r\n    But at least, indistinct should not be greater than the number of rows.\r\n\r\n    See the attached patch to adjust nd in eqjoinsel.\r\n\r\nBest,\r\nZhenghua Lyu\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Zhenghua Lyu", "Address": "zlyu@vmware.com"}]	{"To": ["\\"pgsql-hackers@lists.postgresql.org\\" <pgsql-hackers@lists.postgresql.org>"], "Date": ["Fri, 15 Jul 2022 14:06:54 +0000"], "From": ["Zhenghua Lyu <zlyu@vmware.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Adjust ndistinct for eqjoinsel"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657894030; cv=pass; d=google.com; s=arc-20160816; b=Yvy8Q4Lgm0o6JVtLsUQSgmvT9VNqtnOpaGNAnukpG72YMGBhBzsYIWeBMfI4RnYqTe YqFFI4huIoOhYWl9BlMEzBUZ0nlPNkH2mOtqDjmCvkmUHtAMAJB9g7EVst9gj6TLpljH yTJE1suVIgITh5Q++Ew9dYQYsOd1VeSz1+iO/ie0SPIlMqhMBbV3B91l87/0j1RDU+I2 FNZyHEZBuxuCI161VXhcXhKesbngElo/VvK27eb3b1jyavJjmcBqE2gNkwhG90wF+/Uf Cq8hXS/yxnRk4DtCO50X2C0aiXH4LDa48F+clhN1BpvscKL2+1uqiNo18Rp88M17Xwhq GxoQ==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=WDHNeIGdd1f3mhf4a6rf0lEOEztp16BUkXIFt3dL4n0yZu6yiM5lkjQ1J2AWd3tYd7Ob8qqGeuql8OyNBxGQX1vvcJn2Rwr6tTY2a3yyBQQMqm7NdJqCSIs1wHQsM/EDvi3LHIju/mozz1E6R76XcPd9zZkET5xEIpPjBVdyIsSY/aas61FsYVGYdL0FfbQlf3wqDynWBKhGUs3U/yQk0wOCnRfyOH2Z2v5QwB/CJn/qwcP7TRHUnMLXwdtpfYBMEAyjUzja7bGWIo7Dx+rcPsXnuuzwDfKyheq1j8KlPbWQ/0B2irlueYsM9e1iGM5op/X7Ex8mdlsoue4FOvC6bA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp145506jai; Fri, 15 Jul 2022 07:07:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f17-20020adfdb51000000b0020c6912683bsi4628414wrj.303.2022.07.15.07.07.10 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 07:07:10 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411214@lists.postgresql.org>) id 1oCLyI-00071X-DN for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 14:07:10 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <zlyu@vmware.com>) id 1oCLyD-0005JK-BB for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:07:05 +0000", "from mail-dm6nam11on2074.outbound.protection.outlook.com ([40.107.223.74] helo=NAM11-DM6-obe.outbound.protection.outlook.com) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <zlyu@vmware.com>) id 1oCLy7-0004Yu-H6 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:07:04 +0000", "from CO6PR05MB7506.namprd05.prod.outlook.com (2603:10b6:5:350::6) by MN2PR05MB6959.namprd05.prod.outlook.com (2603:10b6:208:18b::27) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5438.11; Fri, 15 Jul 2022 14:06:54 +0000", "from CO6PR05MB7506.namprd05.prod.outlook.com ([fe80::60e1:4680:b6c8:80f]) by CO6PR05MB7506.namprd05.prod.outlook.com ([fe80::60e1:4680:b6c8:80f%7]) with mapi id 15.20.5458.010; Fri, 15 Jul 2022 14:06:54 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CO6PR05MB750605D9F88AAFFB95658BABB58B9@CO6PR05MB7506.namprd05.prod.outlook.com>"], "Precedence": ["bulk"], "X-Received": ["by 2002:a5d:4e08:0:b0:21d:a689:7dd1 with SMTP id p8-20020a5d4e08000000b0021da6897dd1mr12746876wrt.477.1657894030773; Fri, 15 Jul 2022 07:07:10 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CO6PR05MB750605D9F88AAFFB95658BABB58B9%40CO6PR05MB7506.namprd05.prod.outlook.com>"], "Msip_labels": [""], "Return-Path": ["<pgsql-hackers-owner+M79098-411214@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"_004_CO6PR05MB750605D9F88AAFFB95658BABB58B9CO6PR05MB7506namp_\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411214@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHYmFNuzlS1W2m+H0GNVT/1qSdtcA=="], "Thread-Topic": ["Adjust ndistinct for eqjoinsel"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=vmware.com; s=selector2; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=0fEhSGIF/oP6/TOkTPXGR3qX1CGVIOpoQq3juOxWHdM=; b=gY1qfT/69IbPb42aoPpNmMwDX5A9SlJJ9Qegwsnv9vt/FO7ZXLMyL0/GaROqjjJXiTWgP5td1pTN2ulRWn4SCpfpaB990JuH6Tq/YQWFZzdeH/BNIFMQ9ReAWM4i4ahDS2F3HAiDxWMZlTHBMcIWoLk/08YijjNyf8qZ2dc7NS4="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["en-US"], "X-Ms-Has-Attach": ["yes"], "X-Originatororg": ["vmware.com"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1twIiY0kN1uddn7WLLnwOnzJEjdk7LoKGSvi995KmtykSruhGlKAYSJdiCH0Cf/EcA/PmJP"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version:msip_labels :content-language:accept-language:message-id:date:thread-index :thread-topic:subject:to:from:dkim-signature; bh=0fEhSGIF/oP6/TOkTPXGR3qX1CGVIOpoQq3juOxWHdM=; b=zKatpq6s4Ued+wZPB7NiuHu5p5QTWpeie37ymQv9k//0hEA5w2HJhGFV/+L5GSGtQm DQGG9HAqGhBInLq43ABqb6Lz32gBNEoteGJExpiHQuVzPMXbpU9F/Bed3eXQ5DP+Uj0k Z7kKYwMMPI6fdwHlpTY0qMY2nJMHBCopnRQAxKRoVmqdhVMYSFGBK2wOhemkv2jEvjcT BBTN4fek8v8pO5wSkgd4H4qPA+J84rK7NGUEn1TG5c1fBuRYAdk3eYXXRX7nDbdBe5aY UWuotCpFQsiONXjgw/rybtn7vozx7xtFSITJNl3XqvyABMUlE87injemXIVc9oKKF+zV GddA==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=0fEhSGIF/oP6/TOkTPXGR3qX1CGVIOpoQq3juOxWHdM=; b=AYTx/uwbsNz962u2p21r8aaSBWSjbHXuUg+f/joEKiyVwIoMUcyF8a7qtazwQuATNLdEtnF9F27GuQ2jCjmaRDo96sJOcZFzXIPLdO8rJ+VYUAwA/fXpglsZ44+IquBbnxqVvsEp7mHOP6HOsXPjaXYgsSYjrEXv1UKlIZ4MhWu6K0BDjae3hmMdN7MoYAeqgTe8GEOw1BwW+4qmZe3HVXT+gwHdjOrEqR6T5JSmb6skGa7eoD8M0SQYxzFHZ3C3twHGyW3Q2m32MQnROkKga0uHvuzorQneJAAU1kqio82U6RLOZLq0H9eTqA06hDTiqWDkBIH4XfJhzZed9sWJzA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@vmware.com header.s=selector2 header.b=\\"gY1qfT/6\\"; arc=pass (i=1 spf=pass spfdomain=vmware.com dkim=pass dkdomain=vmware.com dmarc=pass fromdomain=vmware.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411214@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411214@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=vmware.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=vmware.com;"], "X-Ms-Publictraffictype": ["Email"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass header.i=@vmware.com header.s=selector2 header.b=\\"gY1qfT/6\\"; arc=pass (i=1 spf=pass spfdomain=vmware.com dkim=pass dkdomain=vmware.com dmarc=pass fromdomain=vmware.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411214@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411214@lists.postgresql.org; dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=vmware.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=vmware.com; dmarc=pass action=none header.from=vmware.com; dkim=pass header.d=vmware.com; arc=none"], "X-Ms-Traffictypediagnostic": ["MN2PR05MB6959:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:CO6PR05MB7506.namprd05.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(136003)(39860400002)(366004)(346002)(376002)(396003)(9686003)(55016003)(186003)(7696005)(316002)(41300700001)(6506007)(26005)(91956017)(71200400001)(19627405001)(8676002)(66446008)(66556008)(478600001)(66476007)(66946007)(76116006)(33656002)(64756008)(99936003)(52536014)(38070700005)(3480700007)(5660300002)(4744005)(6916009)(2906002)(122000001)(38100700002)(86362001)(8936002);DIR:OUT;SFP:1101;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["b39138ca-3cee-4b4a-a4d6-cd83d9dd62f0"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["qiOKjPW73NwfnaJTnO1WM26hpdmSUXUYHjYQZdUgpt/jK5CDbisBeRfms2hE15roj3ZW3KY5D9l9sd85ZznKXsRchl4L/g2COS+l8Rla9SDI4wch/4O+98+Lp8LEUKhkcPT1eLpOZYbQMpK1HI9CvwR0WQl5x3VcO7o+3okZD9aoClys8SMR/LRXFsSC3PolsBv3gyfPpAWHZC8X78DWl59iUtWOFoKTf2jj82lVXR220nVHW2z3bRcJWo0JFbBsKk/83hYcTuNoDN9xlm54ynMe2C++tDEPdr/st6fS9iEHjIUU0pYEk6F4Tl7ZhyTWRstYWUu/OGsTRZVNhX0b40+gsFA4Yv8tCn6G4iUXL1zvfZZE1ck5Axb9npm/BD2NigdQSPhgsIRzl+/4vVeHriK/cBKKlwyQ8BtCOxoKRFDqzTq69lzB4FBxNZp3RgIWe4rUMIhUg36GeuStc2rQLCnjZSC+vdMS3SZ6Fx4KlkkT3LIHhO2ghiPZxh3Spy17FGhzyizJEL5zuwdMYvDQSbHbMvkiAtBfTbkIJEbay2zghABSNuTQcojeuYPYOzmkEiLipM+/egREdlVjbjpz6drTdedjShE5QeJUMx1+ZRlciXXZmAB98nVOOKvr3Kjn4y/95FgW2Z03hi6ydvCAn1zVEVTrVSFyRCU2AQZNzM99jWVyQlbDXxzAlyXqVmjz8N6ScymNaVa2KZ9dqzdnz9fk7XROZC67ehwoncedhj2FkCKQ+h3A2k5R58yd5bhSA4Q6SCYJczeWJwwYvWHNzGmvuthYg52gbLi3aDaY6AXdeqBUxiRjtA1YEmblffts5YvDvHncNO8wrKeADQ8aTZPVwFt7FDzjT7hFDFcOA6jISrqX0BrQqqXCveHSerme"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-8859-1?Q?TR600mxha1byFKAIanF5YXsZnUSyNtP5AT9eK4ENlIM4jyuWjV4EQjDwLa?= =?iso-8859-1?Q?q04ZA12HeZWxVv45vgiKyCkU9fiIcsLowvCs2n0c6Fokwsa+GExCC5DlZg?= =?iso-8859-1?Q?aIQmBrxjHk/qhTJlcHrx9w6jsIX32Hh/Cf+bxGirs4S6kfjmSK+0qXAgeL?= =?iso-8859-1?Q?XJJXSDWrxYZ27uOEshuFMluEI+5ExbaKSbDi929dDfO7LUv8SK6av8ACM8?= =?iso-8859-1?Q?g6C2RDbEwcGNsbd5YzgWjDy9v5mNaqdDN4QTxDC5/MpwcVmsS2NIAGVkW5?= =?iso-8859-1?Q?F/rO81bAsregmVJDpKplNtVpTroBKlGinVCYKUNX3/4HkfCXF2E/k0wjZn?= =?iso-8859-1?Q?1BDh2RQnYYOZ/s9q7ouP3ePdpU8qVQcG5T6VHVqmIjqM1IrJ4tti3vTAS1?= =?iso-8859-1?Q?B3LhUp7uapp8NeU+i8RxTtADQ9QjI/p6frZnEtTyELwE4s8Ggb/lgLIPgq?= =?iso-8859-1?Q?AQrMqfqkRIHuPaUe/b9uQLF2CZcCgSPo9GTEd6pIPnQ0dRcvUjn9xCxdMZ?= =?iso-8859-1?Q?4Bp6tYTcpCEofaAvPprt/qWiBJAKJX6RmaFnkUniKaM73LVbnCtWxC4jI8?= =?iso-8859-1?Q?g+KBUopIUW+xddJ0rww/g9b3xhv529Mu4sDXGzDO51b8uGAtg39lZ9GRIO?= =?iso-8859-1?Q?uDbcglIaSzPKOsc9m2zPXFELB6pHPWWoqvyvZgTZnAu8iBvPxzykcqFtyE?= =?iso-8859-1?Q?7pz1UdVzGXW17PmbtO7h4K4PYKOCIkafyU7kgfaklWzWxVJBdnb94amvtT?= =?iso-8859-1?Q?91W7UF5NZUOz5ziKUrn/iRWlIryORQc8y6g/2ZbdH0A83TDy+HuntVjPZh?= =?iso-8859-1?Q?71HCNxFO9D6aa45dtYM2TqIY3nQASb2laKwLsjl7d8ZzOAHvb8bb/5yLd8?= =?iso-8859-1?Q?8cKI6F2dtQR03/XvRPIwoiOni2MY9tTLTBVh2t3mQiHai+rwVXHh3zDnUc?= =?iso-8859-1?Q?EDmpm2Y/+BcVCO+rOaC6036CbFWRZ0l3ik9bdIrVka/a02pswqYjmPUmf0?= =?iso-8859-1?Q?GZuO24jy5Fj7hXReuaDm0LiXHjqQgDSk4CquS9ZyZ72tFoqTpJjyvh/jdQ?= =?iso-8859-1?Q?FYZ+t4H6a5v1kUKtMr37/6hiEAIkOYPMYy7EdJpf0Zz0xiqjN8i6VIU9Nf?= =?iso-8859-1?Q?JnxAtBfOoY4HRjxvZNI1C21RQuhQX08NZot1jtkIBh7vblAlvaU+JgLKdX?= =?iso-8859-1?Q?dzruxC/BUV9E8uLDn8DgUVOiUKBuOml62j53AJgNzj/HNN3ZQKM2TD0fwC?= =?iso-8859-1?Q?IIyALpzIvLzlQSY1maE8vmfYMMU1BZz+1qx6S2MpsCN3t/zxoI7t4gvsBA?= =?iso-8859-1?Q?aWyB6naqxEenWhSaBk6XustYesXHI1PoYIbx7ehF12/YJbXfTCAS3sxR7p?= =?iso-8859-1?Q?w38L3j9KG/bzLJKUgqL/84HjQkkTl5244hz0MU+48/hLZB9QPAxHtBk6/9?= =?iso-8859-1?Q?XHIeZTOoE5LzaUZsOZUi4N25ez3niwXo+Kb0jxOtz8nMSHKEK2PQIoTbrh?= =?iso-8859-1?Q?Mmp0+iKuEXayVvUGirjv3p91M0D8IgjvMqj7/qTMfC9+1INmZgteCQhhW2?= =?iso-8859-1?Q?gGyW2IEyvbcpuw9qEdcKTHRMpGnGcDK6WnIncYoHTz8spsUCm8uh27vq8r?= =?iso-8859-1?Q?NyQPJpBPDmb2g=3D?="], "X-Ms-Exchange-Crosstenant-Authsource": ["CO6PR05MB7506.namprd05.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["c867487d-372e-48f7-59da-08da666b45e8"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["QbLsQP5ISdqjs0jSjEH97exhhPmKU8JUwXuHBC8r1mfstnPFENrh2LHFJCV+ybuv"], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["c867487d-372e-48f7-59da-08da666b45e8"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 14:06:54.6266 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["MN2PR05MB6959"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:33:17+00	david.g.johnston@gmail.com	Re: Doc about how to set max_wal_senders when setting minimal wal_level	<CAKFQuwaYouqRcU3j8Pjr_5Zm76AQHO72a-w7mjk+n9HzWAQ54Q@mail.gmail.com>	[{"Name": "Japin Li", "Address": "japinli@hotmail.com"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	171	10469	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Fri, Jul 15, 2022 at 6:27 AM Japin Li &lt;<a href="mailto:japinli@hotmail.com">japinli@hotmail.com</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><br>\r\n&gt;<br>\r\n&gt; +¬† ¬† ¬† ¬† servers.¬† If setting &lt;varname&gt;max_wal_senders&lt;/varname&gt; to<br>\r\n&gt; +¬† ¬† ¬† ¬† &lt;literal&gt;0&lt;/literal&gt; consider also reducing the amount of WAL produced<br>\r\n&gt; +¬† ¬† ¬† ¬† by changing &lt;varname&gt;wal_level&lt;/varname&gt; to &lt;literal&gt;minimal&lt;/literal&gt;.<br>\r\n&gt;<br>\r\n&gt; I don&#39;t think this is great advice.¬† It will encourage people to use<br>\r\n&gt; wal_level = minimal even if they have other requirements that weigh<br>\r\n&gt; against it.¬† If they feel that their system is producing too much<br>\r\n&gt; WAL, I doubt they&#39;ll have a hard time finding the wal_level knob.<br>\r\n&gt;<br>\r\n<br>\r\nAgreed. It isn&#39;t good advice.¬† We can remove the suggestion.<br><br></blockquote><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Yeah, I wrote that thinking that max_wal_senders being set to 0 implied archive_mode = off, but that isn&#39;t the case.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"></div></div></div>\r\n	On Fri, Jul 15, 2022 at 6:27 AM Japin Li <japinli@hotmail.com> wrote:\r\n\r\n>\r\n> >\r\n> > +        servers.  If setting <varname>max_wal_senders</varname> to\r\n> > +        <literal>0</literal> consider also reducing the amount of WAL\r\n> produced\r\n> > +        by changing <varname>wal_level</varname> to\r\n> <literal>minimal</literal>.\r\n> >\r\n> > I don't think this is great advice.  It will encourage people to use\r\n> > wal_level = minimal even if they have other requirements that weigh\r\n> > against it.  If they feel that their system is producing too much\r\n> > WAL, I doubt they'll have a hard time finding the wal_level knob.\r\n> >\r\n>\r\n> Agreed. It isn't good advice.  We can remove the suggestion.\r\n>\r\n>\r\nYeah, I wrote that thinking that max_wal_senders being set to 0 implied\r\narchive_mode = off, but that isn't the case.\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Japin Li <japinli@hotmail.com>"], "Date": ["Fri, 15 Jul 2022 07:33:17 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Doc about how to set max_wal_senders when setting minimal wal_level"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657895626; cv=none; d=google.com; s=arc-20160816; b=gmXdOYK4EXJzfWppYOqSYjxNmahitWnHQUdSkK6x1XzoztskLNpuyaXmGxaFaDvOjZ D5QitM99UCkdmMQTFJg1WZ3CVxWFrxC6Q3fdNxxdh+b+7FSz6c0xfMTzxFsrX0JVC5ko IGz7rDmKfflgWRLEYyBvAs6b8C/2CiV2DpKDAGmOxEPvd4XFVPTzD+X6z17AGiVv8FnK C5gePjSWlM0Q6JHv7u8XqcZmQ84ktSWnZZh0hL74KDhakpN9iueYplLYzX9nCLF5T1O0 vJC0YwJW9hk4fInni39hEhLq/rIDBaFtIVtBXbs7jgWuGmaYLMh39Uo6rSwTLtXAU8+K rSsw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp152097jai; Fri, 15 Jul 2022 07:33:46 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o8-20020a05600c378800b003a305e926a2si3659905wmr.72.2022.07.15.07.33.46 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 07:33:46 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411215@lists.postgresql.org>) id 1oCMO2-0001W4-Go for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 14:33:46 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCMNx-0008Pi-Sa for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:33:41 +0000", "from mail-ej1-x632.google.com ([2a00:1450:4864:20::632]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCMNr-0000CO-Bw for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:33:41 +0000", "by mail-ej1-x632.google.com with SMTP id bp15so9309558ejb.6 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 07:33:34 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwaYouqRcU3j8Pjr_5Zm76AQHO72a-w7mjk+n9HzWAQ54Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAKFQuwZ24UcfkoyLLSW3PMGQATomOcw1nuYFRuMev-NoOF+mYw@mail.gmail.com> <m2k0dbsmkh.fsf@hotmail.com> <MEYP282MB16696D67A00860E84B67DE4DB6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <20220304.150535.1261751585521581252.horikyota.ntt@gmail.com> <MEYP282MB1669FD5DB2A59F8104ED3C32B6059@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM> <2040586.1657065753@sss.pgh.pa.us> <MEYP282MB1669D35AEAB838638C97BFF6B68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "X-Received": ["by 2002:a1c:cc1a:0:b0:3a0:39b1:3408 with SMTP id h26-20020a1ccc1a000000b003a039b13408mr14313052wmb.157.1657895626844; Fri, 15 Jul 2022 07:33:46 -0700 (PDT)", "by 2002:a17:906:794f:b0:72b:1346:85a3 with SMTP id l15-20020a170906794f00b0072b134685a3mr13750983ejo.259.1657895613484; Fri, 15 Jul 2022 07:33:33 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwaYouqRcU3j8Pjr_5Zm76AQHO72a-w7mjk%2Bn9HzWAQ54Q%40mail.gmail.com>"], "In-Reply-To": ["<MEYP282MB1669D35AEAB838638C97BFF6B68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411215@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"0000000000001dd37c05e3d8e71f\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411215@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=13zQuRahPBaDq1saGFo5G1gHYRpbTqwGMmXrbmeGvSo=; b=I7+0B42YA2nLmTsrpRkg3SR5ZXu5YLzNenvYKVLkg6e3BayprgYW9/+W0K4eXHbQY+ FMN/06ibUR7Eyk9sPNonT9rlr6qCpcsbS8+8ylD/u0EO88+GiFnQJdFQKhEl0IkIpLPl OOB+nLMw36dhWC09HgsA3Gq6C27K9u9tTJnKGA/BzB72t48RtFDpi16G7ewZDtgfSIKI L7XOsmIWQ6ggxhG9mjvKX0lN6w/pk34f86z3XjRix0wacmEbWxM26MU0KT6OPSPdRpv1 nDJsd9NlE4O9m9em+DqHznBREiAYytbjivFb9JkuBt61YuHCE+dn8YB32+pIpOpZx/ZF Ik8g=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora81jd1JDe1dEQL1lGw/N/mbZ9hNDsCRatSetWOd1NAa4jE/0xIL z9pqmChX2wUf8szAkMVgJgRqGuVo9CiCOY88Nos="], "X-Google-Smtp-Source": ["AGRyM1uX2Ax/e6hKU1GSJBmSL9iS9dCd4nZrTnfeY4/ZMqLKt8Xp9YJePimBdi8HeO7GPiK8KUaM"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=13zQuRahPBaDq1saGFo5G1gHYRpbTqwGMmXrbmeGvSo=; b=KSW6JYEa4nWPH5nnwNsD9qrb2hiGuyxOYszsl8EZjPb9Sb82NdzRn8MD6SYWIr/8s/ VjfMZOkaJe8R9vO0lAnZDbhFVhs3UuhckIOVTUcQ6IVHHOY2qAYm3l7Hm81Vf9h1VSCT K9WgLZVTjJ0tn3KMzgrfa67dEKkFkS3oJas4Efrt/cZFBlxWptYSmUx537+qo3htfGTv kGIigLnEjJ5/yYRFv4sm2hrGFdeuk2pzmTn9eFTBL6Gm22f/tlDkWEwEcEmhcVz0st0U GKKjI0bsX/z1fG/9JoOEdlBi0VeuYfOK/TVD12n6ePaEmjX6PhDCkGdyTc9P2w/SpH1J Qd6A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=I7+0B42Y; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411215@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411215@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=13zQuRahPBaDq1saGFo5G1gHYRpbTqwGMmXrbmeGvSo=; b=EfVtHTFggtTuIovmJ9x+QMkE8U8MkDpcV1LXSXU0Xm/63szylGArdhOb/BCTQ9CEdw p63TpMXqOcQE8AvtzTc6levD08nsUod3Q0GhlP6RkvaowPjQ9otZhuHixqKrBc1ZkeIb koKQEe6fxi1N5lPanEhhqQC4jyAJ6a47hw3G+fkJylf9d8Kx7cM1HISD5RngYGLQdln3 QY/inPBDPPMQ7ii9HBw9vJzUBtreISzme0j1qzVKlN0xpq27Fenzq4nUnLR3iED8SFg4 TsSqdVVugqccSovEq5p71uS2orpBEWell0515KEwXVj4B9REmAoA+f2sfepR/5ZPqupX emvw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=I7+0B42Y; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411215@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411215@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<MEYP282MB1669D35AEAB838638C97BFF6B68B9@MEYP282MB1669.AUSP282.PROD.OUTLOOK.COM>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:36:20+00	aleksander@timescale.com	Re: Add 64-bit XIDs into PostgreSQL 15	<CAJ7c6TPHBwU87+oRdTUHVy7bKNnCfZPywJJBKuUhUcNQQ3xUaw@mail.gmail.com>	[{"Name": "Postgres hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Pavel Borisov", "Address": "pashkin.elfe@gmail.com"}, {"Name": "Maxim Orlov", "Address": "orlovmg@gmail.com"}, {"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}, {"Name": "Alexander Korotkov", "Address": "aekorotkov@gmail.com"}, {"Name": "Andres Freund", "Address": "andres@anarazel.de"}, {"Name": "Ilya Anfimov", "Address": "ilan@tzirechnoy.com"}]	\N	172	9059	[]		Hi hackers,\r\n\r\n> I can agree with you that sending rebased patches too often can be a little annoying. On the other hand, otherwise, it's just red in Cfbot. I suppose it's much easier and more comfortable to review the patches that at least apply cleanly and pass all tests. So if Cfbot is red for a long time I feel we need to send a rebased patchset anyway.\r\n>\r\n> I'll try to not doing this too often but frankly, I don't see a better alternative at the moment.\r\n\r\nConsidering the overall activity on the mailing list personally I\r\ndon't see a problem here. Several extra emails don't bother me at all,\r\nbut I would like to see a green cfbot report for an open item in the\r\nCF application. Otherwise someone will complain that the patch doesn't\r\napply anymore and the result will be the same as for sending an\r\nupdated patch, except that we will receive at least two emails instead\r\nof one.\r\n\r\n-- \r\nBest regards,\r\nAleksander Alekseev\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Aleksander Alekseev", "Address": "aleksander@timescale.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Pavel Borisov <pashkin.elfe@gmail.com>, Maxim Orlov <orlovmg@gmail.com>, Stephen Frost <sfrost@snowman.net>, Alexander Korotkov <aekorotkov@gmail.com>, Andres Freund <andres@anarazel.de>, Ilya Anfimov <ilan@tzirechnoy.com>"], "To": ["Postgres hackers <pgsql-hackers@lists.postgresql.org>"], "Date": ["Fri, 15 Jul 2022 17:36:20 +0300"], "From": ["Aleksander Alekseev <aleksander@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add 64-bit XIDs into PostgreSQL 15"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657895804; cv=none; d=google.com; s=arc-20160816; b=ZFQvcUlYW9NNpKt5dj79UyU6Z0nnjZgf+ut9dJIakkihT6q+UWKYyQ9rcpqdp8SheP cHtNxSoDJ3o0+9L2ZyIeazzEhEN2FTVXrqrn8wD7K2tVWm4UhL0W6PpsWVZPuUNiYaXL dnofBLWst09wtXDvKmgoh5WFZPunn3RqRGNyqlp8Z/3QQe4qP9e7EWCPupvDFQfp83Yv BqSEm1rctTeg67P3KVzEuA0+XHzIXtaK0D5G2ld9xKQ1wYsaI946lvlE7R6CA4fmzVS1 3nNKSbGzBcVSr5tyK0uca/SHMAjeV1Q5wV8Zl7sPbXZHcTEcQQvjXPxaVQ3qwXB389df X2ZQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp152780jai; Fri, 15 Jul 2022 07:36:44 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f20-20020a67d894000000b00357321abb03si909425vsj.343.2022.07.15.07.36.44 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 07:36:44 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411216@lists.postgresql.org>) id 1oCMQt-0004jL-VM for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 14:36:43 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <aleksander@timescale.com>) id 1oCMQp-00038T-Ea for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:36:39 +0000", "from mail-qk1-x735.google.com ([2607:f8b0:4864:20::735]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <aleksander@timescale.com>) id 1oCMQl-0000DO-5P for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:36:39 +0000", "by mail-qk1-x735.google.com with SMTP id c17so3668148qkl.4 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 07:36:34 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAJ7c6TPHBwU87+oRdTUHVy7bKNnCfZPywJJBKuUhUcNQQ3xUaw@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CALT9ZEGpr3WEPFJL_EHtzE-vF09SPYeAVyoPYZUuG1=yX5oi+w@mail.gmail.com> <CALT9ZEE3aMAT+sATzPEzrti+DZwBse+9+XoiuKkGJV5k=5TrFw@mail.gmail.com> <20220701025335.GA13040@telsasoft.com> <CALT9ZEEg+efQ8nzt3Fn+vHdH19WOAzdACAZtxe9_8_96n+kXNw@mail.gmail.com> <CACG=eza0tv5H4mA+UF_Vk7_cPSQ6kFbzSxKFTuR1o=jmLoo9UQ@mail.gmail.com> <CACG=ezYfMkhEZOAV8b2Cmr16hsb9U3mZv+=8NT1Ox6A0u5L_Sg@mail.gmail.com> <CACG=ezb_YRCg94BUVqAGWjk-4M-LZOHVvFfcXSt3-acRr2xhyg@mail.gmail.com> <CACG=ezY5NFXTRWRdZwWn4BduvLMmOxRCU+aa4=bHB+1YZpnWAg@mail.gmail.com> <CALT9ZEE9+n_SE4_=jtmisah4wfB990DgVDzf2PwVOce-6kQ8QA@mail.gmail.com> <CALT9ZEFmpuCT65vXZVN=axxoKTr6xjj-kDGNa=KXvMuCfbOcbQ@mail.gmail.com> <20220715121658.GI18011@telsasoft.com> <CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A@mail.gmail.com>"], "X-Received": ["by 2002:a1f:4504:0:b0:374:cc45:edc6 with SMTP id s4-20020a1f4504000000b00374cc45edc6mr5864431vka.4.1657895804779; Fri, 15 Jul 2022 07:36:44 -0700 (PDT)", "by 2002:a05:620a:3725:b0:6af:4f5e:de00 with SMTP id de37-20020a05620a372500b006af4f5ede00mr9997380qkb.754.1657895792420; Fri, 15 Jul 2022 07:36:32 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAJ7c6TPHBwU87%2BoRdTUHVy7bKNnCfZPywJJBKuUhUcNQQ3xUaw%40mail.gmail.com>"], "In-Reply-To": ["<CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411216@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411216@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc:content-transfer-encoding; bh=NBIitO55Mxh33EkUbbrfoQ8NOFcw9Iw07FqVopqlglQ=; b=Qx+ibSCi4eQokASHKEeTZfWuO3gyL2Rr7kMOjh55Tz//CTSZwIaMframLcf2n7NzpE YgcOTMsycFTC7fdE4ycRR83aYqCIcU8klFRo43XBHzmPccft/Wa7gr6nNWKYM/iSbZfj CFD3rOCs7us59h5c1fGKx+D73N8HAGiu/Wksoh9oE46K53kNnsf+0VcQZgjAd9kFAI88 UjXIKNUeEKIpCcz/iFEP1VRh/+pbFgBVCtzH+Y5CqrodRzMenjDk44l2urCkBNamm4Pn IsAvDJDrQ+S/xZ6k9viqyA8YIdPB7zpaL5dB83TEug889UosbLY91m/Hx6+ic5+8o6Tt EORQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9MAdm3dDAvsFsYUSJsiz87OwrdYAOIXnDwlifOo6gTgaj/XQ/4 +PbNZNhO45fbxiXHvl1NwONF9T9zFKCHoDnYPqEUBsSZit8="], "X-Google-Smtp-Source": ["AGRyM1uGIcXJ3XTRzRCIovkKfVEdGB8pbjE1hicX07JZvSPDop7jbj75muRLWepLgLnYNxw2oydS"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:cc:to:subject:message-id:date:from :in-reply-to:references:mime-version:dkim-signature; bh=NBIitO55Mxh33EkUbbrfoQ8NOFcw9Iw07FqVopqlglQ=; b=BUnjWL/kVING+2ZgR1zRKKcvbO7y37U/Pfj/IovOu7Aq+VzbdtLNH4yLCUoTSAv8Pi xd3YrI0RgIQC1WMWBkctF7AkmpT9uuft/Zmsnyp/DBr8U73A2IQ5+8xJiSKfSAtqb5NX aPXtH/4ir6CoFgXiBGG3DXwPPS4keM9JYKroHhL7FZ4G7SvZh6WJjjTFxwR38X7aSoh2 OCc/dZ6FWxmxd0+IqR2WeS5NUVx7ezCHdkbIOWf33aPpByKp7yCKZcql1CQQbji4IqxC D+Vl+qQi0ncyFle08FMxrblRfQgE4luCXAXaNTMCAvlkG4CCYxHZ+HPSsKa8CoQi4YoU rXwQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=Qx+ibSCi; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411216@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411216@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc:content-transfer-encoding; bh=NBIitO55Mxh33EkUbbrfoQ8NOFcw9Iw07FqVopqlglQ=; b=jYL5mcQJ9vdTOV2SO1+v08nf2aR8tM5GNYvcTq1SdvjKgEmZIz9NG5hCLKRtdoPK01 iR2pUv+f8GzGQcvDGcvKcX1Pmqo1lnxf3yBQ7593wNqXEFs0hneBbEBzCEnzGNo9jVQ8 NOKBHlL5jpKF6QqCt0k9X0Kh5FPa7irNTxZKnrY0TQLTzOTCqbrQPUYu5GMjATley5Ej GQyyCo0db8xoBivtG2vgmDQnozKGjZ7HIcL/IYGOSr6TcSC6hFxWSgewJTa/TDUGs7Ou TMvieTKtz1r98oT5gIDqCuqgFN7VJ+F8mGZfcd1l19K+vDyOhZ3G8NdQ6i+ZelnnbSkN RMBQ=="], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=Qx+ibSCi; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411216@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411216@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<CALT9ZEEyB0P8iLb20y3NKMVK2kNbwzVSH1n1eb1mQg9EJ-5f9A@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:39:00+00	sawada.mshk@gmail.com	Re: [BUG] Logical replication failure "ERROR: could not map filenode "base/13237/442428" to relation OID" with catalog modifying txns	<CAD21AoCdiqOcVmZgoh3nRxhPNqueUGCbPRkzcmjSgD6GUU2=gA@mail.gmail.com>	[{"Name": "osumi.takamichi@fujitsu.com", "Address": "osumi.takamichi@fujitsu.com"}]	[{"Name": "Amit Kapila", "Address": "amit.kapila16@gmail.com"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Drouvot, Bertrand", "Address": "bdrouvot@amazon.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}, {"Name": "Oh, Mike", "Address": "minsoo@amazon.com"}]	\N	173	47993	[{"part_id": "2", "file_name": "v5-0001-Add-catalog-modifying-transactions-to-logical-dec.patch", "content_id": "f_l5mk24rx0", "disposition": "attachment", "content_type": "application/octet-stream"}]		On Fri, Jul 15, 2022 at 10:43 PM osumi.takamichi@fujitsu.com\r\n<osumi.takamichi@fujitsu.com> wrote:\r\n>\r\n> On Thursday, July 14, 2022 10:31 AM Masahiko Sawada <sawada.mshk@gmail.com> wrote:\r\n> > I've attached an updated patch that incorporated comments from Amit and Shi.\r\n> Hi,\r\n>\r\n>\r\n> Minor comments for v4.\r\n\r\nThank you for the comments!\r\n\r\n>\r\n> (1) typo in the commit message\r\n>\r\n> "When decoding a COMMIT record, we check both the list and the ReorderBuffer to see if\r\n> if the transaction has modified catalogs."\r\n>\r\n> There are two 'if's in succession in the last sentence of the second paragraph.\r\n>\r\n> (2) The header comment for the spec test\r\n>\r\n> +# Test that decoding only the commit record of the transaction that have\r\n> +# catalog-changed.\r\n>\r\n> Rewording of this part looks required, because "test that ... " requires a complete sentence\r\n> after that, right ?\r\n>\r\n>\r\n> (3) SnapBuildRestore\r\n>\r\n> snapshot_not_interesting:\r\n>     if (ondisk.builder.committed.xip != NULL)\r\n>         pfree(ondisk.builder.committed.xip);\r\n>     return false;\r\n> }\r\n>\r\n> Do we need to add pfree for ondisk.builder.catchange.xip after the 'snapshot_not_interesting' label ?\r\n>\r\n>\r\n> (4) SnapBuildPurgeOlderTxn\r\n>\r\n> +               elog(DEBUG3, "purged catalog modifying transactions from %d to %d",\r\n> +                        (uint32) builder->catchange.xcnt, surviving_xids);\r\n>\r\n> To make this part more aligned with existing codes,\r\n> probably we can have a look at another elog for debug in the same function.\r\n>\r\n> We should use %u for casted xcnt & surviving_xids,\r\n> while adding a format for xmin if necessary ?\r\n\r\nI agreed with all the above comments and incorporated them into the\r\nupdated patch.\r\n\r\nThis patch should have the fix for the issue that Shi yu reported. Shi\r\nyu, could you please test it again with this patch?\r\n\r\nRegards,\r\n\r\n-- \r\nMasahiko Sawada\r\nEDB:  https://www.enterprisedb.com/\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Masahiko Sawada", "Address": "sawada.mshk@gmail.com"}]	{"Cc": ["Amit Kapila <amit.kapila16@gmail.com>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, \\"Drouvot, Bertrand\\" <bdrouvot@amazon.com>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>, \\"Oh, Mike\\" <minsoo@amazon.com>"], "To": ["\\"osumi.takamichi@fujitsu.com\\" <osumi.takamichi@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 23:39:00 +0900"], "From": ["Masahiko Sawada <sawada.mshk@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [BUG] Logical replication failure \\"ERROR: could not map filenode \\"base/13237/442428\\" to relation OID\\" with catalog modifying txns"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657895987; cv=none; d=google.com; s=arc-20160816; b=TI33t+TeKQPk/39t8M7hXiZAQQDIYhz/FiPAU29BZ58pjUc4NQdd9oDCYcZuO9/OGe 2zj2cRauAiNM8+GPmek4AGfFXUSJqEgiAXP5KP6qN/hRWjcT3GCmDRFccNhxsPa01wf6 /IOazlvAktc8+z+bufeZS4ILYgv1oH3bFSbrPdEdiLn0k4v35ae6arapxelU/Yo8/Eeg Y5nFUuBXNuQdoh2Ynjdwuho841oPpdZHBvhJQf3jgcvfOVlMMONECuMen9Uz4kJzBPVo 9F1QgxtbI1qqHPx01dF3Um/ObDvydzmjaYo9pVPn7SE8dctf1xgsJXRg41uDJ2VJxWQB kkLg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp153432jai; Fri, 15 Jul 2022 07:39:47 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r8-20020a67c308000000b00356f9a5b8bcsi914325vsj.511.2022.07.15.07.39.47 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 07:39:47 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411217@lists.postgresql.org>) id 1oCMTq-0005na-7O for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 14:39:46 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oCMTl-00043t-7Z for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:39:41 +0000", "from mail-pj1-x1035.google.com ([2607:f8b0:4864:20::1035]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <sawada.mshk@gmail.com>) id 1oCMTi-0004q2-Iu for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 14:39:40 +0000", "by mail-pj1-x1035.google.com with SMTP id q5-20020a17090a304500b001efcc885cc4so6256963pjl.4 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 07:39:38 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAD21AoCdiqOcVmZgoh3nRxhPNqueUGCbPRkzcmjSgD6GUU2=gA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20211008.165055.1621145185927268721.horikyota.ntt@gmail.com> <CAD21AoD00wV4gt-53ze+ZB8n4bqJrdH8J_UnDHddy8S2A+a25g@mail.gmail.com> <CAA4eK1L_e4r4=10TTzoOiWGQ6hH4vxWAwD=0aofz04czCTV0kQ@mail.gmail.com> <20220523.133323.444599955292141474.horikyota.ntt@gmail.com> <CAA4eK1JoKV2qmp916gFk=9SX=Qo21+sN4n-yjbB2b0Q1xxOKJw@mail.gmail.com> <CAD21AoAn9T6mS8sMF5=tFV66Wru92s933ihRVunLPEU_+0=Xiw@mail.gmail.com> <CAA4eK1Lgfj2ww4V_zMxTmduB0BQpEsS-j7RT8BV-cy7Qyp1E3A@mail.gmail.com> <CAD21AoDNJgYkrO1PQ=k6G9MfvRjhawMN-aZVT2spMr_ymmOhCQ@mail.gmail.com> <CAD21AoC4x3uOw5rUcSYZkWob5s5ottGt_RPLxCEpHimFRDjrEg@mail.gmail.com> <CAA4eK1L_Br0wNHwY1PrnusX1H2bvWR+iUnNC=1anKqhPBtnoMg@mail.gmail.com> <CAA4eK1KMsU5PFHOvTD=3jHQ6aPa8N39eGwAVMVA6S0sXw1kMdw@mail.gmail.com> <CAD21AoD8v=pE+3AMezPrWJo=hpijNmop-XRbZ=3YG5zT5pBMnQ@mail.gmail.com> <CAA4eK1KuSxRhwUoJWVW--EseKcob94-hrP+JMCGvGTR+Fnx2aA@mail.gmail.com> <CAD21AoBHo3WQ+vaeiNzXuNw__08veBT9qYgCUD3jNLWG=4GzFw@mail.gmail.com> <CAA4eK1KMegGo+QwMxJcHMbYN-3QOLH6hD2thWXA2_M3MLH01Ug@mail.gmail.com> <CAD21AoCF=8SKOJYWF12fPEwXc5GLU2SvhfZ3QoR93Qqn+6oeSg@mail.gmail.com> <CAA4eK1LuFtCifCBY=uB_Orzjx-tc0O8DZqfFE_JuHptngeCcwA@mail.gmail.com> <CAD21AoCBPL10=X83g6J2CXQRE11kXgiyzfVY2m=hS1O7YRqiWQ@mail.gmail.com> <CAA4eK1JyJL7dACPQ51hQmSz5KrxghmABr_J9AZbSGzSLW3Ghig@mail.gmail.com> <CAD21AoCAPkPxsqbe6ZTqOe0bcVrEWHmA3ObYQtyu0Bv8hC=z_g@mail.gmail.com> <CAD21AoC4+GeT_HRnCFuy0L37FHUSXOPEpXYp0wbQnFxCMiuD=Q@mail.gmail.com> <CAD21AoA7WM=ptACtu0cg5XdQ86c5RJDg9efsdPRCxQnUqZ+omg@mail.gmail.com> <CAD21AoDFC5btYbcGOLMWimotg+N45pXJqyEOhbfsOHdz8XUKpg@mail.gmail.com> <CAA4eK1KZHnHhZdL1-Fa-6+sw4JHEPjLjZ=+wTwRHnkooXoxp2A@mail.gmail.com> <CAD21AoDJiAiyp3AHbaPJ1w=twWs2sThUiNDxvpJ+k98voV2PSg@mail.gmail.com> <CAA4eK1KxnYuhU5AyusDAP1SKtVmwAS1wYJ+VNL155x=swbx+gA@mail.gmail.com> <CAD21AoAyNPrOFg+QGh+=4205TU0=yrE+QyMgzStkH85uBZXptQ@mail.gmail.com> <TYCPR01MB8373EFE369CD515805C16292ED8B9@TYCPR01MB8373.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:a1f:1956:0:b0:374:1ce7:5cbc with SMTP id 83-20020a1f1956000000b003741ce75cbcmr5760657vkz.34.1657895987288; Fri, 15 Jul 2022 07:39:47 -0700 (PDT)", "by 2002:a17:90a:7c05:b0:1ee:e40c:589b with SMTP id v5-20020a17090a7c0500b001eee40c589bmr16213265pjf.78.1657895977014; Fri, 15 Jul 2022 07:39:37 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAD21AoCdiqOcVmZgoh3nRxhPNqueUGCbPRkzcmjSgD6GUU2%3DgA%40mail.gmail.com>"], "In-Reply-To": ["<TYCPR01MB8373EFE369CD515805C16292ED8B9@TYCPR01MB8373.jpnprd01.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411217@lists.postgresql.org>"], "Content-Type": ["multipart/mixed; boundary=\\"000000000000c9118e05e3d8fcb8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411217@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=TospJr5JREtJTdEKVqUZCq4i6WQJ3YmqrXOGGpBgZZ8=; b=ccAnPms4IV2g7Pqh8FDT3BRs8u4SI8XGnqGWVMG+2xVjBqmItmda7mg3OFMjLAmjMW yc01fqzoTM6dq1GExNYroGUU2rnNrzwkX23FdFYnvW6SyIMle3+3DX8dbggeOIeeBNsn luwVsDoKwP6nAI9Tb6kbbfGy4VYxY9QMiYbE94JPskYLIfnCoRihSgKnX6uSybo+UIsZ YoUPH065SPlMJltBYkz73NfKxdOErP1v0q5bE1/tmPSaVVcdaDRseszw5TJ9MwQsykef 7mtnDXhXxWYtai7VUZSulTqaBGI01J99fLzWNrOLQLjG5q5IO9YigrGa3QRjsLU3Lx4H CcaQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/WUzlOTU8IfXZGIxMIw3B/eD5qxW48wdNmEWCBRc+yckdYZLge X9RJSMAFaV5pcsPIYJq7mp1Qi0iNJcwkOxeIV84="], "X-Google-Smtp-Source": ["AGRyM1u2EZxgXHwLMMaPjPU0kppT1/wCC/qj1rk/tDqGevLMLuxytjA2A+yhvo+ADL5B/CjxiEa4"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=TospJr5JREtJTdEKVqUZCq4i6WQJ3YmqrXOGGpBgZZ8=; b=NcVd/iAOX8zT+ee1699bryEysmB8x7CO8A+7q3FtEaXi+qLeIpMc3ZKFifJNiRvj0p OfeX6ZhlS2suHfY+2WocKY4UvK+vpcwxRKU+d68Bs77WkBlfDOUFFphHmu4ezoKWqAH0 GIBNSStb+8sVPNX7yMXO/KBHbv++uXy8z8047hzUGkVpkhmRR+7BmBvTakDV7QE/WCBY veAXr/7gE3rKVBcqr5GuSobbXKDBoMK24hJ6ONZisuR/ckY9E6lgiA8fn88FYGOdJTIh gSSVgNTfs7LHl0tCFMD1+RaBJKM96LNisKDVGGw3GqupcJT8HYflNGwrIu7ALgHU6aFJ 8v1w=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ccAnPms4; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411217@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411217@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=TospJr5JREtJTdEKVqUZCq4i6WQJ3YmqrXOGGpBgZZ8=; b=ClxtM+QGrUkcJ01FeHFygEbM0hEyVU3NanLZdx1ELThb+/GTdoFbPFdDPe9szxiV/i ptFNnZCB61BDqOCmYj3vBs5/bkudzbxAko8hd60HkoptYtZdv9QwUr5TTbZIDxRu5H7V Q5y4u0UCCK9t4fGJBqriDUa7fklGvTUqukIp4v6QjlHie1jjVNCQaJqzbWRU7O2X6VGS knTlM4NKJYfikGHyTIxb3LjtmsdPQitjSG0JuK/nbWhx5oepT57WkAmBz9jGadHxlTxZ tcbM0xEIGRFA/fH/PazGsADcMq3x2j4ivtvrwYWAX+NxDwMt4mnm7xIjuPPHZPvkcPZj R1TA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ccAnPms4; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411217@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411217@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<TYCPR01MB8373EFE369CD515805C16292ED8B9@TYCPR01MB8373.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 14:59:55+00	jelte.fennema@microsoft.com	Re: Support load balancing in libpq	<DB7PR83MB0284A1221D88982A38B22310F78B9@DB7PR83MB0284.EURPRD83.prod.outlook.com>	[{"Name": "kuroda.hayato@fujitsu.com", "Address": "kuroda.hayato@fujitsu.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	174	19598	[]	<html>\r\n<head>\r\n<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\r\n<style type="text/css" style="display:none;"> P {margin-top:0;margin-bottom:0;} </style>\r\n</head>\r\n<body dir="ltr">\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&gt;&nbsp;<span style="color:rgb(32, 31, 30);font-family:&quot;Segoe UI&quot;, &quot;Segoe UI Web (West European)&quot;, &quot;Segoe UI&quot;, -apple-system, BlinkMacSystemFont, Roboto, &quot;Helvetica Neue&quot;, sans-serif;font-size:14.6667px;background-color:rgb(255, 255, 255);display:inline !important">we\r\n can assume that one of members is a primary and others are secondary.</span></div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<span style="color:rgb(32, 31, 30);font-family:&quot;Segoe UI&quot;, &quot;Segoe UI Web (West European)&quot;, &quot;Segoe UI&quot;, -apple-system, BlinkMacSystemFont, Roboto, &quot;Helvetica Neue&quot;, sans-serif;font-size:14.6667px;background-color:rgb(255, 255, 255);display:inline !important"><br>\r\n</span></div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<span style="color:rgb(32, 31, 30);font-family:&quot;Segoe UI&quot;, &quot;Segoe UI Web (West European)&quot;, &quot;Segoe UI&quot;, -apple-system, BlinkMacSystemFont, Roboto, &quot;Helvetica Neue&quot;, sans-serif;font-size:14.6667px;background-color:rgb(255, 255, 255);display:inline !important">With\r\n plain Postgres this assumption is probably correct. But the main reason</span></div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<span style="color:rgb(32, 31, 30);font-family:&quot;Segoe UI&quot;, &quot;Segoe UI Web (West European)&quot;, &quot;Segoe UI&quot;, -apple-system, BlinkMacSystemFont, Roboto, &quot;Helvetica Neue&quot;, sans-serif;font-size:14.6667px;background-color:rgb(255, 255, 255);display:inline !important">I'm\r\n interested in this patch was because I would like to be able to load</span></div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<span style="color:rgb(32, 31, 30);font-family:&quot;Segoe UI&quot;, &quot;Segoe UI Web (West European)&quot;, &quot;Segoe UI&quot;, -apple-system, BlinkMacSystemFont, Roboto, &quot;Helvetica Neue&quot;, sans-serif;font-size:14.6667px;background-color:rgb(255, 255, 255);display:inline !important">balance\r\n across the workers in a Citus cluster. These workers are all primaries.</span></div>\r\n<div style="" class="elementToProof"><font color="#201f1e"><span style="font-size: 14.6667px;">Similar usage would likely be possible with BDR (bidirectional replication).</span></font></div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n<br>\r\n</div>\r\n<div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);" class="elementToProof">\r\n&gt; In this case user maybe add a primary host to top of the list,<br>\r\n</div>\r\n<div class="BodyFragment"><font size="2"><span style="font-size:11pt">\r\n<div class="PlainText elementToProof">&gt; so sorting may increase time durations for establishing connection.<br>\r\n</div>\r\n<div class="PlainText elementToProof"><br>\r\n</div>\r\n<div class="PlainText elementToProof">If the user takes such care when building their host list, they could simply&nbsp;</div>\r\n<div class="PlainText elementToProof">not add the load_balance_hosts=true option to the connection string.</div>\r\n<div class="PlainText elementToProof">If you know there's only one primary in the list and you're looking for</div>\r\n<div class="PlainText elementToProof">the primary, then there's no reason to use load_balance_hosts=true.&nbsp;</div>\r\n</span></font></div>\r\n</body>\r\n</html>\r\n	> we can assume that one of members is a primary and others are secondary.\r\n\r\nWith plain Postgres this assumption is probably correct. But the main reason\r\nI'm interested in this patch was because I would like to be able to load\r\nbalance across the workers in a Citus cluster. These workers are all primaries.\r\nSimilar usage would likely be possible with BDR (bidirectional replication).\r\n\r\n> In this case user maybe add a primary host to top of the list,\r\n> so sorting may increase time durations for establishing connection.\r\n\r\nIf the user takes such care when building their host list, they could simply\r\nnot add the load_balance_hosts=true option to the connection string.\r\nIf you know there's only one primary in the list and you're looking for\r\nthe primary, then there's no reason to use load_balance_hosts=true.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Jelte Fennema", "Address": "Jelte.Fennema@microsoft.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["\\"kuroda.hayato@fujitsu.com\\" <kuroda.hayato@fujitsu.com>"], "Date": ["Fri, 15 Jul 2022 14:59:55 +0000"], "From": ["Jelte Fennema <Jelte.Fennema@microsoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Support load balancing in libpq"], "Arc-Seal": ["i=2; a=rsa-sha256; t=1657897212; cv=pass; d=google.com; s=arc-20160816; b=QM8pN4/Nac4H/XVU/uzM/jvFs8sSXUUboqrSwyct2G2gCGP5xiewvgbYMdv5KEPy0u gYzGKaGeSzSfG+0UHKzOEEu76vYqjFRt7/a7X1Bd+nvj+2skLJZjMv2+kZEmsHCuaEFk YQZeA3MVOT9BZTfQqguvLdgJNq6OU4K8ZGfhr0QVfAq1IzKYXMWhjiQiczP5Fg/3ok/v NvEW9X5PUXJG4kACBQThVF8Cf/az5RxnsfKNrEU6rd2/4CQEWGC3ZjRAmqBzBTti4LDs Dwwcwo9hiU5Hmj5OSg0pf5ZRDd5gLKSDOTIbie6zn5wyzUDFRbUxJ1/wKxra6NLjCwiv nhTA==", "i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none; b=NKFbkOLtZ1oBQNj5gLr8i4+aXsI3TsnoVwV5gxosFj9Na7se6TUN9LgON826QK5zM4/FpeqrQZgYEbdrwLYshLXftTi5WQiYAM24XwCsMewLdIL8vy/OFiw1aW860tEaa+d25DSlPEmFJhhXKHvuNOBKCXZDCLAPZ1W92N+zQG52tWnQ91TWV+qfthDhg1V4lO5bt1PXAdB364jeqc9nOcZOQjkRCg/n+mpjkDe9JbRrYO9Hh5QdHLF6IRGTsXzYu4qpB7d3S9oyWVb9/o4C/QQkvBjsJj5UM36KSERNcv8VNW9TtyEJRcWd7tTWu1ZlBEUl1ViMONSMuEuPUEtCwQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp156934jai; Fri, 15 Jul 2022 08:00:12 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id a204-20020a1f98d5000000b00357840ba58dsi917216vke.173.2022.07.15.08.00.12 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 08:00:12 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411219@lists.postgresql.org>) id 1oCMnb-000364-Ng for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 15:00:11 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <Jelte.Fennema@microsoft.com>) id 1oCMnW-0001XR-St for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 15:00:07 +0000", "from mail-eopbgr00124.outbound.protection.outlook.com ([40.107.0.124] helo=EUR02-AM5-obe.outbound.protection.outlook.com) by makus.postgresql.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <Jelte.Fennema@microsoft.com>) id 1oCMnP-00050E-TF for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 15:00:05 +0000", "from DB7PR83MB0284.EURPRD83.prod.outlook.com (2603:10a6:10:c::27) by AS1PR83MB0513.EURPRD83.prod.outlook.com (2603:10a6:20b:480::6) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.5458.9; Fri, 15 Jul 2022 14:59:55 +0000", "from DB7PR83MB0284.EURPRD83.prod.outlook.com ([fe80::f4a8:318c:5ed9:4d8]) by DB7PR83MB0284.EURPRD83.prod.outlook.com ([fe80::f4a8:318c:5ed9:4d8%11]) with mapi id 15.20.5458.004; Fri, 15 Jul 2022 14:59:55 +0000"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<DB7PR83MB0284A1221D88982A38B22310F78B9@DB7PR83MB0284.EURPRD83.prod.outlook.com>"], "Precedence": ["bulk"], "References": ["<PR3PR83MB04768E2FF04818EEB2179949F7A69@PR3PR83MB0476.EURPRD83.prod.outlook.com> <TYCPR01MB587039601D7796383CDA56C4F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "X-Received": ["by 2002:ac5:c346:0:b0:374:a4f8:4c5b with SMTP id l6-20020ac5c346000000b00374a4f84c5bmr5841892vkk.19.1657897212724; Fri, 15 Jul 2022 08:00:12 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/DB7PR83MB0284A1221D88982A38B22310F78B9%40DB7PR83MB0284.EURPRD83.prod.outlook.com>"], "In-Reply-To": ["<TYCPR01MB587039601D7796383CDA56C4F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"], "Msip_labels": ["MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_Enabled=true; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_SetDate=2022-07-15T04:31:26Z; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_Method=Standard; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_Name=FUJITSU-RESTRICTED?; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_SiteId=a19f121d-81e1-4858-a9d8-736e267fd4c7; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_ActionId=80400a62-1702-472f-ae81-9a5ad49235df; MSIP_Label_a7295cc1-d279-42ac-ab4d-3b0f4fece050_ContentBits=0;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Enabled=True;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_SiteId=72f988bf-86f1-41af-91ab-2d7cd011db47;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_SetDate=2022-07-15T14:59:51.961Z;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Name=General;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_ContentBits=0;MSIP_Label_f42aa342-8706-4288-bd11-ebb85995028c_Method=Standard;"], "Return-Path": ["<pgsql-hackers-owner+M79098-411219@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"_000_DB7PR83MB0284A1221D88982A38B22310F78B9DB7PR83MB0284EURP_\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411219@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Thread-Index": ["AQHYfODBRHgzyVNc+k6f9T2PtZMn861/DabwgACtnPw="], "Thread-Topic": ["Support load balancing in libpq"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=selector2; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=4TESc3dGil93rt0T3HBZpTsrbs2AH81fgCaQcH55u5s=; b=O+LuXV4hiMJ/vNd3pVM0g/ahNy6NQyj6fsa9QBYfVC/4p+Cd5n8AIpEhr5rEvRcOwiHpsa8TJgpEtf45heIXKsr2YUjwybaSQg8tkVm1gKQNctGDOXPAiAre7cJ38hCWLAFcfITdE8oJl01suO2WhBZ6ZI7zG9+HOJBP8/rmgr0="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Accept-Language": ["en-US"], "X-Ms-Has-Attach": [""], "X-Originatororg": ["microsoft.com"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1tewpBdL50gA2COme4hutKDt1/HeIaeqscYFawxhzOpvagQMm4r4CK2HhlkuRxZvvB5DEC3"], "X-Microsoft-Antispam": ["BCL:0;"], "X-Ms-Tnef-Correlator": [""], "Arc-Message-Signature": ["i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:mime-version:msip_labels :content-language:accept-language:in-reply-to:references:message-id :date:thread-index:thread-topic:subject:cc:to:from:dkim-signature; bh=4TESc3dGil93rt0T3HBZpTsrbs2AH81fgCaQcH55u5s=; b=kmgAh9y7rkGeXByob434veaxe/jnnZS01KgoV66o4704tuH/elEev/Jocv5+ryai5d ij1gr4cYZBN48mOm4KdYR4S7oxShZw25E9dlvbKc/EkqlWLsTEd5MTCRrFqDyf64ExHN CHsl9ZJIspL9nOHSFViV9FC/wsWEXDIFOXd28cBpqCqKXXy9kYtelriQJDtC7LZSe6O+ uozi9SxGjMc902uYXRigUj3PWv3oo6nQW88eav5jt+feLFy0pmZns6LiXKA4vGtrfgEH L8mjaRN14BQti1vXo0g+6nBKnpJhEdJxwTuPf47WhJ21brEZ7qm/DoLyzaXLv5l5LpVv EP4g==", "i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; s=arcselector9901; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1; bh=4TESc3dGil93rt0T3HBZpTsrbs2AH81fgCaQcH55u5s=; b=YLk9aBt1A6BWJBAjxxTmvmIgmRb+UujhHgw/rScjq3Xnnd3PCrl3CHsfW//DNbkY3vTPjoN3jnpiV7YLZpW8OxAXJIdgS3TMd5+DiDljvizt+uvj5gM+FL43KXiPTb4liZU2o/mCHnQTYrtY8ABjfjvr6dhU3nKwoHfSm+0URwy2Z1/JVrWhhySJdFGhs2HKIOjmq5dsrzdjAr5FwgeOJdg0LymlKl0AlF1FNWCSAIqfNYmeKaVRy+Lx8sNfunTFBY4RdybN6DcC1huAZ/HzGj+RmFUt4fypAqyUE2Q6yWGxBzka4tPn0ifln+Y/iIicrpkK28opiwr9sbLaczEneg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@microsoft.com header.s=selector2 header.b=O+LuXV4h; arc=pass (i=1 spf=pass spfdomain=microsoft.com dkim=pass dkdomain=microsoft.com dmarc=pass fromdomain=microsoft.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411219@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411219@lists.postgresql.org; dmarc=pass (p=REJECT sp=REJECT dis=NONE) header.from=microsoft.com", "dkim=none (message not signed) header.d=none;dmarc=none action=none header.from=microsoft.com;"], "X-Ms-Publictraffictype": ["Email"], "Arc-Authentication-Results": ["i=2; mx.google.com; dkim=pass header.i=@microsoft.com header.s=selector2 header.b=O+LuXV4h; arc=pass (i=1 spf=pass spfdomain=microsoft.com dkim=pass dkdomain=microsoft.com dmarc=pass fromdomain=microsoft.com); spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411219@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411219@lists.postgresql.org; dmarc=pass (p=REJECT sp=REJECT dis=NONE) header.from=microsoft.com", "i=1; mx.microsoft.com 1; spf=pass smtp.mailfrom=microsoft.com; dmarc=pass action=none header.from=microsoft.com; dkim=pass header.d=microsoft.com; arc=none"], "X-Ms-Traffictypediagnostic": ["AS1PR83MB0513:EE_"], "X-Forefront-Antispam-Report": ["CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:DB7PR83MB0284.EURPRD83.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230016)(4636009)(376002)(346002)(39860400002)(396003)(366004)(136003)(451199009)(478600001)(38100700002)(8936002)(52536014)(82950400001)(5660300002)(38070700005)(4744005)(82960400001)(33656002)(91956017)(6862004)(71200400001)(64756008)(66476007)(66946007)(4326008)(66556008)(66446008)(316002)(8676002)(76116006)(7696005)(8990500004)(86362001)(55016003)(10290500003)(26005)(6506007)(55236004)(9686003)(122000001)(2906002)(41300700001)(19627405001)(186003);DIR:OUT;SFP:1102;"], "X-Ms-Exchange-Senderadcheck": ["1"], "X-Ms-Exchange-Antispam-Relay": ["0"], "X-Ms-Exchange-Crosstenant-Id": ["72f988bf-86f1-41af-91ab-2d7cd011db47"], "X-Ms-Exchange-Crosstenant-Authas": ["Internal"], "X-Microsoft-Antispam-Message-Info": ["lHVoZxc97IHh/wtbh0tkKxHFGvqF9wyd+90VrIK0HwKOvEmz36FgmLtQDiecLR1HN31XFbDXv8UZP0uRWQ7EWoBO9D28C89zMTQmdhKansm77ACQq3/YoiVp5Ise/+jMjQfmBol4Eoo7bb7UnnfyfsWa6u2J5MXFq4AS77wKQ+c8WKAJRBcJZggjMELfj6rVbeemXk9+f2yN15Mcx8iuoIt0wdcuEPhRMEOSsSwSNZrimL14P3WHkpksxEjqRsLLN2SWOmPGr06DLEb0vAS623Jui7fZmS1OYyBx/DIYUucKuQd310uR95z4SZULAMJ9sHM5FeMwukiaoRGBB+ecfLv1tKM3CGM/3yrqQi59cyh6+GUVg4xYOofdqsZ7a9XFLQiHBNO/l9mWUXYw+SqrWuEgeNrAUJuhs58lnxj1h6drfFLiIwr6LbrQVJDt/Qa8JQOI8o0cAwA1hZV1e4cjXT6lsdqKjCZXLpNGbP3v5Tpnp/7pfkRePM4aeJu2C9yj4NFtlmoqe28YaoaSVIhz9suGx4SX87byJxFo+mc3JMPYVkdgJELArQ11P9vkuTYuTfC7C5HqFNqoUrawSLXQwR9SPe+MyoUnBaL1BnhP8qIV/mUBT3pOSvUHyBXYGL+uY5bQnjqDsVa2vGj8cGJP6mKDMjnd0uqHPJQYeQIdjdDDoP/UdS0zOVnEUjtF5C7kB7y0xoMowvbi1xBOWsRwAlPFs/fc/GWQhW8ZItYHgH4kwNq1QzI0EaOX1bIcGaxKCSzmfhzSxtydIU+tKGARTN5g3Ct9FRJy9SX5Uu0uMlWLM7z9Gfcc1i66JVqA5CJK7eWYewDXRTOd/+AOBvVISia8NRm4bMlOMI0qvnhGfmUycTw7elwfep+oKsMCi1FL"], "X-Ms-Exchange-Antispam-Messagedata-0": ["=?iso-8859-1?Q?hPi2Sm8vYzN+kS0nxoAYUvQDxqe7peNuUuhJMAHef+P9EU2COMtDBlpb1S?= =?iso-8859-1?Q?f6/UyJWDyhGEXgqVoNhzkbxQHFmYQxlZGu5K2/tp6AC3jXtbSOgxnH3Ujv?= =?iso-8859-1?Q?dl1od4MlgU8O+9RXPXsI5LAZS9ko5VsI22pqFIybQcIxZG+LIavrRtrJMW?= =?iso-8859-1?Q?Yi0JLvvqc51e2Z1Tgit5KKhl45u5+esc1BUuFT28Ex3JDYKAv54M8YmSUJ?= =?iso-8859-1?Q?HWFyUOT2cm1X5+fcGmvRaDzJY5Og3AySQV0o4XVqjmAPtYYKr8mKZZoT1F?= =?iso-8859-1?Q?tOIoeuKbiFtX4xa9ne99hC7xzz3EY05my/7ssYdqmBOnfL0xszG99L5Ojf?= =?iso-8859-1?Q?QtX88oVzhxfMq4ipkI5b1Y8gTzIOjHm+AJxy1sW8KQjJLCbRCRAJWtl0Ev?= =?iso-8859-1?Q?JBXfu0k2u++DcplQ79vD9da2L1X9DGrNCu0l4sjUmXLE+4fa3JvEVLOKWR?= =?iso-8859-1?Q?n/D6B40/RQttLwTI3GgMS1N9BM++9sNYwJ+JXdQ4TFzpqE0/fSOCNO/3Qg?= =?iso-8859-1?Q?iu+XMtUpoemwpZg9eerOETpapO0IBVeeiZlRhtZlaY+kPkY6EUA96cGYBX?= =?iso-8859-1?Q?jGdaCNaWJ0pw0585pQp26ERgXaVA7ZTFCmqHV/G3PpXtpLp7xs/sE21Iwj?= =?iso-8859-1?Q?7mmjZn7XneMMwvhLwrevRcdEpefbO/ogYzIDwERII88xxM2FP1EDnf+/rs?= =?iso-8859-1?Q?KAHBRHU6tP5vB9MuMn558zWCJhOJEI5EvHKzPAOQWpDTPB/IycvvkdVRGn?= =?iso-8859-1?Q?tgY3KQwdUl4H9Z6/ETar4JbINuLGShtRHWiFx2c1pFqwWNGCMOXzQpGg1m?= =?iso-8859-1?Q?0z7kUASyywpANIm7BklDoWo08LXVNGtPHsW2NqwdPaNDFvb0XkRPFCVdUh?= =?iso-8859-1?Q?k1iJVoVdhIBMEWOP5Cuk0e/1Xf2Ai1mJCuGikRjrgnQHloItCE8lvMy0KJ?= =?iso-8859-1?Q?Z3hFLn7eRBxR4Oyx8qwJOBUKxrf9t/DViuBS8jDRZur72r12+anJWpAnIZ?= =?iso-8859-1?Q?X7JWOgZ6NlImALSeug+RoJOGwwoPECFHNMrLJ34UUKsMqoTn/qiNJ7X2li?= =?iso-8859-1?Q?+L0fUKmggooyAbxtgBFI8aZWpHufJgDQ9QpTt83yNYNpfNFNvW1ruIOAw1?= =?iso-8859-1?Q?RBd0HTFuVIejoBfI92dCSXXLAJ8GP24qYG44MNFH+4K0e4G+UMCQ8ETZer?= =?iso-8859-1?Q?CzgCw6vUpvfZE3hQOQVYWR23y95ycTveL4r+TF8oH/fdFhwkVyK0ymXCY4?= =?iso-8859-1?Q?CK3vTi2FxOVedPOX+lymEQBwfwzMXeHqZF4cYpqNUEbR1eth5225Im7Mlv?= =?iso-8859-1?Q?GBtTyxHsks82A2NlEr3kUsq9S/VnpVG6XeK3px5pOKytKDGw+SyZctvOwI?= =?iso-8859-1?Q?TF6sM5hEu5HFKVw+jkvOD7aM4y3mQ/zuJUApY6BFXdexX8B/VxDlUjtIvy?= =?iso-8859-1?Q?144P64x1tOm+iNahnIgxZjAhKBECR8nIJhLvxqvvM70AVBWnFWJrK8N6QW?= =?iso-8859-1?Q?TRckmrrxLczH8RYPMks8KLtHAXqDybypk7CqP92dgg51twaOl8xF1fm6ge?= =?iso-8859-1?Q?zqPSRODVTNFvkfbd9WVKUGHSY3LIx6rhy0GNzzBbQ+kfZ8efAr135MR8JU?= =?iso-8859-1?Q?nyQ/jibKnV9ypYomAOGSfSUjs5TkVokR/o?="], "X-Ms-Exchange-Crosstenant-Authsource": ["DB7PR83MB0284.EURPRD83.prod.outlook.com"], "X-Ms-Exchange-Crosstenant-Mailboxtype": ["HOSTED"], "X-Ms-Office365-Filtering-Correlation-Id": ["27035da5-fe9c-48f8-da80-08da6672adda"], "X-Ms-Exchange-Crosstenant-Fromentityheader": ["Hosted"], "X-Ms-Exchange-Crosstenant-Userprincipalname": ["2KutowQsQ/SHWxqgqTBMHvQvORH+rJQRzQhKyiLl2MaZ8ZXyptryoSOMC64oIsV6vWkvYTLr+CvpPBZJLO5waQ=="], "X-Ms-Exchange-Crosstenant-Network-Message-Id": ["27035da5-fe9c-48f8-da80-08da6672adda"], "X-Ms-Exchange-Antispam-Messagedata-Chunkcount": ["1"], "X-Ms-Exchange-Crosstenant-Originalarrivaltime": ["15 Jul 2022 14:59:55.4983 (UTC)"], "X-Ms-Exchange-Transport-Crosstenantheadersstamped": ["AS1PR83MB0513"]}	["<TYCPR01MB587039601D7796383CDA56C4F58B9@TYCPR01MB5870.jpnprd01.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 15:56:41+00	tgl@sss.pgh.pa.us	Re: Adjust ndistinct for eqjoinsel	<3394045.1657900601@sss.pgh.pa.us>	[{"Name": "Zhenghua Lyu", "Address": "zlyu@vmware.com"}]	[{"Name": "pgsql-hackers@lists.postgresql.org", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	176	6461	[]		Zhenghua Lyu <zlyu@vmware.com> writes:\r\n>     I run TPC-DS benchmark for Postgres and find the join size estimation has several problems.\r\n>     For example, Ndistinct is key to join selectivity's estimation, this value does not take restrictions\r\n>     of the rel, I hit some cases in the function eqjoinsel, nd is much larger than vardata.rel->rows.\r\n\r\n>     Accurate estimation need good math model that considering dependency of join var and vars in restriction.\r\n>     But at least, indistinct should not be greater than the number of rows.\r\n\r\n>     See the attached patch to adjust nd in eqjoinsel.\r\n\r\nWe're very unlikely to accept this with no test case and no explanation\r\nof why it's not an overcorrection.  get_variable_numdistinct already\r\nclamps its result to rel->tuples, and I think that by using rel->rows\r\ninstead you are probably double-counting the selectivity of the rel's\r\nrestriction clauses.\r\n\r\nSee the sad history of commit 7f3eba30c, which did something\r\npretty close to this and eventually got almost entirely reverted\r\n(97930cf57, 0d3b231ee).  I'd be the first to agree that better\r\nestimates here would be great, but it's not as simple as it looks.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["\\"pgsql-hackers@lists.postgresql.org\\" <pgsql-hackers@lists.postgresql.org>"], "To": ["Zhenghua Lyu <zlyu@vmware.com>"], "Date": ["Fri, 15 Jul 2022 11:56:41 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Adjust ndistinct for eqjoinsel"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657900610; cv=none; d=google.com; s=arc-20160816; b=NQBU+evpVOHRVnomXb/AAJggAeAMvU4crI3Bpbq16qpnuj5+6nuYGY6NBtSYzqMvUD JTVuyDf1dxdWw0NU/R1Mqv7BxkC9J7+pnbNO9VcJw4sYeviX2pnqZz38ZSlaGSFkDh8A IjFH4gGWRWT/2nSUhYscYecsjjrBlAU4Hd/vczRmeVq5rtH71NpwjfeLp0YJ/OjNO5fa Audcs14wpLJ+emTzF/E6EdHyrSWnt7BEiDr4g9Gm1TfqX364id41g+60lbA8Xr+L3E9W oUdveTBeLlWtt4QDO1BWddezY+DTU6oqRapcm6iLetc/I5hQjNCyu1KuYtnmh544NoMF Njbw=="], "Comments": ["In-reply-to Zhenghua Lyu <zlyu@vmware.com> message dated \\"Fri, 15 Jul 2022 14:06:54 -0000\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp170169jai; Fri, 15 Jul 2022 08:56:50 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n11-20020a5d400b000000b0021d20e8d009si4633745wrp.48.2022.07.15.08.56.50 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 08:56:50 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411227@lists.postgresql.org>) id 1oCNgP-0006k3-Rr for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 15:56:49 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCNgL-0004mc-43 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 15:56:45 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCNgI-0005Va-Ca for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 15:56:43 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26FFuf9s3394046; Fri, 15 Jul 2022 11:56:41 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3394044.1657900601.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3394045.1657900601@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<CO6PR05MB750605D9F88AAFFB95658BABB58B9@CO6PR05MB7506.namprd05.prod.outlook.com>"], "X-Received": ["by 2002:a05:6000:783:b0:21d:a4b1:e1f7 with SMTP id bu3-20020a056000078300b0021da4b1e1f7mr13317657wrb.157.1657900610239; Fri, 15 Jul 2022 08:56:50 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3394045.1657900601%40sss.pgh.pa.us>"], "In-Reply-To": ["<CO6PR05MB750605D9F88AAFFB95658BABB58B9@CO6PR05MB7506.namprd05.prod.outlook.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411227@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411227@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1vN41bVbFEC1VNLn5po8vYzXL/ydLZyNhkZ3/D88PyxSJcaOu3Xqt+l60O7pMJjyV72Kr81"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-transfer-encoding:content-id:mime-version:comments :references:in-reply-to:subject:cc:to:from; bh=64XTBw9uPc2K6aDzTFGlfW/FHCtcOt9yOB/9w5QX914=; b=FBfuFKHgEfTgcLZbY1ylWmCj74T1ZKas2zojG/APUBj7hdIsjxe5OMMoPfhyZIwqZC hdFIDFM4gSzxjwLIX3FgLKBr5En/VwAigBKDqvFqrI6k0P6oo4Fqz0vtTpI2XBQ0TjFf cxQ5qcx6WUuMiDHEdaYQYCpLgZ80o7/yi92q6ixNzasL/1MW86sI0zbQMjAizXR5ueCn SJVkNOMR/GheV/x8nuqwfz3SvIYgIVpGhocO3wGQO281cxFo+A/DbowrtDTqetWLrf+x FV8E6u+StnJnx9HZLrvar83+jmemXdAbcRdEgm6rxVYX/Ak2ayUKtTxQ5mAyPg/zxWKv k8ww=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411227@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411227@lists.postgresql.org"], "Content-Transfer-Encoding": ["quoted-printable"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411227@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411227@lists.postgresql.org"]}	["<CO6PR05MB750605D9F88AAFFB95658BABB58B9@CO6PR05MB7506.namprd05.prod.outlook.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 16:34:17+00	peter.eisentraut@enterprisedb.com	Re: [PATCH] Log details for client certificate failures	<059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	179	9280	[]		On 14.07.22 23:09, Jacob Champion wrote:\r\n> On Thu, Jul 14, 2022 at 1:12 PM Peter Eisentraut\r\n> <peter.eisentraut@enterprisedb.com> wrote:\r\n>> Concretely, I was thinking like the attached top-up patch.\r\n>>\r\n>> The other way can surely be made to work somehow, but this seems much\r\n>> simpler and with fewer questions about the details.\r\n> \r\n> Ah, seeing it side-by-side helps. That's much easier, I agree.\r\n\r\nCommitted like that.\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Fri, 15 Jul 2022 18:34:17 +0200"], "From": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657902871; cv=none; d=google.com; s=arc-20160816; b=rPUdNRToD6tuaoVjm6wYv3vkFt3/SYtuYGSb57mhsW/qMYnYYrvPswDo3UhwJLG+x7 ubgcNW2PcY6dZvXnHQoUNS1ZnM5tB0xOf9RxUrfX0SY252d7NLsKH7exz5vfHWxFMCj+ j2CZP9U+iGYamK4QwwY6PesO8xZ0Rv9hl2vsgnkz5QbKrRVZpJ4vKnRQLRCMMmftFVXT 8U1Z+u3d7P1ZX4HJN90W/7JhTb2B676mXfovUQaNls/S0nV1MgQUMe6w90xYQQtB695I /xAoWe7zrVnI03tHaqrNT/aEGvnT/auH4XQDpPrTHAr7v6hS0dP97FOc5SXoTS2ubZrO RuFQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp179641jai; Fri, 15 Jul 2022 09:34:31 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id x6-20020a5d60c6000000b0021d7f7ea0a5si4670825wrt.571.2022.07.15.09.34.31 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 09:34:31 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411234@lists.postgresql.org>) id 1oCOGt-0003LI-7Q for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 16:34:31 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oCOGo-0001n0-Ls for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 16:34:26 +0000", "from wout2-smtp.messagingengine.com ([64.147.123.25]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <peter.eisentraut@enterprisedb.com>) id 1oCOGl-0005ls-MZ for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 16:34:25 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.west.internal (Postfix) with ESMTP id A02C13200A14; Fri, 15 Jul 2022 12:34:21 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 12:34:21 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 12:34:19 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<d13c4a5787c2a3f83705124f0391e0738c796751.camel@vmware.com> <cd03fa63-d4d9-8d3b-f9f5-13206a28d888@enterprisedb.com> <a922e857c4e4a073f219bc5005b862eb22255c20.camel@vmware.com> <290871e5-f1d9-54a8-5df4-dbd9e604c08d@enterprisedb.com> <7c0468dcadbc0d0c987daf9ca08c8d111948eae6.camel@vmware.com> <9b8338210b865d79239ec35ca523792ce331c0a3.camel@vmware.com> <c60a8948-00a0-147d-75df-62699193371f@enterprisedb.com> <CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com> <CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Me-Proxy": ["<xmx:C5fRYnIVzssJOf5Em_ZaZyVktbR6zj03EaAQf3yNu7J-BcUWTYIYRg> <xmx:C5fRYuJRX8s5c9SXCZvk_20vu1CsdE6EWSDIMR6Uzq83shnnJIB4DQ> <xmx:C5fRYoyFZTTrEIqWHBOn4WjvtqojXLedzkBB6D-hRaf5EcVHYG9www> <xmx:DZfRYrV2O_CTwizBWYjIjxcuH9J_GCaNkFV7UBA7rLQ2SB1GLunjew>"], "X-Received": ["by 2002:adf:e28a:0:b0:210:b31:722 with SMTP id v10-20020adfe28a000000b002100b310722mr13326184wri.65.1657902871589; Fri, 15 Jul 2022 09:34:31 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/059e67f5-3769-24c8-f460-4e5d87af529a%40enterprisedb.com>"], "Feedback-Id": ["i131946ab:Fastmail"], "In-Reply-To": ["<CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411234@lists.postgresql.org>"], "X-Me-Sender": ["<xms:C5fRYq6LSj4ZGwsNqHBzQu135WEMLsyEhcFizL1NhAqDPD-71yBjrw> <xme:C5fRYj7pmW8jyH_IFIdh9CSJ6wpAv0v7mqaKWmurY1OYwOqp-X5xvs3d72RSddK20 lnt5z-fPKdfLyYDGQ>"], "Content-Type": ["text/plain; charset=UTF-8; format=flowed"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411234@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:C5fRYpdbnowgwpuOIpXTi38I_Cxrnr6_uOZ5Utb5_GHPcvyzXcZXhPbLS5tiIeMrUqzTCHVS6iqjfSJwIQlc3FXKw-KKCC6V>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:references :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657902861; x= 1657989261; bh=lMOIv6kcE+yxzXn5yJMI9lD+4E7BAZvQbxvGLaHrJzc=; b=P +nEJ/w6f8EFdc0fKbt7I6XYK9R4KS0I0kIT/U3tLlOrVMUEjBw+ItSosChiMNlTs 6HWjmqG1fkrOm/JzNc8KY1XnrL/ZybxBkOJaKnVQ1zO5SIlilTHdHaGeLzZqvq8J +NCX+L1e8HeZOduDrro/dAuhFJUjxQ4zK6KWtYKKyai9Ct1x9YXMjCQwrllEm0Tc DE/JxWPVSh90CI9RAd9hyHBVRO4UTXFH4a7ngXlMAn9iJ+ZYvLeNSNTsbkbsPXOr XddxFkGM/VTbJl7mw93rYh7f478cxf3JfLRpkvNcFeIov1If4yqo3F7WFWSEgtYi 8GI1VtWEBxdSt9coDG+bQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddguddthecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpefkffggfgfuvfevfhfhjggtgfesthejredttdefjeenucfhrhhomheprfgv thgvrhcugfhishgvnhhtrhgruhhtuceophgvthgvrhdrvghishgvnhhtrhgruhhtsegvnh htvghrphhrihhsvggusgdrtghomheqnecuggftrfgrthhtvghrnhepheelffeggedujeet iefhleetuddvieffhfffvdejvdffgeejkeduleduheduieefnecuvehluhhsthgvrhfuih iivgeptdenucfrrghrrghmpehmrghilhhfrhhomhepphgvthgvrhdrvghishgvnhhtrhgr uhhtsegvnhhtvghrphhrihhsvggusgdrtghomh"], "X-Google-Smtp-Source": ["AGRyM1uy+MfI0juRfnqXzGExlAykxKc9zDCF8aft7SEBawPqShZOGLATA6/tuRbrkKlcO+X7CS3m"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :feedback-id:dkim-signature; bh=lMOIv6kcE+yxzXn5yJMI9lD+4E7BAZvQbxvGLaHrJzc=; b=tltFB7R/MNAntfbhJX5ou0Rpe/K6LSWkno/HTKLPxVl5zi5MS3UEUbw1eCFh5IqEaZ /jVydGaU+qcVuxLS4cN8aneZhzlvXt3M+BlG/nJwYcfWn2VqYjvy6jyf4uhVAxKudqXc 1zpe5U6r+ZpX+SkWdA61TKf4HAcVTec10wNXMeSumdnR8dnUopEQRgOpbnqSlcMqKYf9 Vv8uoPkBvyT2z+TCm/LGiSc9mPD/SdIbUZARDO439Fm3OsYwoGOHhV0CrBldcoiKHl4N JYtXLEEONcOSC8o3chvPMNPoORS1dyKOpI0Zfa7/dnMil95pH87KzA4tx1u0onIk7aUI l1Gg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"P+nEJ/w6\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411234@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411234@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=\\"P+nEJ/w6\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411234@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411234@lists.postgresql.org; dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 15:17:24+00	sfrost@snowman.net	Re: Add function to return backup_label and tablespace_map	<20220715151724.GC9030@tamriel.snowman.net>	[{"Name": "Fujii Masao", "Address": "masao.fujii@oss.nttdata.com"}]	[{"Name": "David Steele", "Address": "david@pgmasters.net"}, {"Name": "Julien Rouhaud", "Address": "rjuju123@gmail.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}]	\N	175	7409	[]		Greetings,\r\n\r\n* Fujii Masao (masao.fujii@oss.nttdata.com) wrote:\r\n> On 2022/07/08 23:11, David Steele wrote:\r\n> >Looks like I made that more complicated than it needed to be:\r\n> >\r\n> >select * from pg_backup_stop(...) \\gset\r\n> >\\pset tuples_only on\r\n> >\\pset format unaligned\r\n> >\\o /backup_path/backup_label\r\n> >select :'labelfile';\r\n> \r\n> Thanks! I had completely forgotten \\gset command.\r\n\r\nSeems like it might make sense to consider using a better format for\r\nthese files and also to allow us to more easily add things in the future\r\n(ending LSN, ending time, etc) for backup tools to be able to leverage.\r\nPerhaps we should change this to having just a single file returned,\r\ninstead of two, and use JSON for it, as a more general and extensible\r\nformat that we've already got code to work with..?\r\n\r\nThanks,\r\n\r\nStephen\r\n	[{"charset": "us-ascii", "part_id": "1", "disposition": "inline", "content_type": "text/plain"}]	\N	["\\\\Seen"]	[{"Name": "Stephen Frost", "Address": "sfrost@snowman.net"}]	{"Cc": ["David Steele <david@pgmasters.net>, Julien Rouhaud <rjuju123@gmail.com>, pgsql-hackers <pgsql-hackers@postgresql.org>, Nathan Bossart <nathandbossart@gmail.com>"], "To": ["Fujii Masao <masao.fujii@oss.nttdata.com>"], "Date": ["Fri, 15 Jul 2022 11:17:24 -0400"], "From": ["Stephen Frost <sfrost@snowman.net>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Add function to return backup_label and tablespace_map"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657898257; cv=none; d=google.com; s=arc-20160816; b=JSd//N7I/zRC1Au5QCyDX3xmdPynQPNzpqrkjU7BA1t6xoxJ4yFLGH/od+ej3Jtypp nz2dcNraauxM0KCrWZHMdi/LHrkkDvQidpPh8hYHSr8y3ceFEF8ChoxYE6GNma/5CfCV jq8xoQZHGfDczaZx09I8h3kA61qv+zNJjtvQ61w9VhfhwhmUxZW7ueVR1INPTnZb3cDd 2thkI+cYkgNWjKbApo3wnPNj9meHqlRS0WskbIYuJt4rDGUKVX+BzcM5n4z3R6AAb6kU V2G4cuDZy/nfkuW0Dbd5Oqhw2zwRwILpNnOp4h3o1t+wiDk+aHLe6k4A6MrnTRBpkv+C y/Ww=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp161618jai; Fri, 15 Jul 2022 08:17:38 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d3-20020adfef83000000b0021d4e786f00si4851116wro.108.2022.07.15.08.17.37 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 08:17:37 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411220@lists.postgresql.org>) id 1oCN4T-0003V1-GZ for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 15:17:37 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <sfrost@tamriel.snowman.net>) id 1oCN4O-0001v7-PJ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 15:17:32 +0000", "from tamriel.snowman.net ([70.109.60.50]) by makus.postgresql.org with esmtp (Exim 4.92) (envelope-from <sfrost@tamriel.snowman.net>) id 1oCN4H-0005EI-VF for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 15:17:31 +0000", "by tamriel.snowman.net (Postfix, from userid 1000) id 118215F7A2; Fri, 15 Jul 2022 11:17:25 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715151724.GC9030@tamriel.snowman.net>"], "Precedence": ["bulk"], "References": ["<38bd5ea4-0b06-5404-cccf-250a7649ddfb@oss.nttdata.com> <9f656d95-9fc7-3f33-bec7-1048cf780a32@pgmasters.net> <CAOBaU_Ztdn+bsB_OSx42HW_sDNxP4_2nCq0FU0Vb8ZJpN=dsvw@mail.gmail.com> <3fdc52de-7dd1-5683-de0e-34c40a8a794e@pgmasters.net> <69d88df8-8405-d3e7-d65c-bb260d6196ed@pgmasters.net> <11b9701b-84a3-94d1-5d1c-33931e845812@oss.nttdata.com>"], "User-Agent": ["Mutt/1.5.24 (2015-08-30)"], "X-Received": ["by 2002:a05:600c:35d6:b0:3a2:e873:6295 with SMTP id r22-20020a05600c35d600b003a2e8736295mr14481499wmq.22.1657898257840; Fri, 15 Jul 2022 08:17:37 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715151724.GC9030%40tamriel.snowman.net>"], "In-Reply-To": ["<11b9701b-84a3-94d1-5d1c-33931e845812@oss.nttdata.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411220@lists.postgresql.org>"], "Content-Type": ["multipart/signed; micalg=pgp-sha512; protocol=\\"application/pgp-signature\\"; boundary=\\"DYCP9ZX4RRtQiwKl\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411220@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sL/ylgrZ5qVqzADF38DW3gIkMWWGt+ORcdIDAO/6JWmbC7YsSSfTSVnmANIji5kbzAhH8o"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date; bh=G/ZOOavc6pjUuiUHD43+1v9QASjf2kK9jgCS2LDEtys=; b=Y5tTrma7E/2s1gc29CI1NY0jkZo3efq7GncG1IOG9L/4bf7Ya7SBubeNVGTU1DcarX l6VcdN0OpHlYoTlAhmPvqxfdUYvrYgSD/PsvxdISKEDC5XE6joNuKqHETRgwjRnP8xXc Eqyepsqles9dKXnJyMd116UWWGA3XhZuochOrShybSjxjG/EC+Ix3GnjU8Junu3kJZ6J amYGxI0ohtIW1BozV/7tQTNYuG/O1p4rtINvkPZZYDYezEKqHw2NOJ255vouqFsnu7/Z sryDnyk9srV3Mt57Z5hRyLe03/+HTxzZEAqPmEYz3OAVvelTOYfbGNKqNTNJNB9niqcj Cqzg=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411220@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411220@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411220@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411220@lists.postgresql.org"]}	["<11b9701b-84a3-94d1-5d1c-33931e845812@oss.nttdata.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 16:05:16+00	andres@anarazel.de	Re: [RFC] building postgres with meson -v9	<20220715160516.mhzzbplga5k6xypp@awork3.anarazel.de>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	178	10055	[]		Hi,\r\n\r\nOn 2022-07-13 08:39:45 +0200, Peter Eisentraut wrote:\r\n> On 06.07.22 15:21, Andres Freund wrote:\r\n> > > - This patch is for unifying the list of languages in NLS, as\r\n> > >    previously discussed:https://commitfest.postgresql.org/38/3737/\r\n> > There seems little downside to doing so, so ...\r\n> \r\n> This has been committed, so on the next rebase, the languages arguments can\r\n> be removed from the i18n.gettext() calls.\r\n\r\nThat's done in v10 I posted yesterday.\r\n\r\n\r\nOn 2022-07-06 11:03:31 +0200, Peter Eisentraut wrote:\r\n> 3bf5b317d5 meson: prereq: Specify output directory for psql sql help script.\r\n> 2e5ed807f8 meson: prereq: ecpg: add and use output directory argument for\r\n> parse.pl.\r\n> 4e7fab01c5 meson: prereq: msvc: explicit output file for pgflex.pl\r\n> cdcd3da4c4 meson: prereq: add output path arg in generate-lwlocknames.pl\r\n> 1f655486e4 meson: prereq: generate-errcodes.pl: accept output file\r\n> e834c48758 meson: prereq: unicode: allow to specify output directory.\r\n> \r\n> You said you are still finalizing these.  I think we can move ahead with\r\n> these once that is done.\r\n\r\nI tried to address the pending things in these patches.\r\n\r\n\r\n> 9f4a9b1749 meson: prereq: move snowball_create.sql creation into perl file.\r\n> \r\n> This looks ready, except I think it needs to be hooked into the\r\n> distprep target, since it's now a Perl script running at build time.\r\n\r\nDone. I vacillated between doing the distprep rule in\r\nsrc/backend/snowball/Makefile (as most things outside of the backend do) and\r\nsrc/backend/Makefile (most backend things). Ended up with doing it in\r\nsnowball/Makefile.\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 09:05:16 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [RFC] building postgres with meson -v9"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657901134; cv=none; d=google.com; s=arc-20160816; b=ik+HZc0vPg14x5u8kcG6Y78x5NeXozv8q3AwMYgl5nG29+UcJ2HL/U9W0nk0JP95I9 4wcI9DUBuJnpBJ9RBENnTWOiLAKq/3Hu+uniM97I2NsTwO7Zr9dObmPH7oAUMnkzHYSb pwVJMpqrEcdLwPLeL5kOh8H8+V6vQQm4OncGUIuAGGZS2Oz/RTOmdybZfP9dJ0Q3jv6M C2F5lbgN9XI2RovmG1ugl/wsCuD+T1EMLg1G6jqhBoHYKRLwJlpTLWzXTQlJRS+fawOP ZkSA18QnFdjjngXwSTspVKPNUQRrx8nAJQYzSzuYTB7RJA9AaCxmrrsx8RtXUCIlgFZF HMfQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp172413jai; Fri, 15 Jul 2022 09:05:34 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id h6-20020a056000000600b0021bc885d7c9si4687346wrx.848.2022.07.15.09.05.34 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 09:05:34 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411230@lists.postgresql.org>) id 1oCNos-0005dB-1y for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 16:05:34 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCNol-0003m1-Ns for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 16:05:29 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCNog-0000yo-4C for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 16:05:27 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.nyi.internal (Postfix) with ESMTP id DB8DD5C0112; Fri, 15 Jul 2022 12:05:18 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Fri, 15 Jul 2022 12:05:18 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 12:05:18 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715160516.mhzzbplga5k6xypp@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<20211012083721.hvixq4pnh2pixr3j@alap3.anarazel.de> <20220701093312.phiokhpoqaftuer5@alap3.anarazel.de> <0e81e45c-c9a5-e95b-2782-ab2dfec8bf57@enterprisedb.com>"], "X-Me-Proxy": ["<xmx:PpDRYlmyavyedgXr6oY3qfjoD0jyOTwZgO41xvvKe_NnlZ1AL45OwA> <xmx:PpDRYj2q-Sm-Y3pJERta0EN_E0t3JdxfSgGFbTmUUNtaXTpXyNZU6Q> <xmx:PpDRYkvmYoW0PZ7BQJ1srLsl3JTF2a_vrYvUAopRCucGifO_gQF1sA> <xmx:PpDRYg8CIxzOXo2s7Sw3kecDnK7qaUtnlIPV4iw-vHau1ZTsdMn_uw>"], "X-Received": ["by 2002:a5d:64c8:0:b0:21d:9873:bbf0 with SMTP id f8-20020a5d64c8000000b0021d9873bbf0mr13158846wri.150.1657901134361; Fri, 15 Jul 2022 09:05:34 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715160516.mhzzbplga5k6xypp%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<0e81e45c-c9a5-e95b-2782-ab2dfec8bf57@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411230@lists.postgresql.org>"], "X-Me-Sender": ["<xms:PpDRYlnkAw9tkn2eMupM3AMsvQCaCCQ1kTGhmOZBTzkLeJZUVgaLtg> <xme:PpDRYg1M0tt_9Cm38rEHyh46Z1QkRDVWqBJpdpnZVu3E4eL_tKoNYv0Mg-bcgiw0W HF3ZfLdlRH5UG72eA>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411230@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:PpDRYrpnOuLOB4QwPOV-DGp1cG776i_CcTuL0CDr0Phuq6eRx1wVo8FWIGg7uIw_75nP60uE3w9RsHlYbHAJR2KZNqJ2cS-Kk87Bngn7LBJ2nVZgEjta6xG0X8kR>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657901118; x=1657987518; bh=EPPYcwghzl 2paXr8prQDlSlgixXNG1j+dQRUDgNrHJ4=; b=hTIhPH4VLiGsEDqfWKWiXrZKaz CwpU8QZMCLb2IWL1iCC+BWisG2lwhH0HClD75wh7hGQZe7mynJx+AeVaV0umydpZ hRwLfGFHPVHfupR0pNbezZ0nXvzplB03ZaerqQgY0iKbP5iZS+5Kkmqpx5r1/yZ/ jJcYmg3oHrZcrFXUX4diVg4qpfdTRP7Qujm7eHPeXaZvWxENeJVndL7tD601Ox/G mBre0DV6AO1FMA5yV5JJLxz9m+INJ3YKGtr5XHucJzfyHD4smQ3fqSejCcAFoL5G 7LMGcC3BVcw76tSIz5emnNdQMkbUiT3wA7NdSzRZMFjm6Y4whv4IUDSSb7MQ==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657901118; x=1657987518; bh=EPPYcwghzl2paXr8prQDlSlgixXN G1j+dQRUDgNrHJ4=; b=zBcc78ncjj8GROOKlJeOzSplCuAPablCN1flT4tbW3Ul BVzckiqCmd6/fe26EqHTzWP724wncFPKEXvH0bOKV0hzb3NjaWLlgYTzCzC7Qboy bM7xeCzdkxPaBSkMzmF+3aAa2JK+JFnm8R4D1aYn4/gmdXNyFZ3aj/B9liG9ofgj u//qNKIfc5cUsMdaB3IFnp161T5NSX/C4UeBOx5oyLevJ8dUeOmsdluiYwdXRuZw kXPgICTC6ODPPx+mQOyIeboZQ83VnTn34zBwXzSaIfbxzrUaez1R7S9IyTUFaOHk zxU/1M3gNlWPcPYWNeYFq3Z0znTstb5mFQR09+ZWhA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgleelucetufdoteggodetrfdotf fvucfrrhhofhhilhgvmecuhfgrshhtofgrihhlpdfqfgfvpdfurfetoffkrfgpnffqhgen uceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmne cujfgurhepfffhvfevuffkfhggtggujgesthdtredttddtvdenucfhrhhomheptehnughr vghsucfhrhgvuhhnugcuoegrnhgurhgvshesrghnrghrrgiivghlrdguvgeqnecuggftrf grthhtvghrnhepveevieffveejtefggeffgfekueeiueekvdethfehieduheejleetjeek ieettdffnecuffhomhgrihhnpehpohhsthhgrhgvshhqlhdrohhrghenucevlhhushhtvg hrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhrohhmpegrnhgurhgvshesrghnrghr rgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1uINPMx3agbJW5KXp22Xbm02BFR/GVHm58dWlu4RjED5tCVVPlWZpQw9eVcDo6QOgWWO03/"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=EPPYcwghzl2paXr8prQDlSlgixXNG1j+dQRUDgNrHJ4=; b=v8Jb9mDdXlzyVx285hQ1bBIfbEqUB9TKsxpOTTJWK9yp2aPz30jBaInxRY4gESDDCP vSeP36L2TMu4NP8X3sDmSG1XD//h2AdZxPDBBLLaNOfdkJ2Gab8lrii7gPmql5HfCKtn LV5N01xka+UOTmeQQ2+5MpLaTWndB9GoheqLY2UL0RozMehKM2MOiAYI+jqfbCER9oNR j7Pf7B/XhvS5zfG2MsuF2D2eDZZLzIOhLk9OdrXM08TbH1CPAiEeROtRNg/fUOj90rnp RGUG8L64GJZdJa/3TdTZCJL9qUuWLGeJ3hyWCXJepOz11D1DugM2WhvN5MX3VJvBjrkf AXXQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=hTIhPH4V; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=zBcc78nc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411230@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411230@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=hTIhPH4V; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=zBcc78nc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411230@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411230@lists.postgresql.org"]}	["<0e81e45c-c9a5-e95b-2782-ab2dfec8bf57@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 15:59:41+00	melanieplageman@gmail.com	Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)	<CAAKRu_Ytbxqh4GtO0RENmKqhFzs6=AMpgMUn3zRMCt=wSnzrrQ@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Magnus Hagander", "Address": "magnus@hagander.net"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Lukas Fittl", "Address": "lukas@fittl.com"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	\N	177	15146	[]	<div dir="ltr"><div dir="ltr">I am consolidating the various naming points from this thread into one<br>email:<br><br>From Horiguchi-san:<br><br>&gt; A bit different thing, but I felt a little uneasy about some uses of<br>&gt; &quot;pgstat_io_ops&quot;. IOOp looks like a neighbouring word of IOPath. On the<br>&gt; other hand, actually iopath is used as an attribute of io_ops in many<br>&gt; places.¬† Couldn&#39;t we be more consistent about the relationship between<br>&gt; the names?<br>&gt;<br>&gt; IOOp ¬† -&gt; PgStat_IOOpType<br>&gt; IOPath -&gt; PgStat_IOPath<br>&gt; PgStat_IOOpCOonters -&gt; PgStat_IOCounters<br>&gt; PgStat_IOPathOps ¬† ¬†-&gt; PgStat_IO<br>&gt; pgstat_count_io_op ¬†-&gt; pgstat_count_io<br><br>So, because of the way the data structures contain arrays of each other<br>the naming was meant to specify all the information contained in the<br>data structure:<br><br>PgStat_IOOpCounters are all IOOp (I could see removing the word<br>&quot;counters&quot; from the name for more consistency)<br><br>PgStat_IOPathOps are all IOOp for all IOPath<br><br>PgStat_BackendIOPathOps are all IOOp for all IOPath for all BackendType<br><br>The downside of this naming is that, when choosing a local variable name<br>for all of the IOOp for all IOPath for a single BackendType,<br>&quot;backend_io_path_ops&quot; seems accurate but is actually confusing if the<br>type name for all IOOp for all IOPath for all BackendType is<br>PgStat_BackendIOPathOps.<br><br>I would be open to changing PgStat_BackendIOPathOps to PgStat_IO, but I<br>don&#39;t see how I could omit Path or Op from PgStat_IOPathOps without<br>making its meaning unclear.<br><br>I&#39;m not sure about the idea of prefixing the IOOp and IOPath enums with<br>Pg_Stat. I could see them being used outside of statistics (though they<br>are defined in pgstat.h) and could see myself using them in, for<br>example, calculations for the prefetcher.</div><div dir="ltr"><br></div><div>From Andres:</div><div><br></div><div>Quoting me (Melanie):<br></div><div dir="ltr">&gt; &gt; Introduce &quot;IOOp&quot;, an IO operation done by a backend, and &quot;IOPath&quot;, the<br>&gt; &gt; location or type of IO done by a backend. For example, the checkpointer<br>&gt; &gt; may write a shared buffer out. This would be counted as an IOOp write on<br>&gt; &gt; an IOPath IOPATH_SHARED by BackendType &quot;checkpointer&quot;.<br><br>&gt; I&#39;m still not 100% happy with IOPath - seems a bit too easy to confuse with<br>&gt; the file path. What about &#39;origin&#39;?<br><br>I can see the point about IOPATH.<br>I&#39;m not wild about origin mostly because of the number of O&#39;s given that<br>IO Operation already has two O&#39;s. It gets kind of hard to read when<br>using Pascal Case: IOOrigin and IOOp.<br>Also, it doesn&#39;t totally make sense for alloc. I could be convinced,<br>though.<br><br>IOSOURCE doesn&#39;t have the O problem but does still not make sense for<br>alloc. I also thought of IOSITE and IOVENUE.</div><div dir="ltr"><br></div><div dir="ltr">&gt; Annoying question: pg_stat_io vs pg_statio? I&#39;d not think of suggesting the<br>&gt; latter, except that we already have a bunch of views with that prefix.<br><br>As far as pg_stat_io vs pg_statio, they are the only stats views which<br>don&#39;t have an underscore between stat and the rest of the view name, so<br>perhaps we should move away from statio to stat_io going forward anyway.<br>I am imagining adding to them with other iostat type metrics once direct<br>IO is introduced, so they may well be changing soon anyway.<br><br></div><div>- Melanie<br></div></div>\r\n	I am consolidating the various naming points from this thread into one\r\nemail:\r\n\r\nFrom Horiguchi-san:\r\n\r\n> A bit different thing, but I felt a little uneasy about some uses of\r\n> "pgstat_io_ops". IOOp looks like a neighbouring word of IOPath. On the\r\n> other hand, actually iopath is used as an attribute of io_ops in many\r\n> places.  Couldn't we be more consistent about the relationship between\r\n> the names?\r\n>\r\n> IOOp   -> PgStat_IOOpType\r\n> IOPath -> PgStat_IOPath\r\n> PgStat_IOOpCOonters -> PgStat_IOCounters\r\n> PgStat_IOPathOps    -> PgStat_IO\r\n> pgstat_count_io_op  -> pgstat_count_io\r\n\r\nSo, because of the way the data structures contain arrays of each other\r\nthe naming was meant to specify all the information contained in the\r\ndata structure:\r\n\r\nPgStat_IOOpCounters are all IOOp (I could see removing the word\r\n"counters" from the name for more consistency)\r\n\r\nPgStat_IOPathOps are all IOOp for all IOPath\r\n\r\nPgStat_BackendIOPathOps are all IOOp for all IOPath for all BackendType\r\n\r\nThe downside of this naming is that, when choosing a local variable name\r\nfor all of the IOOp for all IOPath for a single BackendType,\r\n"backend_io_path_ops" seems accurate but is actually confusing if the\r\ntype name for all IOOp for all IOPath for all BackendType is\r\nPgStat_BackendIOPathOps.\r\n\r\nI would be open to changing PgStat_BackendIOPathOps to PgStat_IO, but I\r\ndon't see how I could omit Path or Op from PgStat_IOPathOps without\r\nmaking its meaning unclear.\r\n\r\nI'm not sure about the idea of prefixing the IOOp and IOPath enums with\r\nPg_Stat. I could see them being used outside of statistics (though they\r\nare defined in pgstat.h) and could see myself using them in, for\r\nexample, calculations for the prefetcher.\r\n\r\nFrom Andres:\r\n\r\nQuoting me (Melanie):\r\n> > Introduce "IOOp", an IO operation done by a backend, and "IOPath", the\r\n> > location or type of IO done by a backend. For example, the checkpointer\r\n> > may write a shared buffer out. This would be counted as an IOOp write on\r\n> > an IOPath IOPATH_SHARED by BackendType "checkpointer".\r\n\r\n> I'm still not 100% happy with IOPath - seems a bit too easy to confuse\r\nwith\r\n> the file path. What about 'origin'?\r\n\r\nI can see the point about IOPATH.\r\nI'm not wild about origin mostly because of the number of O's given that\r\nIO Operation already has two O's. It gets kind of hard to read when\r\nusing Pascal Case: IOOrigin and IOOp.\r\nAlso, it doesn't totally make sense for alloc. I could be convinced,\r\nthough.\r\n\r\nIOSOURCE doesn't have the O problem but does still not make sense for\r\nalloc. I also thought of IOSITE and IOVENUE.\r\n\r\n> Annoying question: pg_stat_io vs pg_statio? I'd not think of suggesting\r\nthe\r\n> latter, except that we already have a bunch of views with that prefix.\r\n\r\nAs far as pg_stat_io vs pg_statio, they are the only stats views which\r\ndon't have an underscore between stat and the rest of the view name, so\r\nperhaps we should move away from statio to stat_io going forward anyway.\r\nI am imagining adding to them with other iostat type metrics once direct\r\nIO is introduced, so they may well be changing soon anyway.\r\n\r\n- Melanie\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Melanie Plageman", "Address": "melanieplageman@gmail.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Magnus Hagander <magnus@hagander.net>, Pg Hackers <pgsql-hackers@postgresql.org>, Lukas Fittl <lukas@fittl.com>, Thomas Munro <thomas.munro@gmail.com>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 11:59:41 -0400"], "From": ["Melanie Plageman <melanieplageman@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657900803; cv=none; d=google.com; s=arc-20160816; b=s2mluPg5V0cjhPx2YlqpTv1b7fk2e5nJ/suuxK4K7CYsL3+A+9gR8NpInGB0YbV9Te EjQclA+Qq8y11XGdneW73da1VFVh/fByyiRue5wdCPV3GVJyDf0jFFDyWmQ3Gfk3uO7I j+vf22HNSeYPSBSEbbpImqsgBDiRmCCfS2UEuT9vcYtSw4zKhlDbbTsOv9hEPDf3/6PK Jubx4SCiCcPtCJjggF9LLjP2Lz89CcGMtC2fdEK//YRlrdmIhSuDcX/jU31rPwhXjqLP 5Jb2Ej/Kzd52xF8rIaV7N41X4z7RETqeDjttibzRJYYCNPqA5e4fUUJUwJQqoi/pP2ij 889A=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp170817jai; Fri, 15 Jul 2022 09:00:03 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g19-20020a67d493000000b00357195549a0si968989vsj.305.2022.07.15.09.00.03 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 09:00:03 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411229@lists.postgresql.org>) id 1oCNjW-00061F-6V for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 16:00:02 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oCNjR-0004QC-Ag for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 15:59:57 +0000", "from mail-wr1-x429.google.com ([2a00:1450:4864:20::429]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <melanieplageman@gmail.com>) id 1oCNjO-0005XP-9R for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 15:59:56 +0000", "by mail-wr1-x429.google.com with SMTP id a5so7281830wrx.12 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 08:59:54 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAAKRu_Ytbxqh4GtO0RENmKqhFzs6=AMpgMUn3zRMCt=wSnzrrQ@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAAKRu_bwAmyQ=3SfxG3Jb8rRUBjoMwJtT99D6gG5fqqLmVpCQA@mail.gmail.com> <20211216201837.fm73l7zixfjknttd@alap3.anarazel.de> <CAAKRu_ZKgdacVqLjjfpp6zAnd_Ks9vTqU3UOh-JkPWvWMJ6KEw@mail.gmail.com> <CAAKRu_Y2t8uOhMBU461foxJd_C0gTyND-wZzvE8d-FLFtJOksw@mail.gmail.com> <CAAKRu_YbiJxFiEUi_d_UW_DWc=rnP4vJmBNgUHmXPr5awfQPfA@mail.gmail.com> <CAAKRu_ZJkk1KUZS-KAaa3EZ2e1o2YD7w8-NF-po5dTHM7cF=Rg@mail.gmail.com> <20220322001505.fgysjvihvagduete@alap3.anarazel.de> <CAAKRu_Y_B9pLm1-b6A5CfRhuWEMMy2iMy1zNG0_3GhejD-ZsMg@mail.gmail.com> <20220706192047.sikr2vuwvpslqdrw@alap3.anarazel.de> <CAAKRu_YKc9e_=CZ4RB97Krx9TQb-zfNMoqdP45AYs5uZFqXeSA@mail.gmail.com> <20220712171810.7f2ppc45torgaavu@awork3.anarazel.de> <CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com>"], "X-Received": ["by 2002:ab0:7501:0:b0:368:97ec:fafa with SMTP id m1-20020ab07501000000b0036897ecfafamr5922871uap.5.1657900803259; Fri, 15 Jul 2022 09:00:03 -0700 (PDT)", "by 2002:adf:d1c4:0:b0:21d:76e1:bf2c with SMTP id b4-20020adfd1c4000000b0021d76e1bf2cmr13397564wrd.576.1657900792876; Fri, 15 Jul 2022 08:59:52 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAAKRu_Ytbxqh4GtO0RENmKqhFzs6%3DAMpgMUn3zRMCt%3DwSnzrrQ%40mail.gmail.com>"], "In-Reply-To": ["<CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411229@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000d511bd05e3da1bcf\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411229@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=x2xyfzMpCI20En2GseP8rwR+h7KmVCkQ+z48Ft+8qSg=; b=np+t8a8MYUIiIVa5tCuOntOyJAaNMo7mChEfVJGIsjU40i8vGiGGaueBUThsrtuvgN hva3Zj8zBmeJduUPd4D0RKEeMXMEuImJzNY7DfbHrRM90Q4Xx7zIbrcFIAsZW6qPChzm qpyXSxwQnkefOqzJ2rAqjPQc9uGoQ2AFa8HMwwz0heLMxVzxT074s3TcMFaB8sbbRg47 Ts715JPPe2fUv2JnR2tY+Jp8tU7nMnezG+cai2xHzZxXMMv2um4576PCk2PkKkVJRpjk XFtUpL2+eqqpE92TCFWNQzG09bA4/l7r9WpCXYxUOICUGkHI9jbohzCY6NizHk+PKBen wt8Q=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9fWZIpx24OQfhkBNysL3eZ2uzc54VW4yQebMHgmIgsFRN5id8U D4T8IXm2U/Mi5tpXWNdM0HCHbY68fu6NrlxKJFI="], "X-Google-Smtp-Source": ["AGRyM1u1ArVXnCQwCwq19cN/O2N2gy4wqsu94FuX8zTMz3u207jYToq3PGXNt2W7ET/TY0Gv+7mO"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=x2xyfzMpCI20En2GseP8rwR+h7KmVCkQ+z48Ft+8qSg=; b=xwQpMCM7/tGd7K9gD5r5I2wXrxDCnrYu4eSKK3xq5dlYxt09JNGPL9t8twd3gAIU9i amwOWCNYZB3r/ZSjz0cDnPWH765rdUIPbjvWjpgPauJMtec4dVFyjsqRCbQKRmOiGDOw /ZNHzqBLFfBYg6/DBHbSbumjdqKbOm/2SNcenUZO9z1byYdbYCMMf8OeZifODfnulxeA CrN0S436Xg5hSb9mhKypz6s4M3Hfp+NuCe8tVMgW1jyIGQOBSBYMwtQuvbjF0DAg4ouW nmCDAoJPyyCCP5PVBhFLICAvaEIaUTEWccRqSbjU/a0Z6D2yLk2HGo3XvAK82t5oXMMH 1jaA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=np+t8a8M; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411229@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411229@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=x2xyfzMpCI20En2GseP8rwR+h7KmVCkQ+z48Ft+8qSg=; b=0fzQohZx5WVdc0kfMNq72kDOPijP3RXtCVpGwCCjAY899BwtyQbVwW5XCRWDLi0WJT +UZKWZmmRQh0N+wWY2GwN9rLeLdpQcAgDmzfmgAL2+AlibOhC6HV4VcKd6ZnAqNpdwQJ bTnZGJa71IbKRYqjEot7INSlcYmLCin1hXpFZi8LZGUtXm4Sin144i7wAU86C/LGWlmO Ua2vcqj6wXwX0AQ258CTiOMM4W/xpmFQFh/l2JszrkwbodxuWM1sbAjDbyxCyjf8dKxZ nDWy6x8DV5oDk3LmiTS1+67NH+w+1RVsgJavGNGSv1irRcqgyVQHcekWTvcimfuQ6e6d +gcA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=np+t8a8M; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411229@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411229@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 16:46:40+00	jchampion@timescale.com	Re: [PATCH] Log details for client certificate failures	<0167a8c5-1754-9121-b994-0719a6493a21@timescale.com>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}]	[{"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	180	8653	[]		On 7/15/22 09:34, Peter Eisentraut wrote:\r\n> Committed like that.\r\n\r\nThanks for all the reviews!\r\n\r\n--Jacob\r\n\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	{"Cc": ["\\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>"], "Date": ["Fri, 15 Jul 2022 09:46:40 -0700"], "From": ["Jacob Champion <jchampion@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657903615; cv=none; d=google.com; s=arc-20160816; b=0fH3Lrm7dLYCbTF3giVO6+C1z4EW0snezcx4LtTc5mdIVbrk2XU6eDmrEKTQAC2zIq d8mQcFpHwzZouPrehlEtzBD2O7h8ybnk40OBwWiYh03KY3MZap6aD3itwLh6px8WDRgg yzhURk7BDNbR1981mVakLzcaFZRhWgepgxw+A0mkV/oUAnkWbn3k4VwJKYyHEZLWizP1 2QRz+5COClA+5oEYUkd4bh8m0HCrETwfjx33zCBZ8JJOLDsS48XFMo3sV7wGMqDl5ycq akzAJlE8ShK1L8pfZykV5WtgH7GOEe20MCnE/FkUbt8ocEOHqRw2/DelO7Mb68yAxYsQ cedg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp182335jai; Fri, 15 Jul 2022 09:46:55 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id m43-20020ab05a6e000000b003828727733dsi1101955uad.178.2022.07.15.09.46.55 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 09:46:55 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411235@lists.postgresql.org>) id 1oCOSs-00033X-H3 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 16:46:54 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCOSn-0001UR-T8 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 16:46:49 +0000", "from mail-pl1-x635.google.com ([2607:f8b0:4864:20::635]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCOSh-0005rM-7l for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 16:46:48 +0000", "by mail-pl1-x635.google.com with SMTP id v21so3659037plo.0 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 09:46:43 -0700 (PDT)", "from [192.168.1.21] ([50.39.205.221]) by smtp.gmail.com with ESMTPSA id i8-20020a17090332c800b0016c0408932dsm3837669plr.129.2022.07.15.09.46.41 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128); Fri, 15 Jul 2022 09:46:41 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<0167a8c5-1754-9121-b994-0719a6493a21@timescale.com>"], "Precedence": ["bulk"], "References": ["<d13c4a5787c2a3f83705124f0391e0738c796751.camel@vmware.com> <cd03fa63-d4d9-8d3b-f9f5-13206a28d888@enterprisedb.com> <a922e857c4e4a073f219bc5005b862eb22255c20.camel@vmware.com> <290871e5-f1d9-54a8-5df4-dbd9e604c08d@enterprisedb.com> <7c0468dcadbc0d0c987daf9ca08c8d111948eae6.camel@vmware.com> <9b8338210b865d79239ec35ca523792ce331c0a3.camel@vmware.com> <c60a8948-00a0-147d-75df-62699193371f@enterprisedb.com> <CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com> <CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com> <059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:6102:14a1:b0:357:6f1d:ec1c with SMTP id d33-20020a05610214a100b003576f1dec1cmr6111629vsv.23.1657903615394; Fri, 15 Jul 2022 09:46:55 -0700 (PDT)", "by 2002:a17:902:f683:b0:16c:3752:e332 with SMTP id l3-20020a170902f68300b0016c3752e332mr14494673plg.18.1657903602169; Fri, 15 Jul 2022 09:46:42 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/0167a8c5-1754-9121-b994-0719a6493a21%40timescale.com>"], "In-Reply-To": ["<059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411235@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411235@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=message-id:date:mime-version:user-agent:subject:content-language:to :cc:references:from:in-reply-to:content-transfer-encoding; bh=z+VV0lasKqJAmdz6BrajGs3/yxBvOgTyk36/oncn2JI=; b=YtMAnRXhG45Kp7OeKuDoL7J3reqXM7r108u5oJzlcWuM5oOhGbHr6kYPuafUuxur60 KTd7A49k4cmP/dtj6k/M3X2fidOSVwgpxwzXVLcGL8pcidFPVTpz8RdybUJX33z0wItC Cubfya/kzpmlMHIizRrMqN+uKuhGioY4T50yLBXmZZ7MhDeBsgpVo0Hfvt9//6/oB82c LApgG7GM0SKaokTCyBcCG/e8ex7Tk8s5pWZe5WW4a/tih7tb/VuaJzPIWMUOCl7nd6y7 lUoa9z9CoPdDAeoPtIXpK+zsxZluGTTd61GjobSboMGnxT+OxnXbGNvuT2FyMlU63vK7 tZxA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+pQo0SpGTFnEaMYz0lh41YpGGyIls8iyTkyifhUns6IrdVQM/S uI9p+z9VxJMMgGpErY2DONdmKw=="], "X-Google-Smtp-Source": ["AGRyM1uDfW7NfX0NHimRPv3H7dFsSmhs8Ixhm6F8ttyaBbExXBlFIyrzEdRmTrZik1TU1Zlxc4/9"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=z+VV0lasKqJAmdz6BrajGs3/yxBvOgTyk36/oncn2JI=; b=xw2k+xGmY6saYSiajNbHFMDxjdBw0wQscQd4CikVKGdvmK/SROOUUQNHVl1VmPafXF p0PNF5D29wT+6MnzuObnZhi7LR46yZK3b90gtRh+9ZiyXBm5wcUOAc6wa5/mk5y3/Dcl QoHdomlt/0oqSpHdNIMqtJKJtkOCnJ5Q/mvf0ItLQTHXteTwXR1U0jlfiO5GKjUAGkg+ K2RnnLaGEh4JZW3JGgBPXgTaeF3VCcfAL5GiWM9nrYBD5/DYXXBWwDC50nNydCYqOtr7 qJYoT78L55+9cgtmgBEwBNkT94aPq0gZfGKt/qrfor+roIRL1eyNDGXnROeQp7RjsPmK b5CQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=YtMAnRXh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411235@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411235@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:message-id:date:mime-version:user-agent:subject :content-language:to:cc:references:from:in-reply-to :content-transfer-encoding; bh=z+VV0lasKqJAmdz6BrajGs3/yxBvOgTyk36/oncn2JI=; b=Zht+wSF4Rv1GkWzidaOB13MZMfqFJQ1F7EfPOw2LodLO1QLmFkBjDvfzZ/JA6M/1Am LCdngUO33kuW9n21jM+2RQwDVs877q4NRaqIepWZsM6TzkJUsW0DxZg4nQ5Fa/fBrDCU vik/wDvKuodTfiJgrvqmDOowxohbHXvodDxOQjVx3LFRGfl6/v+DEif6u4V8Zvo7lRCu sYC9Y8NMyPU6TkCk0JN9bcHquKsiw19Xd7eW+aTepFPl2lqPH5pjbvTYHJrugvYnUyge X8eBwmFQK9x3LtiO8aowzhRY5hLtgWfzRkZyn4soxQZYJ+MCd5ycCTb8BndQIgZwmnBs KQUA=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=YtMAnRXh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411235@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411235@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:20:16+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-E5N6x9p0pgxG7bZziycOBP5pKyk0GqvRu5mbWpLLcuDg@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	181	8558	[]		On Fri, 15 Jul 2022 at 15:03, Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n>\r\n> Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> > Ah, one theory is that the libpq_pipeline program is getting linked to\r\n> > an installed version of libpq that doesn't contain the fixes.  Maybe you\r\n> > can do `ldd /path/to/libpq_pipeline` and see which copy of libpq.so it\r\n> > is picking up?\r\n>\r\n> That's pronounced "otool -L" on macOS.  But in any case, it's going\r\n> to point at the installation directory.  One of the moving parts here\r\n> is that "make check" will try to override the rpath that otool tells\r\n> you about to make test programs use the libpq.dylib from the build tree.\r\n> I say "try" because if you've got SIP enabled (see what "csrutil status"\r\n> tells you), it will fail to do so and the installed libpq will be used.\r\n> Maybe that's old.\r\n>\r\n> Standard recommendation on macOS with SIP on is to always do "make\r\n> install" before "make check".\r\n\r\nThanks, will investigate.\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Michael Paquier <michael@paquier.xyz>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 18:20:16 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657905640; cv=none; d=google.com; s=arc-20160816; b=gZkBarpFq5uGH1HBjNZrg0a+WVPPBqaotDxgpZo/h2BdnpM0+0W9mJ5uc4/xh5cwy/ Bz7pGRuQ2KYpUb3GcoOaXEM/JQ/mmA1EAPFZUQt2VQyr6KB0vuCIENToZyHgNgOG6cT4 6n/HnlOKi1wO++D6XTtyazkqEF4rjMcrdZLGIKj6UcrZpZIwB2uRVylMtZ1QfKa1UIIw 2zfSsL7wMI9/mRj0F/W5gAq8zZjDb0VCrinaRyRwPPAxGG2h6Icub4YyaZFaXtT/RHQR usytiuvGf6EMVSg5qfjvAMaD9MFK8euR2VsIRBDJ8Ss8kQUUGzehx9Hl7Hw8BgYNveHC fxSw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp189587jai; Fri, 15 Jul 2022 10:20:40 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id y15-20020a5d614f000000b0021d8b67a3e1si4683883wrt.1036.2022.07.15.10.20.40 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:20:40 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411236@lists.postgresql.org>) id 1oCOzY-0000Kh-3D for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:20:40 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCOzS-0006Zt-PB for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:20:35 +0000", "from mail-oa1-x2f.google.com ([2001:4860:4864:20::2f]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCOzL-00067Y-Qd for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:20:33 +0000", "by mail-oa1-x2f.google.com with SMTP id 586e51a60fabf-10c0119dd16so7387000fac.6 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 10:20:27 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-E5N6x9p0pgxG7bZziycOBP5pKyk0GqvRu5mbWpLLcuDg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220715130334.p2qe6nefuod7ncex@alvherre.pgsql> <3370903.1657893804@sss.pgh.pa.us>"], "X-Received": ["by 2002:adf:f245:0:b0:21d:a39a:bed5 with SMTP id b5-20020adff245000000b0021da39abed5mr13142950wrp.508.1657905640644; Fri, 15 Jul 2022 10:20:40 -0700 (PDT)", "by 2002:a05:6870:40c3:b0:10c:ca90:b13c with SMTP id l3-20020a05687040c300b0010cca90b13cmr8610257oal.253.1657905626910; Fri, 15 Jul 2022 10:20:26 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-E5N6x9p0pgxG7bZziycOBP5pKyk0GqvRu5mbWpLLcuDg%40mail.gmail.com>"], "In-Reply-To": ["<3370903.1657893804@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411236@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411236@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=AFVxU1Mb3zwGyI6u7TQjvE0e8AG+93DkDy5itocGyi8=; b=UV6QFfzhI4S5CrtfOnXcZstjkqzo+ieVtrjpkM2ympTJUbHrv8YefrJKJaJTPCNNfL kFHO7USk7OSEEBXBQjXZxDh6ccUaIBqTCG7PNn5mQctQNKp+9z9RQhdzMvQSH4zVRry7 4stPigxnjwyW0RhH7Cza04AOixBy5tS8JDLDCYiSD7/YGNQJuCZrOGR2PCw15LqnXMXr hOVzCS6W1GsldCFilR1o4bQiK/j7VlPEORZZV+u44ORfU92oXALSdgBnJVK795FKLcMV gmz5PLtS066+hCAIF6TBrMvIJG+cb2rfr1PK+DSpwfNajezpCoOokeDG07waWANG6XGu RnKA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora/mgNm8oCdFPg3g0Lb3EYe9PmL3mgdvkEnuI7p/ON+/J1TveaN/ 2FlBczZt79LcpknydIAvFL7xGbmNoMgSG4jDcF31XZ/QX4YcD6Jkb4xE5AhbeSr1qAVI7v3zuzu bhpXEoHyiztYVczprUPMrTBEXvVNAlXLMudXjXx0gBOgEWJIsOrW+pF2+hBB8yTr7Zpf8U8yVbO 4rk61Dq9d1ncFkRNWjCp4lDl8Kox7hJlOYf8XWY3ozIi++TmNQkElD"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1svA8RhT/nJBjxlJeIiZ8j551pnJPoN3xO7GxvwqF/+DfUQdolO9qZp8UPhlpTa+CPVUpUA"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=AFVxU1Mb3zwGyI6u7TQjvE0e8AG+93DkDy5itocGyi8=; b=o4ypu4HfsGulzw31qIRWodslx11qnwC/+EM+7Kbwmn9qj93kw4dAOurt0l+0HSxdH3 NT7Dk+PPSAWxY9kuycTSbpFJZ3Nxb3YmgC18h4LFiFN38HyHtvCxreOVD08tFcggrRa3 1guSedJ7sQaWp6/7suQTOHz9HnE6MXQkx++pJQrneHkyojo49O2k1om82Crbsotqo1pn 3dPSn0JjtYzCL8rgxu4WBoDezku7YVqhpMLJUZlVUAyirRsQG7RlHcfrzXA6NV4k3aH5 ZQVmh3aaxX66o3qbQJKe3PSLTIesFTPrEVf9omVAI3CajhqdXkx6nCskbFWL6pGnTzyy uo6Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=UV6QFfzh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411236@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411236@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=AFVxU1Mb3zwGyI6u7TQjvE0e8AG+93DkDy5itocGyi8=; b=jcWBSFnIPRr9NCbbuRYkzPKe3WBu6R2Hn8y+Un7c/UZcGj8VkvJR+qfDEHZN3k+fs7 y1cBM49j1Q/so02nqCX/vJT9zjPr3zJAFeHBJgVcSpTar5m7KZKP6wEpsUR/FVOkpWkR vgG7hQ4ez0MJOpYDYkvNAgv5emHLOGSS3JNmgwR6sXkQ8+hkjDhrGYpGGAegq34W1GPy CwqzlcFiMQ0LKWSEXEDh9UrG0LOJGaF8fxoH2N11+rYKfn3wjTudetk70FvM5J5Mzi5I C3lTTNeob8Xqb4ztSVBuhlJqumFQeQ4jexMQahYfzoTrvZ1YUtvtOuVntwROXKOgBVCb qh8Q=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=UV6QFfzh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411236@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411236@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<3370903.1657893804@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:21:22+00	simon.riggs@enterprisedb.com	Re: Allowing REINDEX to have an optional name	<CANbhV-GzM_KukbDm6qWFRfpkv==uDjXOOU-KMHqRz71ojce_rg@mail.gmail.com>	[{"Name": "Michael Paquier", "Address": "michael@paquier.xyz"}]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Bernd Helmle", "Address": "mailings@oopsware.de"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat.oss@gmail.com"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Ashutosh Bapat", "Address": "ashutosh.bapat@enterprisedb.com"}]	\N	182	9047	[]		On Fri, 15 Jul 2022 at 12:25, Simon Riggs <simon.riggs@enterprisedb.com> wrote:\r\n>\r\n> On Mon, 4 Jul 2022 at 08:00, Michael Paquier <michael@paquier.xyz> wrote:\r\n> >\r\n> > On Sun, Jul 03, 2022 at 05:41:31PM -0400, Tom Lane wrote:\r\n> > > This is marked as Ready for Committer, but that seems unduly\r\n> > > optimistic.\r\n> >\r\n> > Please note that patch authors should not switch a patch as RfC by\r\n> > themselves.  This is something that a reviewer should do.\r\n> >\r\n> > > The cfbot shows that it's failing on all platforms ---\r\n> > > and not in the same way on each, suggesting there are multiple\r\n> > > problems.\r\n> >\r\n> > A wild guess is that this comes from the patch that manipulates\r\n> > get_database_name(), something that there is no need for as long as\r\n> > the routine is called once in ReindexMultipleTables().\r\n>\r\n> OK, let me repost the new patch and see if CFbot likes that better.\r\n>\r\n> This includes Michael's other requested changes for reindexdb.\r\n\r\nThat's fixed it on the CFbot. Over to you, Michael. Thanks.\r\n\r\n-- \r\nSimon Riggs                http://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Simon Riggs", "Address": "simon.riggs@enterprisedb.com"}]	{"Cc": ["Tom Lane <tgl@sss.pgh.pa.us>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Bernd Helmle <mailings@oopsware.de>, Ashutosh Bapat <ashutosh.bapat.oss@gmail.com>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>, Ashutosh Bapat <ashutosh.bapat@enterprisedb.com>"], "To": ["Michael Paquier <michael@paquier.xyz>"], "Date": ["Fri, 15 Jul 2022 18:21:22 +0100"], "From": ["Simon Riggs <simon.riggs@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Allowing REINDEX to have an optional name"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657905703; cv=none; d=google.com; s=arc-20160816; b=I3lS0HbxKcMGRuFEGr23PQfUrKK/T8jCB7YC1uDJKFvJCbB1F1ALQIM6KiOh4xWcQ5 hfb8cu3ENDrm38RS9KWKRRcBpfLK8z/qr56FYxFl+BuH3vY6lBzdluef6UT/FlBgWXS2 vYgHx/U56tTKWGhjzt24pu7oimC1BRVM1tN2x8iIGu+t1LMn5BJKcgdP8Vj15edo+SDm f/lxw1WxJXwKTh+ZjHFIFcJLdvGC9SVfVOJiilrdDHN4arAYWjQu7Xog2vS+8rAFqfWw I5Gwpf5fXJ59g4izZWDIebZssdvQKTGOrwQ3V03NR+/WZviZBkDB5qU14ToVQBsPPJkE qLpg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp189804jai; Fri, 15 Jul 2022 10:21:43 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id j1-20020a056000124100b0021d708e4a16si5115803wrx.154.2022.07.15.10.21.43 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:21:43 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411237@lists.postgresql.org>) id 1oCP0Z-0005zJ-3F for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:21:43 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCP0U-0004Ap-A7 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:21:38 +0000", "from mail-oa1-x31.google.com ([2001:4860:4864:20::31]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <simon.riggs@enterprisedb.com>) id 1oCP0R-0001br-GK for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:21:37 +0000", "by mail-oa1-x31.google.com with SMTP id 586e51a60fabf-10c0430e27dso7408797fac.4 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 10:21:35 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CANbhV-GzM_KukbDm6qWFRfpkv==uDjXOOU-KMHqRz71ojce_rg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<YpYFeT4BYZowbFUM@paquier.xyz> <202205311230.5dc4ztvncsck@alvherre.pgsql> <Ypf+GU4zhvRTirJ1@paquier.xyz> <CANbhV-E_qSxF4JHdswaKcaG_Mo25h5WyXBPYWyZ0+=Mc-QxczQ@mail.gmail.com> <CANbhV-EmOh-XTssH5TwannC2S1VDN5zK-b+oZKs8UdyUtc2oUw@mail.gmail.com> <YrvWoAsaX/gUG2re@paquier.xyz> <CANbhV-EL4+RK49Qmk66zFmTiEEhT6TKia0ow_t5zogV1-FfAEw@mail.gmail.com> <1386216.1656884491@sss.pgh.pa.us> <YsKP6wJ0+XvF+6/8@paquier.xyz> <CANbhV-H2Y=jM1QVRkT-OOa2+KPTd3po+=2LmZ35DmTidjRovGg@mail.gmail.com>"], "X-Received": ["by 2002:a05:6000:15c3:b0:21d:9f5a:df83 with SMTP id y3-20020a05600015c300b0021d9f5adf83mr13697922wry.360.1657905703396; Fri, 15 Jul 2022 10:21:43 -0700 (PDT)", "by 2002:a54:4f01:0:b0:32e:726c:bced with SMTP id e1-20020a544f01000000b0032e726cbcedmr8067175oiy.253.1657905693417; Fri, 15 Jul 2022 10:21:33 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CANbhV-GzM_KukbDm6qWFRfpkv%3D%3DuDjXOOU-KMHqRz71ojce_rg%40mail.gmail.com>"], "In-Reply-To": ["<CANbhV-H2Y=jM1QVRkT-OOa2+KPTd3po+=2LmZ35DmTidjRovGg@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411237@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411237@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=D+3lvDS7ph1SAA44rr5PdpjvY3uL3lTQu7gIDey3jCg=; b=jFBuZVSOS5MlKKfHHsa6CcYSuPsdI2xuj8IExiy4PZcxWPvnSx2PnOzXcMaDWoFA0z 6TWQSRKlqY1tlwbXV/VX5eIVUHYws9q0UeOIGb21TbY/AYrwvR9RD0Gi+GrNAx/e6Tb+ sNdEy8mqpkvyY0NRKyUfMnSr8qqEukvXOoTAz0gCoudw09vuHem1Q0wIe/mM1/xgU/6v mUQFqKU6SQzqbA8h4+7PbXzudCJoLqv76GokMAKOhKJhmtKUS2FmvwHqNABOFueTwDL2 wBBNMnRuZb3GYOim/tdJCD9Aqspk3beww/3aCNx0CmgyIJfqGUa0HVtiCDD/XwbK4yPc 8sPA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+pj+YfU1ffzjEA+sFkBcKOPseY9ooLr67WtHL6vhhynz96YMAq 1wNivASspjD+bUDZf+lIVM/9psnQp4TwWIXlQVOSJJVdj8db4XqEYzP3VkT9QFT2g/b9He36AOu Ou5lFtr1cxZfeMhJOD11MgMEgRC1FoUk2WwRyEai3+0DBVUiTcREe2qyAgHldXN/fflv/7f8XZC jv0PWUdsQCCQd0liRfWDZuHxxm45g1MolvRmB6Vdzhdo1tD5ZDAnaj"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1vtxlAFPLDAeU+ExI4W6o3g4yISeyZowsIbSY0Oiv91gT1zZsgKWmRwFEwBHL5KzDoYjV90"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=D+3lvDS7ph1SAA44rr5PdpjvY3uL3lTQu7gIDey3jCg=; b=sxE2gapBCQO0QZt+PhYXfS/ETKFJiKGzAFIvECavknqLGtu9s8Z/nnqJ4NFGmJmsBc 4/j7AhuOH40fM0sNXGlcMvtkYhK1gcisTKw0HKroxUJRJrRHrA/lcWMtKx3tke5CWt8Y 06XtjIwsHXls8ukMQ2W8Nn1HZ7TMXVbC7AXEmiEKdUYYx4PEkTNaXoj+9kYZifuihLba K6l0MfZNySRABZrcdvgfnHTr+G810+N0LbhdipJp2/3OnW6HSC7HpTuWlZYvVTSWyIpu jE06u6J60pdDckcZY3iOZsMM7Rxmjp31CxV00qnpmdYZn+qyzJfz27WVAsbqqor+KRYn MGCA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=jFBuZVSO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411237@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411237@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=D+3lvDS7ph1SAA44rr5PdpjvY3uL3lTQu7gIDey3jCg=; b=bvcnIng1O7K2/4mB33NLIYZR5NSdRq3NVWyx8kXwnN71vrswlbnjZB1UMn9GxBFetU xjlnUAeoANW42PS+pFYzc6Sy+EmLx2GJoTU2doyCjVoHzUvj8wJzNGRxcKCnf7PzDdDl 9wNbLwtPklbysUqnH7rb+z47Mne0DIzzCaw3eTPCH1E+GPtIlpgmqZMb+leACbMv50UQ rwBRODg6q7MJ2tiDh1wdDlBLYcmYb+a0lx/sNHeBhJCJMRbK+EoOH1eZu5elBTwzAt51 XMxEYXwDqTdU6SHmVvXUzbzC48IKQi3x0E5mFN0Qh9MJhRyK5BOE2q8LEXsCTCVqze1w zHwQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=jFBuZVSO; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411237@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411237@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CANbhV-H2Y=jM1QVRkT-OOa2+KPTd3po+=2LmZ35DmTidjRovGg@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:29:38+00	andres@anarazel.de	interrupt processing during FATAL processing	<20220715172938.t7uivghdx5vj36cn@awork3.anarazel.de>	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	\N	\N	183	11035	[]		Hi,\r\n\r\nOne of the problems we found ([1]) when looking at spurious failures of the\r\nrecovery conflict test ([2]) is that a single backend can FATAL out multiple\r\ntimes.  That seems independent enough from that thread that I thought it best\r\nto raise separately.\r\n\r\nThe problem is that during the course of FATAL processing, we end up\r\nprocessing interrupts, which then can process the next recovery conflict\r\ninterrupt. This happens because while we send the FATAL to the client\r\n(errfinish()->EmitErrorReport()) we'll process interrupts in various\r\nplaces. If e.g. a new recovery conflict interrupt has been raised (which\r\nstartup.c does at an absurd rate), that'll then trigger a new FATAL.\r\n\r\nSources for recursive processing of interrupts are e.g. < ERROR ereports like\r\nthe COMERROR in internal_flush().\r\n\r\nA similar problem does *not* exist for for ERROR, because errfinish()\r\nPG_RE_THROW()s before the EmitErrorReport() and PostgresMain() does\r\nHOLD_INTERRUPTS() first thing after sigsetjmp().\r\n\r\nOne might reasonably think that the proc_exit_inprogress logic in die(),\r\nRecoveryConflictInterrupt() etc.  protects us against this - but it doesn't,\r\nbecause we've not yet set it when doing EmitErrorReport(), it gets set later\r\nduring proc_exit().\r\n\r\nI'm not certain what the best way to address this is.\r\n\r\nOne approach would be to put a HOLD_INTERRUPTS() before EmitErrorReport() when\r\nhandling a FATAL error. I'm a bit worried this might make it harder to\r\ninterrupt FATAL errors when they're blocking sending the message to the client\r\n- ProcessClientWriteInterrupt() won't do its thing. OTOH, it looks like we\r\nalready have that problem if there's a FATAL after the sigsetjmp() block did\r\nHOLD_INTERRUPTS(), because erfinish() won't reset InterruptHoldoffCount like\r\nit does for ERROR.\r\n\r\nAnother approach would be to set proc_exit_inprogress earlier, before the\r\nEmitErrorReport(). That's a bit ugly, because it ties ipc.c more closely to\r\nelog.c, but it also "feels" correct to me. OTOH, it's at best a partial\r\nprotection, because it doesn't prevent already pending interrupts from being\r\nprocessed.\r\n\r\nI guess we could instead add a dedicated variable indicating whether we're\r\ncurrently processing a FATAL error? I was considering exposin a function\r\nchecking whether elog's recursion_depth is != 0, and short-circuit\r\nProcessInterrupts() based on that, but I don't think that'd be good - we want\r\nto be able interrupt some super-noisy NOTICE or such.\r\n\r\n\r\nI suspect that we should, even if it does not address this issue, reset\r\nInterruptHoldoffCount in errfinish() for FATALs, similar to ERRORs, so that\r\nFATALs can benefit from the logic in ProcessClientWriteInterrupt().\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n[1] https://postgr.es/m/20220701231833.vh76xkf3udani3np%40alap3.anarazel.de\r\n[2] clearly we needed that test urgently, but I can't deny regretting the\r\n    consequence of having to fix the plethora of bugs it's uncovering\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"To": ["pgsql-hackers@postgresql.org, Tom Lane <tgl@sss.pgh.pa.us>, Thomas Munro <thomas.munro@gmail.com>"], "Date": ["Fri, 15 Jul 2022 10:29:38 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["interrupt processing during FATAL processing"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657906198; cv=none; d=google.com; s=arc-20160816; b=zU3RV3vg3BjcveDSyDUJMOXWVFa7bVNvKU89/Lq0RLPsjeS7bwHO4Zmj4Pr5ZSHxei xypkuiPrYWIu4bN1m2petIugZe+yeI2zkEcIRcnyKjZ6NeV9N4AR1V5auQj82ldlqJtl oCMJDpmlSkoe33NGyXjf3q7WSvqmAO3C3DslROrNwjpcO3FxUvluyz5Z1XXeNNeF/w/g 7fCKtkZyS3e/tntKiMky4DsLrk4U7G4103XF43u+Q8RJJBtoRa0Xl0tlUz8aE4qsR04G /1srsXh5PKVEi6tlTctP6hxQLnzQfC0AtjVAr+El3qDrcy+snuUSxLNzMwQdb+KjRFg4 CNZQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp191596jai; Fri, 15 Jul 2022 10:29:58 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id az28-20020a0561220d1c00b0036c78496e5asi1064966vkb.187.2022.07.15.10.29.57 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:29:58 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411238@lists.postgresql.org>) id 1oCP8X-0001tB-4e for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:29:57 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCP8R-0000Cl-8o for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:29:52 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCP8I-0001fX-EY for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:29:50 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.nyi.internal (Postfix) with ESMTP id D00B75C00A1; Fri, 15 Jul 2022 13:29:39 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute3.internal (MEProxy); Fri, 15 Jul 2022 13:29:39 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 13:29:39 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715172938.t7uivghdx5vj36cn@awork3.anarazel.de>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:A6TRYtMB-qp3WRcFXx1uNuxtczOGYXYXWg8PdFE6ua5tuVPQ5QD19Q> <xmx:A6TRYi8d3k5y-Bgkxzrfqtjd3cuGhyps18LMB8LBwHRse30hFYKlNQ> <xmx:A6TRYlVDBU03w0r-mfmSRpR9_9RiR7lnbGzUrP2qAVr7JC1v0XLS4w> <xmx:A6TRYolUMr0hieaTZwY63CyGZzJzyGnjecChREkl3F8QLAFcxEuP0g>"], "X-Received": ["by 2002:a1f:6046:0:b0:374:2e37:5875 with SMTP id u67-20020a1f6046000000b003742e375875mr6104212vkb.20.1657906198037; Fri, 15 Jul 2022 10:29:58 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715172938.t7uivghdx5vj36cn%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "Return-Path": ["<pgsql-hackers-owner+M79098-411238@lists.postgresql.org>"], "X-Me-Sender": ["<xms:A6TRYivsmHbOLu2vd_91yJH_smQuYOl-snFlTfmHrd6Dt3VmrR_RZQ> <xme:A6TRYndM5SxtwW8g58U6BnRhq6dAD6Sfnb1ZovEP0RiHv5zc_xdr6lRlgVSufvp8O 7TKNy-efL06O-1oCw>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411238@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:A6TRYtzQaMeKVVPQf96M8B9GhNTPhRVRfGauG7jpZ20daj0QhFsesnxJbPCKMnHldrCAKBgv2RYab7jJ97JMFv0-JywMfrhRtAc1bSUE1mDx1hUVk8rU5-2bedR->"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:content-type:date:date:from:from:in-reply-to:message-id :mime-version:reply-to:sender:subject:subject:to:to; s=fm3; t= 1657906179; x=1657992579; bh=2aVkg3QmxVdcV36mHfawObR3qYlUnZXBNxG f8X7a+po=; b=e4COWkFf2MUYLoIhYn1v3JQnAauZChkcelGLIVTeq6WrvrJi2g8 76HNAoyeSq0q952/Y/M/FuCEc4vcYlDh40XhYsHYY9392ArS94RuqUOE08XKmPgL ij6z7X5s4nli9leSHz7rk92S9++/O44DtU/0Aoj7NlhsoOmGvM4k+5gpNpVN9uls aB3LZnIrU2qBxYF97GYhKCrq+tk0e6j9x4rWOVxE6WAvJe3VYqhk2+X4kA1AgeyE CAuWYFwe5nNp0DIjzow/d8cdoSQSFuVvLZ+TCgT/P+IdBhV6TiuR9LJ7nKbOGHYx D7cxjqt9I4ZKwHAKaaMwRidmGbWrfos8B9A==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:message-id:mime-version :reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy :x-me-sender:x-me-sender:x-sasl-enc; s=fm3; t=1657906179; x= 1657992579; bh=2aVkg3QmxVdcV36mHfawObR3qYlUnZXBNxGf8X7a+po=; b=c HIFKlj49AaKV3bezH0sMypLbOHbggqS3Vozs3Hlz2KnhMDxbs2z453GOnQ9DhC4k ZOiY36+AF18xqAjBgjE6cJuNMpZm8IxxZwGcBNHmQLhUV8jR40IwEeAomh2uX5nl J0+6CuWXAmNmbXgETC0MCj7FVzHo9kwomSPw2U0W9n3Dx/zEin+UkhVxZkzgfw/I YwbODg+hNHiZvmzT1dr0VcWJUlAUeea7sOkMVmfdCaacjIosivcDMTY3GTvOwBph /znKJYXB7ijzvZg9pyR4laQBckU7ZscBWwEWz2O1jV2J+0znaacOTvP3g1LDcNbk y6TO2YKInEq3XCVRr0MhA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudduhecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvuffkgggtugesthdtredttddtvdenucfhrhhomheptehnughrvghs ucfhrhgvuhhnugcuoegrnhgurhgvshesrghnrghrrgiivghlrdguvgeqnecuggftrfgrth htvghrnhepuddukedvvefhhfegtedtgeffgfekgfelgedtkedtteetjeeikeejteelkefg teelnecuffhomhgrihhnpehpohhsthhgrhdrvghsnecuvehluhhsthgvrhfuihiivgeptd enucfrrghrrghmpehmrghilhhfrhhomheprghnughrvghssegrnhgrrhgriigvlhdruggv"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vLe0xLbA37QZgxOANvw/azMwKN6V4jFRJ7EIV4lb2TdKGPKqiAevpiwM7qFdrCG7w4VTHr"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:content-disposition :mime-version:message-id:subject:to:from:date:feedback-id :dkim-signature:dkim-signature; bh=2aVkg3QmxVdcV36mHfawObR3qYlUnZXBNxGf8X7a+po=; b=hZRiCY2LCq3/EZr4//ZY1ppJZHgihCMJoKsxrJ/yabmBpzhBU16Dv0qHi9977gKdBa Wyn4oqP1Ag626U4QyviQAlqKfT1WJS2H5edB25DjNjwVfNwAd3IILR6dNtRih90rHKqj sshCuXUiPRD2rDEZVE5G1rTbiid8xyWwBZJdsotaYF2Nnkou9WTFXwuQKcrijRVmfTaY iuTOBqMCVaWQuLDU5GrTQBfDbg6vdYT9LAj5wPEfHzoTsHl42zTmG44k5TsGpa4to3sr V+3zMwGDMqrF0Wsys4a7cynI2ea9Yh+vZhqUladiGiypMwjxPidiY3dkp44rehFSoOKf uzhQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=e4COWkFf; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=cHIFKlj4; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411238@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411238@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=e4COWkFf; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=cHIFKlj4; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411238@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411238@lists.postgresql.org"]}	\N	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:37:31+00	andres@anarazel.de	Re: Non-replayable WAL records through overflows and >MaxAllocSize lengths	<20220715173731.6t3km5cww3f5ztfq@awork3.anarazel.de>	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}]	[{"Name": "Heikki Linnakangas", "Address": "hlinnaka@iki.fi"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	184	9923	[]		Hi,\r\n\r\nOn 2022-07-15 11:25:54 +0200, Matthias van de Meent wrote:\r\n> On Mon, 14 Mar 2022 at 18:14, Andres Freund <andres@anarazel.de> wrote:\r\n> >\r\n> > A random thought I had while thinking about the size limits: We could use the\r\n> > low bits of the length and xl_prev to store XLR_SPECIAL_REL_UPDATE |\r\n> > XLR_CHECK_CONSISTENCY and give rmgrs the full 8 bit of xl_info. Which would\r\n> > allow us to e.g. get away from needing Heap2. Which would aestethically be\r\n> > pleasing.\r\n> \r\n> I just remembered your comment while going through the xlog code and\r\n> thought this about the same issue: We still have 2 bytes of padding in\r\n> XLogRecord, between xl_rmid and xl_crc. Can't we instead use that\r\n> space for rmgr-specific flags, as opposed to stealing bits from\r\n> xl_info?\r\n\r\nSounds like a good idea to me. I'm not sure who is stealing bits from what\r\nright now, but it clearly seems worthwhile to separate "flags" from "record\r\ntype within rmgr".\r\n\r\nI think we should split it at least into three things:\r\n\r\n1) generic per-record flags for xlog machinery (ie. XLR_SPECIAL_REL_UPDATE, XLR_CHECK_CONSISTENCY)\r\n2) rmgr record type identifier (e.g. XLOG_HEAP_*)\r\n2) rmgr specific flags (e.g. XLOG_HEAP_INIT_PAGE)\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["Heikki Linnakangas <hlinnaka@iki.fi>, PostgreSQL Hackers <pgsql-hackers@postgresql.org>"], "To": ["Matthias van de Meent <boekewurm+postgres@gmail.com>"], "Date": ["Fri, 15 Jul 2022 10:37:31 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Non-replayable WAL records through overflows and >MaxAllocSize lengths"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657906665; cv=none; d=google.com; s=arc-20160816; b=Cul4s8P9Yv+DQndlgkjeNOV5XMRrloZhH4S8R7+jSQFMYmYpNSATgMM7WU0PAwFc7b W/yUp8JmS2MF4h9w19u2t1dhWbPqkYPl9M44/rvk3cs4d6dlkWPAuj/Js5sl1RZUE15X Jf4b2G2e/W6NMUqYzG0MAXLllK0MeUVHxzwsZe6DdwFUk+W+GY+qNm/ZQ0kT4m7nQCLE acyc8VXip59Bmnj6ZwI6/wc3nhd+LFej3+iT57aIogrjHiYklwNQOTil2CFimO2WWyFb v6FFVbqDq7WKrUyVGK5mkaJoBth/J3/thrDHeyJIvoe/JN/072I0/5bdv5mmy5xVpWDM GnUw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp192935jai; Fri, 15 Jul 2022 10:37:45 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id f11-20020a05600c4e8b00b0039c63d8b8fasi7099168wmq.146.2022.07.15.10.37.45 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:37:45 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411240@lists.postgresql.org>) id 1oCPG5-00082S-5X for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:37:45 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCPG0-0006O9-ID for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:37:40 +0000", "from out3-smtp.messagingengine.com ([66.111.4.27]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCPFt-0006EP-Rc for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:37:39 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.nyi.internal (Postfix) with ESMTP id C74725C00B2; Fri, 15 Jul 2022 13:37:32 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 13:37:32 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 13:37:32 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715173731.6t3km5cww3f5ztfq@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<CAEze2WgGiw+LZt+vHf8tWqB_6VxeLsMeoAuod0N=ij1q17n5pw@mail.gmail.com> <7e44dc64-c6e3-fd4e-4c05-ad36555f57f5@iki.fi> <20220312010315.eqhwbi3j7x4xchor@alap3.anarazel.de> <CAEze2Wj3=PwJzo8ux_4W_eEpMvd7ZMYSBQO4r7iJT01geCabaA@mail.gmail.com> <20220314171445.wyh73j4sfmodtfsy@alap3.anarazel.de> <CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA@mail.gmail.com>"], "X-Me-Proxy": ["<xmx:3KXRYsx_ltGBUQCalLyOUy0GSDAY_on1RLyfjJriPFMrM0gNcKUCug> <xmx:3KXRYjR2OWjNeug3Na8AijYHiCCAE5mVJB_55Gt4hvcNVPihtaQFXg> <xmx:3KXRYnaogJHR8_G2cg8kXoMSMv_kQNgSy-atLCptGzJAaKf9BLNmBA> <xmx:3KXRYqI4mcVAdKlMFi7S9a98yuH_Uh-hlMaazidPzo-BPzGvodqBIQ>"], "X-Received": ["by 2002:a1c:4487:0:b0:3a2:fb76:7981 with SMTP id r129-20020a1c4487000000b003a2fb767981mr14842734wma.98.1657906665471; Fri, 15 Jul 2022 10:37:45 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715173731.6t3km5cww3f5ztfq%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411240@lists.postgresql.org>"], "X-Me-Sender": ["<xms:3KXRYuDu9qz98CO77inHvJfNTH6RW2-EzM6YZlukHyIjwEQFvHsZiA> <xme:3KXRYogRNz6qiHNf1nT97zktKhTJPxLRGyHzVMg3qlbYyfoGj09wmtNps2Dz44HL_ bhaQBaFMp06bXwtaA>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411240@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:3KXRYhn_8geGAOJOSvoGOB7qD8eyo3rtwtcF1RV9xiZGOBUBnQ86MDp7rhGT1Pe5_lpgrT_Uqklx-Z2JX5sT-ZUmjWSTo1Gh-jQDS3Ouy1O8kfEO68T6aVYWWX0B>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657906652; x=1657993052; bh=+sPEA7OfXu ZxOzMb1Ynv73msedgECUpi2QCcS3inCQI=; b=QJeMBv9ZIkhfXYk7Vv17qFiRuC 5xO8AGVxHKI5l0r8Tx+Cg8r5yONmLjuVOkqD9mFjCEtDU77ylDo7UALtN6WzKVYX Bgy9/2nReOuwwb8r9WC6CrnBwq1Yf0zeg5qMF1zPrp4e6exkBmo24ROxtXvOhRNk gjBz4q5g413s9PxKY+peKNmzbT1eSSwNd61RI8923T8nvhBpeme+G7IHv6hgIvfb gOH6vESXktxKMiZdTO/HWYUbY/WDXUkCOuD4bCLNJSOnEbfcPWQaXoGRsAK1/5m4 tA3RXMyDr9KiPPHqid5uft1l3/DaIUsLw4eN6za3XvyKjCXcq/S8MtE/9wpg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657906652; x=1657993052; bh=+sPEA7OfXuZxOzMb1Ynv73msedgE CUpi2QCcS3inCQI=; b=txaYr5WcDZaUUUMof9XFcIz6WsOSaL/dxEjiLgHS3NgP aHb32576C3Lnstow6LSuZ3oVTLNKbVoy8qdiG6Rj6DDRcVYb9xxxVJXU9H9Tcy5u qiFxjKAYo18b62TEU5uhVDjzlKE927fvWnxWzB6JXaTIxpk0QehKZFZ99VXcldQz R/OUb20pstFqT5dD3belj0mcsmqTEPskiIUrnK4TgRNZQUUgCUh+7Akt2WB4OI4o zzsDFZtc7P/zbKMNTr0iiFMrz6za6qLSDERoQNs94X+OOl9AF8tuk+O192ezpVvL G8UXF7VjL+Ozu7odBrW8AZI2u2LqqKZ4bTkB1RA1Qg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddguddujecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vV4cU6L18A3jNZZTmdSWEkAWdG+n16ij6ln6mW7pV+0/9XZtrNawpz0SaCWR+cQYxrP7Hh"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=+sPEA7OfXuZxOzMb1Ynv73msedgECUpi2QCcS3inCQI=; b=qcyF8306iCVvk9V4VEaFr1NpvJojr8l+aaL+S2O2Vua4PxnNq8KpRBACLXR1JNlEe3 jiSSFP0t2Gi8QYRwEP3KJeog6ukyUd5s4RkOxYAO4fURdKR/SiEzzCP+Sblije4uYvey r5poLwAYX7qmMbKbgWKh40/iVw0gaKtynuKwz3yOkIJnO+W1AlWh+nf2D66n0Dd+LyB8 OlTnvUu4+8KqWgCX4Ha24xa6INQqCJkDl9Gi1lpaTG1gL4OKJOBBZWvul4oXVPpS9vtf Y8FrSRKldiyvA4m4dRqloK8ifeWqi6VKQ8T4nBGvS2FdK4grOkSxtNgn2BDKOHT3mZ1W sDMg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=QJeMBv9Z; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=txaYr5Wc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411240@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411240@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=QJeMBv9Z; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=txaYr5Wc; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411240@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411240@lists.postgresql.org"]}	["<CAEze2WjuUpMxe_nOfTX6bskXBxCf4iuAfW1Wcz0xekZ9NGaKRA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:47:20+00	jchampion@timescale.com	Re: Transparent column encryption	<9e664928-95ce-4da5-5fd1-6dad3f68c5b5@timescale.com>	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	\N	185	12114	[]		On 7/12/22 11:29, Peter Eisentraut wrote:\r\n> \r\n> Updated patch, to resolve some merge conflicts.\r\n\r\nThank you for working on this; it's an exciting feature.\r\n\r\n>     The CEK key\r\n>     material is in turn encrypted by an assymmetric key called the column\r\n>     master key (CMK).\r\n\r\nI'm not yet understanding why the CMK is asymmetric. Maybe you could use\r\nthe public key to add ephemeral, single-use encryption keys that no one\r\nbut the private key holder could use (after you forget them on your\r\nside, that is). But since the entire column is encrypted with a single\r\nCEK, you would essentially only be able to do that if you created an\r\nentirely new column or table; do I have that right?\r\n\r\nI'm used to public keys being safe for... publication, but if I'm\r\nunderstanding correctly, it's important that the server admin doesn't\r\nget hold of the public key for your CMK, because then they could\r\nsubstitute their own CEKs transparently and undermine future encrypted\r\nwrites. That seems surprising. Am I just missing something important\r\nabout RSAES-OAEP?\r\n\r\n> +#define PG_CEK_AEAD_AES_128_CBC_HMAC_SHA_256   130\r\n> +#define PG_CEK_AEAD_AES_192_CBC_HMAC_SHA_384   131\r\n> +#define PG_CEK_AEAD_AES_256_CBC_HMAC_SHA_384   132\r\n> +#define PG_CEK_AEAD_AES_256_CBC_HMAC_SHA_512   133\r\n\r\nIt looks like these ciphersuites were abandoned by the IETF. Are there\r\nexisting implementations of them that have been audited/analyzed? Are\r\nthey safe (and do we know that the claims made in the draft are\r\ncorrect)? How do they compare to other constructions like AES-GCM-SIV\r\nand XChacha20-Poly1305?\r\n\r\n> +-- \\gencr\r\n> +-- (This just tests the parameter passing; there is no encryption here.)\r\n> +CREATE TABLE test_gencr (a int, b text);\r\n> +INSERT INTO test_gencr VALUES (1, 'one') \\gencr\r\n> +SELECT * FROM test_gencr WHERE a = 1 \\gencr\r\n> + a |  b\r\n> +---+-----\r\n> + 1 | one\r\n> +(1 row)\r\n> +\r\n> +INSERT INTO test_gencr VALUES ($1, $2) \\gencr 2 'two'\r\n> +SELECT * FROM test_gencr WHERE a IN ($1, $2) \\gencr 2 3\r\n> + a |  b\r\n> +---+-----\r\n> + 2 | two\r\n> +(1 row)\r\nI'd expect \\gencr to error out without sending plaintext. I know that\r\nunder the hood this is just setting up a prepared statement, but if I'm\r\nusing \\gencr, presumably I really do want to be encrypting my data.\r\nWould it be a problem to always set force-column-encryption for the\r\nparameters we're given here? Any unencrypted columns could be provided\r\ndirectly.\r\n\r\nAnother idle thought I had was that it'd be nice to have some syntax for\r\nproviding a null value to \\gencr (assuming I didn't overlook it in the\r\npatch). But that brings me to...\r\n\r\n> +  <para>\r\n> +   Null values are not encrypted by transparent column encryption; null values\r\n> +   sent by the client are visible as null values in the database.  If the fact\r\n> +   that a value is null needs to be hidden from the server, this information\r\n> +   needs to be encoded into a nonnull value in the client somehow.\r\n> +  </para>\r\n\r\nThis is a major gap, IMO. Especially with the switch to authenticated\r\nciphers, because it means you can't sign your NULL values. And having\r\neach client or user that's out there solve this with a magic in-band\r\nvalue seems like a recipe for pain.\r\n\r\nSince we're requiring "canonical" use of text format, and the docs say\r\nthere are no embedded or trailing nulls allowed in text values, could we\r\nsteal the use of a single zero byte to mean NULL? One additional\r\ncomplication would be that the client would have to double-check that\r\nwe're not writing a NULL into a NOT NULL column, and complain if it\r\nreads one during decryption. Another complication would be that the\r\nclient would need to complain if it got a plaintext NULL.\r\n\r\n(The need for robust client-side validation of encrypted columns might\r\nbe something to expand on in the docs more generally, since before this\r\nfeature, it could probably be assumed that the server was buggy if it\r\nsent you unparsable junk in a column.)\r\n\r\n> +   <para>\r\n> +    The <quote>associated data</quote> in these algorithms consists of 4\r\n> +    bytes: The ASCII letters <literal>P</literal> and <literal>G</literal>\r\n> +    (byte values 80 and 71), followed by the algorithm ID as a 16-bit unsigned\r\n> +    integer in network byte order.\r\n> +   </para>\r\n\r\nIs this AD intended as a placeholder for the future, or does it serve a\r\nparticular purpose?\r\n\r\nThanks,\r\n--Jacob\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	{"To": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "Date": ["Fri, 15 Jul 2022 10:47:20 -0700"], "From": ["Jacob Champion <jchampion@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Transparent column encryption"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657907250; cv=none; d=google.com; s=arc-20160816; b=sK24XiTeN6heBJtOv4pc0TjWeyMLR9RwYlP3YMH3qfe+mRMBu7DNlf4nuZ4yh1ECGD xvRvb1nTEJA2XWcfW8X7r6hXNPHOmBsFAg3whJ1pbwG9kATWW7NGRXAtFpVBt6F2+rm7 r1yoeJ5xvzLhkVT1qwxm0eB5kOkUuQysz/FENG4mMtRiLMUDOJMBbiSiBGnfPlgmJzRb 2Uk6iR70JJa+a1WpxNcIYuVFQUWrCDe7XMUSUAErn7kjjJspAZPk5mqMWNuY/kabDH4H Dk8HvlBaOXWBWPnqRLhX7PApuk1XfBUQxXJN2MfH0fav0I6ddsKuxx1JSq6YJzg0oyYr lLCw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp194638jai; Fri, 15 Jul 2022 10:47:30 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c15-20020a5d414f000000b0021dacd5cb03si4896398wrq.229.2022.07.15.10.47.30 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:47:30 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411241@lists.postgresql.org>) id 1oCPPV-0007kg-QI for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:47:29 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCPPR-00069Q-22 for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:47:25 +0000", "from mail-pj1-x102f.google.com ([2607:f8b0:4864:20::102f]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCPPO-0006Jd-Hn for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:47:23 +0000", "by mail-pj1-x102f.google.com with SMTP id 89-20020a17090a09e200b001ef7638e536so12198972pjo.3 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 10:47:22 -0700 (PDT)", "from [192.168.1.21] ([50.39.205.221]) by smtp.gmail.com with ESMTPSA id b15-20020a170902650f00b00163d76696e1sm3803028plk.102.2022.07.15.10.47.20 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128); Fri, 15 Jul 2022 10:47:20 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<9e664928-95ce-4da5-5fd1-6dad3f68c5b5@timescale.com>"], "Precedence": ["bulk"], "References": ["<89157929-c2b6-817b-6025-8e4b2d89d88f@enterprisedb.com> <48a9f2c2-4a57-27d8-7c53-16a23a01014e@enterprisedb.com> <79f08a39-a7da-5157-cef4-378fb60c18f8@enterprisedb.com> <258c5064-437e-f41e-7537-5e8c343c33cc@enterprisedb.com>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:a05:6000:15c3:b0:21d:9f5a:df83 with SMTP id y3-20020a05600015c300b0021d9f5adf83mr13773776wry.360.1657907250186; Fri, 15 Jul 2022 10:47:30 -0700 (PDT)", "by 2002:a17:902:ea42:b0:16c:ca53:816c with SMTP id r2-20020a170902ea4200b0016cca53816cmr3310271plg.94.1657907241208; Fri, 15 Jul 2022 10:47:21 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/9e664928-95ce-4da5-5fd1-6dad3f68c5b5%40timescale.com>"], "In-Reply-To": ["<258c5064-437e-f41e-7537-5e8c343c33cc@enterprisedb.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411241@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411241@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=message-id:date:mime-version:user-agent:subject:content-language :references:from:to:in-reply-to:content-transfer-encoding; bh=uZSquwXWqqS6tPKyaOPlM8nFflFyYPYAdmtvcEYznTk=; b=VScj3QNsuRM1EYbzRW+k0zSdxJlCvVp3fDKK7K1RBzNlzU3tp9MYmPMfEVihp1haDM u4Ra/2Ji/7RQuDkDyq+NAWPT5prvk/Zzprg+rBjSbM6ts7Z+/+W/JTF8FXklos1KqiYx /h7kHY2psMso47NbB62YkQpExGsTUjisE7PkNePWiF8ePc7qynU8seYw8SidLeeiANz5 nap8hwXz2S0tJPNYH0XO5+vtdBy7BmMoRw3UyPtzkXUi11kTjJLE/U+8PbSgRBBS8ktE 6W1yZR+V/a5tM7bvjvSPhjXw3JJrjqBOaiTJ5ItrzJQP9VBgyLTfzY7dlC5/qXHU/D4w TpNg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8QPHrHCHh6eHBEb/4HMtUqE+4NDEwU79vgW6yfPwx3ohdmhnzs 90f41UE1OOGRZXHlz4GZMZY8Sg=="], "X-Google-Smtp-Source": ["AGRyM1vejlzSe7zAKW5JbMnVu5aAfiI2HY92hrNXRVvkmeBlWSXPF0LFUGxMR8Hzz5gCJNCf4Z7I"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:to:from:references :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=uZSquwXWqqS6tPKyaOPlM8nFflFyYPYAdmtvcEYznTk=; b=wlDNEb8TN96G45tDAurMuQidR2+nxgy1SCpD/Typ1+Kk/2YmxbhrTN9/z6YStKgSGg nbiBTNfnzrBVueSKS9bKb9uxiGYCiPgjcF0USPrvBmWYQP5EqJmLnwU7xZlxZBGCkHx3 eqiY356Nvd3h4lKekxAQZHvWvaCtZ4DUJ85oZMpCF0p8FqEdVG7y3CQzQNPSfxISNG+n /EqykTJQSd7cWquJwTn3NmbWy1S1iBNuwlG3nFAwigILR7gxv/XMzLDLYHD1t/hXyVx+ gvzlOz3T8d1mcllu3ip/xK4xAo6uO3vSctduNnAklfPZP3GtOGkHTiCGF6C3hMYBcQDN Vf7A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=VScj3QNs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411241@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411241@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:message-id:date:mime-version:user-agent:subject :content-language:references:from:to:in-reply-to :content-transfer-encoding; bh=uZSquwXWqqS6tPKyaOPlM8nFflFyYPYAdmtvcEYznTk=; b=A7dBcxyPIHYMZAoO1+CB52m7LhRJ+5pkAMigczwjH1IqHsNng/RIpdxhk8hlNvUIUW JEqTGS6kVx3/pAEa1Akapc3v6592GhgBia4au6WWJlhRg71kGUIFhYRpCsp0EYvdtBr3 7teEZJaSz0jq0rhG8wP5DPMR+iuIzN5tnFPJgAXBKJKml4m/GF27VmmqS1MLMCPVjwrc 4YJTp1Ad0hMRDJk5Jtlg+GA2P8p6hFe8aQDIo0NioJiY/bB66xsYYZGbNHK5Q0qBicKP gHQp9AOlxDyAASOnV84PIAi7nWpsaH6wLoBHknxmCp6/f/8eRx6RPDkjD3bs+pOVnLCY Z5GA=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=VScj3QNs; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411241@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411241@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<258c5064-437e-f41e-7537-5e8c343c33cc@enterprisedb.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 17:58:54+00	pryzby@telsasoft.com	Re: MERGE and parsing with prepared statements	<20220715175854.GM18011@telsasoft.com>	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	186	8559	[]		On Fri, Jul 15, 2022 at 11:25:35AM +0200, Matthias van de Meent wrote:\r\n> On Thu, 14 Jul 2022, 18:26 Justin Pryzby, <pryzby@telsasoft.com> wrote:\r\n> >\r\n> > Why is $1 construed to be of type text ?\r\n> \r\n> The select statement that generates the row type of T `(select $1 CID,\r\n> $2 TxV) AS T` does not put type bounds on the input parameters, so it\r\n> remains `unknown` for the scope of that subselect. Once stored into\r\n> the row type, the type of that column defaults to text, as a row type\r\n> should not have 'unknown'-typed columns.\r\n\r\nThanks for looking into it.\r\n\r\nI see now that the same thing can happen with "ON CONFLICT" if used with a\r\nsubselect.\r\n\r\nPREPARE p AS INSERT INTO t SELECT a FROM (SELECT $1 AS a)a\r\n     ON CONFLICT (i) DO UPDATE SET i=excluded.i;\r\nERROR:  column "i" is of type integer but expression is of type text\r\n\r\nIt seems a bit odd that it's impossible to use merge with prepared statements\r\nwithout specifically casting the source types (which I did now to continue my\r\nexperiment).\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, pgsql-hackers@postgresql.org"], "To": ["Matthias van de Meent <boekewurm+postgres@gmail.com>"], "Date": ["Fri, 15 Jul 2022 12:58:54 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657907951; cv=none; d=google.com; s=arc-20160816; b=zekD2Z+EsqjvSX6ZjxBdIEqoAUjaWqA6r09OQ7YW9WCQrx0sPaMZ9dBBgxiIqpKNsj wgVPJ0vC6FAttrxg9qzSP7eSRj1y2njWDg8ZSs16dxuZApwkoNNEuFALzAf1MyD7PsVc 2c4WIOYZ1mGN3UvEP4T+bSm+BoDl59Iv0yqlb/Xg3U/ynS95YCMPacbA75871pxmOXz6 5PqYhdfMwoaGpu6/UaSZBA7bzKMruPVwUBybPgfsziUfJvCSinOrfElzHbfheSpgmdjW vYV7inHUX7lTTJ8DJG6jyh51CJUkD5RW/JC8Bh6PMBOyIhY244iEOpc9O5NBnGqKrP8A mwnA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp196421jai; Fri, 15 Jul 2022 10:59:11 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id z27-20020a67d29b000000b0035430f53bf9si1093598vsi.370.2022.07.15.10.59.11 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 10:59:11 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411242@lists.postgresql.org>) id 1oCPao-0007v3-LI for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 17:59:10 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCPak-0006KA-3l for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 17:59:06 +0000", "from mail-qk1-x731.google.com ([2607:f8b0:4864:20::731]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCPad-0001tF-0l for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 17:59:05 +0000", "by mail-qk1-x731.google.com with SMTP id o21so4122528qkm.10 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 10:58:58 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id u12-20020a05620a454c00b006a716fed4d6sm4657175qkp.50.2022.07.15.10.58.55 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Fri, 15 Jul 2022 10:58:55 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id BC17E800B00; Fri, 15 Jul 2022 12:58:54 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715175854.GM18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<20220714162618.GH18011@telsasoft.com> <CAEze2WgUBfXK+VJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE=Ow@mail.gmail.com>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a1f:e2c6:0:b0:370:e335:aee2 with SMTP id z189-20020a1fe2c6000000b00370e335aee2mr6133937vkg.39.1657907951527; Fri, 15 Jul 2022 10:59:11 -0700 (PDT)", "by 2002:a05:620a:712:b0:6b5:d977:bebb with SMTP id 18-20020a05620a071200b006b5d977bebbmr19447qkc.552.1657907936367; Fri, 15 Jul 2022 10:58:56 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715175854.GM18011%40telsasoft.com>"], "In-Reply-To": ["<CAEze2WgUBfXK+VJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE=Ow@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411242@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411242@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to:user-agent; bh=FYi2NR3pO8XRX9kvBw+i/fCHIqT0k+HD5yi2pM0fisw=; b=f5dFHDFH0uvV5dFP5A7PvJzqycVGj987VvCYGFd5kA2z/sQKkBSG5+pARkrGMbkKSB Brsl/fv+LvYyR4KgFd/nHQTeL93Uz9LMtdbiJhQ49XDhnr6GFQA6SuJ5Rj5ir9MWJq1C iCS7qvPssr/regmwBiib6zaGpJTvrjlVn+9PExkjWNs/TrRAI+sKZZxL0Wh2/tTXZTEU D6alTlDCfkkY/ltNv4W8GjZOtUTO/iylle+VkjocqyYVteNEHzzidibtlfz31E2cYzxA E8EtYKO6kc7EKAzW9zudtCT2dvdokRnPTgIOj+o6NbUcmbuNiTmUoAfmzWCtUk6dO372 /aDg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora84wgN1da8cFZEjcSp+IPQiCBQF+epF0lEAZCqhOjTX+cDiF5X6 aeW50PQoBbGIPTk8KVhtZZZCiA=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sDhAK8jYBpy0LeumsstGfjF6RHVQi6jkV8ogBjfUdNBhE6bnXpNfDlvLoVxsQNAwa+LBIg"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=FYi2NR3pO8XRX9kvBw+i/fCHIqT0k+HD5yi2pM0fisw=; b=Hu0IGFFNu5YdItsdA5BaGZ6PbdtcHPodBcQddHNxZCESvYMlNLS/5T3MX5uonkRQhu BByEj7SQMfgOMNVar10a+6aXUS3KquIThKPJokFp2Onmu5IFAjvhXTDtObtrTJY1w9zv dY16v1lc30a6EIC8mhs0U9S5Ye4h6jV20d49uV2zyn/wJB7c3T774XDhtC3wMznc2y27 3UQ8dZIyCKSOVTspRG6wZ3OHvbi5NqKgzaxhlFKuzM7Tz6UORh/7MrtZVBzxHZOQB/ww oMZqIZAl49Hk3Yr1/0Qhfckvihdw2yneAfmJhUR8MJ0J+nmdlolmWtEGBmt6tOXq2ktC lPag=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=f5dFHDFH; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411242@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411242@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to:user-agent; bh=FYi2NR3pO8XRX9kvBw+i/fCHIqT0k+HD5yi2pM0fisw=; b=B6geenfcqpPyWQytjVxdm6M+9x9O1wZ4MkjrOaWdTSxO/fEIKr6XVjTBDSUllTISlv MvrrCTESZZCApdv38taHUkQ3/8G0QHjqFIVJa5pAthBzfdfsfJiwkQhU8+JbXEWfyicD 71V3j3FpzbxKF/rb4TavhIr+BvANWcT5s9LFbRNMw/CtFFOxJbYNgbpQ6V+TZat71Z4C g2m9OJRxdPG3JgLDBj7igjeZJbTe6YW1CHrwn1l2CETUfIp5XEPhmwNS1a37Gt5JTmXC +ojTY83i3rKqnOjEptn9KxYBMckyE6e91H9Z7deD6s++KuoahbieQvedcKtiMJjStqRH R0FA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=f5dFHDFH; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411242@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411242@lists.postgresql.org"]}	["<CAEze2WgUBfXK+VJ_oKacgEmpEfXiOHELm7nesTOXmfn_rJE=Ow@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 18:21:51+00	m.sakrejda@gmail.com	Re: Reduce timing overhead of EXPLAIN ANALYZE using rdtsc?	<CAOtHd0BK98KE9_AjcX0ju-zihKAJwKAHabLpATauX3RgF5TwhA@mail.gmail.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Lukas Fittl", "Address": "lukas@fittl.com"}, {"Name": "pgsql-hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	187	8821	[]		I ran that original test case with and without the patch. Here are the\r\nnumbers I'm seeing:\r\n\r\nmaster (best of three):\r\n\r\npostgres=# SELECT count(*) FROM lotsarows;\r\nTime: 582.423 ms\r\n\r\npostgres=# EXPLAIN (ANALYZE, TIMING OFF) SELECT count(*) FROM lotsarows;\r\nTime: 616.102 ms\r\n\r\npostgres=# EXPLAIN (ANALYZE, TIMING ON) SELECT count(*) FROM lotsarows;\r\nTime: 1068.700 ms (00:01.069)\r\n\r\npatched (best of three):\r\n\r\npostgres=# SELECT count(*) FROM lotsarows;\r\nTime: 550.822 ms\r\n\r\npostgres=# EXPLAIN (ANALYZE, TIMING OFF) SELECT count(*) FROM lotsarows;\r\nTime: 612.572 ms\r\n\r\npostgres=# EXPLAIN (ANALYZE, TIMING ON) SELECT count(*) FROM lotsarows;\r\nTime: 690.875 ms\r\n\r\nOn Fri, Jul 1, 2022 at 10:26 AM Andres Freund <andres@anarazel.de> wrote:\r\n> On 2022-07-01 01:23:01 -0700, Lukas Fittl wrote:\r\n>...\r\n> > Known WIP problems with this patch version:\r\n> >\r\n> > * There appears to be a timing discrepancy I haven't yet worked out, where\r\n> >   the \\timing data reported by psql doesn't match what EXPLAIN ANALYZE is\r\n> >   reporting. With Andres' earlier test case, I'm seeing a consistent ~700ms\r\n> >   higher for \\timing than for the EXPLAIN ANALYZE time reported on the\r\n> > server\r\n> >   side, only when rdtsc measurement is used -- its likely there is a problem\r\n> >   somewhere with how we perform the cycles to time conversion\r\n>\r\n> Could you explain a bit more what you're seeing? I just tested your patches\r\n> and didn't see that here.\r\n\r\nI did not see this either, but I did see that the execution time\r\nreported by \\timing is (for this test case) consistently 0.5-1ms\r\n*lower* than the Execution Time reported by EXPLAIN. I did not see\r\nthat on master. Is that expected?\r\n\r\nThanks,\r\nMaciek\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Maciek Sakrejda", "Address": "m.sakrejda@gmail.com"}]	{"Cc": ["Lukas Fittl <lukas@fittl.com>, pgsql-hackers <pgsql-hackers@postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 11:21:51 -0700"], "From": ["Maciek Sakrejda <m.sakrejda@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Reduce timing overhead of EXPLAIN ANALYZE using rdtsc?"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657909334; cv=none; d=google.com; s=arc-20160816; b=An1tXmkM0qu1RS7YEww2vK4KBxrygBDMeo/s4z2DGzxUYociHaa/P34gI/uJA4MBz8 cet4fbkU3Rf2UUHBELMEAqQCAgpumKhqp7JwR7z5emb9puDKywvmhVLxALeJrJCEVJs0 KrYYpSkNnFLs66donRSlpgomRLIkBx/nct2PDsz7V0zte5PeCWvB0qzlM2gQdWIOjIEK 51QQ1ek5H+5i2KuFMPX5isKxWsQnIYhgrIaUe0/TkaoR7D0+Y6NwT15LI3yTo46PA6QG pMe6UtWjnxiZ9g/6yar0yU1DKH1ETCEAhkFRg9lI8hPXmVvfumJ3weRiiZP9Gh9nt3lW HYCQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp201770jai; Fri, 15 Jul 2022 11:22:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id r186-20020a1c44c3000000b003a2e85f6a48si6541660wma.55.2022.07.15.11.22.13 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 11:22:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411243@lists.postgresql.org>) id 1oCPx7-0006y4-Md for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 18:22:13 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <m.sakrejda@gmail.com>) id 1oCPx3-0005RB-1E for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 18:22:09 +0000", "from mail-lf1-x131.google.com ([2a00:1450:4864:20::131]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <m.sakrejda@gmail.com>) id 1oCPx0-00022b-RR for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 18:22:08 +0000", "by mail-lf1-x131.google.com with SMTP id z25so9154402lfr.2 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 11:22:06 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAOtHd0BK98KE9_AjcX0ju-zihKAJwKAHabLpATauX3RgF5TwhA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20200612232810.f46nbqkdhbutzqdg@alap3.anarazel.de> <CAP53Pky+4MJfdC-R3HQFPRauy2N+5_7ExpEhCFUo8EU3bCPjEg@mail.gmail.com> <20220701172639.ty4iu5almspueriu@alap3.anarazel.de>"], "X-Received": ["by 2002:a5d:474f:0:b0:21d:9a9b:a1fb with SMTP id o15-20020a5d474f000000b0021d9a9ba1fbmr14228976wrs.115.1657909334052; Fri, 15 Jul 2022 11:22:14 -0700 (PDT)", "by 2002:a05:6512:3994:b0:48a:fbc:2d5a with SMTP id j20-20020a056512399400b0048a0fbc2d5amr7025795lfu.257.1657909325150; Fri, 15 Jul 2022 11:22:05 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAOtHd0BK98KE9_AjcX0ju-zihKAJwKAHabLpATauX3RgF5TwhA%40mail.gmail.com>"], "In-Reply-To": ["<20220701172639.ty4iu5almspueriu@alap3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411243@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"UTF-8\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411243@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=D1SMWuxyApva08WJfxTZ4dYK0YfSG+O2d7iU/GC19zo=; b=DDIIgvC/XWUlqioRULhmok/RaqVzKPSUz7fFMJasjQrQv0uHi/VYEjfW085CEChsgy k4/rS7iiJ8dmGv/ZhR1LpJlpHem44er3fySf2eXhemf3Kr2CF41JLuYI4kDu+AJyc29j 2qDCRrF+Iv8Xm5FAiOAlh3ssXbnRcB4a9k3rAdQRsE38/fLn4d+vlxjh7E990dpIOSB6 lERaJhhtQYTFhOYaa8Mnr61630KGLy5UGNwEIesM/7Ai90F+JynVMa5KOvkH3/f1OmMn 8wz1zuUGZk/sbTpELc62JulWkLI9aYoyWpkzgh21VhO3wy2JK7ZsdIyXo7DS9viW/t4R +CKA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+w4JqyVPzzpP7k9FiiFEdBVm7LxmmxrcgAr0WBW4IfYHIrmChy aHPS8uPY9dQ01D65ezm5w0qA4Ufm0poPEPVJstFE6Q0S/lA="], "X-Google-Smtp-Source": ["AGRyM1sKXfQjipJoHeJjicMLVmxMOQib32X1gScz50jT743VBHIEVD4hcKzV7C6MtbpyLNzn1Dos"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=D1SMWuxyApva08WJfxTZ4dYK0YfSG+O2d7iU/GC19zo=; b=i1hRdsJRWMZxETD12lylzuvqMOv4FZo9pN7lR1mCwWbmFKr56UwVvB6SCLD1CU6lNo nXGhRjChNvhsngM2wSDLPvvS//Pt9A8seHJqTjo6fbpr7tIfbV4iG24BBIuRfZuIJCub BUl7/TJme3P8XxFYOpYj+hXMsar1M8wRzZ/rxfycFQnR40ETW27AwLokfZjGtj3nntIk XrawQv64ZAdefb2NwEdhmQUz9fERKmmmJlXnBsGMELtUNQF0MRXDt5AMURPRbRuRMmev OdOaio0VCSnvzh1lP3vI11EglS5uTx6bS7ECrVdNtEvlRlib2/kWDon+ENaMuhgNfNik D0RQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"DDIIgvC/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411243@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411243@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=D1SMWuxyApva08WJfxTZ4dYK0YfSG+O2d7iU/GC19zo=; b=tspNzwziVgvcTqZpUY1GIfj3bI7rKXQWLRfKGBI2SQSMmvPDLZ7nE2y6EvnGHL/f/f KMBonrr0mSKxNMjFvXwoNAEsTU+cfgT0mT0+b0UCxYMWApUnQy4qWLZecJsCrO8A08ac jZDSHFWGadVxJKhD3S4p0B9PZKeNfk1irMye3xlvO7L6Z3zCkMtovQjdVbRhEq23U9Xj DUKDFwG6tvgz5+7DXBz42k591+iq4gLHW6qCpHOgjSH1VXBCnrZV5WkqPyKlb8RyYO3R 46yVGe1ybmYl2bZuTLQq8pZXWdVrqXRiJv/xtQNrXVhG/+Se9vWpPLzLS35iOrzwMnin D/2Q=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=\\"DDIIgvC/\\"; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411243@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411243@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220701172639.ty4iu5almspueriu@alap3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 18:40:19+00	alvherre@alvh.no-ip.org	Re: MERGE and parsing with prepared statements	<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	188	8509	[]		On 2022-Jul-15, Justin Pryzby wrote:\r\n\r\n> On Fri, Jul 15, 2022 at 11:25:35AM +0200, Matthias van de Meent wrote:\r\n\r\n> Thanks for looking into it.\r\n\r\nDefinitely!  Thanks, Matthias.\r\n\r\n> I see now that the same thing can happen with "ON CONFLICT" if used with a\r\n> subselect.\r\n> \r\n> PREPARE p AS INSERT INTO t SELECT a FROM (SELECT $1 AS a)a\r\n>      ON CONFLICT (i) DO UPDATE SET i=excluded.i;\r\n> ERROR:  column "i" is of type integer but expression is of type text\r\n\r\nRight, I didn't think that MERGE was doing anything peculiar in this\r\nrespect.\r\n\r\n> It seems a bit odd that it's impossible to use merge with prepared statements\r\n> without specifically casting the source types (which I did now to continue my\r\n> experiment).\r\n\r\nI have no comments on this.  Maybe it can be improved, but I don't know\r\nhow.\r\n\r\n-- \r\n√Ålvaro Herrera        Breisgau, Deutschland  ‚Äî  https://www.EnterpriseDB.com/\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	{"Cc": ["Matthias van de Meent <boekewurm+postgres@gmail.com>, pgsql-hackers@postgresql.org"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Fri, 15 Jul 2022 20:40:19 +0200"], "From": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657910432; cv=none; d=google.com; s=arc-20160816; b=lVpZHw3pL6pTpyCgKyDCRSSlbFfn+kaEkHTTBskwkrUzhfbYJ5o5rrzfmQv2uLmYjk nGZxNi9/2yxuWRiKyoWGJCt7YfCFUvNUzv3oA8BqK8i+N8E+u/g1+ujrrEho8iza/b63 z6dQcSky9LIPEnQBNTeuDxCbqnohv/v+poBBfFpl5tqK9frEH+hG6Jb+IiyfdP7UsLo/ oGxxFfpDqI69guGdaHv6oEWSEVwm1yGYL8PA+KY4Wp8rVdYbT8uf9nda6szUHyV7FTDH y240i2qA2B9mgra5BGWfv1xXVLBSAbSTnjK1SMlgI8Qih21JIb2r8IZ1yyBj/rLUTaxo DwzA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp205344jai; Fri, 15 Jul 2022 11:40:32 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id e16-20020adffc50000000b0021d8b605d60si5482235wrs.630.2022.07.15.11.40.32 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 11:40:32 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411245@lists.postgresql.org>) id 1oCQEq-00032t-9r for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 18:40:32 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCQEl-0001HQ-RD for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 18:40:27 +0000", "from wout3-smtp.messagingengine.com ([64.147.123.19]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <alvherre@alvh.no-ip.org>) id 1oCQEi-0006m0-4G for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 18:40:25 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.west.internal (Postfix) with ESMTP id 8AAB83200B9F; Fri, 15 Jul 2022 14:40:22 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Fri, 15 Jul 2022 14:40:22 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 14:40:21 -0400 (EDT)", "by perhan.alvh.no-ip.org (Postfix, from userid 1000) id EF36D36E; Fri, 15 Jul 2022 20:40:19 +0200 (CEST)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"], "Precedence": ["bulk"], "X-Me-Proxy": ["<xmx:lbTRYnK9YerxISOro8dW6n59Jq1jqBtZCykUQ8aI58EqnGxL0mkLkA> <xmx:lbTRYuLZLVlD67PKTlF86m4spEovhv7r8cUvDvAesM_PT3DEYQTQ1g> <xmx:lbTRYoxthYPH8CExDXp4qawYcJeIBecszdPYkVoywxyUoGODXRmdYg> <xmx:lrTRYghFFDaLGp9_3EsUvJJXO85s9YHnN4RdNzPTXzXJBsXKISGKeA>"], "X-Received": ["by 2002:a1c:f60f:0:b0:3a0:3e0c:1de1 with SMTP id w15-20020a1cf60f000000b003a03e0c1de1mr21899325wmc.56.1657910432661; Fri, 15 Jul 2022 11:40:32 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715184019.rour3mk33ngc76y6%40alvherre.pgsql>"], "Feedback-Id": ["ia2694551:Fastmail"], "In-Reply-To": ["<20220715175854.GM18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411245@lists.postgresql.org>"], "X-Me-Sender": ["<xms:lbTRYq6TwAdVLS0Q125A7zEykP0Wnz_O8NANcl5USKpvoZvYplcpug> <xme:lbTRYj5RC6JjlOlcXclptF2xdoQbH-B9L-U099YHdZBn7qCSj0J92mrAOYn6r_U52 XcMv7lgnA9fx7_E4A>"], "Content-Type": ["text/plain; charset=utf-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411245@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:lbTRYpejV8p0EzHr_B23ln14DIWu_odCQWjWHFMFkVJLGTc7RnS0Ip6txCiCXF1Vu9tlBBAq3FA>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-transfer-encoding :content-type:date:date:feedback-id:feedback-id:from:from :in-reply-to:in-reply-to:message-id:mime-version:reply-to:sender :subject:subject:to:to:x-me-proxy:x-me-proxy:x-me-sender :x-me-sender:x-sasl-enc; s=fm3; t=1657910422; x=1657996822; bh=Z snA/u1da7RqJlgSNH2CTIsUfgH3i4xzDjRutyrEhRQ=; b=1zOkDkrhUuZy4R2/L 0DDn7thuPunKrqfWF6DpB0nbgHpEYN2fArr2Jg53NlvCETgdKZTH0/ULhyuEMcOH K5P5ccIVcpYx7/Qqm5f3iPSiCFcUJC/zMHgSS69qeiaHSdWJRqMX2xHuzTnLsFce N9PiWVz05ehVlBxipJQAytffQbOrzSI1jO+jtiyxzIgyRUbPZ3rh9WhQz9Uo0+yl vOkON96YtUWl64Fimq9c4aplysH4AOrelyifWq9JRtL4BGOojBHFkjOta9FUxwSt YeA2p2R4IkD0HlWJDO2lGHXMBOr846E65rcGqb6njb3HkRB+/HLuZOeVtuazt2tu gBa5g=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudefudcutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfggtggugfgjsehtkeertddttdejnecuhfhrohhmpeetlhhv rghrohcujfgvrhhrvghrrgcuoegrlhhvhhgvrhhrvgesrghlvhhhrdhnohdqihhprdhorh hgqeenucggtffrrghtthgvrhhnpedvkedtffduffdtffffheffhfejjefhgfeiueeukeej keffgfdufffhudffffeuveenucffohhmrghinhepvghnthgvrhhprhhishgvuggsrdgtoh hmnecuvehluhhsthgvrhfuihiivgeptdenucfrrghrrghmpehmrghilhhfrhhomheprghl vhhhvghrrhgvsegrlhhvhhdrnhhoqdhiphdrohhrgh"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vVwGOYIvEYKBYWtrIdEaYnSZCSeFipjPvrKH0slOXnpeLTZtcjcrP+apMa8Ty4xcQItVru"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-transfer-encoding:content-disposition:mime-version :message-id:subject:cc:to:from:date:feedback-id:dkim-signature; bh=ZsnA/u1da7RqJlgSNH2CTIsUfgH3i4xzDjRutyrEhRQ=; b=HEiLBnw+3FRG0I2IZq14E+n1VqHGm+RJtgcedwIOTViQXGzwdkz516E5gfJesrFusa oC1flwOFsPHL5kJnX97sAWeESfAP3ISCn6w5PJ/1wu6N+3hojYLb0RpC0tq7oolc2/Nk n0xGugU+QJ6bqayfEiZ5YYlk6BkMCqilKJn/h0NVJZiVKHektEd9kYCemhvOuaJk940d /fu8s8RO0GM1pxcjX+Ssdhlc887XZV+Vb6S2aV0auxg8BmzDCYx9gTH+qO7kLmUNsCGo mtaOPfftyHJ+OMohXGG4g2Gs+wqx29Lt8KSmWmFgOyE8nH0SMThyY7xMKZFGXG1txJ7n ixBQ=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=1zOkDkrh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411245@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411245@lists.postgresql.org"], "Content-Transfer-Encoding": ["8bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=1zOkDkrh; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411245@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411245@lists.postgresql.org"]}	["<20220715175854.GM18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 18:52:45+00	andres@anarazel.de	Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)	<20220715185245.nsqnwbwybvd4retq@awork3.anarazel.de>	[{"Name": "Melanie Plageman", "Address": "melanieplageman@gmail.com"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Kyotaro Horiguchi", "Address": "horikyota.ntt@gmail.com"}, {"Name": "Magnus Hagander", "Address": "magnus@hagander.net"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}, {"Name": "Lukas Fittl", "Address": "lukas@fittl.com"}, {"Name": "Thomas Munro", "Address": "thomas.munro@gmail.com"}]	\N	189	11069	[]		Hi,\r\n\r\nOn 2022-07-15 11:59:41 -0400, Melanie Plageman wrote:\r\n> I'm not sure about the idea of prefixing the IOOp and IOPath enums with\r\n> Pg_Stat. I could see them being used outside of statistics (though they\r\n> are defined in pgstat.h)\r\n\r\n+1\r\n\r\n\r\n> From Andres:\r\n> \r\n> Quoting me (Melanie):\r\n> > > Introduce "IOOp", an IO operation done by a backend, and "IOPath", the\r\n> > > location or type of IO done by a backend. For example, the checkpointer\r\n> > > may write a shared buffer out. This would be counted as an IOOp write on\r\n> > > an IOPath IOPATH_SHARED by BackendType "checkpointer".\r\n> \r\n> > I'm still not 100% happy with IOPath - seems a bit too easy to confuse\r\n> with\r\n> > the file path. What about 'origin'?\r\n> \r\n> I can see the point about IOPATH.\r\n> I'm not wild about origin mostly because of the number of O's given that\r\n> IO Operation already has two O's. It gets kind of hard to read when\r\n> using Pascal Case: IOOrigin and IOOp.\r\n> Also, it doesn't totally make sense for alloc. I could be convinced,\r\n> though.\r\n> \r\n> IOSOURCE doesn't have the O problem but does still not make sense for\r\n> alloc. I also thought of IOSITE and IOVENUE.\r\n\r\nI like "source" - not too bothered by the alloc aspect. I can also see\r\n"context" working.\r\n\r\n\r\n> > Annoying question: pg_stat_io vs pg_statio? I'd not think of suggesting\r\n> the\r\n> > latter, except that we already have a bunch of views with that prefix.\r\n> \r\n> As far as pg_stat_io vs pg_statio, they are the only stats views which\r\n> don't have an underscore between stat and the rest of the view name, so\r\n> perhaps we should move away from statio to stat_io going forward anyway.\r\n> I am imagining adding to them with other iostat type metrics once direct\r\n> IO is introduced, so they may well be changing soon anyway.\r\n\r\nI don't think I have strong opinions on this one. I can see arguments for\r\neither naming.\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Alvaro Herrera <alvherre@alvh.no-ip.org>, Kyotaro Horiguchi <horikyota.ntt@gmail.com>, Magnus Hagander <magnus@hagander.net>, Pg Hackers <pgsql-hackers@postgresql.org>, Lukas Fittl <lukas@fittl.com>, Thomas Munro <thomas.munro@gmail.com>"], "To": ["Melanie Plageman <melanieplageman@gmail.com>"], "Date": ["Fri, 15 Jul 2022 11:52:45 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: pg_stat_bgwriter.buffers_backend is pretty meaningless (and more?)"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657911180; cv=none; d=google.com; s=arc-20160816; b=wJPLphanI0W+pla5efq3gEOkbxYc++m/2O/a5oMPh/NeRkZrcE6/xTDKZLQu/V7zhX JsZQPnr7xPaO+vI4P5xhexwVNwM7Hx0kdwcYi4k0XyrSJNF+HjTc4up6c/GeUM8VkOEs FThbFO16jQwrMHlXM4I6nuARWQbKAseg60rAXKnL3797j/jNJoOiHjZ7X+UaUwnO0tdm 07dZtBkW9T5/LaF9G9gjxefnwMQ9uXY8hI9q7SFlBYiuZa7qdoOIq3xWQCLpdqk38/6I 9huUKa6qMeW83Kar08ZXpbczzHmfIaDYM2ZWrQnX0FY1lbIRkFfmSR4ScWLeNvx7E+PC BoAw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp207655jai; Fri, 15 Jul 2022 11:53:00 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n11-20020a67a40b000000b003575ed56e73si1046240vse.312.2022.07.15.11.53.00 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 11:53:00 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411249@lists.postgresql.org>) id 1oCQQt-0002Wt-Iy for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 18:52:59 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCQQo-0000sS-8z for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 18:52:55 +0000", "from wout3-smtp.messagingengine.com ([64.147.123.19]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCQQk-0002LY-L3 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 18:52:53 +0000", "from compute5.internal (compute5.nyi.internal [10.202.2.45]) by mailout.west.internal (Postfix) with ESMTP id D6D323200BF2; Fri, 15 Jul 2022 14:52:47 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute5.internal (MEProxy); Fri, 15 Jul 2022 14:52:48 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 14:52:46 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715185245.nsqnwbwybvd4retq@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<CAAKRu_Y2t8uOhMBU461foxJd_C0gTyND-wZzvE8d-FLFtJOksw@mail.gmail.com> <CAAKRu_YbiJxFiEUi_d_UW_DWc=rnP4vJmBNgUHmXPr5awfQPfA@mail.gmail.com> <CAAKRu_ZJkk1KUZS-KAaa3EZ2e1o2YD7w8-NF-po5dTHM7cF=Rg@mail.gmail.com> <20220322001505.fgysjvihvagduete@alap3.anarazel.de> <CAAKRu_Y_B9pLm1-b6A5CfRhuWEMMy2iMy1zNG0_3GhejD-ZsMg@mail.gmail.com> <20220706192047.sikr2vuwvpslqdrw@alap3.anarazel.de> <CAAKRu_YKc9e_=CZ4RB97Krx9TQb-zfNMoqdP45AYs5uZFqXeSA@mail.gmail.com> <20220712171810.7f2ppc45torgaavu@awork3.anarazel.de> <CAAKRu_bmox3REN9xTJCcCji3MQ7XGiuQT8iY+JaYUX_oUmtZug@mail.gmail.com> <CAAKRu_Ytbxqh4GtO0RENmKqhFzs6=AMpgMUn3zRMCt=wSnzrrQ@mail.gmail.com>"], "X-Me-Proxy": ["<xmx:frfRYu6dYrNlExakHUxeMMpMNDFdjwp-x-GrBNJys1rLJw2-u8oG7Q> <xmx:frfRYq7WjDJAhYlk1MOvuWkp0WRcEDNWdJcrVTtdXMdT744FXh_Tpg> <xmx:frfRYmhYJlyu6VM5UeOhk0NCjiXrEKqf9vpq-A3yr61IFrOv8DOgSQ> <xmx:f7fRYntjhgQEE0vep5PW_s6mUBseLvaYbzv5McCP3-bdbeqE4Jvrcw>"], "X-Received": ["by 2002:a1f:17d2:0:b0:374:3ca2:def3 with SMTP id 201-20020a1f17d2000000b003743ca2def3mr6525156vkx.18.1657911180559; Fri, 15 Jul 2022 11:53:00 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715185245.nsqnwbwybvd4retq%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<CAAKRu_Ytbxqh4GtO0RENmKqhFzs6=AMpgMUn3zRMCt=wSnzrrQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411249@lists.postgresql.org>"], "X-Me-Sender": ["<xms:frfRYrqb8ma3k16-ismWQHAVEgLEY9Lzc37Ck9Z2LvwZVXLsyCw_mA> <xme:frfRYlqGo_C5PvuBqOM8pkpYPNe2BQz3qx_L4M_n4-bYOFG6p2zJl3g85th7al3wa mCW3w8v6KNwQKX55w>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411249@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:frfRYoNorT54c0EQAdSvVPQHyKmtRQOkbExeRuGm_qrReeMcMK6Zlrp3zprzKn_3vcu8_8o21xRhn6FNCC79TfzQQzH-AZyakAU3pJMQmxcV5pXgbo8SlprldBTw>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657911167; x=1657997567; bh=dV6Op7yXoC QJ6PYZ8oBx8KgagBwLxcuZA0z1YL1OhwA=; b=RjGmIye7BZa79uG/qSuHa7cEW7 goZ/2vuZWCF648XZDllfg17Zq3ynBSqzqs2sORvyDUYc6zqf1+legvJtlT+L7gpz E0dGsabR6YsaLrv+battloJTXwFRT0Ga1EKKLWfyPJlge1IkfBI0i0kOK2MxugAk efOMf8/totOfk/BDRz8lfHI834XYWmrfb9KilXsUmU4kxBytFeF0QgEmF1GA7qUA XiV3dYyRgTfBbZRgbJTETHAk9rmsye4W2g/jGrvdYuGvYZDt0FbvrZyh5IL+x4rY NlURhsbuC3Z+QQMT+iNfQ+hj2dEvOjmIp03bUwtI6T1/s3RiuRU1+6OhWVUg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657911167; x=1657997567; bh=dV6Op7yXoCQJ6PYZ8oBx8KgagBwL xcuZA0z1YL1OhwA=; b=zxUrOaRmma+wbpYbZ8ky2LwD55TEVNRzgRSmJet+Xsll AEnGFbARC+84O6YdnAVxdZnGTy6twOVTuOHx5H3djG8GQAKLLd2aiNoRK6FhLizR BWlESP6UcH+arxs4EONQhSrHRsdD3X3mBjO10UWiSGEdWKLAUzr2wnE87GliY7mx g3xqYaVKuJLyrugzgvHHWFXVLmCbbPNhfLrZxJ93l/Tnq80s3CWG7BjCFhoMM8ia 33a7ZkVQ/7a08gcVzMeqIuQogwb671xoXCoAz2Ns29OrPkaQHHJzSdMTz7zyHehD NhFYU4+10DQAj5kYCgLS4GrG1elxOSmMmAZlnnI/0g=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudeffecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1vJ1k5G6nBBdX3Tdd8OBBye4xFikFv7u5/xqhsUT2nAlkS4QOEKeRfRuh4hE6w2CodgvXrh"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=dV6Op7yXoCQJ6PYZ8oBx8KgagBwLxcuZA0z1YL1OhwA=; b=atB9tRBSv3ETSFyIsGseKnYH+zlYtCe5EOV4BAf5eo7G21NAGDM2RTqze81f657HWz I6ApRj5D4ljpAFvdCAJEEMu0UPJVjpW1e/JDIB768+A4uVh/Zojk8NDiQENViBq3sySf /jF6gC8HfJdm0czWfpAx65lY5v6ixEAcpudE/3FAM+vY18+dgTcPABpW+OC5eHComsGJ YcNJJZ3TqbNIjpds587iL+LFBYwInHJmf1TNhA/sgtnvzLDGCQnGF8jSuF0lqfwdsAMj DakdNWvMP/zxvNnDVfSXN9eO3TGuTIJ4Y76iiPlA7iKyge97YdvUgTRLlundc8MyDfbV NtGA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=RjGmIye7; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=zxUrOaRm; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411249@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411249@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=RjGmIye7; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=zxUrOaRm; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411249@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411249@lists.postgresql.org"]}	["<CAAKRu_Ytbxqh4GtO0RENmKqhFzs6=AMpgMUn3zRMCt=wSnzrrQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:11:56+00	andres@anarazel.de	Re: [PATCH] Log details for client certificate failures	<20220715191156.jecddreykoakdljm@awork3.anarazel.de>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	190	9439	[]		Hi,\r\n\r\nOn 2022-07-15 09:46:40 -0700, Jacob Champion wrote:\r\n> On 7/15/22 09:34, Peter Eisentraut wrote:\r\n> > Committed like that.\r\n> \r\n> Thanks for all the reviews!\r\n\r\nThis might have been discussed somewhere, but I'm worried about emitting\r\nunescaped data from pre-auth clients. What guarantees that subject / issuer\r\nname only contain printable ascii-chars? Printing terminal control chars or\r\nsuch would not be great, nor would splitting a string at a multi-boundary.\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Fri, 15 Jul 2022 12:11:56 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657912332; cv=none; d=google.com; s=arc-20160816; b=N4lRQUcasduB8i28USTErfzQszLoXeoqQNyBR7mdQ34AfBBQ/pb3MhdZTC1eLtdslU ml7oo9WXLqWhfQV6coTV/TI2kt9lfkoti5hH5iQ8RA3Cp4JxKCwfSxiDQ03xhdcAUKt1 6F69LTt+HfsmMMxt01HccvB1bi9ZJG1qGDzjpJ/9KDba7vnjFtsPtpAnOGCGKe4Ska1v D5sNu7+IkyQ7wck721MQjxhpZ10yVF+HI0g6wrjpv5RTfUPGe9blXss61Myawwn1khx3 shyUZiRPpUwMvboxSyg2etT6qbq9NOc/qcNRvTQtI+ngh9vgMavf6jGdwjVg1YMiXnft qYoA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp211510jai; Fri, 15 Jul 2022 12:12:12 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id n64-20020a1c2743000000b003a2b2109171si5825050wmn.127.2022.07.15.12.12.12 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:12:12 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411258@lists.postgresql.org>) id 1oCQjT-0005RY-Sa for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:12:11 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCQjP-0003lv-6J for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:12:07 +0000", "from wout3-smtp.messagingengine.com ([64.147.123.19]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCQjI-00071J-IR for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:12:06 +0000", "from compute3.internal (compute3.nyi.internal [10.202.2.43]) by mailout.west.internal (Postfix) with ESMTP id 73B853200C5B; Fri, 15 Jul 2022 15:11:58 -0400 (EDT)", "from mailfrontend1 ([10.202.2.162]) by compute3.internal (MEProxy); Fri, 15 Jul 2022 15:11:58 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 15:11:57 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715191156.jecddreykoakdljm@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com> <CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com> <059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com> <0167a8c5-1754-9121-b994-0719a6493a21@timescale.com>"], "X-Me-Proxy": ["<xmx:_bvRYpQOqpJPmXF1h9RUNMIUIYNPDrCI9hN_GvXedXgqzvErrCFl2g> <xmx:_bvRYlzxNEDKv3Cb9so4zfUOxhDyScjTBXy1InWVuRnnjcx1O9H15Q> <xmx:_bvRYn4IGrE55ukt96h-P3vz4vBkbtPKmECK8_uh3e8jGYduRNFnUg> <xmx:_bvRYmrYtKmLWtS6-C0T0GgJa5lb9YKDgsznDlqEtJoCLgyAU03i7A>"], "X-Received": ["by 2002:a05:600c:3ac3:b0:3a0:45b6:7efb with SMTP id d3-20020a05600c3ac300b003a045b67efbmr21549394wms.183.1657912332204; Fri, 15 Jul 2022 12:12:12 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715191156.jecddreykoakdljm%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<0167a8c5-1754-9121-b994-0719a6493a21@timescale.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411258@lists.postgresql.org>"], "X-Me-Sender": ["<xms:_bvRYoiHsvZchKOzu4Bp890g5JZzuLwlM-F9-Eri1kVyBJG7FcEKIA> <xme:_bvRYhABHplrX7oUlum419YO9KmGkMKmA0MTcEh_v-MwFU1uq3IeXR4Kf77qFEu4M oUI-RuFg1IBMr1E2w>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411258@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:_bvRYgEs2_jO05Ng11ZfF_QeU3fkK0oZGg3F02h42DOgj0flIXZ2g-g4Iqy11i94P9IoHAOM_NuLZkdk2z9U-bCfg6m19zRkPsLNij9yGrq4teL93-IW2WyoOXS2>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657912317; x=1657998717; bh=o9P9vnS7mt RCJUpZvOMdvIVP3C/PIKPBrIBi4+crJ0M=; b=QwqGi5ejVIHlj3pgF3IzNlCylb RlZPpskjEncC2c6VZJGhyNxWmf6FaUu66S341d6MkEIaplLcPg0ZvWeA3kSUaBgf LdYfVn7U7hWZ45zM2sBdSi+VIhj9J2SRIHSLYAM0B9QvZyvu60rGXoB3WFAFgxJt 8e5wokePiMG1T9fMjRLBQHrOL51N3g4ucheCljqRMUTjg+wwhZDSwMkN/3WSpnaj f4UcIvEMpzcYu1XKQ8nwjvVK5qlAHq5sLQamV87u0KMH8pUzFGVR4BEVAjC77QuL FHVGwg14TP4kKlytYuPLjtKcDvRzPJFK1z5ZQdo5D2um5tRnyp1ukQ4po+Sg==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657912317; x=1657998717; bh=o9P9vnS7mtRCJUpZvOMdvIVP3C/P IKPBrIBi4+crJ0M=; b=pgA2eeO8hWdoUD4s4JklDuXA+JDrUV2wYJ0uU/HEti82 zaAkMhc5jJHiLbXaraRppEgFWt/9SvyEtEVtVznl40mFAqnqAdAHZ+LMoXmUUYaw nHR30cw4avIGsGNdEK390KUoZEUOGw/na/3R/J8R7cDl/ZT7CWO0oVt2w+5gPIZ9 RUWxC5NrbQYXn1qIrdH4XVyS4i8RoynkMfOOdtR/q+3YUQQEo7gqTe5YuZc+TOEV /FhaH0eT96pFQ/LbjX4tKXpjUlv4BilqxB/fKkNEvdUl1W1kweJAcIRhuMakXWZg Z5r1Pdy2RVwL+eSEq8rTeZtjLV4eT/ngquaC5Ad0VA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudefjecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1v1pet/FhYMnxSbMZ+fHuPeWulygk2mXpVb3N4Zjz22x3zpwcnhh0Hovq/75h6wBZ75bIFa"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=o9P9vnS7mtRCJUpZvOMdvIVP3C/PIKPBrIBi4+crJ0M=; b=xEdtbfYtapv2ffL1KQNYJLFrMqkU0iPPyhDeMyV3E9S9PgQLwGo2aEFdYJRac7eBYv v91gkCd4S4WSWggQVwyBOc88hylNwIy9v7k1x0nkTj68TG0HncnWZ/mc9x1/bV8MwnBI DZ9W6bl3CZc1To3h4n1BYAywXIhfveA5rO2rQiRaEzA0w7hZlJOiC/2ZTlPaErkP/gTe 4BsdOgKgb9gTLyFNPBdx/zANgzPQjc59IgBUrIIWu8P2p31qCr7GPbGvUv/zZG8IYOyN u6Z8QONRQgKU9plX7XNszM9ZJqnWX9a75bpH5dYMMN8rfMSUQVu3Xim16dbSWYlBd1I/ RUmw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=QwqGi5ej; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=pgA2eeO8; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411258@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411258@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=QwqGi5ej; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=pgA2eeO8; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411258@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411258@lists.postgresql.org"]}	["<0167a8c5-1754-9121-b994-0719a6493a21@timescale.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:14:58+00	tgl@sss.pgh.pa.us	Re: MERGE and parsing with prepared statements	<3438483.1657912498@sss.pgh.pa.us>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	191	6644	[]		Alvaro Herrera <alvherre@alvh.no-ip.org> writes:\r\n> On 2022-Jul-15, Justin Pryzby wrote:\r\n>> I see now that the same thing can happen with "ON CONFLICT" if used with a\r\n>> subselect.\r\n>> \r\n>> PREPARE p AS INSERT INTO t SELECT a FROM (SELECT $1 AS a)a\r\n>> ON CONFLICT (i) DO UPDATE SET i=excluded.i;\r\n>> ERROR:  column "i" is of type integer but expression is of type text\r\n\r\n> Right, I didn't think that MERGE was doing anything peculiar in this\r\n> respect.\r\n\r\nYeah.  The current theory about this is that if we haven't assigned a\r\ntype to an unknown-type parameter (or literal) that is an output\r\ncolumn of a sub-SELECT, we will as a rule force it to text.\r\nThat MERGE USING clause is a sub-SELECT, so that rule applies.\r\n\r\nThere is a hoary old exception to that rule, which is that if you\r\nwrite INSERT INTO tab SELECT ..., $1, ...\r\nwe will figure out the type of the column of "tab" that $1 is going\r\ninto, and force $1 to that type instead of text.  It looks like this\r\nalso works in INSERT ... VALUES.  You could make a case that MERGE\r\nshould be equally smart, but it's not clear to me that the info is\r\navailable sufficiently close by to make it reasonable to do that.\r\nIt looks like the MERGE syntax has a couple of levels of indirection,\r\nwhich'd probably be enough to put the kibosh on that idea -- in\r\nparticular, AFAICS there might not be a unique target column\r\ncorresponding to a given data_source column.\r\n\r\n\t\t\tregards, tom lane\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Matthias van de Meent <boekewurm+postgres@gmail.com>, pgsql-hackers@postgresql.org"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 15:14:58 -0400"], "From": ["Tom Lane <tgl@sss.pgh.pa.us>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657912514; cv=none; d=google.com; s=arc-20160816; b=E42QuAoRSd+FbHgEevKf2zFoRa/gSsZq8gTtupnq+TtjtWZyHAsCcois9NfzE0sSQf MHgtLO4GAHfHVpkMjqrUHWyh88nzvdKWB2Qi45YwTuVciwV+jSsncP/l4BaD7RiYXp4S Jy6IXM3i54TZMmKgSb4zQbd0huUo/tOelVgBAWn6Dv/G7cBr4raa7nnyPCFuIbrFD40N Sy7j1HQAHCKlLz2Ffah8A8MezhzEGVd4zaqF+9mMQUdFaiItvy0CUrdIYng7fe1Y6v6t o7rquzEz/HhUpEy06jbYGHSYpeNRwndSGfVYeK+moAqUibl2x5SFMYfcwDTB60Gu07yJ qs8Q=="], "Comments": ["In-reply-to Alvaro Herrera <alvherre@alvh.no-ip.org> message dated \\"Fri, 15 Jul 2022 20:40:19 +0200\\""], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp212092jai; Fri, 15 Jul 2022 12:15:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id 41-20020a056122072900b003688333008esi1291724vki.201.2022.07.15.12.15.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:15:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411260@lists.postgresql.org>) id 1oCQmP-0008Ei-5k for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:15:13 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCQmK-0006HT-Dt for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:15:08 +0000", "from sss.pgh.pa.us ([66.207.139.130]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tgl@sss.pgh.pa.us>) id 1oCQmF-0002XK-Ps for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:15:08 +0000", "from sss1.sss.pgh.pa.us (localhost [127.0.0.1]) by sss.pgh.pa.us (8.15.2/8.15.2) with ESMTP id 26FJEw2r3438484; Fri, 15 Jul 2022 15:14:58 -0400"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "Content-Id": ["<3438482.1657912498.1@sss.pgh.pa.us>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<3438483.1657912498@sss.pgh.pa.us>"], "Precedence": ["bulk"], "References": ["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"], "X-Received": ["by 2002:ab0:6dc9:0:b0:382:c1da:3e56 with SMTP id r9-20020ab06dc9000000b00382c1da3e56mr6318680uaf.123.1657912514054; Fri, 15 Jul 2022 12:15:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/3438483.1657912498%40sss.pgh.pa.us>"], "In-Reply-To": ["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411260@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=\\"us-ascii\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411260@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Google-Smtp-Source": ["AGRyM1v6nm6TT4rdGJfggdCiRKYjuRxgXeA6K27tsS5x+gNvvI1R/yNZuJoqD19VG4sgOOBxkjYi"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:message-id:date :content-id:mime-version:comments:references:in-reply-to:subject:cc :to:from; bh=m5UpFVF7BVbABYYSpfJX/9ptv4Sga4jYFa4JY1PHUsc=; b=yVdgbzEnVqblxNlLfJHgYtdb2j+rQtdbNJTgYIDvPALpaFJTQuF75zYC8X5OqtaNOW qZrLLyD8pJuOskuOnKy4FbCoAX8P8wkV0v7KIDW1xxQD6Yg4yPyc49Dzr3+26f9W+g+C IwxUHneUPdvcPbuZwljJGDMJPnmhDINXXz5B64GZNvFqqxpNH7Dzh9mj7L3KomQeXZ0r k3tQ6XFWIpYLSemDiX5CJv6jH8IJJfKO97+rIs69U1r5PR8R/HMtNB1RnmZl5by1TmH3 i6AgHV3uHh+fEobzYHdiwMr5QF28YIK2opW7eMo5hF0x4Q+mnpg0BQhwUCXzT3owz6+4 4wVA=="], "Authentication-Results": ["mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411260@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411260@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411260@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411260@lists.postgresql.org"]}	["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:17:51+00	david.g.johnston@gmail.com	Re: MERGE and parsing with prepared statements	<CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com>	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	192	10547	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Fri, Jul 15, 2022 at 11:40 AM Alvaro Herrera &lt;<a href="mailto:alvherre@alvh.no-ip.org">alvherre@alvh.no-ip.org</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On 2022-Jul-15, Justin Pryzby wrote:<br><br>\r\n&gt; It seems a bit odd that it&#39;s impossible to use merge with prepared statements<br>\r\n&gt; without specifically casting the source types (which I did now to continue my<br>\r\n&gt; experiment).<br>\r\n<br>\r\nI have no comments on this.¬† Maybe it can be improved, but I don&#39;t know<br>\r\nhow.<br><br></blockquote><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Not tested, but the example prepare command fails to make use of the optional data types specification.¬† Using that should remove the need to cast the parameter placeholder within the query itself.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">That said, in theory the INSERT specification of the MERGE could be used to either resolve unknowns or even forcibly¬†convert the data types of the relation produced by the USING clause to match the actual types required for the INSERT (since that will happen at insert time anyway).¬† This would make the UPDATE behavior slightly different than a top-level UPDATE command though, since that does not have the same context information.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div></div>\r\n	On Fri, Jul 15, 2022 at 11:40 AM Alvaro Herrera <alvherre@alvh.no-ip.org>\r\nwrote:\r\n\r\n> On 2022-Jul-15, Justin Pryzby wrote:\r\n>\r\n> > It seems a bit odd that it's impossible to use merge with prepared\r\n> statements\r\n> > without specifically casting the source types (which I did now to\r\n> continue my\r\n> > experiment).\r\n>\r\n> I have no comments on this.  Maybe it can be improved, but I don't know\r\n> how.\r\n>\r\n>\r\nNot tested, but the example prepare command fails to make use of the\r\noptional data types specification.  Using that should remove the need to\r\ncast the parameter placeholder within the query itself.\r\n\r\nThat said, in theory the INSERT specification of the MERGE could be used to\r\neither resolve unknowns or even forcibly convert the data types of the\r\nrelation produced by the USING clause to match the actual types required\r\nfor the INSERT (since that will happen at insert time anyway).  This would\r\nmake the UPDATE behavior slightly different than a top-level UPDATE command\r\nthough, since that does not have the same context information.\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Justin Pryzby <pryzby@telsasoft.com>, Matthias van de Meent <boekewurm+postgres@gmail.com>, Pg Hackers <pgsql-hackers@postgresql.org>"], "To": ["Alvaro Herrera <alvherre@alvh.no-ip.org>"], "Date": ["Fri, 15 Jul 2022 12:17:51 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657912698; cv=none; d=google.com; s=arc-20160816; b=IWFZYuzfXdY7QZekQdJolmisPw8diEsA7S4waUmM4ZVmlOwu+p8T5Ikvp7Mj4WMeUr yV+bfEdTeZqT2v6IKhmn9MDVDjxs+P4+w4SDjmRbWfyXxHoDGU/ytGA4WM5VINUDUzTi N2c3MK6Z1MxN+vYKY7VpHLJoU7YcUBU4AsNQppcmtAcwCxnNJZC6Nld3GqbqhcwfQAd4 P3UEJpLxQmusHiyW+pQr0rzFQCljL32zwDw7FGq6Pz+duh+Vyh4bh+0NDUdsGLotwTSe FEfalqRf3CZrI18O3vlek4RPgaHPxBfByPvxzV811cZQKU8prmaRZZ7SlrJJ3jc6IEzu VnCw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp212585jai; Fri, 15 Jul 2022 12:18:18 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id g7-20020ab00e07000000b00381c990cedasi1100075uak.59.2022.07.15.12.18.18 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:18:18 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411261@lists.postgresql.org>) id 1oCQpN-0003i3-KK for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:18:17 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCQpI-000295-QX for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:18:12 +0000", "from mail-ed1-x52c.google.com ([2a00:1450:4864:20::52c]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCQpG-000759-CN for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:18:11 +0000", "by mail-ed1-x52c.google.com with SMTP id v12so7487022edc.10 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 12:18:10 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220715175854.GM18011@telsasoft.com> <20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"], "X-Received": ["by 2002:a67:e08c:0:b0:357:2914:bc77 with SMTP id f12-20020a67e08c000000b003572914bc77mr6283869vsl.45.1657912698508; Fri, 15 Jul 2022 12:18:18 -0700 (PDT)", "by 2002:aa7:cdc9:0:b0:43a:7b6f:e569 with SMTP id h9-20020aa7cdc9000000b0043a7b6fe569mr20576879edw.401.1657912688621; Fri, 15 Jul 2022 12:18:08 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwbtQk52zWLYsXvO2%2BZGTPu%2BMPvWgaCS7jQKuGhrwn0-rA%40mail.gmail.com>"], "In-Reply-To": ["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411261@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000dfba7b05e3dce048\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411261@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=PHrx+T4fJlFV3uSf6QjBIdCUv4PnJA6ekZDPpDgH6gY=; b=ndZZ51HzuL/S46yibsioAt9hzMByYRycFXrPqAQf5wTk01pva/Lio5iL071n+OVoKt UMSaRGqFkNM/WVsyp22usES/52UGG7N+NOuOrYkfGfN4GNi6eZU1oY+IzlKraprBhqHc XiFe6Dq7c+4wSVn91kVZBpx1Bg3/pGCIWlWzU6E8SzxUhEmmd30JsIVcur/OUDtKG8JM 0yL6zqb1jyLFd09vHhtzvmTR1JmeC56bEggOnj339lFYgDi5UCbG/9x16lgfVZw41pSR anJ0+TdHFmuXrBBOX8dECFjQaBjEV/FKTemK9DSe4e9cVXjePJ30WxCqkzBEBZH4qF/n nCqA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8uF3ELqddaTe4nT7bcQ0tthImZWAN0SRc4GxeCZ8yHxASPjt6g QZpU8hrIcYD/nSl+rBv2eqscCD7JNWB97GlAzAQ="], "X-Google-Smtp-Source": ["AGRyM1st51HVLAnGA4GZ70kn13MHmQxJyuhC5YJqmNto/xaq3U57Q31g1sjjcNm3yqc3Exxetkhw"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=PHrx+T4fJlFV3uSf6QjBIdCUv4PnJA6ekZDPpDgH6gY=; b=pELc/HQBuaCA9RFc1p7JcVfB1xbBmVdMOtglBo192QmUhC37o5kw5u1DkvlScsfSgw 6gjj5rEQaJAhRUtkMoeA2+RkoSTKEMH0pOUl/18NEGwiHDB/jgniybVWWJV6xGznpFUW TmbdkL/+4JWMMadjai7XE/wgVL4hEMBd/xdDcbK3aEx7EoRHbSRYwGE3dwRtq4lunTop HlObJMqhZSi2gShSEjZ4YHPT4MgvhsnpATDxgIyDFuO3jNuLST6rlwcIAyHIyxsNB/Gb NNXRbj4LttN3Wpjar1hCr+AZXiub3dm72qd2r2gH13jCUAjikunyhh1/Q5sCWQoNGtsa vZ5A=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ndZZ51Hz; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411261@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411261@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=PHrx+T4fJlFV3uSf6QjBIdCUv4PnJA6ekZDPpDgH6gY=; b=HO03n/sKK/g8DQcBae9degyBvMkIZKmjoFdOG4LW8j9Mawno7qnxguUT98olHnJT9g 50aZnUeiVoK7D3W+dc/Xoa8Ij4x6Kk4MqB/34lnM5zGFaS8/Z2fRcugGy3Wxswpc969d t2KPAW0Arks9OVfvv6yRPxnOLloQXc3oRtAry73GPTEQWZj1ciYSIOveZrTmUgzERQbE 1/9uKR/74TAwXbxuOy0tFvLQUEFjXR1GvHJuC5LO2Zi+N362jVn0ah2YNHv3VQQ/JFnD FnnxnF4qwGQSCfL+hLsnt9HchASiKSpyBhwecb69IAufLKinArXe8utJprzlx4HtdEtj vBfA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=ndZZ51Hz; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411261@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411261@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220715184019.rour3mk33ngc76y6@alvherre.pgsql>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:36:38+00	david.g.johnston@gmail.com	Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter	<CAKFQuwb=A-OspAhFe=orTdtiesBFZqD5+yc_Y0q3VNMdp70ZpA@mail.gmail.com>	[{"Name": "Tom Lane", "Address": "tgl@sss.pgh.pa.us"}]	[{"Name": "Bruce Momjian", "Address": "bruce@momjian.us"}, {"Name": "PostgreSQL Hackers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	193	14249	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Thu, Jul 14, 2022 at 3:57 PM Tom Lane &lt;<a href="mailto:tgl@sss.pgh.pa.us">tgl@sss.pgh.pa.us</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">Bruce Momjian &lt;<a href="mailto:bruce@momjian.us" target="_blank">bruce@momjian.us</a>&gt; writes:<br>\r\n&gt; On Mon, Apr 25, 2022 at 08:33:47AM -0700, David G. Johnston wrote:<br>\r\n&gt;&gt; Both the location and name of the linked to section make no sense to me:<br>\r\n&gt;&gt; <a href="https://www.postgresql.org/docs/current/functions-admin.html#" rel="noreferrer" target="_blank">https://www.postgresql.org/docs/current/functions-admin.html#</a><br>\r\n&gt;&gt; FUNCTIONS-ADMIN-DBOBJECT<br>\r\n&gt;&gt; Neither¬†of the tables listed there manage (cause to change) anything.¬† They are<br>\r\n&gt;&gt; pure informational functions - size and path of objects respectively.¬† It<br>\r\n&gt;&gt; belongs in the previous chapter &quot;System Information Functions and Operators&quot;<br>\r\n&gt;&gt; with a different name.<br>\r\n<br>\r\n&gt; So, the section title is:<br>\r\n&gt;¬† ¬† ¬† ¬†9.27.7. Database Object Management Functions<br>\r\n&gt; I think the idea is that they _help_ to manage database objects by<br>\r\n&gt; reporting their size or location.¬† I do think it is in the right<br>\r\n&gt; chapter, but maybe needs a better title?¬† I can&#39;t think of one.<br>\r\n<br>\r\nI&#39;m hesitant to move functions to a different documentation page<br>\r\nwithout a really solid reason.¬† Just a couple days ago I fielded a<br>\r\ncomplaint from somebody who couldn&#39;t find string_to_array anymore<br>\r\nbecause we&#39;d moved it from &quot;array functions&quot; to &quot;string functions&quot;.<br>\r\n<br>\r\nI&#39;d be the first to say that the division between 9.26 and 9.27 is<br>\r\npretty arbitrary ... but without a clearer demarcation rule,<br>\r\nmoving functions between the two pages seems more likely to<br>\r\nadd confusion than subtract it.<br><br></blockquote><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I&#39;m not going to fight the prevailing winds on this one, much...but I&#39;ve probably been sitting on this annoyance for years since I use the ToC to find stuff fairly quickly in the docs.¬† This seems much more clear to me than a function than deciding whether a function that converts a string into an array belongs in the string chapter or the array chapter.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">On a related note, why itemize 9.27 in the table of contents but not 9.26?</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">I would ask that we at least rename it to:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Disk Usage Functions</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Since this would show in the ToC finding the name of the functions that allow one to compute disk usage, which is a question I probably see once a year, and what motivates this request, would be more likely to be found without skimming the entire 9.26 chapter (since I cannot see those table heading in the ToC) and not finding it and then stumbling upon in on a table the only deals with sizes but whose headers says nothing about sizes.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div></div>\r\n	On Thu, Jul 14, 2022 at 3:57 PM Tom Lane <tgl@sss.pgh.pa.us> wrote:\r\n\r\n> Bruce Momjian <bruce@momjian.us> writes:\r\n> > On Mon, Apr 25, 2022 at 08:33:47AM -0700, David G. Johnston wrote:\r\n> >> Both the location and name of the linked to section make no sense to me:\r\n> >> https://www.postgresql.org/docs/current/functions-admin.html#\r\n> >> FUNCTIONS-ADMIN-DBOBJECT\r\n> >> Neither of the tables listed there manage (cause to change) anything.\r\n> They are\r\n> >> pure informational functions - size and path of objects respectively.\r\n> It\r\n> >> belongs in the previous chapter "System Information Functions and\r\n> Operators"\r\n> >> with a different name.\r\n>\r\n> > So, the section title is:\r\n> >       9.27.7. Database Object Management Functions\r\n> > I think the idea is that they _help_ to manage database objects by\r\n> > reporting their size or location.  I do think it is in the right\r\n> > chapter, but maybe needs a better title?  I can't think of one.\r\n>\r\n> I'm hesitant to move functions to a different documentation page\r\n> without a really solid reason.  Just a couple days ago I fielded a\r\n> complaint from somebody who couldn't find string_to_array anymore\r\n> because we'd moved it from "array functions" to "string functions".\r\n>\r\n> I'd be the first to say that the division between 9.26 and 9.27 is\r\n> pretty arbitrary ... but without a clearer demarcation rule,\r\n> moving functions between the two pages seems more likely to\r\n> add confusion than subtract it.\r\n>\r\n>\r\nI'm not going to fight the prevailing winds on this one, much...but I've\r\nprobably been sitting on this annoyance for years since I use the ToC to\r\nfind stuff fairly quickly in the docs.  This seems much more clear to me\r\nthan a function than deciding whether a function that converts a string\r\ninto an array belongs in the string chapter or the array chapter.\r\n\r\nOn a related note, why itemize 9.27 in the table of contents but not 9.26?\r\n\r\nI would ask that we at least rename it to:\r\n\r\nDisk Usage Functions\r\n\r\nSince this would show in the ToC finding the name of the functions that\r\nallow one to compute disk usage, which is a question I probably see once a\r\nyear, and what motivates this request, would be more likely to be found\r\nwithout skimming the entire 9.26 chapter (since I cannot see those table\r\nheading in the ToC) and not finding it and then stumbling upon in on a\r\ntable the only deals with sizes but whose headers says nothing about sizes.\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Bruce Momjian <bruce@momjian.us>, PostgreSQL Hackers <pgsql-hackers@lists.postgresql.org>"], "To": ["Tom Lane <tgl@sss.pgh.pa.us>"], "Date": ["Fri, 15 Jul 2022 12:36:38 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: Move Section 9.27.7 (Data Object Management Functions) to System Information Chapter"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657913825; cv=none; d=google.com; s=arc-20160816; b=pWDqx0XMaPu8j+o6GfB0JhB5c0VtCx7mwBv9LiZjLrMJJDsLUT/G8rIDgBvXUIn+qM yW0KUsu3ygiisGCBOCGNPauqkH+v5g/xERtVwnu1phi7t8aABIXsxMdb4n7klOEpbqMt e+37PH8r2rjLzfnAwnYa7cs2BeXqyZHYmtu3SIVrH2g6SuaSV/rkkbTxd7SWsP+EtqVz rsUSASY3SFhmMsixcrMwapeqh75uo0bctQNn2o9E9A8tz3gq5hUkaCxdcr9MeMz5ZiNW aJ/IOATq+KQ4KTjUJsh1rxOCxx2+BQ0HocGazn22Q5RvwwgU85WcUkFxxFibMVS+oJAA f4cQ=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp215897jai; Fri, 15 Jul 2022 12:37:05 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u10-20020a05600c19ca00b003a04e0c0552si11259757wmq.15.2022.07.15.12.37.05 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:37:05 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411265@lists.postgresql.org>) id 1oCR7Y-0002RK-St for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:37:04 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCR7T-0000e5-SL for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:37:00 +0000", "from mail-ed1-x533.google.com ([2a00:1450:4864:20::533]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCR7R-0007Bu-1m for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:36:58 +0000", "by mail-ed1-x533.google.com with SMTP id x91so7585047ede.1 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 12:36:56 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwb=A-OspAhFe=orTdtiesBFZqD5+yc_Y0q3VNMdp70ZpA@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<CAKFQuwaN3hKxd79+LpaEjJsgruww-SFe5zE_iciwaL-hGVN8bA@mail.gmail.com> <YtCcDNsKw0AllD3O@momjian.us> <3170227.1657839449@sss.pgh.pa.us>"], "X-Received": ["by 2002:a5d:598e:0:b0:21d:869c:f6b5 with SMTP id n14-20020a5d598e000000b0021d869cf6b5mr14393071wri.399.1657913825308; Fri, 15 Jul 2022 12:37:05 -0700 (PDT)", "by 2002:a05:6402:414c:b0:435:1e2a:2c7f with SMTP id x12-20020a056402414c00b004351e2a2c7fmr21350441eda.132.1657913815308; Fri, 15 Jul 2022 12:36:55 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwb%3DA-OspAhFe%3DorTdtiesBFZqD5%2Byc_Y0q3VNMdp70ZpA%40mail.gmail.com>"], "In-Reply-To": ["<3170227.1657839449@sss.pgh.pa.us>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411265@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"000000000000079d7e05e3dd2464\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411265@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=xE5i3yf4wCCvSwxP64E3/UtuoHoCK9IK0Zvi56IgN4I=; b=E8QCLnwwsLY0ptqsZvZHmyvEiCxkaKOupCrDOfTxoUbBKm49jEBRTRE0URfdB+eqjv 9/XCzbj0EJ1nOdCZ2OYjICYCUXSwCRAAAgfugtcbPPVFrSe6zGFXmUM3++6oZddZaCKe UGQyOVe+zGZefKStGHhncXelmRBkxwzAMxvE/mP4jlrtrTMvQPhTnr1P9s0YSuGBQJZp oTGwOFeKLqXmnuAFGe5S6GcYn9ug+AfojN8TvqetwAjNiAnTcqJY/dBIKIfKRWE4GGSx YNYL+sJUlPZ9cBTLqiwa3O6xvCkHniP131C/e+g7PjhrBQJhvjwMwXimZASj4oIJcanX uugw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8SCdn36C3mlqdsN5sz4p5R2m8kJX8wzTLNW0HWS6MJJrLYp6Ex JKWQd3yBSbbJ7FcELQzk0NTopMjI3trM2xLVgh0="], "X-Google-Smtp-Source": ["AGRyM1vjTBgMzh0Asmkk3F/bGjfQc2rtY6o9Xh06rEYiXIjFyrJEGzStoSFSJXW3dqeEIvJ4DUrb"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=xE5i3yf4wCCvSwxP64E3/UtuoHoCK9IK0Zvi56IgN4I=; b=fi+e6whs28LcfK3iEJtPDu9M2RyXqTIvfQPp/E8qKWujhDQA704++SSgYMMGZrhDSP Av3nDRFbTHCXW8L8VHoTtB43IZr/Wu/vA7PYSNwf5OtJ9HQVwMoMjeJeKDVwFTTZj9ut oRO/5c+hwVfyqPrvHjpYIRlv4LOE1EeAn8tqOkA3elIHFSNACQ1DG/PQ+KcJCeoq87og jYZ31jcZtn/WK7Vsb3WQSxpwP5BIW69dfdGkNZgx5F1HXxrWTjtpgaLyKInvAIOiE8b7 c031EK3wvwmZiJUEzXO2VzQqhdjGyY2+kK7+EOEM6V3bHLxENmdYaYD5EGpDxT12R89W xeJA=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=E8QCLnww; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411265@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411265@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=xE5i3yf4wCCvSwxP64E3/UtuoHoCK9IK0Zvi56IgN4I=; b=FhXftHqoZjYDPMNz2q7PAIpMCXOYpqToMSLsFzO2L23RW1so2LmWerm5ajUPKGt7Kh lRcqO2TvKTKG92mLrWqUy6AqFjTfEHm3BzV2Mb3YMUnZ8kw1ySOXloY3GklAinV/pDW3 bcsnZbPEYQlddRuuPtLfzLtnWF7inkN6QeqLM9UMHdd6B0a3Xbv9KrJp+WRxCUStoAtP V7qu161QOoSPasG9gCUBR77l3jsNq3kTRzdNw+RMQtSdxb+Lb4LenaZ/PcsgKFLqu0Ac sTTY1ljoabR8QZ3NmPNa+8G8sqtMEYodpnaPgZb4osRVakhFtLluCbcgF8leJlDBTMP7 ZjnA=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=E8QCLnww; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411265@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411265@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<3170227.1657839449@sss.pgh.pa.us>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:40:14+00	pryzby@telsasoft.com	Re: MERGE and parsing with prepared statements	<20220715194013.GN18011@telsasoft.com>	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	194	10619	[]		On Fri, Jul 15, 2022 at 12:17:51PM -0700, David G. Johnston wrote:\r\n> On Fri, Jul 15, 2022 at 11:40 AM Alvaro Herrera <alvherre@alvh.no-ip.org> wrote:\r\n> > On 2022-Jul-15, Justin Pryzby wrote:\r\n> >\r\n> > > It seems a bit odd that it's impossible to use merge with prepared statements\r\n> > > without specifically casting the source types (which I did now to continue my\r\n> > > experiment).\r\n> >\r\n> > I have no comments on this.  Maybe it can be improved, but I don't know\r\n> > how.\r\n>\r\n> Not tested, but the example prepare command fails to make use of the\r\n> optional data types specification.  Using that should remove the need to\r\n> cast the parameter placeholder within the query itself.\r\n\r\nWhat optional data type specification ?\r\n\r\n> That said, in theory the INSERT specification of the MERGE could be used to\r\n> either resolve unknowns or even forcibly convert the data types of the\r\n> relation produced by the USING clause to match the actual types required\r\n> for the INSERT (since that will happen at insert time anyway).\r\n\r\nYeah.  I hadn't looked before, but just noticed this:\r\n\r\nhttps://www.postgresql.org/docs/devel/sql-merge.html\r\n| If the expression for any column is not of the correct data type, automatic type conversion will be attempted.\r\n\r\nThat appears to be copied from the INSERT page.\r\nWhat does that mean, if not that data types will be resolved as needed ?\r\n\r\nNote that if I add casts to the "ON" condition, MERGE complains about the\r\nINSERT VALUES.\r\n\r\nPREPARE p AS\r\nMERGE INTO CustomerAccount CA\r\nUSING (SELECT $1 AS CustomerId, $2 AS TransactionValue) AS T\r\nON CA.CustomerId = T.CustomerId::int\r\nWHEN NOT MATCHED THEN\r\n  INSERT (CustomerId, Balance)\r\n  VALUES (T.CustomerId, T.TransactionValue)\r\nWHEN MATCHED THEN\r\n  UPDATE SET Balance = Balance + TransactionValue;\r\n\r\nERROR:  column "customerid" is of type integer but expression is of type text\r\nLINE 7:   VALUES (T.CustomerId, T.TransactionValue)\r\n\r\n        postgres: pryzbyj postgres [local] PREPARE(transformAssignedExpr+0x3b6) [0x5605f9699e8e]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformInsertRow+0x2ce) [0x5605f9653a47]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformMergeStmt+0x7ec) [0x5605f968fe3b]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformStmt+0x70) [0x5605f9656071]\r\n        postgres: pryzbyj postgres [local] PREPARE(+0x1fa350) [0x5605f9657350]\r\n        postgres: pryzbyj postgres [local] PREPARE(transformTopLevelStmt+0x11) [0x5605f9657385]\r\n        postgres: pryzbyj postgres [local] PREPARE(parse_analyze_varparams+0x5b) [0x5605f96574f4]\r\n        postgres: pryzbyj postgres [local] PREPARE(pg_analyze_and_rewrite_varparams+0x38) [0x5605f991edfe]\r\n        postgres: pryzbyj postgres [local] PREPARE(PrepareQuery+0xcc) [0x5605f96f4155]\r\n        postgres: pryzbyj postgres [local] PREPARE(standard_ProcessUtility+0x4ea) [0x5605f99251a0]\r\n        postgres: pryzbyj postgres [local] PREPARE(ProcessUtility+0xdb) [0x5605f992587e]\r\n\r\n-- \r\nJustin\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Matthias van de Meent <boekewurm+postgres@gmail.com>, pgsql-hackers@postgresql.org"], "To": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "Date": ["Fri, 15 Jul 2022 14:40:14 -0500"], "From": ["Justin Pryzby <pryzby@telsasoft.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657914025; cv=none; d=google.com; s=arc-20160816; b=mer2a4O99JxLmvJB4UxzwGgFHZJo3j4pFGcRhTxfaoh+8eZvIivK9pIXgkhcNL/iOb IspYnNrmFNOliuAamLNGLbC1nf6/hPB2n8p4i2OY8oxED4Ir+qoXpOr1RgIjCblR0Ywt zccXyzWZrcnDtH2OcgC3EmFUY/K6GkKtD7WXGjeBwTdvSuxt8u+6PooFFxTM5fMZ1uAF /jxBXQrNBc68ppGoYU4iOnxX22NaU+va6Z0v5oPIWaaaAmL5w0yd6S5OH8mqt9IFqDuk gE4LmFfd9htC5p3s+sXh3zSUXg4uf8+zJsuZMBeokqDVXpXy3qEOfCZb6nRyZfwSLS9y kyvA=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp216343jai; Fri, 15 Jul 2022 12:40:25 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id d6-20020a1f9b06000000b0036ffe3511ffsi1119527vke.20.2022.07.15.12.40.25 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:40:25 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411266@lists.postgresql.org>) id 1oCRAm-0008T6-F5 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:40:24 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCRAh-0006qs-PD for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:40:19 +0000", "from mail-qt1-x82b.google.com ([2607:f8b0:4864:20::82b]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <pryzby@telsasoft.com>) id 1oCRAe-0007Du-MC for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:40:18 +0000", "by mail-qt1-x82b.google.com with SMTP id r21so3838526qtn.11 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 12:40:16 -0700 (PDT)", "from pryzbyj.telsasoft (charmander.telsasoft.com. [50.244.222.1]) by smtp.gmail.com with ESMTPSA id d22-20020a05620a159600b006b5517da3casm4486817qkk.22.2022.07.15.12.40.14 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128); Fri, 15 Jul 2022 12:40:15 -0700 (PDT)", "by pryzbyj.telsasoft (Postfix, from userid 1000) id 29089800D6A; Fri, 15 Jul 2022 14:40:14 -0500 (CDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715194013.GN18011@telsasoft.com>"], "Precedence": ["bulk"], "References": ["<20220715175854.GM18011@telsasoft.com> <20220715184019.rour3mk33ngc76y6@alvherre.pgsql> <CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com>"], "User-Agent": ["Mutt/1.9.4 (2018-02-28)"], "X-Received": ["by 2002:a67:d518:0:b0:357:45d8:f14c with SMTP id l24-20020a67d518000000b0035745d8f14cmr6504720vsj.15.1657914025509; Fri, 15 Jul 2022 12:40:25 -0700 (PDT)", "by 2002:a05:622a:1355:b0:31e:b6b5:6789 with SMTP id w21-20020a05622a135500b0031eb6b56789mr13694071qtk.499.1657914015732; Fri, 15 Jul 2022 12:40:15 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715194013.GN18011%40telsasoft.com>"], "In-Reply-To": ["<CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411266@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411266@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=telsasoft-com.20210112.gappssmtp.com; s=20210112; h=date:from:to:cc:subject:message-id:references:mime-version :content-disposition:in-reply-to:user-agent; bh=0Mox/DWa+ZUZYXaMmGalOM3M47PYX5/vp7AI0j/XG94=; b=IZMyGi4DbC0mmsTNai0q9DGWklpBhG8005oMSqT+e9SQEROK0D+fcWxxN3+YQd2yul P40GrquO2QI92bLeWQGgfY+7Qg75ecI9JcJcaETZ6k1edYdvWDggP7aNSop8McP7ASwg ehuxqKoBwb06GXFa+6wlP9ECwvggy1z7hjsxSYYKDaQ5YYazhpG9AcZgWFwxhsC4+mY9 NOwZJ5upGudBlDgBNnj/qOvQ00L0XTW7pNqFxW0GS3V+MmLOqW/HauLHGDBMvWfOGzzc iLxdzR+UIjAVqweFUu6EwpcVEdBBYQHkLAr9jxrO8Zxp6l3FRV7iKyaI2S522bqD5Pw8 2BJw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+ic4PW+RDZc/qRbsBgnIKxv46TdKUuTb3x607sj05ckuivD1qG 7IgQKOGddy18XX1pDWKhC5joFA=="], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1sPl8qiCQzy4dIPjBl/mlBJ4f0udodAIToI/oKVhcbyuUULkLVdzzmfMe70mKwimHKpTtzZ"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:user-agent:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:dkim-signature; bh=0Mox/DWa+ZUZYXaMmGalOM3M47PYX5/vp7AI0j/XG94=; b=HEC1KmTQkZKABLGJVrDN8RF4UIKWlS3Sm8v6uoNzWRxfaP1osWDL/Ouzk2j5eczMos KtmdkhJo7snU5FYnlhV3zh3Z7Bn8fw8aWfcL58QYOaM3Lq8gsHsS+FFpwCf7fcXAwk0V jgIO2zSN9b4ipCbkvVuK0KYQoQNYv6cGiLXqtHX40ElU4ZgluJgAwXDE6Vhf0CJOhakq r544UTkjWVZ1TEssS62FkKqQm3fllXDjhiyvcpbN8BP+hd0c4eh5n0LVShHfZkGw9Wc1 3iqvrzPkF1WFBumUt20L89R4TX+gGUp7MTJ0f27uot0WRFG7ONAw5+CfmlGLxag9IShU /VLg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=IZMyGi4D; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411266@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411266@lists.postgresql.org"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:date:from:to:cc:subject:message-id:references :mime-version:content-disposition:in-reply-to:user-agent; bh=0Mox/DWa+ZUZYXaMmGalOM3M47PYX5/vp7AI0j/XG94=; b=u8ZSj0i7u1hZ8t2eVvSjpPHCzGrrbxYTurKswKdFjRJ4bP54nJ0WH7FvDkfAz7PdOu 9ecGm05BcskabmbVSuwfcqNILX6cZwoxqg+DxpmOaQwrS2hUK46J7HEtFD/WYZgtw1+Q CC+kCwQ/NywS0rq4nv1G0JaAfg1/LyY0r8uc1QYHXW+J3/RosvyHbZG5gYmAc9sK2QAu 4PAIeZlBCpE5WnHDngAsVW1ommDSKycLY6mdNRmYc8Pdleww3yXeTUwERiPUiPq6q83N WCACIn9XjEV0gnWHyYKUQ75b8mmw77P6MKgcq1pwVjc2EA92JNnWKwESppGsakU9wTO2 FiWQ=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@telsasoft-com.20210112.gappssmtp.com header.s=20210112 header.b=IZMyGi4D; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411266@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411266@lists.postgresql.org"]}	["<CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:46:51+00	tomas.vondra@enterprisedb.com	Re: POC: GROUP BY optimization	<aada8f97-924e-5661-aead-257aa346899c@enterprisedb.com>	[{"Name": "David Rowley", "Address": "dgrowleyml@gmail.com"}]	[{"Name": "Zhihong Yu", "Address": "zyu@yugabyte.com"}, {"Name": "Andrey V. Lepikhov", "Address": "a.lepikhov@postgrespro.ru"}, {"Name": "Teodor Sigaev", "Address": "teodor@sigaev.ru"}, {"Name": "Tomas Vondra", "Address": "tomas.vondra@2ndquadrant.com"}, {"Name": "PostgreSQL Developers", "Address": "pgsql-hackers@lists.postgresql.org"}]	\N	195	10538	[]		\r\n\r\nOn 7/15/22 07:18, David Rowley wrote:\r\n> On Thu, 31 Mar 2022 at 12:19, Tomas Vondra\r\n> <tomas.vondra@enterprisedb.com> wrote:\r\n>> Pushed, after going through the patch once more, running check-world\r\n>> under valgrind, and updating the commit message.\r\n> \r\n> I'm still working in this area and I noticed that db0d67db2 updated\r\n> some regression tests in partition_aggregate.out without any care as\r\n> to what the test was testing.\r\n> \r\n> The comment above the test reads:\r\n> \r\n> -- Without ORDER BY clause, to test Gather at top-most path\r\n> \r\n> and you've changed the expected plan from being a parallel plan with a\r\n> Gather to being a serial plan. So it looks like the test might have\r\n> become useless.\r\n> \r\n\r\nI agree this is a mistake in db0d67db2 that makes the test useless.\r\n\r\n> I see that the original plan appears to come back with some\r\n> adjustments to parallel_setup_cost and parallel_tuple_cost. It seems a\r\n> bit strange to me that the changes with this patch would cause a\r\n> change of plan for this. There is only 1 GROUP BY column in the query\r\n> in question. There's no rearrangement to do with a single column GROUP\r\n> BY.\r\n> \r\n\r\nIt might seem a bit strange, but the patch tweaked the costing a bit, so\r\nit's not entirely unexpected. I'd bet the plan cost changed just a teeny\r\nbit, but enough to change the cheapest plan. The costing changed for all\r\ngroup counts, including a single group.\r\n\r\nregards\r\n\r\n-- \r\nTomas Vondra\r\nEnterpriseDB: http://www.enterprisedb.com\r\nThe Enterprise PostgreSQL Company\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Tomas Vondra", "Address": "tomas.vondra@enterprisedb.com"}]	{"Cc": ["Zhihong Yu <zyu@yugabyte.com>, \\"Andrey V. Lepikhov\\" <a.lepikhov@postgrespro.ru>, Teodor Sigaev <teodor@sigaev.ru>, Tomas Vondra <tomas.vondra@2ndquadrant.com>, PostgreSQL Developers <pgsql-hackers@lists.postgresql.org>"], "To": ["David Rowley <dgrowleyml@gmail.com>"], "Date": ["Fri, 15 Jul 2022 21:46:51 +0200"], "From": ["Tomas Vondra <tomas.vondra@enterprisedb.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: POC: GROUP BY optimization"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657914424; cv=none; d=google.com; s=arc-20160816; b=cQvTeVzTI0ds0wtqhC2sDBqZs7ghqNcelM6/mt9NfvFXraZP2+lfEPyCfhdvCX4k1j ONQoGDFhwNqxV2s6xrZ4NCJUBaDjaStZoGdKuqw6kDZEg0fmD595xZg6i3PF8/SVlG+R akw2Zuw7hC1iZLXcXVcTsMj1YxkYBbnlLUzn8RC6QOz4DMx38WdqHpVoT9wgLMyaVuxc tTyUNeUiqHMkxuirKWerM562IX+6WcR8s82nhay9908wAT1jgEM2OKraLdB8xnFQ/0w2 ZCZGAKW5LEX13a/f4xngYmbdJe3VXfG1TIxzwuxsdNX+SVmO2ClebI/q4JDAoO+LV8Bj w5vw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp217520jai; Fri, 15 Jul 2022 12:47:04 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id q20-20020a67d794000000b003544ba4c1fbsi1056514vsj.104.2022.07.15.12.47.04 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:47:04 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411269@lists.postgresql.org>) id 1oCRHD-0004Lb-EI for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:47:03 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <tomas.vondra@enterprisedb.com>) id 1oCRH8-0002Xc-5p for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:46:58 +0000", "from mail-lj1-x22d.google.com ([2a00:1450:4864:20::22d]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <tomas.vondra@enterprisedb.com>) id 1oCRH5-0007Hm-1l for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:46:57 +0000", "by mail-lj1-x22d.google.com with SMTP id q7so6762220lji.12 for <pgsql-hackers@lists.postgresql.org>; Fri, 15 Jul 2022 12:46:54 -0700 (PDT)", "from [10.137.0.17] (84-217-81-189.customers.ownit.se. [84.217.81.189]) by smtp.gmail.com with ESMTPSA id z5-20020a19f705000000b0048646c0af5csm1043113lfe.263.2022.07.15.12.46.51 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128); Fri, 15 Jul 2022 12:46:52 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "X-Gm-Spam": ["0"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<aada8f97-924e-5661-aead-257aa346899c@enterprisedb.com>"], "Precedence": ["bulk"], "References": ["<CA+q6zcVRrd-z4YZ4M43ccst7aGL9==w5r1fionRWhP9ot6mybQ@mail.gmail.com> <CALtqXTe4rKXHXxNNGVy0wHVwGYYJpy2QNPTN29qq+ErBJJakrA@mail.gmail.com> <b1d468ba-2961-044c-deab-817b9a900e9c@enterprisedb.com> <ba2eccf2-d623-c12c-f7c2-a58ac4917c83@enterprisedb.com> <006667af-fc50-0627-4be7-5d9cf665219f@enterprisedb.com> <dc933c66-41b9-8907-327e-f6361a690654@postgrespro.ru> <4ee5b15c-1ce0-59c7-8d4a-a1fd68ee0d12@postgrespro.ru> <721b3ff9-f214-f5d4-86c7-bae515bbec18@enterprisedb.com> <7bea462e-8c3e-0f8c-c7d5-f4daa12f3baf@postgrespro.ru> <9af89543-3d17-4c98-59de-1daa5bceeb06@enterprisedb.com> <9408e450-60c6-6fbc-d5c4-467bb0abfe67@postgrespro.ru> <44472925-f6c6-e8de-6f72-0451458532c4@enterprisedb.com> <CALNJ-vQp3WNV-kKuGsjSOhjRfdECA1Dbxa-vjAgOmQ4f4Qaw-Q@mail.gmail.com> <7a80a207-5e8e-b80c-476c-2d290b0526e9@enterprisedb.com> <65941e87-86c1-c09c-8ad5-8e102aebe8ee@enterprisedb.com> <CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_=ftgS79KeAZ92tnHKQ@mail.gmail.com>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.9.0"], "X-Received": ["by 2002:a67:a608:0:b0:356:edff:987 with SMTP id p8-20020a67a608000000b00356edff0987mr6898287vse.42.1657914424315; Fri, 15 Jul 2022 12:47:04 -0700 (PDT)", "by 2002:a2e:bea7:0:b0:25d:5eb6:7390 with SMTP id a39-20020a2ebea7000000b0025d5eb67390mr7337150ljr.269.1657914413253; Fri, 15 Jul 2022 12:46:53 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/aada8f97-924e-5661-aead-257aa346899c%40enterprisedb.com>"], "In-Reply-To": ["<CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_=ftgS79KeAZ92tnHKQ@mail.gmail.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411269@lists.postgresql.org>"], "X-Gm-Phishy": ["0"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411269@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=enterprisedb.com; s=google; h=message-id:date:mime-version:user-agent:subject:content-language:to :cc:references:from:in-reply-to:content-transfer-encoding; bh=PJekueJdeRkXhQXHCxYdJhmuhO0lg0wE5/eYMFyotOk=; b=aG+dxMZ7bJY9eIlVX2Yb/EiBrbxcDMgqvVL96T5dTYdXLtL6ehcUlz4mbDhC6nXkwI Mis6CfPlYFjzxN83PBK/f96shtu1CFdw+0o0lW/WnhGOMqxJR1v5B/3pdtU7FBGjB7Q1 S9lD2xBThBm/llQ5weMK5z2ij0REEm+YuzpYqcwK0TU+FWOfGUbjSvtNyy5g9Tmhai/G K3H/BCVHJv0EsXTZTN50txxsK0ctVau4Opa9K9SGsVAUCG/789s9oXt/ue5g7uEJjOtf nEPnYFev1NH4AOylfEcY7Zfvf7gjxoAJknoADWnPAMrMFo80Qtnxj/hUunAYQCE7scXq 3KUA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+ZTbC+3kxVij/4OOXklI7c79EcCkDqaqOk/OYDfBzb1LLSx+kQ 1A/Cy9KFlImWuNwgVqJIaGOmVA6Vel81qBPmpkT1ppihHfBJzwrYKtkdjrPHt0rwy4bm2evjy1H SNBI4RfksCjScdwk6F33XYHYZXYrJ0V0ftretfGX7Nh9SJl+IT6v+fXU9Y/JFhb0D+lh33t4Hjk GNLedXfGjvgjedBApU4jHqRSc0eDelWBmrqOPzwWPpxeVVLbcbnNJe"], "X-Cloud-Sec-Av-Info": ["enterprisedb,google_mail,monitor"], "X-Cloud-Sec-Av-Sent": ["true"], "X-Google-Smtp-Source": ["AGRyM1s+1JdR7KNzmGvf6hxDXCf0y7S928+XXDHL4dT8m04613YmkyVwZkrNUbTqemeUxGrDyuwE"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:from:references:cc:to :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=PJekueJdeRkXhQXHCxYdJhmuhO0lg0wE5/eYMFyotOk=; b=cJM+FRofaEnuFjRyI2DKxvM+MlsPaUBURlvjrZUO4d/2UXlLTvMTovehRoMSc6T7uf SqayVCsZeFtLxVmy9A4RZkRlbakC0O/wZysa6I5iU3Y1lXMWANffjkAxgx5C7qGWOQlg VKfI1bZifKOTwtAu1CjBUAkuH/WOkVvNOtlRBzTW2bYiYhyqELy+xMwpXkFfNgJ8EEKo U4pq4zaLZCuBO9zVfVRAvoX+zx2MORSEq2p3dKbHVLYHko9dOIrlSzB3q1Nnff+MYXmV Lnhz6AdsXlTDkky9nb4Yc7HQwsS//t0ctFUWZqMWxy2y5xxDuXzGgw1pvMuV1jpJgRCX fw7Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=aG+dxMZ7; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411269@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411269@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:message-id:date:mime-version:user-agent:subject :content-language:to:cc:references:from:in-reply-to :content-transfer-encoding; bh=PJekueJdeRkXhQXHCxYdJhmuhO0lg0wE5/eYMFyotOk=; b=KO1wzBjsf7Uf7Y9O3wAAEqU/vdxHnGYQs/9STcZeZ6MZGessX4iGrceVW6OzgB+HYz yaa5uPmy+IGFyGFdrPxlh0nAyHoU0wTvNN3yK7qAeaaUPMFjxA/blTpLsZDQR7ef6wCr sTaSdLY4tbRCf8vo05Q0e2hRmLuIEGI48IEoFjrJ2kCJ/RFG6LJg+pzwgcGGqTBnynip NfS8UQqsgR79i2o0kOUZCTtVNRvAWf4UjcYQoLKo4faYn3ItLanf4rUhEQAU+DegQITa Bz35mv36Yp1E1STQHSxmfuUgf7L53SbYuzaNvQ5hYvyfyTgh8M0hJIIsmG7PKOg0V6Yz 2VCw=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@enterprisedb.com header.s=google header.b=aG+dxMZ7; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411269@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411269@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=enterprisedb.com"]}	["<CAApHDvpVFgWzXdtUQkjyOPhNrNvumRi_=ftgS79KeAZ92tnHKQ@mail.gmail.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:53:59+00	david.g.johnston@gmail.com	Re: MERGE and parsing with prepared statements	<CAKFQuwZPuwyg=29ssWrO7oeJM4UFpwm3CSmbPMUDc34Y5Uso_Q@mail.gmail.com>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	196	10561	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Fri, Jul 15, 2022 at 12:40 PM Justin Pryzby &lt;<a href="mailto:pryzby@telsasoft.com">pryzby@telsasoft.com</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">On Fri, Jul 15, 2022 at 12:17:51PM -0700, David G. Johnston wrote:<br>\r\n&gt; On Fri, Jul 15, 2022 at 11:40 AM Alvaro Herrera &lt;<a href="mailto:alvherre@alvh.no-ip.org" target="_blank">alvherre@alvh.no-ip.org</a>&gt; wrote:<br>\r\n&gt; &gt; On 2022-Jul-15, Justin Pryzby wrote:<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; &gt; It seems a bit odd that it&#39;s impossible to use merge with prepared statements<br>\r\n&gt; &gt; &gt; without specifically casting the source types (which I did now to continue my<br>\r\n&gt; &gt; &gt; experiment).<br>\r\n&gt; &gt;<br>\r\n&gt; &gt; I have no comments on this.¬† Maybe it can be improved, but I don&#39;t know<br>\r\n&gt; &gt; how.<br>\r\n&gt;<br>\r\n&gt; Not tested, but the example prepare command fails to make use of the<br>\r\n&gt; optional data types specification.¬† Using that should remove the need to<br>\r\n&gt; cast the parameter placeholder within the query itself.<br>\r\n<br>\r\nWhat optional data type specification ?<br></blockquote><div><br></div><div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">The one documented here:</div><br></div><div><a href="https://www.postgresql.org/docs/current/sql-prepare.html">https://www.postgresql.org/docs/current/sql-prepare.html</a><br></div><div><br></div><div>PREPARE name [ ( data_type [, ...] ) ] AS statement<br></div><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div></div>\r\n	On Fri, Jul 15, 2022 at 12:40 PM Justin Pryzby <pryzby@telsasoft.com> wrote:\r\n\r\n> On Fri, Jul 15, 2022 at 12:17:51PM -0700, David G. Johnston wrote:\r\n> > On Fri, Jul 15, 2022 at 11:40 AM Alvaro Herrera <alvherre@alvh.no-ip.org>\r\n> wrote:\r\n> > > On 2022-Jul-15, Justin Pryzby wrote:\r\n> > >\r\n> > > > It seems a bit odd that it's impossible to use merge with prepared\r\n> statements\r\n> > > > without specifically casting the source types (which I did now to\r\n> continue my\r\n> > > > experiment).\r\n> > >\r\n> > > I have no comments on this.  Maybe it can be improved, but I don't know\r\n> > > how.\r\n> >\r\n> > Not tested, but the example prepare command fails to make use of the\r\n> > optional data types specification.  Using that should remove the need to\r\n> > cast the parameter placeholder within the query itself.\r\n>\r\n> What optional data type specification ?\r\n>\r\n\r\nThe one documented here:\r\n\r\nhttps://www.postgresql.org/docs/current/sql-prepare.html\r\n\r\nPREPARE name [ ( data_type [, ...] ) ] AS statement\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Matthias van de Meent <boekewurm+postgres@gmail.com>, Pg Hackers <pgsql-hackers@postgresql.org>"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Fri, 15 Jul 2022 12:53:59 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657914865; cv=none; d=google.com; s=arc-20160816; b=x2OP+TCahc0ofHiMB7PTt8de1RNYHZh+y/i9SR0JHrveoYBFeC2/mo968zNdUkmFCt 2JI1yyC1TxtMPk0HUBQJrvIGg7okxHZLStccWeI7nZyi9tjsVlLKnUGoyIIknG3Seanc GwUntBa4AG6bHbMPIakBdet3cmsc1OABSH5j5DF99mbM7VM2n5h//zck7IR9Et1UIxNn wx1lOWDx/MGXnO1GNhSi5x5GkJUgpTKI4t/oVNJ63pI343qwpKpEYc+nW5SIpM+Wa0Sd 2dJzxLHUh1ulqtjaqaAWJIzWski97mFRWM3+mIpCJNXCfoC/M8rD+TckO6PLCzDDCGOt Cz3g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp218681jai; Fri, 15 Jul 2022 12:54:25 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id l18-20020a05600c10d200b0039c5555e06fsi5377203wmd.29.2022.07.15.12.54.24 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 12:54:25 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411271@lists.postgresql.org>) id 1oCROK-0002mM-LZ for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 19:54:24 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCROF-0000uO-Rp for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:54:19 +0000", "from mail-ed1-x534.google.com ([2a00:1450:4864:20::534]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCROD-0007LL-Fd for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:54:18 +0000", "by mail-ed1-x534.google.com with SMTP id v12so7592135edc.10 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 12:54:17 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwZPuwyg=29ssWrO7oeJM4UFpwm3CSmbPMUDc34Y5Uso_Q@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220715175854.GM18011@telsasoft.com> <20220715184019.rour3mk33ngc76y6@alvherre.pgsql> <CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com> <20220715194013.GN18011@telsasoft.com>"], "X-Received": ["by 2002:a05:600c:154a:b0:3a1:7002:3486 with SMTP id f10-20020a05600c154a00b003a170023486mr21509661wmg.104.1657914865090; Fri, 15 Jul 2022 12:54:25 -0700 (PDT)", "by 2002:a50:fa8a:0:b0:43b:21d4:c8ab with SMTP id w10-20020a50fa8a000000b0043b21d4c8abmr13408418edr.417.1657914856142; Fri, 15 Jul 2022 12:54:16 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwZPuwyg%3D29ssWrO7oeJM4UFpwm3CSmbPMUDc34Y5Uso_Q%40mail.gmail.com>"], "In-Reply-To": ["<20220715194013.GN18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411271@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000011797f05e3dd62e5\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411271@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=lA7OCsONenrjyKo7PYh1I2bSjSDVT70sc87pBryrclg=; b=qxlL+55bPlKz0XQZ5ybcr6mmYj71fjmIB7Fdps+MPJ5Zlt7UCg81WeLh64CA1HX3er FDY6yxBmUw8NrsM6owvdSAXPDeITc3Aa1GUym3HCC7Hr2PK/+0cqqsuxRQB6EOr2E2uA vN+b+9Z+wHiHvz6JlVoaEfWKkqC7jFc1G+wZVup/+5S8qYremueZ4d7mMoM+0SkrthLq g1UwoofLtC2i6zZQtrXHles7SI7g8RvkBqm6X8nanWCq0WNg2ZqRtCey3zYEeViK9iVp v6c45BY31lNnazkCusnf74gGrnrCzQZ4Pxb77APWEvQhfbs5C1CjVdPHzH5X/Kubw+2S cbmA=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora8ZYRAG4tVCxhhz3QhhKxxT7J/0twRtivvmMN60FcKfl8MpEFVw eb2Z/2oorxcjVYTDSd4kqlM/tq4v5MKhKrAQfGY="], "X-Google-Smtp-Source": ["AGRyM1s9tnJCfUnOMO/MLOYKD/aW6al/N2/s8jRHgd83dpzrconlZhsdDF25eIfHRs+GN1Ww7Qee"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=lA7OCsONenrjyKo7PYh1I2bSjSDVT70sc87pBryrclg=; b=nxcoKhGb9VTURp/ow76cG4lCS0S/5obDvMSy4DpeqiN2feMimTn10r/cR952Fo8y4j lwaLcZh1XStarwpokbVSwL1BcPnZx1zwFP8QRo/KuNspuPNfrVgwoVcWT9xNB9EiBQg+ 4TaJoNf4pLkpGsfqtNBjizO1DlbAT+AORjstoffx3yzxBRkggHYEXFZxzASfuwwGEAJq BcA7PbzQyGJ/t3rEsQqDJNClh4PqpcSERWPsDrDLvanCGAnqoVrtYUerX19G5mH9Bq9w 4wEKoIQ8GNhjFH03xXHTCdFU67Nicvg90Mhw9s5WL7w7edLn2++AzxQKMOWxPgkbrbL7 B+Bg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qxlL+55b; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411271@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411271@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=lA7OCsONenrjyKo7PYh1I2bSjSDVT70sc87pBryrclg=; b=an92YsQzNkVSblaokfTUClV2uBImTjLTmnFbBdgLVL03hcMyHuy/1GvbaA/ouKqbSX +zqdzHLdzbPbAnCmNNHEUd7teTbdoNlP1Huj7W8r6unsxpkTXLeGygBk2vlXIhBOJ1+1 V954kJ1/V/9jLtGlScWS1ALkdlwE5KipFbJgL5CxuZlJBzmKgeypU0ZVOFtyZXeNm3Xk jflDkQUhujY844YeUNaBX0vT94RknXZuE+Z3WG7lzIApUIJu62cMbrL1s8WaQmpT/QFP vZNzsfcqHniPSRRV8V2waOueqVqIb1PQuk1TzSjZk636QItK/odqYld5Pk8Z/3GxHxg8 W2sw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=qxlL+55b; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411271@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411271@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220715194013.GN18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 19:59:34+00	david.g.johnston@gmail.com	Re: MERGE and parsing with prepared statements	<CAKFQuwb4X_WMoV_k=ybPWYybz+=T1JhPqkOY=xdoJNzMHEiBwg@mail.gmail.com>	[{"Name": "Justin Pryzby", "Address": "pryzby@telsasoft.com"}]	[{"Name": "Alvaro Herrera", "Address": "alvherre@alvh.no-ip.org"}, {"Name": "Matthias van de Meent", "Address": "boekewurm+postgres@gmail.com"}, {"Name": "Pg Hackers", "Address": "pgsql-hackers@postgresql.org"}]	\N	197	10893	[]	<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span style="font-family:Arial,Helvetica,sans-serif">On Fri, Jul 15, 2022 at 12:40 PM Justin Pryzby &lt;<a href="mailto:pryzby@telsasoft.com">pryzby@telsasoft.com</a>&gt; wrote:</span><br></div></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><br>\r\nThat appears to be copied from the INSERT page.<br>\r\nWhat does that mean, if not that data types will be resolved as needed ?<br></blockquote><div><br></div><div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Yep, and the system needs to resolve the type at a point where there is no contextual information and so it chooses text.</div></div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">\r\n<br>\r\nNote that if I add casts to the &quot;ON&quot; condition, MERGE complains about the<br>\r\nINSERT VALUES.<br>\r\n<br>\r\nPREPARE p AS<br>\r\nMERGE INTO CustomerAccount CA<br>\r\nUSING (SELECT $1 AS CustomerId, $2 AS TransactionValue) AS T<br>\r\nON CA.CustomerId = T.CustomerId::int<br>\r\nWHEN NOT MATCHED THEN<br>\r\n¬† INSERT (CustomerId, Balance)<br>\r\n¬† VALUES (T.CustomerId, T.TransactionValue)<br>\r\nWHEN MATCHED THEN<br>\r\n¬† UPDATE SET Balance = Balance + TransactionValue;<br>\r\n<br>\r\nERROR:¬† column &quot;customerid&quot; is of type integer but expression is of type text<br>\r\nLINE 7:¬† ¬†VALUES (T.CustomerId, T.TransactionValue)<br><br></blockquote><div><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Noted.¬† Not surprised.¬† That error was always present, it&#39;s just that the join happens first.¬† Since your fix narrowly targeted the join this error remained to be discovered.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">David J.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div></div>\r\n	On Fri, Jul 15, 2022 at 12:40 PM Justin Pryzby <pryzby@telsasoft.com> wrote:\r\n\r\n>\r\n> That appears to be copied from the INSERT page.\r\n> What does that mean, if not that data types will be resolved as needed ?\r\n>\r\n\r\nYep, and the system needs to resolve the type at a point where there is no\r\ncontextual information and so it chooses text.\r\n\r\n\r\n> Note that if I add casts to the "ON" condition, MERGE complains about the\r\n> INSERT VALUES.\r\n>\r\n> PREPARE p AS\r\n> MERGE INTO CustomerAccount CA\r\n> USING (SELECT $1 AS CustomerId, $2 AS TransactionValue) AS T\r\n> ON CA.CustomerId = T.CustomerId::int\r\n> WHEN NOT MATCHED THEN\r\n>   INSERT (CustomerId, Balance)\r\n>   VALUES (T.CustomerId, T.TransactionValue)\r\n> WHEN MATCHED THEN\r\n>   UPDATE SET Balance = Balance + TransactionValue;\r\n>\r\n> ERROR:  column "customerid" is of type integer but expression is of type\r\n> text\r\n> LINE 7:   VALUES (T.CustomerId, T.TransactionValue)\r\n>\r\n>\r\nNoted.  Not surprised.  That error was always present, it's just that the\r\njoin happens first.  Since your fix narrowly targeted the join this error\r\nremained to be discovered.\r\n\r\nDavid J.\r\n	[]	\N	["\\\\Seen"]	[{"Name": "David G. Johnston", "Address": "david.g.johnston@gmail.com"}]	{"Cc": ["Alvaro Herrera <alvherre@alvh.no-ip.org>, Matthias van de Meent <boekewurm+postgres@gmail.com>, Pg Hackers <pgsql-hackers@postgresql.org>"], "To": ["Justin Pryzby <pryzby@telsasoft.com>"], "Date": ["Fri, 15 Jul 2022 12:59:34 -0700"], "From": ["\\"David G. Johnston\\" <david.g.johnston@gmail.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: MERGE and parsing with prepared statements"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657915202; cv=none; d=google.com; s=arc-20160816; b=wxwNnE1jxqIubw6kNx81I50Nj2M0zbJSyp9mNgxAGzZJGBhnCNAoqPRBeR1Q3CtMx3 XbkAriEgcQRerk2uQDzaup6LRwcDYhIgp+5mfjbmA/8kh9SRjSpaRhZ+aP6i+5j44WdX mNvZzD/XK9rQQi+Ty3VXgcbpdocoB74BTwaOTlK0tg9p04qmu7jg5CvAo9JvwNRjuSbC CeDTrAUahj8xJwIAe6IHI+FeJ3Ie7hAvHAr9bQ1T/59Wf1Y+ZP7VDwX++8q0Z1TT92eU B3vw/b3M1tALCw8Ul3aoVyiN8qRd3zmVJYN0R/UnUF8N8Xf+fSSVYvTPyDU7RRiOpevN di3g=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp219458jai; Fri, 15 Jul 2022 13:00:02 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id b22-20020a67d396000000b003542a51ad2esi1040631vsj.703.2022.07.15.13.00.02 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 13:00:02 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411273@lists.postgresql.org>) id 1oCRTl-0002TE-7M for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 20:00:01 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCRTg-0000au-Dy for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 19:59:56 +0000", "from mail-ed1-x52e.google.com ([2a00:1450:4864:20::52e]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <david.g.johnston@gmail.com>) id 1oCRTe-0007Np-7P for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 19:59:55 +0000", "by mail-ed1-x52e.google.com with SMTP id w12so7588572edd.13 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 12:59:54 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<CAKFQuwb4X_WMoV_k=ybPWYybz+=T1JhPqkOY=xdoJNzMHEiBwg@mail.gmail.com>"], "Precedence": ["bulk"], "References": ["<20220715175854.GM18011@telsasoft.com> <20220715184019.rour3mk33ngc76y6@alvherre.pgsql> <CAKFQuwbtQk52zWLYsXvO2+ZGTPu+MPvWgaCS7jQKuGhrwn0-rA@mail.gmail.com> <20220715194013.GN18011@telsasoft.com>"], "X-Received": ["by 2002:a1f:f806:0:b0:375:515c:aa07 with SMTP id w6-20020a1ff806000000b00375515caa07mr1639279vkh.7.1657915202189; Fri, 15 Jul 2022 13:00:02 -0700 (PDT)", "by 2002:a05:6402:4411:b0:437:b723:72 with SMTP id y17-20020a056402441100b00437b7230072mr21292625eda.38.1657915191751; Fri, 15 Jul 2022 12:59:51 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/CAKFQuwb4X_WMoV_k%3DybPWYybz%2B%3DT1JhPqkOY%3DxdoJNzMHEiBwg%40mail.gmail.com>"], "In-Reply-To": ["<20220715194013.GN18011@telsasoft.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411273@lists.postgresql.org>"], "Content-Type": ["multipart/alternative; boundary=\\"00000000000012785305e3dd76af\\""], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411273@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112; h=mime-version:references:in-reply-to:from:date:message-id:subject:to :cc; bh=DPwYgeNN5YqxTgo4lLQw5n+tPQtI4IYvhVus5bRgoBg=; b=CNGgv7qYKWsfrFO14i+6THyJszS1+sABXCkdUawahbf/1R/WgjOjUDg4FhfKQvVuC+ FG39xPVJ2gvYttx4DYm8u0QMdfdOehdJx52FZsBFd3CLLM1GCXsDX5kaPh2664YscbQC Wbn0DRGImPpFo7anyuz7TMrUlG9AT4oNpcYU7RjA65fT5zydSzy+46e9lKzt4jZqbhFX +4aFbMOBxWa5NQiPNvEXg+8LdcM3QHw94BZ1KWj0antsJFn/dON/SB6bhaJ9C6CZwxdN fNxT6Ho3Fm2NEYngWJgEESrD8Dy7CYMvMff6Z62otwA6PNchxl++XmTTLscvRTqc99/u ZjYg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora9tUgXfrTyhAITex4irJCm1+Dnn1iPI1U8X7zgh9fBJoDxjT8AN o0qacZD0M56EM8nc7PowU6a+jznw2stvkNK+ZOM="], "X-Google-Smtp-Source": ["AGRyM1vPSnDT3c2QSheuBolnHRHKrUMZwnJ745NNHzUFZ6dTDksCQuKdAGmi83o6+/EMr3w1XZcz"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:cc:to:subject:message-id :date:from:in-reply-to:references:mime-version:dkim-signature; bh=DPwYgeNN5YqxTgo4lLQw5n+tPQtI4IYvhVus5bRgoBg=; b=KdQSgRiNOvQ0jjIXEm1SoCtHyZAWrps7PEAFHSWm5V5mrDa9/blBwgQv3manC3ubf2 34lhzqB8y7Lq5XwVlW2x4ckY5MyE61kaLPZc4UusXMhBh8odWdH2hXa/F7vcHZvphVWQ AWLV6A+ovkPjN54/DSbeeXxzyY1rYSPrEAkkjS7quZiM035XU77qBbyE6JS4N+crrR+Z dlZ09UqFtIN5rvNC0jQzpdeyhk19aPwXUW4KwkZt75jFfSSBTIDW6OfKvVjnAoJhcnwq dOVpTUlTWvOg7DvqpFVDpnViS/6tSoNfuex5Bt39zSSf55dcS90i6XI3CZLAdO1/sEiF tG7Q=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CNGgv7qY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411273@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411273@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:mime-version:references:in-reply-to:from:date :message-id:subject:to:cc; bh=DPwYgeNN5YqxTgo4lLQw5n+tPQtI4IYvhVus5bRgoBg=; b=xf0BrzdISOI6WaMf41hsgKAQzh75aeVVM9vx6jxwotGOswYcjYlfU6ysimV4avKtuH gCMzMYaBg4o2RhqRLNwvhdMEWHdbqrdT912xDYOj2M1yNRVid3y5aaci4fyKSRQ73o7Y 9cGt7hnyh1Mci7gTlbdiVv/hA9VJx2K2bjX/yEUKGHNFZ7H30tnlYI3+/8seqlrMcxfR PaFfwvN/DUJH52p2cQcrlFuUjliEAJE4G2VKHNuyXuBGY+AuAzG3JSmSvL49pAbkpscM FKw9HGaJD86IUpMU9shSJKqdSNOIoaYZeUQ1MpiWd96s2LU1lox405Wp8O7zTn8mNkCf Pkiw=="], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@gmail.com header.s=20210112 header.b=CNGgv7qY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411273@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411273@lists.postgresql.org; dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com"]}	["<20220715194013.GN18011@telsasoft.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 20:08:57+00	andres@anarazel.de	Re: optimize lookups in snapshot [sub]xip arrays	<20220715200857.nm2gc4weixwlwbnx@awork3.anarazel.de>	[{"Name": "Nathan Bossart", "Address": "nathandbossart@gmail.com"}, {"Name": "John Naylor", "Address": "jcnaylor@gmail.com"}]	[{"Name": "", "Address": "pgsql-hackers@postgresql.org"}]	\N	198	10203	[]		Hi,\r\n\r\nSounds worth pursuing.\r\n\r\nOn 2022-07-13 10:09:50 -0700, Nathan Bossart wrote:\r\n> The attached patch has some key differences from the previous proposal.\r\n> For example, the new patch uses simplehash instead of open-coding a new\r\n> hash table.\r\n\r\n+1\r\n\r\n> The attached patch waits until a lookup of [sub]xip before generating the\r\n> hash table, so we only need to allocate enough space for the current\r\n> elements in the [sub]xip array, and we avoid allocating extra memory for\r\n> workloads that do not need the hash tables.\r\n\r\nHm. Are there any contexts where we'd not want the potential for failing due\r\nto OOM?\r\n\r\nI wonder if we additionally / alternatively could use a faster method of\r\nsearching the array linearly, e.g. using SIMD.\r\n\r\n\r\nAnother thing that might be worth looking into is to sort the xip/subxip\r\narrays into a binary-search optimized layout. That'd make the binary search\r\nfaster, wouldn't require additional memory (a boolean indicating whether\r\nsorted somewhere, I guess), and would easily persist across copies of the\r\nsnapshot.\r\n\r\n\r\n> I'm slightly worried about increasing the number of memory\r\n> allocations in this code path, but the results above seemed encouraging on\r\n> that front.\r\n\r\nISMT that the test wouldn't be likely to show those issues.\r\n\r\n\r\n> These hash tables are regarded as ephemeral; they only live in\r\n> process-local memory and are never rewritten, copied, or\r\n> serialized.\r\n\r\nWhat does rewriting refer to here?\r\n\r\nNot convinced that's the right idea in case of copying. I think we often end\r\nup copying snapshots frequently, and building & allocating the hashed xids\r\nseparately every time seems not great.\r\n\r\n\r\n> +\tsnapshot->xiph = NULL;\r\n> +\tsnapshot->subxiph = NULL;\r\n\r\nDo we need separate hashes for these? ISTM that if we're overflowed then we\r\ndon't need ->subxip[h], and if not, then the action for an xid being in ->xip\r\nand ->subxiph is the same?\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["pgsql-hackers@postgresql.org"], "To": ["Nathan Bossart <nathandbossart@gmail.com>, John Naylor <jcnaylor@gmail.com>"], "Date": ["Fri, 15 Jul 2022 13:08:57 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: optimize lookups in snapshot [sub]xip arrays"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657915754; cv=none; d=google.com; s=arc-20160816; b=UviocEpVqrJeguGYN3/VojL7SJN+cg5xbaTbhbBXGQsoulFxqv4LEpoWn1VzDD3shp LRfssPqFnkHMiTSHR3Q/1QTPBIFv7qKWz9FJsiRIpykAqHcdIwyz7CvKexClZWwWECZp 06/5a0ASHS0j64P/fnioMhRDe7Kwt9+GgBb9klzzzXxkIe6wD/TKAxseHohoAGVjDnMg fu9M79qmFxtPoWu0J2dhJzJyUm00kQAq/RObKz/+rYt62KE6FQNni8WaOmAhnnF1o1My VC49DQT21h2kXmEZ+D2Fqc3BZZAbatuOsjKfMOmNczvsT56oLO/Pwb4i4vK+gH1Tz4Yh dSSg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp221462jai; Fri, 15 Jul 2022 13:09:14 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id o3-20020a05600002c300b0021b8ffb80bbsi7305173wry.186.2022.07.15.13.09.14 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 13:09:14 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411274@lists.postgresql.org>) id 1oCRcg-0003AZ-Gx for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 20:09:14 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCRca-0001PT-IQ for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 20:09:09 +0000", "from wout1-smtp.messagingengine.com ([64.147.123.24]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCRcV-00037f-A3 for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 20:09:08 +0000", "from compute1.internal (compute1.nyi.internal [10.202.2.41]) by mailout.west.internal (Postfix) with ESMTP id 3F61232009F6; Fri, 15 Jul 2022 16:08:59 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute1.internal (MEProxy); Fri, 15 Jul 2022 16:08:59 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 16:08:58 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715200857.nm2gc4weixwlwbnx@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<20220713170950.GA3116318@nathanxps13>"], "X-Me-Proxy": ["<xmx:WsnRYru16FHXOLdvArr3jjwIVNKwfRq0G24suOsDnsTF64wdO2WL2g> <xmx:WsnRYvcmA-L7HYloSLRnYJaASq6GLOBMs88_M8_QhnjdZjqNNDQfRQ> <xmx:WsnRYn0d9K4Vy1mnm-_BA3wKvGbomToq98GD4QzTv7uSVaVgR5Vzug> <xmx:WsnRYnGdPJxfucY-Vl2j5dLx2PIuEiJHwtiaWiBZ2ezRoIjaAkdZ1A>"], "X-Received": ["by 2002:a05:600c:1c93:b0:3a0:579e:9f44 with SMTP id k19-20020a05600c1c9300b003a0579e9f44mr16294925wms.82.1657915754840; Fri, 15 Jul 2022 13:09:14 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715200857.nm2gc4weixwlwbnx%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<20220713170950.GA3116318@nathanxps13>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411274@lists.postgresql.org>"], "X-Me-Sender": ["<xms:WsnRYnNp6KSfIByfFtyVnc5NTi7a4xdlsi1dnTmnhjUsASvPLRBqng> <xme:WsnRYh9UrD0nvUNEwbbDgMRn5TH7-q1kTP-KtgsOWg6MvLnRVefeqrMH8tsMvknnH ddsHZ64senaWvnx2A>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411274@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:WsnRYmQD6HunSm-S8gb1ezzK6Xf1ewm0lrz6fVngj4hSJvmBWK-ieWhqaBTYsFhZHLrK0KeQmZyNrtAaPe3u_sA8VV7m8ZqB229MJoIauggzx2a0EUr2h3JJLZPY>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657915738; x=1658002138; bh=5qkZE1WqPh SrudozMu4Tc1g6SjA0HuEmGz5wdyDzIcY=; b=ajMrOGJWE4qbiuIjTMh4WB54w3 Hg+KShYmjzk4Oz1VApovb7B3iB2qymY8kywao/Yvuf6vbJeGsFkC83dosdkwj2vN fW+Jf3YL/Q3cjIbX4pTe8t4+9NyFtZkitVs3kK/y0T5MTP2YMPQLGJnpXA9b1DpW /OMBFrOehHHMB06Ze1gMMHh4CWdxUsoMCKPtNC0WAaJ1ZUoenCxPe3ic96hCRJoJ 9HIkLrMmT031lVHIxXa95eNKhEL8rB/EeIO5+6frCkQ/aZqevme7VZFOaS2QryOy 4zoo499D7ktszrQD5lfly35r7ViWu2P4nItpRvUzl9PnY34PwrU82qVtBu1w==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657915738; x=1658002138; bh=5qkZE1WqPhSrudozMu4Tc1g6SjA0 HuEmGz5wdyDzIcY=; b=EPl604S1WTuG4cJrWjl78mMnfaC8mm6bPF/3m9ajQ3oX 7wExvmAoTIjl5gKitCQRcEbz1yi0FB0+2bEPCmL2OyQ0SzOq0Ghfcp1rVEN9Gfix i2k/UcE3uDSwSsLQ0Kg97GlGNPVdsYki4FabAeL47lG61Q/pSW6BBsvCcYbzxiKD +yRCbCkYwI918ByPAAid7oNwDebEWuFXHS6IVX9W3uh7wqslgo2rlcTMzJiB/nIB WB8jiMtMAsfrHfHKUtrXBqMmEf1Uri67MkY03NVCLlgu6jX9mRHQVDEY0I3Ge5B8 58BDjiximkIyTxy3doxtelfVxjD0dMYnHN4YOll3xQ=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudegkecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1v1vPSF7YuJPtklo7ea3a680JW1LTlmnQW0jKmP973vEP25xroOipl8T1EgLv5ON0yYacU3"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=5qkZE1WqPhSrudozMu4Tc1g6SjA0HuEmGz5wdyDzIcY=; b=0itEyla8yIhDW7oIPOKxyYi6qZq3+R161/hiWlQBrIVRZjL0Wt/51ysCyf5YBpEDgS 2AsRcZcjRH73iTvdYjGr0JLcfn6/VYIdfFIJS/ECRK7PshdZRb0tgnaVuC9IWidgbqik Iu/Q7QdnF7+bqU13nA8HFcDEcbIf5ZuH2/UtjAnqFOazqV/b65uXGiQmH/KMmvv261P7 9oDWKRUtZZ7IfBsHiKCnwswE3elDk7c5qT9X5f8zJHq18z5b/PoJJJVfSkKMoEJZrEJ5 Wq2qoJGL0YUggZE8cDwN/WRtjiRQtrmNpBMJTBjnU3/ZI68XJ4mIjB3Z+kotfsm9rL8j vrGw=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=ajMrOGJW; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=EPl604S1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411274@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411274@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=ajMrOGJW; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=EPl604S1; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411274@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411274@lists.postgresql.org"]}	["<20220713170950.GA3116318@nathanxps13>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 20:20:59+00	jchampion@timescale.com	Re: [PATCH] Log details for client certificate failures	<ca6eb74e-aafc-f7cc-50fd-a6b33bca858b@timescale.com>	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	199	9035	[]		On 7/15/22 12:11, Andres Freund wrote:\r\n> This might have been discussed somewhere, but I'm worried about emitting\r\n> unescaped data from pre-auth clients. What guarantees that subject / issuer\r\n> name only contain printable ascii-chars? Printing terminal control chars or\r\n> such would not be great, nor would splitting a string at a multi-boundary.\r\n\r\nHm. The last time I asked about that, Magnus pointed out that we reflect\r\nport->user_name as-is [1], so I kind of stopped worrying about it. Is\r\nthis more dangerous than that? (And do we want to fix it now,\r\nregardless?) What guarantees are we supposed to be making for log encoding?\r\n\r\nThanks,\r\n--Jacob\r\n\r\n[1]\r\nhttps://www.postgresql.org/message-id/CABUevExVHryTasKmtJW5RtU-dBesYj4bV7ggpeVMfiPCHCvLNA%40mail.gmail.com\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	{"Cc": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Andres Freund <andres@anarazel.de>"], "Date": ["Fri, 15 Jul 2022 13:20:59 -0700"], "From": ["Jacob Champion <jchampion@timescale.com>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657916469; cv=none; d=google.com; s=arc-20160816; b=gLEb9VhK3tC6Qh+B17r5KhfO75zifqiqBfVijVHuJjRdGN7yB5C+TaWBmnEPuu0Gy3 rpxpZcys6sHx6QWjuhieVEeXmtfSNSffrzG28JuqHRrsNopa7e3xNnHnLg7vKFuDMAXc 0/dOwPgJOHfMHq0/XjgKojKXXc2soRXzeRyT6nUx2PwGv43q1hIZnkkAd9UhZ4lV+OXf QZ9llHIqpEHAaID4YhKHTuWbqsWk6ogp4Ree+Uz3CMa2etiK70e3M3c1EMC8ojKjfFA1 0JxaqfCrQErkHM+/L0dlLniFuxZmM8rHUrXECKWMxtcx010Nos9B+2pBzCyyhUIc4aHi WMGg=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp223598jai; Fri, 15 Jul 2022 13:21:09 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id c7-20020a056000184700b0020fc38e4c1esi6294094wri.764.2022.07.15.13.21.09 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 13:21:09 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411277@lists.postgresql.org>) id 1oCRoD-0004KY-4J for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 20:21:09 +0000", "from makus.postgresql.org ([2001:4800:3e1:1::229]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCRo8-0002Jx-9q for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 20:21:04 +0000", "from mail-pg1-x529.google.com ([2607:f8b0:4864:20::529]) by makus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.92) (envelope-from <jchampion@timescale.com>) id 1oCRo5-0007Ww-Se for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 20:21:03 +0000", "by mail-pg1-x529.google.com with SMTP id s206so5369409pgs.3 for <pgsql-hackers@postgresql.org>; Fri, 15 Jul 2022 13:21:01 -0700 (PDT)", "from [192.168.1.21] ([50.39.205.221]) by smtp.gmail.com with ESMTPSA id d3-20020a170903230300b0015ee985999dsm3999310plh.97.2022.07.15.13.21.00 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128); Fri, 15 Jul 2022 13:21:00 -0700 (PDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<ca6eb74e-aafc-f7cc-50fd-a6b33bca858b@timescale.com>"], "Precedence": ["bulk"], "References": ["<CAAWbhmggsEacYW+cahN7USucsTgK9P4c5VMLaxWRdXvGQ=+BHA@mail.gmail.com> <CAAWbhmiHyYajeN-SGRo_Nix+XbLtMyVkWinAoFVFy1kpbWT-zg@mail.gmail.com> <61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com> <CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com> <059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com> <0167a8c5-1754-9121-b994-0719a6493a21@timescale.com> <20220715191156.jecddreykoakdljm@awork3.anarazel.de>"], "User-Agent": ["Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Thunderbird/91.11.0"], "X-Received": ["by 2002:adf:e9d1:0:b0:21d:b0f5:dd5 with SMTP id l17-20020adfe9d1000000b0021db0f50dd5mr14154786wrn.216.1657916469506; Fri, 15 Jul 2022 13:21:09 -0700 (PDT)", "by 2002:a63:f90d:0:b0:419:b112:91ea with SMTP id h13-20020a63f90d000000b00419b11291eamr9465899pgi.592.1657916460647; Fri, 15 Jul 2022 13:21:00 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/ca6eb74e-aafc-f7cc-50fd-a6b33bca858b%40timescale.com>"], "In-Reply-To": ["<20220715191156.jecddreykoakdljm@awork3.anarazel.de>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411277@lists.postgresql.org>"], "Content-Type": ["text/plain; charset=UTF-8"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411277@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=timescale.com; s=google; h=message-id:date:mime-version:user-agent:subject:content-language :references:from:to:cc:in-reply-to:content-transfer-encoding; bh=iuFIm4RjIBX9VnrqcdnloN2TcmVNtVwD0fgrAQWVfOs=; b=a5iGOXhYt5pp2afXx40X7qXPn60J4W3mpeTYYwiFPNyIkB4OBsZJKlFCejvJHxBliz 5vc3h06SgcRJmJH/wC4u9Q8EQcZ+PSex5CtODX8vYNtnaaxbYuPr2qQzkF0gc2qfdjNV f0T2SVTYIDKopHOQDCxxbCiT+Arr41KpGUpt8fJi+bUPt0jwDeYG5ZNZ5okItpkjZzBg 8bv3EHe43I2htca5Pm+3LThBRXrycJwxzA6iIOT+oSh5gOjot7b5NamlvZdpBsjZfujG KRom6lhBsSxeHbVWvXvVuZog34E5w8TvgDH0BVYO/32xpoQ/zH5Ah7jd5pbX68CZQuh3 zLNw=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "Content-Language": ["en-US"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Gm-Message-State": ["AJIora+Hvfgjiu606jjPhX+54+w/JP13PiRFiFFojyDOWSXsPevF+/uW U9cG+4fLqwdm6Xpn+GbijZjzLw=="], "X-Google-Smtp-Source": ["AGRyM1uTQvirW40pda6jD4vAjGWUSe8XpxRHsV/zV3EQrbreT+27LMk6EZYHBgb9mJDR0kvKsf3U"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id :content-transfer-encoding:in-reply-to:cc:to:from:references :content-language:subject:user-agent:mime-version:date:message-id :dkim-signature; bh=iuFIm4RjIBX9VnrqcdnloN2TcmVNtVwD0fgrAQWVfOs=; b=huPaOP4JrddL25FRhJwNxxEnbPG5A8G9lCUC0a2Ur32ls6BbL9P8JTsu0peBoSEkxo /xXsi8Xk/BfGxMvYkiOiU7JkYAkPFc6XKXTvT0Wg5epL2/9S36nlIeE7HMq52/0V1MiV ljlEw9Tu0iGVmltC4EzN4nwvdV2CxAG4GWuHDjXa2YUechsfIOMnWiq5b4aA0yeYjqcI 8JUSRqV1ckBAsQnWtNkSxM6WZmKyMFgVdhWPcGvVmEWD0uQd6nQ+HMxQXItC4Nb7Fufw qE+MQU5zO90wt/CmqF3wRskeQM4MdxVxyDxInEB+BwCER4xp7N4SZFfjUjE5884sw9L3 sJYg=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=a5iGOXhY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411277@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411277@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"], "X-Google-Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20210112; h=x-gm-message-state:message-id:date:mime-version:user-agent:subject :content-language:references:from:to:cc:in-reply-to :content-transfer-encoding; bh=iuFIm4RjIBX9VnrqcdnloN2TcmVNtVwD0fgrAQWVfOs=; b=g+OX8Br03nPhHT08NiV4AKXMgHLHsES4CDEKf5g8N20p5hw/u/AXgJwjM0A3dBDUMA YcarAaxBAx921YApKihN/+vmw3eLxMJPMZwkYLiRpS6AzWQRednvl3dj2ee5uinkyBXn 1Qq1TTS8Rf2xxTRCCY51ppXIxGg0CEzUu5KCBcC+Lu6xySvroKklRwxiyz32xC8qgip7 FIvugvTOB9qb6F4Z+f7zQvAktfFg5STbSbXC3m9EulmL7Urbk9fNsLdNwppnt95djTIp /6iGyEoSqn3xsOfXIhj2yblRDcOCoPaD3jpScKGFBXKIZHdwbe7j7uK/RpP1UAFXzMpm Bl5Q=="], "Content-Transfer-Encoding": ["7bit"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@timescale.com header.s=google header.b=a5iGOXhY; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411277@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411277@lists.postgresql.org; dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=timescale.com"]}	["<20220715191156.jecddreykoakdljm@awork3.anarazel.de>"]	pgsql-hackers	\N	{"connection_name": "imap"}
2022-07-15 20:35:00+00	andres@anarazel.de	Re: [PATCH] Log details for client certificate failures	<20220715203500.vanqxt23bmufjais@awork3.anarazel.de>	[{"Name": "Jacob Champion", "Address": "jchampion@timescale.com"}]	[{"Name": "Peter Eisentraut", "Address": "peter.eisentraut@enterprisedb.com"}, {"Name": "pgsql-hackers@postgresql.org", "Address": "pgsql-hackers@postgresql.org"}]	\N	200	10036	[]		Hi,\r\n\r\nOn 2022-07-15 13:20:59 -0700, Jacob Champion wrote:\r\n> On 7/15/22 12:11, Andres Freund wrote:\r\n> > This might have been discussed somewhere, but I'm worried about emitting\r\n> > unescaped data from pre-auth clients. What guarantees that subject / issuer\r\n> > name only contain printable ascii-chars? Printing terminal control chars or\r\n> > such would not be great, nor would splitting a string at a multi-boundary.\r\n> \r\n> Hm. The last time I asked about that, Magnus pointed out that we reflect\r\n> port->user_name as-is [1], so I kind of stopped worrying about it.\r\n\r\nI think we need to fix a number of these. But no, I don't think we should just\r\nadd more because we've not been careful in a bunch of other places.\r\n\r\n\r\n> Is this more dangerous than that?\r\n\r\nHard to say.\r\n\r\n\r\n> (And do we want to fix it now, regardless?)\r\n\r\nYes.\r\n\r\n\r\n> What guarantees are we supposed to be making for log encoding?\r\n\r\nI don't know, but I don't think not caring at all is a good\r\noption. Particularly for unauthenticated data I'd say that escaping everything\r\nbut printable ascii chars is a sensible approach.\r\n\r\nGreetings,\r\n\r\nAndres Freund\r\n\r\n\r\n	[]	\N	["\\\\Seen"]	[{"Name": "Andres Freund", "Address": "andres@anarazel.de"}]	{"Cc": ["Peter Eisentraut <peter.eisentraut@enterprisedb.com>, \\"pgsql-hackers@postgresql.org\\" <pgsql-hackers@postgresql.org>"], "To": ["Jacob Champion <jchampion@timescale.com>"], "Date": ["Fri, 15 Jul 2022 13:35:00 -0700"], "From": ["Andres Freund <andres@anarazel.de>"], "List-Id": ["<pgsql-hackers.lists.postgresql.org>"], "Subject": ["Re: [PATCH] Log details for client certificate failures"], "Arc-Seal": ["i=1; a=rsa-sha256; t=1657917313; cv=none; d=google.com; s=arc-20160816; b=HqNZYxLu8z0DlBoYFOgXh9YCfbSq+K7Cc2M1vLQfbIQczrE5QBN8tt2mm2nUF42oOa KsgrsWfxGvNFWA//jKedSqvKPAGmcSZPFSMbrKPFdU7VFa7/yZutINgo2avVTFky50AM fgduwYgsXWOwAqp9kXYhODMqg0jwbSUzQh75szv0rQD+aDmMvetXJ2ETFt+kiVhfCVaQ MkBvZliO9IkZcMwkfRrOEBIvp8G1pZH/H83W3d+s7aHu8EVeGbYTPW6xuwpEHutSj2qw Vh678lwo8YHkoT5sQJCj3FPG/8vxYqZ8kg1Emc32IGGi+4xPyPcJs5srdE6mew+fjNqr XlHw=="], "Received": ["by 2002:a05:6638:4007:0:0:0:0 with SMTP id i7csp225656jai; Fri, 15 Jul 2022 13:35:13 -0700 (PDT)", "from malur.postgresql.org (malur.postgresql.org. [2a02:16a8:dc51::56]) by mx.google.com with ESMTPS id u14-20020a67ab0e000000b003571ac2ede9si1111899vse.609.2022.07.15.13.35.12 for <postgres.email+pgsql-hackers@gmail.com> (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256); Fri, 15 Jul 2022 13:35:13 -0700 (PDT)", "from localhost ([127.0.0.1] helo=malur.postgresql.org) by malur.postgresql.org with esmtp (Exim 4.92) (envelope-from <pgsql-hackers-owner+M79098-411279@lists.postgresql.org>) id 1oCS1o-0001dQ-60 for postgres.email+pgsql-hackers@gmail.com; Fri, 15 Jul 2022 20:35:12 +0000", "from magus.postgresql.org ([2a02:c0:301:0:ffff::29]) by malur.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCS1j-0008UN-BI for pgsql-hackers@lists.postgresql.org; Fri, 15 Jul 2022 20:35:07 +0000", "from wout1-smtp.messagingengine.com ([64.147.123.24]) by magus.postgresql.org with esmtps (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92) (envelope-from <andres@anarazel.de>) id 1oCS1h-0003MP-0I for pgsql-hackers@postgresql.org; Fri, 15 Jul 2022 20:35:06 +0000", "from compute2.internal (compute2.nyi.internal [10.202.2.46]) by mailout.west.internal (Postfix) with ESMTP id D0E7732009F4; Fri, 15 Jul 2022 16:35:02 -0400 (EDT)", "from mailfrontend2 ([10.202.2.163]) by compute2.internal (MEProxy); Fri, 15 Jul 2022 16:35:03 -0400", "by mail.messagingengine.com (Postfix) with ESMTPA; Fri, 15 Jul 2022 16:35:02 -0400 (EDT)"], "List-Help": ["<https://lists.postgresql.org/manage/>"], "List-Post": ["<mailto:pgsql-hackers@lists.postgresql.org>"], "List-Owner": ["<mailto:pgsql-hackers-owner@lists.postgresql.org>"], "Message-Id": ["<20220715203500.vanqxt23bmufjais@awork3.anarazel.de>"], "Precedence": ["bulk"], "References": ["<61aa4b6c-9de2-d61b-821a-a34ab1e515e2@enterprisedb.com> <CAAWbhmgtVs0VciBwL4KbhQnLfTQKqwJjUUCxzA3SFECPn=ntTA@mail.gmail.com> <2ef20161-e99d-a6ea-a36d-577843a2daae@enterprisedb.com> <CAAWbhmiQVSAc_rOdW8q9R3GJehxkmaW5-CMbYLgrCjhotSs8Bg@mail.gmail.com> <49b48719-d6cf-9e03-fab3-e4505cf9d585@enterprisedb.com> <CAAWbhmhbM5zwjjVsYkhTOFrV308iFbsGceWiseSbFPQeq24Fww@mail.gmail.com> <059e67f5-3769-24c8-f460-4e5d87af529a@enterprisedb.com> <0167a8c5-1754-9121-b994-0719a6493a21@timescale.com> <20220715191156.jecddreykoakdljm@awork3.anarazel.de> <ca6eb74e-aafc-f7cc-50fd-a6b33bca858b@timescale.com>"], "X-Me-Proxy": ["<xmx:ds_RYpRkkvrKvdDEAzSQZPMGdpITTMTs-3rertSBWGQG4wgzyzaEJA> <xmx:ds_RYlyPZYNYxSAbqB_bh66wvJwoEZGLXIP4zqI5qjgj68BRLy4xSw> <xmx:ds_RYn5OwaIpsisLIXxYKqeVm85xSgwaI6eQb8n26huiLzVZH8ejgw> <xmx:ds_RYmruEcou-WqfVBSashcSxB-TXiaDxjTf3pOsrOl9uinAaR753w>"], "X-Received": ["by 2002:ab0:43e2:0:b0:383:546f:1297 with SMTP id l89-20020ab043e2000000b00383546f1297mr6601952ual.46.1657917313032; Fri, 15 Jul 2022 13:35:13 -0700 (PDT)"], "Archived-At": ["<https://www.postgresql.org/message-id/20220715203500.vanqxt23bmufjais%40awork3.anarazel.de>"], "Feedback-Id": ["id4a34324:Fastmail"], "In-Reply-To": ["<ca6eb74e-aafc-f7cc-50fd-a6b33bca858b@timescale.com>"], "Return-Path": ["<pgsql-hackers-owner+M79098-411279@lists.postgresql.org>"], "X-Me-Sender": ["<xms:ds_RYohFNSWN0ngxSp10e4AuKnQhxltevxsXsJUTV8QDCNh4nWPS3A> <xme:ds_RYhDnfAV4Ttm9OQj8f9K4YoB6SUS7WQImDE6a7YB5IST7x3D4GEIq086Pe1-xK wtgpCRl5oGnY4Ml1A>"], "Content-Type": ["text/plain; charset=us-ascii"], "Delivered-To": ["postgres.email+pgsql-hackers@gmail.com"], "List-Archive": ["<https://www.postgresql.org/list/pgsql-hackers>"], "Mime-Version": ["1.0"], "Received-Spf": ["pass (google.com: domain of pgsql-hackers-owner+m79098-411279@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) client-ip=2a02:16a8:dc51::56;"], "X-Me-Received": ["<xmr:ds_RYgEa52c3m1A4Q2TSx0pG61eSn8bqpbGVHkqJ64a_eIRlM2_G5ECo1qvounskPFfBqMyJTvNcae1fyNnSNu3B2aA7RHBpZiCIAn9iT4AL6VSXV5Ol0Nkk_6FD>"], "Dkim-Signature": ["v=1; a=rsa-sha256; c=relaxed/relaxed; d=anarazel.de; h= cc:cc:content-type:date:date:from:from:in-reply-to:in-reply-to :message-id:mime-version:references:reply-to:sender:subject :subject:to:to; s=fm3; t=1657917302; x=1658003702; bh=2fzhSAlZ1U xUVYxCQ+GnThT5MkR+dxHlSlkr8S4YgEA=; b=Jq8oNd59X2/FahmChs6XuiYN4Q Zic3KAqUQ1e75Cd9ZoyTTexU02aZn0Y5dCyLK/fAYLLEXj3AYvfVSPihjk2d0zB7 fhBLSGVysQwBIBvZGsG45BoxRsAwdRy45BxUL5cQvWoW3m6SNGNoMOLMJ3hLM1Xc /spYiQsfzSaCQRkZkRjHp+lf5wW81sJLATKcD5yd4ibSO5NHEL7Nhuh2hwRX1Wg7 zrN0TgY6/9kh3LMlJ4Is1XZxbfKEYxw9P5v5Sm9YW04jyNI28oti7AES5h8atrMh UAeo+fn21Fax6K7uBefmbMpuJPhxkOLkiew7TmzAe1NBFxBMuJSH4lSA0Tpw==", "v=1; a=rsa-sha256; c=relaxed/relaxed; d= messagingengine.com; h=cc:cc:content-type:date:date:feedback-id :feedback-id:from:from:in-reply-to:in-reply-to:message-id :mime-version:references:reply-to:sender:subject:subject:to:to :x-me-proxy:x-me-proxy:x-me-sender:x-me-sender:x-sasl-enc; s= fm3; t=1657917302; x=1658003702; bh=2fzhSAlZ1UxUVYxCQ+GnThT5MkR+ dxHlSlkr8S4YgEA=; b=tJDCS8MS7dVqRFswIXeim/gaAcFJ9+Qy38I+WVUSBmq+ 1XnOkYwJkSCTeo6YeMxw+ygDymVrrBX5rew9q+dU7KCglEdUYdp+RZLbhLRjd1oj m1AdmekLeuWsa1wZ+x7oc5EVi5XfWAaJTqlI6VITSVCyDzQerwfNFCPIO6YmPRyV AQnO9ShnAEnKj+TfIm+xnOGPsz/eZtiMBkOhXvK0mQa7OUtWrS2LOTyc1qqMwpqk 7BXcVWbW9ecONJiwKDRjRDJEmBx7GTE6yNuBBiL2oDMct0xcUNXkbOd6ax3RbkQ1 oNiKYl+xbuTmEeEQzsux+rBFq/1CvpsE5sQwi2Y4gg=="], "List-Subscribe": ["<https://lists.postgresql.org/manage/>"], "List-Unsubscribe": ["<https://lists.postgresql.org/unsub/36/cc66d80580baf431414c26756209b9bc745bb5fb0f524db42b2b56682cd1087f/>"], "X-Me-Proxy-Cause": ["gggruggvucftvghtrhhoucdtuddrgedvfedrudekuddgudehgecutefuodetggdotefrod ftvfcurfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfgh necuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd enucfjughrpeffhffvvefukfhfgggtuggjsehttdertddttddvnecuhfhrohhmpeetnhgu rhgvshcuhfhrvghunhguuceorghnughrvghssegrnhgrrhgriigvlhdruggvqeenucggtf frrghtthgvrhhnpedvffefvefhteevffegieetfefhtddvffejvefhueetgeeludehteev udeitedtudenucevlhhushhtvghrufhiiigvpedtnecurfgrrhgrmhepmhgrihhlfhhroh hmpegrnhgurhgvshesrghnrghrrgiivghlrdguvg"], "Content-Disposition": ["inline"], "X-Google-Smtp-Source": ["AGRyM1tF2nXCyP7yYJFOD3mt0YB7oHh6R5d7Np3DFAA4Rnu3L1P/R26raTeWcykaYUjHwjw06EZ9"], "Arc-Message-Signature": ["i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-unsubscribe:precedence:archived-at:list-archive:list-owner :list-post:list-subscribe:list-help:list-id:in-reply-to :content-disposition:mime-version:references:message-id:subject:cc :to:from:date:feedback-id:dkim-signature:dkim-signature; bh=2fzhSAlZ1UxUVYxCQ+GnThT5MkR+dxHlSlkr8S4YgEA=; b=POE5y25JTEo+RWzLfeOMYAAjorzSwswV5LnvdOPnzSStjxCRofeud74B8zz4scAHJ1 xQUMl4ZlSjgV1ZUMh3tr7y2xTE6vP91rPrMxqaBPEUXrfkLLynQQz8zy7w/vSVdiEmmr utjBQMaSrWWYGUVkZ07+zKomzUUAvA16Xthk0bGKYigXonV7E+QfGV196m5NqQbzl1J1 v0SrCeYJ5Rvg8H8zGjjXI3SlugEJ7m9NvOP2w/0ysf6fDFJoFc1jyANTEeMcqqX39OxR 2vw2hRvQNuakn9SQe19KWSbBfKPm05i1eBIaoqQZ6eR4eHb4UoRpJXmexuMd6oeNzAO8 Jsww=="], "Authentication-Results": ["mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=Jq8oNd59; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=tJDCS8MS; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411279@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411279@lists.postgresql.org"], "Arc-Authentication-Results": ["i=1; mx.google.com; dkim=pass header.i=@anarazel.de header.s=fm3 header.b=Jq8oNd59; dkim=pass header.i=@messagingengine.com header.s=fm3 header.b=tJDCS8MS; spf=pass (google.com: domain of pgsql-hackers-owner+m79098-411279@lists.postgresql.org designates 2a02:16a8:dc51::56 as permitted sender) smtp.mailfrom=pgsql-hackers-owner+M79098-411279@lists.postgresql.org"]}	["<ca6eb74e-aafc-f7cc-50fd-a6b33bca858b@timescale.com>"]	pgsql-hackers	\N	{"connection_name": "imap"}
\.

