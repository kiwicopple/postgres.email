{
  "fixtures": [
    {
      "name": "codeblocks_and_links",
      "id": "<CACJufxHu0sXO8791FDcNXp2bFnE89jyuGkJbLCQkhgWq6XuNLg@mail.gmail.com>",
      "description": "Email with code blocks and links - testing that formatting is preserved",
      "body_text": "hi.\nOn select cast(NULL::text as unknown);\n\nwe got:\nERROR:  failed to find conversion function from unknown to text\n\nfrom src/backend/parser/parse_coerce.c:\nthe code path is:\ncoerce_type:\n\n    case UNKNOWNOID:\n        /*\n         * We permit coercing an unknown constant to any non-array target type,\n         * so long as we can coerce the constant's presumed type to the target.\n         * This is useful for example with VALUES clauses.\n         */\n        if (node && IsA(node, Const) &&\n            !targetTypeId->typelem)\n        {\n            Const      *con = (Const *) node;\n\n            /* If target is a domain, apply constraints */\n            if (targetTypeId->typtype == TYPTYPE_DOMAIN)\n                con = coerce_to_domain((Node *) con, InvalidOid, -1,\n                                      targetTypeId->oid,\n                                      COERCE_IMPLICIT_CAST, -1,\n                                      false, false);\n            return (Node *) con;\n        }\n        break;\n\n  as you can see the code path only coerce type UNKNOWNOID to other types if it is a Const node.\n\nBut if I have a real table, with one column as text type.\nsee also https://www.postgresql.org/message-id/20070406175131.3FABF7FED85%40cvs.postgresql.org\n\nI also found similar discussion at:\nhttps://www.postgresql.org/message-id/87blddjojx.fsf%40news-spur.riddles.org.uk\n\n--\nRegards,\nJian He"
    },
    {
      "name": "simple_text_with_url",
      "description": "Simple email with plain text and a URL",
      "body_text": "Hello everyone,\n\nCheck out this documentation:\nhttps://www.postgresql.org/docs/current/\n\nThanks!"
    },
    {
      "name": "quoted_text",
      "description": "Email with quoted reply text",
      "body_text": "I agree with your assessment.\n\n> On Jan 15, 2026, someone wrote:\n> This is the original message that I'm replying to.\n> It has multiple lines.\n>\n> And a paragraph break.\n\nLet me know if you have any questions."
    },
    {
      "name": "nested_quotes",
      "description": "Email with multiple levels of quoting",
      "body_text": "Here's my response:\n\n> I think this is a good idea.\n>\n>> But what about this concern?\n>>\n>> It seems important.\n>\n> I addressed that in my previous email.\n\nDoes this clarify things?"
    },
    {
      "name": "code_block_indented",
      "description": "Email with indented code block",
      "body_text": "Here's the fix:\n\n    SELECT * FROM users\n    WHERE id = 1;\n\n    UPDATE users\n    SET name = 'John'\n    WHERE id = 1;\n\nThis should work now."
    },
    {
      "name": "mixed_content",
      "description": "Email with mixed content: code, quotes, and links",
      "body_text": "Thanks for reporting this issue.\n\n> The query is failing with this error:\n> ERROR: division by zero\n\nI think the problem is in this section:\n\n    def calculate(x, y):\n        return x / y\n\nYou can find more info at:\nhttps://docs.python.org/3/library/exceptions.html\n\nLet me know if this helps!"
    },
    {
      "name": "url_in_angle_brackets",
      "description": "Email with URLs wrapped in angle brackets",
      "body_text": "Please review the following:\n\n<https://github.com/postgres/postgres/pull/123>\n<https://www.example.com/docs>\n\nThank you!"
    },
    {
      "name": "tab_indented_code",
      "description": "Email with tab-indented code",
      "body_text": "Here's the implementation:\n\n\tfunction test() {\n\t\tconsole.log('hello');\n\t\treturn true;\n\t}\n\nThis uses tab indentation."
    },
    {
      "name": "four_space_indented_code",
      "description": "Email with 4-space indented code",
      "body_text": "Example code:\n\n    if (condition) {\n        doSomething();\n    }\n\nShould be formatted as code."
    },
    {
      "name": "two_space_indented_code",
      "description": "Email with 2-space indented code",
      "body_text": "JavaScript example:\n\n  function add(a, b) {\n    return a + b;\n  }\n\nNote the 2-space indent."
    },
    {
      "name": "code_block_with_blank_lines",
      "description": "Code block with internal blank lines",
      "body_text": "Here's the function:\n\n    def process():\n        step_one()\n\n        step_two()\n\n        return result\n\nThe blank lines should be preserved."
    },
    {
      "name": "multiple_paragraphs",
      "description": "Email with multiple paragraphs separated by blank lines",
      "body_text": "This is the first paragraph.\n\nThis is the second paragraph.\n\nAnd here's a third paragraph with more content.\nThis line continues the third paragraph."
    },
    {
      "name": "url_without_protocol",
      "description": "Email with various URL formats",
      "body_text": "Check these links:\nhttps://www.example.com/path\nhttp://old-site.com\n\nAlso mentioned: <https://github.com/repo>"
    },
    {
      "name": "empty_body",
      "description": "Email with null/empty body",
      "body_text": null
    },
    {
      "name": "only_whitespace",
      "description": "Email with only whitespace",
      "body_text": "   \n\n  \n\n"
    },
    {
      "name": "sql_in_email",
      "description": "Email containing SQL code",
      "body_text": "The query that's causing issues:\n\n    SELECT u.id, u.name, COUNT(o.id) as order_count\n    FROM users u\n    LEFT JOIN orders o ON u.id = o.user_id\n    WHERE u.created_at > '2024-01-01'\n    GROUP BY u.id, u.name\n    HAVING COUNT(o.id) > 5;\n\nLet me know if you need help optimizing it."
    },
    {
      "name": "patch_diff_format",
      "description": "Email containing a patch/diff",
      "body_text": "Here's the proposed change:\n\n    --- a/src/backend/parser/parse_coerce.c\n    +++ b/src/backend/parser/parse_coerce.c\n    @@ -123,6 +123,9 @@\n     case UNKNOWNOID:\n    +    if (targetTypeId == UNKNOWNOID)\n    +        return node;\n    +\n         /* existing code */\n\nWhat do you think?"
    },
    {
      "name": "decoupling_our_alignment_assumptions_about",
      "id": "<1127261.1769649624@sss.pgh.pa.us>",
      "description": "Decoupling our alignment assumptions about int64 and double",
      "body_text": "Over in the long-running thread about resurrecting AIX support,\none salient concern is that AIX has alignof(int64) = 8 but\nalignof(double) = 4.  This breaks all our code that supposes\nthat ALIGNOF_DOUBLE is the platform's maximum alignment spec.\nWe had coped with this via various unspeakable klugery back\nwhen AIX was considered supported, but nobody wants to put\nback those restrictions if we re-support AIX.  (See my gripe\nat [1], but I believe Heikki and Andres complained of this\nin more detail long ago.)\n\nHere is a modest proposal for fixing that in a clean way.\nLet's break TYPALIGN_DOUBLE into three values, TYPALIGN_DOUBLE\nfor float8 only, TYPALIGN_INT64 for 64-bit integral types\nincluding pointers, and TYPALIGN_MAX to represent MAXALIGN\nalignment regardless of which of the first two determine it.\nWe need TYPALIGN_MAX because that's the value composite\ntypes should use, so that their alignment doesn't change\nif somebody adds or deletes a column of a relevant type.\nGiven that design, the patch is pretty straightforward,\nand smaller than I feared it might be.  (Though I might\nhave missed a spot or two.)\n\nI think this is good cleanup and deserves consideration\nwhether we accept the AIX patch soon or not.\n\nA loose end that deserves mention is that I noticed we\nare very inconsistent about the length/alignment\nattributed to polymorphic types:\n\nselect typname, typlen, typalign from pg_type where typname like 'any%';\n         typname         | typlen | typalign \n-------------------------+--------+----------\n any                     |      4 | i\n anyarray                |     -1 | m\n anycompatible           |      4 | i\n anycompatiblearray      |     -1 | m\n anycompatiblemultirange |     -1 | m\n anycompatiblenonarray   |      4 | i\n anycompatiblerange      |     -1 | m\n anyelement              |      4 | i\n anyenum                 |      4 | i\n anymultirange           |     -1 | m\n anynonarray             |      4 | i\n anyrange                |     -1 | m\n(12 rows)\n\n(Previous to this patch, the 'm' entries were 'd'.)\n\nIn one sense this doesn't really matter, since no actual\nvalue should have any of these types attributed to it;\nbut it annoys me that they're not all alike.  I'm tempted to\nmake them all 4/'i' which seems to be the older convention.\n\nA more aggressive answer would be to change these to some\nactually-illegal values, in hopes of catching anyplace where\nwe did try to rely on the values.  But that seems like\nmaterial for a different patch.\n\n\t\t\tregards, tom lane\n\n[1] https://www.postgresql.org/message-id/581905.1769550155%40sss.pgh.pa.us\n\n"
    },
    {
      "name": "add_pgstatrecovery_system_view",
      "id": "<CABPTF7W+Nody-+P9y4PNk37-QWuLpfUrEonHuEhrX+Vx9Kq+Kw@mail.gmail.com>",
      "description": "Add pg_stat_recovery system view",
      "body_text": "Hi Hackers,\n\nThis patch series introduces pg_stat_recovery, a new view that exposes\nthe startup process’s internal recovery state at the SQL level. It\nfollows the pattern of pg_stat_wal_receiver, but focuses on WAL replay\nand recovery rather than WAL reception.\n\nThe view provides visibility into replay progress, recovery timing,\nand operational status—information that was previously scattered\nacross separate function calls or not exposed at all.\n\nAs Michael suggested [1][2], this view is intentionally independent of\nwalreceiver state, since the startup process can consume WAL from\nmultiple sources (archive, pg_wal, or streaming), not just streaming\nreplication.\n\nThe patch series:\n0001: Refactor: move XLogRecoveryCtlData struct to xlogrecovery.h\nMove the XLogRecoveryCtlData struct definition from xlogrecovery.c to\nxlogrecovery.h,\n\n0002: Add pg_stat_recovery system view\nIntroduces the core view with columns\n\n0003: Refactor: move XLogSource enum to xlogrecovery.h\nPreparatory refactoring to make XLogSource visible externally.\n\n0004: Add wal_source column to pg_stat_recovery\nAdds wal_source column showing where WAL was last read from:\n'archive', 'pg_wal', or 'stream'.\n\nExample usage on a standby:\n\nSELECT promote_triggered, pause_state, wal_source,\npg_size_pretty(pg_wal_lsn_diff(replay_end_lsn, last_replayed_end_lsn))\nFROM pg_stat_recovery;\n\npromote_triggered | pause_state | wal_source | pg_size_pretty\n-------------------+-------------+------------+----------------\nf | not paused | stream | 0 bytes\n\nFeedbacks welcome.\n\n[1] https://www.postgresql.org/message-id/aW13GJn_RfTJIFCa@paquier.xyz\n[2] https://www.postgresql.org/message-id/aW68b79-9U3WPZiz@paquier.xyz\n\n-- \nBest,\nXuneng\n"
    },
    {
      "name": "postgres_table_in_quote",
      "description": "PostgreSQL table inside a quoted section",
      "body_text": "Thanks for the report!\n\n> I ran this query:\n>\n>     SELECT id, name, status\n>     FROM users\n>     WHERE active = true;\n>\n> And got this result:\n>\n>  id | name  | status\n> ----+-------+--------\n>   1 | Alice | active\n>   2 | Bob   | active\n>\n> Is this expected?\n\nYes, that's the correct output."
    },
    {
      "name": "postgres_table_no_separator",
      "description": "PostgreSQL-style output without separator line",
      "body_text": "Quick results:\n\n column_name | data_type | is_nullable\n-------------+-----------+-------------\n id          | integer   | NO\n name        | text      | YES\n created_at  | timestamp | NO\n\nLooks good to me."
    }
  ]
}
